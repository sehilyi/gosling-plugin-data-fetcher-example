{"version":3,"sources":["../../gosling.js/dist/gosling.es.js","plugin/cistrome-datafetcher.js","App.js","index.js"],"names":["GoslingSchema","$ref","$schema","definitions","Aggregate","type","Assembly","AxisPosition","BAMData","additionalProperties","description","properties","extractJunction","indexUrl","junctionMinCoverage","loadMates","maxInsertSize","url","required","BEDDBData","exonIntervalFields","items","index","name","maxItems","minItems","genomicFields","valueFields","BIGWIGData","aggregation","binSize","column","end","start","value","BinAggregate","CSVData","chromosomeField","chromosomePrefix","genomicFieldsToConvert","headerNames","longToWideId","sampleLength","separator","Channel","anyOf","ChannelDeep","ChannelValue","Chromosome","Color","domain","field","legend","range","scale","scaleOffset","title","CoverageTransform","endField","groupField","newField","startField","DataDeep","DataTrack","_assignedHeight","_assignedWidth","_invalidTrack","_renderingId","assembly","centerRadius","data","endAngle","height","id","innerRadius","layout","linkingId","orientation","outerRadius","overlayOnPreviousTrack","prerelease","spacing","startAngle","style","subtitle","width","xAxis","xDomain","xOffset","yDomain","yOffset","zoomLimits","DataTransform","Datum","DisplaceTransform","boundingBox","isPaddingBP","padding","maxRows","method","Displacement","DisplacementType","DomainChr","chromosome","DomainChrInterval","interval","DomainGene","gene","DomainInterval","EventStyle","arrange","color","opacity","stroke","strokeOpacity","strokeWidth","ExonSplitTransform","fields","chrField","flag","FieldType","FilterTransform","GenomicDomain","GenomicLengthTransform","GoslingSpec","alignment","baselineY","dataTransform","displacement","experimental","mouseEvents","flipY","mark","overrideTemplate","responsiveSize","responsiveSpec","selectivity","spec","row","size","stretch","text","tooltip","tracks","visibility","x","x1","x1e","xe","y","y1","y1e","ye","arrangement","views","IncludeFilter","include","not","JSONData","values","JSONParseTransform","baseGenomicField","genomicField","genomicLengthField","Layout","LogBase","LogTransform","base","LogicalOperation","Mark","MatrixData","MouseEventsDeep","click","enableMouseOverOnMultipleMarks","groupMarksByField","mouseOver","rangeSelect","MultipleViews","MultivecData","categories","OneOfFilter","oneOf","Opacity","Orientation","OverlaidTrack","overlay","OverlaidTracks","PartialTrack","encoding","template","PluginData","options","PredefinedColors","Range","RangeFilter","inRange","ResponsiveSize","Row","clip","grid","SelectivityCondition","measure","operation","target","threshold","SingleTrack","SingleView","Size","SizeVisibilityCondition","conditionPadding","transitionPadding","StrConcatTransform","StrReplaceTransform","replace","from","to","Stroke","StrokeWidth","Style","align","background","backgroundOpacity","brush","curve","dashed","dx","dy","enableSmoothPath","inlineLegend","legendTitle","linePattern","linkConnectionType","linkMinHeight","linkStyle","matrixExtent","outline","outlineWidth","select","textAnchor","textFontSize","textFontWeight","textStroke","textStrokeWidth","SvTypeTransform","firstBp","posField","strandField","secondBp","TemplateTrack","Text","Tooltip","alt","format","Track","VCFData","ValueExtent","VectorData","VisibilityCondition","X","aggregate","axis","Y","baseline","flip","zeroBaseline","ZoomLevelVisibilityCondition","ZoomLimits","DEFAULT_VIEW_SPACING","colorToHex","colorStr","c","PIXI","rgb2hex","rgb","r","g","b","valueToRadian","v","max2","sa","ea","safeVal","Math","max","min","gap","radExtent","PI","cartesianToPolar","cx","cy","cos","sin","positionToRadian","atan","TEXT_STYLE_GLOBAL","fontSize","fontFamily","fontWeight","fill","lineJoin","strokeThickness","drawWithinLink","trackInfo","model","_a","_b","_c","_d","_e","_f","_g","_h","data2","dimensions","trackWidth","trackHeight","circular","trackInnerRadius","trackOuterRadius","trackRingSize","tcx","tcy","rowCategories","getChannelDomainArray","rowHeight","length","MIN_HEIGHT","forEach","rowCategory","rowPosition","encodedValue","filter","d","getValueUsingChannel","_a2","_b2","_c2","_d2","_e2","encodedPIXIProperty","color2","sort","a","isRibbon","abs","Is2DTrack","lineStyle","IsChannelDeep","baseY","pathForMouseEvent","beginFill","_x1","_x2","_x3","_x4","posX","posXE","posX1","posX1E","moveTo","bezierCurveTo","arc","Array","currentPath","points","endFill","lineTo","closePath","getMouseEventModel","addPolygonBasedEvent","midX","posS","posE","x12","x4","y4","eventPoints","d2","i","flatMap","x2","y2","x3","y3","bezier","Bezier","getLUT","morePoints","numSteps","constantY","step","theta","mx","my","push","addLineBasedEvent","console","warn","drawEdgeBundling","drawGrid","tm","theme","position","trackX","trackY","startX","endX","getChannelScale","graphics","pBackground","gridStrokeWidth","assignedHeight","tickCount","ceil","ticks","midR","farR","nearR","sPos","startRad","endRad","gridColor","gridStrokeType","gridStrokeDash","line","drawYGridQuantitative","drawRowGrid","DEFAULT_TEXT_STYLE","getTextStyle","merged","pixiTextStyle","drawColorLegend","HGC","tile","gLegend","selectAll","remove","offset","offsetRight","colorCategories","pBorder","paddingX","paddingY","cumY","maxWidth","recipe","labelTextStyle","labelColor","labelFontSize","labelFontWeight","labelFontFamily","map","reverse","category","textGraphic","libraries","anchor","addChild","textStyleObj","TextStyle","textMetrics","TextMetrics","measureText","backgroundStroke","drawRect","drawCircle","drawColorLegendCategories","drawColorLegendQuantitative","channelKey","channel","legendHeight","colorBarDim","top","left","legendX","legendY","colorScale","colorDomain","titleStr","labelTextStyle2","startValue","endValue","extent","keys","scaleOffsetSorted","s1","scaleLinear","s2","colorBrushes","append","attr","enter","BRUSH_HEIGHT","call","d3Drag","drag","on","startEvent","d3Selection","event","sourceEvent","endEvent","diffY","clientY","newScaleOffset","updateScaleOffsetFromOriginalSpec","shareScaleOffsetAcrossTracksAndTiles","draw","tickColor","tickEnd","TICK_STROKE_SIZE","drawBetweenLink","isRibon","prevX","prevY","t","movingRadius","t2","exp","log","logodds","getRadian","s","e","_x","_y","SUPPORTED_CHANNELS","drawMark","setChannelScale","_xScale","IsSingleTrack","track","yScale","_yScale","copy","zoomLevel","invert","radius","alphaTransition","markVisibility","actualOpacity","pos","addPointBasedEvent","drawPoint","tileSize","tilesetInfo","tile_size","getTilePosAndDimensions","gos","tilePos","tileX","tileWidth","xScale","tileUnitWidth","clipRow","baselineValue","staticBaseY","IsStackedMark","genomicChannel","getGenomicChannel","pivotedData","group","k","prevYEnd","get","barWidth","xs","markWidth","polygonForMouseEvents","ys","rowValue","drawBar","trackCenterX","trackCenterY","colorCategory","d1","drawLine","constantOpacity","constantStrokeWidth","constantStroke","genomicPosCategories","prevYEndByGPos","areaPointsTop","areaPointsBottom","genomicPosCategory","array","max$1","posTop","posBot","drawPolygon","reduce","concat","baselinePoints","areaPoints","baselineR","min$1","baselinePos","curPos","drawArea","RPAD","yCategories","cellHeight","rectWidth","rectHeight","markHeight","absoluteHeight","visualPropertyByChannel","polygonForMouseEvent","triHeight","polygon","x0","xm","rm","r0","r1","p0","p1","p2","p3","ym","y0","triangleLeft","triangleRight","triangleBottom","drawTriangle","_i","_j","rowGraphics","_a3","_f2","_g2","_h2","textsBeingUsed","localTextStyle","textGraphics","visible","alpha","metric","resolution","updateText","texture","baseTexture","scaleMode","SCALE_MODES","LINEAR","sprite","Sprite","centerPos","tw","minX","maxX","ropePoints","eventPointsFar","eventPointsNear","p","Point","pFar","pNear","rope","SimpleRope","h","w","drawText","curved","dashSize","gapSize","CURVE_HEIGHT","pType","pSize","PATTERN_GAP_SIZE","count2","drawRule","drawPreEmbellishment","clear","removeChildren","CIRCULAR","_k","_l","l","posStartInner","drawCircularOutlines","bg","isUndefined","alternatingBackground","drawBackground","baselineColor","drawChartOutlines","drawPostEmbellishment","yRange","getChannelRangeArray","isShowYAxis","th","yChannel","isLeft","outerR","innerPos","outerPos","SCALED_TICK_SIZE","SCALED_EXTENT_TICK_SIZE","axisHeight","currentR","scaledStartX","scaledEndX","styleConfig","txtStyle","txtWidth","drawCircularYAxis","title2","titleR","titleColor","titleBackground","drawCircularTitle","tx","ty","TICK_SIZE","drawLinearYAxis","drawRowLegend","resolveSuperposedTracks","IsDataTrack","IsOverlaidTrack","superpose","JSON","parse","stringify","resolved","subSpec","Object","assign","xAxisPosition","isIdenticalDataSpec","specs","definedSpecs","isIdentical","Set","getRandomValues","PREDEFINED_COLOR_STR_MAP","viridis","interpolateViridis","grey","interpolateGreys","warm","interpolateWarm","spectral","interpolateSpectral","cividis","interpolateCividis","bupu","interpolateBuPu","rdbu","interpolateRdBu","hot","interpolateYlOrBr","pink","interpolateRdPu","IsFlatTracks","_","find","IsDataDeep","IsChannelValue","IsDataDeepTileset","IsDomainArray","isArray$1","datum","getChannelKeysByType","IsXAxis","isFound","IsMouseEventsDeep","rnds8","Uint8Array","rng","crypto","bind","msCrypto","Error","REGEX","validate$2","uuid","test","_nodeId","_clockseq","byteToHex","toString","substr","arr","arguments","toLowerCase","TypeError","_lastMSecs","_lastNSecs","v1","buf","node","clockseq","seedBytes","random","msecs","Date","now","nsecs","dt","tl","tmh","n","v35","name2","version2","hashfunc","generateUUID","namespace","str","unescape","encodeURIComponent","bytes","charCodeAt","stringToBytes","parseInt","slice","set","err","DNS","URL","getOutputLength","inputLength8","safeAdd","lsw","md5cmn","q","num","cnt","md5ff","md5gg","md5hh","md5ii","v4","rnds","f","z","ROTL","getStyleOverridden","parent","child","traverseTracks","callback","ts","view","traverseTracksAndViews","traverseViewArrangements","convertToFlatTracks","newTracks","IsOverlaidTracks","newSpec","traverseToFixSpecDownstream","parentDef","static","spread","original","spreadTracksByData","linkID","displaceTransform","o","isAdded","msg","input","output","length32","hexTab","hex","charAt","md5ToHexEncodedArray","len","olda","oldb","oldc","oldd","wordsToMd5","length8","Uint32Array","bytesToWords","K","H","isArray","prototype","N","M","j","pow","floor","_i2","W","_t","_t2","T","GoslingTemplates","channels","mapping","formatDecimalParts","toExponential","indexOf","coefficient","exponent","NaN","prefixExponent","re","formatSpecifier","specifier","match","exec","FormatSpecifier","sign","symbol","zero","comma","precision","trim","this","formatRounded","exponent2","join","formatTypes","toFixed","round","toLocaleString","toPrecision","toUpperCase","identity$1","locale","format$1","formatPrefix","map$1","prefixes","formatLocale","locale2","grouping","thousands","group2","Number","substring","currencyPrefix","currency","currencySuffix","decimal","numerals","formatNumerals","String","percent","minus","nan","newFormat","type2","prefix","suffix","formatType","maybeSuffix","format2","valuePrefix","valueSuffix","valueNegative","isNaN","out","i1","i0","formatTrim","Infinity","f2","value2","CHROM_SIZE_HG38","chr1","chr2","chr3","chr4","chr5","chr6","chr7","chr8","chr9","chr10","chr11","chr12","chr13","chr14","chr15","chr16","chr17","chr18","chr19","chr20","chr21","chr22","chrX","chrY","CHROM_SIZE_HG19","chrM","CHROM_SIZE_HG18","CHROM_SIZE_HG17","CHROM_SIZE_HG16","CHROM_SIZE_MM10","CHROM_SIZE_MM9","getRelativeGenomicPosition","absPos","entries","GET_CHROM_SIZES","absInterval","CRHOM_SIZES","hg38","basePath","freeze","getChromInterval","total","getChromTotalSize","path","hg19","hg18","hg17","hg16","mm10","mm9","unknown","chr","MAX_VALUE","chromSize","interval2","sum2","current","TICK_COLOR","AxisTrack","config2","factory2","config","availableOptions","defaultOptions","definePluginTrack","datatype","local","thumbnail","DOMParser","parseFromString","documentElement","labelPosition","labelTextOpacity","trackBorderWidth","trackBorderColor","tickPositions","backgroundColor","showMousePosition","context2","utils","absToChr","colorToHex2","pixiTextToSvg","svgLine","createTickText","hashValue","AxisTrackClass","dataConfig","animate","chromInfoPath","isShowGlobalMousePosition","searchField","allTexts","pTicksCircular","Graphics","pTicks","pMain","gTicks","tickTexts","pixiTextConfig","tickWidth","tickHeight","tickTextSeparation","pubSubs","hideMousePosition","is2d","server","tilesetUid","chrPositions","chromLengths","cumPositions","chromInfo","rerender","removeChild","gBoundTicks","leftBoundTick","rightBoundTick","texts","info","chromName","options2","force","strOptions","prevOptions","initBoundsTicks","initChromLabels","viewWidth","fPlain","fPrecision","tickFormat","lineYStart","reverseOrientation","lineYEnd","formatTick","flipText","tickLine","all","cumPos","chromLen","vpLeft","vpRight","numTicks","tick","isInteger","yPadding","newText","pop","chrText","addCurvedText","textObj","factor","baseR","drawBoundsTicks","chrom","xCumPos","viewportMidX","updateTransform","numTicksDrawn","drawTicks","importance","hideOverlaps","tree","RBush","getBounds","boxWithMargin","minY","m","maxY","collides","insert","newPosition","newXScale","newYScale","document","createElement","setAttribute","appendChild","PixiTrack","BrushTrack","BrushTrackClass","params","registerViewportChanged","removeViewportChanged","setDomainsCallback","uid","hasFromView","projectionXDomain","viewportXDomain","viewportYDomain","prevExtent","RR","circularBrushData","getBrushData","gBrush","gMain","projectionFillColor","projectionStrokeColor","projectionFillOpacity","projectionStrokeOpacity","cursor","dragged","viewportChanged","layerX","startY","layerY","endY","radDiff","atan2","sto","eto","cropExtent","offsetedS","offsetedE","updateBrush","viewportXScale","viewportYScale","newDimensions","SVGTrack","args","filterData","filter2","not3","oneOf2","IsRangeFilter","IsIncludeFilter","includes","concatString","concat2","strs","replaceString","from2","replaceAll","calculateData","calculateGenomicLength","inferSvType","pos1","pos2","strand1","strand2","_pos","_strand","aggregateCoverage","coverage","curStart","curEnd","groupName","coverageRecords","entry","key","displace","occupiedSpaceInRows","rowIndex","findIndex","boundingBoxes","overlapped","box","trial","splitExon","split","newRows","newValue","parseSubJSON","variant","aggregateData","getChannelKeysByAggregateFnc","nChannelKeys","nFieldSpec","nField","qChannelKeys","aggregated","uniqueCategories","failed","qFieldSpec","qField","CSVDataFetcher","CSVDataFetcherClass","tilesetInfoLoading","chromosomeSizes","chromosomeCumPositions","chromosomePositions","prevEndPosition","chrStr","positionInfo","chromSizes","chrToAbs","chromPos","totalLength","dataPromise","fetchCSV","error","fetch","then","response","ok","Promise","reject","status","textWithHeader","dsvFormat","successfullyGotChrInfo","cField","json","newJson","catch","retVal","max_zoom","max_width","min_pos","max_pos","generateTilesetInfo","receivedTiles","tileIds","tiles","validTileIds","tilePromises","tileId","parts","validTileId","tilePositionId","tsInfo","tabularData","allGenomicFields","sizeLimit","sampleSize","RawDataFetcher","RawDataFetcherClass","projection","axisPositionHorizontal","commonjsGlobal","globalThis","window","global","self","getAugmentedNamespace","__esModule","defineProperty","getOwnPropertyDescriptor","enumerable","dist$1","bigwig","interopRequireDefault","exports","module","obj","runtime","runtime2","undefined$1","Op","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","configurable","writable","wrap","innerFn","outerFn","self2","tryLocsList","protoGenerator","Generator","generator","create","Context3","_invoke","state","GenStateSuspendedStart","arg","GenStateExecuting","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","done","GenStateSuspendedYield","makeInvokeMethod","fn","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","invoke","resolve2","result","resolve","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","resultName","next","nextLoc","pushTryEntry","locs","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","next2","displayName","isGeneratorFunction","genFun","ctor","constructor","setPrototypeOf","__proto__","awrap","async","iter","object","key2","skipTempReset","prev","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","Function","regenerator","asyncToGenerator","asyncGeneratorStep","gen","_next","_throw","apply","classCallCheck","instance","Constructor","createClass","_defineProperties2","props","descriptor","protoProps","staticProps","inherits","_setPrototypeOf2","o2","setPrototypeOf$1","subClass","superClass","possibleConstructorReturn","_typeof$2","_typeof3","obj2","assertThisInitialized","ReferenceError","assertThisInitialized$1","_getPrototypeOf3","blockView","binary_parser","vmBrowser","runInThisContext","code","context","_typeof$1","Context$2","scopes","isAsync","bitFields","tmpVariableCount","references","generateVariable","generateOption","val","generateError","interpolate","pushCode","generateTmpVariable","pushPath","popPath","pushScope","popScope","addReference","alias","requested","markResolved","markRequested","aliasList","getUnresolvedReferences","re2","matches","Context","long","Long$1","wasm","WebAssembly","Instance","Module","low","high","unsigned","isLong","__isLong__","INT_CACHE","UINT_CACHE","fromInt","cachedObj","cache2","fromBits","fromNumber","UZERO","ZERO","TWO_PWR_64_DBL","MAX_UNSIGNED_VALUE","TWO_PWR_63_DBL","MIN_VALUE","neg","TWO_PWR_32_DBL","lowBits","highBits","pow_dbl","fromString","radix","RangeError","radixToPower","power","mul","add","fromValue","TWO_PWR_16_DBL","TWO_PWR_24","ONE","UONE","NEG_ONE","LongPrototype","_typeof","toInt","toNumber","isZero","isNegative","eq","radixLong","div","rem1","sub","rem","remDiv","digits","getHighBits","getHighBitsUnsigned","getLowBits","getLowBitsUnsigned","getNumBitsAbs","bit","eqz","isPositive","isOdd","isEven","equals","other","notEquals","neq","ne","lessThan","comp","lt","lessThanOrEqual","lte","le","greaterThan","gt","greaterThanOrEqual","gte","ge","compare","thisNeg","otherNeg","negate","addend","a48","a32","a16","a00","b48","b32","b16","c48","c32","c16","c00","subtract","subtrahend","multiply","multiplier","get_high","b00","divide","divisor","approx","res","div_u","div_s","toUnsigned","shru","shr","shl","log2","LN2","delta","approxRes","approxRem","modulo","rem_u","rem_s","mod","and","or","xor","shiftLeft","numBits","shiftRight","shiftRightUnsigned","shr_u","toSigned","toBytes","toBytesLE","toBytesBE","hi","lo","fromBytes","fromBytesLE","fromBytesBE","Buffer$1","require$$0","Buffer","vm","Context$1","Long","PRIMITIVE_TYPES","UInt8","UInt16LE","UInt16BE","UInt32LE","UInt32BE","Int8","Int16LE","Int16BE","Int32LE","Int32BE","FloatLE","FloatBE","DoubleLE","DoubleBE","UInt64","Int64","aliasRegistry","FUNCTION_PREFIX","BIT_RANGE","NAME_MAP","Skip","Choice","Nest","Bit","Itf8","Ltf8","Parser","varName","head","compiled","endian","constructorFn","setNextParser","typeWithoutEndian","namely","skip","assert","string","zeroTerminated","greedy","stripNull","buffer","readUntil","lengthInBytes","choice","tag","choices","nest","endianess","getCode","ctx","addAliasedCode","addRawCode","generate","resolveReferences","compile","src","sizeOf","elementSize","buffer2","parser","generateAssert","formatter","generateFormatter","generateNext","generateBit","val1","val2","bitOffset","isBigEndian","generateSkip","generateString","generateBuffer","clone","generateArray","counter","lhs","item","isHash","tempVar","generateChoiceCase","generateChoice","defaultChoice","generateNest","nestVar","itf8","generateItf8","countFlags","ltf8","generateLtf8","dist","AbortablePromiseCache$1","abortcontrollerPonyfill","cjsPonyfill","_classCallCheck","_defineProperties","_createClass","_getPrototypeOf","_setPrototypeOf","_assertThisInitialized","_possibleConstructorReturn","_createSuper$3","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","valueOf","_isNativeReflectConstruct$3","Super","NewTarget","_get","property","receiver","target2","property2","receiver2","_superPropBase","desc","Emitter","Emitter2","listeners","stack","splice","stackToCall","listener","once","removeEventListener","defaultPrevented","AbortSignal$1","_Emitter","_inherits","AbortSignal2","_super","_this","aborted","onabort","AbortController$1","AbortController2","Event","createEvent","initEvent","createEventObject","bubbles","cancelable","signal","dispatchEvent","AbortController","AbortSignal","abortableFetch","patchTargets","_patchTargets","fetch2","_patchTargets$Request","Request","NativeRequest","NativeAbortController","_patchTargets$__FORCE","__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL","init2","request","realFetch","isPrototypeOf","abortError","DOMException","cancellation","addEventListener","race","_cjsPonyfill","getGlobal","AggregateAbortController$1","_interopRequireDefault$9","default","_createClass2$7","_defineProperty2$7","_classCallCheck2$8","_abortcontrollerPonyfill$1","NullSignal","NullSignal2","AggregateAbortController","AggregateAbortController2","signals","handleAborted","delete","abortController","abort","AggregateStatusReporter$1","_interopRequireDefault$8","_classCallCheck2$7","_createClass2$6","_defineProperty2$6","AggregateStatusReporter","AggregateStatusReporter2","callbacks","currentMessage","message","elt","_interopRequireDefault$7","_typeof2","_classCallCheck2$6","_createClass2$5","_defineProperty2$5","_abortcontrollerPonyfill","_AggregateAbortController","_AggregateStatusReporter","AbortablePromiseCache","AbortablePromiseCache2","_ref","cache","fillCallback","statusCallback","aborter","statusReporter","addCallback","newEntry","promise","settled","addSignal","evict","has","cacheEntry","checkSinglePromise","cachedEntry","keyIter","deleteCount","checkForSingleAbort","_interopRequireDefault$6","_default","inflateSync","Buffer$2","unzlibSync","zlib","require$$8","range$1","_interopRequireDefault$5","_classCallCheck2$5","_createClass2$4","_defineProperty2$4","Range2","arg1","arg2","ranges","getRanges","rangeOrder","oranges","nxt","s0","l0","l1","or2","lapMin","lapMax","tot","rl","ri","tmpa","tmpb","util$6","wrapNativeSuper","isNativeFunction","isNativeReflectConstruct","isNativeReflectConstruct$1","_construct","Parent","Class","Parent2","args2","Class2","getPrototypeOf$1","isNativeFunction$1","construct$1","_wrapNativeSuper","_cache","Map","Wrapper","_interopRequireDefault$4","groupBlocks","blocks","b0","b1","lastBlock","lastBlockEnd","blockGroups","checkAbortSignal","abortBreakPoint","_abortBreakPoint","AbortError","_regenerator$4","_asyncToGenerator2$4","_classCallCheck2$4","_assertThisInitialized2$1","_inherits2$2","_possibleConstructorReturn2$2","_getPrototypeOf2$2","_wrapNativeSuper2","_defineProperty2$3","_createSuper$2","_isNativeReflectConstruct$2","_Error","AbortError2","_callee","_context","_interopRequireDefault$3","BlockView","_regenerator$3","_asyncToGenerator2$3","_classCallCheck2$3","_createClass2$3","_defineProperty2$2","_binaryParser$2","_abortablePromiseCache$2","_zlib","_quickLru$2","require$$9","_range","_util","ownKeys$2","enumerableOnly","getOwnPropertySymbols","symbols","sym","_objectSpread$2","source","getOwnPropertyDescriptors","defineProperties","BlockView2","bbi2","refsByName","cirTreeOffset","cirTreeLength","isCompressed","blockType","maxSize","_fill","requestData","_yield$_this$bbi$read","bbi","read","alloc","_choices","summaryParser","uint32","float","leafParser","uint8","uint16","uint64","bigBedParser","int32","bigWigParser","getParsers$1","_readWigData","_callee3","chrName","observer","opts","chrId","_yield$this$cirTreePr","cirBlockSize","blocksToFetch","outstanding","cirFobRecur2","filterFeats","cirFobStartFetch","cirFobRecur","_this2","_context3","cirTreePromise","readUInt32BE","readUInt32LE","startChrom","startBase","endChrom","endBase","_callee2","off","fr","level","resultBuffer","_context2","featureCache","contains","readFeatures","t0","_x8","_x9","_x10","maxCirBlockSpan","spans","blockSpan","union","cirBlockData","blockOffset","blockSize","recurOffsets","_x5","_x6","_x7","startOffset","features","currOffset","byteLength","items2","chromId","maxScore","minScore","score","sumData","validCnt","summary","coordFilter","uniqueId","results","itemSpan","itemStep","blockStart","_readFeatures","_callee5","blockGroupsToFetch","_this3","_args5","_context5","_ref2","_callee4","blockGroup","_context4","block","resultData","parseSummaryBlock","parseBigWigBlock","parseBigBedBlock","_x13","_x11","_x12","range2","extendStatics","b2","__extends","__","isFunction","_enable_super_gross_mode_that_will_cause_bad_things","useDeprecatedSynchronousErrorHandling","hostReportError","setTimeout","empty$1","closed","isObject","UnsubscriptionErrorImpl","UnsubscriptionErrorImpl2","errors","UnsubscriptionError","Subscription","Subscription2","unsubscribe2","_parentOrParents","_subscriptions","_ctorUnsubscribe","_unsubscribe","empty2","unsubscribe","flattenUnsubscriptionErrors","teardown","subscription","EMPTY","tmp","subscriptions","subscriptionIndex","errs","rxSubscriber","Subscriber","Subscriber2","destinationOrNext","syncErrorValue","syncErrorThrown","syncErrorThrowable","isStopped","destination","SafeSubscriber","subscriber","_error","_complete","_unsubscribeAndRecycle","SafeSubscriber2","_parentSubscriber","observerOrNext","__tryOrSetError","__tryOrUnsub","wrappedComplete","canReportError","closed_1","observable","identity","pipe","fns","pipeFromArray","Observable","Observable2","subscribe2","_isScalar","_subscribe","lift","operator","observable2","subscribe","sink","nextOrObserver","toSubscriber","_trySubscribe","promiseCtor","getPromiseCtor","operations","toPromise","ObjectUnsubscribedError","ObjectUnsubscribedErrorImpl2","SubjectSubscription","SubjectSubscription2","subject","observers","subscriberIndex","SubjectSubscriber","SubjectSubscriber2","Subject","Subject2","hasError","thrownError","AnonymousSubject","copy2","asObservable","AnonymousSubject2","refCount","RefCountOperator","RefCountOperator2","connectable","_refCount","refCounter","RefCountSubscriber","connection","connect","RefCountSubscriber2","refCount2","sharedConnection","_connection","ConnectableObservable","ConnectableObservable2","subjectFactory","_isComplete","getSubject","_subject","ConnectableSubscriber","connectableObservableDescriptor","connectableProto","ConnectableSubscriber2","GroupByOperator","GroupByOperator2","keySelector","elementSelector","durationSelector","subjectSelector","GroupBySubscriber","GroupBySubscriber2","groups","attemptedToUnsubscribe","count","_group","element","groupedObservable","GroupedObservable","duration","GroupDurationSubscriber","removeGroup","GroupDurationSubscriber2","GroupedObservable2","groupSubject","refCountSubscription","InnerRefCountSubscription","InnerRefCountSubscription2","BehaviorSubject","BehaviorSubject2","_value","getValue","AsyncAction","AsyncAction2","scheduler","work","pending","schedule","delay2","recycleAsyncId","delay","requestAsyncId","setInterval","flush","clearInterval","execute","_execute","errored","errorValue","actions","Action2","QueueAction","QueueAction2","Scheduler","Scheduler2","SchedulerAction","AsyncScheduler","AsyncScheduler2","active","scheduled","action","shift","QueueScheduler","QueueScheduler2","queueScheduler","queue","empty","emptyScheduled","isScheduler","NotificationKind","subscribeToArray","scheduleArray","fromArray","of","throwError","dispatch$7","Notification","Notification2","kind","hasValue","observe","do","accept","toObservable","createNext","undefinedValueNotification","createError","createComplete","completeNotification","ObserveOnOperator","ObserveOnOperator2","ObserveOnSubscriber","ObserveOnSubscriber2","dispatch","notification","scheduleMessage","ObserveOnMessage","ReplaySubject","ReplaySubject2","bufferSize","windowTime2","POSITIVE_INFINITY","_events","_infiniteTimeWindow","_bufferSize","_windowTime","nextInfiniteTimeWindow","nextTimeWindow","ReplayEvent","_getNow","_trimBufferThenGetEvents","eventsCount","spliceCount","time","time2","AsyncSubject","AsyncSubject2","hasNext","hasCompleted","nextHandle","RESOLVED","activeHandles","findAndClearHandle","Immediate","cb","AsapAction","AsapAction2","AsapScheduler","AsapScheduler2","asapScheduler","asap","asyncScheduler","async$1","AnimationFrameAction","AnimationFrameAction2","requestAnimationFrame","cancelAnimationFrame","AnimationFrameScheduler","AnimationFrameScheduler2","animationFrameScheduler","animationFrame","VirtualTimeScheduler","VirtualTimeScheduler2","maxFrames","VirtualAction","frame","frameTimeFactor","VirtualAction2","sortActions","noop$1","ArgumentOutOfRangeError","ArgumentOutOfRangeErrorImpl2","EmptyError","EmptyErrorImpl2","TimeoutError","TimeoutErrorImpl2","project","thisArg","MapOperator","MapOperator2","MapSubscriber","MapSubscriber2","dispatch$6","callbackFunc","innerArgs","dispatchNext$3","dispatch$5","dispatchError","dispatchNext$2","OuterSubscriber","OuterSubscriber2","notifyNext","outerValue","innerValue","outerIndex","innerIndex","innerSub","notifyError","notifyComplete","InnerSubscriber","InnerSubscriber2","getSymbolIterator","isArrayLike","isPromise","subscribeTo","obs","iterator$1","return","subscribeToResult","outerSubscriber","innerSubscriber","NONE","CombineLatestOperator","CombineLatestOperator2","resultSelector","CombineLatestSubscriber","CombineLatestSubscriber2","observables","toRespond","unused","_outerValue","oldVal","_tryResultSelector","isInteropObservable","observable$1","scheduleObservable","schedulePromise","isIterable","scheduleIterable","SimpleInnerSubscriber","SimpleInnerSubscriber2","SimpleOuterSubscriber","SimpleOuterSubscriber2","innerSubscribe","mergeMap","concurrent","ii","MergeMapOperator","MergeMapOperator2","MergeMapSubscriber","MergeMapSubscriber2","_tryNext","_innerSub","ish","innerSubscription","mergeAll","concatAll","concat$1","defer","observableFactory","forkJoinInternal","sources","completed","emitted","_loop_1","i2","i3","setupSubscription","sourceObj","eventName","handler","isEventTarget","source_1","isJQueryStyleEventEmitter","source_2","addListener","removeListener","isNodeStyleEventEmitter","source_3","dispatch$4","condition","needIterate","iterate","conditionResult","isNumeric","parseFloat","dispatch$3","period","merge$1","last2","NEVER","dispatch$2","not$1","pred","notPred","predicate","FilterOperator","FilterOperator2","FilterSubscriber","FilterSubscriber2","race$1","RaceOperator","RaceOperator2","RaceSubscriber","RaceSubscriber2","hasFirst","dispatch$1","timer","dueTime","periodOrScheduler","due","zip$1","ZipOperator","ZipOperator2","ZipSubscriber","ZipSubscriber2","iterators","StaticArrayIterator","StaticIterator","ZipBufferIterator","iterator2","stillUnsubscribed","notifyInactive","checkIterators","shouldComplete","_tryresultSelector","StaticIterator2","nextResult","StaticArrayIterator2","ZipBufferIterator2","isComplete","_esm5","noop","isObservable","bindCallback","bindNodeCallback","combineLatest","forkJoin","first_1","resultSelector_1","fromEvent","fromEventPattern","addHandler","removeHandler","retValue","initialStateOrOptions","resultSelectorOrObservable","initialState","iif","trueResult","falseResult","merge","never","onErrorResumeNext","onErrorResumeNext$1","first2","remainder","subNext","pairs","partition","using","resourceFactory","resource","zip","require$$12$1","audit","AuditOperator","AuditOperator2","AuditSubscriber","AuditSubscriber2","throttled","clearThrottle","BufferOperator","BufferOperator2","closingNotifier","BufferSubscriber","BufferSubscriber2","BufferCountOperator","BufferCountOperator2","startBufferEvery","subscriberClass","BufferSkipCountSubscriber","BufferCountSubscriber","BufferCountSubscriber2","BufferSkipCountSubscriber2","buffers","BufferTimeOperator","BufferTimeOperator2","bufferTimeSpan","bufferCreationInterval","maxBufferSize","BufferTimeSubscriber","Context2","BufferTimeSubscriber2","contexts","openContext","timespanOnly","timeSpanOnlyState","closeAction","dispatchBufferTimeSpanOnly","closeState","creationState","dispatchBufferClose","dispatchBufferCreation","filledBufferContext","context_1","onBufferFull","context_2","closeContext","prevContext","BufferToggleOperator","BufferToggleOperator2","openings","closingSelector","BufferToggleSubscriber","BufferToggleSubscriber2","closeBuffer","openBuffer","trySubscribe","BufferWhenOperator","BufferWhenOperator2","BufferWhenSubscriber","BufferWhenSubscriber2","subscribing","closingSubscription","CatchOperator","CatchOperator2","selector","CatchSubscriber","CatchSubscriber2","err2","concatMap","CountOperator","CountOperator2","CountSubscriber","CountSubscriber2","_tryPredicate","DebounceOperator","DebounceOperator2","DebounceSubscriber","DebounceSubscriber2","emitValue","durationSubscription","DebounceTimeOperator","DebounceTimeOperator2","DebounceTimeSubscriber","DebounceTimeSubscriber2","debouncedSubscription","lastValue","clearDebounce","dispatchNext$1","debouncedNext","defaultIfEmpty","defaultValue","DefaultIfEmptyOperator","DefaultIfEmptyOperator2","DefaultIfEmptySubscriber","DefaultIfEmptySubscriber2","isEmpty","isDate","DelayOperator","DelayOperator2","DelaySubscriber","DelaySubscriber2","queue2","delay_1","_schedule","scheduleNotification","DelayMessage","DelayWhenOperator","DelayWhenOperator2","delayDurationSelector","DelayWhenSubscriber","DelayWhenSubscriber2","delayNotifierSubscriptions","_innerValue","_outerIndex","_innerIndex","removeSubscription","tryComplete","delayNotifier","tryDelay","subscriptionIdx","notifierSubscription","SubscriptionDelayObservable","SubscriptionDelayObservable2","subscriptionDelay","SubscriptionDelaySubscriber","SubscriptionDelaySubscriber2","sourceSubscribed","subscribeToSource","DeMaterializeOperator","DeMaterializeOperator2","DeMaterializeSubscriber","DeMaterializeSubscriber2","DistinctOperator","DistinctOperator2","flushes","DistinctSubscriber","DistinctSubscriber2","_useKeySelector","_finalizeNext","distinctUntilChanged","compare2","DistinctUntilChangedOperator","DistinctUntilChangedOperator2","DistinctUntilChangedSubscriber","DistinctUntilChangedSubscriber2","hasKey","throwIfEmpty","errorFactory","defaultErrorFactory","ThrowIfEmptyOperator","ThrowIfEmptyOperator2","ThrowIfEmptySubscriber","ThrowIfEmptySubscriber2","take","TakeOperator","TakeOperator2","TakeSubscriber","TakeSubscriber2","EveryOperator","EveryOperator2","EverySubscriber","EverySubscriber2","everyValueMatch","SwitchFirstOperator","SwitchFirstOperator2","SwitchFirstSubscriber","SwitchFirstSubscriber2","hasSubscription","ExhaustMapOperator","ExhaustMapOperator2","ExhaustMapSubscriber","ExhaustMapSubscriber2","tryNext","ExpandOperator","ExpandOperator2","ExpandSubscriber","ExpandSubscriber2","subscribeToProjection","FinallyOperator","FinallyOperator2","FinallySubscriber","FinallySubscriber2","FindValueOperator","FindValueOperator2","yieldIndex","FindValueSubscriber","FindValueSubscriber2","IgnoreElementsOperator","IgnoreElementsOperator2","IgnoreElementsSubscriber","IgnoreElementsSubscriber2","IsEmptyOperator","IsEmptyOperator2","IsEmptySubscriber","IsEmptySubscriber2","isEmpty2","takeLast","TakeLastOperator","TakeLastOperator2","TakeLastSubscriber","TakeLastSubscriber2","ring","idx","MapToOperator","MapToOperator2","MapToSubscriber","MapToSubscriber2","MaterializeOperator","MaterializeOperator2","MaterializeSubscriber","MaterializeSubscriber2","scan","accumulator","seed","hasSeed","ScanOperator","ScanOperator2","ScanSubscriber","ScanSubscriber2","_seed","acc","MergeScanOperator","MergeScanOperator2","MergeScanSubscriber","MergeScanSubscriber2","multicast","subjectOrSubjectFactory","MulticastOperator","MulticastOperator2","OnErrorResumeNextOperator","OnErrorResumeNextOperator2","nextSources","OnErrorResumeNextSubscriber","OnErrorResumeNextSubscriber2","subscribeToNextSource","PairwiseOperator","PairwiseOperator2","PairwiseSubscriber","PairwiseSubscriber2","hasPrev","pair","plucker","currentProp","RepeatOperator","RepeatOperator2","RepeatSubscriber","RepeatSubscriber2","RepeatWhenOperator","RepeatWhenOperator2","notifier","RepeatWhenSubscriber","RepeatWhenSubscriber2","sourceIsBeingSubscribedTo","retries","subscribeToRetries","retriesSubscription","notifications","RetryOperator","RetryOperator2","RetrySubscriber","RetrySubscriber2","RetryWhenOperator","RetryWhenOperator2","RetryWhenSubscriber","RetryWhenSubscriber2","SampleOperator","SampleOperator2","sampleSubscriber","SampleSubscriber","SampleSubscriber2","SampleTimeOperator","SampleTimeOperator2","SampleTimeSubscriber","SampleTimeSubscriber2","dispatchNotification","SequenceEqualOperator","SequenceEqualOperator2","compareTo","comparator","SequenceEqualSubscriber","SequenceEqualSubscriber2","_oneComplete","SequenceEqualCompareToSubscriber","emit","checkValues","areEqual","nextB","completeB","SequenceEqualCompareToSubscriber2","shareSubjectFactory","SingleOperator","SingleOperator2","SingleSubscriber","SingleSubscriber2","seenValue","applySingleValue","singleValue","SkipOperator","SkipOperator2","SkipSubscriber","SkipSubscriber2","SkipLastOperator","SkipLastOperator2","_skipCount","SkipLastSubscriber","SkipLastSubscriber2","_count","_ring","skipCount","currentIndex","oldValue","SkipUntilOperator","SkipUntilOperator2","SkipUntilSubscriber","SkipUntilSubscriber2","SkipWhileOperator","SkipWhileOperator2","SkipWhileSubscriber","SkipWhileSubscriber2","skipping","tryCallPredicate","SubscribeOnObservable","SubscribeOnObservable2","delayTime","SubscribeOnOperator","SubscribeOnOperator2","switchMap","SwitchMapOperator","SwitchMapOperator2","SwitchMapSubscriber","SwitchMapSubscriber2","TakeUntilOperator","TakeUntilOperator2","takeUntilSubscriber","TakeUntilSubscriber","TakeUntilSubscriber2","TakeWhileOperator","TakeWhileOperator2","inclusive","TakeWhileSubscriber","TakeWhileSubscriber2","nextOrComplete","predicateResult","DoOperator","DoOperator2","TapSubscriber","TapSubscriber2","_tapNext","_tapError","_tapComplete","defaultThrottleConfig","leading","trailing","ThrottleOperator","ThrottleOperator2","ThrottleSubscriber","ThrottleSubscriber2","_leading","_trailing","_hasValue","_sendValue","_throttled","send","throttle","tryDurationSelector","throttlingDone","ThrottleTimeOperator","ThrottleTimeOperator2","ThrottleTimeSubscriber","ThrottleTimeSubscriber2","_hasTrailingValue","_trailingValue","dispatchNext","TimeInterval","timeoutWith","withObservable","absoluteTimeout","waitFor","TimeoutWithOperator","TimeoutWithOperator2","TimeoutWithSubscriber","TimeoutWithSubscriber2","scheduleTimeout","dispatchTimeout","Timestamp","timestamp2","timestamp","toArrayReducer","WindowOperator$1","WindowOperator2","windowBoundaries","windowSubscriber","WindowSubscriber$1","sourceSubscription","WindowSubscriber2","openWindow","prevWindow","newWindow","WindowCountOperator","WindowCountOperator2","windowSize","startWindowEvery","WindowCountSubscriber","WindowCountSubscriber2","windows","window_1","WindowTimeOperator","WindowTimeOperator2","windowTimeSpan","windowCreationInterval","maxWindowSize","WindowTimeSubscriber","CountedSubject","CountedSubject2","_numberOfNextedValues","WindowTimeSubscriber2","window2","dispatchWindowClose","dispatchWindowCreation","dispatchWindowTimeSpanOnly","numberOfNextedValues","closeWindow","window_2","timeSpanState","WindowToggleOperator","WindowToggleOperator2","WindowToggleSubscriber","WindowToggleSubscriber2","openSubscription","context_3","context_4","inner","WindowOperator","WindowSubscriber","unsubscribeClosingNotification","closingNotification","WithLatestFromOperator","WithLatestFromOperator2","WithLatestFromSubscriber","WithLatestFromSubscriber2","found","_tryProject","operators","auditTime","bufferCount","bufferTime","bufferToggle","bufferWhen","catchError","combineAll","concatMapTo","innerObservable","debounce","debounceTime","delayFor","delayWhen","dematerialize","distinct","distinctUntilKeyChanged","elementAt","hasDefaultValue","endWith","every","exhaust","exhaustMap","expand","finalize","first","groupBy","ignoreElements","last","mapTo","materialize","comparer","mergeMapTo","mergeScan","observeOn","pairwise","pluck","properties2","publish","publishBehavior","publishLast","publishReplay","selectorOrScheduler","repeat","repeatWhen","retry","retryWhen","sample","sampleTime","sequenceEqual","share","shareReplay","configOrBufferSize","windowTime","useRefCount","shareReplayOperator","single","skipLast","skipUntil","skipWhile","startWith","subscribeOn","switchAll","switchMapTo","takeUntil","takeWhile","tap","throttleTime","timeInterval","timeout","toArray","windowCount","windowToggle","windowWhen","withLatestFrom","zipAll","require$$13$1","_interopRequireDefault$2","BBI","_regenerator$2","_asyncToGenerator2$2","_classCallCheck2$2","_createClass2$2","_defineProperty2$1","_binaryParser$1","_genericFilehandle","require$$7","_rxjs$1","_operators$1","_abortablePromiseCache$1","_quickLru$1","_blockView$1","ownKeys$1","_objectSpread$1","BIG_WIG_MAGIC","BIG_BED_MAGIC","getParsers","isBE","headerParser","totalSummaryParser","double","chromTreeParser","isLeafNode","BBI2","_getHeader","filehandle","renameRefSeqs","RemoteFile","LocalFile","headerCache","_getHeader2","header","chroms","_getMainHeader","_readChromTree","_getMainHeader2","requestSize","_yield$this$bbi$read","ret","tail","_args3","_isBigEndian","fileType","magic","asOffset","totalSummaryOffset","autoSql","totalSummary","readInt32LE","readInt32BE","_readChromTree2","refsByNumber","chromTreeOffset","unzoomedDataOffset","_yield$this$bbi$read2","keySize","leafNodeParser","nonleafNodeParser","bptReadNode","currentOffset","_ret$result","leafRet","_leafRet$result","_key","refId","refSize","refRec","nextNodes","_n","nonleafRet","childOffset","_getUnzoomedView","_callee6","_yield$this$getHeader","unzoomedIndexOffset","zoomLevels","uncompressBufSize","nzl","cirLen","_context6","getHeader","dataOffset","_getFeatureStream","_callee7","refName","_args7","_context7","basesPerSpan","getView","readWigData","_getFeatures","_callee8","ob","_args8","_context8","getFeatureStream","curr","_x14","_interopRequireDefault$1","BigWig","_regenerator$1","_asyncToGenerator2$1","_classCallCheck2$1","_createClass2$1","_inherits2$1","_possibleConstructorReturn2$1","_getPrototypeOf2$1","_blockView","_createSuper$1","_isNativeReflectConstruct$1","_BBI","BigWig2","_getView","fileSize","basesPerPx","maxLevel","zh","indexLength","reductionLevel","indexOffset","getUnzoomedView","bigbed","toConsumableArray","arrayWithoutHoles","arrayLikeToArray","arr2","arrayLikeToArray$1","iterableToArray","unsupportedIterableToArray","minLen","nonIterableSpread","arrayWithoutHoles$1","iterableToArray$1","unsupportedIterableToArray$1","nonIterableSpread$1","_interopRequireDefault","filterUndef","BigBed","_toConsumableArray2","_regenerator","_asyncToGenerator2","_classCallCheck2","_createClass2","_assertThisInitialized2","_inherits2","_possibleConstructorReturn2","_getPrototypeOf2","_defineProperty2","_binaryParser","_rxjs","_operators","_abortablePromiseCache","_quickLru","ownKeys","_objectSpread","_createSuper","_isNativeReflectConstruct","BigBed2","_readIndices","readIndicesCache","_readIndices2","extHeaderOffset","blocklen","extParser","indices","int16","_searchExtraIndexBlocks","_yield$this$getHeader2","_args6","readIndices","_yield$_this2$bbi$rea","_p$parse$result","valSize","bpt","int8","nodeOffset","_yield$_this2$bbi$rea2","lastOffset","leafkeys","localeCompare","t1","_searchExtraIndex","searchExtraIndexBlocks","rest","_bigwig","_bigbed","_bbi2","Feature","Header","RequestOptions","bisector","headers","overrides","baseOverrides","redirect","mode","statusText","getBufferFromResponse","responseData","bytesCopied","sizeMatch","_stat","bytesRead","RemoteFile$1","BBIDataFetcher","cls","chromSizesUrl","bwFileHeader","bwFile","TILE_SIZE","errorTxt","dataPromises","loadBBI","dataConfig2","recordPromises","minXOriginal","basesPerPixel","determineScale","basesPerBin","binStarts","startPos","endPos","chromStart","chromEnd","getFeatures","flat","dense","filtered","v2","startAbs","endAbs","dde","DenseDataExtrema1D","min_value","max_value","denseDataExtrema","minNonZero","minNonZeroInTile","maxNonZero","maxNonZeroInTile","reductionLevels","numRequestedElements","uri_all","exports2","merge2","_len","sets","xl","subexp","typeOf","toArray2","buildExps","isIRI","ALPHA$$","DIGIT$$","HEXDIG$$2","PCT_ENCODED$2","SUB_DELIMS$$","RESERVED$$","IPRIVATE$$","UNRESERVED$$2","DEC_OCTET_RELAXED$","IPV4ADDRESS$","H16$","LS32$","IPV6ADDRESS1$","IPV6ADDRESS2$","IPV6ADDRESS3$","IPV6ADDRESS4$","IPV6ADDRESS5$","IPV6ADDRESS6$","IPV6ADDRESS7$","IPV6ADDRESS8$","IPV6ADDRESS9$","IPV6ADDRESS$","ZONEID$","PCHAR$","NOT_SCHEME","RegExp","NOT_USERINFO","NOT_HOST","NOT_PATH","NOT_PATH_NOSCHEME","NOT_QUERY","NOT_FRAGMENT","ESCAPE","UNRESERVED","OTHER_CHARS","PCT_ENCODED","IPV4ADDRESS","IPV6ADDRESS","URI_PROTOCOL","IRI_PROTOCOL","slicedToArray","sliceIterator","_arr","_s","toConsumableArray2","maxInt","tMin","tMax","skew","damp","initialBias","initialN","delimiter","regexPunycode","regexNonASCII","regexSeparators","baseMinusTMin","stringFromCharCode","fromCharCode","error$1","map2","mapDomain","ucs2decode","extra","basicToDigit","codePoint","digitToBasic","digit","adapt","numPoints","firstTime","decode","inputLength","bias","basic","lastIndexOf","oldi","baseMinusT","fromCodePoint","encode","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","_currentValue2","basicLength","handledCPCount","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","currentValue","handledCPCountPlusOne","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","_currentValue","qMinusT","toUnicode","toASCII","punycode","SCHEMES","pctEncChar","pctDecChars","newStr","il","c2","c3","_normalizeComponentEncoding","components","protocol","decodeUnreserved2","decStr","scheme","userinfo","host","query","fragment","_stripLeadingZeros","_normalizeIPv4","address","_normalizeIPv6","_matches2","zone","_address$toLowerCase$","_address$toLowerCase$2","firstFields","lastFields","isLastFieldIPv4Address","fieldCount","lastFieldsStart","longestZeroFields","lastLongest","newHost","newFirst","newLast","URI_PARSE","NO_MATCH_IS_UNDEFINED","parse2","uriString","iri","reference","port","schemeHandler","unicodeSupport","domainHost","_recomposeAuthority","uriTokens","$1","$2","RDS1","RDS2","RDS3","RDS5","removeDotSegments","im","serialize","authority","absolutePath","resolveComponents","base2","relative","tolerant","baseURI","relativeURI","schemelessOptions","normalize","uri2","equal3","uriA","uriB","escapeComponent","unescapeComponent","secure","handler$1","isSecure","wsComponents","handler$2","resourceName","_wsComponents$resourc","_wsComponents$resourc2","handler$3","O","UNRESERVED$$","HEXDIG$$","PCT_ENCODED$","ATEXT$$","VCHAR$$","SOME_DELIMS$$","NOT_LOCAL_PART","NOT_HFNAME","NOT_HFVALUE","decodeUnreserved","handler$4","mailtoComponents","unknownHeaders","hfields","hfield","toAddrs","_xl","body","_xl2","addr","toAddr","atIdx","localPart","URN_PARSE","handler$5","urnComponents","nid","nss","urnScheme","uriComponents","UUID2","handler$6","uuidComponents","equal","fastDeepEqual","flags","util$5","checkDataType","checkDataTypes","dataTypes","strictNumbers","types","toHash$1","null","number","integer","coerceToTypes","optionCoerceTypes","COERCE_TO_TYPES","toHash","getProperty","escapeQuotes","ucs2length","varOccurences","dataVar","varReplace","expr","schemaHasRules","schema","rules3","schemaHasRulesExcept","exceptKeyword","schemaUnknownRules","toQuotedString","getPathExpr","jsonPointers","isNumber","joinPaths","getPath","prop","escapeJsonPointer","getData","$data","lvl","paths","up","jsonPointer","JSON_POINTER$1","RELATIVE_JSON_POINTER$1","segments","segment","unescapeJsonPointer","unescapeFragment","decodeURIComponent","escapeFragment","dataType","negate2","EQUAL","AND","OK","NOT","hash","IDENTIFIER$1","SINGLE_QUOTE","util$4","schema_obj","jsonSchemaTraverse","traverse$1","_traverse","pre","post","jsonPtr","rootSchema","parentJsonPtr","parentKeyword","parentSchema","keyIndex","sch","arrayKeywords","propsKeywords","keywords","allKeys","skipKeywords","additionalItems","propertyNames","allOf","patternProperties","dependencies","enum","const","maximum","minimum","exclusiveMaximum","exclusiveMinimum","multipleOf","maxLength","minLength","pattern","uniqueItems","maxProperties","minProperties","URI$1","equal$1","util$3","SchemaObject$1","traverse","resolve_1","resolve$3","compile2","root","ref2","refVal","_refs","_schemas","inlineRef","_opts","inlineRefs","validate","_compile","baseId","resolveSchema","refPath","_getFullPath","getFullPath","_getId","normalizeId","resolveRecursive","getJsonPointer","parsedRef","resolveUrl","fullPath","ids","schemaId","baseIds","fullPaths","localRefs","PREVENT_SCOPE_CHANGE","part","$ref2","SIMPLE_INLINED","limit","checkNoRef","countKeys","TRAILING_SLASH_HASH","resolve$2","error_classes","Validation","errorSubclass","ajv","validation","MissingRef","MissingRefError$1","missingRef","missingSchema","Subclass","fastJsonStableStringify","cmp","cycles","aobj","bobj","seen","stringify2","toJSON","isFinite","seenIndex","validate$1","it","$keyword","$ruleType","$async","$refKeywords","util","RULES","$id2","strictKeywords","$unknownKwd","$keywordsMsg","logger","isTop","sourceCode","processCode","$lvl","$dataLvl","dataLevel","$schema2","$schemaPath","schemaPath","$errSchemaPath","errSchemaPath","$breakOnError","allErrors","$valid","$$outStack","createErrors","errorPath","messages","verbose","__err","compositeRule","$top","rootId","dataPathArr","useDefaults","strictDefaults","$defaultMsg","$closingBraces1","$closingBraces2","$typeSchema","$typeIsArray","nullable","extendRefs","$comment","coerceTypes","$coerceToTypes","$rulesGroup","$shouldUseGroup","$method","$dataType","$coerced","arr1","$type","$i","$parentData","l2","arr3","$propertyKey","l3","$sch","$passData","useDefault","arr4","l4","arr5","rules","$rule","i5","l5","$shouldUseRule","$code","keyword","$rulesGroup2","$rule2","implements","impl","$ruleImplementsSomeKeyword","resolve$1","util$2","errorClasses$1","stableStringify$1","validateGenerator","ucs2length2","equal2","ValidationError","compile_1","compile$2","refs","patterns","patternsHash","defaults","defaultsHash","customRules","checkCompiling","compilation","_compilations","compiling","callValidate","validate2","formats2","_formats","localCompile","cv","endCompiling","_schema","_root","localRefs2","baseId2","isRoot","MissingRefError","resolveRef","usePattern","useCustomRule","formats","vars","refValCode","patternCode","defaultCode","customRuleCode$1","makeValidate","_refVal","refCode","refIndex","resolvedRef","rootRefId","addLocalRef","localSchema","replaceLocalRef","removeLocalRef","refVal2","inline","regexStr","valueStr","rule","schema2","validateSchema","deps","definition","keyword2","validateSchema2","errorsText","macro","compIndex","statement","Cache$1","put","del","util$1","DATE","DAYS","TIME","HOSTNAME","URI","URITEMPLATE","URL$1","UUID","JSON_POINTER","JSON_POINTER_URI_FRAGMENT","RELATIVE_JSON_POINTER","formats_1","formats$1","date","year","month","day","isLeapYear","full","hour","minute","second","timeZone","fast","uri","email","hostname","ipv4","ipv6","regex","dateTime","DATE_TIME_SEPARATOR","NOT_URI_FRAGMENT","Z_ANCHOR","_limit","$schemaValue","$isData","$isMax","$exclusiveKeyword","$schemaExcl","$isDataExcl","$op","$notOp","$errorKeyword","$schemaValueExcl","$exclusive","$exclType","$exclIsNumber","$opStr","$opExpr","_limitItems","_limitLength","unicode","_limitProperties","ruleModules","$refCode","$refVal","$message","missingRefs","$it","$nextValid","passContext","__callValidate","$closingBraces","$currentBaseId","$allSchemasEmpty","$errs","$sch2","$wasComposite","$idx","$dataNxt","$nextData","$nonEmptySchema","$schemaDeps","$propertyDeps","$ownProperties","ownProperties","$property","$deps","$currentErrorPath","$useData","$prop","$propertyPath","$missingProperty","_errorDataPathProperty","$vSchema","$unknownFormats","unknownFormats","$allowUnknown","$format","$isObject","$formatType","$formatRef","$thenSch","$elseSch","$thenPresent","$elsePresent","$ifClause","$additionalItems","$currErrSchemaPath","multipleOfPrecision","$allErrorsOption","$prevValid","$passingSchemas","$key","$dataProperties","$schemaKeys","notProto","$pProperties","$pPropertyKeys","$aProperties","$someProperties","$noAdditional","$additionalIsSchema","$removeAdditional","removeAdditional","$checkAdditional","$required","loopRequired","$requiredHash","$pProperty","$additionalProperty","$useDefaults","$hasDefault","i4","$invalidName","$propertySch","$loopRequired","$itemType","KEYWORDS","compileAsync","meta","loadSchema","loadMetaSchemaOf","schemaObj","_addSchema","_compileAsync","getSchema","added","schemaPromise","_loadingSchemas","removePromise","addSchema","ref3","loadMissingSchema","require$$13","$id","schemaArray","nonNegativeInteger","nonNegativeIntegerDefault0","simpleTypes","stringArray","readOnly","examples","contentMediaType","contentEncoding","metaSchema","definition_schema","statements","valid","modifying","IDENTIFIER","customRuleCode","$compile","$inline","$macro","$ruleValidate","$validateCode","$definition","$rDef","$validateSchema","$ruleErrs","$ruleErr","$asyncKeyword","$parentDataProperty","def_callRuleValidate","def_customError","definitionSchema","validateKeyword","_addRule","metaSchema2","keyword3","dataType2","definition2","ruleGroup","rg","custom","throwError2","_validateKeyword","require$$12","compileSchema","Cache2","SchemaObject","stableStringify","rules2","ALL","implKeywords","$dataMetaSchema","keywordsJsonPointers","Ajv","schemaKeyRef","_meta","_skipValidation","checkUnique","addMetaSchema","skipValidation","throwOrLogError","defaultMeta","META_SCHEMA_ID","keyRef","_getSchemaObj","_fragments","ref","_getSchemaFragment","removeSchema","_removeAllSchemas","cacheKey","addFormat","dataPath","shouldAddSchema","cached","addUsedSchema","recursiveMeta","willValidate","currentOpts","_metaOpts","_validate","customKeyword","addKeyword","getKeyword","removeKeyword","errorClasses","META_IGNORE_OPTIONS","META_SUPPORT_DATA","setLogger","_get$IdOrId","_get$Id","chooseGetId","errorDataPath","metaOpts","getMetaSchemaOptions","addInitialFormats","addInitialKeywords","$dataSchema","addDefaultMetaSchema","optsSchemas","schemas","addInitialSchemas","regex2","validateGoslingSpec","validateSpec","silence","details","validateTrack","errorMessages","getGenomicChannelFromTrack","channelType","getGenomicChannelKeyFromTrack","genomicChannelKey","HiGlassSchema","CombinedTrack","contents","Data","children","EnumTrack","fromViewUid","EnumTrackType","GenericLocks","locksByViewUid","locksDict","GenomePositionSearchBox","autocompleteId","autocompleteServer","chromInfoId","chromInfoServer","HeatmapTrack","HiGlassSpec","compactLayout","editable","exportViewUrl","locationLocks","trackSourceServers","tracksEditable","valueScaleLocks","viewEditable","zoomFixed","zoomLocks","IndependentViewportProjectionTrack","projectionYDomain","transforms","LocksByViewUid","Overlay","OverlayOptions","fillOpacity","minWidth","outlineOpacity","outlinePos","strokePos","Tracks","bottom","center","gallery","right","whole","ValueScaleLocks","View","autocompleteSource","genomePositionSearchBox","genomePositionSearchBoxVisible","initialXDomain","initialYDomain","overlays","selectionView","getNumericDomain","IsDomainChr","IsDomainInterval","IsDomainChrInterval","chrStart","shareScaleAcrossTracks","trackModels","globalDomain","channelKeys","numericDomain","nominalDomain","setChannelDomain","generateScales","updateChannelValue","example","mousePositionColor","labelShowResolution","labelBackgroundColor","labelLeftMargin","labelTopMargin","labelRightMargin","labelBottomMargin","titleBackgroundColor","titleFontSize","titleFontFamily","titleAlign","titleFontWeight","subtitleColor","subtitleBackgroundColor","subtitleFontSize","subtitleFontFamily","subtitleFontWeight","subtitleAlign","markCommon","nominalColorRange","quantitativeSizeRange","point","rect","triangle","area","bar","link","insertItemToArray","flatArrayToPairArray","HIGLASS_AXIS_SIZE","HiGlassModel","hg","setEditable","getViewTemplate","setChromInfoPath","textColor","getLastView","offsetY","viewId","vs","getMainTrackPosition","getAssembly","getLastVisView","widthOrHeight","axisTrackTemplate","addTrackToCombined","axisTrack","logicalComparison","op","CHANNEL_DEFAULTS","NOMINAL_COLOR","NOMINAL_COLOR_EXTENDED","QUANTITATIVE_COLOR","SIZE","SIZE_RANGE","getTheme","THEMES","baseSpec","LightThemeMarkCommonStyle","DarkThemeMarkCommonStyle","light","dark","isPointInsideRange","MouseEventModel","pointAndRadius","isMouseWithin","idField","siblings","sourceUids","sqrt","isPointNearPoint","dist2","isWithin","AB","BE","AE","AB_BE","AB_AE","isPointNearLine","isPointInPolygon","isWithinRange","isCircleWithinRange","GoslingTrackModel","dataOriginal","dataAggregated","specOriginal","specComplete","channelScales","mouseEventModel","validity","generateCompleteSpec","flipRanges","getId","xOrY","getGenomicChannelKey","isAxisShown","addScaleMaterials","channelRaw","originalSpec","channelFieldType","so","currentStage","compareValue","metrics","newVisibility","propertyKey","additionalInfo","gm","barProperty","pointProperty","rectProperty","IsStackedChannel","xKeys","min2","sum","rowChannel","rowField","startSize","k1","k2","c1","scaleSequential","scaleBand","scaleOrdinal","getTabularData","bin","numericValues","numOfGenomicPositions","tileUnitSize","valueName","columnName","startName","endName","minValueName","maxValueName","agg","cumVal","minVal","MAX_SAFE_INTEGER","maxVal","MIN_SAFE_INTEGER","binStart","binEnd","smallBin","correctedBinEnd","shape","numOfTotalCategories","rowName","tileY","tileHeight","numBins","tileXUnitSize","tileYUnitSize","columnField","aggLen","xIndex","yIndex","curVal","raw","chrOffset","exonStartField","exonEndField","exonStartStrs","exonEndStrs","es","ee","nextEs","PubSub","encodedJs$1","blob$1","Blob","atob","WorkerWrapper$1","objURL","webkitURL","createObjectURL","Worker","revokeObjectURL","BAMDataFetcher","slugid","nice","toFetch","worker","spawn","bamUrl","workerDataConfig","baiUrl","init","fetching","fetchTimeout","clearTimeout","sendFetch","fetchTilesDebounced","TextDecoder","encodedJs","blob","WorkerWrapper","GoslingVcfData","prevRequestTime","drawLoadingCue","BRUSH_STYLE_DEFAULT","LinearBrushModel","selection","hgLibraries","onBrush","rangeToData","externals","brushSelection","onDrag","offsetX","skipApiTrigger","getWidth","getRange","updateRange","drawBrush","hidden","disable","usePrereleaseRendering","DEFAULT_MOUSE_EVENT_STYLE","GoslingTrack","tileProxy","services","GoslingTrackClass","dataFetcher","viewUid","drawnAtScale","d3Scale","scalableGraphics","pMouseHover","pMouseSelection","svgElement","isRangeBrushActivated","pMask","interactive","mRangeBrush","onRangeBrush","mousedown","onMouseDown","getLocalPosition","originalEvent","altKey","mouseup","onMouseUp","mousemove","onMouseMove","mouseout","onMouseOut","pLabel","trackNotFoundText","loadingTextStyle","loadingTextStyleObj","loadingTextBg","loadingText","svgData","loadingStatus","loading","processing","rendering","GRAPHICS_CURVES","adaptive","maxSegments","clearMouseEventData","processTilesAndDraw","preprocessAllTiles","prevVisibleAndFetchedTiles","visibleAndFetchedTiles","isEqual","updateTileAsync","drawTile","goslingModels","trackVisibility","forceDraw","newOptions","oldDimensions","setSize","setOffset","refreshTiles","tabularDataFetcher","xRange","fetchedTiles","remoteId","tileData","trackUtils","calculate1DVisibleTiles","refTile","tileK","posOffset","visibleTileIds","visibleAndFetchedIds","DEFAULT_MAX_TILE_WIDTH","max_tile_width","setVisibleTiles","calculateZoomLevel","resolutions","sortedResolutions","xTiles","calculateTilesFromResolution","yTiles","tilesToId","calculateTiles","relevantScale","max_width1","binsPerTileIn","binsPerTile","bins_per_dimension","chosenResolution","xTilePos","yTilePos","margin","models","channelOriginal","shouldCombineTiles","newData","mergedToAnotherTile","uniqBy","reorganizeTileInfo","combineAllTilesIfNeeded","tileModels","preprocessTile","flatTileData","tabularDataFiltered","PubSub$1","numOrRows","axisSize","circularFactor","tileXScale","mouseX","mouseY","multiHovering","mergedCapturedElements","findAll","getSiblings","marks","capturedElements","findAllWithinRange","siblingIds","highlightMarks","genomicRange","isAltPressed","mouseDownX","mouseDownY","rangeSelectEnabled","clickEnabled","isDrag","enable","genomicPosition","getElementsWithinMouse","firstTooltipSpec","content","rawValue","d3Format","BarTrack","rotatable","barBorder","sortLargestOnTop","getBoundingBox","trackInfos","getRelativeTrackInfo","traverseAndCollectTrackInfo","titleHeight","getTextTrack","pixelPreciseMarginPadding","circularRootNotFound","cumWidth","cumHeight","allChildCircularLayout","traversedAtLeastOnce","tv","noChildConcatArrangement","isThisCircularRoot","numTracksBeforeInsert","getNumOfXAxes","getNumOfYAxes","viewBB","cTracks","ifMultipleViews","SPACING","PADDING","INNER_RADIUS","TOTAL_RADIUS","TOTAL_RING_SIZE","spacingAngle","IsYAxis","goslingToHiGlass","hgModel","gosTrack","bb","_m","firstResolvedSpec","parsed","hgTrack","labelBackgroundOpacity","colorRange","getHiGlassColorRange","colorbarPosition","setViewOrientation","setAssembly","addDefaultView","setDomain","adjustDomain","setMainTrack","addTrackSourceServers","setZoomFixed","setZoomLimits","setLayout","narrowType","width2","height2","narrowSizeThreshold","narrowerSizeThreshold","getAxisNarrowType","setAxisTrack","setTextTrack","renderHiGlass","setHg","tb","linkingInfos","linkingInfo","_o","spec2","cKey","linkId","isBrush","getLinkingInfo","addBrush","manageResponsiveSpecs","wFactor","hFactor","parentWidth","parentHeight","replaced","aspectRatio","parentDimensions","specAndCondition","alternativeSpec","conditions","assignedDimensions","isSelect","isSelectResponsiveSpec","templates","containerStatus","specCopy","getMultivecTemplate","overrideDataTemplates","templateDef","isValid","viewBase","convertedView","singleTrackMappingDef","convertedTrack","dataTramsformMap","baseChannelName","encodingSpec","channelMap","newChannelSpec","replaceTrackTemplates","trackInfosAndSize","isResponsiveWidth","isResponsiveHeight","containerSize","containerParentSize","higlassRegister","TextTrack","pluginType","HiGlassComponentWrapper","forwardRef","useState","wrapperDivId","setWrapperDivId","useEffect","viewConfig","higlassComponent","useMemo","React","HiGlassComponent","containerPaddingX","containerPaddingY","viewMarginTop","viewMarginBottom","viewMarginLeft","viewMarginRight","viewPaddingTop","viewPaddingBottom","viewPaddingLeft","viewPaddingRight","sizeMode","rangeSelectionOnAlt","border","Fragment","className","responsiveWidth","responsiveHeight","textAlign","role","display","ResizeSensor$1","globalWindow","requestAnimationFrame2","mozRequestAnimationFrame","webkitRequestAnimationFrame","cancelAnimationFrame2","mozCancelAnimationFrame","webkitCancelAnimationFrame","timer2","forEachElement","elements","elementsType","isCollectionTyped","jQuery","Elements","getElementSize","getBoundingClientRect","offsetWidth","offsetHeight","setStyle","ResizeSensor2","lastAnimationFrameForInvisibleCheck","EventQueue","ev","sizeInfo","newQueue","attachResizeEvent","element2","resized","resizedAttached","resizeSensor","dir","pointerEvents","overflow","zIndex","styleChild","transition","expand2","expandChild","shrink","shrinkChild","computedStyle","getComputedStyle","getPropertyValue","dirty","rafId","lastWidth","lastHeight","initialHiddenCheck","resetExpandShrink","scrollLeft","scrollTop","resetSensor","onResized","onScroll","addEvent","el","attachEvent","elem","detach","MutationObserver","mutations","addedNodes","childList","subtree","ResizeSensor","createApi","hgSpec","getCanvas","transparentBackground","renderer","pixiRenderer","renderTexture","render","pixiStage","canvas","plugins","extract","canvasWithBg","getContext","fillStyle","fillRect","drawImage","canvasWidth","canvasHeight","zoomTo","api","zoomToExtent","zoomToGene","suggestGene","getViewIds","viewConf","exportPng","toBlob","blob2","download","href","exportPdf","jsPDF","imgData","toDataURL","pdf","unit","addImage","save","lodash","omitDeep","omitKeys","cloneDeepWith","FUNC_ERROR_TEXT","HASH_UNDEFINED","PLACEHOLDER","WRAP_CURRY_RIGHT_FLAG","WRAP_PARTIAL_FLAG","WRAP_PARTIAL_RIGHT_FLAG","WRAP_ARY_FLAG","WRAP_REARG_FLAG","INFINITY","NAN","MAX_ARRAY_LENGTH","wrapFlags","argsTag","arrayTag","boolTag","dateTag","errorTag","funcTag","genTag","mapTag","numberTag","objectTag","promiseTag","regexpTag","setTag","stringTag","symbolTag","weakMapTag","arrayBufferTag","dataViewTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","reEmptyStringLeading","reEmptyStringMiddle","reEmptyStringTrailing","reEscapedHtml","reUnescapedHtml","reHasEscapedHtml","reHasUnescapedHtml","reEscape","reEvaluate","reInterpolate","reIsDeepProp","reIsPlainProp","rePropName","reRegExpChar","reHasRegExpChar","reTrimStart","reWhitespace","reWrapComment","reWrapDetails","reSplitDetails","reAsciiWord","reForbiddenIdentifierChars","reEscapeChar","reEsTemplate","reFlags","reIsBadHex","reIsBinary","reIsHostCtor","reIsOctal","reIsUint","reLatin","reNoMatch","reUnescapedString","rsComboRange","rsComboMarksRange","rsDingbatRange","rsLowerRange","rsUpperRange","rsVarRange","rsBreakRange","rsMathOpRange","rsApos","rsAstral","rsBreak","rsCombo","rsDigits","rsDingbat","rsLower","rsMisc","rsFitz","rsNonAstral","rsRegional","rsSurrPair","rsUpper","rsMiscLower","rsMiscUpper","rsOptContrLower","rsOptContrUpper","reOptMod","rsOptVar","rsSeq","rsEmoji","rsSymbol","reApos","reComboMark","reUnicode","reUnicodeWord","reHasUnicode","reHasUnicodeWord","contextProps","templateCounter","typedArrayTags","cloneableTags","stringEscapes","freeParseFloat","freeParseInt","freeGlobal","freeSelf","freeExports","nodeType","freeModule","moduleExports","freeProcess","process","nodeUtil","require","binding","nodeIsArrayBuffer","isArrayBuffer","nodeIsDate","nodeIsMap","isMap","nodeIsRegExp","isRegExp","nodeIsSet","isSet","nodeIsTypedArray","isTypedArray","func","arrayAggregator","setter","iteratee","arrayEach","arrayEachRight","arrayEvery","arrayFilter","resIndex","arrayIncludes","baseIndexOf","arrayIncludesWith","arrayMap","arrayPush","arrayReduce","initAccum","arrayReduceRight","arraySome","asciiSize","baseProperty","baseFindKey","collection","eachFunc","collection2","baseFindIndex","fromIndex","fromRight","strictIndexOf","baseIsNaN","baseIndexOfWith","baseMean","baseSum","basePropertyOf","baseReduce","baseTimes","baseTrim","trimmedEndIndex","baseUnary","baseValues","cacheHas","charsStartIndex","strSymbols","chrSymbols","charsEndIndex","countHolders","placeholder","deburrLetter","escapeHtmlChar","escapeStringChar","hasUnicode","mapToArray","overArg","transform","replaceHolders","setToArray","stringSize","lastIndex","unicodeSize","stringToArray","unicodeToArray","asciiToArray","unescapeHtmlChar","runInContext2","Array2","pick","Date2","Error2","Function2","Math2","Object2","RegExp2","String2","TypeError2","arrayProto","funcProto","objectProto","coreJsData","funcToString","idCounter","maskSrcKey","IE_PROTO","nativeObjectToString","objectCtorString","oldDash","reIsNative","Buffer2","Symbol2","Uint8Array2","allocUnsafe","getPrototype","objectCreate","propertyIsEnumerable","spreadableSymbol","isConcatSpreadable","symIterator","symToStringTag","defineProperty2","getNative","ctxClearTimeout","ctxNow","ctxSetTimeout","nativeCeil","nativeFloor","nativeGetSymbols","nativeIsBuffer","isBuffer","nativeIsFinite","nativeJoin","nativeKeys","nativeMax","nativeMin","nativeNow","nativeParseInt","nativeRandom","nativeReverse","DataView","Map2","Promise2","Set2","WeakMap","nativeCreate","metaMap","realNames","dataViewCtorString","toSource","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","symbolProto","symbolValueOf","symbolToString","lodash2","isObjectLike","isArray2","LazyWrapper","LodashWrapper","wrapperClone","baseCreate","proto","isObject2","result2","baseLodash","chainAll","__wrapped__","__actions__","__chain__","__index__","__values__","__dir__","__filtered__","__iteratees__","__takeCount__","__views__","Hash","ListCache","MapCache","SetCache","values2","__data__","Stack","arrayLikeKeys","inherited","isArr","isArg","isArguments","isBuff","isType","skipIndexes","isIndex","arraySample","baseRandom","arraySampleSize","shuffleSelf","copyArray","baseClamp","arrayShuffle","assignMergeValue","baseAssignValue","assignValue","objValue","assocIndexOf","baseAggregator","iteratee2","baseEach","baseAssign","copyObject","baseAt","skip2","lower","upper","baseClone","bitmask","customizer","isDeep","isFlat","isFull","initCloneArray","getTag","isFunc","cloneBuffer","initCloneObject","getSymbolsIn","copySymbolsIn","keysIn","baseAssignIn","getSymbols","copySymbols","Ctor","cloneArrayBuffer","dataView","byteOffset","cloneDataView","cloneTypedArray","regexp","cloneRegExp","initCloneByTag","stacked","subValue","getAllKeysIn","getAllKeys","baseConformsTo","baseDelay","wait","setTimeout2","baseDifference","includes2","isCommon","valuesLength","outer","computed","valuesIndex","templateSettings","getMapData","size2","pairs2","LARGE_ARRAY_SIZE","createBaseEach","baseForOwn","baseEachRight","baseForOwnRight","baseEvery","baseExtremum","isSymbol","baseFilter","baseFlatten","depth","isStrict","isFlattenable","baseFor","createBaseFor","baseForRight","baseFunctions","isFunction2","baseGet","castPath","toKey","baseGetAllKeys","keysFunc","symbolsFunc","baseGetTag","isOwn","unmasked","getRawTag","objectToString","baseGt","baseHas","baseHasIn","baseIntersection","arrays","othLength","othIndex","caches","baseInvoke","baseIsArguments","baseIsEqual","equalFunc","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","equalArrays","convert","isPartial","equalByTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","objProps","objLength","objStacked","othStacked","skipCtor","othValue","compared","objCtor","othCtor","equalObjects","baseIsEqualDeep","baseIsMatch","matchData","noCustomizer","srcValue","COMPARE_PARTIAL_FLAG","baseIsNative","baseIteratee","identity2","baseMatchesProperty","baseMatches","baseKeys","isPrototype","baseKeysIn","nativeKeysIn","isProto","baseLt","baseMap","isArrayLike2","getMatchData","matchesStrictComparable","isKey","isStrictComparable","hasIn","baseMerge","srcIndex","mergeFunc","safeGet","isTyped","isArrayLikeObject","isPlainObject","toPlainObject","baseMergeDeep","baseNth","baseOrderBy","iteratees","orders","getIteratee","baseSortBy","objCriteria","criteria","othCriteria","ordersLength","compareAscending","compareMultiple","basePickBy","baseSet","basePullAll","indexOf2","basePullAt","indexes","previous","baseUnset","baseRepeat","baseRest","setToString","overRest","baseSample","baseSampleSize","nested","baseSetData","baseSetToString","constant","baseShuffle","baseSlice","baseSome","baseSortedIndex","retHighest","mid","baseSortedIndexBy","valIsNaN","valIsNull","valIsSymbol","valIsUndefined","othIsDefined","othIsNull","othIsReflexive","othIsSymbol","setLow","baseSortedUniq","baseToNumber","baseToString","baseUniq","set2","createSet","baseUpdate","updater","baseWhile","isDrop","baseWrapperValue","result3","baseXor","baseZipObject","assignFunc","valsLength","castArrayLikeObject","castFunction","stringToPath","toString2","castRest","castSlice","clearTimeout2","arrayBuffer","typedArray","valIsDefined","valIsReflexive","composeArgs","partials","holders","isCurried","argsIndex","argsLength","holdersLength","leftIndex","leftLength","rangeLength","isUncurried","composeArgsRight","holdersIndex","rightIndex","rightLength","isNew","createAggregator","initializer","createAssigner","assigner","guard","isIterateeCall","createCaseFirst","methodName","createCompounder","words","deburr","createCtor","thisBinding","createFind","findIndexFunc","createFlow","flatRest","funcs","prereq","thru","wrapper","getFuncName","funcName","getData2","isLaziable","plant","index2","createHybrid","partialsRight","holdersRight","argPos","ary2","arity","isAry","isBind","isBindKey","isFlip","getHolder","holdersCount","newHolders","createRecurry","reorder","createInverter","toIteratee","object2","baseInverter","createMathOperation","createOver","arrayFunc","createPadding","chars","charsLength","createRange","toFinite","baseRange","createRelationalOperation","toNumber2","wrapFunc","isCurry","setData","setWrapToString","createRound","toInteger","noop2","createToPairs","setToPairs","baseToPairs","createWrap","srcBitmask","newBitmask","isCombo","mergeData","createCurry","createPartial","createBind","customDefaultsAssignIn","customDefaultsMerge","customOmitClone","arrLength","arrStacked","arrValue","othValue2","flatten","otherFunc","map3","isKeyable","stubArray","hasPath","hasFunc","isLength","ArrayBuffer","ctorString","isMaskable","stubFalse","transform2","otherArgs","oldArray","shortOut","insertWrapDetails","updateWrapDetails","getWrapDetails","lastCalled","stamp","remaining","rand","memoize","memoizeCapped","quote","subString","difference","differenceBy","differenceWith","findIndex2","findLastIndex","intersection","mapped","intersectionBy","intersectionWith","pull","pullAll","pullAt","unionBy","unionWith","unzip","unzipWith","without","xor2","xorBy","xorWith","zip2","zipWith","chain","interceptor","wrapperAt","countBy","find2","findLast","forEachRight","groupBy2","invokeMap","keyBy","partition2","sortBy","ary","before","bindKey","WRAP_BIND_FLAG","debounce2","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","maxing","invokeFunc","leadingEdge","timerExpired","shouldInvoke","timeSinceLastCall","trailingEdge","timeWaiting","remainingWait","debounced","isInvoking","cancel","defer2","resolver","memoized","Cache","overArgs","funcsLength","partial","partialRight","rearg","gt2","isDate2","isError","isString","iteratorToArray","toLength","isBinary","assignIn","assignInWith","assignWith","at","propsIndex","propsLength","defaultsDeep","mergeWith","invertBy","omit","CLONE_DEEP_FLAG","basePick","pickBy","toPairs","toPairsIn","camelCase","word","capitalize","upperFirst","kebabCase","lowerCase","lowerFirst","snakeCase","startCase","upperCase","pattern2","hasUnicodeWord","unicodeWords","asciiWords","attempt","bindAll","methodNames","flow","flowRight","methodOf","mixin","chain2","over","overEvery","overSome","basePropertyDeep","rangeRight","add2","augend","divide2","dividend","multiply2","multiplicand","subtract2","minuend","after","castArray","chunk","compact","cond","conforms","baseConforms","curry","curryRight","drop","dropRight","dropRightWhile","dropWhile","baseFill","flatMapDeep","flatMapDepth","flattenDeep","flattenDepth","fromPairs","functions","functionsIn","initial","mapKeys","mapValues","matchesProperty","nthArg","omitBy","orderBy","propertyOf","pullAllBy","pullAllWith","setWith","shuffle","sortedUniq","sortedUniqBy","takeRight","takeRightWhile","toPath","isArrLike","unary","uniq","uniqWith","unset","update","updateWith","valuesIn","zipObject","zipObjectDeep","entriesIn","extend","extendWith","clamp","cloneDeep","cloneWith","conformsTo","defaultTo","endsWith","escape","escapeRegExp","findKey","findLastKey","forIn","forInRight","forOwn","forOwnRight","baseInRange","isBoolean","isElement","isEqualWith","isMatch","isMatchWith","isNative","isNil","isNull","isSafeInteger","isWeakMap","isWeakSet","strictLastIndexOf","maxBy","mean","meanBy","minBy","stubObject","stubString","stubTrue","nth","noConflict","pad","strLength","padEnd","padStart","floating","temp","reduceRight","runInContext","some","sortedIndex","sortedIndexBy","sortedIndexOf","sortedLastIndex","sortedLastIndexBy","sortedLastIndexOf","startsWith","sumBy","settings","isEscaping","isEvaluating","imports","importsKeys","importsValues","reDelimiters","evaluate","sourceURL","escapeValue","interpolateValue","esTemplateValue","evaluateValue","variable","times","toLower","toSafeInteger","toUpper","trimEnd","trimStart","truncate","omission","search","newEnd","each","eachRight","VERSION","isFilter","takeName","dropName","checkIteratee","isTaker","lodashFunc","retUnwrapped","isLazy","useLazy","isHybrid","isUnwrapped","onlyLazy","chainName","isRight","iterLength","takeCount","iterIndex","commit","parent2","clone2","wrapped","GoslingComponent","setViewConfig","wrapperSize","useRef","wrapperParentSize","prevSpec","hgRef","hgApi","compile$12","useCallback","newHs","newSize","newGs","isMountedOnce","reactive","containerElement","getElementById","resizer","parentElement","parentResizer","BIN_LENGTHS","ChromosomeInfo","filepath","success","chrPos","chrInfoText","cumValues","parseChromsizesRows","tsvParseRows","CistromeDataFetcher","CistromeBigWigDataFetcher","CistromeDataFetcherClass","loadChromsizes","bpSize","expected","actual","getBinLength","cs","cid","bin_size","subBinSize","hgRegister","App","ReactDOM"],"mappings":"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,KAAM,UAERuC,QAAS,CACPC,MAAO,CACL,CACE5C,KAAM,6BAER,CACEA,KAAM,gCAIZ6C,YAAa,CACXD,MAAO,CACL,CACE5C,KAAM,mBAER,CACEA,KAAM,mBAER,CACEA,KAAM,qBAER,CACEA,KAAM,uBAER,CACEA,KAAM,sBAER,CACEA,KAAM,wBAER,CACEA,KAAM,6BAER,CACEA,KAAM,yBAER,CACEA,KAAM,wBAIZ8C,aAAc,CACZtC,sBAAsB,EACtBE,WAAY,CACVuB,MAAO,CACLxB,YAAa,gDACbL,KAAM,CACJ,SACA,YAINa,SAAU,CACR,SAEFb,KAAM,UAER2C,WAAY,CACV,KAAQ,CACN,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,IACA,IACA,IACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,OACA,OACA,QAEF3C,KAAM,UAER4C,MAAO,CACLxC,sBAAsB,EACtBE,WAAY,CACVuC,OAAQ,CACNjD,KAAM,4BACNS,YAAa,sBAEfyC,MAAO,CACLzC,YAAa,yBACbL,KAAM,UAER+C,OAAQ,CACN1C,YAAa,kDACbL,KAAM,WAERgD,MAAO,CACLpD,KAAM,sBACNS,YAAa,0HAEf4C,MAAO,CACL,KAAQ,CACN,SACA,OAEFjD,KAAM,UAERkD,YAAa,CACX7C,YAAa,0HACbW,MAAO,CACL,CACEhB,KAAM,UAER,CACEA,KAAM,WAGVmB,SAAU,EACVC,SAAU,EACVpB,KAAM,SAERmD,MAAO,CACL9C,YAAa,gDACbL,KAAM,UAERA,KAAM,CACJK,YAAa,wBACb,KAAQ,CACN,eACA,WAEFL,KAAM,WAGVA,KAAM,UAERoD,kBAAmB,CACjBhD,sBAAsB,EACtBC,YAAa,wCACbC,WAAY,CACV+C,SAAU,CACRrD,KAAM,UAERsD,WAAY,CACVjD,YAAa,qEACbL,KAAM,UAERuD,SAAU,CACRvD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aquB,EAAWa,GAAOC,cAG7DnB,GAAUU,YAAc,SAASp7B,GAC/B,IAAIk8B,EAAM,SACNC,EAAUn8B,EAAE+X,MAAMmkB,GAClBlV,EAAShxB,MAAMugB,UAAUjE,MAAMnU,KAAKmS,UAAW,GAOnD,OANI6rB,GACFA,EAAQtoC,SAAQ,SAASkkB,GACvB,IAAIr3B,EAAQ2xB,SAAS0F,EAAM3H,OAAO,EAAG2H,EAAMpkB,OAAS,GAAI,IACxDqM,EAAIA,EAAEvT,QAAQsrB,EAAOiP,EAAOtmC,GAAOyvB,eAGhCnQ,GAETw6B,GAAQ4B,QAAU1B,GAClB,IAAI2B,GAAOC,GACPC,GAAO,KACX,IACEA,GAAO,IAAIC,YAAYC,SAAS,IAAID,YAAYE,OAAO,IAAIptB,WAAW,CACpE,EACA,GACA,IACA,IACA,EACA,EACA,EACA,EACA,EACA,GACA,EACA,GACA,EACA,EACA,IACA,GACA,EACA,IACA,IACA,IACA,IACA,EACA,IACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,IACA,EACA,GACA,EACA,GACA,EACA,GACA,EACA,EACA,IACA,IACA,IACA,EACA,EACA,EACA,IACA,IACA,IACA,GACA,IACA,EACA,EACA,EACA,IACA,IACA,IACA,GACA,IACA,EACA,EACA,EACA,IACA,IACA,IACA,GACA,IACA,EACA,EACA,EACA,IACA,IACA,IACA,GACA,IACA,EACA,EACA,EACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,EACA,EACA,GACA,IACA,EACA,EACA,EACA,EACA,GACA,EACA,GACA,GACA,EACA,EACA,IACA,GACA,EACA,IACA,GACA,EACA,IACA,GACA,GACA,IACA,IACA,GACA,EACA,IACA,GACA,EACA,IACA,GACA,GACA,IACA,IACA,IACA,GACA,EACA,GACA,GACA,IACA,IACA,GACA,EACA,GACA,EACA,IACA,GACA,GACA,EACA,EACA,IACA,GACA,EACA,IACA,GACA,EACA,IACA,GACA,GACA,IACA,IACA,GACA,EACA,IACA,GACA,EACA,IACA,GACA,GACA,IACA,IACA,IACA,GACA,EACA,GACA,GACA,IACA,IACA,GACA,EACA,GACA,EACA,IACA,GACA,GACA,EACA,EACA,IACA,GACA,EACA,IACA,GACA,EACA,IACA,GACA,GACA,IACA,IACA,GACA,EACA,IACA,GACA,EACA,IACA,GACA,GACA,IACA,IACA,IACA,GACA,EACA,GACA,GACA,IACA,IACA,GACA,EACA,GACA,EACA,IACA,GACA,GACA,EACA,EACA,IACA,GACA,EACA,IACA,GACA,EACA,IACA,GACA,GACA,IACA,IACA,GACA,EACA,IACA,GACA,EACA,IACA,GACA,GACA,IACA,IACA,IACA,GACA,EACA,GACA,GACA,IACA,IACA,GACA,EACA,GACA,EACA,IACA,GACA,GACA,EACA,EACA,IACA,GACA,EACA,IACA,GACA,EACA,IACA,GACA,GACA,IACA,IACA,GACA,EACA,IACA,GACA,EACA,IACA,GACA,GACA,IACA,IACA,IACA,GACA,EACA,GACA,GACA,IACA,IACA,GACA,EACA,GACA,EACA,IACA,MACG,IAAI2hB,QACT,MAAOhxB,KAET,SAASq8B,GAAOK,EAAKC,EAAMC,GACzBrkB,KAAKmkB,IAAY,EAANA,EACXnkB,KAAKokB,KAAc,EAAPA,EACZpkB,KAAKqkB,WAAaA,EAIpB,SAASC,GAAO3L,GACd,OAAsC,KAA9BA,GAAOA,EAAG,YAHpBmL,GAAO/lB,UAAUwmB,WACjBnwB,OAAO+jB,eAAe2L,GAAO/lB,UAAW,aAAc,CAAEj1B,OAAO,IAI/Dg7C,GAAOQ,OAASA,GAChB,IAAIE,GAAY,GACZC,GAAa,GACjB,SAASC,GAAQ57C,EAAOu7C,GACtB,IAAI1L,EAAKgM,EAAWC,EACpB,OAAIP,GAEEO,EAAS,IADb97C,KAAW,IACgBA,EAAQ,OACjC67C,EAAYF,GAAW37C,IAEd67C,GAEXhM,EAAMkM,GAAS/7C,GAAgB,EAARA,GAAa,GAAK,EAAI,GAAG,GAC5C87C,IACFH,GAAW37C,GAAS6vC,GACfA,IAGHiM,GAAU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AAY,CACV9iC,KAAM,UAERA,KAAM,CACJJ,KAAM,+BAER+nC,IAAK,CACH3nC,KAAM,UAERgF,MAAO,CACLhF,KAAM,UAER4I,EAAG,CACD5I,KAAM,UAERgJ,EAAG,CACDhJ,KAAM,WAGVa,SAAU,CACR,QAEFb,KAAM,UAERw/H,cAAe,CACb,KAAQ,CACN,UACA,iBACA,4BACA,qBACA,uBACA,uBACA,WACA,oBACA,UACA,aACA,QACA,4BACA,wBACA,sBACA,+BACA,kCACA,iBACA,6BACA,+BACA,2BACA,8BACA,qBACA,kBACA,sBACA,mBACA,kBACA,4BACA,cACA,YACA,wBACA,eACA,kBACA,YACA,eACA,aACA,iBACA,WACA,uBACA,0BACA,sBACA,oBACA,6BACA,gCACA,eACA,mBACA,2BACA,6BACA,4BACA,mBACA,gBACA,oBACA,iBACA,gBACA,0BACA,6BACA,iCACA,+BACA,gBACA,mBACA,aACA,QAEFx/H,KAAM,UAERoH,gBAAiB,CACf5E,MAAO,CACL,CACE5C,KAAM,6BAER,CACEA,KAAM,6BAER,CACEA,KAAM,iCAIZ6/H,aAAc,CACZr/H,sBAAsB,EACtBE,WAAY,CACVo/H,eAAgB,CACd9/H,KAAM,gCAER+/H,UAAW,IAEb9+H,SAAU,CACR,iBACA,aAEFb,KAAM,UAER4/H,wBAAyB,CACvBx/H,sBAAsB,EACtBE,WAAY,CACVu/H,eAAgB,CACd7/H,KAAM,UAER8/H,mBAAoB,CAClB9/H,KAAM,UAER+/H,YAAa,CACX//H,KAAM,UAERggI,gBAAiB,CACfhgI,KAAM,UAERwnB,QAAS,CACPxnB,KAAM,YAGVa,SAAU,CACR,cACA,mBAEFb,KAAM,UAERigI,aAAc,CACZ7/H,sBAAsB,EACtBE,WAAY,CACV2D,KAAM,CACJrE,KAAM,sBAERuE,OAAQ,CACNnE,KAAM,UAER0L,QAAS,GACTqN,SAAU,CACR/Y,KAAM,UAER6iC,OAAQ,CACN7iC,KAAM,UAER8iC,WAAY,CACV9iC,KAAM,UAERA,KAAM,CACJ,MAAS,UACTA,KAAM,UAER2nC,IAAK,CACH3nC,KAAM,UAERgF,MAAO,CACLhF,KAAM,WAGVa,SAAU,CACR,QAEFb,KAAM,UAERkgI,YAAa,CACX9/H,sBAAsB,EACtBE,WAAY,CACVshC,cAAe,CACb5hC,KAAM,UAERmgI,cAAe,CACbngI,KAAM,WAERogI,SAAU,CACRpgI,KAAM,WAERqgI,cAAe,CACbrgI,KAAM,UAERsgI,cAAe,CACb1gI,KAAM,8BAER2gI,mBAAoB,CAClBv/H,MAAO,CACLhB,KAAM,UAERA,KAAM,SAERwgI,eAAgB,CACdxgI,KAAM,WAERygI,gBAAiB,CACf7gI,KAAM,iCAER8gI,aAAc,CACZ1gI,KAAM,WAERqJ,MAAO,CACLrI,MAAO,CACLpB,KAAM,sBAERI,KAAM,SAER2gI,UAAW,CACT3gI,KAAM,WAER4gI,UAAW,CACThhI,KAAM,+BAGViB,SAAU,CACR,QACA,YACA,iBAEFb,KAAM,UAERsJ,cAAe,CACblJ,sBAAsB,EACtBE,WAAY,CACVwC,MAAO,CACLzC,YAAa,sEACbL,KAAM,UAERuJ,QAAS,CACPlJ,YAAa,gDACbL,KAAM,UAERwJ,IAAK,CACHnJ,YAAa,6FACbL,KAAM,WAERA,KAAM,CACJ,MAAS,SACTA,KAAM,WAGVa,SAAU,CACR,QACA,UACA,QAEFb,KAAM,UAER6gI,mCAAoC,CAClCzgI,sBAAsB,EACtBE,WAAY,CACVi/H,YAAa,CACXv/H,KAAM,QAER0L,QAAS,GACTm8B,kBAAmB,CACjB7mC,MAAO,CACLhB,KAAM,UAERA,KAAM,SAER8gI,kBAAmB,CACjB9/H,MAAO,CACLhB,KAAM,UAERA,KAAM,SAER+gI,WAAY,CACV//H,MAAO,GACPhB,KAAM,SAERA,KAAM,CACJ,KAAQ,CACN,iCACA,+BACA,8BAEFA,KAAM,UAER2nC,IAAK,CACH3nC,KAAM,UAERgF,MAAO,CACLhF,KAAM,UAER4I,EAAG,CACD5I,KAAM,UAERgJ,EAAG,CACDhJ,KAAM,WAGVa,SAAU,CACR,QAEFb,KAAM,UAER+J,OAAQ,CACN3J,sBAAsB,EACtBE,WAAY,CACV2oB,EAAG,CACDjpB,KAAM,UAERkpB,EAAG,CACDlpB,KAAM,UAER4I,EAAG,CACD5I,KAAM,UAERgJ,EAAG,CACDhJ,KAAM,WAGVa,SAAU,CACR,IACA,IACA,IACA,KAEFb,KAAM,UAERghI,eAAgB,CACd5gI,qBAAsB,CACpBJ,KAAM,UAERA,KAAM,UAER+K,YAAa,CACX3K,sBAAsB,EACtBE,WAAY,CACVwC,MAAO,CACLzC,YAAa,sEACbL,KAAM,UAERwJ,IAAK,CACHnJ,YAAa,6FACbL,KAAM,WAERgL,MAAO,CACLxI,MAAO,CACL,CACExB,MAAO,CACLhB,KAAM,UAERA,KAAM,SAER,CACEgB,MAAO,CACLhB,KAAM,UAERA,KAAM,UAGVK,YAAa,+DAEfL,KAAM,CACJ,MAAS,SACTA,KAAM,WAGVa,SAAU,CACR,QACA,QACA,QAEFb,KAAM,UAERihI,QAAS,CACP7gI,sBAAsB,EACtBE,WAAY,CACVshC,cAAe,CACb5hC,KAAM,UAERoqC,SAAU,CACRppC,MAAO,GACPhB,KAAM,SAER0L,QAAS,CACP9L,KAAM,gCAERI,KAAM,CACJA,KAAM,UAER2nC,IAAK,CACH3nC,KAAM,WAGVA,KAAM,UAERkhI,eAAgB,CACd9gI,sBAAsB,EACtBE,WAAY,CACVyd,OAAQ,CACN/c,MAAO,GACPhB,KAAM,SAERuS,KAAM,CACJvS,KAAM,UAERmhI,YAAa,CACXnhI,KAAM,UAERohI,SAAU,CACRphI,KAAM,UAERsO,QAAS,CACPtO,KAAM,UAERqhI,eAAgB,CACdrhI,KAAM,UAERshI,WAAY,CACV9+H,MAAO,CACL,CACExB,MAAO,GACPhB,KAAM,SAER,CACEA,KAAM,YAIZuO,aAAc,CACZvO,KAAM,UAER4G,OAAQ,CACN5G,KAAM,UAER6G,cAAe,CACb7G,KAAM,UAERuhI,UAAW,CACT/+H,MAAO,CACL,CACExB,MAAO,GACPhB,KAAM,SAER,CACEA,KAAM,YAIZ8G,YAAa,CACX9G,KAAM,WAGVA,KAAM,UAER6L,YAAa,CACXzL,sBAAsB,EACtBE,WAAY,CACVwC,MAAO,CACLzC,YAAa,sEACbL,KAAM,UAER8L,QAAS,CACPzL,YAAa,gDACbW,MAAO,CACLhB,KAAM,UAERA,KAAM,SAERwJ,IAAK,CACHnJ,YAAa,6FACbL,KAAM,WAERA,KAAM,CACJ,MAAS,SACTA,KAAM,WAGVa,SAAU,CACR,QACA,UACA,QAEFb,KAAM,UAERwP,MAAO,CACLhN,MAAO,CACL,CACE5C,KAAM,8BAER,CACEA,KAAM,+BAER,CACEA,KAAM,oDAER,CACEA,KAAM,6BAIZ4hI,OAAQ,CACNphI,sBAAsB,EACtBE,WAAY,CACVmhI,OAAQ,CACNzgI,MAAO,CACLpB,KAAM,uBAERI,KAAM,SAER0hI,OAAQ,CACN1gI,MAAO,CACLpB,KAAM,uBAERI,KAAM,SAER2hI,QAAS,CACP3gI,MAAO,CACLpB,KAAM,uBAERI,KAAM,SAERsd,KAAM,CACJtc,MAAO,CACLpB,KAAM,uBAERI,KAAM,SAER4hI,MAAO,CACL5gI,MAAO,CACLpB,KAAM,uBAERI,KAAM,SAERqd,IAAK,CACHrc,MAAO,CACLpB,KAAM,uBAERI,KAAM,SAER6hI,MAAO,CACL7gI,MAAO,CACLpB,KAAM,uBAERI,KAAM,UAGVa,SAAU,CACR,MACA,OACA,SACA,QACA,SACA,UACA,SAEFb,KAAM,UAER8hI,gBAAiB,CACf1hI,sBAAsB,EACtBE,WAAY,CACVo/H,eAAgB,CACd9/H,KAAM,gCAER+/H,UAAW,IAEb9+H,SAAU,CACR,kBAEFb,KAAM,UAER+hI,KAAM,CACJ3hI,sBAAsB,EACtBE,WAAY,CACV0hI,mBAAoB,CAClBhiI,KAAM,UAER4hC,cAAe,CACb5hC,KAAM,UAERiiI,wBAAyB,CACvBriI,KAAM,yCAERsiI,+BAAgC,CAC9BliI,KAAM,WAERmiI,eAAgB,CACdnhI,MAAO,CACLhB,KAAM,UAERA,KAAM,SAERoiI,eAAgB,CACdphI,MAAO,CACLhB,KAAM,UAERA,KAAM,SAERsE,OAAQ,CACN1E,KAAM,wBAERyiI,SAAU,CACRrhI,MAAO,CACLpB,KAAM,yBAERI,KAAM,SAERsiI,cAAe,CACbtiI,KAAM,WAER0I,OAAQ,CACN9I,KAAM,wBAER+nC,IAAK,CACH3nC,KAAM,UAER2gI,UAAW,CACT3gI,KAAM,WAERsF,WAAY,CACVtE,MAAO,CACL,CACEhB,KAAM,CACJ,SACA,SAGJ,CACEA,KAAM,CACJ,SACA,UAINmB,SAAU,EACVC,SAAU,EACVpB,KAAM,UAGVa,SAAU,CACR,SACA,UAEFb,KAAM,YAQV,SAASuiI,GAAiB1/H,EAAQkB,GAShC,GARI,eAAgBlB,IACdA,EAAOqD,WAAWkkC,SAAS,SAC7BvnC,EAAOqD,WAAarD,EAAOqD,WAAW8G,QAAQ,MAAO,KAElDmgB,OAAOnP,KAAKqgB,KAAkBj4B,UAAU6oB,MAAK,SAACqQ,GAAD,OAASA,IAAQ,MAAL,OAAWz8B,EAAOqD,iBAC9ErD,EAAOqD,WAAa,MA7isB1B,SAAqBrD,GACnB,MAAO,eAAgBA,KAAY,aAAcA,GA+isB7C2/H,CAAY3/H,GACd,MAAO,CACLw7B,GAAgBt6B,GAAUqC,SAA1B,aAAyCvD,EAAOqD,aAAc,GAAK,EACnEm4B,GAAgBt6B,GAAUqC,SAA1B,aAAyCvD,EAAOqD,aAAc,IAE3D,GAljsBT,SAA0BrD,GACxB,QAAS,eAAgBA,IAAW,aAAcA,EAijsBvC4/H,CAAiB5/H,GAC1B,OAAOA,EAAOuD,SACT,GAjjsBT,SAA6BvD,GAC3B,MAAO,eAAgBA,GAAU,aAAcA,EAgjsBpC6/H,CAAoB7/H,GAAS,CACtC,IAAM8/H,EAAWtkG,GAAgBt6B,GAAUqC,SAA1B,aAAyCvD,EAAOqD,aAAc,GAC/E,cAAqBrD,EAAOuD,SAA5B,GACA,MAAO,CAACu8H,EADR,KAC0BA,EAD1B,OAKJ,SAASC,GAAuBC,EAAaj/F,GAC3C,IAAMk/F,EAAe,GACfC,EAAcpiH,GACpBkiH,EAAYzuH,SAAQ,SAACxB,GACnBmwH,EAAY3uH,SAAQ,SAAC6I,GACnB,IAAMC,EAAUtK,EAAMxK,OAAO6U,GAC7B,GAAKzH,GAAc0H,SAA+B,IAAnBA,EAAQra,OAAvC,CAGA,IAAQA,EAAwBqa,EAAxBra,OAAco4B,EAAU/d,EAAhBld,KAChB,GAAc,iBAAVi7B,EAA0B,CAC5B,IAAM+nG,EAAgBzsH,MAAMtJ,KAAKpK,GAC5BigI,EAAa7lH,IAGZ6lH,EAAa7lH,GAAY,GAAK+lH,EAAc,KAC9CF,EAAa7lH,GAAY,GAAK+lH,EAAc,IAE1CF,EAAa7lH,GAAY,GAAK+lH,EAAc,KAC9CF,EAAa7lH,GAAY,GAAK+lH,EAAc,KAN9CF,EAAa7lH,GAAc+lH,OASxB,GAAc,YAAV/nG,EAAqB,CAC9B,IAAMgoG,EAAgB1sH,MAAMtJ,KAAKpK,GAC5BigI,EAAa7lH,GAGhB6lH,EAAa7lH,GAAc1G,MAAMtJ,KAAqB,IAAIygB,IAAJ,sBAAYo1G,EAAa7lH,IAAzB,YAAyCgmH,MAF/FH,EAAa7lH,GAAcgmH,UAOnCJ,EAAYzuH,SAAQ,SAACxB,GACnBmwH,EAAY3uH,SAAQ,SAAC6I,GACnB,IAAMC,EAAUtK,EAAMxK,OAAO6U,GACzBzH,GAAc0H,IAA6B,YAAjBA,EAAQld,OAEtC4S,EAAMswH,iBAAiBjmH,EAAY6lH,EAAa7lH,GAAa2mB,GAC7DhxB,EAAMuwH,qBAERvwH,EAAMwwH,wBAGV,IAAMC,GAAU,CACdlD,eAAe,EACfI,mBAAoB,CAAC,2CACrBl3H,MAAO,CACL,CACE64H,gCAAgC,EAChCD,wBAAyB,CACvBnC,mBAAoB,4BACpBD,eAAgB,yBAChBG,gBAAiB,4BACjBD,YAAa,QAEfz7H,OAAQ,CAAEsE,EAAG,EAAGI,EAAG,EAAGkgB,EAAG,IAAKD,EAAG,KACjCvgB,OAAQ,CACN2U,IAAK,GACLC,KAAM,CACJ,CACEtd,KAAM,WACNgF,MAAO,IACPb,OAAQ,IACRg7H,SAAU,CACR,CACEn/H,KAAM,gBACN6iC,OAAQ,0CACRC,WAAY,oBACZ99B,MAAO,IACPb,OAAQ,IACRuH,QAAS,CACPs1B,mBAAmB,EACnBsiG,mBAAoB,UACpBlxH,SAAU,GACVsuB,cAAe,OACf6iG,qBAAqB,EACrB3nH,WAAY,QACZ4nH,qBAAsB,QACtB7iG,iBAAkB,EAClB8iG,gBAAiB,EACjBC,eAAgB,EAChBC,iBAAkB,EAClBC,kBAAmB,EACnB7iG,gBAAiB,cACjB34B,KAAM,CACJxD,QAAS,GACTJ,YAAa,WACbT,SAAU,OACVO,OAAQ,SACR4wB,QAAQ,EACRhwB,QAAS,CAAEkB,SAAU,CAAC,EAAG,MACzBpC,aAAc,GACdmB,QAAS,EACTE,QAAS,EACTP,MAAO,CAAEyJ,aAAc,IACvBtK,KAAM,CACJrD,IAAK,2EACLZ,KAAM,WACNqI,IAAK,SACL3G,OAAQ,WACRG,MAAO,OACPiJ,WAAY,CAAC,WAAY,WAAY,WAAY,YACjDrJ,QAAS,GAEXsG,KAAM,OACNa,EAAG,CACD9F,MAAO,QACP9C,KAAM,UACN+P,KAAM,OACNlN,OAAQ,CAAEuD,SAAU,CAAC,EAAG,MACxB7B,UAAW,wCAEbwE,GAAI,CAAEjG,MAAO,MAAO9C,KAAM,WAC1BqI,IAAK,CACHvF,MAAO,SACP9C,KAAM,UACN+C,QAAQ,GAEV2D,MAAO,CACL5D,MAAO,OACP9C,KAAM,eACN+C,QAAQ,GAEV0F,QAAS,CACP,CACE3F,MAAO,QACP9C,KAAM,UACNsP,IAAK,kBAEP,CACExM,MAAO,MACP9C,KAAM,UACNsP,IAAK,gBAEP,CACExM,MAAO,OACP9C,KAAM,eACNsP,IAAK,QACLC,OAAQ,MAEV,CAAEzM,MAAO,SAAU9C,KAAM,UAAWsP,IAAK,WAE3CtK,MAAO,IACPb,OAAQ,IACRO,wBAAwB,GAE1BoU,MAAO,CACL5O,KAAM,QACN63G,KAAM,CACJx0G,WAAY,QACZ2e,WAAY,QACZ23G,qBAAsB,cACtBC,cAAe,GACfC,gBAAiB,QACjBC,WAAY,OACZC,gBAAiB,OACjBC,cAAe,OACfC,wBAAyB,cACzBC,iBAAkB,GAClBC,mBAAoB,QACpBC,mBAAoB,SACpBC,cAAe,OACfjB,mBAAoB,WAEtBtiH,MAAO,CACLzT,WAAY,cACZid,sBAAuB,cACvB0B,WAAY,QACZC,gBAAiB,QACjB23G,cAAe,GACfE,WAAY,OACZ11H,QAAS,QACTC,aAAc,GAEhBxL,OAAQ,CACNgW,SAAU,MACVxL,WAAY,QACZC,kBAAmB,GACnBoO,WAAY,QACZC,cAAe,GACfC,gBAAiB,SACjBC,gBAAiB,QACjBa,iBAAkB,UAClB6C,UAAW,SAEb1P,KAAM,CACJ0P,UAAW,QACX7D,WAAY,QACZC,cAAe,GACfC,gBAAiB,SACjBC,gBAAiB,QACjB2O,cAAe,QACfxQ,UAAW,UACXX,gBAAiB,EACjBY,eAAgB,QAChBC,eAAgB,CAAC,EAAG,IAEtBoqH,WAAY,CACV99H,MAAO,UACP4B,KAAM,EACN1B,OAAQ,QACRE,YAAa,EACbH,QAAS,EACT89H,kBAAmB,CACjB,UACA,UACA,UACA,UACA,UACA,UACA,WAEFC,sBAAuB,CAAC,EAAG,IAE7BC,MAAO,CACLj+H,MAAO,UACP4B,KAAM,EACN1B,OAAQ,QACRE,YAAa,EACbH,QAAS,EACT89H,kBAAmB,CACjB,UACA,UACA,UACA,UACA,UACA,UACA,WAEFC,sBAAuB,CAAC,EAAG,IAE7BE,KAAM,CACJl+H,MAAO,UACP4B,KAAM,EACN1B,OAAQ,QACRE,YAAa,EACbH,QAAS,EACT89H,kBAAmB,CACjB,UACA,UACA,UACA,UACA,UACA,UACA,WAEFC,sBAAuB,CAAC,EAAG,IAE7BG,SAAU,CACRn+H,MAAO,UACP4B,KAAM,EACN1B,OAAQ,QACRE,YAAa,EACbH,QAAS,EACT89H,kBAAmB,CACjB,UACA,UACA,UACA,UACA,UACA,UACA,WAEFC,sBAAuB,CAAC,EAAG,IAE7BI,KAAM,CACJp+H,MAAO,UACP4B,KAAM,EACN1B,OAAQ,QACRE,YAAa,EACbH,QAAS,EACT89H,kBAAmB,CACjB,UACA,UACA,UACA,UACA,UACA,UACA,WAEFC,sBAAuB,CAAC,EAAG,IAE7BrqH,KAAM,CACJ3T,MAAO,UACP4B,KAAM,EACN1B,OAAQ,QACRE,YAAa,EACbH,QAAS,EACT89H,kBAAmB,CACjB,UACA,UACA,UACA,UACA,UACA,UACA,WAEFC,sBAAuB,CAAC,EAAG,IAE7BK,IAAK,CACHr+H,MAAO,UACP4B,KAAM,EACN1B,OAAQ,QACRE,YAAa,EACbH,QAAS,EACT89H,kBAAmB,CACjB,UACA,UACA,UACA,UACA,UACA,UACA,WAEFC,sBAAuB,CAAC,EAAG,IAE7B3W,KAAM,CACJrnH,MAAO,UACP4B,KAAM,EACN1B,OAAQ,QACRE,YAAa,EACbH,QAAS,EACT89H,kBAAmB,CACjB,UACA,UACA,UACA,UACA,UACA,UACA,WAEFC,sBAAuB,CAAC,EAAG,IAE7BM,KAAM,CACJt+H,MAAO,UACP4B,KAAM,EACN1B,OAAQ,QACRE,YAAa,EACbH,QAAS,EACT89H,kBAAmB,CACjB,UACA,UACA,UACA,UACA,UACA,UACA,WAEFC,sBAAuB,CAAC,EAAG,IAE7Bl8H,KAAM,CACJ9B,MAAO,UACP4B,KAAM,EACN1B,OAAQ,QACRE,YAAa,EACbH,QAAS,EACT89H,kBAAmB,CACjB,UACA,UACA,UACA,UACA,UACA,UACA,WAEFC,sBAAuB,CAAC,EAAG,GAC3Bj2H,WAAY,SACZE,eAAgB,UAElBlB,MAAO,CACL/G,MAAO,OACP4B,KAAM,EACN1B,OAAQ,QACRE,YAAa,EACbH,QAAS,GACT89H,kBAAmB,CACjB,UACA,UACA,UACA,UACA,UACA,UACA,WAEFC,sBAAuB,CAAC,EAAG,SAOvC,CACE/8F,IAAK,uCACL3nC,KAAM,aACN4hC,cAAe,kEACfl2B,QAAS,CACPpH,OAAQ,SACRG,YAAa,KACbO,MAAO,IACPb,OAAQ,IACR2U,MAAO,CACL5O,KAAM,QACN63G,KAAM,CACJx0G,WAAY,QACZ2e,WAAY,QACZ23G,qBAAsB,cACtBC,cAAe,GACfC,gBAAiB,QACjBC,WAAY,OACZC,gBAAiB,OACjBC,cAAe,OACfC,wBAAyB,cACzBC,iBAAkB,GAClBC,mBAAoB,QACpBC,mBAAoB,SACpBC,cAAe,OACfjB,mBAAoB,WAEtBtiH,MAAO,CACLzT,WAAY,cACZid,sBAAuB,cACvB0B,WAAY,QACZC,gBAAiB,QACjB23G,cAAe,GACfE,WAAY,OACZ11H,QAAS,QACTC,aAAc,GAEhBxL,OAAQ,CACNgW,SAAU,MACVxL,WAAY,QACZC,kBAAmB,GACnBoO,WAAY,QACZC,cAAe,GACfC,gBAAiB,SACjBC,gBAAiB,QACjBa,iBAAkB,UAClB6C,UAAW,SAEb1P,KAAM,CACJ0P,UAAW,QACX7D,WAAY,QACZC,cAAe,GACfC,gBAAiB,SACjBC,gBAAiB,QACjB2O,cAAe,QACfxQ,UAAW,UACXX,gBAAiB,EACjBY,eAAgB,QAChBC,eAAgB,CAAC,EAAG,IAEtBoqH,WAAY,CACV99H,MAAO,UACP4B,KAAM,EACN1B,OAAQ,QACRE,YAAa,EACbH,QAAS,EACT89H,kBAAmB,CACjB,UACA,UACA,UACA,UACA,UACA,UACA,WAEFC,sBAAuB,CAAC,EAAG,IAE7BC,MAAO,CACLj+H,MAAO,UACP4B,KAAM,EACN1B,OAAQ,QACRE,YAAa,EACbH,QAAS,EACT89H,kBAAmB,CACjB,UACA,UACA,UACA,UACA,UACA,UACA,WAEFC,sBAAuB,CAAC,EAAG,IAE7BE,KAAM,CACJl+H,MAAO,UACP4B,KAAM,EACN1B,OAAQ,QACRE,YAAa,EACbH,QAAS,EACT89H,kBAAmB,CACjB,UACA,UACA,UACA,UACA,UACA,UACA,WAEFC,sBAAuB,CAAC,EAAG,IAE7BG,SAAU,CACRn+H,MAAO,UACP4B,KAAM,EACN1B,OAAQ,QACRE,YAAa,EACbH,QAAS,EACT89H,kBAAmB,CACjB,UACA,UACA,UACA,UACA,UACA,UACA,WAEFC,sBAAuB,CAAC,EAAG,IAE7BI,KAAM,CACJp+H,MAAO,UACP4B,KAAM,EACN1B,OAAQ,QACRE,YAAa,EACbH,QAAS,EACT89H,kBAAmB,CACjB,UACA,UACA,UACA,UACA,UACA,UACA,WAEFC,sBAAuB,CAAC,EAAG,IAE7BrqH,KAAM,CACJ3T,MAAO,UACP4B,KAAM,EACN1B,OAAQ,QACRE,YAAa,EACbH,QAAS,EACT89H,kBAAmB,CACjB,UACA,UACA,UACA,UACA,UACA,UACA,WAEFC,sBAAuB,CAAC,EAAG,IAE7BK,IAAK,CACHr+H,MAAO,UACP4B,KAAM,EACN1B,OAAQ,QACRE,YAAa,EACbH,QAAS,EACT89H,kBAAmB,CACjB,UACA,UACA,UACA,UACA,UACA,UACA,WAEFC,sBAAuB,CAAC,EAAG,IAE7B3W,KAAM,CACJrnH,MAAO,UACP4B,KAAM,EACN1B,OAAQ,QACRE,YAAa,EACbH,QAAS,EACT89H,kBAAmB,CACjB,UACA,UACA,UACA,UACA,UACA,UACA,WAEFC,sBAAuB,CAAC,EAAG,IAE7BM,KAAM,CACJt+H,MAAO,UACP4B,KAAM,EACN1B,OAAQ,QACRE,YAAa,EACbH,QAAS,EACT89H,kBAAmB,CACjB,UACA,UACA,UACA,UACA,UACA,UACA,WAEFC,sBAAuB,CAAC,EAAG,IAE7Bl8H,KAAM,CACJ9B,MAAO,UACP4B,KAAM,EACN1B,OAAQ,QACRE,YAAa,EACbH,QAAS,EACT89H,kBAAmB,CACjB,UACA,UACA,UACA,UACA,UACA,UACA,WAEFC,sBAAuB,CAAC,EAAG,GAC3Bj2H,WAAY,SACZE,eAAgB,UAElBlB,MAAO,CACL/G,MAAO,OACP4B,KAAM,EACN1B,OAAQ,QACRE,YAAa,EACbH,QAAS,GACT89H,kBAAmB,CACjB,UACA,UACA,UACA,UACA,UACA,UACA,WAEFC,sBAAuB,CAAC,EAAG,KAG/B3gI,SAAU,OACV6C,OAAQ,cACRF,MAAO,QACP0L,SAAU,GACVC,WAAY,QACZC,WAAY,SACZmN,UAAW,QACX2kB,WAAY,QACZtD,cAAe,OACfwD,oBAAoB,GAEtBt/B,MAAO,KAGX08H,OAAQ,GACRE,MAAO,GACPH,OAAQ,GACRE,QAAS,GACTE,MAAO,IAETM,eAAgB,CAAC,EAAG,KACpBC,eAAgB,CAAC,EAAG,KACpBzB,WAAW,EACXr7H,WAAY,CAAC,EAAG,MAChBqiC,IAAK,uCACL/F,cAAe,mEAEjB,CACEsgG,gCAAgC,EAChCD,wBAAyB,CACvBnC,mBAAoB,4BACpBD,eAAgB,yBAChBG,gBAAiB,4BACjBD,YAAa,QAEfz7H,OAAQ,CAAEsE,EAAG,IAAKI,EAAG,EAAGkgB,EAAG,IAAKD,EAAG,KACnCvgB,OAAQ,CACN2U,IAAK,GACLC,KAAM,CACJ,CACEtd,KAAM,WACNgF,MAAO,IACPb,OAAQ,IACRg7H,SAAU,CACR,CACEn/H,KAAM,gBACN6iC,OAAQ,0CACRC,WAAY,oBACZ99B,MAAO,IACPb,OAAQ,IACRuH,QAAS,CACPs1B,mBAAmB,EACnBsiG,mBAAoB,UACpBlxH,SAAU,GACVsuB,cAAe,OACf6iG,qBAAqB,EACrB3nH,WAAY,QACZ4nH,qBAAsB,QACtB7iG,iBAAkB,EAClB8iG,gBAAiB,EACjBC,eAAgB,EAChBC,iBAAkB,EAClBC,kBAAmB,EACnB7iG,gBAAiB,cACjB34B,KAAM,CACJxD,QAAS,GACTJ,YAAa,WACbT,SAAU,OACVO,OAAQ,SACR4wB,QAAQ,EACRhwB,QAAS,CAAEkB,SAAU,CAAC,EAAG,MACzBpC,aAAc,GACdmB,QAAS,EACTE,QAAS,EACTP,MAAO,CAAEyJ,aAAc,IACvBtK,KAAM,CACJrD,IAAK,2EACLZ,KAAM,WACNqI,IAAK,SACL3G,OAAQ,WACRG,MAAO,OACPiJ,WAAY,CAAC,WAAY,WAAY,WAAY,YACjDrJ,QAAS,GAEXsG,KAAM,OACNa,EAAG,CACD9F,MAAO,QACP9C,KAAM,UACN6C,OAAQ,CAAEuD,SAAU,CAAC,EAAG,MACxB7B,UAAW,wCAEbwE,GAAI,CAAEjG,MAAO,MAAO9C,KAAM,WAC1BqI,IAAK,CACHvF,MAAO,SACP9C,KAAM,UACN+C,QAAQ,GAEV2D,MAAO,CACL5D,MAAO,OACP9C,KAAM,eACN+C,QAAQ,GAEV0F,QAAS,CACP,CACE3F,MAAO,QACP9C,KAAM,UACNsP,IAAK,kBAEP,CACExM,MAAO,MACP9C,KAAM,UACNsP,IAAK,gBAEP,CACExM,MAAO,OACP9C,KAAM,eACNsP,IAAK,QACLC,OAAQ,MAEV,CAAEzM,MAAO,SAAU9C,KAAM,UAAWsP,IAAK,WAE3CtK,MAAO,IACPb,OAAQ,KAEV2U,MAAO,CACL5O,KAAM,QACN63G,KAAM,CACJx0G,WAAY,QACZ2e,WAAY,QACZ23G,qBAAsB,cACtBC,cAAe,GACfC,gBAAiB,QACjBC,WAAY,OACZC,gBAAiB,OACjBC,cAAe,OACfC,wBAAyB,cACzBC,iBAAkB,GAClBC,mBAAoB,QACpBC,mBAAoB,SACpBC,cAAe,OACfjB,mBAAoB,WAEtBtiH,MAAO,CACLzT,WAAY,cACZid,sBAAuB,cACvB0B,WAAY,QACZC,gBAAiB,QACjB23G,cAAe,GACfE,WAAY,OACZ11H,QAAS,QACTC,aAAc,GAEhBxL,OAAQ,CACNgW,SAAU,MACVxL,WAAY,QACZC,kBAAmB,GACnBoO,WAAY,QACZC,cAAe,GACfC,gBAAiB,SACjBC,gBAAiB,QACjBa,iBAAkB,UAClB6C,UAAW,SAEb1P,KAAM,CACJ0P,UAAW,QACX7D,WAAY,QACZC,cAAe,GACfC,gBAAiB,SACjBC,gBAAiB,QACjB2O,cAAe,QACfxQ,UAAW,UACXX,gBAAiB,EACjBY,eAAgB,QAChBC,eAAgB,CAAC,EAAG,IAEtBoqH,WAAY,CACV99H,MAAO,UACP4B,KAAM,EACN1B,OAAQ,QACRE,YAAa,EACbH,QAAS,EACT89H,kBAAmB,CACjB,UACA,UACA,UACA,UACA,UACA,UACA,WAEFC,sBAAuB,CAAC,EAAG,IAE7BC,MAAO,CACLj+H,MAAO,UACP4B,KAAM,EACN1B,OAAQ,QACRE,YAAa,EACbH,QAAS,EACT89H,kBAAmB,CACjB,UACA,UACA,UACA,UACA,UACA,UACA,WAEFC,sBAAuB,CAAC,EAAG,IAE7BE,KAAM,CACJl+H,MAAO,UACP4B,KAAM,EACN1B,OAAQ,QACRE,YAAa,EACbH,QAAS,EACT89H,kBAAmB,CACjB,UACA,UACA,UACA,UACA,UACA,UACA,WAEFC,sBAAuB,CAAC,EAAG,IAE7BG,SAAU,CACRn+H,MAAO,UACP4B,KAAM,EACN1B,OAAQ,QACRE,YAAa,EACbH,QAAS,EACT89H,kBAAmB,CACjB,UACA,UACA,UACA,UACA,UACA,UACA,WAEFC,sBAAuB,CAAC,EAAG,IAE7BI,KAAM,CACJp+H,MAAO,UACP4B,KAAM,EACN1B,OAAQ,QACRE,YAAa,EACbH,QAAS,EACT89H,kBAAmB,CACjB,UACA,UACA,UACA,UACA,UACA,UACA,WAEFC,sBAAuB,CAAC,EAAG,IAE7BrqH,KAAM,CACJ3T,MAAO,UACP4B,KAAM,EACN1B,OAAQ,QACRE,YAAa,EACbH,QAAS,EACT89H,kBAAmB,CACjB,UACA,UACA,UACA,UACA,UACA,UACA,WAEFC,sBAAuB,CAAC,EAAG,IAE7BK,IAAK,CACHr+H,MAAO,UACP4B,KAAM,EACN1B,OAAQ,QACRE,YAAa,EACbH,QAAS,EACT89H,kBAAmB,CACjB,UACA,UACA,UACA,UACA,UACA,UACA,WAEFC,sBAAuB,CAAC,EAAG,IAE7B3W,KAAM,CACJrnH,MAAO,UACP4B,KAAM,EACN1B,OAAQ,QACRE,YAAa,EACbH,QAAS,EACT89H,kBAAmB,CACjB,UACA,UACA,UACA,UACA,UACA,UACA,WAEFC,sBAAuB,CAAC,EAAG,IAE7BM,KAAM,CACJt+H,MAAO,UACP4B,KAAM,EACN1B,OAAQ,QACRE,YAAa,EACbH,QAAS,EACT89H,kBAAmB,CACjB,UACA,UACA,UACA,UACA,UACA,UACA,WAEFC,sBAAuB,CAAC,EAAG,IAE7Bl8H,KAAM,CACJ9B,MAAO,UACP4B,KAAM,EACN1B,OAAQ,QACRE,YAAa,EACbH,QAAS,EACT89H,kBAAmB,CACjB,UACA,UACA,UACA,UACA,UACA,UACA,WAEFC,sBAAuB,CAAC,EAAG,GAC3Bj2H,WAAY,SACZE,eAAgB,UAElBlB,MAAO,CACL/G,MAAO,OACP4B,KAAM,EACN1B,OAAQ,QACRE,YAAa,EACbH,QAAS,GACT89H,kBAAmB,CACjB,UACA,UACA,UACA,UACA,UACA,UACA,WAEFC,sBAAuB,CAAC,EAAG,UAQzChD,OAAQ,GACRE,MAAO,GACPH,OAAQ,GACRE,QAAS,GACTE,MAAO,IAETM,eAAgB,CAAC,EAAG,KACpBC,eAAgB,CAAC,EAAG,KACpBzB,WAAW,EACXr7H,WAAY,CAAC,EAAG,MAChBqiC,IAAK,yCAGTi5F,UAAW,CAAElB,eAAgB,GAAIC,UAAW,IAC5CW,cAAe,CAAEZ,eAAgB,GAAIC,UAAW,IAChDS,UAAU,EACVx+F,cAAe,mEAEjB,SAASqjG,GAAkB3gH,EAAOrjB,EAAO2pD,GACvC,MAAO,GAAP,mBAAWtmC,EAAMuO,MAAM,EAAG5xB,IAA1B,CAAkC2pD,GAAlC,YAA2CtmC,EAAMuO,MAAM5xB,KAEzD,SAASikI,GAAqB5gH,GAE5B,IADA,IAAMsR,EAAS,GACNre,EAAI,EAAGA,EAAI+M,EAAMpQ,OAAQqD,GAAK,EACrCqe,EAAOrd,KAAK,CAAC+L,EAAM/M,GAAI+M,EAAM/M,EAAI,KAEnC,OAAOqe,EAET,IAAMuvG,GAAoB,GAyBpBC,G,WACJ,aAAc,oBACZrsG,KAAKh1B,SAAW,OAChBg1B,KAAKssG,GAAK,CACRlF,eAAe,EACfI,mBAAoB,GACpBl3H,MAAO,GACPu3H,UAAW,CACTlB,eAAgB,GAChBC,UAAW,IAEbW,cAAe,CACbZ,eAAgB,GAChBC,UAAW,KAGf5mG,KAAKusG,aAAY,G,wCAEnB,WACE,OAAOvsG,KAAKssG,K,gCAEd,SAAmB7gI,GAEjB,OADAu0B,KAAKv0B,YAAcA,EACZu0B,O,4BAET,SAAe4O,EAAK5jC,GAElB,OADAg1B,KAAKssG,GAAGh8H,MAAMkP,KAAKuU,KAAKC,MAAMD,KAAKE,UAAL,2BAlDV,SAACjpB,GACvB,MAAO,CACLm+H,gCAAgC,EAChCD,wBAAyB,CACvBnC,mBAAoB,4BACpBD,eAAgB,yBAChBG,gBAAiB,4BACjBD,YAAyB,MAAZh8H,EAAmBA,EAAW,QAE7CO,OAAQ,CAAE4kB,EAAG,GAAID,EAAG,GAAIrgB,EAAG,EAAGI,EAAG,GACjCN,OAAQ,CACN2U,IAAK,GACLC,KAAM,GACNokH,OAAQ,GACRE,MAAO,GACPH,OAAQ,GACRE,QAAS,GACTE,MAAO,IAETM,eAAgB,CAAC,EAAG9jG,GAAgBt6B,GAAU66B,OAC9CwjG,eAAgB,CAAC,EAAG/jG,GAAgBt6B,GAAU66B,OAC9C+hG,WAAW,GA6BuC4E,CAAgBxhI,IAApC,IAA+C4jC,WACtE5O,O,yBAET,SAAYh1B,GAGV,OAFAg1B,KAAKh1B,SAAWA,EAChBg1B,KAAKysG,iBAAiBnnG,GAAgBtF,KAAKh1B,UAAU+6B,MAC9C/F,O,yBAET,WACE,OAAOA,KAAKh1B,W,0BAEd,SAAaiB,EAAOb,EAAQqE,GAAwI,IAC9JqK,EAD4B4yH,EAAkI,uDAAtH,QAASrzH,EAA6G,uDAAlG,GAAIE,EAA8F,uDAAjF,SAAUhF,EAAuE,uDAA/D,OAAQyzB,EAAuD,uDAArC,cAAe1uB,EAAsB,uDAAT,QAmBzJ,OAjBI0mB,KAAK2sG,gBACiC,OAAvC7yH,EAAKkmB,KAAK2sG,cAAch9H,OAAO2U,MAAwBxK,EAAG0F,KAAK,CAC9DvY,KAAM,OACNgF,QACAb,SACAuH,QAAS,CACPq1B,kBACA0kG,YACArzH,WACAE,aACAD,aACAszH,QAAS,EACTr4H,QACA9E,WAICuwB,O,sBAET,SAASz0B,EAAQshI,EAAQ9sH,EAAOymH,EAAaz6H,GAC3C,IAAI+N,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EACxB,GAAKqsH,EAkBL,OAhB+B,OAA9BrsH,EAAK6lB,KAAKqqE,QAAQwiC,KAA4B1yH,EAAGxK,OAAOm5H,MAAMtpH,KAAK,CAClEvY,KAAiB,aAAXsE,EAAwB,cAAgB,iCAC9CqjC,IAAK7T,KACLyrG,cACA7zH,QAAS,CACP48B,oBAAoE,OAA9Cz1B,EAAc,MAAT/N,OAAgB,EAASA,EAAM4B,OAAiBmM,EAAKiG,EAAMrL,MAAM/G,MAC5F6hC,sBAAuE,OAA/Cz1B,EAAc,MAAThO,OAAgB,EAASA,EAAM8B,QAAkBkM,EAAKgG,EAAMrL,MAAM7G,OAC/F4hC,sBAAwE,OAAhDz1B,EAAc,MAATjO,OAAgB,EAASA,EAAM6B,SAAmBoM,EAAK+F,EAAMrL,MAAM9G,QAChG8hC,wBAA0E,OAAhDz1B,EAAc,MAATlO,OAAgB,EAASA,EAAM6B,SAAmBqM,EAAK8F,EAAMrL,MAAM9G,QAClGG,YAAkE,OAApDmM,EAAc,MAATnO,OAAgB,EAASA,EAAMgC,aAAuBmM,EAAK6F,EAAMrL,MAAM3G,YAC1FjC,WAAqB,MAATC,OAAgB,EAASA,EAAMD,WAC3CX,SAAmB,MAATY,OAAgB,EAASA,EAAMZ,SACzCG,YAAsB,MAATS,OAAgB,EAASA,EAAMT,YAC5CI,YAAsB,MAATK,OAAgB,EAASA,EAAML,eAGzCs0B,O,yBAET,WACE,OAAOA,KAAKssG,GAAGh8H,MAAM0vB,KAAKssG,GAAGh8H,MAAM6K,OAAS,K,kCAE9C,WACE,MAA4B,aAArB6kB,KAAKv0B,YAA6B,OAAS,W,4BAEpD,WAAiB,WACTqhI,EAAK9sG,KAAKssG,GAAGh8H,MAAMmL,QAAO,SAACvD,GAC/B,IAAI4B,EAAIC,EACR,MAAqH,cAA7B,OAA/EA,EAAqD,OAA/CD,EAAK5B,EAAEvI,OAAO,EAAKo9H,8BAAmC,EAASjzH,EAAG,SAAc,EAASC,EAAG9S,SAE7G,OAAO6lI,EAAGA,EAAG3xH,OAAS,K,qBAExB,SAAQ0xH,GACN,OAAO7sG,KAAKssG,GAAGh8H,MAAM4lB,MAAK,SAACxa,GAAD,OAAOA,EAAEkzB,MAAQi+F,O,0BAE7C,WAA8B,IAAjBnH,EAAiB,wDAC5B,MAAmE,YAA5DD,GAAaS,GAAelmG,KAAK3wB,OAAQq2H,GAASlrF,Q,uBAE3D,SAAUruC,EAASE,GAOjB,OANIF,IACF6zB,KAAK2sG,cAAcvD,eAAiBI,GAAiBr9H,EAAS6zB,KAAKgtG,gBAEjE3gI,IACF2zB,KAAK2sG,cAActD,eAAiBG,GAAiBn9H,EAAS2zB,KAAKgtG,gBAE9DhtG,O,0BAET,WAAwD,IAA3Cv0B,EAA2C,uDAA7B,aAAcQ,EAAe,uCAARb,EAAQ,uCACtD,GAAoB,aAAhBK,EACF,OAAOu0B,KAET,IAAMl2B,EAASk2B,KAAK2sG,cAAcvD,eAClC,IAAKt/H,EACH,OAAOk2B,KAET,kBAAqBl2B,EAArB,GAAOjB,EAAP,KAAcD,EAAd,KACM2G,EAAO3G,EAAMC,EACb8/H,GAAU9/H,EAAQD,GAAO,EAK/B,OAJAo3B,KAAK2sG,cAAcvD,eAAiB,CAClCT,EAASp5H,EAAOtD,EAAQ,EAAIb,EAASa,EACrC08H,EAASp5H,EAAOtD,EAAQ,EAAIb,EAASa,GAEhC+zB,O,0BAET,SAAa4nG,GAEX,OADA5nG,KAAK2sG,cAAc/E,UAAYA,EACxB5nG,O,2BAET,SAAczzB,GAEZ,OADAyzB,KAAK2sG,cAAcpgI,WAAaA,EACzByzB,O,uBAET,SAAUz0B,GAER,OADAy0B,KAAK2sG,cAAcphI,OAASA,EACrBy0B,O,yBAET,SAAYqnG,GAEV,OADArnG,KAAKssG,GAAGjF,SAAWA,EACZrnG,O,8BAET,SAAiB6I,GAKf,OAJI7I,KAAK2sG,gBACP3sG,KAAK2sG,cAAc9jG,cAAgBA,GAErC7I,KAAKssG,GAAGzjG,cAAgBA,EACjB7I,O,mCAET,SAAsBwnG,GACpB,IAAI1tH,EAAIC,EAGR,OAFIytH,IAAiH,KAArD,OAApC1tH,EAAKkmB,KAAKssG,GAAG9E,yBAA8B,EAAS1tH,EAAGilB,QAAQyoG,MACpD,OAApCztH,EAAKimB,KAAKssG,GAAG9E,qBAAuCztH,EAAGyF,KAAKgoH,IACxDxnG,O,0BAET,SAAa/X,GACX,IAAInO,EACJ,OAAKkmB,KAAK2sG,eAEV3sG,KAAK2sG,cAAch9H,OAAOqwB,KAAK+sG,wBAA0B,CACvD,CACE9lI,KAAM,WACN2nC,IAAK,GAAF,OAAyB,OAAnB90B,EAAKmO,EAAM2mB,KAAe90B,EAAKihB,KAArC,YAA6CiF,KAAK+sG,uBAAlD,aACH9gI,MAAOgc,EAAMhc,MAAQ,EACrBb,OAAQ6c,EAAM7c,OACdg7H,SAAU,CAACn+G,KAGR+X,MAVEA,O,gCAYX,SAAmB/X,GACjB,IAAInO,EACJ,OAAKkmB,KAAKitG,kBAE6D,OAAtEnzH,EAAKkmB,KAAKitG,iBAAiBt9H,OAAOqwB,KAAK+sG,wBAAwB,KAAuBjzH,EAAGssH,SAAS5mH,KAAKyI,GACjG+X,MAFEA,O,0BAIX,SAAahgB,GAAsC,IAA5BkiB,EAA4B,uDAApB,UAAWvvB,EAAS,uCACjD,IAAKqtB,KAAKssG,GAAGh8H,MACX,OAAO0vB,KACT,IAAMktG,EAA6B,SAAbltH,GAAoC,UAAbA,EAAuB,QAAU,SACxEmtH,EAAoB,CACxBlmI,KAAM,aACN4hC,cAAe7I,KAAKssG,GAAGzjG,cACvBl2B,QAAS,2BACJA,GADE,IAEL3H,SAAUg1B,KAAKgtG,cACfn/H,OAAQ,cACRF,MAAOgF,EAAQoN,MAAM/I,KAAK6L,WAC1BxJ,SAAU1G,EAAQoN,MAAM/I,KAAK8L,cAC7BxJ,WAAY3G,EAAQoN,MAAM/I,KAAKgM,gBAC/BzJ,WAAY5G,EAAQoN,MAAM/I,KAAK+L,gBAC/B2D,UAAW/T,EAAQoN,MAAM/I,KAAK0P,UAC9B2kB,WAAsB,aAAVnJ,EAAuB,KAAO,QAC1C6F,cAAyB,YAAV7F,EAAsB,OAAS,OAC9CqJ,mBAAiC,WAAbvrB,GAAsC,UAAbA,KAGjD,GAAuB,aAAnBrN,EAAQpH,OACVy0B,KAAKotG,mBAAL,2BACKD,GADL,IAEEx6H,QAAS,2BAAKw6H,EAAkBx6H,SAAzB,IAAkCpH,OAAQ,oBAE9C,CACL,IAAM8hI,EAAY,2BAAKF,GAAR,kBAA4BD,EAAgBd,KAC3D,GAAiB,SAAbpsH,EAAqB,CACvB,GAAqF,IAAjFggB,KAAK2sG,cAAch9H,OAAO4U,KAAK9I,QAAO,SAACC,GAAD,MAAkB,eAAXA,EAAEzU,QAAuBkU,OACxE,OAAO6kB,KAETA,KAAK2sG,cAAch9H,OAAO4U,KAAO2nH,GAAkBlsG,KAAK2sG,cAAch9H,OAAO4U,KAAM,EAAG8oH,QACjF,GAAiB,UAAbrtH,EAAsB,CAC/B,GAAsF,IAAlFggB,KAAK2sG,cAAch9H,OAAOk5H,MAAMptH,QAAO,SAACC,GAAD,MAAkB,eAAXA,EAAEzU,QAAuBkU,OACzE,OAAO6kB,KAETA,KAAK2sG,cAAch9H,OAAOk5H,MAAMrpH,KAAK6tH,OAChC,CACL,GAA0F,IAAtFrtG,KAAK2sG,cAAch9H,OAAOqQ,GAAUvE,QAAO,SAACC,GAAD,MAAkB,eAAXA,EAAEzU,QAAuBkU,OAC7E,OAAO6kB,KAETA,KAAK2sG,cAAch9H,OAAOqQ,GAAUR,KAAK6tH,IAG7C,OAAOrtG,O,yCAET,WACEA,KAAKssG,GAAKhC,O,KAGd,SAASgD,GAAkBxkI,EAAOykI,EAAItkB,EAAMn1G,GAC1C,IAAMjH,EAAUiH,GAA2C,IAAtBA,EAA0BA,OAAoB,EAC/E4a,EAAQ,EACZ,OAAQ6+G,GACN,IAAK,YACL,IAAK,KACL,IAAK,KACH7+G,EAAQu6F,EAAOngH,EAAQ+D,GAAWo8G,EAAOngH,GAAS+D,EAAU,EAAI,EAChE,MACF,IAAK,wBACL,IAAK,OACL,IAAK,OACH6hB,EAAQu6F,GAAQngH,EAAQ+D,GAAWo8G,EAAOngH,GAAS+D,EAAU,EAAI,EACjE,MACF,IAAK,eACL,IAAK,KACL,IAAK,KACH6hB,EAAQu6F,EAAOngH,EAAQ+D,GAAW/D,EAAQmgH,GAAQp8G,EAAU,EAAI,EAChE,MACF,IAAK,2BACL,IAAK,OACL,IAAK,OACH6hB,EAAQu6F,GAAQngH,EAAQ+D,GAAW/D,EAAQmgH,GAAQp8G,EAAU,EAAI,EAGrE,OAAO0L,KAAKC,IAAID,KAAKE,IAAI,EAAGiW,GAAQ,GAEtC,IAAM8+G,GAAmB,CACvBC,cAAe,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,WAClFC,uBAAwB,CACtB,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UA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,IACR,OAAQ,IACR,OAAQ,IACR,OAAQ,KACR,OAAQ,KACR,OAAQ,KACR,OAAQ,KACR,OAAQ,KACR,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU,IACV,SAAU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","file":"static/js/main.ce22009c.chunk.js","sourcesContent":["import * as PIXI from \"pixi.js\";\nimport { color } from \"d3-color\";\nimport { group, max as max$1, min as min$1, bisector, sum } from \"d3-array\";\nimport { Bezier } from \"bezier-js\";\nimport { scaleLinear, scaleSequential, scaleOrdinal, scaleBand } from \"d3-scale\";\nimport { isUndefined, isArray as isArray$1, sampleSize, isEqual, uniqBy } from \"lodash-es\";\nimport { interpolateViridis, interpolateGreys, interpolateWarm, interpolateSpectral, interpolateCividis, interpolateBuPu, interpolateRdBu, interpolateYlOrBr, interpolateRdPu } from \"d3-scale-chromatic\";\nimport higlassRegister from \"higlass-register\";\nimport { TextTrack } from \"higlass-text\";\nimport RBush from \"rbush\";\nimport { arc } from \"d3-shape\";\nimport { dsvFormat } from \"d3-dsv\";\nimport require$$0, { Buffer as Buffer$2 } from \"buffer\";\nimport { unzlibSync } from \"fflate\";\nimport require$$9 from \"quick-lru\";\nimport require$$7, { RemoteFile as RemoteFile$1 } from \"generic-filehandle\";\nimport PubSub$1 from \"pubsub-js\";\nimport * as gt from \"gosling-theme\";\nimport { spawn } from \"threads\";\nimport React, { forwardRef, useState, useEffect, useMemo, useRef, useCallback } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { HiGlassComponent } from \"higlass\";\nconst $ref$2 = \"#/definitions/GoslingSpec\";\nconst $schema$4 = \"http://json-schema.org/draft-07/schema#\";\nconst definitions$3 = {\n  Aggregate: {\n    \"enum\": [\n      \"max\",\n      \"min\",\n      \"mean\",\n      \"bin\",\n      \"count\"\n    ],\n    type: \"string\"\n  },\n  Assembly: {\n    \"enum\": [\n      \"hg38\",\n      \"hg19\",\n      \"hg18\",\n      \"hg17\",\n      \"hg16\",\n      \"mm10\",\n      \"mm9\",\n      \"unknown\"\n    ],\n    type: \"string\"\n  },\n  AxisPosition: {\n    \"enum\": [\n      \"none\",\n      \"top\",\n      \"bottom\",\n      \"left\",\n      \"right\"\n    ],\n    type: \"string\"\n  },\n  BAMData: {\n    additionalProperties: false,\n    description: \"Binary Alignment Map (BAM) is the comprehensive raw data of genome sequencing; it consists of the lossless, compressed binary representation of the Sequence Alignment Map-files.\",\n    properties: {\n      extractJunction: {\n        description: \"Determine whether to extract exon-to-exon junctions. __Default__: `false`\",\n        type: \"boolean\"\n      },\n      indexUrl: {\n        description: \"URL link to the index file of the BAM file\",\n        type: \"string\"\n      },\n      junctionMinCoverage: {\n        description: \"Determine the threshold of coverage when extracting exon-to-exon junctions. __Default__: `1`\",\n        type: \"number\"\n      },\n      loadMates: {\n        description: \"Load mates that are located in the same chromosome. __Default__: `false`\",\n        type: \"boolean\"\n      },\n      maxInsertSize: {\n        description: \"Determines the threshold of insert sizes for determining the structural variants. __Default__: `5000`\",\n        type: \"number\"\n      },\n      type: {\n        \"const\": \"bam\",\n        type: \"string\"\n      },\n      url: {\n        description: \"URL link to the BAM data file\",\n        type: \"string\"\n      }\n    },\n    required: [\n      \"type\",\n      \"url\",\n      \"indexUrl\"\n    ],\n    type: \"object\"\n  },\n  BEDDBData: {\n    additionalProperties: false,\n    description: \"Regular BED or similar files can be pre-aggregated for the scalable data exploration. Find our more about this format at [HiGlass Docs](https://docs.higlass.io/data_preparation.html#bed-files).\",\n    properties: {\n      exonIntervalFields: {\n        description: \"experimental\",\n        items: [\n          {\n            additionalProperties: false,\n            properties: {\n              index: {\n                type: \"number\"\n              },\n              name: {\n                type: \"string\"\n              }\n            },\n            required: [\n              \"index\",\n              \"name\"\n            ],\n            type: \"object\"\n          },\n          {\n            additionalProperties: false,\n            properties: {\n              index: {\n                type: \"number\"\n              },\n              name: {\n                type: \"string\"\n              }\n            },\n            required: [\n              \"index\",\n              \"name\"\n            ],\n            type: \"object\"\n          }\n        ],\n        maxItems: 2,\n        minItems: 2,\n        type: \"array\"\n      },\n      genomicFields: {\n        description: \"Specify the name of genomic data fields.\",\n        items: {\n          additionalProperties: false,\n          properties: {\n            index: {\n              type: \"number\"\n            },\n            name: {\n              type: \"string\"\n            }\n          },\n          required: [\n            \"index\",\n            \"name\"\n          ],\n          type: \"object\"\n        },\n        type: \"array\"\n      },\n      type: {\n        \"const\": \"beddb\",\n        type: \"string\"\n      },\n      url: {\n        description: \"Specify the URL address of the data file.\",\n        type: \"string\"\n      },\n      valueFields: {\n        description: \"Specify the column indexes, field names, and field types.\",\n        items: {\n          additionalProperties: false,\n          properties: {\n            index: {\n              type: \"number\"\n            },\n            name: {\n              type: \"string\"\n            },\n            type: {\n              \"enum\": [\n                \"nominal\",\n                \"quantitative\"\n              ],\n              type: \"string\"\n            }\n          },\n          required: [\n            \"index\",\n            \"name\",\n            \"type\"\n          ],\n          type: \"object\"\n        },\n        type: \"array\"\n      }\n    },\n    required: [\n      \"type\",\n      \"url\",\n      \"genomicFields\"\n    ],\n    type: \"object\"\n  },\n  BIGWIGData: {\n    additionalProperties: false,\n    properties: {\n      aggregation: {\n        $ref: \"#/definitions/BinAggregate\",\n        description: 'Determine aggregation function to apply within bins. __Default__: `\"mean\"`'\n      },\n      binSize: {\n        description: \"Binning the genomic interval in tiles (unit size: 256).\",\n        type: \"number\"\n      },\n      column: {\n        description: \"Assign a field name of the middle position of genomic intervals.\",\n        type: \"string\"\n      },\n      end: {\n        description: \"Assign a field name of the end position of genomic intervals.\",\n        type: \"string\"\n      },\n      start: {\n        description: \"Assign a field name of the start position of genomic intervals.\",\n        type: \"string\"\n      },\n      type: {\n        \"const\": \"bigwig\",\n        type: \"string\"\n      },\n      url: {\n        description: \"Specify the URL address of the data file.\",\n        type: \"string\"\n      },\n      value: {\n        description: \"Assign a field name of quantitative values.\",\n        type: \"string\"\n      }\n    },\n    required: [\n      \"type\",\n      \"url\",\n      \"column\",\n      \"value\"\n    ],\n    type: \"object\"\n  },\n  BinAggregate: {\n    \"enum\": [\n      \"mean\",\n      \"sum\"\n    ],\n    type: \"string\"\n  },\n  CSVData: {\n    additionalProperties: false,\n    description: 'Any small enough tabular data files, such as tsv, csv, BED, BEDPE, and GFF, can be loaded using \"csv\" data specification.',\n    properties: {\n      chromosomeField: {\n        description: \"Specify the name of chromosome data fields.\",\n        type: \"string\"\n      },\n      chromosomePrefix: {\n        description: \"experimental\",\n        type: \"string\"\n      },\n      genomicFields: {\n        description: \"Specify the name of genomic data fields.\",\n        items: {\n          type: \"string\"\n        },\n        type: \"array\"\n      },\n      genomicFieldsToConvert: {\n        description: \"experimental\",\n        items: {\n          additionalProperties: false,\n          properties: {\n            chromosomeField: {\n              type: \"string\"\n            },\n            genomicFields: {\n              items: {\n                type: \"string\"\n              },\n              type: \"array\"\n            }\n          },\n          required: [\n            \"chromosomeField\",\n            \"genomicFields\"\n          ],\n          type: \"object\"\n        },\n        type: \"array\"\n      },\n      headerNames: {\n        description: \"Specify the names of data fields if a CSV file does not contain a header.\",\n        items: {\n          type: \"string\"\n        },\n        type: \"array\"\n      },\n      longToWideId: {\n        description: \"experimental\",\n        type: \"string\"\n      },\n      sampleLength: {\n        description: \"Specify the number of rows loaded from the URL.\\n\\n__Default:__ `1000`\",\n        type: \"number\"\n      },\n      separator: {\n        description: \"Specify file separator, __Default:__ ','\",\n        type: \"string\"\n      },\n      type: {\n        \"const\": \"csv\",\n        type: \"string\"\n      },\n      url: {\n        description: \"Specify the URL address of the data file.\",\n        type: \"string\"\n      }\n    },\n    required: [\n      \"type\",\n      \"url\"\n    ],\n    type: \"object\"\n  },\n  Channel: {\n    anyOf: [\n      {\n        $ref: \"#/definitions/ChannelDeep\"\n      },\n      {\n        $ref: \"#/definitions/ChannelValue\"\n      }\n    ]\n  },\n  ChannelDeep: {\n    anyOf: [\n      {\n        $ref: \"#/definitions/X\"\n      },\n      {\n        $ref: \"#/definitions/Y\"\n      },\n      {\n        $ref: \"#/definitions/Row\"\n      },\n      {\n        $ref: \"#/definitions/Color\"\n      },\n      {\n        $ref: \"#/definitions/Size\"\n      },\n      {\n        $ref: \"#/definitions/Stroke\"\n      },\n      {\n        $ref: \"#/definitions/StrokeWidth\"\n      },\n      {\n        $ref: \"#/definitions/Opacity\"\n      },\n      {\n        $ref: \"#/definitions/Text\"\n      }\n    ]\n  },\n  ChannelValue: {\n    additionalProperties: false,\n    properties: {\n      value: {\n        description: \"Assign a constant value for a visual channel.\",\n        type: [\n          \"number\",\n          \"string\"\n        ]\n      }\n    },\n    required: [\n      \"value\"\n    ],\n    type: \"object\"\n  },\n  Chromosome: {\n    \"enum\": [\n      \"1\",\n      \"2\",\n      \"3\",\n      \"4\",\n      \"5\",\n      \"6\",\n      \"7\",\n      \"8\",\n      \"9\",\n      \"10\",\n      \"11\",\n      \"12\",\n      \"13\",\n      \"14\",\n      \"15\",\n      \"16\",\n      \"17\",\n      \"18\",\n      \"19\",\n      \"20\",\n      \"21\",\n      \"22\",\n      \"X\",\n      \"Y\",\n      \"M\",\n      \"chr1\",\n      \"chr2\",\n      \"chr3\",\n      \"chr4\",\n      \"chr5\",\n      \"chr6\",\n      \"chr7\",\n      \"chr8\",\n      \"chr9\",\n      \"chr10\",\n      \"chr11\",\n      \"chr12\",\n      \"chr13\",\n      \"chr14\",\n      \"chr15\",\n      \"chr16\",\n      \"chr17\",\n      \"chr18\",\n      \"chr19\",\n      \"chr20\",\n      \"chr21\",\n      \"chr22\",\n      \"chrX\",\n      \"chrY\",\n      \"chrM\"\n    ],\n    type: \"string\"\n  },\n  Color: {\n    additionalProperties: false,\n    properties: {\n      domain: {\n        $ref: \"#/definitions/ValueExtent\",\n        description: \"Values of the data\"\n      },\n      field: {\n        description: \"Name of the data field\",\n        type: \"string\"\n      },\n      legend: {\n        description: \"Whether to display legend. __Default__: `false`\",\n        type: \"boolean\"\n      },\n      range: {\n        $ref: \"#/definitions/Range\",\n        description: \"Determine the colors that should be bound to data value. Default properties are determined considering the field type.\"\n      },\n      scale: {\n        \"enum\": [\n          \"linear\",\n          \"log\"\n        ],\n        type: \"string\"\n      },\n      scaleOffset: {\n        description: \"Whether to use offset of the domain proportionally. This is bound to brushes on the color legend. __Default__: `[0, 1]`\",\n        items: [\n          {\n            type: \"number\"\n          },\n          {\n            type: \"number\"\n          }\n        ],\n        maxItems: 2,\n        minItems: 2,\n        type: \"array\"\n      },\n      title: {\n        description: \"Title of the legend. __Default__: `undefined`\",\n        type: \"string\"\n      },\n      type: {\n        description: \"Specify the data type\",\n        \"enum\": [\n          \"quantitative\",\n          \"nominal\"\n        ],\n        type: \"string\"\n      }\n    },\n    type: \"object\"\n  },\n  CoverageTransform: {\n    additionalProperties: false,\n    description: \"Aggregate rows and calculate coverage\",\n    properties: {\n      endField: {\n        type: \"string\"\n      },\n      groupField: {\n        description: \"The name of a nominal field to group rows by in prior to piling-up\",\n        type: \"string\"\n      },\n      newField: {\n        type: \"string\"\n      },\n      startField: {\n        type: \"string\"\n      },\n      type: {\n        \"const\": \"coverage\",\n        type: \"string\"\n      }\n    },\n    required: [\n      \"type\",\n      \"startField\",\n      \"endField\"\n    ],\n    type: \"object\"\n  },\n  DataDeep: {\n    anyOf: [\n      {\n        $ref: \"#/definitions/JSONData\"\n      },\n      {\n        $ref: \"#/definitions/CSVData\"\n      },\n      {\n        $ref: \"#/definitions/BIGWIGData\"\n      },\n      {\n        $ref: \"#/definitions/MultivecData\"\n      },\n      {\n        $ref: \"#/definitions/BEDDBData\"\n      },\n      {\n        $ref: \"#/definitions/VectorData\"\n      },\n      {\n        $ref: \"#/definitions/MatrixData\"\n      },\n      {\n        $ref: \"#/definitions/BAMData\"\n      },\n      {\n        $ref: \"#/definitions/VCFData\"\n      },\n      {\n        $ref: \"#/definitions/PluginData\"\n      }\n    ]\n  },\n  DataTrack: {\n    additionalProperties: false,\n    description: \"Partial specification of `BasicSingleTrack` to use default visual encoding predefined by data type.\",\n    properties: {\n      _assignedHeight: {\n        type: \"number\"\n      },\n      _assignedWidth: {\n        description: \"Internal: Used for responsive spec\",\n        type: \"number\"\n      },\n      _invalidTrack: {\n        description: \"internal\",\n        type: \"boolean\"\n      },\n      _renderingId: {\n        description: \"internal\",\n        type: \"string\"\n      },\n      assembly: {\n        $ref: \"#/definitions/Assembly\",\n        description: 'A string that specifies the genome builds to use. Currently support `\"hg38\"`, `\"hg19\"`, `\"hg18\"`, `\"hg17\"`, `\"hg16\"`, `\"mm10\"`, `\"mm9\"`, and `\"unknown\"`.\\n\\n__Note:__: with `\"unknown\"` assembly, genomic axes do not show chrN: in labels.'\n      },\n      centerRadius: {\n        description: \"Proportion of the radius of the center white space.\\n\\n__Default:__ `0.3`\",\n        type: \"number\"\n      },\n      data: {\n        $ref: \"#/definitions/DataDeep\"\n      },\n      endAngle: {\n        description: 'Specify the end angle (in the range of [0, 360]) of circular tracks (`{\"layout\": \"circular\"}`).',\n        type: \"number\"\n      },\n      height: {\n        description: \"Specify the track height in pixels.\",\n        type: \"number\"\n      },\n      id: {\n        type: \"string\"\n      },\n      innerRadius: {\n        description: 'Specify the inner radius of tracks when (`{\"layout\": \"circular\"}`).',\n        type: \"number\"\n      },\n      layout: {\n        $ref: \"#/definitions/Layout\",\n        description: \"Specify the layout type of all tracks.\"\n      },\n      linkingId: {\n        description: \"Specify an ID for [linking multiple views](http://gosling-lang.org/docs/user-interaction#linking-views)\",\n        type: \"string\"\n      },\n      orientation: {\n        $ref: \"#/definitions/Orientation\",\n        description: \"Specify the orientation.\"\n      },\n      outerRadius: {\n        description: 'Specify the outer radius of tracks when `{\"layout\": \"circular\"}`.',\n        type: \"number\"\n      },\n      overlayOnPreviousTrack: {\n        type: \"boolean\"\n      },\n      prerelease: {\n        additionalProperties: false,\n        description: \"internal\",\n        type: \"object\"\n      },\n      spacing: {\n        description: '- If `{\"layout\": \"linear\"}`, specify the space between tracks in pixels;\\n\\n- If `{\"layout\": \"circular\"}`, specify the space between tracks in percentage ranging from 0 to 100.',\n        type: \"number\"\n      },\n      startAngle: {\n        description: 'Specify the start angle (in the range of [0, 360]) of circular tracks (`{\"layout\": \"circular\"}`).',\n        type: \"number\"\n      },\n      \"static\": {\n        description: \"Whether to disable [Zooming and Panning](http://gosling-lang.org/docs/user-interaction#zooming-and-panning), __Default:__ `false`.\",\n        type: \"boolean\"\n      },\n      style: {\n        $ref: \"#/definitions/Style\",\n        description: \"Define the [style](http://gosling-lang.org/docs/visual-channel#style-related-properties) of multive views. Will be overwritten by the style of children elements (e.g., view, track).\"\n      },\n      subtitle: {\n        type: \"string\"\n      },\n      title: {\n        description: \"If defined, will show the textual label on the left-top corner of a track.\",\n        type: \"string\"\n      },\n      width: {\n        description: \"Specify the track width in pixels.\",\n        type: \"number\"\n      },\n      xAxis: {\n        $ref: \"#/definitions/AxisPosition\",\n        description: \"not supported\"\n      },\n      xDomain: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/DomainInterval\"\n          },\n          {\n            $ref: \"#/definitions/DomainChrInterval\"\n          },\n          {\n            $ref: \"#/definitions/DomainChr\"\n          }\n        ],\n        description: \"Specify the visible region of genomic x-axis\"\n      },\n      xOffset: {\n        description: \"Specify the x offset of views in the unit of pixels\",\n        type: \"number\"\n      },\n      yDomain: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/DomainInterval\"\n          },\n          {\n            $ref: \"#/definitions/DomainChrInterval\"\n          },\n          {\n            $ref: \"#/definitions/DomainChr\"\n          }\n        ],\n        description: \"Specify the visible region of genomic y-axis\"\n      },\n      yOffset: {\n        description: \"Specify the y offset of views in the unit of pixels\",\n        type: \"number\"\n      },\n      zoomLimits: {\n        $ref: \"#/definitions/ZoomLimits\"\n      }\n    },\n    required: [\n      \"data\",\n      \"height\",\n      \"width\"\n    ],\n    type: \"object\"\n  },\n  DataTransform: {\n    anyOf: [\n      {\n        $ref: \"#/definitions/FilterTransform\"\n      },\n      {\n        $ref: \"#/definitions/StrConcatTransform\"\n      },\n      {\n        $ref: \"#/definitions/StrReplaceTransform\"\n      },\n      {\n        $ref: \"#/definitions/LogTransform\"\n      },\n      {\n        $ref: \"#/definitions/DisplaceTransform\"\n      },\n      {\n        $ref: \"#/definitions/ExonSplitTransform\"\n      },\n      {\n        $ref: \"#/definitions/GenomicLengthTransform\"\n      },\n      {\n        $ref: \"#/definitions/SvTypeTransform\"\n      },\n      {\n        $ref: \"#/definitions/CoverageTransform\"\n      },\n      {\n        $ref: \"#/definitions/JSONParseTransform\"\n      }\n    ]\n  },\n  Datum: {\n    additionalProperties: {\n      type: [\n        \"number\",\n        \"string\"\n      ]\n    },\n    description: \"Values in the form of JSON.\",\n    type: \"object\"\n  },\n  DisplaceTransform: {\n    additionalProperties: false,\n    properties: {\n      boundingBox: {\n        additionalProperties: false,\n        properties: {\n          endField: {\n            description: \"The name of a quantitative field that represents the end position.\",\n            type: \"string\"\n          },\n          groupField: {\n            description: \"The name of a nominal field to group rows by in prior to piling-up.\",\n            type: \"string\"\n          },\n          isPaddingBP: {\n            description: \"Whether to consider `padding` as the bp length.\",\n            type: \"boolean\"\n          },\n          padding: {\n            description: \"The padding around visual lements. Either px or bp\",\n            type: \"number\"\n          },\n          startField: {\n            description: \"The name of a quantitative field that represents the start position.\",\n            type: \"string\"\n          }\n        },\n        required: [\n          \"startField\",\n          \"endField\"\n        ],\n        type: \"object\"\n      },\n      maxRows: {\n        description: \"Specify maximum rows to be generated (default has no limit).\",\n        type: \"number\"\n      },\n      method: {\n        $ref: \"#/definitions/DisplacementType\",\n        description: \"A string that specifies the type of displacement.\"\n      },\n      newField: {\n        type: \"string\"\n      },\n      type: {\n        \"const\": \"displace\",\n        type: \"string\"\n      }\n    },\n    required: [\n      \"type\",\n      \"boundingBox\",\n      \"method\",\n      \"newField\"\n    ],\n    type: \"object\"\n  },\n  Displacement: {\n    additionalProperties: false,\n    properties: {\n      padding: {\n        type: \"number\"\n      },\n      type: {\n        $ref: \"#/definitions/DisplacementType\"\n      }\n    },\n    required: [\n      \"type\"\n    ],\n    type: \"object\"\n  },\n  DisplacementType: {\n    \"enum\": [\n      \"pile\",\n      \"spread\"\n    ],\n    type: \"string\"\n  },\n  DomainChr: {\n    additionalProperties: false,\n    properties: {\n      chromosome: {\n        $ref: \"#/definitions/Chromosome\"\n      }\n    },\n    required: [\n      \"chromosome\"\n    ],\n    type: \"object\"\n  },\n  DomainChrInterval: {\n    additionalProperties: false,\n    properties: {\n      chromosome: {\n        $ref: \"#/definitions/Chromosome\",\n        description: \"If specified, only showing a certain interval in a chromosome.\"\n      },\n      interval: {\n        items: [\n          {\n            type: \"number\"\n          },\n          {\n            type: \"number\"\n          }\n        ],\n        maxItems: 2,\n        minItems: 2,\n        type: \"array\"\n      }\n    },\n    required: [\n      \"chromosome\",\n      \"interval\"\n    ],\n    type: \"object\"\n  },\n  DomainGene: {\n    additionalProperties: false,\n    properties: {\n      gene: {\n        anyOf: [\n          {\n            type: \"string\"\n          },\n          {\n            items: [\n              {\n                type: \"string\"\n              },\n              {\n                type: \"string\"\n              }\n            ],\n            maxItems: 2,\n            minItems: 2,\n            type: \"array\"\n          }\n        ]\n      }\n    },\n    required: [\n      \"gene\"\n    ],\n    type: \"object\"\n  },\n  DomainInterval: {\n    additionalProperties: false,\n    properties: {\n      interval: {\n        description: \"Show a certain interval within entire chromosome\",\n        items: [\n          {\n            type: \"number\"\n          },\n          {\n            type: \"number\"\n          }\n        ],\n        maxItems: 2,\n        minItems: 2,\n        type: \"array\"\n      }\n    },\n    required: [\n      \"interval\"\n    ],\n    type: \"object\"\n  },\n  EventStyle: {\n    additionalProperties: false,\n    description: \"The styles defined here will be applied to the target marks of mouse events, such as a point mark after the user clicks on it.\",\n    properties: {\n      arrange: {\n        description: \"Show event effects behind or in front of marks.\",\n        \"enum\": [\n          \"behind\",\n          \"front\"\n        ],\n        type: \"string\"\n      },\n      color: {\n        description: \"color of the marks when mouse events are triggered\",\n        type: \"string\"\n      },\n      opacity: {\n        description: \"opacity of the marks when mouse events are triggered\",\n        type: \"number\"\n      },\n      stroke: {\n        description: \"stroke color of the marks when mouse events are triggered\",\n        type: \"string\"\n      },\n      strokeOpacity: {\n        type: \"number\"\n      },\n      strokeWidth: {\n        description: \"stroke width of the marks when mouse events are triggered\",\n        type: \"number\"\n      }\n    },\n    type: \"object\"\n  },\n  ExonSplitTransform: {\n    additionalProperties: false,\n    properties: {\n      fields: {\n        items: {\n          additionalProperties: false,\n          properties: {\n            chrField: {\n              type: \"string\"\n            },\n            field: {\n              type: \"string\"\n            },\n            newField: {\n              type: \"string\"\n            },\n            type: {\n              $ref: \"#/definitions/FieldType\"\n            }\n          },\n          required: [\n            \"field\",\n            \"type\",\n            \"newField\",\n            \"chrField\"\n          ],\n          type: \"object\"\n        },\n        type: \"array\"\n      },\n      flag: {\n        additionalProperties: false,\n        properties: {\n          field: {\n            type: \"string\"\n          },\n          value: {\n            type: [\n              \"number\",\n              \"string\"\n            ]\n          }\n        },\n        required: [\n          \"field\",\n          \"value\"\n        ],\n        type: \"object\"\n      },\n      separator: {\n        type: \"string\"\n      },\n      type: {\n        \"const\": \"exonSplit\",\n        type: \"string\"\n      }\n    },\n    required: [\n      \"type\",\n      \"separator\",\n      \"flag\",\n      \"fields\"\n    ],\n    type: \"object\"\n  },\n  FieldType: {\n    \"enum\": [\n      \"genomic\",\n      \"nominal\",\n      \"quantitative\"\n    ],\n    type: \"string\"\n  },\n  FilterTransform: {\n    anyOf: [\n      {\n        $ref: \"#/definitions/OneOfFilter\"\n      },\n      {\n        $ref: \"#/definitions/RangeFilter\"\n      },\n      {\n        $ref: \"#/definitions/IncludeFilter\"\n      }\n    ]\n  },\n  GenomicDomain: {\n    anyOf: [\n      {\n        $ref: \"#/definitions/DomainInterval\"\n      },\n      {\n        $ref: \"#/definitions/DomainChrInterval\"\n      },\n      {\n        $ref: \"#/definitions/DomainChr\"\n      },\n      {\n        $ref: \"#/definitions/DomainGene\"\n      }\n    ]\n  },\n  GenomicLengthTransform: {\n    additionalProperties: false,\n    description: \"Calculate genomic length using two genomic fields\",\n    properties: {\n      endField: {\n        type: \"string\"\n      },\n      newField: {\n        type: \"string\"\n      },\n      startField: {\n        type: \"string\"\n      },\n      type: {\n        \"const\": \"genomicLength\",\n        type: \"string\"\n      }\n    },\n    required: [\n      \"type\",\n      \"startField\",\n      \"endField\",\n      \"newField\"\n    ],\n    type: \"object\"\n  },\n  GoslingSpec: {\n    anyOf: [\n      {\n        additionalProperties: false,\n        properties: {\n          _assignedHeight: {\n            type: \"number\"\n          },\n          _assignedWidth: {\n            description: \"Internal: Used for responsive spec\",\n            type: \"number\"\n          },\n          _invalidTrack: {\n            description: \"internal\",\n            type: \"boolean\"\n          },\n          _renderingId: {\n            description: \"internal\",\n            type: \"string\"\n          },\n          alignment: {\n            \"const\": \"overlay\",\n            type: \"string\"\n          },\n          assembly: {\n            $ref: \"#/definitions/Assembly\",\n            description: 'A string that specifies the genome builds to use. Currently support `\"hg38\"`, `\"hg19\"`, `\"hg18\"`, `\"hg17\"`, `\"hg16\"`, `\"mm10\"`, `\"mm9\"`, and `\"unknown\"`.\\n\\n__Note:__: with `\"unknown\"` assembly, genomic axes do not show chrN: in labels.'\n          },\n          baselineY: {\n            type: \"number\"\n          },\n          centerRadius: {\n            description: \"Proportion of the radius of the center white space.\\n\\n__Default:__ `0.3`\",\n            type: \"number\"\n          },\n          color: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/Color\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          data: {\n            $ref: \"#/definitions/DataDeep\"\n          },\n          dataTransform: {\n            items: {\n              $ref: \"#/definitions/DataTransform\"\n            },\n            type: \"array\"\n          },\n          description: {\n            type: \"string\"\n          },\n          displacement: {\n            $ref: \"#/definitions/Displacement\"\n          },\n          endAngle: {\n            description: 'Specify the end angle (in the range of [0, 360]) of circular tracks (`{\"layout\": \"circular\"}`).',\n            type: \"number\"\n          },\n          experimental: {\n            additionalProperties: false,\n            properties: {\n              mouseEvents: {\n                anyOf: [\n                  {\n                    type: \"boolean\"\n                  },\n                  {\n                    $ref: \"#/definitions/MouseEventsDeep\"\n                  }\n                ]\n              }\n            },\n            type: \"object\"\n          },\n          flipY: {\n            type: \"boolean\"\n          },\n          height: {\n            description: \"Specify the track height in pixels.\",\n            type: \"number\"\n          },\n          id: {\n            type: \"string\"\n          },\n          innerRadius: {\n            description: 'Specify the inner radius of tracks when (`{\"layout\": \"circular\"}`).',\n            type: \"number\"\n          },\n          layout: {\n            $ref: \"#/definitions/Layout\",\n            description: \"Specify the layout type of all tracks.\"\n          },\n          linkingId: {\n            description: \"Specify an ID for [linking multiple views](http://gosling-lang.org/docs/user-interaction#linking-views)\",\n            type: \"string\"\n          },\n          mark: {\n            $ref: \"#/definitions/Mark\"\n          },\n          opacity: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/Opacity\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          orientation: {\n            $ref: \"#/definitions/Orientation\",\n            description: \"Specify the orientation.\"\n          },\n          outerRadius: {\n            description: 'Specify the outer radius of tracks when `{\"layout\": \"circular\"}`.',\n            type: \"number\"\n          },\n          overlayOnPreviousTrack: {\n            type: \"boolean\"\n          },\n          overrideTemplate: {\n            type: \"boolean\"\n          },\n          prerelease: {\n            additionalProperties: false,\n            description: \"internal\",\n            type: \"object\"\n          },\n          responsiveSize: {\n            $ref: \"#/definitions/ResponsiveSize\",\n            description: \"Determine whether to make the size of `GoslingComponent` bound to its parent element. __Default__: `false`\"\n          },\n          responsiveSpec: {\n            items: {\n              additionalProperties: false,\n              properties: {\n                selectivity: {\n                  items: {\n                    $ref: \"#/definitions/SelectivityCondition\"\n                  },\n                  type: \"array\"\n                },\n                spec: {\n                  additionalProperties: false,\n                  properties: {\n                    _assignedHeight: {\n                      type: \"number\"\n                    },\n                    _assignedWidth: {\n                      description: \"Internal: Used for responsive spec\",\n                      type: \"number\"\n                    },\n                    _invalidTrack: {\n                      description: \"internal\",\n                      type: \"boolean\"\n                    },\n                    _renderingId: {\n                      description: \"internal\",\n                      type: \"string\"\n                    },\n                    alignment: {\n                      \"enum\": [\n                        \"overlay\",\n                        \"stack\"\n                      ],\n                      type: \"string\"\n                    },\n                    assembly: {\n                      $ref: \"#/definitions/Assembly\",\n                      description: 'A string that specifies the genome builds to use. Currently support `\"hg38\"`, `\"hg19\"`, `\"hg18\"`, `\"hg17\"`, `\"hg16\"`, `\"mm10\"`, `\"mm9\"`, and `\"unknown\"`.\\n\\n__Note:__: with `\"unknown\"` assembly, genomic axes do not show chrN: in labels.'\n                    },\n                    baselineY: {\n                      type: \"number\"\n                    },\n                    centerRadius: {\n                      description: \"Proportion of the radius of the center white space.\\n\\n__Default:__ `0.3`\",\n                      type: \"number\"\n                    },\n                    color: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Color\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    data: {\n                      $ref: \"#/definitions/DataDeep\"\n                    },\n                    dataTransform: {\n                      items: {\n                        $ref: \"#/definitions/DataTransform\"\n                      },\n                      type: \"array\"\n                    },\n                    displacement: {\n                      $ref: \"#/definitions/Displacement\"\n                    },\n                    endAngle: {\n                      description: 'Specify the end angle (in the range of [0, 360]) of circular tracks (`{\"layout\": \"circular\"}`).',\n                      type: \"number\"\n                    },\n                    experimental: {\n                      additionalProperties: false,\n                      properties: {\n                        mouseEvents: {\n                          anyOf: [\n                            {\n                              type: \"boolean\"\n                            },\n                            {\n                              $ref: \"#/definitions/MouseEventsDeep\"\n                            }\n                          ]\n                        }\n                      },\n                      type: \"object\"\n                    },\n                    flipY: {\n                      type: \"boolean\"\n                    },\n                    height: {\n                      description: \"Specify the track height in pixels.\",\n                      type: \"number\"\n                    },\n                    id: {\n                      type: \"string\"\n                    },\n                    innerRadius: {\n                      description: 'Specify the inner radius of tracks when (`{\"layout\": \"circular\"}`).',\n                      type: \"number\"\n                    },\n                    layout: {\n                      $ref: \"#/definitions/Layout\",\n                      description: \"Specify the layout type of all tracks.\"\n                    },\n                    linkingId: {\n                      description: \"Specify an ID for [linking multiple views](http://gosling-lang.org/docs/user-interaction#linking-views)\",\n                      type: \"string\"\n                    },\n                    mark: {\n                      $ref: \"#/definitions/Mark\"\n                    },\n                    opacity: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Opacity\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    orientation: {\n                      $ref: \"#/definitions/Orientation\",\n                      description: \"Specify the orientation.\"\n                    },\n                    outerRadius: {\n                      description: 'Specify the outer radius of tracks when `{\"layout\": \"circular\"}`.',\n                      type: \"number\"\n                    },\n                    overlayOnPreviousTrack: {\n                      type: \"boolean\"\n                    },\n                    overrideTemplate: {\n                      type: \"boolean\"\n                    },\n                    prerelease: {\n                      additionalProperties: false,\n                      description: \"internal\",\n                      type: \"object\"\n                    },\n                    row: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Row\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    size: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Size\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    spacing: {\n                      description: '- If `{\"layout\": \"linear\"}`, specify the space between tracks in pixels;\\n\\n- If `{\"layout\": \"circular\"}`, specify the space between tracks in percentage ranging from 0 to 100.',\n                      type: \"number\"\n                    },\n                    startAngle: {\n                      description: 'Specify the start angle (in the range of [0, 360]) of circular tracks (`{\"layout\": \"circular\"}`).',\n                      type: \"number\"\n                    },\n                    \"static\": {\n                      description: \"Whether to disable [Zooming and Panning](http://gosling-lang.org/docs/user-interaction#zooming-and-panning), __Default:__ `false`.\",\n                      type: \"boolean\"\n                    },\n                    stretch: {\n                      type: \"boolean\"\n                    },\n                    stroke: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Stroke\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    strokeWidth: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/StrokeWidth\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    style: {\n                      $ref: \"#/definitions/Style\",\n                      description: \"Define the [style](http://gosling-lang.org/docs/visual-channel#style-related-properties) of multive views. Will be overwritten by the style of children elements (e.g., view, track).\"\n                    },\n                    subtitle: {\n                      type: \"string\"\n                    },\n                    text: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Text\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    title: {\n                      description: \"If defined, will show the textual label on the left-top corner of a track.\",\n                      type: \"string\"\n                    },\n                    tooltip: {\n                      items: {\n                        $ref: \"#/definitions/Tooltip\"\n                      },\n                      type: \"array\"\n                    },\n                    tracks: {\n                      anyOf: [\n                        {\n                          items: {\n                            $ref: \"#/definitions/PartialTrack\"\n                          },\n                          type: \"array\"\n                        },\n                        {\n                          items: {\n                            anyOf: [\n                              {\n                                $ref: \"#/definitions/PartialTrack\"\n                              },\n                              {\n                                $ref: \"#/definitions/OverlaidTracks\"\n                              }\n                            ]\n                          },\n                          type: \"array\"\n                        }\n                      ]\n                    },\n                    visibility: {\n                      items: {\n                        $ref: \"#/definitions/VisibilityCondition\"\n                      },\n                      type: \"array\"\n                    },\n                    width: {\n                      description: \"Specify the track width in pixels.\",\n                      type: \"number\"\n                    },\n                    x: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/X\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    x1: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/X\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    x1e: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/X\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    xAxis: {\n                      $ref: \"#/definitions/AxisPosition\",\n                      description: \"not supported\"\n                    },\n                    xDomain: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/DomainInterval\"\n                        },\n                        {\n                          $ref: \"#/definitions/DomainChrInterval\"\n                        },\n                        {\n                          $ref: \"#/definitions/DomainChr\"\n                        }\n                      ],\n                      description: \"Specify the visible region of genomic x-axis\"\n                    },\n                    xOffset: {\n                      description: \"Specify the x offset of views in the unit of pixels\",\n                      type: \"number\"\n                    },\n                    xe: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/X\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    y: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Y\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    y1: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Y\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    y1e: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Y\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    yDomain: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/DomainInterval\"\n                        },\n                        {\n                          $ref: \"#/definitions/DomainChrInterval\"\n                        },\n                        {\n                          $ref: \"#/definitions/DomainChr\"\n                        }\n                      ],\n                      description: \"Specify the visible region of genomic y-axis\"\n                    },\n                    yOffset: {\n                      description: \"Specify the y offset of views in the unit of pixels\",\n                      type: \"number\"\n                    },\n                    ye: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Y\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    zoomLimits: {\n                      $ref: \"#/definitions/ZoomLimits\"\n                    }\n                  },\n                  type: \"object\"\n                }\n              },\n              required: [\n                \"spec\",\n                \"selectivity\"\n              ],\n              type: \"object\"\n            },\n            type: \"array\"\n          },\n          row: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/Row\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          size: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/Size\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          spacing: {\n            description: '- If `{\"layout\": \"linear\"}`, specify the space between tracks in pixels;\\n\\n- If `{\"layout\": \"circular\"}`, specify the space between tracks in percentage ranging from 0 to 100.',\n            type: \"number\"\n          },\n          startAngle: {\n            description: 'Specify the start angle (in the range of [0, 360]) of circular tracks (`{\"layout\": \"circular\"}`).',\n            type: \"number\"\n          },\n          \"static\": {\n            description: \"Whether to disable [Zooming and Panning](http://gosling-lang.org/docs/user-interaction#zooming-and-panning), __Default:__ `false`.\",\n            type: \"boolean\"\n          },\n          stretch: {\n            type: \"boolean\"\n          },\n          stroke: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/Stroke\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          strokeWidth: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/StrokeWidth\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          style: {\n            $ref: \"#/definitions/Style\",\n            description: \"Define the [style](http://gosling-lang.org/docs/visual-channel#style-related-properties) of multive views. Will be overwritten by the style of children elements (e.g., view, track).\"\n          },\n          subtitle: {\n            type: \"string\"\n          },\n          text: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/Text\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          title: {\n            description: \"If defined, will show the textual label on the left-top corner of a track.\",\n            type: \"string\"\n          },\n          tooltip: {\n            items: {\n              $ref: \"#/definitions/Tooltip\"\n            },\n            type: \"array\"\n          },\n          tracks: {\n            items: {\n              $ref: \"#/definitions/PartialTrack\"\n            },\n            type: \"array\"\n          },\n          visibility: {\n            items: {\n              $ref: \"#/definitions/VisibilityCondition\"\n            },\n            type: \"array\"\n          },\n          width: {\n            description: \"Specify the track width in pixels.\",\n            type: \"number\"\n          },\n          x: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/X\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          x1: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/X\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          x1e: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/X\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          xAxis: {\n            $ref: \"#/definitions/AxisPosition\",\n            description: \"not supported\"\n          },\n          xDomain: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/DomainInterval\"\n              },\n              {\n                $ref: \"#/definitions/DomainChrInterval\"\n              },\n              {\n                $ref: \"#/definitions/DomainChr\"\n              }\n            ],\n            description: \"Specify the visible region of genomic x-axis\"\n          },\n          xOffset: {\n            description: \"Specify the x offset of views in the unit of pixels\",\n            type: \"number\"\n          },\n          xe: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/X\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          y: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/Y\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          y1: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/Y\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          y1e: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/Y\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          yDomain: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/DomainInterval\"\n              },\n              {\n                $ref: \"#/definitions/DomainChrInterval\"\n              },\n              {\n                $ref: \"#/definitions/DomainChr\"\n              }\n            ],\n            description: \"Specify the visible region of genomic y-axis\"\n          },\n          yOffset: {\n            description: \"Specify the y offset of views in the unit of pixels\",\n            type: \"number\"\n          },\n          ye: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/Y\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          zoomLimits: {\n            $ref: \"#/definitions/ZoomLimits\"\n          }\n        },\n        required: [\n          \"alignment\",\n          \"height\",\n          \"tracks\",\n          \"width\"\n        ],\n        type: \"object\"\n      },\n      {\n        additionalProperties: false,\n        properties: {\n          _assignedHeight: {\n            type: \"number\"\n          },\n          _assignedWidth: {\n            description: \"Internal: Used for responsive spec\",\n            type: \"number\"\n          },\n          _invalidTrack: {\n            description: \"internal\",\n            type: \"boolean\"\n          },\n          _renderingId: {\n            description: \"internal\",\n            type: \"string\"\n          },\n          alignment: {\n            \"const\": \"stack\",\n            type: \"string\"\n          },\n          assembly: {\n            $ref: \"#/definitions/Assembly\",\n            description: 'A string that specifies the genome builds to use. Currently support `\"hg38\"`, `\"hg19\"`, `\"hg18\"`, `\"hg17\"`, `\"hg16\"`, `\"mm10\"`, `\"mm9\"`, and `\"unknown\"`.\\n\\n__Note:__: with `\"unknown\"` assembly, genomic axes do not show chrN: in labels.'\n          },\n          baselineY: {\n            type: \"number\"\n          },\n          centerRadius: {\n            description: \"Proportion of the radius of the center white space.\\n\\n__Default:__ `0.3`\",\n            type: \"number\"\n          },\n          color: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/Color\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          data: {\n            $ref: \"#/definitions/DataDeep\"\n          },\n          dataTransform: {\n            items: {\n              $ref: \"#/definitions/DataTransform\"\n            },\n            type: \"array\"\n          },\n          description: {\n            type: \"string\"\n          },\n          displacement: {\n            $ref: \"#/definitions/Displacement\"\n          },\n          endAngle: {\n            description: 'Specify the end angle (in the range of [0, 360]) of circular tracks (`{\"layout\": \"circular\"}`).',\n            type: \"number\"\n          },\n          experimental: {\n            additionalProperties: false,\n            properties: {\n              mouseEvents: {\n                anyOf: [\n                  {\n                    type: \"boolean\"\n                  },\n                  {\n                    $ref: \"#/definitions/MouseEventsDeep\"\n                  }\n                ]\n              }\n            },\n            type: \"object\"\n          },\n          flipY: {\n            type: \"boolean\"\n          },\n          height: {\n            description: \"Specify the track height in pixels.\",\n            type: \"number\"\n          },\n          id: {\n            type: \"string\"\n          },\n          innerRadius: {\n            description: 'Specify the inner radius of tracks when (`{\"layout\": \"circular\"}`).',\n            type: \"number\"\n          },\n          layout: {\n            $ref: \"#/definitions/Layout\",\n            description: \"Specify the layout type of all tracks.\"\n          },\n          linkingId: {\n            description: \"Specify an ID for [linking multiple views](http://gosling-lang.org/docs/user-interaction#linking-views)\",\n            type: \"string\"\n          },\n          mark: {\n            $ref: \"#/definitions/Mark\"\n          },\n          opacity: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/Opacity\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          orientation: {\n            $ref: \"#/definitions/Orientation\",\n            description: \"Specify the orientation.\"\n          },\n          outerRadius: {\n            description: 'Specify the outer radius of tracks when `{\"layout\": \"circular\"}`.',\n            type: \"number\"\n          },\n          overlayOnPreviousTrack: {\n            type: \"boolean\"\n          },\n          overrideTemplate: {\n            type: \"boolean\"\n          },\n          prerelease: {\n            additionalProperties: false,\n            description: \"internal\",\n            type: \"object\"\n          },\n          responsiveSize: {\n            $ref: \"#/definitions/ResponsiveSize\",\n            description: \"Determine whether to make the size of `GoslingComponent` bound to its parent element. __Default__: `false`\"\n          },\n          responsiveSpec: {\n            items: {\n              additionalProperties: false,\n              properties: {\n                selectivity: {\n                  items: {\n                    $ref: \"#/definitions/SelectivityCondition\"\n                  },\n                  type: \"array\"\n                },\n                spec: {\n                  additionalProperties: false,\n                  properties: {\n                    _assignedHeight: {\n                      type: \"number\"\n                    },\n                    _assignedWidth: {\n                      description: \"Internal: Used for responsive spec\",\n                      type: \"number\"\n                    },\n                    _invalidTrack: {\n                      description: \"internal\",\n                      type: \"boolean\"\n                    },\n                    _renderingId: {\n                      description: \"internal\",\n                      type: \"string\"\n                    },\n                    alignment: {\n                      \"enum\": [\n                        \"overlay\",\n                        \"stack\"\n                      ],\n                      type: \"string\"\n                    },\n                    assembly: {\n                      $ref: \"#/definitions/Assembly\",\n                      description: 'A string that specifies the genome builds to use. Currently support `\"hg38\"`, `\"hg19\"`, `\"hg18\"`, `\"hg17\"`, `\"hg16\"`, `\"mm10\"`, `\"mm9\"`, and `\"unknown\"`.\\n\\n__Note:__: with `\"unknown\"` assembly, genomic axes do not show chrN: in labels.'\n                    },\n                    baselineY: {\n                      type: \"number\"\n                    },\n                    centerRadius: {\n                      description: \"Proportion of the radius of the center white space.\\n\\n__Default:__ `0.3`\",\n                      type: \"number\"\n                    },\n                    color: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Color\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    data: {\n                      $ref: \"#/definitions/DataDeep\"\n                    },\n                    dataTransform: {\n                      items: {\n                        $ref: \"#/definitions/DataTransform\"\n                      },\n                      type: \"array\"\n                    },\n                    displacement: {\n                      $ref: \"#/definitions/Displacement\"\n                    },\n                    endAngle: {\n                      description: 'Specify the end angle (in the range of [0, 360]) of circular tracks (`{\"layout\": \"circular\"}`).',\n                      type: \"number\"\n                    },\n                    experimental: {\n                      additionalProperties: false,\n                      properties: {\n                        mouseEvents: {\n                          anyOf: [\n                            {\n                              type: \"boolean\"\n                            },\n                            {\n                              $ref: \"#/definitions/MouseEventsDeep\"\n                            }\n                          ]\n                        }\n                      },\n                      type: \"object\"\n                    },\n                    flipY: {\n                      type: \"boolean\"\n                    },\n                    height: {\n                      description: \"Specify the track height in pixels.\",\n                      type: \"number\"\n                    },\n                    id: {\n                      type: \"string\"\n                    },\n                    innerRadius: {\n                      description: 'Specify the inner radius of tracks when (`{\"layout\": \"circular\"}`).',\n                      type: \"number\"\n                    },\n                    layout: {\n                      $ref: \"#/definitions/Layout\",\n                      description: \"Specify the layout type of all tracks.\"\n                    },\n                    linkingId: {\n                      description: \"Specify an ID for [linking multiple views](http://gosling-lang.org/docs/user-interaction#linking-views)\",\n                      type: \"string\"\n                    },\n                    mark: {\n                      $ref: \"#/definitions/Mark\"\n                    },\n                    opacity: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Opacity\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    orientation: {\n                      $ref: \"#/definitions/Orientation\",\n                      description: \"Specify the orientation.\"\n                    },\n                    outerRadius: {\n                      description: 'Specify the outer radius of tracks when `{\"layout\": \"circular\"}`.',\n                      type: \"number\"\n                    },\n                    overlayOnPreviousTrack: {\n                      type: \"boolean\"\n                    },\n                    overrideTemplate: {\n                      type: \"boolean\"\n                    },\n                    prerelease: {\n                      additionalProperties: false,\n                      description: \"internal\",\n                      type: \"object\"\n                    },\n                    row: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Row\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    size: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Size\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    spacing: {\n                      description: '- If `{\"layout\": \"linear\"}`, specify the space between tracks in pixels;\\n\\n- If `{\"layout\": \"circular\"}`, specify the space between tracks in percentage ranging from 0 to 100.',\n                      type: \"number\"\n                    },\n                    startAngle: {\n                      description: 'Specify the start angle (in the range of [0, 360]) of circular tracks (`{\"layout\": \"circular\"}`).',\n                      type: \"number\"\n                    },\n                    \"static\": {\n                      description: \"Whether to disable [Zooming and Panning](http://gosling-lang.org/docs/user-interaction#zooming-and-panning), __Default:__ `false`.\",\n                      type: \"boolean\"\n                    },\n                    stretch: {\n                      type: \"boolean\"\n                    },\n                    stroke: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Stroke\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    strokeWidth: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/StrokeWidth\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    style: {\n                      $ref: \"#/definitions/Style\",\n                      description: \"Define the [style](http://gosling-lang.org/docs/visual-channel#style-related-properties) of multive views. Will be overwritten by the style of children elements (e.g., view, track).\"\n                    },\n                    subtitle: {\n                      type: \"string\"\n                    },\n                    text: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Text\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    title: {\n                      description: \"If defined, will show the textual label on the left-top corner of a track.\",\n                      type: \"string\"\n                    },\n                    tooltip: {\n                      items: {\n                        $ref: \"#/definitions/Tooltip\"\n                      },\n                      type: \"array\"\n                    },\n                    tracks: {\n                      anyOf: [\n                        {\n                          items: {\n                            $ref: \"#/definitions/PartialTrack\"\n                          },\n                          type: \"array\"\n                        },\n                        {\n                          items: {\n                            anyOf: [\n                              {\n                                $ref: \"#/definitions/PartialTrack\"\n                              },\n                              {\n                                $ref: \"#/definitions/OverlaidTracks\"\n                              }\n                            ]\n                          },\n                          type: \"array\"\n                        }\n                      ]\n                    },\n                    visibility: {\n                      items: {\n                        $ref: \"#/definitions/VisibilityCondition\"\n                      },\n                      type: \"array\"\n                    },\n                    width: {\n                      description: \"Specify the track width in pixels.\",\n                      type: \"number\"\n                    },\n                    x: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/X\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    x1: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/X\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    x1e: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/X\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    xAxis: {\n                      $ref: \"#/definitions/AxisPosition\",\n                      description: \"not supported\"\n                    },\n                    xDomain: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/DomainInterval\"\n                        },\n                        {\n                          $ref: \"#/definitions/DomainChrInterval\"\n                        },\n                        {\n                          $ref: \"#/definitions/DomainChr\"\n                        }\n                      ],\n                      description: \"Specify the visible region of genomic x-axis\"\n                    },\n                    xOffset: {\n                      description: \"Specify the x offset of views in the unit of pixels\",\n                      type: \"number\"\n                    },\n                    xe: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/X\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    y: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Y\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    y1: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Y\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    y1e: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Y\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    yDomain: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/DomainInterval\"\n                        },\n                        {\n                          $ref: \"#/definitions/DomainChrInterval\"\n                        },\n                        {\n                          $ref: \"#/definitions/DomainChr\"\n                        }\n                      ],\n                      description: \"Specify the visible region of genomic y-axis\"\n                    },\n                    yOffset: {\n                      description: \"Specify the y offset of views in the unit of pixels\",\n                      type: \"number\"\n                    },\n                    ye: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Y\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    zoomLimits: {\n                      $ref: \"#/definitions/ZoomLimits\"\n                    }\n                  },\n                  type: \"object\"\n                }\n              },\n              required: [\n                \"spec\",\n                \"selectivity\"\n              ],\n              type: \"object\"\n            },\n            type: \"array\"\n          },\n          row: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/Row\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          size: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/Size\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          spacing: {\n            description: '- If `{\"layout\": \"linear\"}`, specify the space between tracks in pixels;\\n\\n- If `{\"layout\": \"circular\"}`, specify the space between tracks in percentage ranging from 0 to 100.',\n            type: \"number\"\n          },\n          startAngle: {\n            description: 'Specify the start angle (in the range of [0, 360]) of circular tracks (`{\"layout\": \"circular\"}`).',\n            type: \"number\"\n          },\n          \"static\": {\n            description: \"Whether to disable [Zooming and Panning](http://gosling-lang.org/docs/user-interaction#zooming-and-panning), __Default:__ `false`.\",\n            type: \"boolean\"\n          },\n          stretch: {\n            type: \"boolean\"\n          },\n          stroke: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/Stroke\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          strokeWidth: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/StrokeWidth\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          style: {\n            $ref: \"#/definitions/Style\",\n            description: \"Define the [style](http://gosling-lang.org/docs/visual-channel#style-related-properties) of multive views. Will be overwritten by the style of children elements (e.g., view, track).\"\n          },\n          subtitle: {\n            type: \"string\"\n          },\n          text: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/Text\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          title: {\n            description: \"If defined, will show the textual label on the left-top corner of a track.\",\n            type: \"string\"\n          },\n          tooltip: {\n            items: {\n              $ref: \"#/definitions/Tooltip\"\n            },\n            type: \"array\"\n          },\n          tracks: {\n            items: {\n              anyOf: [\n                {\n                  $ref: \"#/definitions/PartialTrack\"\n                },\n                {\n                  $ref: \"#/definitions/OverlaidTracks\"\n                }\n              ]\n            },\n            type: \"array\"\n          },\n          visibility: {\n            items: {\n              $ref: \"#/definitions/VisibilityCondition\"\n            },\n            type: \"array\"\n          },\n          width: {\n            description: \"Specify the track width in pixels.\",\n            type: \"number\"\n          },\n          x: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/X\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          x1: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/X\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          x1e: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/X\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          xAxis: {\n            $ref: \"#/definitions/AxisPosition\",\n            description: \"not supported\"\n          },\n          xDomain: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/DomainInterval\"\n              },\n              {\n                $ref: \"#/definitions/DomainChrInterval\"\n              },\n              {\n                $ref: \"#/definitions/DomainChr\"\n              }\n            ],\n            description: \"Specify the visible region of genomic x-axis\"\n          },\n          xOffset: {\n            description: \"Specify the x offset of views in the unit of pixels\",\n            type: \"number\"\n          },\n          xe: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/X\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          y: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/Y\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          y1: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/Y\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          y1e: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/Y\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          yDomain: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/DomainInterval\"\n              },\n              {\n                $ref: \"#/definitions/DomainChrInterval\"\n              },\n              {\n                $ref: \"#/definitions/DomainChr\"\n              }\n            ],\n            description: \"Specify the visible region of genomic y-axis\"\n          },\n          yOffset: {\n            description: \"Specify the y offset of views in the unit of pixels\",\n            type: \"number\"\n          },\n          ye: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/Y\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          zoomLimits: {\n            $ref: \"#/definitions/ZoomLimits\"\n          }\n        },\n        required: [\n          \"tracks\"\n        ],\n        type: \"object\"\n      },\n      {\n        additionalProperties: false,\n        properties: {\n          _assignedHeight: {\n            type: \"number\"\n          },\n          _assignedWidth: {\n            description: \"Internal: Used for responsive spec\",\n            type: \"number\"\n          },\n          assembly: {\n            $ref: \"#/definitions/Assembly\",\n            description: 'A string that specifies the genome builds to use. Currently support `\"hg38\"`, `\"hg19\"`, `\"hg18\"`, `\"hg17\"`, `\"hg16\"`, `\"mm10\"`, `\"mm9\"`, and `\"unknown\"`.\\n\\n__Note:__: with `\"unknown\"` assembly, genomic axes do not show chrN: in labels.'\n          },\n          centerRadius: {\n            description: \"Proportion of the radius of the center white space.\\n\\n__Default:__ `0.3`\",\n            type: \"number\"\n          },\n          description: {\n            type: \"string\"\n          },\n          layout: {\n            $ref: \"#/definitions/Layout\",\n            description: \"Specify the layout type of all tracks.\"\n          },\n          linkingId: {\n            description: \"Specify an ID for [linking multiple views](http://gosling-lang.org/docs/user-interaction#linking-views)\",\n            type: \"string\"\n          },\n          orientation: {\n            $ref: \"#/definitions/Orientation\",\n            description: \"Specify the orientation.\"\n          },\n          responsiveSize: {\n            $ref: \"#/definitions/ResponsiveSize\",\n            description: \"Determine whether to make the size of `GoslingComponent` bound to its parent element. __Default__: `false`\"\n          },\n          responsiveSpec: {\n            items: {\n              additionalProperties: false,\n              properties: {\n                selectivity: {\n                  items: {\n                    $ref: \"#/definitions/SelectivityCondition\"\n                  },\n                  type: \"array\"\n                },\n                spec: {\n                  additionalProperties: false,\n                  properties: {\n                    _assignedHeight: {\n                      type: \"number\"\n                    },\n                    _assignedWidth: {\n                      description: \"Internal: Used for responsive spec\",\n                      type: \"number\"\n                    },\n                    _invalidTrack: {\n                      description: \"internal\",\n                      type: \"boolean\"\n                    },\n                    _renderingId: {\n                      description: \"internal\",\n                      type: \"string\"\n                    },\n                    alignment: {\n                      \"enum\": [\n                        \"overlay\",\n                        \"stack\"\n                      ],\n                      type: \"string\"\n                    },\n                    assembly: {\n                      $ref: \"#/definitions/Assembly\",\n                      description: 'A string that specifies the genome builds to use. Currently support `\"hg38\"`, `\"hg19\"`, `\"hg18\"`, `\"hg17\"`, `\"hg16\"`, `\"mm10\"`, `\"mm9\"`, and `\"unknown\"`.\\n\\n__Note:__: with `\"unknown\"` assembly, genomic axes do not show chrN: in labels.'\n                    },\n                    baselineY: {\n                      type: \"number\"\n                    },\n                    centerRadius: {\n                      description: \"Proportion of the radius of the center white space.\\n\\n__Default:__ `0.3`\",\n                      type: \"number\"\n                    },\n                    color: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Color\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    data: {\n                      $ref: \"#/definitions/DataDeep\"\n                    },\n                    dataTransform: {\n                      items: {\n                        $ref: \"#/definitions/DataTransform\"\n                      },\n                      type: \"array\"\n                    },\n                    displacement: {\n                      $ref: \"#/definitions/Displacement\"\n                    },\n                    endAngle: {\n                      description: 'Specify the end angle (in the range of [0, 360]) of circular tracks (`{\"layout\": \"circular\"}`).',\n                      type: \"number\"\n                    },\n                    experimental: {\n                      additionalProperties: false,\n                      properties: {\n                        mouseEvents: {\n                          anyOf: [\n                            {\n                              type: \"boolean\"\n                            },\n                            {\n                              $ref: \"#/definitions/MouseEventsDeep\"\n                            }\n                          ]\n                        }\n                      },\n                      type: \"object\"\n                    },\n                    flipY: {\n                      type: \"boolean\"\n                    },\n                    height: {\n                      description: \"Specify the track height in pixels.\",\n                      type: \"number\"\n                    },\n                    id: {\n                      type: \"string\"\n                    },\n                    innerRadius: {\n                      description: 'Specify the inner radius of tracks when (`{\"layout\": \"circular\"}`).',\n                      type: \"number\"\n                    },\n                    layout: {\n                      $ref: \"#/definitions/Layout\",\n                      description: \"Specify the layout type of all tracks.\"\n                    },\n                    linkingId: {\n                      description: \"Specify an ID for [linking multiple views](http://gosling-lang.org/docs/user-interaction#linking-views)\",\n                      type: \"string\"\n                    },\n                    mark: {\n                      $ref: \"#/definitions/Mark\"\n                    },\n                    opacity: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Opacity\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    orientation: {\n                      $ref: \"#/definitions/Orientation\",\n                      description: \"Specify the orientation.\"\n                    },\n                    outerRadius: {\n                      description: 'Specify the outer radius of tracks when `{\"layout\": \"circular\"}`.',\n                      type: \"number\"\n                    },\n                    overlayOnPreviousTrack: {\n                      type: \"boolean\"\n                    },\n                    overrideTemplate: {\n                      type: \"boolean\"\n                    },\n                    prerelease: {\n                      additionalProperties: false,\n                      description: \"internal\",\n                      type: \"object\"\n                    },\n                    row: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Row\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    size: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Size\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    spacing: {\n                      description: '- If `{\"layout\": \"linear\"}`, specify the space between tracks in pixels;\\n\\n- If `{\"layout\": \"circular\"}`, specify the space between tracks in percentage ranging from 0 to 100.',\n                      type: \"number\"\n                    },\n                    startAngle: {\n                      description: 'Specify the start angle (in the range of [0, 360]) of circular tracks (`{\"layout\": \"circular\"}`).',\n                      type: \"number\"\n                    },\n                    \"static\": {\n                      description: \"Whether to disable [Zooming and Panning](http://gosling-lang.org/docs/user-interaction#zooming-and-panning), __Default:__ `false`.\",\n                      type: \"boolean\"\n                    },\n                    stretch: {\n                      type: \"boolean\"\n                    },\n                    stroke: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Stroke\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    strokeWidth: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/StrokeWidth\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    style: {\n                      $ref: \"#/definitions/Style\",\n                      description: \"Define the [style](http://gosling-lang.org/docs/visual-channel#style-related-properties) of multive views. Will be overwritten by the style of children elements (e.g., view, track).\"\n                    },\n                    subtitle: {\n                      type: \"string\"\n                    },\n                    text: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Text\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    title: {\n                      description: \"If defined, will show the textual label on the left-top corner of a track.\",\n                      type: \"string\"\n                    },\n                    tooltip: {\n                      items: {\n                        $ref: \"#/definitions/Tooltip\"\n                      },\n                      type: \"array\"\n                    },\n                    tracks: {\n                      anyOf: [\n                        {\n                          items: {\n                            $ref: \"#/definitions/PartialTrack\"\n                          },\n                          type: \"array\"\n                        },\n                        {\n                          items: {\n                            anyOf: [\n                              {\n                                $ref: \"#/definitions/PartialTrack\"\n                              },\n                              {\n                                $ref: \"#/definitions/OverlaidTracks\"\n                              }\n                            ]\n                          },\n                          type: \"array\"\n                        }\n                      ]\n                    },\n                    visibility: {\n                      items: {\n                        $ref: \"#/definitions/VisibilityCondition\"\n                      },\n                      type: \"array\"\n                    },\n                    width: {\n                      description: \"Specify the track width in pixels.\",\n                      type: \"number\"\n                    },\n                    x: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/X\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    x1: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/X\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    x1e: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/X\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    xAxis: {\n                      $ref: \"#/definitions/AxisPosition\",\n                      description: \"not supported\"\n                    },\n                    xDomain: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/DomainInterval\"\n                        },\n                        {\n                          $ref: \"#/definitions/DomainChrInterval\"\n                        },\n                        {\n                          $ref: \"#/definitions/DomainChr\"\n                        }\n                      ],\n                      description: \"Specify the visible region of genomic x-axis\"\n                    },\n                    xOffset: {\n                      description: \"Specify the x offset of views in the unit of pixels\",\n                      type: \"number\"\n                    },\n                    xe: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/X\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    y: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Y\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    y1: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Y\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    y1e: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Y\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    yDomain: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/DomainInterval\"\n                        },\n                        {\n                          $ref: \"#/definitions/DomainChrInterval\"\n                        },\n                        {\n                          $ref: \"#/definitions/DomainChr\"\n                        }\n                      ],\n                      description: \"Specify the visible region of genomic y-axis\"\n                    },\n                    yOffset: {\n                      description: \"Specify the y offset of views in the unit of pixels\",\n                      type: \"number\"\n                    },\n                    ye: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Y\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    zoomLimits: {\n                      $ref: \"#/definitions/ZoomLimits\"\n                    }\n                  },\n                  type: \"object\"\n                }\n              },\n              required: [\n                \"spec\",\n                \"selectivity\"\n              ],\n              type: \"object\"\n            },\n            type: \"array\"\n          },\n          spacing: {\n            description: '- If `{\"layout\": \"linear\"}`, specify the space between tracks in pixels;\\n\\n- If `{\"layout\": \"circular\"}`, specify the space between tracks in percentage ranging from 0 to 100.',\n            type: \"number\"\n          },\n          \"static\": {\n            description: \"Whether to disable [Zooming and Panning](http://gosling-lang.org/docs/user-interaction#zooming-and-panning), __Default:__ `false`.\",\n            type: \"boolean\"\n          },\n          style: {\n            $ref: \"#/definitions/Style\",\n            description: \"Define the [style](http://gosling-lang.org/docs/visual-channel#style-related-properties) of multive views. Will be overwritten by the style of children elements (e.g., view, track).\"\n          },\n          subtitle: {\n            type: \"string\"\n          },\n          title: {\n            type: \"string\"\n          },\n          tracks: {\n            items: {\n              $ref: \"#/definitions/Track\"\n            },\n            type: \"array\"\n          },\n          xAxis: {\n            $ref: \"#/definitions/AxisPosition\",\n            description: \"not supported\"\n          },\n          xDomain: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/DomainInterval\"\n              },\n              {\n                $ref: \"#/definitions/DomainChrInterval\"\n              },\n              {\n                $ref: \"#/definitions/DomainChr\"\n              }\n            ],\n            description: \"Specify the visible region of genomic x-axis\"\n          },\n          xOffset: {\n            description: \"Specify the x offset of views in the unit of pixels\",\n            type: \"number\"\n          },\n          yDomain: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/DomainInterval\"\n              },\n              {\n                $ref: \"#/definitions/DomainChrInterval\"\n              },\n              {\n                $ref: \"#/definitions/DomainChr\"\n              }\n            ],\n            description: \"Specify the visible region of genomic y-axis\"\n          },\n          yOffset: {\n            description: \"Specify the y offset of views in the unit of pixels\",\n            type: \"number\"\n          },\n          zoomLimits: {\n            $ref: \"#/definitions/ZoomLimits\"\n          }\n        },\n        required: [\n          \"tracks\"\n        ],\n        type: \"object\"\n      },\n      {\n        additionalProperties: false,\n        properties: {\n          _assignedHeight: {\n            type: \"number\"\n          },\n          _assignedWidth: {\n            description: \"Internal: Used for responsive spec\",\n            type: \"number\"\n          },\n          arrangement: {\n            description: \"Specify how multiple views are arranged.\",\n            \"enum\": [\n              \"parallel\",\n              \"serial\",\n              \"horizontal\",\n              \"vertical\"\n            ],\n            type: \"string\"\n          },\n          assembly: {\n            $ref: \"#/definitions/Assembly\",\n            description: 'A string that specifies the genome builds to use. Currently support `\"hg38\"`, `\"hg19\"`, `\"hg18\"`, `\"hg17\"`, `\"hg16\"`, `\"mm10\"`, `\"mm9\"`, and `\"unknown\"`.\\n\\n__Note:__: with `\"unknown\"` assembly, genomic axes do not show chrN: in labels.'\n          },\n          centerRadius: {\n            description: \"Proportion of the radius of the center white space.\\n\\n__Default:__ `0.3`\",\n            type: \"number\"\n          },\n          description: {\n            type: \"string\"\n          },\n          layout: {\n            $ref: \"#/definitions/Layout\",\n            description: \"Specify the layout type of all tracks.\"\n          },\n          linkingId: {\n            description: \"Specify an ID for [linking multiple views](http://gosling-lang.org/docs/user-interaction#linking-views)\",\n            type: \"string\"\n          },\n          orientation: {\n            $ref: \"#/definitions/Orientation\",\n            description: \"Specify the orientation.\"\n          },\n          responsiveSize: {\n            $ref: \"#/definitions/ResponsiveSize\",\n            description: \"Determine whether to make the size of `GoslingComponent` bound to its parent element. __Default__: `false`\"\n          },\n          responsiveSpec: {\n            items: {\n              additionalProperties: false,\n              properties: {\n                selectivity: {\n                  items: {\n                    $ref: \"#/definitions/SelectivityCondition\"\n                  },\n                  type: \"array\"\n                },\n                spec: {\n                  additionalProperties: false,\n                  properties: {\n                    _assignedHeight: {\n                      type: \"number\"\n                    },\n                    _assignedWidth: {\n                      description: \"Internal: Used for responsive spec\",\n                      type: \"number\"\n                    },\n                    arrangement: {\n                      description: \"Specify how multiple views are arranged.\",\n                      \"enum\": [\n                        \"parallel\",\n                        \"serial\",\n                        \"horizontal\",\n                        \"vertical\"\n                      ],\n                      type: \"string\"\n                    },\n                    assembly: {\n                      $ref: \"#/definitions/Assembly\",\n                      description: 'A string that specifies the genome builds to use. Currently support `\"hg38\"`, `\"hg19\"`, `\"hg18\"`, `\"hg17\"`, `\"hg16\"`, `\"mm10\"`, `\"mm9\"`, and `\"unknown\"`.\\n\\n__Note:__: with `\"unknown\"` assembly, genomic axes do not show chrN: in labels.'\n                    },\n                    centerRadius: {\n                      description: \"Proportion of the radius of the center white space.\\n\\n__Default:__ `0.3`\",\n                      type: \"number\"\n                    },\n                    layout: {\n                      $ref: \"#/definitions/Layout\",\n                      description: \"Specify the layout type of all tracks.\"\n                    },\n                    linkingId: {\n                      description: \"Specify an ID for [linking multiple views](http://gosling-lang.org/docs/user-interaction#linking-views)\",\n                      type: \"string\"\n                    },\n                    orientation: {\n                      $ref: \"#/definitions/Orientation\",\n                      description: \"Specify the orientation.\"\n                    },\n                    spacing: {\n                      description: '- If `{\"layout\": \"linear\"}`, specify the space between tracks in pixels;\\n\\n- If `{\"layout\": \"circular\"}`, specify the space between tracks in percentage ranging from 0 to 100.',\n                      type: \"number\"\n                    },\n                    \"static\": {\n                      description: \"Whether to disable [Zooming and Panning](http://gosling-lang.org/docs/user-interaction#zooming-and-panning), __Default:__ `false`.\",\n                      type: \"boolean\"\n                    },\n                    style: {\n                      $ref: \"#/definitions/Style\",\n                      description: \"Define the [style](http://gosling-lang.org/docs/visual-channel#style-related-properties) of multive views. Will be overwritten by the style of children elements (e.g., view, track).\"\n                    },\n                    views: {\n                      description: \"An array of view specifications\",\n                      items: {\n                        anyOf: [\n                          {\n                            $ref: \"#/definitions/SingleView\"\n                          },\n                          {\n                            $ref: \"#/definitions/MultipleViews\"\n                          }\n                        ]\n                      },\n                      type: \"array\"\n                    },\n                    xAxis: {\n                      $ref: \"#/definitions/AxisPosition\",\n                      description: \"not supported\"\n                    },\n                    xDomain: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/DomainInterval\"\n                        },\n                        {\n                          $ref: \"#/definitions/DomainChrInterval\"\n                        },\n                        {\n                          $ref: \"#/definitions/DomainChr\"\n                        }\n                      ],\n                      description: \"Specify the visible region of genomic x-axis\"\n                    },\n                    xOffset: {\n                      description: \"Specify the x offset of views in the unit of pixels\",\n                      type: \"number\"\n                    },\n                    yDomain: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/DomainInterval\"\n                        },\n                        {\n                          $ref: \"#/definitions/DomainChrInterval\"\n                        },\n                        {\n                          $ref: \"#/definitions/DomainChr\"\n                        }\n                      ],\n                      description: \"Specify the visible region of genomic y-axis\"\n                    },\n                    yOffset: {\n                      description: \"Specify the y offset of views in the unit of pixels\",\n                      type: \"number\"\n                    },\n                    zoomLimits: {\n                      $ref: \"#/definitions/ZoomLimits\"\n                    }\n                  },\n                  type: \"object\"\n                }\n              },\n              required: [\n                \"spec\",\n                \"selectivity\"\n              ],\n              type: \"object\"\n            },\n            type: \"array\"\n          },\n          spacing: {\n            description: '- If `{\"layout\": \"linear\"}`, specify the space between tracks in pixels;\\n\\n- If `{\"layout\": \"circular\"}`, specify the space between tracks in percentage ranging from 0 to 100.',\n            type: \"number\"\n          },\n          \"static\": {\n            description: \"Whether to disable [Zooming and Panning](http://gosling-lang.org/docs/user-interaction#zooming-and-panning), __Default:__ `false`.\",\n            type: \"boolean\"\n          },\n          style: {\n            $ref: \"#/definitions/Style\",\n            description: \"Define the [style](http://gosling-lang.org/docs/visual-channel#style-related-properties) of multive views. Will be overwritten by the style of children elements (e.g., view, track).\"\n          },\n          subtitle: {\n            type: \"string\"\n          },\n          title: {\n            type: \"string\"\n          },\n          views: {\n            description: \"An array of view specifications\",\n            items: {\n              anyOf: [\n                {\n                  $ref: \"#/definitions/SingleView\"\n                },\n                {\n                  $ref: \"#/definitions/MultipleViews\"\n                }\n              ]\n            },\n            type: \"array\"\n          },\n          xAxis: {\n            $ref: \"#/definitions/AxisPosition\",\n            description: \"not supported\"\n          },\n          xDomain: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/DomainInterval\"\n              },\n              {\n                $ref: \"#/definitions/DomainChrInterval\"\n              },\n              {\n                $ref: \"#/definitions/DomainChr\"\n              }\n            ],\n            description: \"Specify the visible region of genomic x-axis\"\n          },\n          xOffset: {\n            description: \"Specify the x offset of views in the unit of pixels\",\n            type: \"number\"\n          },\n          yDomain: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/DomainInterval\"\n              },\n              {\n                $ref: \"#/definitions/DomainChrInterval\"\n              },\n              {\n                $ref: \"#/definitions/DomainChr\"\n              }\n            ],\n            description: \"Specify the visible region of genomic y-axis\"\n          },\n          yOffset: {\n            description: \"Specify the y offset of views in the unit of pixels\",\n            type: \"number\"\n          },\n          zoomLimits: {\n            $ref: \"#/definitions/ZoomLimits\"\n          }\n        },\n        required: [\n          \"views\"\n        ],\n        type: \"object\"\n      }\n    ]\n  },\n  IncludeFilter: {\n    additionalProperties: false,\n    properties: {\n      field: {\n        description: \"A filter is applied based on the values of the specified data field\",\n        type: \"string\"\n      },\n      include: {\n        description: \"Check whether the value includes a substring.\",\n        type: \"string\"\n      },\n      not: {\n        description: 'when `{\"not\": true}`, apply a NOT logical operation to the filter.\\n\\n__Default:__ `false`',\n        type: \"boolean\"\n      },\n      type: {\n        \"const\": \"filter\",\n        type: \"string\"\n      }\n    },\n    required: [\n      \"field\",\n      \"include\",\n      \"type\"\n    ],\n    type: \"object\"\n  },\n  JSONData: {\n    additionalProperties: false,\n    description: \"The JSON data format allows users to include data directly in the Gosling's JSON specification.\",\n    properties: {\n      chromosomeField: {\n        description: \"Specify the name of chromosome data fields.\",\n        type: \"string\"\n      },\n      genomicFields: {\n        description: \"Specify the name of genomic data fields.\",\n        items: {\n          type: \"string\"\n        },\n        type: \"array\"\n      },\n      genomicFieldsToConvert: {\n        description: \"experimental\",\n        items: {\n          additionalProperties: false,\n          properties: {\n            chromosomeField: {\n              type: \"string\"\n            },\n            genomicFields: {\n              items: {\n                type: \"string\"\n              },\n              type: \"array\"\n            }\n          },\n          required: [\n            \"chromosomeField\",\n            \"genomicFields\"\n          ],\n          type: \"object\"\n        },\n        type: \"array\"\n      },\n      sampleLength: {\n        description: \"Specify the number of rows loaded from the URL.\\n\\n__Default:__ `1000`\",\n        type: \"number\"\n      },\n      type: {\n        \"const\": \"json\",\n        description: \"Define data type.\",\n        type: \"string\"\n      },\n      values: {\n        description: \"Values in the form of JSON.\",\n        items: {\n          $ref: \"#/definitions/Datum\"\n        },\n        type: \"array\"\n      }\n    },\n    required: [\n      \"type\",\n      \"values\"\n    ],\n    type: \"object\"\n  },\n  JSONParseTransform: {\n    additionalProperties: false,\n    description: \"Parse JSON Object Array and append vertically\",\n    properties: {\n      baseGenomicField: {\n        description: \"Base genomic position when parsing relative position.\",\n        type: \"string\"\n      },\n      field: {\n        description: \"The field that contains the JSON object array.\",\n        type: \"string\"\n      },\n      genomicField: {\n        description: \"Relative genomic position to parse.\",\n        type: \"string\"\n      },\n      genomicLengthField: {\n        description: \"Length of genomic interval.\",\n        type: \"string\"\n      },\n      type: {\n        \"const\": \"subjson\",\n        type: \"string\"\n      }\n    },\n    required: [\n      \"type\",\n      \"field\",\n      \"baseGenomicField\",\n      \"genomicField\",\n      \"genomicLengthField\"\n    ],\n    type: \"object\"\n  },\n  Layout: {\n    \"enum\": [\n      \"linear\",\n      \"circular\"\n    ],\n    type: \"string\"\n  },\n  LogBase: {\n    anyOf: [\n      {\n        type: \"number\"\n      },\n      {\n        \"const\": \"e\",\n        type: \"string\"\n      }\n    ]\n  },\n  LogTransform: {\n    additionalProperties: false,\n    properties: {\n      base: {\n        $ref: \"#/definitions/LogBase\",\n        description: \"If not specified, 10 is used.\"\n      },\n      field: {\n        type: \"string\"\n      },\n      newField: {\n        description: \"If specified, store transformed values in a new field.\",\n        type: \"string\"\n      },\n      type: {\n        \"const\": \"log\",\n        type: \"string\"\n      }\n    },\n    required: [\n      \"type\",\n      \"field\"\n    ],\n    type: \"object\"\n  },\n  LogicalOperation: {\n    \"enum\": [\n      \"less-than\",\n      \"lt\",\n      \"LT\",\n      \"greater-than\",\n      \"gt\",\n      \"GT\",\n      \"less-than-or-equal-to\",\n      \"ltet\",\n      \"LTET\",\n      \"greater-than-or-equal-to\",\n      \"gtet\",\n      \"GTET\"\n    ],\n    type: \"string\"\n  },\n  Mark: {\n    \"enum\": [\n      \"point\",\n      \"line\",\n      \"area\",\n      \"bar\",\n      \"rect\",\n      \"text\",\n      \"withinLink\",\n      \"betweenLink\",\n      \"rule\",\n      \"triangleLeft\",\n      \"triangleRight\",\n      \"triangleBottom\",\n      \"brush\",\n      \"header\"\n    ],\n    type: \"string\"\n  },\n  MatrixData: {\n    additionalProperties: false,\n    properties: {\n      binSize: {\n        description: \"Determine the number of nearby cells to aggregate. __Default__: `1`\",\n        type: \"number\"\n      },\n      column: {\n        description: \"The name of the first genomic field. __Default__: `x`\",\n        type: \"string\"\n      },\n      row: {\n        description: \"The name of the first genomic field. __Default__: `y`\",\n        type: \"string\"\n      },\n      type: {\n        \"const\": \"matrix\",\n        type: \"string\"\n      },\n      url: {\n        description: \"URL link to the matrix data file\",\n        type: \"string\"\n      },\n      value: {\n        description: \"The name of the value field. __Default__: `value`\",\n        type: \"string\"\n      }\n    },\n    required: [\n      \"type\",\n      \"url\"\n    ],\n    type: \"object\"\n  },\n  MouseEventsDeep: {\n    additionalProperties: false,\n    properties: {\n      click: {\n        type: \"boolean\"\n      },\n      enableMouseOverOnMultipleMarks: {\n        description: \"Determine whether all marks underneath the mouse point should be affected by mouse over. __Default__: `false`\",\n        type: \"boolean\"\n      },\n      groupMarksByField: {\n        description: \"Group marks using keys in a data field. This affects how a set of marks are highlighted/selected by interaction. __Default__: `undefined`\",\n        type: \"string\"\n      },\n      mouseOver: {\n        type: \"boolean\"\n      },\n      rangeSelect: {\n        type: \"boolean\"\n      }\n    },\n    type: \"object\"\n  },\n  MultipleViews: {\n    additionalProperties: false,\n    properties: {\n      _assignedHeight: {\n        type: \"number\"\n      },\n      _assignedWidth: {\n        description: \"Internal: Used for responsive spec\",\n        type: \"number\"\n      },\n      arrangement: {\n        description: \"Specify how multiple views are arranged.\",\n        \"enum\": [\n          \"parallel\",\n          \"serial\",\n          \"horizontal\",\n          \"vertical\"\n        ],\n        type: \"string\"\n      },\n      assembly: {\n        $ref: \"#/definitions/Assembly\",\n        description: 'A string that specifies the genome builds to use. Currently support `\"hg38\"`, `\"hg19\"`, `\"hg18\"`, `\"hg17\"`, `\"hg16\"`, `\"mm10\"`, `\"mm9\"`, and `\"unknown\"`.\\n\\n__Note:__: with `\"unknown\"` assembly, genomic axes do not show chrN: in labels.'\n      },\n      centerRadius: {\n        description: \"Proportion of the radius of the center white space.\\n\\n__Default:__ `0.3`\",\n        type: \"number\"\n      },\n      layout: {\n        $ref: \"#/definitions/Layout\",\n        description: \"Specify the layout type of all tracks.\"\n      },\n      linkingId: {\n        description: \"Specify an ID for [linking multiple views](http://gosling-lang.org/docs/user-interaction#linking-views)\",\n        type: \"string\"\n      },\n      orientation: {\n        $ref: \"#/definitions/Orientation\",\n        description: \"Specify the orientation.\"\n      },\n      spacing: {\n        description: '- If `{\"layout\": \"linear\"}`, specify the space between tracks in pixels;\\n\\n- If `{\"layout\": \"circular\"}`, specify the space between tracks in percentage ranging from 0 to 100.',\n        type: \"number\"\n      },\n      \"static\": {\n        description: \"Whether to disable [Zooming and Panning](http://gosling-lang.org/docs/user-interaction#zooming-and-panning), __Default:__ `false`.\",\n        type: \"boolean\"\n      },\n      style: {\n        $ref: \"#/definitions/Style\",\n        description: \"Define the [style](http://gosling-lang.org/docs/visual-channel#style-related-properties) of multive views. Will be overwritten by the style of children elements (e.g., view, track).\"\n      },\n      views: {\n        description: \"An array of view specifications\",\n        items: {\n          anyOf: [\n            {\n              $ref: \"#/definitions/SingleView\"\n            },\n            {\n              $ref: \"#/definitions/MultipleViews\"\n            }\n          ]\n        },\n        type: \"array\"\n      },\n      xAxis: {\n        $ref: \"#/definitions/AxisPosition\",\n        description: \"not supported\"\n      },\n      xDomain: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/DomainInterval\"\n          },\n          {\n            $ref: \"#/definitions/DomainChrInterval\"\n          },\n          {\n            $ref: \"#/definitions/DomainChr\"\n          }\n        ],\n        description: \"Specify the visible region of genomic x-axis\"\n      },\n      xOffset: {\n        description: \"Specify the x offset of views in the unit of pixels\",\n        type: \"number\"\n      },\n      yDomain: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/DomainInterval\"\n          },\n          {\n            $ref: \"#/definitions/DomainChrInterval\"\n          },\n          {\n            $ref: \"#/definitions/DomainChr\"\n          }\n        ],\n        description: \"Specify the visible region of genomic y-axis\"\n      },\n      yOffset: {\n        description: \"Specify the y offset of views in the unit of pixels\",\n        type: \"number\"\n      },\n      zoomLimits: {\n        $ref: \"#/definitions/ZoomLimits\"\n      }\n    },\n    required: [\n      \"views\"\n    ],\n    type: \"object\"\n  },\n  MultivecData: {\n    additionalProperties: false,\n    description: 'Two-dimensional quantitative values, one axis for genomic coordinate and the other for different samples, can be converted into HiGlass\\' `\"multivec\"` data. For example, multiple BigWig files can be converted into a single multivec file. You can also convert sequence data (FASTA) into this format where rows will be different nucleotide bases (e.g., A, T, G, C) and quantitative values represent the frequency. Find out more about this format at [HiGlass Docs](https://docs.higlass.io/data_preparation.html#multivec-files).',\n    properties: {\n      aggregation: {\n        $ref: \"#/definitions/BinAggregate\",\n        description: 'Determine aggregation function to apply within bins. __Default__: `\"mean\"`'\n      },\n      binSize: {\n        description: \"Binning the genomic interval in tiles (unit size: 256).\",\n        type: \"number\"\n      },\n      categories: {\n        description: \"assign names of individual samples.\",\n        items: {\n          type: \"string\"\n        },\n        type: \"array\"\n      },\n      column: {\n        description: \"Assign a field name of the middle position of genomic intervals.\",\n        type: \"string\"\n      },\n      end: {\n        description: \"Assign a field name of the end position of genomic intervals.\",\n        type: \"string\"\n      },\n      row: {\n        description: \"Assign a field name of samples.\",\n        type: \"string\"\n      },\n      start: {\n        description: \"Assign a field name of the start position of genomic intervals.\",\n        type: \"string\"\n      },\n      type: {\n        \"const\": \"multivec\",\n        type: \"string\"\n      },\n      url: {\n        description: \"Specify the URL address of the data file.\",\n        type: \"string\"\n      },\n      value: {\n        description: \"Assign a field name of quantitative values.\",\n        type: \"string\"\n      }\n    },\n    required: [\n      \"type\",\n      \"url\",\n      \"column\",\n      \"row\",\n      \"value\"\n    ],\n    type: \"object\"\n  },\n  OneOfFilter: {\n    additionalProperties: false,\n    properties: {\n      field: {\n        description: \"A filter is applied based on the values of the specified data field\",\n        type: \"string\"\n      },\n      not: {\n        description: 'when `{\"not\": true}`, apply a NOT logical operation to the filter.\\n\\n__Default:__ `false`',\n        type: \"boolean\"\n      },\n      oneOf: {\n        anyOf: [\n          {\n            items: {\n              type: \"string\"\n            },\n            type: \"array\"\n          },\n          {\n            items: {\n              type: \"number\"\n            },\n            type: \"array\"\n          }\n        ],\n        description: \"Check whether the value is an element in the provided list.\"\n      },\n      type: {\n        \"const\": \"filter\",\n        type: \"string\"\n      }\n    },\n    required: [\n      \"field\",\n      \"oneOf\",\n      \"type\"\n    ],\n    type: \"object\"\n  },\n  Opacity: {\n    additionalProperties: false,\n    properties: {\n      domain: {\n        $ref: \"#/definitions/ValueExtent\",\n        description: \"Values of the data\"\n      },\n      field: {\n        description: \"Name of the data field\",\n        type: \"string\"\n      },\n      range: {\n        $ref: \"#/definitions/ValueExtent\",\n        description: \"Ranges of visual channel values\"\n      },\n      type: {\n        description: \"Specify the data type\",\n        \"enum\": [\n          \"quantitative\",\n          \"nominal\"\n        ],\n        type: \"string\"\n      }\n    },\n    type: \"object\"\n  },\n  Orientation: {\n    \"enum\": [\n      \"horizontal\",\n      \"vertical\"\n    ],\n    type: \"string\"\n  },\n  OverlaidTrack: {\n    additionalProperties: false,\n    description: \"Superposing multiple tracks.\",\n    properties: {\n      _assignedHeight: {\n        type: \"number\"\n      },\n      _assignedWidth: {\n        description: \"Internal: Used for responsive spec\",\n        type: \"number\"\n      },\n      _invalidTrack: {\n        description: \"internal\",\n        type: \"boolean\"\n      },\n      _renderingId: {\n        description: \"internal\",\n        type: \"string\"\n      },\n      assembly: {\n        $ref: \"#/definitions/Assembly\",\n        description: 'A string that specifies the genome builds to use. Currently support `\"hg38\"`, `\"hg19\"`, `\"hg18\"`, `\"hg17\"`, `\"hg16\"`, `\"mm10\"`, `\"mm9\"`, and `\"unknown\"`.\\n\\n__Note:__: with `\"unknown\"` assembly, genomic axes do not show chrN: in labels.'\n      },\n      baselineY: {\n        type: \"number\"\n      },\n      centerRadius: {\n        description: \"Proportion of the radius of the center white space.\\n\\n__Default:__ `0.3`\",\n        type: \"number\"\n      },\n      color: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/Color\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      data: {\n        $ref: \"#/definitions/DataDeep\"\n      },\n      dataTransform: {\n        items: {\n          $ref: \"#/definitions/DataTransform\"\n        },\n        type: \"array\"\n      },\n      displacement: {\n        $ref: \"#/definitions/Displacement\"\n      },\n      endAngle: {\n        description: 'Specify the end angle (in the range of [0, 360]) of circular tracks (`{\"layout\": \"circular\"}`).',\n        type: \"number\"\n      },\n      experimental: {\n        additionalProperties: false,\n        properties: {\n          mouseEvents: {\n            anyOf: [\n              {\n                type: \"boolean\"\n              },\n              {\n                $ref: \"#/definitions/MouseEventsDeep\"\n              }\n            ]\n          }\n        },\n        type: \"object\"\n      },\n      flipY: {\n        type: \"boolean\"\n      },\n      height: {\n        description: \"Specify the track height in pixels.\",\n        type: \"number\"\n      },\n      id: {\n        type: \"string\"\n      },\n      innerRadius: {\n        description: 'Specify the inner radius of tracks when (`{\"layout\": \"circular\"}`).',\n        type: \"number\"\n      },\n      layout: {\n        $ref: \"#/definitions/Layout\",\n        description: \"Specify the layout type of all tracks.\"\n      },\n      linkingId: {\n        description: \"Specify an ID for [linking multiple views](http://gosling-lang.org/docs/user-interaction#linking-views)\",\n        type: \"string\"\n      },\n      mark: {\n        $ref: \"#/definitions/Mark\"\n      },\n      opacity: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/Opacity\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      orientation: {\n        $ref: \"#/definitions/Orientation\",\n        description: \"Specify the orientation.\"\n      },\n      outerRadius: {\n        description: 'Specify the outer radius of tracks when `{\"layout\": \"circular\"}`.',\n        type: \"number\"\n      },\n      overlay: {\n        items: {\n          additionalProperties: false,\n          properties: {\n            _assignedHeight: {\n              type: \"number\"\n            },\n            _assignedWidth: {\n              description: \"Internal: Used for responsive spec\",\n              type: \"number\"\n            },\n            _invalidTrack: {\n              description: \"internal\",\n              type: \"boolean\"\n            },\n            _renderingId: {\n              description: \"internal\",\n              type: \"string\"\n            },\n            assembly: {\n              $ref: \"#/definitions/Assembly\",\n              description: 'A string that specifies the genome builds to use. Currently support `\"hg38\"`, `\"hg19\"`, `\"hg18\"`, `\"hg17\"`, `\"hg16\"`, `\"mm10\"`, `\"mm9\"`, and `\"unknown\"`.\\n\\n__Note:__: with `\"unknown\"` assembly, genomic axes do not show chrN: in labels.'\n            },\n            baselineY: {\n              type: \"number\"\n            },\n            centerRadius: {\n              description: \"Proportion of the radius of the center white space.\\n\\n__Default:__ `0.3`\",\n              type: \"number\"\n            },\n            color: {\n              anyOf: [\n                {\n                  $ref: \"#/definitions/Color\"\n                },\n                {\n                  $ref: \"#/definitions/ChannelValue\"\n                }\n              ]\n            },\n            data: {\n              $ref: \"#/definitions/DataDeep\"\n            },\n            dataTransform: {\n              items: {\n                $ref: \"#/definitions/DataTransform\"\n              },\n              type: \"array\"\n            },\n            displacement: {\n              $ref: \"#/definitions/Displacement\"\n            },\n            endAngle: {\n              description: 'Specify the end angle (in the range of [0, 360]) of circular tracks (`{\"layout\": \"circular\"}`).',\n              type: \"number\"\n            },\n            experimental: {\n              additionalProperties: false,\n              properties: {\n                mouseEvents: {\n                  anyOf: [\n                    {\n                      type: \"boolean\"\n                    },\n                    {\n                      $ref: \"#/definitions/MouseEventsDeep\"\n                    }\n                  ]\n                }\n              },\n              type: \"object\"\n            },\n            flipY: {\n              type: \"boolean\"\n            },\n            id: {\n              type: \"string\"\n            },\n            innerRadius: {\n              description: 'Specify the inner radius of tracks when (`{\"layout\": \"circular\"}`).',\n              type: \"number\"\n            },\n            linkingId: {\n              description: \"Specify an ID for [linking multiple views](http://gosling-lang.org/docs/user-interaction#linking-views)\",\n              type: \"string\"\n            },\n            mark: {\n              $ref: \"#/definitions/Mark\"\n            },\n            opacity: {\n              anyOf: [\n                {\n                  $ref: \"#/definitions/Opacity\"\n                },\n                {\n                  $ref: \"#/definitions/ChannelValue\"\n                }\n              ]\n            },\n            orientation: {\n              $ref: \"#/definitions/Orientation\",\n              description: \"Specify the orientation.\"\n            },\n            outerRadius: {\n              description: 'Specify the outer radius of tracks when `{\"layout\": \"circular\"}`.',\n              type: \"number\"\n            },\n            overlayOnPreviousTrack: {\n              type: \"boolean\"\n            },\n            overrideTemplate: {\n              type: \"boolean\"\n            },\n            prerelease: {\n              additionalProperties: false,\n              description: \"internal\",\n              type: \"object\"\n            },\n            row: {\n              anyOf: [\n                {\n                  $ref: \"#/definitions/Row\"\n                },\n                {\n                  $ref: \"#/definitions/ChannelValue\"\n                }\n              ]\n            },\n            size: {\n              anyOf: [\n                {\n                  $ref: \"#/definitions/Size\"\n                },\n                {\n                  $ref: \"#/definitions/ChannelValue\"\n                }\n              ]\n            },\n            spacing: {\n              description: '- If `{\"layout\": \"linear\"}`, specify the space between tracks in pixels;\\n\\n- If `{\"layout\": \"circular\"}`, specify the space between tracks in percentage ranging from 0 to 100.',\n              type: \"number\"\n            },\n            startAngle: {\n              description: 'Specify the start angle (in the range of [0, 360]) of circular tracks (`{\"layout\": \"circular\"}`).',\n              type: \"number\"\n            },\n            \"static\": {\n              description: \"Whether to disable [Zooming and Panning](http://gosling-lang.org/docs/user-interaction#zooming-and-panning), __Default:__ `false`.\",\n              type: \"boolean\"\n            },\n            stretch: {\n              type: \"boolean\"\n            },\n            stroke: {\n              anyOf: [\n                {\n                  $ref: \"#/definitions/Stroke\"\n                },\n                {\n                  $ref: \"#/definitions/ChannelValue\"\n                }\n              ]\n            },\n            strokeWidth: {\n              anyOf: [\n                {\n                  $ref: \"#/definitions/StrokeWidth\"\n                },\n                {\n                  $ref: \"#/definitions/ChannelValue\"\n                }\n              ]\n            },\n            style: {\n              $ref: \"#/definitions/Style\",\n              description: \"Define the [style](http://gosling-lang.org/docs/visual-channel#style-related-properties) of multive views. Will be overwritten by the style of children elements (e.g., view, track).\"\n            },\n            text: {\n              anyOf: [\n                {\n                  $ref: \"#/definitions/Text\"\n                },\n                {\n                  $ref: \"#/definitions/ChannelValue\"\n                }\n              ]\n            },\n            tooltip: {\n              items: {\n                $ref: \"#/definitions/Tooltip\"\n              },\n              type: \"array\"\n            },\n            visibility: {\n              items: {\n                $ref: \"#/definitions/VisibilityCondition\"\n              },\n              type: \"array\"\n            },\n            x: {\n              anyOf: [\n                {\n                  $ref: \"#/definitions/X\"\n                },\n                {\n                  $ref: \"#/definitions/ChannelValue\"\n                }\n              ]\n            },\n            x1: {\n              anyOf: [\n                {\n                  $ref: \"#/definitions/X\"\n                },\n                {\n                  $ref: \"#/definitions/ChannelValue\"\n                }\n              ]\n            },\n            x1e: {\n              anyOf: [\n                {\n                  $ref: \"#/definitions/X\"\n                },\n                {\n                  $ref: \"#/definitions/ChannelValue\"\n                }\n              ]\n            },\n            xAxis: {\n              $ref: \"#/definitions/AxisPosition\",\n              description: \"not supported\"\n            },\n            xDomain: {\n              anyOf: [\n                {\n                  $ref: \"#/definitions/DomainInterval\"\n                },\n                {\n                  $ref: \"#/definitions/DomainChrInterval\"\n                },\n                {\n                  $ref: \"#/definitions/DomainChr\"\n                }\n              ],\n              description: \"Specify the visible region of genomic x-axis\"\n            },\n            xOffset: {\n              description: \"Specify the x offset of views in the unit of pixels\",\n              type: \"number\"\n            },\n            xe: {\n              anyOf: [\n                {\n                  $ref: \"#/definitions/X\"\n                },\n                {\n                  $ref: \"#/definitions/ChannelValue\"\n                }\n              ]\n            },\n            y: {\n              anyOf: [\n                {\n                  $ref: \"#/definitions/Y\"\n                },\n                {\n                  $ref: \"#/definitions/ChannelValue\"\n                }\n              ]\n            },\n            y1: {\n              anyOf: [\n                {\n                  $ref: \"#/definitions/Y\"\n                },\n                {\n                  $ref: \"#/definitions/ChannelValue\"\n                }\n              ]\n            },\n            y1e: {\n              anyOf: [\n                {\n                  $ref: \"#/definitions/Y\"\n                },\n                {\n                  $ref: \"#/definitions/ChannelValue\"\n                }\n              ]\n            },\n            yDomain: {\n              anyOf: [\n                {\n                  $ref: \"#/definitions/DomainInterval\"\n                },\n                {\n                  $ref: \"#/definitions/DomainChrInterval\"\n                },\n                {\n                  $ref: \"#/definitions/DomainChr\"\n                }\n              ],\n              description: \"Specify the visible region of genomic y-axis\"\n            },\n            yOffset: {\n              description: \"Specify the y offset of views in the unit of pixels\",\n              type: \"number\"\n            },\n            ye: {\n              anyOf: [\n                {\n                  $ref: \"#/definitions/Y\"\n                },\n                {\n                  $ref: \"#/definitions/ChannelValue\"\n                }\n              ]\n            },\n            zoomLimits: {\n              $ref: \"#/definitions/ZoomLimits\"\n            }\n          },\n          type: \"object\"\n        },\n        type: \"array\"\n      },\n      overlayOnPreviousTrack: {\n        type: \"boolean\"\n      },\n      overrideTemplate: {\n        type: \"boolean\"\n      },\n      prerelease: {\n        additionalProperties: false,\n        description: \"internal\",\n        type: \"object\"\n      },\n      row: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/Row\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      size: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/Size\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      spacing: {\n        description: '- If `{\"layout\": \"linear\"}`, specify the space between tracks in pixels;\\n\\n- If `{\"layout\": \"circular\"}`, specify the space between tracks in percentage ranging from 0 to 100.',\n        type: \"number\"\n      },\n      startAngle: {\n        description: 'Specify the start angle (in the range of [0, 360]) of circular tracks (`{\"layout\": \"circular\"}`).',\n        type: \"number\"\n      },\n      \"static\": {\n        description: \"Whether to disable [Zooming and Panning](http://gosling-lang.org/docs/user-interaction#zooming-and-panning), __Default:__ `false`.\",\n        type: \"boolean\"\n      },\n      stretch: {\n        type: \"boolean\"\n      },\n      stroke: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/Stroke\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      strokeWidth: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/StrokeWidth\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      style: {\n        $ref: \"#/definitions/Style\",\n        description: \"Define the [style](http://gosling-lang.org/docs/visual-channel#style-related-properties) of multive views. Will be overwritten by the style of children elements (e.g., view, track).\"\n      },\n      subtitle: {\n        type: \"string\"\n      },\n      text: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/Text\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      title: {\n        description: \"If defined, will show the textual label on the left-top corner of a track.\",\n        type: \"string\"\n      },\n      tooltip: {\n        items: {\n          $ref: \"#/definitions/Tooltip\"\n        },\n        type: \"array\"\n      },\n      visibility: {\n        items: {\n          $ref: \"#/definitions/VisibilityCondition\"\n        },\n        type: \"array\"\n      },\n      width: {\n        description: \"Specify the track width in pixels.\",\n        type: \"number\"\n      },\n      x: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/X\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      x1: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/X\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      x1e: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/X\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      xAxis: {\n        $ref: \"#/definitions/AxisPosition\",\n        description: \"not supported\"\n      },\n      xDomain: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/DomainInterval\"\n          },\n          {\n            $ref: \"#/definitions/DomainChrInterval\"\n          },\n          {\n            $ref: \"#/definitions/DomainChr\"\n          }\n        ],\n        description: \"Specify the visible region of genomic x-axis\"\n      },\n      xOffset: {\n        description: \"Specify the x offset of views in the unit of pixels\",\n        type: \"number\"\n      },\n      xe: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/X\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      y: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/Y\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      y1: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/Y\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      y1e: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/Y\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      yDomain: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/DomainInterval\"\n          },\n          {\n            $ref: \"#/definitions/DomainChrInterval\"\n          },\n          {\n            $ref: \"#/definitions/DomainChr\"\n          }\n        ],\n        description: \"Specify the visible region of genomic y-axis\"\n      },\n      yOffset: {\n        description: \"Specify the y offset of views in the unit of pixels\",\n        type: \"number\"\n      },\n      ye: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/Y\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      zoomLimits: {\n        $ref: \"#/definitions/ZoomLimits\"\n      }\n    },\n    required: [\n      \"height\",\n      \"overlay\",\n      \"width\"\n    ],\n    type: \"object\"\n  },\n  OverlaidTracks: {\n    additionalProperties: false,\n    properties: {\n      _assignedHeight: {\n        type: \"number\"\n      },\n      _assignedWidth: {\n        description: \"Internal: Used for responsive spec\",\n        type: \"number\"\n      },\n      _invalidTrack: {\n        description: \"internal\",\n        type: \"boolean\"\n      },\n      _renderingId: {\n        description: \"internal\",\n        type: \"string\"\n      },\n      alignment: {\n        \"const\": \"overlay\",\n        type: \"string\"\n      },\n      assembly: {\n        $ref: \"#/definitions/Assembly\",\n        description: 'A string that specifies the genome builds to use. Currently support `\"hg38\"`, `\"hg19\"`, `\"hg18\"`, `\"hg17\"`, `\"hg16\"`, `\"mm10\"`, `\"mm9\"`, and `\"unknown\"`.\\n\\n__Note:__: with `\"unknown\"` assembly, genomic axes do not show chrN: in labels.'\n      },\n      baselineY: {\n        type: \"number\"\n      },\n      centerRadius: {\n        description: \"Proportion of the radius of the center white space.\\n\\n__Default:__ `0.3`\",\n        type: \"number\"\n      },\n      color: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/Color\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      data: {\n        $ref: \"#/definitions/DataDeep\"\n      },\n      dataTransform: {\n        items: {\n          $ref: \"#/definitions/DataTransform\"\n        },\n        type: \"array\"\n      },\n      displacement: {\n        $ref: \"#/definitions/Displacement\"\n      },\n      endAngle: {\n        description: 'Specify the end angle (in the range of [0, 360]) of circular tracks (`{\"layout\": \"circular\"}`).',\n        type: \"number\"\n      },\n      experimental: {\n        additionalProperties: false,\n        properties: {\n          mouseEvents: {\n            anyOf: [\n              {\n                type: \"boolean\"\n              },\n              {\n                $ref: \"#/definitions/MouseEventsDeep\"\n              }\n            ]\n          }\n        },\n        type: \"object\"\n      },\n      flipY: {\n        type: \"boolean\"\n      },\n      height: {\n        description: \"Specify the track height in pixels.\",\n        type: \"number\"\n      },\n      id: {\n        type: \"string\"\n      },\n      innerRadius: {\n        description: 'Specify the inner radius of tracks when (`{\"layout\": \"circular\"}`).',\n        type: \"number\"\n      },\n      layout: {\n        $ref: \"#/definitions/Layout\",\n        description: \"Specify the layout type of all tracks.\"\n      },\n      linkingId: {\n        description: \"Specify an ID for [linking multiple views](http://gosling-lang.org/docs/user-interaction#linking-views)\",\n        type: \"string\"\n      },\n      mark: {\n        $ref: \"#/definitions/Mark\"\n      },\n      opacity: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/Opacity\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      orientation: {\n        $ref: \"#/definitions/Orientation\",\n        description: \"Specify the orientation.\"\n      },\n      outerRadius: {\n        description: 'Specify the outer radius of tracks when `{\"layout\": \"circular\"}`.',\n        type: \"number\"\n      },\n      overlayOnPreviousTrack: {\n        type: \"boolean\"\n      },\n      overrideTemplate: {\n        type: \"boolean\"\n      },\n      prerelease: {\n        additionalProperties: false,\n        description: \"internal\",\n        type: \"object\"\n      },\n      row: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/Row\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      size: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/Size\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      spacing: {\n        description: '- If `{\"layout\": \"linear\"}`, specify the space between tracks in pixels;\\n\\n- If `{\"layout\": \"circular\"}`, specify the space between tracks in percentage ranging from 0 to 100.',\n        type: \"number\"\n      },\n      startAngle: {\n        description: 'Specify the start angle (in the range of [0, 360]) of circular tracks (`{\"layout\": \"circular\"}`).',\n        type: \"number\"\n      },\n      \"static\": {\n        description: \"Whether to disable [Zooming and Panning](http://gosling-lang.org/docs/user-interaction#zooming-and-panning), __Default:__ `false`.\",\n        type: \"boolean\"\n      },\n      stretch: {\n        type: \"boolean\"\n      },\n      stroke: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/Stroke\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      strokeWidth: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/StrokeWidth\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      style: {\n        $ref: \"#/definitions/Style\",\n        description: \"Define the [style](http://gosling-lang.org/docs/visual-channel#style-related-properties) of multive views. Will be overwritten by the style of children elements (e.g., view, track).\"\n      },\n      subtitle: {\n        type: \"string\"\n      },\n      text: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/Text\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      title: {\n        description: \"If defined, will show the textual label on the left-top corner of a track.\",\n        type: \"string\"\n      },\n      tooltip: {\n        items: {\n          $ref: \"#/definitions/Tooltip\"\n        },\n        type: \"array\"\n      },\n      tracks: {\n        items: {\n          $ref: \"#/definitions/PartialTrack\"\n        },\n        type: \"array\"\n      },\n      visibility: {\n        items: {\n          $ref: \"#/definitions/VisibilityCondition\"\n        },\n        type: \"array\"\n      },\n      width: {\n        description: \"Specify the track width in pixels.\",\n        type: \"number\"\n      },\n      x: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/X\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      x1: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/X\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      x1e: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/X\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      xAxis: {\n        $ref: \"#/definitions/AxisPosition\",\n        description: \"not supported\"\n      },\n      xDomain: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/DomainInterval\"\n          },\n          {\n            $ref: \"#/definitions/DomainChrInterval\"\n          },\n          {\n            $ref: \"#/definitions/DomainChr\"\n          }\n        ],\n        description: \"Specify the visible region of genomic x-axis\"\n      },\n      xOffset: {\n        description: \"Specify the x offset of views in the unit of pixels\",\n        type: \"number\"\n      },\n      xe: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/X\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      y: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/Y\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      y1: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/Y\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      y1e: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/Y\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      yDomain: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/DomainInterval\"\n          },\n          {\n            $ref: \"#/definitions/DomainChrInterval\"\n          },\n          {\n            $ref: \"#/definitions/DomainChr\"\n          }\n        ],\n        description: \"Specify the visible region of genomic y-axis\"\n      },\n      yOffset: {\n        description: \"Specify the y offset of views in the unit of pixels\",\n        type: \"number\"\n      },\n      ye: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/Y\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      zoomLimits: {\n        $ref: \"#/definitions/ZoomLimits\"\n      }\n    },\n    required: [\n      \"alignment\",\n      \"tracks\",\n      \"width\",\n      \"height\"\n    ],\n    type: \"object\"\n  },\n  PartialTrack: {\n    additionalProperties: false,\n    properties: {\n      _assignedHeight: {\n        type: \"number\"\n      },\n      _assignedWidth: {\n        description: \"Internal: Used for responsive spec\",\n        type: \"number\"\n      },\n      _invalidTrack: {\n        description: \"internal\",\n        type: \"boolean\"\n      },\n      _renderingId: {\n        description: \"internal\",\n        type: \"string\"\n      },\n      assembly: {\n        $ref: \"#/definitions/Assembly\",\n        description: 'A string that specifies the genome builds to use. Currently support `\"hg38\"`, `\"hg19\"`, `\"hg18\"`, `\"hg17\"`, `\"hg16\"`, `\"mm10\"`, `\"mm9\"`, and `\"unknown\"`.\\n\\n__Note:__: with `\"unknown\"` assembly, genomic axes do not show chrN: in labels.'\n      },\n      baselineY: {\n        type: \"number\"\n      },\n      centerRadius: {\n        description: \"Proportion of the radius of the center white space.\\n\\n__Default:__ `0.3`\",\n        type: \"number\"\n      },\n      color: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/Color\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      data: {\n        $ref: \"#/definitions/DataDeep\"\n      },\n      dataTransform: {\n        items: {\n          $ref: \"#/definitions/DataTransform\"\n        },\n        type: \"array\"\n      },\n      displacement: {\n        $ref: \"#/definitions/Displacement\"\n      },\n      encoding: {\n        additionalProperties: {\n          $ref: \"#/definitions/Channel\"\n        },\n        type: \"object\"\n      },\n      endAngle: {\n        description: 'Specify the end angle (in the range of [0, 360]) of circular tracks (`{\"layout\": \"circular\"}`).',\n        type: \"number\"\n      },\n      experimental: {\n        additionalProperties: false,\n        properties: {\n          mouseEvents: {\n            anyOf: [\n              {\n                type: \"boolean\"\n              },\n              {\n                $ref: \"#/definitions/MouseEventsDeep\"\n              }\n            ]\n          }\n        },\n        type: \"object\"\n      },\n      flipY: {\n        type: \"boolean\"\n      },\n      height: {\n        description: \"Specify the track height in pixels.\",\n        type: \"number\"\n      },\n      id: {\n        type: \"string\"\n      },\n      innerRadius: {\n        description: 'Specify the inner radius of tracks when (`{\"layout\": \"circular\"}`).',\n        type: \"number\"\n      },\n      layout: {\n        $ref: \"#/definitions/Layout\",\n        description: \"Specify the layout type of all tracks.\"\n      },\n      linkingId: {\n        description: \"Specify an ID for [linking multiple views](http://gosling-lang.org/docs/user-interaction#linking-views)\",\n        type: \"string\"\n      },\n      mark: {\n        $ref: \"#/definitions/Mark\"\n      },\n      opacity: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/Opacity\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      orientation: {\n        $ref: \"#/definitions/Orientation\",\n        description: \"Specify the orientation.\"\n      },\n      outerRadius: {\n        description: 'Specify the outer radius of tracks when `{\"layout\": \"circular\"}`.',\n        type: \"number\"\n      },\n      overlay: {\n        items: {\n          additionalProperties: false,\n          properties: {\n            _assignedHeight: {\n              type: \"number\"\n            },\n            _assignedWidth: {\n              description: \"Internal: Used for responsive spec\",\n              type: \"number\"\n            },\n            _invalidTrack: {\n              description: \"internal\",\n              type: \"boolean\"\n            },\n            _renderingId: {\n              description: \"internal\",\n              type: \"string\"\n            },\n            assembly: {\n              $ref: \"#/definitions/Assembly\",\n              description: 'A string that specifies the genome builds to use. Currently support `\"hg38\"`, `\"hg19\"`, `\"hg18\"`, `\"hg17\"`, `\"hg16\"`, `\"mm10\"`, `\"mm9\"`, and `\"unknown\"`.\\n\\n__Note:__: with `\"unknown\"` assembly, genomic axes do not show chrN: in labels.'\n            },\n            baselineY: {\n              type: \"number\"\n            },\n            centerRadius: {\n              description: \"Proportion of the radius of the center white space.\\n\\n__Default:__ `0.3`\",\n              type: \"number\"\n            },\n            color: {\n              anyOf: [\n                {\n                  $ref: \"#/definitions/Color\"\n                },\n                {\n                  $ref: \"#/definitions/ChannelValue\"\n                }\n              ]\n            },\n            data: {\n              $ref: \"#/definitions/DataDeep\"\n            },\n            dataTransform: {\n              items: {\n                $ref: \"#/definitions/DataTransform\"\n              },\n              type: \"array\"\n            },\n            displacement: {\n              $ref: \"#/definitions/Displacement\"\n            },\n            endAngle: {\n              description: 'Specify the end angle (in the range of [0, 360]) of circular tracks (`{\"layout\": \"circular\"}`).',\n              type: \"number\"\n            },\n            experimental: {\n              additionalProperties: false,\n              properties: {\n                mouseEvents: {\n                  anyOf: [\n                    {\n                      type: \"boolean\"\n                    },\n                    {\n                      $ref: \"#/definitions/MouseEventsDeep\"\n                    }\n                  ]\n                }\n              },\n              type: \"object\"\n            },\n            flipY: {\n              type: \"boolean\"\n            },\n            id: {\n              type: \"string\"\n            },\n            innerRadius: {\n              description: 'Specify the inner radius of tracks when (`{\"layout\": \"circular\"}`).',\n              type: \"number\"\n            },\n            linkingId: {\n              description: \"Specify an ID for [linking multiple views](http://gosling-lang.org/docs/user-interaction#linking-views)\",\n              type: \"string\"\n            },\n            mark: {\n              $ref: \"#/definitions/Mark\"\n            },\n            opacity: {\n              anyOf: [\n                {\n                  $ref: \"#/definitions/Opacity\"\n                },\n                {\n                  $ref: \"#/definitions/ChannelValue\"\n                }\n              ]\n            },\n            orientation: {\n              $ref: \"#/definitions/Orientation\",\n              description: \"Specify the orientation.\"\n            },\n            outerRadius: {\n              description: 'Specify the outer radius of tracks when `{\"layout\": \"circular\"}`.',\n              type: \"number\"\n            },\n            overlayOnPreviousTrack: {\n              type: \"boolean\"\n            },\n            overrideTemplate: {\n              type: \"boolean\"\n            },\n            prerelease: {\n              additionalProperties: false,\n              description: \"internal\",\n              type: \"object\"\n            },\n            row: {\n              anyOf: [\n                {\n                  $ref: \"#/definitions/Row\"\n                },\n                {\n                  $ref: \"#/definitions/ChannelValue\"\n                }\n              ]\n            },\n            size: {\n              anyOf: [\n                {\n                  $ref: \"#/definitions/Size\"\n                },\n                {\n                  $ref: \"#/definitions/ChannelValue\"\n                }\n              ]\n            },\n            spacing: {\n              description: '- If `{\"layout\": \"linear\"}`, specify the space between tracks in pixels;\\n\\n- If `{\"layout\": \"circular\"}`, specify the space between tracks in percentage ranging from 0 to 100.',\n              type: \"number\"\n            },\n            startAngle: {\n              description: 'Specify the start angle (in the range of [0, 360]) of circular tracks (`{\"layout\": \"circular\"}`).',\n              type: \"number\"\n            },\n            \"static\": {\n              description: \"Whether to disable [Zooming and Panning](http://gosling-lang.org/docs/user-interaction#zooming-and-panning), __Default:__ `false`.\",\n              type: \"boolean\"\n            },\n            stretch: {\n              type: \"boolean\"\n            },\n            stroke: {\n              anyOf: [\n                {\n                  $ref: \"#/definitions/Stroke\"\n                },\n                {\n                  $ref: \"#/definitions/ChannelValue\"\n                }\n              ]\n            },\n            strokeWidth: {\n              anyOf: [\n                {\n                  $ref: \"#/definitions/StrokeWidth\"\n                },\n                {\n                  $ref: \"#/definitions/ChannelValue\"\n                }\n              ]\n            },\n            style: {\n              $ref: \"#/definitions/Style\",\n              description: \"Define the [style](http://gosling-lang.org/docs/visual-channel#style-related-properties) of multive views. Will be overwritten by the style of children elements (e.g., view, track).\"\n            },\n            text: {\n              anyOf: [\n                {\n                  $ref: \"#/definitions/Text\"\n                },\n                {\n                  $ref: \"#/definitions/ChannelValue\"\n                }\n              ]\n            },\n            tooltip: {\n              items: {\n                $ref: \"#/definitions/Tooltip\"\n              },\n              type: \"array\"\n            },\n            visibility: {\n              items: {\n                $ref: \"#/definitions/VisibilityCondition\"\n              },\n              type: \"array\"\n            },\n            x: {\n              anyOf: [\n                {\n                  $ref: \"#/definitions/X\"\n                },\n                {\n                  $ref: \"#/definitions/ChannelValue\"\n                }\n              ]\n            },\n            x1: {\n              anyOf: [\n                {\n                  $ref: \"#/definitions/X\"\n                },\n                {\n                  $ref: \"#/definitions/ChannelValue\"\n                }\n              ]\n            },\n            x1e: {\n              anyOf: [\n                {\n                  $ref: \"#/definitions/X\"\n                },\n                {\n                  $ref: \"#/definitions/ChannelValue\"\n                }\n              ]\n            },\n            xAxis: {\n              $ref: \"#/definitions/AxisPosition\",\n              description: \"not supported\"\n            },\n            xDomain: {\n              anyOf: [\n                {\n                  $ref: \"#/definitions/DomainInterval\"\n                },\n                {\n                  $ref: \"#/definitions/DomainChrInterval\"\n                },\n                {\n                  $ref: \"#/definitions/DomainChr\"\n                }\n              ],\n              description: \"Specify the visible region of genomic x-axis\"\n            },\n            xOffset: {\n              description: \"Specify the x offset of views in the unit of pixels\",\n              type: \"number\"\n            },\n            xe: {\n              anyOf: [\n                {\n                  $ref: \"#/definitions/X\"\n                },\n                {\n                  $ref: \"#/definitions/ChannelValue\"\n                }\n              ]\n            },\n            y: {\n              anyOf: [\n                {\n                  $ref: \"#/definitions/Y\"\n                },\n                {\n                  $ref: \"#/definitions/ChannelValue\"\n                }\n              ]\n            },\n            y1: {\n              anyOf: [\n                {\n                  $ref: \"#/definitions/Y\"\n                },\n                {\n                  $ref: \"#/definitions/ChannelValue\"\n                }\n              ]\n            },\n            y1e: {\n              anyOf: [\n                {\n                  $ref: \"#/definitions/Y\"\n                },\n                {\n                  $ref: \"#/definitions/ChannelValue\"\n                }\n              ]\n            },\n            yDomain: {\n              anyOf: [\n                {\n                  $ref: \"#/definitions/DomainInterval\"\n                },\n                {\n                  $ref: \"#/definitions/DomainChrInterval\"\n                },\n                {\n                  $ref: \"#/definitions/DomainChr\"\n                }\n              ],\n              description: \"Specify the visible region of genomic y-axis\"\n            },\n            yOffset: {\n              description: \"Specify the y offset of views in the unit of pixels\",\n              type: \"number\"\n            },\n            ye: {\n              anyOf: [\n                {\n                  $ref: \"#/definitions/Y\"\n                },\n                {\n                  $ref: \"#/definitions/ChannelValue\"\n                }\n              ]\n            },\n            zoomLimits: {\n              $ref: \"#/definitions/ZoomLimits\"\n            }\n          },\n          type: \"object\"\n        },\n        type: \"array\"\n      },\n      overlayOnPreviousTrack: {\n        type: \"boolean\"\n      },\n      overrideTemplate: {\n        type: \"boolean\"\n      },\n      prerelease: {\n        additionalProperties: false,\n        description: \"internal\",\n        type: \"object\"\n      },\n      row: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/Row\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      size: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/Size\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      spacing: {\n        description: '- If `{\"layout\": \"linear\"}`, specify the space between tracks in pixels;\\n\\n- If `{\"layout\": \"circular\"}`, specify the space between tracks in percentage ranging from 0 to 100.',\n        type: \"number\"\n      },\n      startAngle: {\n        description: 'Specify the start angle (in the range of [0, 360]) of circular tracks (`{\"layout\": \"circular\"}`).',\n        type: \"number\"\n      },\n      \"static\": {\n        description: \"Whether to disable [Zooming and Panning](http://gosling-lang.org/docs/user-interaction#zooming-and-panning), __Default:__ `false`.\",\n        type: \"boolean\"\n      },\n      stretch: {\n        type: \"boolean\"\n      },\n      stroke: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/Stroke\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      strokeWidth: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/StrokeWidth\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      style: {\n        $ref: \"#/definitions/Style\",\n        description: \"Define the [style](http://gosling-lang.org/docs/visual-channel#style-related-properties) of multive views. Will be overwritten by the style of children elements (e.g., view, track).\"\n      },\n      subtitle: {\n        type: \"string\"\n      },\n      template: {\n        type: \"string\"\n      },\n      text: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/Text\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      title: {\n        description: \"If defined, will show the textual label on the left-top corner of a track.\",\n        type: \"string\"\n      },\n      tooltip: {\n        items: {\n          $ref: \"#/definitions/Tooltip\"\n        },\n        type: \"array\"\n      },\n      visibility: {\n        items: {\n          $ref: \"#/definitions/VisibilityCondition\"\n        },\n        type: \"array\"\n      },\n      width: {\n        description: \"Specify the track width in pixels.\",\n        type: \"number\"\n      },\n      x: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/X\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      x1: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/X\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      x1e: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/X\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      xAxis: {\n        $ref: \"#/definitions/AxisPosition\",\n        description: \"not supported\"\n      },\n      xDomain: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/DomainInterval\"\n          },\n          {\n            $ref: \"#/definitions/DomainChrInterval\"\n          },\n          {\n            $ref: \"#/definitions/DomainChr\"\n          }\n        ],\n        description: \"Specify the visible region of genomic x-axis\"\n      },\n      xOffset: {\n        description: \"Specify the x offset of views in the unit of pixels\",\n        type: \"number\"\n      },\n      xe: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/X\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      y: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/Y\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      y1: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/Y\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      y1e: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/Y\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      yDomain: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/DomainInterval\"\n          },\n          {\n            $ref: \"#/definitions/DomainChrInterval\"\n          },\n          {\n            $ref: \"#/definitions/DomainChr\"\n          }\n        ],\n        description: \"Specify the visible region of genomic y-axis\"\n      },\n      yOffset: {\n        description: \"Specify the y offset of views in the unit of pixels\",\n        type: \"number\"\n      },\n      ye: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/Y\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      zoomLimits: {\n        $ref: \"#/definitions/ZoomLimits\"\n      }\n    },\n    type: \"object\"\n  },\n  PluginData: {\n    additionalProperties: false,\n    description: \"A data spec to use plugin data fetcher that are defined externally\",\n    properties: {\n      name: {\n        description: \"The name of the plugin data that should match the `type` of a plugin data fetcher\",\n        type: \"string\"\n      },\n      options: {\n        description: \"All custom options used in the plugin data fetcher\",\n        type: \"object\"\n      },\n      type: {\n        \"const\": \"experimentalPlugin\",\n        type: \"string\"\n      }\n    },\n    required: [\n      \"type\",\n      \"name\",\n      \"options\"\n    ],\n    type: \"object\"\n  },\n  PredefinedColors: {\n    \"enum\": [\n      \"viridis\",\n      \"grey\",\n      \"spectral\",\n      \"warm\",\n      \"cividis\",\n      \"bupu\",\n      \"rdbu\",\n      \"hot\",\n      \"pink\"\n    ],\n    type: \"string\"\n  },\n  Range: {\n    anyOf: [\n      {\n        $ref: \"#/definitions/ValueExtent\"\n      },\n      {\n        $ref: \"#/definitions/PredefinedColors\"\n      }\n    ]\n  },\n  RangeFilter: {\n    additionalProperties: false,\n    properties: {\n      field: {\n        description: \"A filter is applied based on the values of the specified data field\",\n        type: \"string\"\n      },\n      inRange: {\n        description: \"Check whether the value is in a number range.\",\n        items: {\n          type: \"number\"\n        },\n        type: \"array\"\n      },\n      not: {\n        description: 'when `{\"not\": true}`, apply a NOT logical operation to the filter.\\n\\n__Default:__ `false`',\n        type: \"boolean\"\n      },\n      type: {\n        \"const\": \"filter\",\n        type: \"string\"\n      }\n    },\n    required: [\n      \"field\",\n      \"inRange\",\n      \"type\"\n    ],\n    type: \"object\"\n  },\n  ResponsiveSize: {\n    anyOf: [\n      {\n        type: \"boolean\"\n      },\n      {\n        additionalProperties: false,\n        properties: {\n          height: {\n            type: \"boolean\"\n          },\n          width: {\n            type: \"boolean\"\n          }\n        },\n        type: \"object\"\n      }\n    ]\n  },\n  Row: {\n    additionalProperties: false,\n    properties: {\n      clip: {\n        description: \"Clip row when the actual y value exceeds the max value of the y scale. Used only for bar marks at the moment. __Default__: `true`\",\n        type: \"boolean\"\n      },\n      domain: {\n        $ref: \"#/definitions/ValueExtent\",\n        description: \"Values of the data\"\n      },\n      field: {\n        description: \"Name of the data field\",\n        type: \"string\"\n      },\n      grid: {\n        description: \"Whether to display grid. __Default__: `false`\",\n        type: \"boolean\"\n      },\n      legend: {\n        description: \"Whether to display legend. __Default__: `false`\",\n        type: \"boolean\"\n      },\n      padding: {\n        description: \"Determines the size of inner white spaces on the top and bottom of individiual rows. __Default__: `0`\",\n        type: \"number\"\n      },\n      range: {\n        $ref: \"#/definitions/ValueExtent\",\n        description: \"Determine the start and end position of rendering area of this track along vertical axis. __Default__: `[0, height]`\"\n      },\n      type: {\n        \"const\": \"nominal\",\n        description: \"Specify the data type\",\n        type: \"string\"\n      }\n    },\n    type: \"object\"\n  },\n  SelectivityCondition: {\n    additionalProperties: false,\n    properties: {\n      measure: {\n        \"enum\": [\n          \"width\",\n          \"height\",\n          \"aspectRatio\"\n        ],\n        type: \"string\"\n      },\n      operation: {\n        $ref: \"#/definitions/LogicalOperation\"\n      },\n      target: {\n        description: \"Does the condition applied to the visualization itself or its container? __Default__: `'self'`\",\n        \"enum\": [\n          \"self\",\n          \"container\"\n        ],\n        type: \"string\"\n      },\n      threshold: {\n        description: \"Threshold in the unit of pixels.\",\n        type: \"number\"\n      }\n    },\n    required: [\n      \"operation\",\n      \"measure\",\n      \"threshold\"\n    ],\n    type: \"object\"\n  },\n  SingleTrack: {\n    additionalProperties: false,\n    properties: {\n      _assignedHeight: {\n        type: \"number\"\n      },\n      _assignedWidth: {\n        description: \"Internal: Used for responsive spec\",\n        type: \"number\"\n      },\n      _invalidTrack: {\n        description: \"internal\",\n        type: \"boolean\"\n      },\n      _renderingId: {\n        description: \"internal\",\n        type: \"string\"\n      },\n      assembly: {\n        $ref: \"#/definitions/Assembly\",\n        description: 'A string that specifies the genome builds to use. Currently support `\"hg38\"`, `\"hg19\"`, `\"hg18\"`, `\"hg17\"`, `\"hg16\"`, `\"mm10\"`, `\"mm9\"`, and `\"unknown\"`.\\n\\n__Note:__: with `\"unknown\"` assembly, genomic axes do not show chrN: in labels.'\n      },\n      baselineY: {\n        type: \"number\"\n      },\n      centerRadius: {\n        description: \"Proportion of the radius of the center white space.\\n\\n__Default:__ `0.3`\",\n        type: \"number\"\n      },\n      color: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/Color\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      data: {\n        $ref: \"#/definitions/DataDeep\"\n      },\n      dataTransform: {\n        items: {\n          $ref: \"#/definitions/DataTransform\"\n        },\n        type: \"array\"\n      },\n      displacement: {\n        $ref: \"#/definitions/Displacement\"\n      },\n      endAngle: {\n        description: 'Specify the end angle (in the range of [0, 360]) of circular tracks (`{\"layout\": \"circular\"}`).',\n        type: \"number\"\n      },\n      experimental: {\n        additionalProperties: false,\n        properties: {\n          mouseEvents: {\n            anyOf: [\n              {\n                type: \"boolean\"\n              },\n              {\n                $ref: \"#/definitions/MouseEventsDeep\"\n              }\n            ]\n          }\n        },\n        type: \"object\"\n      },\n      flipY: {\n        type: \"boolean\"\n      },\n      height: {\n        description: \"Specify the track height in pixels.\",\n        type: \"number\"\n      },\n      id: {\n        type: \"string\"\n      },\n      innerRadius: {\n        description: 'Specify the inner radius of tracks when (`{\"layout\": \"circular\"}`).',\n        type: \"number\"\n      },\n      layout: {\n        $ref: \"#/definitions/Layout\",\n        description: \"Specify the layout type of all tracks.\"\n      },\n      linkingId: {\n        description: \"Specify an ID for [linking multiple views](http://gosling-lang.org/docs/user-interaction#linking-views)\",\n        type: \"string\"\n      },\n      mark: {\n        $ref: \"#/definitions/Mark\"\n      },\n      opacity: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/Opacity\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      orientation: {\n        $ref: \"#/definitions/Orientation\",\n        description: \"Specify the orientation.\"\n      },\n      outerRadius: {\n        description: 'Specify the outer radius of tracks when `{\"layout\": \"circular\"}`.',\n        type: \"number\"\n      },\n      overlayOnPreviousTrack: {\n        type: \"boolean\"\n      },\n      overrideTemplate: {\n        type: \"boolean\"\n      },\n      prerelease: {\n        additionalProperties: false,\n        description: \"internal\",\n        type: \"object\"\n      },\n      row: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/Row\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      size: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/Size\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      spacing: {\n        description: '- If `{\"layout\": \"linear\"}`, specify the space between tracks in pixels;\\n\\n- If `{\"layout\": \"circular\"}`, specify the space between tracks in percentage ranging from 0 to 100.',\n        type: \"number\"\n      },\n      startAngle: {\n        description: 'Specify the start angle (in the range of [0, 360]) of circular tracks (`{\"layout\": \"circular\"}`).',\n        type: \"number\"\n      },\n      \"static\": {\n        description: \"Whether to disable [Zooming and Panning](http://gosling-lang.org/docs/user-interaction#zooming-and-panning), __Default:__ `false`.\",\n        type: \"boolean\"\n      },\n      stretch: {\n        type: \"boolean\"\n      },\n      stroke: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/Stroke\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      strokeWidth: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/StrokeWidth\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      style: {\n        $ref: \"#/definitions/Style\",\n        description: \"Define the [style](http://gosling-lang.org/docs/visual-channel#style-related-properties) of multive views. Will be overwritten by the style of children elements (e.g., view, track).\"\n      },\n      subtitle: {\n        type: \"string\"\n      },\n      text: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/Text\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      title: {\n        description: \"If defined, will show the textual label on the left-top corner of a track.\",\n        type: \"string\"\n      },\n      tooltip: {\n        items: {\n          $ref: \"#/definitions/Tooltip\"\n        },\n        type: \"array\"\n      },\n      visibility: {\n        items: {\n          $ref: \"#/definitions/VisibilityCondition\"\n        },\n        type: \"array\"\n      },\n      width: {\n        description: \"Specify the track width in pixels.\",\n        type: \"number\"\n      },\n      x: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/X\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      x1: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/X\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      x1e: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/X\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      xAxis: {\n        $ref: \"#/definitions/AxisPosition\",\n        description: \"not supported\"\n      },\n      xDomain: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/DomainInterval\"\n          },\n          {\n            $ref: \"#/definitions/DomainChrInterval\"\n          },\n          {\n            $ref: \"#/definitions/DomainChr\"\n          }\n        ],\n        description: \"Specify the visible region of genomic x-axis\"\n      },\n      xOffset: {\n        description: \"Specify the x offset of views in the unit of pixels\",\n        type: \"number\"\n      },\n      xe: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/X\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      y: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/Y\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      y1: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/Y\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      y1e: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/Y\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      yDomain: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/DomainInterval\"\n          },\n          {\n            $ref: \"#/definitions/DomainChrInterval\"\n          },\n          {\n            $ref: \"#/definitions/DomainChr\"\n          }\n        ],\n        description: \"Specify the visible region of genomic y-axis\"\n      },\n      yOffset: {\n        description: \"Specify the y offset of views in the unit of pixels\",\n        type: \"number\"\n      },\n      ye: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/Y\"\n          },\n          {\n            $ref: \"#/definitions/ChannelValue\"\n          }\n        ]\n      },\n      zoomLimits: {\n        $ref: \"#/definitions/ZoomLimits\"\n      }\n    },\n    required: [\n      \"data\",\n      \"height\",\n      \"mark\",\n      \"width\"\n    ],\n    type: \"object\"\n  },\n  SingleView: {\n    anyOf: [\n      {\n        additionalProperties: false,\n        properties: {\n          _assignedHeight: {\n            type: \"number\"\n          },\n          _assignedWidth: {\n            description: \"Internal: Used for responsive spec\",\n            type: \"number\"\n          },\n          _invalidTrack: {\n            description: \"internal\",\n            type: \"boolean\"\n          },\n          _renderingId: {\n            description: \"internal\",\n            type: \"string\"\n          },\n          alignment: {\n            \"const\": \"overlay\",\n            type: \"string\"\n          },\n          assembly: {\n            $ref: \"#/definitions/Assembly\",\n            description: 'A string that specifies the genome builds to use. Currently support `\"hg38\"`, `\"hg19\"`, `\"hg18\"`, `\"hg17\"`, `\"hg16\"`, `\"mm10\"`, `\"mm9\"`, and `\"unknown\"`.\\n\\n__Note:__: with `\"unknown\"` assembly, genomic axes do not show chrN: in labels.'\n          },\n          baselineY: {\n            type: \"number\"\n          },\n          centerRadius: {\n            description: \"Proportion of the radius of the center white space.\\n\\n__Default:__ `0.3`\",\n            type: \"number\"\n          },\n          color: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/Color\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          data: {\n            $ref: \"#/definitions/DataDeep\"\n          },\n          dataTransform: {\n            items: {\n              $ref: \"#/definitions/DataTransform\"\n            },\n            type: \"array\"\n          },\n          displacement: {\n            $ref: \"#/definitions/Displacement\"\n          },\n          endAngle: {\n            description: 'Specify the end angle (in the range of [0, 360]) of circular tracks (`{\"layout\": \"circular\"}`).',\n            type: \"number\"\n          },\n          experimental: {\n            additionalProperties: false,\n            properties: {\n              mouseEvents: {\n                anyOf: [\n                  {\n                    type: \"boolean\"\n                  },\n                  {\n                    $ref: \"#/definitions/MouseEventsDeep\"\n                  }\n                ]\n              }\n            },\n            type: \"object\"\n          },\n          flipY: {\n            type: \"boolean\"\n          },\n          height: {\n            description: \"Specify the track height in pixels.\",\n            type: \"number\"\n          },\n          id: {\n            type: \"string\"\n          },\n          innerRadius: {\n            description: 'Specify the inner radius of tracks when (`{\"layout\": \"circular\"}`).',\n            type: \"number\"\n          },\n          layout: {\n            $ref: \"#/definitions/Layout\",\n            description: \"Specify the layout type of all tracks.\"\n          },\n          linkingId: {\n            description: \"Specify an ID for [linking multiple views](http://gosling-lang.org/docs/user-interaction#linking-views)\",\n            type: \"string\"\n          },\n          mark: {\n            $ref: \"#/definitions/Mark\"\n          },\n          opacity: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/Opacity\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          orientation: {\n            $ref: \"#/definitions/Orientation\",\n            description: \"Specify the orientation.\"\n          },\n          outerRadius: {\n            description: 'Specify the outer radius of tracks when `{\"layout\": \"circular\"}`.',\n            type: \"number\"\n          },\n          overlayOnPreviousTrack: {\n            type: \"boolean\"\n          },\n          overrideTemplate: {\n            type: \"boolean\"\n          },\n          prerelease: {\n            additionalProperties: false,\n            description: \"internal\",\n            type: \"object\"\n          },\n          responsiveSpec: {\n            items: {\n              additionalProperties: false,\n              properties: {\n                selectivity: {\n                  items: {\n                    $ref: \"#/definitions/SelectivityCondition\"\n                  },\n                  type: \"array\"\n                },\n                spec: {\n                  additionalProperties: false,\n                  properties: {\n                    _assignedHeight: {\n                      type: \"number\"\n                    },\n                    _assignedWidth: {\n                      description: \"Internal: Used for responsive spec\",\n                      type: \"number\"\n                    },\n                    _invalidTrack: {\n                      description: \"internal\",\n                      type: \"boolean\"\n                    },\n                    _renderingId: {\n                      description: \"internal\",\n                      type: \"string\"\n                    },\n                    alignment: {\n                      \"enum\": [\n                        \"overlay\",\n                        \"stack\"\n                      ],\n                      type: \"string\"\n                    },\n                    assembly: {\n                      $ref: \"#/definitions/Assembly\",\n                      description: 'A string that specifies the genome builds to use. Currently support `\"hg38\"`, `\"hg19\"`, `\"hg18\"`, `\"hg17\"`, `\"hg16\"`, `\"mm10\"`, `\"mm9\"`, and `\"unknown\"`.\\n\\n__Note:__: with `\"unknown\"` assembly, genomic axes do not show chrN: in labels.'\n                    },\n                    baselineY: {\n                      type: \"number\"\n                    },\n                    centerRadius: {\n                      description: \"Proportion of the radius of the center white space.\\n\\n__Default:__ `0.3`\",\n                      type: \"number\"\n                    },\n                    color: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Color\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    data: {\n                      $ref: \"#/definitions/DataDeep\"\n                    },\n                    dataTransform: {\n                      items: {\n                        $ref: \"#/definitions/DataTransform\"\n                      },\n                      type: \"array\"\n                    },\n                    displacement: {\n                      $ref: \"#/definitions/Displacement\"\n                    },\n                    endAngle: {\n                      description: 'Specify the end angle (in the range of [0, 360]) of circular tracks (`{\"layout\": \"circular\"}`).',\n                      type: \"number\"\n                    },\n                    experimental: {\n                      additionalProperties: false,\n                      properties: {\n                        mouseEvents: {\n                          anyOf: [\n                            {\n                              type: \"boolean\"\n                            },\n                            {\n                              $ref: \"#/definitions/MouseEventsDeep\"\n                            }\n                          ]\n                        }\n                      },\n                      type: \"object\"\n                    },\n                    flipY: {\n                      type: \"boolean\"\n                    },\n                    height: {\n                      description: \"Specify the track height in pixels.\",\n                      type: \"number\"\n                    },\n                    id: {\n                      type: \"string\"\n                    },\n                    innerRadius: {\n                      description: 'Specify the inner radius of tracks when (`{\"layout\": \"circular\"}`).',\n                      type: \"number\"\n                    },\n                    layout: {\n                      $ref: \"#/definitions/Layout\",\n                      description: \"Specify the layout type of all tracks.\"\n                    },\n                    linkingId: {\n                      description: \"Specify an ID for [linking multiple views](http://gosling-lang.org/docs/user-interaction#linking-views)\",\n                      type: \"string\"\n                    },\n                    mark: {\n                      $ref: \"#/definitions/Mark\"\n                    },\n                    opacity: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Opacity\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    orientation: {\n                      $ref: \"#/definitions/Orientation\",\n                      description: \"Specify the orientation.\"\n                    },\n                    outerRadius: {\n                      description: 'Specify the outer radius of tracks when `{\"layout\": \"circular\"}`.',\n                      type: \"number\"\n                    },\n                    overlayOnPreviousTrack: {\n                      type: \"boolean\"\n                    },\n                    overrideTemplate: {\n                      type: \"boolean\"\n                    },\n                    prerelease: {\n                      additionalProperties: false,\n                      description: \"internal\",\n                      type: \"object\"\n                    },\n                    row: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Row\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    size: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Size\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    spacing: {\n                      description: '- If `{\"layout\": \"linear\"}`, specify the space between tracks in pixels;\\n\\n- If `{\"layout\": \"circular\"}`, specify the space between tracks in percentage ranging from 0 to 100.',\n                      type: \"number\"\n                    },\n                    startAngle: {\n                      description: 'Specify the start angle (in the range of [0, 360]) of circular tracks (`{\"layout\": \"circular\"}`).',\n                      type: \"number\"\n                    },\n                    \"static\": {\n                      description: \"Whether to disable [Zooming and Panning](http://gosling-lang.org/docs/user-interaction#zooming-and-panning), __Default:__ `false`.\",\n                      type: \"boolean\"\n                    },\n                    stretch: {\n                      type: \"boolean\"\n                    },\n                    stroke: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Stroke\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    strokeWidth: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/StrokeWidth\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    style: {\n                      $ref: \"#/definitions/Style\",\n                      description: \"Define the [style](http://gosling-lang.org/docs/visual-channel#style-related-properties) of multive views. Will be overwritten by the style of children elements (e.g., view, track).\"\n                    },\n                    subtitle: {\n                      type: \"string\"\n                    },\n                    text: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Text\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    title: {\n                      description: \"If defined, will show the textual label on the left-top corner of a track.\",\n                      type: \"string\"\n                    },\n                    tooltip: {\n                      items: {\n                        $ref: \"#/definitions/Tooltip\"\n                      },\n                      type: \"array\"\n                    },\n                    tracks: {\n                      anyOf: [\n                        {\n                          items: {\n                            $ref: \"#/definitions/PartialTrack\"\n                          },\n                          type: \"array\"\n                        },\n                        {\n                          items: {\n                            anyOf: [\n                              {\n                                $ref: \"#/definitions/PartialTrack\"\n                              },\n                              {\n                                $ref: \"#/definitions/OverlaidTracks\"\n                              }\n                            ]\n                          },\n                          type: \"array\"\n                        }\n                      ]\n                    },\n                    visibility: {\n                      items: {\n                        $ref: \"#/definitions/VisibilityCondition\"\n                      },\n                      type: \"array\"\n                    },\n                    width: {\n                      description: \"Specify the track width in pixels.\",\n                      type: \"number\"\n                    },\n                    x: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/X\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    x1: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/X\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    x1e: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/X\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    xAxis: {\n                      $ref: \"#/definitions/AxisPosition\",\n                      description: \"not supported\"\n                    },\n                    xDomain: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/DomainInterval\"\n                        },\n                        {\n                          $ref: \"#/definitions/DomainChrInterval\"\n                        },\n                        {\n                          $ref: \"#/definitions/DomainChr\"\n                        }\n                      ],\n                      description: \"Specify the visible region of genomic x-axis\"\n                    },\n                    xOffset: {\n                      description: \"Specify the x offset of views in the unit of pixels\",\n                      type: \"number\"\n                    },\n                    xe: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/X\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    y: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Y\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    y1: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Y\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    y1e: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Y\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    yDomain: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/DomainInterval\"\n                        },\n                        {\n                          $ref: \"#/definitions/DomainChrInterval\"\n                        },\n                        {\n                          $ref: \"#/definitions/DomainChr\"\n                        }\n                      ],\n                      description: \"Specify the visible region of genomic y-axis\"\n                    },\n                    yOffset: {\n                      description: \"Specify the y offset of views in the unit of pixels\",\n                      type: \"number\"\n                    },\n                    ye: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Y\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    zoomLimits: {\n                      $ref: \"#/definitions/ZoomLimits\"\n                    }\n                  },\n                  type: \"object\"\n                }\n              },\n              required: [\n                \"spec\",\n                \"selectivity\"\n              ],\n              type: \"object\"\n            },\n            type: \"array\"\n          },\n          row: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/Row\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          size: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/Size\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          spacing: {\n            description: '- If `{\"layout\": \"linear\"}`, specify the space between tracks in pixels;\\n\\n- If `{\"layout\": \"circular\"}`, specify the space between tracks in percentage ranging from 0 to 100.',\n            type: \"number\"\n          },\n          startAngle: {\n            description: 'Specify the start angle (in the range of [0, 360]) of circular tracks (`{\"layout\": \"circular\"}`).',\n            type: \"number\"\n          },\n          \"static\": {\n            description: \"Whether to disable [Zooming and Panning](http://gosling-lang.org/docs/user-interaction#zooming-and-panning), __Default:__ `false`.\",\n            type: \"boolean\"\n          },\n          stretch: {\n            type: \"boolean\"\n          },\n          stroke: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/Stroke\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          strokeWidth: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/StrokeWidth\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          style: {\n            $ref: \"#/definitions/Style\",\n            description: \"Define the [style](http://gosling-lang.org/docs/visual-channel#style-related-properties) of multive views. Will be overwritten by the style of children elements (e.g., view, track).\"\n          },\n          subtitle: {\n            type: \"string\"\n          },\n          text: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/Text\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          title: {\n            description: \"If defined, will show the textual label on the left-top corner of a track.\",\n            type: \"string\"\n          },\n          tooltip: {\n            items: {\n              $ref: \"#/definitions/Tooltip\"\n            },\n            type: \"array\"\n          },\n          tracks: {\n            items: {\n              $ref: \"#/definitions/PartialTrack\"\n            },\n            type: \"array\"\n          },\n          visibility: {\n            items: {\n              $ref: \"#/definitions/VisibilityCondition\"\n            },\n            type: \"array\"\n          },\n          width: {\n            description: \"Specify the track width in pixels.\",\n            type: \"number\"\n          },\n          x: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/X\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          x1: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/X\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          x1e: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/X\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          xAxis: {\n            $ref: \"#/definitions/AxisPosition\",\n            description: \"not supported\"\n          },\n          xDomain: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/DomainInterval\"\n              },\n              {\n                $ref: \"#/definitions/DomainChrInterval\"\n              },\n              {\n                $ref: \"#/definitions/DomainChr\"\n              }\n            ],\n            description: \"Specify the visible region of genomic x-axis\"\n          },\n          xOffset: {\n            description: \"Specify the x offset of views in the unit of pixels\",\n            type: \"number\"\n          },\n          xe: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/X\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          y: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/Y\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          y1: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/Y\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          y1e: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/Y\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          yDomain: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/DomainInterval\"\n              },\n              {\n                $ref: \"#/definitions/DomainChrInterval\"\n              },\n              {\n                $ref: \"#/definitions/DomainChr\"\n              }\n            ],\n            description: \"Specify the visible region of genomic y-axis\"\n          },\n          yOffset: {\n            description: \"Specify the y offset of views in the unit of pixels\",\n            type: \"number\"\n          },\n          ye: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/Y\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          zoomLimits: {\n            $ref: \"#/definitions/ZoomLimits\"\n          }\n        },\n        required: [\n          \"alignment\",\n          \"height\",\n          \"tracks\",\n          \"width\"\n        ],\n        type: \"object\"\n      },\n      {\n        additionalProperties: false,\n        properties: {\n          _assignedHeight: {\n            type: \"number\"\n          },\n          _assignedWidth: {\n            description: \"Internal: Used for responsive spec\",\n            type: \"number\"\n          },\n          _invalidTrack: {\n            description: \"internal\",\n            type: \"boolean\"\n          },\n          _renderingId: {\n            description: \"internal\",\n            type: \"string\"\n          },\n          alignment: {\n            \"const\": \"stack\",\n            type: \"string\"\n          },\n          assembly: {\n            $ref: \"#/definitions/Assembly\",\n            description: 'A string that specifies the genome builds to use. Currently support `\"hg38\"`, `\"hg19\"`, `\"hg18\"`, `\"hg17\"`, `\"hg16\"`, `\"mm10\"`, `\"mm9\"`, and `\"unknown\"`.\\n\\n__Note:__: with `\"unknown\"` assembly, genomic axes do not show chrN: in labels.'\n          },\n          baselineY: {\n            type: \"number\"\n          },\n          centerRadius: {\n            description: \"Proportion of the radius of the center white space.\\n\\n__Default:__ `0.3`\",\n            type: \"number\"\n          },\n          color: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/Color\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          data: {\n            $ref: \"#/definitions/DataDeep\"\n          },\n          dataTransform: {\n            items: {\n              $ref: \"#/definitions/DataTransform\"\n            },\n            type: \"array\"\n          },\n          displacement: {\n            $ref: \"#/definitions/Displacement\"\n          },\n          endAngle: {\n            description: 'Specify the end angle (in the range of [0, 360]) of circular tracks (`{\"layout\": \"circular\"}`).',\n            type: \"number\"\n          },\n          experimental: {\n            additionalProperties: false,\n            properties: {\n              mouseEvents: {\n                anyOf: [\n                  {\n                    type: \"boolean\"\n                  },\n                  {\n                    $ref: \"#/definitions/MouseEventsDeep\"\n                  }\n                ]\n              }\n            },\n            type: \"object\"\n          },\n          flipY: {\n            type: \"boolean\"\n          },\n          height: {\n            description: \"Specify the track height in pixels.\",\n            type: \"number\"\n          },\n          id: {\n            type: \"string\"\n          },\n          innerRadius: {\n            description: 'Specify the inner radius of tracks when (`{\"layout\": \"circular\"}`).',\n            type: \"number\"\n          },\n          layout: {\n            $ref: \"#/definitions/Layout\",\n            description: \"Specify the layout type of all tracks.\"\n          },\n          linkingId: {\n            description: \"Specify an ID for [linking multiple views](http://gosling-lang.org/docs/user-interaction#linking-views)\",\n            type: \"string\"\n          },\n          mark: {\n            $ref: \"#/definitions/Mark\"\n          },\n          opacity: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/Opacity\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          orientation: {\n            $ref: \"#/definitions/Orientation\",\n            description: \"Specify the orientation.\"\n          },\n          outerRadius: {\n            description: 'Specify the outer radius of tracks when `{\"layout\": \"circular\"}`.',\n            type: \"number\"\n          },\n          overlayOnPreviousTrack: {\n            type: \"boolean\"\n          },\n          overrideTemplate: {\n            type: \"boolean\"\n          },\n          prerelease: {\n            additionalProperties: false,\n            description: \"internal\",\n            type: \"object\"\n          },\n          responsiveSpec: {\n            items: {\n              additionalProperties: false,\n              properties: {\n                selectivity: {\n                  items: {\n                    $ref: \"#/definitions/SelectivityCondition\"\n                  },\n                  type: \"array\"\n                },\n                spec: {\n                  additionalProperties: false,\n                  properties: {\n                    _assignedHeight: {\n                      type: \"number\"\n                    },\n                    _assignedWidth: {\n                      description: \"Internal: Used for responsive spec\",\n                      type: \"number\"\n                    },\n                    _invalidTrack: {\n                      description: \"internal\",\n                      type: \"boolean\"\n                    },\n                    _renderingId: {\n                      description: \"internal\",\n                      type: \"string\"\n                    },\n                    alignment: {\n                      \"enum\": [\n                        \"overlay\",\n                        \"stack\"\n                      ],\n                      type: \"string\"\n                    },\n                    assembly: {\n                      $ref: \"#/definitions/Assembly\",\n                      description: 'A string that specifies the genome builds to use. Currently support `\"hg38\"`, `\"hg19\"`, `\"hg18\"`, `\"hg17\"`, `\"hg16\"`, `\"mm10\"`, `\"mm9\"`, and `\"unknown\"`.\\n\\n__Note:__: with `\"unknown\"` assembly, genomic axes do not show chrN: in labels.'\n                    },\n                    baselineY: {\n                      type: \"number\"\n                    },\n                    centerRadius: {\n                      description: \"Proportion of the radius of the center white space.\\n\\n__Default:__ `0.3`\",\n                      type: \"number\"\n                    },\n                    color: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Color\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    data: {\n                      $ref: \"#/definitions/DataDeep\"\n                    },\n                    dataTransform: {\n                      items: {\n                        $ref: \"#/definitions/DataTransform\"\n                      },\n                      type: \"array\"\n                    },\n                    displacement: {\n                      $ref: \"#/definitions/Displacement\"\n                    },\n                    endAngle: {\n                      description: 'Specify the end angle (in the range of [0, 360]) of circular tracks (`{\"layout\": \"circular\"}`).',\n                      type: \"number\"\n                    },\n                    experimental: {\n                      additionalProperties: false,\n                      properties: {\n                        mouseEvents: {\n                          anyOf: [\n                            {\n                              type: \"boolean\"\n                            },\n                            {\n                              $ref: \"#/definitions/MouseEventsDeep\"\n                            }\n                          ]\n                        }\n                      },\n                      type: \"object\"\n                    },\n                    flipY: {\n                      type: \"boolean\"\n                    },\n                    height: {\n                      description: \"Specify the track height in pixels.\",\n                      type: \"number\"\n                    },\n                    id: {\n                      type: \"string\"\n                    },\n                    innerRadius: {\n                      description: 'Specify the inner radius of tracks when (`{\"layout\": \"circular\"}`).',\n                      type: \"number\"\n                    },\n                    layout: {\n                      $ref: \"#/definitions/Layout\",\n                      description: \"Specify the layout type of all tracks.\"\n                    },\n                    linkingId: {\n                      description: \"Specify an ID for [linking multiple views](http://gosling-lang.org/docs/user-interaction#linking-views)\",\n                      type: \"string\"\n                    },\n                    mark: {\n                      $ref: \"#/definitions/Mark\"\n                    },\n                    opacity: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Opacity\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    orientation: {\n                      $ref: \"#/definitions/Orientation\",\n                      description: \"Specify the orientation.\"\n                    },\n                    outerRadius: {\n                      description: 'Specify the outer radius of tracks when `{\"layout\": \"circular\"}`.',\n                      type: \"number\"\n                    },\n                    overlayOnPreviousTrack: {\n                      type: \"boolean\"\n                    },\n                    overrideTemplate: {\n                      type: \"boolean\"\n                    },\n                    prerelease: {\n                      additionalProperties: false,\n                      description: \"internal\",\n                      type: \"object\"\n                    },\n                    row: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Row\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    size: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Size\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    spacing: {\n                      description: '- If `{\"layout\": \"linear\"}`, specify the space between tracks in pixels;\\n\\n- If `{\"layout\": \"circular\"}`, specify the space between tracks in percentage ranging from 0 to 100.',\n                      type: \"number\"\n                    },\n                    startAngle: {\n                      description: 'Specify the start angle (in the range of [0, 360]) of circular tracks (`{\"layout\": \"circular\"}`).',\n                      type: \"number\"\n                    },\n                    \"static\": {\n                      description: \"Whether to disable [Zooming and Panning](http://gosling-lang.org/docs/user-interaction#zooming-and-panning), __Default:__ `false`.\",\n                      type: \"boolean\"\n                    },\n                    stretch: {\n                      type: \"boolean\"\n                    },\n                    stroke: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Stroke\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    strokeWidth: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/StrokeWidth\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    style: {\n                      $ref: \"#/definitions/Style\",\n                      description: \"Define the [style](http://gosling-lang.org/docs/visual-channel#style-related-properties) of multive views. Will be overwritten by the style of children elements (e.g., view, track).\"\n                    },\n                    subtitle: {\n                      type: \"string\"\n                    },\n                    text: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Text\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    title: {\n                      description: \"If defined, will show the textual label on the left-top corner of a track.\",\n                      type: \"string\"\n                    },\n                    tooltip: {\n                      items: {\n                        $ref: \"#/definitions/Tooltip\"\n                      },\n                      type: \"array\"\n                    },\n                    tracks: {\n                      anyOf: [\n                        {\n                          items: {\n                            $ref: \"#/definitions/PartialTrack\"\n                          },\n                          type: \"array\"\n                        },\n                        {\n                          items: {\n                            anyOf: [\n                              {\n                                $ref: \"#/definitions/PartialTrack\"\n                              },\n                              {\n                                $ref: \"#/definitions/OverlaidTracks\"\n                              }\n                            ]\n                          },\n                          type: \"array\"\n                        }\n                      ]\n                    },\n                    visibility: {\n                      items: {\n                        $ref: \"#/definitions/VisibilityCondition\"\n                      },\n                      type: \"array\"\n                    },\n                    width: {\n                      description: \"Specify the track width in pixels.\",\n                      type: \"number\"\n                    },\n                    x: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/X\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    x1: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/X\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    x1e: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/X\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    xAxis: {\n                      $ref: \"#/definitions/AxisPosition\",\n                      description: \"not supported\"\n                    },\n                    xDomain: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/DomainInterval\"\n                        },\n                        {\n                          $ref: \"#/definitions/DomainChrInterval\"\n                        },\n                        {\n                          $ref: \"#/definitions/DomainChr\"\n                        }\n                      ],\n                      description: \"Specify the visible region of genomic x-axis\"\n                    },\n                    xOffset: {\n                      description: \"Specify the x offset of views in the unit of pixels\",\n                      type: \"number\"\n                    },\n                    xe: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/X\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    y: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Y\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    y1: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Y\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    y1e: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Y\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    yDomain: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/DomainInterval\"\n                        },\n                        {\n                          $ref: \"#/definitions/DomainChrInterval\"\n                        },\n                        {\n                          $ref: \"#/definitions/DomainChr\"\n                        }\n                      ],\n                      description: \"Specify the visible region of genomic y-axis\"\n                    },\n                    yOffset: {\n                      description: \"Specify the y offset of views in the unit of pixels\",\n                      type: \"number\"\n                    },\n                    ye: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Y\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    zoomLimits: {\n                      $ref: \"#/definitions/ZoomLimits\"\n                    }\n                  },\n                  type: \"object\"\n                }\n              },\n              required: [\n                \"spec\",\n                \"selectivity\"\n              ],\n              type: \"object\"\n            },\n            type: \"array\"\n          },\n          row: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/Row\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          size: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/Size\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          spacing: {\n            description: '- If `{\"layout\": \"linear\"}`, specify the space between tracks in pixels;\\n\\n- If `{\"layout\": \"circular\"}`, specify the space between tracks in percentage ranging from 0 to 100.',\n            type: \"number\"\n          },\n          startAngle: {\n            description: 'Specify the start angle (in the range of [0, 360]) of circular tracks (`{\"layout\": \"circular\"}`).',\n            type: \"number\"\n          },\n          \"static\": {\n            description: \"Whether to disable [Zooming and Panning](http://gosling-lang.org/docs/user-interaction#zooming-and-panning), __Default:__ `false`.\",\n            type: \"boolean\"\n          },\n          stretch: {\n            type: \"boolean\"\n          },\n          stroke: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/Stroke\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          strokeWidth: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/StrokeWidth\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          style: {\n            $ref: \"#/definitions/Style\",\n            description: \"Define the [style](http://gosling-lang.org/docs/visual-channel#style-related-properties) of multive views. Will be overwritten by the style of children elements (e.g., view, track).\"\n          },\n          subtitle: {\n            type: \"string\"\n          },\n          text: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/Text\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          title: {\n            description: \"If defined, will show the textual label on the left-top corner of a track.\",\n            type: \"string\"\n          },\n          tooltip: {\n            items: {\n              $ref: \"#/definitions/Tooltip\"\n            },\n            type: \"array\"\n          },\n          tracks: {\n            items: {\n              anyOf: [\n                {\n                  $ref: \"#/definitions/PartialTrack\"\n                },\n                {\n                  $ref: \"#/definitions/OverlaidTracks\"\n                }\n              ]\n            },\n            type: \"array\"\n          },\n          visibility: {\n            items: {\n              $ref: \"#/definitions/VisibilityCondition\"\n            },\n            type: \"array\"\n          },\n          width: {\n            description: \"Specify the track width in pixels.\",\n            type: \"number\"\n          },\n          x: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/X\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          x1: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/X\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          x1e: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/X\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          xAxis: {\n            $ref: \"#/definitions/AxisPosition\",\n            description: \"not supported\"\n          },\n          xDomain: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/DomainInterval\"\n              },\n              {\n                $ref: \"#/definitions/DomainChrInterval\"\n              },\n              {\n                $ref: \"#/definitions/DomainChr\"\n              }\n            ],\n            description: \"Specify the visible region of genomic x-axis\"\n          },\n          xOffset: {\n            description: \"Specify the x offset of views in the unit of pixels\",\n            type: \"number\"\n          },\n          xe: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/X\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          y: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/Y\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          y1: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/Y\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          y1e: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/Y\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          yDomain: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/DomainInterval\"\n              },\n              {\n                $ref: \"#/definitions/DomainChrInterval\"\n              },\n              {\n                $ref: \"#/definitions/DomainChr\"\n              }\n            ],\n            description: \"Specify the visible region of genomic y-axis\"\n          },\n          yOffset: {\n            description: \"Specify the y offset of views in the unit of pixels\",\n            type: \"number\"\n          },\n          ye: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/Y\"\n              },\n              {\n                $ref: \"#/definitions/ChannelValue\"\n              }\n            ]\n          },\n          zoomLimits: {\n            $ref: \"#/definitions/ZoomLimits\"\n          }\n        },\n        required: [\n          \"tracks\"\n        ],\n        type: \"object\"\n      },\n      {\n        additionalProperties: false,\n        properties: {\n          _assignedHeight: {\n            type: \"number\"\n          },\n          _assignedWidth: {\n            description: \"Internal: Used for responsive spec\",\n            type: \"number\"\n          },\n          assembly: {\n            $ref: \"#/definitions/Assembly\",\n            description: 'A string that specifies the genome builds to use. Currently support `\"hg38\"`, `\"hg19\"`, `\"hg18\"`, `\"hg17\"`, `\"hg16\"`, `\"mm10\"`, `\"mm9\"`, and `\"unknown\"`.\\n\\n__Note:__: with `\"unknown\"` assembly, genomic axes do not show chrN: in labels.'\n          },\n          centerRadius: {\n            description: \"Proportion of the radius of the center white space.\\n\\n__Default:__ `0.3`\",\n            type: \"number\"\n          },\n          layout: {\n            $ref: \"#/definitions/Layout\",\n            description: \"Specify the layout type of all tracks.\"\n          },\n          linkingId: {\n            description: \"Specify an ID for [linking multiple views](http://gosling-lang.org/docs/user-interaction#linking-views)\",\n            type: \"string\"\n          },\n          orientation: {\n            $ref: \"#/definitions/Orientation\",\n            description: \"Specify the orientation.\"\n          },\n          responsiveSpec: {\n            items: {\n              additionalProperties: false,\n              properties: {\n                selectivity: {\n                  items: {\n                    $ref: \"#/definitions/SelectivityCondition\"\n                  },\n                  type: \"array\"\n                },\n                spec: {\n                  additionalProperties: false,\n                  properties: {\n                    _assignedHeight: {\n                      type: \"number\"\n                    },\n                    _assignedWidth: {\n                      description: \"Internal: Used for responsive spec\",\n                      type: \"number\"\n                    },\n                    _invalidTrack: {\n                      description: \"internal\",\n                      type: \"boolean\"\n                    },\n                    _renderingId: {\n                      description: \"internal\",\n                      type: \"string\"\n                    },\n                    alignment: {\n                      \"enum\": [\n                        \"overlay\",\n                        \"stack\"\n                      ],\n                      type: \"string\"\n                    },\n                    assembly: {\n                      $ref: \"#/definitions/Assembly\",\n                      description: 'A string that specifies the genome builds to use. Currently support `\"hg38\"`, `\"hg19\"`, `\"hg18\"`, `\"hg17\"`, `\"hg16\"`, `\"mm10\"`, `\"mm9\"`, and `\"unknown\"`.\\n\\n__Note:__: with `\"unknown\"` assembly, genomic axes do not show chrN: in labels.'\n                    },\n                    baselineY: {\n                      type: \"number\"\n                    },\n                    centerRadius: {\n                      description: \"Proportion of the radius of the center white space.\\n\\n__Default:__ `0.3`\",\n                      type: \"number\"\n                    },\n                    color: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Color\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    data: {\n                      $ref: \"#/definitions/DataDeep\"\n                    },\n                    dataTransform: {\n                      items: {\n                        $ref: \"#/definitions/DataTransform\"\n                      },\n                      type: \"array\"\n                    },\n                    displacement: {\n                      $ref: \"#/definitions/Displacement\"\n                    },\n                    endAngle: {\n                      description: 'Specify the end angle (in the range of [0, 360]) of circular tracks (`{\"layout\": \"circular\"}`).',\n                      type: \"number\"\n                    },\n                    experimental: {\n                      additionalProperties: false,\n                      properties: {\n                        mouseEvents: {\n                          anyOf: [\n                            {\n                              type: \"boolean\"\n                            },\n                            {\n                              $ref: \"#/definitions/MouseEventsDeep\"\n                            }\n                          ]\n                        }\n                      },\n                      type: \"object\"\n                    },\n                    flipY: {\n                      type: \"boolean\"\n                    },\n                    height: {\n                      description: \"Specify the track height in pixels.\",\n                      type: \"number\"\n                    },\n                    id: {\n                      type: \"string\"\n                    },\n                    innerRadius: {\n                      description: 'Specify the inner radius of tracks when (`{\"layout\": \"circular\"}`).',\n                      type: \"number\"\n                    },\n                    layout: {\n                      $ref: \"#/definitions/Layout\",\n                      description: \"Specify the layout type of all tracks.\"\n                    },\n                    linkingId: {\n                      description: \"Specify an ID for [linking multiple views](http://gosling-lang.org/docs/user-interaction#linking-views)\",\n                      type: \"string\"\n                    },\n                    mark: {\n                      $ref: \"#/definitions/Mark\"\n                    },\n                    opacity: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Opacity\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    orientation: {\n                      $ref: \"#/definitions/Orientation\",\n                      description: \"Specify the orientation.\"\n                    },\n                    outerRadius: {\n                      description: 'Specify the outer radius of tracks when `{\"layout\": \"circular\"}`.',\n                      type: \"number\"\n                    },\n                    overlayOnPreviousTrack: {\n                      type: \"boolean\"\n                    },\n                    overrideTemplate: {\n                      type: \"boolean\"\n                    },\n                    prerelease: {\n                      additionalProperties: false,\n                      description: \"internal\",\n                      type: \"object\"\n                    },\n                    row: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Row\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    size: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Size\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    spacing: {\n                      description: '- If `{\"layout\": \"linear\"}`, specify the space between tracks in pixels;\\n\\n- If `{\"layout\": \"circular\"}`, specify the space between tracks in percentage ranging from 0 to 100.',\n                      type: \"number\"\n                    },\n                    startAngle: {\n                      description: 'Specify the start angle (in the range of [0, 360]) of circular tracks (`{\"layout\": \"circular\"}`).',\n                      type: \"number\"\n                    },\n                    \"static\": {\n                      description: \"Whether to disable [Zooming and Panning](http://gosling-lang.org/docs/user-interaction#zooming-and-panning), __Default:__ `false`.\",\n                      type: \"boolean\"\n                    },\n                    stretch: {\n                      type: \"boolean\"\n                    },\n                    stroke: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Stroke\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    strokeWidth: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/StrokeWidth\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    style: {\n                      $ref: \"#/definitions/Style\",\n                      description: \"Define the [style](http://gosling-lang.org/docs/visual-channel#style-related-properties) of multive views. Will be overwritten by the style of children elements (e.g., view, track).\"\n                    },\n                    subtitle: {\n                      type: \"string\"\n                    },\n                    text: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Text\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    title: {\n                      description: \"If defined, will show the textual label on the left-top corner of a track.\",\n                      type: \"string\"\n                    },\n                    tooltip: {\n                      items: {\n                        $ref: \"#/definitions/Tooltip\"\n                      },\n                      type: \"array\"\n                    },\n                    tracks: {\n                      anyOf: [\n                        {\n                          items: {\n                            $ref: \"#/definitions/PartialTrack\"\n                          },\n                          type: \"array\"\n                        },\n                        {\n                          items: {\n                            anyOf: [\n                              {\n                                $ref: \"#/definitions/PartialTrack\"\n                              },\n                              {\n                                $ref: \"#/definitions/OverlaidTracks\"\n                              }\n                            ]\n                          },\n                          type: \"array\"\n                        }\n                      ]\n                    },\n                    visibility: {\n                      items: {\n                        $ref: \"#/definitions/VisibilityCondition\"\n                      },\n                      type: \"array\"\n                    },\n                    width: {\n                      description: \"Specify the track width in pixels.\",\n                      type: \"number\"\n                    },\n                    x: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/X\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    x1: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/X\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    x1e: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/X\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    xAxis: {\n                      $ref: \"#/definitions/AxisPosition\",\n                      description: \"not supported\"\n                    },\n                    xDomain: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/DomainInterval\"\n                        },\n                        {\n                          $ref: \"#/definitions/DomainChrInterval\"\n                        },\n                        {\n                          $ref: \"#/definitions/DomainChr\"\n                        }\n                      ],\n                      description: \"Specify the visible region of genomic x-axis\"\n                    },\n                    xOffset: {\n                      description: \"Specify the x offset of views in the unit of pixels\",\n                      type: \"number\"\n                    },\n                    xe: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/X\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    y: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Y\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    y1: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Y\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    y1e: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Y\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    yDomain: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/DomainInterval\"\n                        },\n                        {\n                          $ref: \"#/definitions/DomainChrInterval\"\n                        },\n                        {\n                          $ref: \"#/definitions/DomainChr\"\n                        }\n                      ],\n                      description: \"Specify the visible region of genomic y-axis\"\n                    },\n                    yOffset: {\n                      description: \"Specify the y offset of views in the unit of pixels\",\n                      type: \"number\"\n                    },\n                    ye: {\n                      anyOf: [\n                        {\n                          $ref: \"#/definitions/Y\"\n                        },\n                        {\n                          $ref: \"#/definitions/ChannelValue\"\n                        }\n                      ]\n                    },\n                    zoomLimits: {\n                      $ref: \"#/definitions/ZoomLimits\"\n                    }\n                  },\n                  type: \"object\"\n                }\n              },\n              required: [\n                \"spec\",\n                \"selectivity\"\n              ],\n              type: \"object\"\n            },\n            type: \"array\"\n          },\n          spacing: {\n            description: '- If `{\"layout\": \"linear\"}`, specify the space between tracks in pixels;\\n\\n- If `{\"layout\": \"circular\"}`, specify the space between tracks in percentage ranging from 0 to 100.',\n            type: \"number\"\n          },\n          \"static\": {\n            description: \"Whether to disable [Zooming and Panning](http://gosling-lang.org/docs/user-interaction#zooming-and-panning), __Default:__ `false`.\",\n            type: \"boolean\"\n          },\n          style: {\n            $ref: \"#/definitions/Style\",\n            description: \"Define the [style](http://gosling-lang.org/docs/visual-channel#style-related-properties) of multive views. Will be overwritten by the style of children elements (e.g., view, track).\"\n          },\n          tracks: {\n            items: {\n              $ref: \"#/definitions/Track\"\n            },\n            type: \"array\"\n          },\n          xAxis: {\n            $ref: \"#/definitions/AxisPosition\",\n            description: \"not supported\"\n          },\n          xDomain: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/DomainInterval\"\n              },\n              {\n                $ref: \"#/definitions/DomainChrInterval\"\n              },\n              {\n                $ref: \"#/definitions/DomainChr\"\n              }\n            ],\n            description: \"Specify the visible region of genomic x-axis\"\n          },\n          xOffset: {\n            description: \"Specify the x offset of views in the unit of pixels\",\n            type: \"number\"\n          },\n          yDomain: {\n            anyOf: [\n              {\n                $ref: \"#/definitions/DomainInterval\"\n              },\n              {\n                $ref: \"#/definitions/DomainChrInterval\"\n              },\n              {\n                $ref: \"#/definitions/DomainChr\"\n              }\n            ],\n            description: \"Specify the visible region of genomic y-axis\"\n          },\n          yOffset: {\n            description: \"Specify the y offset of views in the unit of pixels\",\n            type: \"number\"\n          },\n          zoomLimits: {\n            $ref: \"#/definitions/ZoomLimits\"\n          }\n        },\n        required: [\n          \"tracks\"\n        ],\n        type: \"object\"\n      }\n    ]\n  },\n  Size: {\n    additionalProperties: false,\n    properties: {\n      domain: {\n        $ref: \"#/definitions/ValueExtent\",\n        description: \"Values of the data\"\n      },\n      field: {\n        description: \"Name of the data field\",\n        type: \"string\"\n      },\n      legend: {\n        description: \"not supported: Whether to display legend. __Default__: `false`\",\n        type: \"boolean\"\n      },\n      range: {\n        $ref: \"#/definitions/ValueExtent\",\n        description: \"Ranges of visual channel values\"\n      },\n      type: {\n        description: \"Specify the data type\",\n        \"enum\": [\n          \"quantitative\",\n          \"nominal\"\n        ],\n        type: \"string\"\n      }\n    },\n    type: \"object\"\n  },\n  SizeVisibilityCondition: {\n    additionalProperties: false,\n    properties: {\n      conditionPadding: {\n        description: \"Specify the buffer size (in pixel) of width or height when calculating the visibility.\\n\\n__Default__: `0`\",\n        type: \"number\"\n      },\n      measure: {\n        description: \"Specify which aspect of the `target` will be compared to the `threshold`.\",\n        \"enum\": [\n          \"width\",\n          \"height\"\n        ],\n        type: \"string\"\n      },\n      operation: {\n        $ref: \"#/definitions/LogicalOperation\",\n        description: 'A string that specifies the logical operation to conduct between `threshold` and the `measure` of `target`. Support\\n\\n- greater than : \"greater-than\", \"gt\", \"GT\"\\n\\n- less than : \"less-than\", \"lt\", \"LT\"\\n\\n- greater than or equal to : \"greater-than-or-equal-to\", \"gtet\", \"GTET\"\\n\\n- less than or equal to : \"less-than-or-equal-to\", \"ltet\", \"LTET\"'\n      },\n      target: {\n        description: \"Target specifies the object that you want to compare with the threshold.\",\n        \"enum\": [\n          \"track\",\n          \"mark\"\n        ],\n        type: \"string\"\n      },\n      threshold: {\n        anyOf: [\n          {\n            type: \"number\"\n          },\n          {\n            \"const\": \"|xe-x|\",\n            type: \"string\"\n          }\n        ],\n        description: 'Specify the threshold as one of:\\n\\n- A number representing a fixed threshold in the unit of pixels;\\n\\n- `\"|xe-x|\"`, using the distance between `xe` and `x` as threshold'\n      },\n      transitionPadding: {\n        description: \"Specify the buffer size (in pixel) of width or height for smooth transition.\\n\\n__Default__: `0`\",\n        type: \"number\"\n      }\n    },\n    required: [\n      \"measure\",\n      \"operation\",\n      \"target\",\n      \"threshold\"\n    ],\n    type: \"object\"\n  },\n  StrConcatTransform: {\n    additionalProperties: false,\n    properties: {\n      fields: {\n        items: {\n          type: \"string\"\n        },\n        type: \"array\"\n      },\n      newField: {\n        type: \"string\"\n      },\n      separator: {\n        type: \"string\"\n      },\n      type: {\n        \"const\": \"concat\",\n        type: \"string\"\n      }\n    },\n    required: [\n      \"type\",\n      \"fields\",\n      \"newField\",\n      \"separator\"\n    ],\n    type: \"object\"\n  },\n  StrReplaceTransform: {\n    additionalProperties: false,\n    properties: {\n      field: {\n        type: \"string\"\n      },\n      newField: {\n        type: \"string\"\n      },\n      replace: {\n        items: {\n          additionalProperties: false,\n          properties: {\n            from: {\n              type: \"string\"\n            },\n            to: {\n              type: \"string\"\n            }\n          },\n          required: [\n            \"from\",\n            \"to\"\n          ],\n          type: \"object\"\n        },\n        type: \"array\"\n      },\n      type: {\n        \"const\": \"replace\",\n        type: \"string\"\n      }\n    },\n    required: [\n      \"type\",\n      \"field\",\n      \"newField\",\n      \"replace\"\n    ],\n    type: \"object\"\n  },\n  Stroke: {\n    additionalProperties: false,\n    properties: {\n      domain: {\n        $ref: \"#/definitions/ValueExtent\",\n        description: \"Values of the data\"\n      },\n      field: {\n        description: \"Name of the data field\",\n        type: \"string\"\n      },\n      legend: {\n        description: \"Whether to display legend. __Default__: `false`\",\n        type: \"boolean\"\n      },\n      range: {\n        $ref: \"#/definitions/Range\",\n        description: \"Ranges of visual channel values\"\n      },\n      scaleOffset: {\n        description: \"Whether to use offset of the domain proportionally. This is bound to brushes on the color legend. __Default__: `[0, 1]`\",\n        items: [\n          {\n            type: \"number\"\n          },\n          {\n            type: \"number\"\n          }\n        ],\n        maxItems: 2,\n        minItems: 2,\n        type: \"array\"\n      },\n      title: {\n        description: \"Title of the legend. __Default__: `undefined`\",\n        type: \"string\"\n      },\n      type: {\n        description: \"Specify the data type\",\n        \"enum\": [\n          \"quantitative\",\n          \"nominal\"\n        ],\n        type: \"string\"\n      }\n    },\n    type: \"object\"\n  },\n  StrokeWidth: {\n    additionalProperties: false,\n    properties: {\n      domain: {\n        $ref: \"#/definitions/ValueExtent\",\n        description: \"Values of the data\"\n      },\n      field: {\n        description: \"Name of the data field\",\n        type: \"string\"\n      },\n      range: {\n        $ref: \"#/definitions/ValueExtent\",\n        description: \"Ranges of visual channel values\"\n      },\n      type: {\n        description: \"Specify the data type\",\n        \"enum\": [\n          \"quantitative\",\n          \"nominal\"\n        ],\n        type: \"string\"\n      }\n    },\n    type: \"object\"\n  },\n  Style: {\n    additionalProperties: false,\n    properties: {\n      align: {\n        description: \"Specify the alignment of marks. This property is currently only supported for `triangle` marks.\",\n        \"enum\": [\n          \"left\",\n          \"right\"\n        ],\n        type: \"string\"\n      },\n      background: {\n        type: \"string\"\n      },\n      backgroundOpacity: {\n        type: \"number\"\n      },\n      brush: {\n        additionalProperties: false,\n        description: \"Customize the style of the brush mark in the `rangeSelect` mouse event.\",\n        properties: {\n          color: {\n            description: \"color of the marks when mouse events are triggered\",\n            type: \"string\"\n          },\n          opacity: {\n            description: \"opacity of the marks when mouse events are triggered\",\n            type: \"number\"\n          },\n          stroke: {\n            description: \"stroke color of the marks when mouse events are triggered\",\n            type: \"string\"\n          },\n          strokeOpacity: {\n            type: \"number\"\n          },\n          strokeWidth: {\n            description: \"stroke width of the marks when mouse events are triggered\",\n            type: \"number\"\n          }\n        },\n        type: \"object\"\n      },\n      curve: {\n        description: \"Specify the curve of `rule` marks.\",\n        \"enum\": [\n          \"top\",\n          \"bottom\",\n          \"left\",\n          \"right\"\n        ],\n        type: \"string\"\n      },\n      dashed: {\n        description: \"Specify the pattern of dashes and gaps for `rule` marks.\",\n        items: [\n          {\n            type: \"number\"\n          },\n          {\n            type: \"number\"\n          }\n        ],\n        maxItems: 2,\n        minItems: 2,\n        type: \"array\"\n      },\n      dx: {\n        description: \"Offset the position of marks in x direction. This property is currently only supported for `text` marks\",\n        type: \"number\"\n      },\n      dy: {\n        description: \"Offset the position of marks in y direction. This property is currently only supported for `text` marks.\",\n        type: \"number\"\n      },\n      enableSmoothPath: {\n        description: \"Whether to enable smooth paths when drawing curves.\\n\\n__Default__: `false`\",\n        type: \"boolean\"\n      },\n      inlineLegend: {\n        description: \"Specify whether to show legend in a single horizontal line?\",\n        type: \"boolean\"\n      },\n      legendTitle: {\n        description: \"If defined, show legend title on the top or left\",\n        type: \"string\"\n      },\n      linePattern: {\n        additionalProperties: false,\n        description: \"Specify the pattern of dashes and gaps for `rule` marks.\",\n        properties: {\n          size: {\n            type: \"number\"\n          },\n          type: {\n            \"enum\": [\n              \"triangleLeft\",\n              \"triangleRight\"\n            ],\n            type: \"string\"\n          }\n        },\n        required: [\n          \"type\",\n          \"size\"\n        ],\n        type: \"object\"\n      },\n      linkConnectionType: {\n        description: 'Specify the connetion type of `betweenLink` marks.\\n\\n__Default__: `\"corner\"`',\n        \"enum\": [\n          \"straight\",\n          \"curve\",\n          \"corner\"\n        ],\n        type: \"string\"\n      },\n      linkMinHeight: {\n        description: \"The minimum height of `withinLink` and `betweenLink` marks. Unit is a percentagle. __Default__: `0.5`\",\n        type: \"number\"\n      },\n      linkStyle: {\n        description: \"The style of `withinLink` and `betweenLink` marks. __Default__: `'circular'` `'elliptical'` will be used as a default option.\",\n        \"enum\": [\n          \"elliptical\",\n          \"circular\",\n          \"straight\",\n          \"experimentalEdgeBundling\"\n        ],\n        type: \"string\"\n      },\n      matrixExtent: {\n        description: 'Determine to show only one side of the diagonal in a HiGlass matrix. __Default__: `\"full\"`',\n        \"enum\": [\n          \"full\",\n          \"upper-right\",\n          \"lower-left\"\n        ],\n        type: \"string\"\n      },\n      mouseOver: {\n        $ref: \"#/definitions/EventStyle\",\n        description: \"Customize visual effects of `mouseOver` events on marks.\"\n      },\n      outline: {\n        type: \"string\"\n      },\n      outlineWidth: {\n        type: \"number\"\n      },\n      select: {\n        $ref: \"#/definitions/EventStyle\",\n        description: \"Customize visual effects of `rangeSelect` events on marks .\"\n      },\n      textAnchor: {\n        description: \"Specify the alignment of `text` marks to a given point.\",\n        \"enum\": [\n          \"start\",\n          \"middle\",\n          \"end\"\n        ],\n        type: \"string\"\n      },\n      textFontSize: {\n        description: \"Specify the font size of `text` marks. Can also be specified using the `size` channel option of `text` marks.\",\n        type: \"number\"\n      },\n      textFontWeight: {\n        description: \"Specify the font weight of `text` marks.\",\n        \"enum\": [\n          \"bold\",\n          \"normal\"\n        ],\n        type: \"string\"\n      },\n      textStroke: {\n        description: \"Specify the stroke of `text` marks. Can also be specified using the `stroke` channel option of `text` marks.\",\n        type: \"string\"\n      },\n      textStrokeWidth: {\n        description: \"Specify the stroke width of `text` marks. Can also be specified using the `strokeWidth` channel option of `text` marks.\",\n        type: \"number\"\n      }\n    },\n    type: \"object\"\n  },\n  SvTypeTransform: {\n    additionalProperties: false,\n    properties: {\n      firstBp: {\n        additionalProperties: false,\n        description: \"Based on the BEDPE, infer SV types. SV types are specified as one of the following strings: DUP, TRA, DEL, t2tINV, h2hINV.\",\n        properties: {\n          chrField: {\n            type: \"string\"\n          },\n          posField: {\n            type: \"string\"\n          },\n          strandField: {\n            type: \"string\"\n          }\n        },\n        required: [\n          \"chrField\",\n          \"posField\",\n          \"strandField\"\n        ],\n        type: \"object\"\n      },\n      newField: {\n        type: \"string\"\n      },\n      secondBp: {\n        additionalProperties: false,\n        description: \"Based on the BEDPE, infer SV types. SV types are specified as one of the following strings: DUP, TRA, DEL, t2tINV, h2hINV.\",\n        properties: {\n          chrField: {\n            type: \"string\"\n          },\n          posField: {\n            type: \"string\"\n          },\n          strandField: {\n            type: \"string\"\n          }\n        },\n        required: [\n          \"chrField\",\n          \"posField\",\n          \"strandField\"\n        ],\n        type: \"object\"\n      },\n      type: {\n        \"const\": \"svType\",\n        type: \"string\"\n      }\n    },\n    required: [\n      \"type\",\n      \"firstBp\",\n      \"secondBp\",\n      \"newField\"\n    ],\n    type: \"object\"\n  },\n  TemplateTrack: {\n    additionalProperties: false,\n    description: \"Template specification that will be internally converted into `SingleTrack` for rendering.\",\n    properties: {\n      _assignedHeight: {\n        type: \"number\"\n      },\n      _assignedWidth: {\n        description: \"Internal: Used for responsive spec\",\n        type: \"number\"\n      },\n      _invalidTrack: {\n        description: \"internal\",\n        type: \"boolean\"\n      },\n      _renderingId: {\n        description: \"internal\",\n        type: \"string\"\n      },\n      assembly: {\n        $ref: \"#/definitions/Assembly\",\n        description: 'A string that specifies the genome builds to use. Currently support `\"hg38\"`, `\"hg19\"`, `\"hg18\"`, `\"hg17\"`, `\"hg16\"`, `\"mm10\"`, `\"mm9\"`, and `\"unknown\"`.\\n\\n__Note:__: with `\"unknown\"` assembly, genomic axes do not show chrN: in labels.'\n      },\n      centerRadius: {\n        description: \"Proportion of the radius of the center white space.\\n\\n__Default:__ `0.3`\",\n        type: \"number\"\n      },\n      data: {\n        $ref: \"#/definitions/DataDeep\"\n      },\n      encoding: {\n        additionalProperties: {\n          $ref: \"#/definitions/Channel\"\n        },\n        type: \"object\"\n      },\n      endAngle: {\n        description: 'Specify the end angle (in the range of [0, 360]) of circular tracks (`{\"layout\": \"circular\"}`).',\n        type: \"number\"\n      },\n      height: {\n        description: \"Specify the track height in pixels.\",\n        type: \"number\"\n      },\n      id: {\n        type: \"string\"\n      },\n      innerRadius: {\n        description: 'Specify the inner radius of tracks when (`{\"layout\": \"circular\"}`).',\n        type: \"number\"\n      },\n      layout: {\n        $ref: \"#/definitions/Layout\",\n        description: \"Specify the layout type of all tracks.\"\n      },\n      linkingId: {\n        description: \"Specify an ID for [linking multiple views](http://gosling-lang.org/docs/user-interaction#linking-views)\",\n        type: \"string\"\n      },\n      orientation: {\n        $ref: \"#/definitions/Orientation\",\n        description: \"Specify the orientation.\"\n      },\n      outerRadius: {\n        description: 'Specify the outer radius of tracks when `{\"layout\": \"circular\"}`.',\n        type: \"number\"\n      },\n      overlayOnPreviousTrack: {\n        type: \"boolean\"\n      },\n      prerelease: {\n        additionalProperties: false,\n        description: \"internal\",\n        type: \"object\"\n      },\n      spacing: {\n        description: '- If `{\"layout\": \"linear\"}`, specify the space between tracks in pixels;\\n\\n- If `{\"layout\": \"circular\"}`, specify the space between tracks in percentage ranging from 0 to 100.',\n        type: \"number\"\n      },\n      startAngle: {\n        description: 'Specify the start angle (in the range of [0, 360]) of circular tracks (`{\"layout\": \"circular\"}`).',\n        type: \"number\"\n      },\n      \"static\": {\n        description: \"Whether to disable [Zooming and Panning](http://gosling-lang.org/docs/user-interaction#zooming-and-panning), __Default:__ `false`.\",\n        type: \"boolean\"\n      },\n      style: {\n        $ref: \"#/definitions/Style\",\n        description: \"Define the [style](http://gosling-lang.org/docs/visual-channel#style-related-properties) of multive views. Will be overwritten by the style of children elements (e.g., view, track).\"\n      },\n      subtitle: {\n        type: \"string\"\n      },\n      template: {\n        type: \"string\"\n      },\n      title: {\n        description: \"If defined, will show the textual label on the left-top corner of a track.\",\n        type: \"string\"\n      },\n      width: {\n        description: \"Specify the track width in pixels.\",\n        type: \"number\"\n      },\n      xAxis: {\n        $ref: \"#/definitions/AxisPosition\",\n        description: \"not supported\"\n      },\n      xDomain: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/DomainInterval\"\n          },\n          {\n            $ref: \"#/definitions/DomainChrInterval\"\n          },\n          {\n            $ref: \"#/definitions/DomainChr\"\n          }\n        ],\n        description: \"Specify the visible region of genomic x-axis\"\n      },\n      xOffset: {\n        description: \"Specify the x offset of views in the unit of pixels\",\n        type: \"number\"\n      },\n      yDomain: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/DomainInterval\"\n          },\n          {\n            $ref: \"#/definitions/DomainChrInterval\"\n          },\n          {\n            $ref: \"#/definitions/DomainChr\"\n          }\n        ],\n        description: \"Specify the visible region of genomic y-axis\"\n      },\n      yOffset: {\n        description: \"Specify the y offset of views in the unit of pixels\",\n        type: \"number\"\n      },\n      zoomLimits: {\n        $ref: \"#/definitions/ZoomLimits\"\n      }\n    },\n    required: [\n      \"data\",\n      \"height\",\n      \"template\",\n      \"width\"\n    ],\n    type: \"object\"\n  },\n  Text: {\n    additionalProperties: false,\n    properties: {\n      domain: {\n        description: \"Values of the data\",\n        items: {\n          type: \"string\"\n        },\n        type: \"array\"\n      },\n      field: {\n        description: \"Name of the data field\",\n        type: \"string\"\n      },\n      range: {\n        description: \"Ranges of visual channel values\",\n        items: {\n          type: \"string\"\n        },\n        type: \"array\"\n      },\n      type: {\n        description: \"Specify the data type\",\n        \"enum\": [\n          \"quantitative\",\n          \"nominal\"\n        ],\n        type: \"string\"\n      }\n    },\n    type: \"object\"\n  },\n  Tooltip: {\n    additionalProperties: false,\n    properties: {\n      alt: {\n        description: \"Name of the data field for showing in the tooltip. Will use the field name if not specified.\",\n        type: \"string\"\n      },\n      field: {\n        description: \"Specifiy a data field whose value will show in the tooltip.\",\n        type: \"string\"\n      },\n      format: {\n        description: \"format of the data value.\",\n        type: \"string\"\n      },\n      type: {\n        $ref: \"#/definitions/FieldType\",\n        description: \"Type of the data field.\"\n      }\n    },\n    required: [\n      \"field\",\n      \"type\"\n    ],\n    type: \"object\"\n  },\n  Track: {\n    anyOf: [\n      {\n        $ref: \"#/definitions/SingleTrack\"\n      },\n      {\n        $ref: \"#/definitions/OverlaidTrack\"\n      },\n      {\n        $ref: \"#/definitions/DataTrack\"\n      },\n      {\n        $ref: \"#/definitions/TemplateTrack\"\n      }\n    ]\n  },\n  VCFData: {\n    additionalProperties: false,\n    description: \"The Variant Call Format (VCF).\",\n    properties: {\n      indexUrl: {\n        description: \"URL link to the tabix index file\",\n        type: \"string\"\n      },\n      sampleLength: {\n        description: \"The maximum number of rows to be loaded from the URL. __Default:__ `1000`\",\n        type: \"number\"\n      },\n      type: {\n        \"const\": \"vcf\",\n        type: \"string\"\n      },\n      url: {\n        description: \"URL link to the VCF file\",\n        type: \"string\"\n      }\n    },\n    required: [\n      \"type\",\n      \"url\",\n      \"indexUrl\"\n    ],\n    type: \"object\"\n  },\n  ValueExtent: {\n    anyOf: [\n      {\n        items: {\n          type: \"string\"\n        },\n        type: \"array\"\n      },\n      {\n        items: {\n          type: \"number\"\n        },\n        type: \"array\"\n      }\n    ]\n  },\n  VectorData: {\n    additionalProperties: false,\n    description: 'One-dimensional quantitative values along genomic position (e.g., bigwig) can be converted into HiGlass\\' `\"vector\"` format data. Find out more about this format at [HiGlass Docs](https://docs.higlass.io/data_preparation.html#bigwig-files).',\n    properties: {\n      aggregation: {\n        $ref: \"#/definitions/BinAggregate\",\n        description: 'Determine aggregation function to apply within bins. __Default__: `\"mean\"`'\n      },\n      binSize: {\n        description: \"Binning the genomic interval in tiles (unit size: 256).\",\n        type: \"number\"\n      },\n      column: {\n        description: \"Assign a field name of the middle position of genomic intervals.\",\n        type: \"string\"\n      },\n      end: {\n        description: \"Assign a field name of the end position of genomic intervals.\",\n        type: \"string\"\n      },\n      start: {\n        description: \"Assign a field name of the start position of genomic intervals.\",\n        type: \"string\"\n      },\n      type: {\n        \"const\": \"vector\",\n        type: \"string\"\n      },\n      url: {\n        description: \"Specify the URL address of the data file.\",\n        type: \"string\"\n      },\n      value: {\n        description: \"Assign a field name of quantitative values.\",\n        type: \"string\"\n      }\n    },\n    required: [\n      \"type\",\n      \"url\",\n      \"column\",\n      \"value\"\n    ],\n    type: \"object\"\n  },\n  VisibilityCondition: {\n    anyOf: [\n      {\n        $ref: \"#/definitions/SizeVisibilityCondition\"\n      },\n      {\n        $ref: \"#/definitions/ZoomLevelVisibilityCondition\"\n      }\n    ]\n  },\n  X: {\n    additionalProperties: false,\n    properties: {\n      aggregate: {\n        $ref: \"#/definitions/Aggregate\",\n        description: \"Specify how to aggregate data. __Default__: `undefined`\"\n      },\n      axis: {\n        $ref: \"#/definitions/AxisPosition\",\n        description: \"Specify where should the axis be put\"\n      },\n      domain: {\n        $ref: \"#/definitions/GenomicDomain\",\n        description: \"Values of the data\"\n      },\n      field: {\n        description: \"Name of the data field.\",\n        type: \"string\"\n      },\n      grid: {\n        description: \"Whether to display grid. __Default__: `false`\",\n        type: \"boolean\"\n      },\n      legend: {\n        description: \"Whether to display legend. __Default__: `false`\",\n        type: \"boolean\"\n      },\n      linkingId: {\n        description: \"Users need to assign a unique linkingId for [linking views](/docs/user-interaction#linking-views) and [Brushing and Linking](/docs/user-interaction#brushing-and-linking)\",\n        type: \"string\"\n      },\n      range: {\n        $ref: \"#/definitions/ValueExtent\",\n        description: \"Values of the visual channel.\"\n      },\n      type: {\n        \"const\": \"genomic\",\n        description: \"Specify the data type.\",\n        type: \"string\"\n      }\n    },\n    type: \"object\"\n  },\n  Y: {\n    additionalProperties: false,\n    properties: {\n      aggregate: {\n        $ref: \"#/definitions/Aggregate\",\n        description: \"Specify how to aggregate data. __Default__: `undefined`\"\n      },\n      axis: {\n        $ref: \"#/definitions/AxisPosition\",\n        description: \"Specify where should the axis be put\"\n      },\n      baseline: {\n        description: \"Custom baseline of the y-axis. __Default__: `0`\",\n        type: [\n          \"string\",\n          \"number\"\n        ]\n      },\n      domain: {\n        anyOf: [\n          {\n            $ref: \"#/definitions/ValueExtent\"\n          },\n          {\n            $ref: \"#/definitions/GenomicDomain\"\n          }\n        ],\n        description: \"Values of the data\"\n      },\n      field: {\n        description: \"Name of the data field.\",\n        type: \"string\"\n      },\n      flip: {\n        description: \"Whether to flip the y-axis. This is done by inverting the `range` property. __Default__: `false`\",\n        type: \"boolean\"\n      },\n      grid: {\n        description: \"Whether to display grid. __Default__: `false`\",\n        type: \"boolean\"\n      },\n      legend: {\n        description: \"Whether to display legend. __Default__: `false`\",\n        type: \"boolean\"\n      },\n      linkingId: {\n        description: \"Users need to assign a unique linkingId for [linking views](/docs/user-interaction#linking-views) and [Brushing and Linking](/docs/user-interaction#brushing-and-linking)\",\n        type: \"string\"\n      },\n      range: {\n        $ref: \"#/definitions/ValueExtent\",\n        description: \"Values of the visual channel.\"\n      },\n      type: {\n        description: \"Specify the data type.\",\n        \"enum\": [\n          \"quantitative\",\n          \"nominal\",\n          \"genomic\"\n        ],\n        type: \"string\"\n      },\n      zeroBaseline: {\n        description: \"Specify whether to use zero baseline. __Default__: `true`\",\n        type: \"boolean\"\n      }\n    },\n    type: \"object\"\n  },\n  ZoomLevelVisibilityCondition: {\n    additionalProperties: false,\n    properties: {\n      conditionPadding: {\n        description: \"Specify the buffer size (in pixel) of width or height when calculating the visibility.\\n\\n__Default__: `0`\",\n        type: \"number\"\n      },\n      measure: {\n        \"const\": \"zoomLevel\",\n        description: \"Specify which aspect of the `target` will be compared to the `threshold`.\",\n        type: \"string\"\n      },\n      operation: {\n        $ref: \"#/definitions/LogicalOperation\",\n        description: 'A string that specifies the logical operation to conduct between `threshold` and the `measure` of `target`. Support\\n\\n- greater than : \"greater-than\", \"gt\", \"GT\"\\n\\n- less than : \"less-than\", \"lt\", \"LT\"\\n\\n- greater than or equal to : \"greater-than-or-equal-to\", \"gtet\", \"GTET\"\\n\\n- less than or equal to : \"less-than-or-equal-to\", \"ltet\", \"LTET\"'\n      },\n      target: {\n        description: \"Target specifies the object that you want to compare with the threshold.\",\n        \"enum\": [\n          \"track\",\n          \"mark\"\n        ],\n        type: \"string\"\n      },\n      threshold: {\n        description: \"Set a threshold in the unit of base pairs (bp)\",\n        type: \"number\"\n      },\n      transitionPadding: {\n        description: \"Specify the buffer size (in pixel) of width or height for smooth transition.\\n\\n__Default__: `0`\",\n        type: \"number\"\n      }\n    },\n    required: [\n      \"measure\",\n      \"operation\",\n      \"target\",\n      \"threshold\"\n    ],\n    type: \"object\"\n  },\n  ZoomLimits: {\n    items: [\n      {\n        type: [\n          \"number\",\n          \"null\"\n        ]\n      },\n      {\n        type: [\n          \"number\",\n          \"null\"\n        ]\n      }\n    ],\n    maxItems: 2,\n    minItems: 2,\n    type: \"array\"\n  }\n};\nvar GoslingSchema = {\n  $ref: $ref$2,\n  $schema: $schema$4,\n  definitions: definitions$3\n};\nconst $ref$1 = \"#/definitions/Theme\";\nconst $schema$3 = \"http://json-schema.org/draft-07/schema#\";\nconst definitions$2 = {\n  AxisStyle: {\n    additionalProperties: false,\n    properties: {\n      baselineColor: {\n        type: \"string\"\n      },\n      gridColor: {\n        type: \"string\"\n      },\n      gridStrokeDash: {\n        items: [\n          {\n            type: \"number\"\n          },\n          {\n            type: \"number\"\n          }\n        ],\n        maxItems: 2,\n        minItems: 2,\n        type: \"array\"\n      },\n      gridStrokeType: {\n        \"enum\": [\n          \"solid\",\n          \"dashed\"\n        ],\n        type: \"string\"\n      },\n      gridStrokeWidth: {\n        type: \"number\"\n      },\n      labelColor: {\n        type: \"string\"\n      },\n      labelFontFamily: {\n        type: \"string\"\n      },\n      labelFontSize: {\n        type: \"number\"\n      },\n      labelFontWeight: {\n        \"enum\": [\n          \"bold\",\n          \"normal\",\n          \"light\"\n        ],\n        type: \"string\"\n      },\n      tickColor: {\n        type: \"string\"\n      }\n    },\n    type: \"object\"\n  },\n  LegendStyle: {\n    additionalProperties: false,\n    properties: {\n      background: {\n        type: \"string\"\n      },\n      backgroundOpacity: {\n        type: \"number\"\n      },\n      backgroundStroke: {\n        type: \"string\"\n      },\n      labelColor: {\n        type: \"string\"\n      },\n      labelFontFamily: {\n        type: \"string\"\n      },\n      labelFontSize: {\n        type: \"number\"\n      },\n      labelFontWeight: {\n        \"enum\": [\n          \"bold\",\n          \"normal\",\n          \"light\"\n        ],\n        type: \"string\"\n      },\n      position: {\n        \"enum\": [\n          \"top\",\n          \"right\"\n        ],\n        type: \"string\"\n      },\n      tickColor: {\n        type: \"string\"\n      }\n    },\n    type: \"object\"\n  },\n  MarkStyle: {\n    additionalProperties: false,\n    properties: {\n      color: {\n        type: \"string\"\n      },\n      nominalColorRange: {\n        items: {\n          type: \"string\"\n        },\n        type: \"array\"\n      },\n      opacity: {\n        type: \"number\"\n      },\n      quantitativeSizeRange: {\n        items: [\n          {\n            type: \"number\"\n          },\n          {\n            type: \"number\"\n          }\n        ],\n        maxItems: 2,\n        minItems: 2,\n        type: \"array\"\n      },\n      size: {\n        type: \"number\"\n      },\n      stroke: {\n        type: \"string\"\n      },\n      strokeWidth: {\n        type: \"number\"\n      }\n    },\n    type: \"object\"\n  },\n  RootStyle: {\n    additionalProperties: false,\n    properties: {\n      background: {\n        type: \"string\"\n      },\n      mousePositionColor: {\n        type: \"string\"\n      },\n      showMousePosition: {\n        type: \"boolean\"\n      },\n      subtitleAlign: {\n        \"enum\": [\n          \"left\",\n          \"middle\",\n          \"right\"\n        ],\n        type: \"string\"\n      },\n      subtitleBackgroundColor: {\n        type: \"string\"\n      },\n      subtitleColor: {\n        type: \"string\"\n      },\n      subtitleFontFamily: {\n        type: \"string\"\n      },\n      subtitleFontSize: {\n        type: \"number\"\n      },\n      subtitleFontWeight: {\n        \"enum\": [\n          \"bold\",\n          \"normal\",\n          \"light\"\n        ],\n        type: \"string\"\n      },\n      titleAlign: {\n        \"enum\": [\n          \"left\",\n          \"middle\",\n          \"right\"\n        ],\n        type: \"string\"\n      },\n      titleBackgroundColor: {\n        type: \"string\"\n      },\n      titleColor: {\n        type: \"string\"\n      },\n      titleFontFamily: {\n        type: \"string\"\n      },\n      titleFontSize: {\n        type: \"number\"\n      },\n      titleFontWeight: {\n        \"enum\": [\n          \"bold\",\n          \"normal\",\n          \"light\"\n        ],\n        type: \"string\"\n      }\n    },\n    type: \"object\"\n  },\n  Theme: {\n    anyOf: [\n      {\n        $ref: \"#/definitions/ThemeType\"\n      },\n      {\n        $ref: \"#/definitions/ThemeDeep\"\n      }\n    ]\n  },\n  ThemeDeep: {\n    additionalProperties: false,\n    properties: {\n      area: {\n        $ref: \"#/definitions/MarkStyle\"\n      },\n      axis: {\n        $ref: \"#/definitions/AxisStyle\"\n      },\n      bar: {\n        $ref: \"#/definitions/MarkStyle\"\n      },\n      base: {\n        $ref: \"#/definitions/ThemeType\"\n      },\n      brush: {\n        $ref: \"#/definitions/MarkStyle\"\n      },\n      legend: {\n        $ref: \"#/definitions/LegendStyle\"\n      },\n      line: {\n        $ref: \"#/definitions/MarkStyle\"\n      },\n      link: {\n        $ref: \"#/definitions/MarkStyle\"\n      },\n      markCommon: {\n        $ref: \"#/definitions/MarkStyle\"\n      },\n      point: {\n        $ref: \"#/definitions/MarkStyle\"\n      },\n      rect: {\n        $ref: \"#/definitions/MarkStyle\"\n      },\n      root: {\n        $ref: \"#/definitions/RootStyle\"\n      },\n      rule: {\n        $ref: \"#/definitions/MarkStyle\"\n      },\n      text: {\n        additionalProperties: false,\n        properties: {\n          color: {\n            type: \"string\"\n          },\n          nominalColorRange: {\n            items: {\n              type: \"string\"\n            },\n            type: \"array\"\n          },\n          opacity: {\n            type: \"number\"\n          },\n          quantitativeSizeRange: {\n            items: [\n              {\n                type: \"number\"\n              },\n              {\n                type: \"number\"\n              }\n            ],\n            maxItems: 2,\n            minItems: 2,\n            type: \"array\"\n          },\n          size: {\n            type: \"number\"\n          },\n          stroke: {\n            type: \"string\"\n          },\n          strokeWidth: {\n            type: \"number\"\n          },\n          textAnchor: {\n            \"enum\": [\n              \"start\",\n              \"middle\",\n              \"end\"\n            ],\n            type: \"string\"\n          },\n          textFontWeight: {\n            \"enum\": [\n              \"bold\",\n              \"normal\"\n            ],\n            type: \"string\"\n          }\n        },\n        type: \"object\"\n      },\n      track: {\n        $ref: \"#/definitions/TrackStyle\"\n      },\n      triangle: {\n        $ref: \"#/definitions/MarkStyle\"\n      }\n    },\n    required: [\n      \"base\"\n    ],\n    type: \"object\"\n  },\n  ThemeType: {\n    \"enum\": [\n      \"light\",\n      \"dark\",\n      \"warm\",\n      \"ggplot\",\n      \"igv\",\n      \"ensembl\",\n      \"jbrowse\",\n      \"ucsc\",\n      \"washu\",\n      \"excel\",\n      \"google\"\n    ],\n    type: \"string\"\n  },\n  TrackStyle: {\n    additionalProperties: false,\n    properties: {\n      alternatingBackground: {\n        type: \"string\"\n      },\n      background: {\n        type: \"string\"\n      },\n      outline: {\n        type: \"string\"\n      },\n      outlineWidth: {\n        type: \"number\"\n      },\n      titleAlign: {\n        \"enum\": [\n          \"left\",\n          \"middle\",\n          \"right\"\n        ],\n        type: \"string\"\n      },\n      titleBackground: {\n        type: \"string\"\n      },\n      titleColor: {\n        type: \"string\"\n      },\n      titleFontSize: {\n        type: \"number\"\n      }\n    },\n    type: \"object\"\n  }\n};\nvar theme_schema = {\n  $ref: $ref$1,\n  $schema: $schema$3,\n  definitions: definitions$2\n};\nconst name = \"gosling.js\";\nconst version = \"0.9.20\";\nconst DEWFAULT_TITLE_PADDING_ON_TOP_AND_BOTTOM = 6;\nconst DEFAULT_TRACK_HEIGHT_LINEAR = 180;\nconst DEFAULT_TRACK_WIDTH_LINEAR = 360;\nconst DEFAULT_VIEW_SPACING = 10;\nconst DEFAULT_INNER_RADIUS_PROP = 0.3;\nconst DEFAULT_CIRCULAR_VIEW_PADDING = 0;\nconst DEFAULT_BACKUP_COLOR = \"gray\";\nconst colorToHex = (colorStr) => {\n  let c = color(colorStr);\n  if (!c) {\n    c = color(DEFAULT_BACKUP_COLOR);\n  }\n  const hex = PIXI.utils.rgb2hex([c.rgb().r / 255, c.rgb().g / 255, c.rgb().b / 255]);\n  return hex;\n};\nconst RADIAN_GAP = 0;\nfunction valueToRadian(v, max2, sa, ea, g) {\n  const safeVal = Math.max(Math.min(max2, v), 0);\n  const gap = g != null ? g : RADIAN_GAP;\n  const radExtent = (ea - sa) / 360 * Math.PI * 2 - gap * 2;\n  const radStart = sa / 360 * Math.PI * 2;\n  return -(radStart + safeVal / max2 * radExtent) - Math.PI / 2 - gap;\n}\nfunction cartesianToPolar(x, max2, r, cx, cy, sa, ea) {\n  return {\n    x: cx + r * Math.cos(valueToRadian(x, max2, sa, ea)),\n    y: cy + r * Math.sin(valueToRadian(x, max2, sa, ea))\n  };\n}\nfunction positionToRadian(x, y, cx, cy) {\n  if (cx <= x) {\n    return Math.atan((y - cy) / (x - cx));\n  } else {\n    return Math.atan((y - cy) / (x - cx)) - Math.PI;\n  }\n}\nfunction drawPoint(trackInfo, g, model) {\n  var _a, _b, _c, _d, _e;\n  const spec = model.spec();\n  if (!spec.width || !spec.height) {\n    console.warn(\"Size of a track is not properly determined, so visual mark cannot be rendered\");\n    return;\n  }\n  const data2 = model.data();\n  const [trackWidth, trackHeight] = trackInfo.dimensions;\n  const zoomLevel = model.getChannelScale(\"x\").invert(trackWidth) - model.getChannelScale(\"x\").invert(0);\n  const circular = spec.layout === \"circular\";\n  const trackInnerRadius = (_a = spec.innerRadius) != null ? _a : 220;\n  const trackOuterRadius = (_b = spec.outerRadius) != null ? _b : 300;\n  const startAngle = (_c = spec.startAngle) != null ? _c : 0;\n  const endAngle = (_d = spec.endAngle) != null ? _d : 360;\n  const trackRingSize = trackOuterRadius - trackInnerRadius;\n  const tcx = trackWidth / 2;\n  const tcy = trackHeight / 2;\n  const rowCategories = (_e = model.getChannelDomainArray(\"row\")) != null ? _e : [\"___SINGLE_ROW___\"];\n  const rowHeight = trackHeight / rowCategories.length;\n  rowCategories.forEach((rowCategory) => {\n    const rowPosition = model.encodedValue(\"row\", rowCategory);\n    data2.filter((d) => !getValueUsingChannel(d, spec.row) || getValueUsingChannel(d, spec.row) === rowCategory).forEach((d) => {\n      const cx = model.encodedPIXIProperty(\"x-center\", d);\n      const cy = model.encodedPIXIProperty(\"y-center\", d);\n      const color2 = model.encodedPIXIProperty(\"color\", d);\n      const radius = model.encodedPIXIProperty(\"p-size\", d);\n      const strokeWidth = model.encodedPIXIProperty(\"strokeWidth\", d);\n      const stroke = model.encodedPIXIProperty(\"stroke\", d);\n      const opacity = model.encodedPIXIProperty(\"opacity\", d);\n      const alphaTransition = model.markVisibility(d, { width: radius, zoomLevel });\n      const actualOpacity = Math.min(alphaTransition, opacity);\n      if (radius <= 0.1 || actualOpacity === 0 || cx + radius < 0 || cx - radius > trackWidth) {\n        return;\n      }\n      g.lineStyle(strokeWidth, colorToHex(stroke), actualOpacity, 1);\n      if (circular) {\n        const r = trackOuterRadius - (rowPosition + rowHeight - cy) / trackHeight * trackRingSize;\n        const pos = cartesianToPolar(cx, trackWidth, r, tcx, tcy, startAngle, endAngle);\n        g.beginFill(colorToHex(color2), actualOpacity);\n        g.drawCircle(pos.x, pos.y, radius);\n        model.getMouseEventModel().addPointBasedEvent(d, [pos.x, pos.y, radius]);\n      } else {\n        g.beginFill(colorToHex(color2), actualOpacity);\n        g.drawCircle(cx, rowPosition + rowHeight - cy, radius);\n        model.getMouseEventModel().addPointBasedEvent(d, [cx, rowPosition + rowHeight - cy, radius]);\n      }\n    });\n  });\n}\nfunction pointProperty(model, propertyKey, datum) {\n  const xe = model.visualPropertyByChannel(\"xe\", datum);\n  const x = model.visualPropertyByChannel(\"x\", datum);\n  const size = model.visualPropertyByChannel(\"size\", datum);\n  switch (propertyKey) {\n    case \"x-center\":\n      return xe ? (xe + x) / 2 : x;\n    case \"y-center\": {\n      const ye = model.visualPropertyByChannel(\"ye\", datum);\n      const y = model.visualPropertyByChannel(\"y\", datum);\n      return ye ? (ye + y) / 2 : y;\n    }\n    case \"p-size\":\n      return xe && model.spec().stretch ? (xe - x) / 2 : size;\n    default:\n      return void 0;\n  }\n}\nfunction drawLine(g, model, trackWidth, trackHeight) {\n  var _a, _b, _c, _d, _e, _f;\n  const spec = model.spec();\n  if (!spec.width || !spec.height) {\n    console.warn(\"Size of a track is not properly determined, so visual mark cannot be rendered\");\n    return;\n  }\n  const data2 = model.data();\n  const circular = spec.layout === \"circular\";\n  const trackInnerRadius = (_a = spec.innerRadius) != null ? _a : 220;\n  const trackOuterRadius = (_b = spec.outerRadius) != null ? _b : 300;\n  const startAngle = (_c = spec.startAngle) != null ? _c : 0;\n  const endAngle = (_d = spec.endAngle) != null ? _d : 360;\n  const trackRingSize = trackOuterRadius - trackInnerRadius;\n  const trackCenterX = trackWidth / 2;\n  const trackCenterY = trackHeight / 2;\n  const rowCategories = (_e = model.getChannelDomainArray(\"row\")) != null ? _e : [\"___SINGLE_ROW___\"];\n  const rowHeight = trackHeight / rowCategories.length;\n  const colorCategories = (_f = model.getChannelDomainArray(\"color\")) != null ? _f : [\"___SINGLE_COLOR___\"];\n  rowCategories.forEach((rowCategory) => {\n    const rowPosition = model.encodedValue(\"row\", rowCategory);\n    colorCategories.forEach((colorCategory) => {\n      data2.filter((d) => (!getValueUsingChannel(d, spec.row) || getValueUsingChannel(d, spec.row) === rowCategory) && (!getValueUsingChannel(d, spec.color) || getValueUsingChannel(d, spec.color) === colorCategory)).sort((d1, d2) => getValueUsingChannel(d1, spec.x) - getValueUsingChannel(d2, spec.x)).forEach((d, i) => {\n        const cx = model.encodedPIXIProperty(\"x\", d);\n        const y = model.encodedPIXIProperty(\"y\", d);\n        const size = model.encodedPIXIProperty(\"size\", d);\n        const color2 = model.encodedPIXIProperty(\"color\", d);\n        const opacity = model.encodedPIXIProperty(\"opacity\", d);\n        g.lineStyle(size, colorToHex(color2), opacity, 0.5);\n        if (circular) {\n          const r = trackOuterRadius - (rowPosition + rowHeight - y) / trackHeight * trackRingSize;\n          const pos = cartesianToPolar(cx, trackWidth, r, trackCenterX, trackCenterY, startAngle, endAngle);\n          if (i === 0) {\n            g.moveTo(pos.x, pos.y);\n          } else {\n            g.lineTo(pos.x, pos.y);\n          }\n          model.getMouseEventModel().addPointBasedEvent(d, [pos.x, pos.y, 1]);\n        } else {\n          if (i === 0) {\n            g.moveTo(cx, rowPosition + rowHeight - y);\n          } else {\n            g.lineTo(cx, rowPosition + rowHeight - y);\n          }\n          model.getMouseEventModel().addPointBasedEvent(d, [cx, rowPosition + rowHeight - y, 1]);\n        }\n      });\n    });\n  });\n}\nfunction drawBar(trackInfo, tile, model) {\n  var _a, _b, _c, _d, _e, _f, _g;\n  const spec = model.spec();\n  if (!spec.width || !spec.height) {\n    console.warn(\"Size of a track is not properly determined, so visual mark cannot be rendered\");\n    return;\n  }\n  const data2 = model.data();\n  const [trackWidth, trackHeight] = trackInfo.dimensions;\n  const tileSize = trackInfo.tilesetInfo.tile_size;\n  const { tileX, tileWidth } = trackInfo.getTilePosAndDimensions(tile.gos.zoomLevel, tile.gos.tilePos, tileSize);\n  const zoomLevel = model.getChannelScale(\"x\").invert(trackWidth) - model.getChannelScale(\"x\").invert(0);\n  const circular = spec.layout === \"circular\";\n  const trackInnerRadius = (_a = spec.innerRadius) != null ? _a : 220;\n  const trackOuterRadius = (_b = spec.outerRadius) != null ? _b : 300;\n  const startAngle = (_c = spec.startAngle) != null ? _c : 0;\n  const endAngle = (_d = spec.endAngle) != null ? _d : 360;\n  const trackRingSize = trackOuterRadius - trackInnerRadius;\n  const cx = trackWidth / 2;\n  const cy = trackHeight / 2;\n  const xScale = model.getChannelScale(\"x\");\n  const tileUnitWidth = xScale(tileX + tileWidth / tileSize) - xScale(tileX);\n  const rowCategories = (_e = model.getChannelDomainArray(\"row\")) != null ? _e : [\"___SINGLE_ROW___\"];\n  const rowHeight = trackHeight / rowCategories.length;\n  const clipRow = !IsChannelDeep(spec.row) || IsChannelDeep(spec.row) && typeof spec.row.clip === \"undefined\" || spec.row.clip;\n  const baselineValue = IsChannelDeep(spec.y) ? (_f = spec.y) == null ? void 0 : _f.baseline : void 0;\n  const staticBaseY = (_g = model.encodedValue(\"y\", baselineValue)) != null ? _g : 0;\n  const g = tile.graphics;\n  if (IsStackedMark(spec)) {\n    const genomicChannel = model.getGenomicChannel();\n    if (!genomicChannel || !genomicChannel.field) {\n      console.warn(\"Genomic field is not provided in the specification\");\n      return;\n    }\n    const pivotedData = group(data2, (d) => d[genomicChannel.field]);\n    const xKeys = [...pivotedData.keys()];\n    xKeys.forEach((k) => {\n      var _a2;\n      let prevYEnd = 0;\n      (_a2 = pivotedData.get(k)) == null ? void 0 : _a2.forEach((d) => {\n        const color2 = model.encodedPIXIProperty(\"color\", d);\n        const stroke = model.encodedPIXIProperty(\"stroke\", d);\n        const strokeWidth = model.encodedPIXIProperty(\"strokeWidth\", d);\n        const opacity = model.encodedPIXIProperty(\"opacity\", d);\n        const y = model.encodedPIXIProperty(\"y\", d);\n        const barWidth = model.encodedPIXIProperty(\"width\", d, { tileUnitWidth });\n        const xs = model.encodedPIXIProperty(\"x-start\", d, { markWidth: barWidth });\n        const xe = xs + barWidth;\n        const alphaTransition = model.markVisibility(d, { width: barWidth, zoomLevel });\n        const actualOpacity = Math.min(alphaTransition, opacity);\n        if (actualOpacity === 0 || barWidth <= 0 || y <= 0) {\n          return;\n        }\n        g.lineStyle(strokeWidth, colorToHex(stroke), actualOpacity, 0);\n        let polygonForMouseEvents = [];\n        if (circular) {\n          const farR = trackOuterRadius - (rowHeight - prevYEnd) / trackHeight * trackRingSize;\n          const nearR = trackOuterRadius - (rowHeight - y - prevYEnd) / trackHeight * trackRingSize;\n          const sPos = cartesianToPolar(xs, trackWidth, nearR, cx, cy, startAngle, endAngle);\n          const startRad = valueToRadian(xs, trackWidth, startAngle, endAngle);\n          const endRad = valueToRadian(xs + barWidth, trackWidth, startAngle, endAngle);\n          g.beginFill(colorToHex(color2), color2 === \"none\" ? 0 : actualOpacity);\n          g.moveTo(sPos.x, sPos.y);\n          g.arc(cx, cy, nearR, startRad, endRad, true);\n          g.arc(cx, cy, farR, endRad, startRad, false);\n          polygonForMouseEvents = Array.from(g.currentPath.points);\n          g.closePath();\n        } else {\n          g.beginFill(colorToHex(color2), color2 === \"none\" ? 0 : actualOpacity);\n          g.drawRect(xs, rowHeight - y - prevYEnd, barWidth, y);\n          const ys = rowHeight - y - prevYEnd;\n          const ye = ys + y;\n          polygonForMouseEvents = [xs, ys, xs, ye, xe, ye, xe, ys];\n        }\n        model.getMouseEventModel().addPolygonBasedEvent(d, polygonForMouseEvents);\n        prevYEnd += y;\n      });\n    });\n  } else {\n    rowCategories.forEach((rowCategory) => {\n      const rowPosition = model.encodedValue(\"row\", rowCategory);\n      data2.filter((d) => {\n        const rowValue = getValueUsingChannel(d, spec.row);\n        return !rowValue || rowValue === rowCategory;\n      }).forEach((d) => {\n        const color2 = model.encodedPIXIProperty(\"color\", d);\n        const stroke = model.encodedPIXIProperty(\"stroke\", d);\n        const strokeWidth = model.encodedPIXIProperty(\"strokeWidth\", d);\n        const opacity = model.encodedPIXIProperty(\"opacity\");\n        let y = model.encodedPIXIProperty(\"y\", d);\n        let ye = model.encodedPIXIProperty(\"ye\", d);\n        if (typeof ye !== \"undefined\" && y > ye) {\n          [y, ye] = [ye, y];\n        }\n        const barWidth = model.encodedPIXIProperty(\"width\", d, { tileUnitWidth });\n        const xs = model.encodedPIXIProperty(\"x-start\", d, { markWidth: barWidth });\n        const xe = xs + barWidth;\n        let ys;\n        if (typeof ye === \"undefined\") {\n          ys = rowPosition + rowHeight - staticBaseY - y;\n          ye = rowPosition + rowHeight - staticBaseY;\n          if (IsChannelDeep(spec.y) && spec.y.flip || spec.flipY) {\n            ye = ys;\n            ys = rowPosition;\n          }\n        } else {\n          ys = rowPosition + rowHeight - ye;\n          ye = rowPosition + rowHeight - y;\n        }\n        if (clipRow) {\n          ys = Math.max(rowPosition, ys);\n          ys = Math.min(ys, rowPosition + rowHeight);\n          ye = Math.max(rowPosition, ye);\n          ye = Math.min(ye, rowPosition + rowHeight);\n        }\n        const alphaTransition = model.markVisibility(d, { width: barWidth, zoomLevel });\n        const actualOpacity = Math.min(alphaTransition, opacity);\n        if (actualOpacity === 0 || barWidth === 0 || y === 0) {\n          return;\n        }\n        g.lineStyle(strokeWidth, colorToHex(stroke), actualOpacity, 0);\n        let polygonForMouseEvents = [];\n        if (circular) {\n          const farR = trackOuterRadius - ys / trackHeight * trackRingSize;\n          const nearR = trackOuterRadius - ye / trackHeight * trackRingSize;\n          const sPos = cartesianToPolar(xs, trackWidth, nearR, cx, cy, startAngle, endAngle);\n          const startRad = valueToRadian(xs, trackWidth, startAngle, endAngle);\n          const endRad = valueToRadian(xs + barWidth, trackWidth, startAngle, endAngle);\n          g.beginFill(colorToHex(color2), color2 === \"none\" ? 0 : actualOpacity);\n          g.moveTo(sPos.x, sPos.y);\n          g.arc(cx, cy, nearR, startRad, endRad, true);\n          g.arc(cx, cy, farR, endRad, startRad, false);\n          polygonForMouseEvents = Array.from(g.currentPath.points);\n          g.closePath();\n        } else {\n          g.beginFill(colorToHex(color2), color2 === \"none\" ? 0 : actualOpacity);\n          g.drawRect(xs, ys, barWidth, ye - ys);\n          polygonForMouseEvents = [xs, ys, xs, ye, xe, ye, xe, ys];\n        }\n        model.getMouseEventModel().addPolygonBasedEvent(d, polygonForMouseEvents);\n      });\n    });\n  }\n}\nfunction barProperty(gm, propertyKey, datum, additionalInfo) {\n  const x = gm.visualPropertyByChannel(\"x\", datum);\n  const xe = gm.visualPropertyByChannel(\"xe\", datum);\n  const size = gm.visualPropertyByChannel(\"size\", datum);\n  switch (propertyKey) {\n    case \"width\":\n      return size != null ? size : xe ? xe - x : additionalInfo == null ? void 0 : additionalInfo.tileUnitWidth;\n    case \"x-start\":\n      if (!(additionalInfo == null ? void 0 : additionalInfo.markWidth)) {\n        return void 0;\n      }\n      return xe ? (x + xe - (additionalInfo == null ? void 0 : additionalInfo.markWidth)) / 2 : x - (additionalInfo == null ? void 0 : additionalInfo.markWidth) / 2;\n    default:\n      return void 0;\n  }\n}\nfunction drawArea(HGC, trackInfo, tile, model) {\n  var _a, _b, _c, _d, _e, _f;\n  const spec = model.spec();\n  const data2 = model.data();\n  const [trackWidth, trackHeight] = trackInfo.dimensions;\n  const tileSize = trackInfo.tilesetInfo.tile_size;\n  const { tileX } = trackInfo.getTilePosAndDimensions(tile.gos.zoomLevel, tile.gos.tilePos, tileSize);\n  const circular = spec.layout === \"circular\";\n  const trackInnerRadius = (_a = spec.innerRadius) != null ? _a : 220;\n  const trackOuterRadius = (_b = spec.outerRadius) != null ? _b : 300;\n  const startAngle = (_c = spec.startAngle) != null ? _c : 0;\n  const endAngle = (_d = spec.endAngle) != null ? _d : 360;\n  const trackRingSize = trackOuterRadius - trackInnerRadius;\n  const trackCenterX = trackWidth / 2;\n  const trackCenterY = trackHeight / 2;\n  const xScale = trackInfo._xScale;\n  const rowCategories = (_e = model.getChannelDomainArray(\"row\")) != null ? _e : [\"___SINGLE_ROW___\"];\n  const rowHeight = trackHeight / rowCategories.length;\n  const colorCategories = (_f = model.getChannelDomainArray(\"color\")) != null ? _f : [\"___SINGLE_COLOR___\"];\n  const constantOpacity = model.encodedPIXIProperty(\"opacity\");\n  const constantStrokeWidth = model.encodedPIXIProperty(\"strokeWidth\");\n  const constantStroke = model.encodedPIXIProperty(\"stroke\");\n  const graphics = tile.graphics;\n  if (IsStackedMark(spec)) {\n    const genomicChannel = model.getGenomicChannel();\n    if (!genomicChannel || !genomicChannel.field) {\n      console.warn(\"Genomic field is not provided in the specification\");\n      return;\n    }\n    const pivotedData = group(data2, (d) => d[genomicChannel.field]);\n    const genomicPosCategories = [...pivotedData.keys()];\n    graphics.lineStyle(constantStrokeWidth, colorToHex(constantStroke), constantOpacity, 1);\n    const prevYEndByGPos = {};\n    colorCategories.forEach((colorCategory) => {\n      const areaPointsTop = [];\n      const areaPointsBottom = [];\n      genomicPosCategories.forEach((genomicPosCategory, i, array) => {\n        var _a2, _b2;\n        (_b2 = (_a2 = pivotedData.get(genomicPosCategory)) == null ? void 0 : _a2.filter((d) => getValueUsingChannel(d, spec.color) === colorCategory)) == null ? void 0 : _b2.forEach((d) => {\n          const xValue = +genomicPosCategory;\n          const cx = xScale(xValue);\n          const cy = max$1([model.encodedPIXIProperty(\"y\", d), 0]);\n          if (typeof prevYEndByGPos[genomicPosCategory] === \"undefined\") {\n            prevYEndByGPos[genomicPosCategory] = 0;\n          }\n          const ys = rowHeight - cy - prevYEndByGPos[genomicPosCategory];\n          const ye = rowHeight - prevYEndByGPos[genomicPosCategory];\n          if (circular) {\n            if (i === 0) {\n              const r = trackOuterRadius - rowHeight / trackHeight * trackRingSize;\n              const pos = cartesianToPolar(cx, trackWidth, r, trackCenterX, trackCenterY, startAngle, endAngle);\n              areaPointsTop.push([pos.x, pos.y]);\n              areaPointsBottom.push([pos.x, pos.y]);\n            }\n            const rTop = trackOuterRadius - ys / trackHeight * trackRingSize;\n            const posTop = cartesianToPolar(cx, trackWidth, rTop, trackCenterX, trackCenterY, startAngle, endAngle);\n            areaPointsTop.push([posTop.x, posTop.y]);\n            const rBot = trackOuterRadius - ye / trackHeight * trackRingSize;\n            const posBot = cartesianToPolar(cx, trackWidth, rBot, trackCenterX, trackCenterY, startAngle, endAngle);\n            areaPointsBottom.push([posBot.x, posBot.y]);\n            if (i === array.length - 1) {\n              const r = trackOuterRadius - rowHeight / trackHeight * trackRingSize;\n              const pos = cartesianToPolar(cx, trackWidth, r, trackCenterX, trackCenterY, startAngle, endAngle);\n              areaPointsTop.push([pos.x, pos.y]);\n              areaPointsBottom.push([pos.x, pos.y]);\n            }\n            model.getMouseEventModel().addPointBasedEvent(d, [posBot.x, posBot.y, 1]);\n          } else {\n            if (i === 0) {\n              areaPointsTop.push([cx, rowHeight]);\n              areaPointsBottom.push([cx, rowHeight]);\n            }\n            areaPointsTop.push([cx, ys]);\n            areaPointsBottom.push([cx, ye]);\n            if (i === array.length - 1) {\n              areaPointsTop.push([cx, rowHeight]);\n              areaPointsBottom.push([cx, rowHeight]);\n            }\n            model.getMouseEventModel().addPointBasedEvent(d, [cx, ys, 1]);\n          }\n          prevYEndByGPos[genomicPosCategory] += cy;\n        });\n      });\n      const color2 = model.encodedValue(\"color\", colorCategory);\n      graphics.beginFill(colorToHex(color2), constantOpacity);\n      graphics.drawPolygon([\n        ...areaPointsTop.reduce((a, b) => a.concat(b)),\n        ...areaPointsBottom.reverse().reduce((a, b) => a.concat(b))\n      ]);\n      graphics.endFill();\n    });\n  } else {\n    rowCategories.forEach((rowCategory) => {\n      const rowPosition = model.encodedValue(\"row\", rowCategory);\n      graphics.lineStyle(constantStrokeWidth, colorToHex(constantStroke), constantOpacity, 0);\n      colorCategories.forEach((colorCategory) => {\n        const baselinePoints = [];\n        const areaPoints = [];\n        const baselineR = trackOuterRadius - (rowPosition + rowHeight) / trackHeight * trackRingSize;\n        data2.filter((d) => (typeof getValueUsingChannel(d, spec.row) === \"undefined\" || getValueUsingChannel(d, spec.row) === rowCategory) && (typeof getValueUsingChannel(d, spec.color) === \"undefined\" || getValueUsingChannel(d, spec.color) === colorCategory)).sort((a, b) => model.encodedPIXIProperty(\"x\", a) - model.encodedPIXIProperty(\"x\", b)).forEach((d, i, array) => {\n          const cy = min$1([max$1([model.encodedPIXIProperty(\"y\", d), 0]), rowHeight]);\n          const cx = model.encodedPIXIProperty(\"x\", d);\n          if (circular) {\n            const baselinePos = cartesianToPolar(cx, trackWidth, baselineR, trackCenterX, trackCenterY, startAngle, endAngle);\n            baselinePoints.push([baselinePos.x, baselinePos.y]);\n            if (i === 0) {\n              areaPoints.push(baselinePos.x, baselinePos.y);\n            }\n            const r = trackOuterRadius - (rowPosition + rowHeight - cy) / trackHeight * trackRingSize;\n            const pos = cartesianToPolar(cx, trackWidth, r, trackCenterX, trackCenterY, startAngle, endAngle);\n            areaPoints.push(pos.x, pos.y);\n            if (i === array.length - 1) {\n              const startR = trackOuterRadius - (rowPosition + rowHeight) / trackHeight * trackRingSize;\n              const curPos = cartesianToPolar(cx, trackWidth, startR, trackCenterX, trackCenterY, startAngle, endAngle);\n              areaPoints.push(curPos.x, curPos.y);\n            }\n            model.getMouseEventModel().addPointBasedEvent(d, [pos.x, pos.y, 1]);\n          } else {\n            if (i === 0) {\n              areaPoints.push(cx, rowPosition + rowHeight);\n            }\n            areaPoints.push(cx, rowPosition + rowHeight - cy);\n            if (i === array.length - 1) {\n              const startX = xScale(tileX);\n              areaPoints.push(cx, rowPosition + rowHeight);\n              areaPoints.push(startX, rowPosition + rowHeight);\n            }\n            model.getMouseEventModel().addPointBasedEvent(d, [cx, rowPosition + rowHeight - cy, 1]);\n          }\n        });\n        if (circular && baselinePoints.length !== 0) {\n          areaPoints.push(...baselinePoints.reverse().reduce((a, b) => a.concat(b)));\n        }\n        const color2 = model.encodedValue(\"color\", colorCategory);\n        graphics.beginFill(colorToHex(color2), constantOpacity);\n        graphics.drawPolygon(areaPoints);\n        graphics.endFill();\n      });\n    });\n  }\n}\nfunction drawRect(HGC, trackInfo, tile, model) {\n  var _a, _b, _c, _d, _e, _f;\n  const spec = model.spec();\n  const data2 = model.data();\n  const [trackWidth, trackHeight] = trackInfo.dimensions;\n  const tileSize = trackInfo.tilesetInfo.tile_size;\n  const { tileX, tileWidth } = trackInfo.getTilePosAndDimensions(tile.gos.zoomLevel, tile.gos.tilePos, tileSize);\n  const circular = spec.layout === \"circular\";\n  const trackInnerRadius = (_a = spec.innerRadius) != null ? _a : 220;\n  const trackOuterRadius = (_b = spec.outerRadius) != null ? _b : 300;\n  const startAngle = (_c = spec.startAngle) != null ? _c : 0;\n  const endAngle = (_d = spec.endAngle) != null ? _d : 360;\n  const trackRingSize = trackOuterRadius - trackInnerRadius;\n  const cx = trackWidth / 2;\n  const cy = trackHeight / 2;\n  const xScale = trackInfo._xScale;\n  const tileUnitWidth = xScale(tileX + tileWidth / tileSize) - xScale(tileX);\n  const rowCategories = (_e = model.getChannelDomainArray(\"row\")) != null ? _e : [\"___SINGLE_ROW___\"];\n  const rowHeight = trackHeight / rowCategories.length;\n  const RPAD = IsChannelDeep(spec.row) && spec.row.padding ? spec.row.padding : 0;\n  const yCategories = (_f = model.getChannelDomainArray(\"y\")) != null ? _f : [\"___SINGLE_Y_POSITION___\"];\n  const cellHeight = rowHeight / yCategories.length - RPAD * 2;\n  const g = tile.graphics;\n  data2.forEach((d) => {\n    var _a2;\n    const rowPosition = model.encodedPIXIProperty(\"row\", d) + RPAD;\n    const x = model.encodedPIXIProperty(\"x\", d);\n    const color2 = model.encodedPIXIProperty(\"color\", d);\n    const stroke = model.encodedPIXIProperty(\"stroke\", d);\n    const strokeWidth = model.encodedPIXIProperty(\"strokeWidth\", d);\n    const opacity = model.encodedPIXIProperty(\"opacity\", d);\n    const rectWidth = model.encodedPIXIProperty(\"width\", d, { markWidth: tileUnitWidth });\n    const rectHeight = model.encodedPIXIProperty(\"height\", d, { markHeight: cellHeight });\n    const y = model.encodedPIXIProperty(\"y\", d);\n    const alphaTransition = model.markVisibility(d, {\n      width: rectWidth,\n      zoomLevel: trackInfo._xScale.invert(trackWidth) - trackInfo._xScale.invert(0)\n    });\n    const actualOpacity = Math.min(alphaTransition, opacity);\n    if (actualOpacity === 0 || rectHeight === 0 || rectWidth <= 1e-4) {\n      return;\n    }\n    const [xs, xe, ys, ye] = [\n      x,\n      x + rectWidth,\n      rowPosition + rowHeight - y - rectHeight / 2,\n      rowPosition + rowHeight - y + rectHeight / 2\n    ];\n    const absoluteHeight = (_a2 = model.visualPropertyByChannel(\"size\", d)) != null ? _a2 : void 0;\n    g.lineStyle(strokeWidth, colorToHex(stroke), actualOpacity, 0.5);\n    let polygonForMouseEvent = [];\n    if (circular) {\n      if (xe < 0 || trackWidth < xs) {\n        return;\n      }\n      let farR = trackOuterRadius - ys / trackHeight * trackRingSize;\n      let nearR = trackOuterRadius - ye / trackHeight * trackRingSize;\n      if (absoluteHeight) {\n        const midR = trackOuterRadius - (rowPosition + y) / trackHeight * trackRingSize;\n        farR = midR - absoluteHeight / 2;\n        nearR = midR + absoluteHeight / 2;\n      }\n      const sPos = cartesianToPolar(xs, trackWidth, nearR, cx, cy, startAngle, endAngle);\n      const startRad = valueToRadian(xs, trackWidth, startAngle, endAngle);\n      const endRad = valueToRadian(xe, trackWidth, startAngle, endAngle);\n      g.beginFill(colorToHex(color2 === \"none\" ? \"white\" : color2), color2 === \"none\" ? 0 : actualOpacity);\n      g.moveTo(sPos.x, sPos.y);\n      g.arc(cx, cy, nearR, startRad, endRad, true);\n      g.arc(cx, cy, farR, endRad, startRad, false);\n      polygonForMouseEvent = Array.from(g.currentPath.points);\n      g.closePath();\n    } else {\n      g.beginFill(colorToHex(color2 === \"none\" ? \"white\" : color2), color2 === \"none\" ? 0 : actualOpacity);\n      g.drawRect(xs, ys, xe - xs, ye - ys);\n      polygonForMouseEvent = [xs, ys, xs, ye, xe, ye, xe, ys];\n    }\n    model.getMouseEventModel().addPolygonBasedEvent(d, polygonForMouseEvent);\n  });\n}\nfunction rectProperty(gm, propertyKey, datum, additionalInfo) {\n  var _a;\n  switch (propertyKey) {\n    case \"width\":\n      const width = gm.visualPropertyByChannel(\"xe\", datum) ? gm.visualPropertyByChannel(\"xe\", datum) - gm.visualPropertyByChannel(\"x\", datum) : additionalInfo == null ? void 0 : additionalInfo.markWidth;\n      return width === 0 ? 0.1 : width;\n    case \"height\":\n      return (_a = gm.visualPropertyByChannel(\"size\", datum)) != null ? _a : additionalInfo == null ? void 0 : additionalInfo.markHeight;\n    default:\n      return void 0;\n  }\n}\nfunction drawTriangle(g, model, trackWidth, trackHeight) {\n  var _a, _b, _c, _d, _e, _f, _g;\n  const spec = model.spec();\n  if (!spec.width || !spec.height) {\n    console.warn(\"Size of a track is not properly determined, so visual mark cannot be rendered\");\n    return;\n  }\n  const data2 = model.data();\n  const zoomLevel = model.getChannelScale(\"x\").invert(trackWidth) - model.getChannelScale(\"x\").invert(0);\n  const circular = spec.layout === \"circular\";\n  const trackInnerRadius = (_a = spec.innerRadius) != null ? _a : 220;\n  const trackOuterRadius = (_b = spec.outerRadius) != null ? _b : 300;\n  const startAngle = (_c = spec.startAngle) != null ? _c : 0;\n  const endAngle = (_d = spec.endAngle) != null ? _d : 360;\n  const trackRingSize = trackOuterRadius - trackInnerRadius;\n  const cx = trackWidth / 2;\n  const cy = trackHeight / 2;\n  const rowCategories = (_e = model.getChannelDomainArray(\"row\")) != null ? _e : [\"___SINGLE_ROW___\"];\n  const rowHeight = trackHeight / rowCategories.length;\n  const yCategories = (_f = model.getChannelDomainArray(\"y\")) != null ? _f : [\"___SINGLE_Y___\"];\n  const triHeight = (_g = model.encodedValue(\"size\")) != null ? _g : circular ? trackRingSize / rowCategories.length / yCategories.length : rowHeight / yCategories.length;\n  rowCategories.forEach((rowCategory) => {\n    const rowPosition = model.encodedValue(\"row\", rowCategory);\n    data2.filter((d) => !getValueUsingChannel(d, spec.row) || getValueUsingChannel(d, spec.row) === rowCategory).forEach((d) => {\n      var _a2, _b2, _c2;\n      const x = model.encodedPIXIProperty(\"x\", d);\n      const xe = model.encodedPIXIProperty(\"xe\", d);\n      const markWidth = (_a2 = model.encodedPIXIProperty(\"size\", d)) != null ? _a2 : xe === void 0 ? triHeight : xe - x;\n      const y = model.encodedPIXIProperty(\"y\", d);\n      const strokeWidth = model.encodedPIXIProperty(\"strokeWidth\", d);\n      const stroke = model.encodedPIXIProperty(\"stroke\", d);\n      const color2 = model.encodedPIXIProperty(\"color\", d);\n      const opacity = model.encodedPIXIProperty(\"opacity\", d);\n      let polygon = [];\n      if (circular) {\n        let x0 = x ? x : xe - markWidth;\n        let x1 = xe ? xe : x + markWidth;\n        let xm = (x0 + x1) / 2;\n        const rm = trackOuterRadius - (rowPosition + rowHeight - y) / trackHeight * trackRingSize;\n        const r0 = rm - triHeight / 2;\n        const r1 = rm + triHeight / 2;\n        if (((_b2 = spec.style) == null ? void 0 : _b2.align) === \"right\" && !xe) {\n          x0 -= markWidth;\n          x1 -= markWidth;\n          xm -= markWidth;\n        }\n        if (spec.mark === \"triangleLeft\") {\n          const p0 = cartesianToPolar(x1, trackWidth, r0, cx, cy, startAngle, endAngle);\n          const p1 = cartesianToPolar(x0, trackWidth, rm, cx, cy, startAngle, endAngle);\n          const p2 = cartesianToPolar(x1, trackWidth, r1, cx, cy, startAngle, endAngle);\n          const p3 = cartesianToPolar(x1, trackWidth, r0, cx, cy, startAngle, endAngle);\n          polygon = [p0.x, p0.y, p1.x, p1.y, p2.x, p2.y, p3.x, p3.y];\n        } else if (spec.mark === \"triangleRight\") {\n          const p0 = cartesianToPolar(x0, trackWidth, r0, cx, cy, startAngle, endAngle);\n          const p1 = cartesianToPolar(x1, trackWidth, rm, cx, cy, startAngle, endAngle);\n          const p2 = cartesianToPolar(x0, trackWidth, r1, cx, cy, startAngle, endAngle);\n          const p3 = cartesianToPolar(x0, trackWidth, r0, cx, cy, startAngle, endAngle);\n          polygon = [p0.x, p0.y, p1.x, p1.y, p2.x, p2.y, p3.x, p3.y];\n        } else if (spec.mark === \"triangleBottom\") {\n          x0 = xm - markWidth / 2;\n          x1 = xm + markWidth / 2;\n          const p0 = cartesianToPolar(x0, trackWidth, r1, cx, cy, startAngle, endAngle);\n          const p1 = cartesianToPolar(x1, trackWidth, r1, cx, cy, startAngle, endAngle);\n          const p2 = cartesianToPolar(xm, trackWidth, r0, cx, cy, startAngle, endAngle);\n          const p3 = cartesianToPolar(x0, trackWidth, r1, cx, cy, startAngle, endAngle);\n          polygon = [p0.x, p0.y, p1.x, p1.y, p2.x, p2.y, p3.x, p3.y];\n        }\n        const alphaTransition = model.markVisibility(d, { width: x1 - x0, zoomLevel });\n        const actualOpacity = Math.min(alphaTransition, opacity);\n        g.lineStyle(strokeWidth, colorToHex(stroke), x1 - x0 > 2 ? actualOpacity : 0, 0);\n        g.beginFill(colorToHex(color2), actualOpacity);\n        g.drawPolygon(polygon);\n        g.endFill();\n      } else {\n        let x0 = x ? x : xe - markWidth;\n        let x1 = xe ? xe : x + markWidth;\n        let xm = x0 + (x1 - x0) / 2;\n        const ym = rowPosition + rowHeight - y;\n        const y0 = rowPosition + rowHeight - y - triHeight / 2;\n        const y1 = rowPosition + rowHeight - y + triHeight / 2;\n        if (((_c2 = spec.style) == null ? void 0 : _c2.align) === \"right\" && !xe) {\n          x0 -= markWidth;\n          x1 -= markWidth;\n          xm -= markWidth;\n        }\n        polygon = {\n          triangleLeft: [x1, y0, x0, ym, x1, y1, x1, y0],\n          triangleRight: [x0, y0, x1, ym, x0, y1, x0, y0],\n          triangleBottom: [x0, y0, x1, y0, xm, y1, x0, y0]\n        }[spec.mark];\n        const alphaTransition = model.markVisibility(d, { width: x1 - x0, zoomLevel });\n        const actualOpacity = Math.min(alphaTransition, opacity);\n        g.lineStyle(strokeWidth, colorToHex(stroke), x1 - x0 > 2 ? actualOpacity : 0, 0.5);\n        g.beginFill(colorToHex(color2), actualOpacity);\n        g.drawPolygon(polygon);\n        g.endFill();\n      }\n      model.getMouseEventModel().addPolygonBasedEvent(d, polygon);\n    });\n  });\n}\nconst TEXT_STYLE_GLOBAL = {\n  fontSize: \"12px\",\n  fontFamily: \"sans-serif\",\n  fontWeight: \"normal\",\n  fill: \"black\",\n  background: \"white\",\n  lineJoin: \"round\",\n  stroke: \"#ffffff\",\n  strokeThickness: 0\n};\nfunction drawText(HGC, trackInfo, tile, model) {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j;\n  const spec = model.spec();\n  const data2 = model.data();\n  const [trackWidth, trackHeight] = trackInfo.dimensions;\n  const circular = spec.layout === \"circular\";\n  const trackInnerRadius = (_a = spec.innerRadius) != null ? _a : 220;\n  const trackOuterRadius = (_b = spec.outerRadius) != null ? _b : 300;\n  const startAngle = (_c = spec.startAngle) != null ? _c : 0;\n  const endAngle = (_d = spec.endAngle) != null ? _d : 360;\n  const trackRingSize = trackOuterRadius - trackInnerRadius;\n  const tcx = trackWidth / 2;\n  const tcy = trackHeight / 2;\n  const rowCategories = (_e = model.getChannelDomainArray(\"row\")) != null ? _e : [\"___SINGLE_ROW___\"];\n  const rowHeight = trackHeight / rowCategories.length;\n  const dx = (_g = (_f = spec.style) == null ? void 0 : _f.dx) != null ? _g : 0;\n  const dy = (_i = (_h = spec.style) == null ? void 0 : _h.dy) != null ? _i : 0;\n  const textAnchor = !((_j = spec.style) == null ? void 0 : _j.textAnchor) ? \"middle\" : spec.style.textAnchor;\n  if (IsStackedMark(spec)) {\n    if (circular) {\n      return;\n    }\n    const rowGraphics = tile.graphics;\n    const genomicChannel = model.getGenomicChannel();\n    if (!genomicChannel || !genomicChannel.field) {\n      console.warn(\"Genomic field is not provided in the specification\");\n      return;\n    }\n    const pivotedData = group(data2, (d) => d[genomicChannel.field]);\n    const xKeys = [...pivotedData.keys()];\n    xKeys.forEach((k) => {\n      var _a2;\n      let prevYEnd = 0;\n      (_a2 = pivotedData.get(k)) == null ? void 0 : _a2.forEach((d) => {\n        var _a3, _b2, _c2, _d2, _e2, _f2, _g2, _h2;\n        const text = model.encodedPIXIProperty(\"text\", d);\n        const color2 = model.encodedPIXIProperty(\"color\", d);\n        const x = model.encodedPIXIProperty(\"x\", d) + dx;\n        const xe = model.encodedPIXIProperty(\"xe\", d) + dx;\n        const cx = model.encodedPIXIProperty(\"x-center\", d) + dx;\n        const y = model.encodedPIXIProperty(\"y\", d) + dy;\n        const size = model.encodedPIXIProperty(\"size\", d);\n        const stroke = model.encodedPIXIProperty(\"stroke\", d);\n        const strokeWidth = model.encodedPIXIProperty(\"strokeWidth\", d);\n        const opacity = model.encodedPIXIProperty(\"opacity\", d);\n        if (cx < 0 || cx > trackWidth) {\n          return;\n        }\n        if (trackInfo.textsBeingUsed > 1e3) {\n          return;\n        }\n        const localTextStyle = {\n          ...TEXT_STYLE_GLOBAL,\n          fontSize: size != null ? size : ((_a3 = spec.style) == null ? void 0 : _a3.textFontSize) ? `${(_b2 = spec.style) == null ? void 0 : _b2.textFontSize}px` : TEXT_STYLE_GLOBAL.fontSize,\n          stroke: (_d2 = stroke != null ? stroke : (_c2 = spec.style) == null ? void 0 : _c2.textStroke) != null ? _d2 : TEXT_STYLE_GLOBAL.stroke,\n          strokeThickness: (_f2 = strokeWidth != null ? strokeWidth : (_e2 = spec.style) == null ? void 0 : _e2.textStrokeWidth) != null ? _f2 : TEXT_STYLE_GLOBAL.strokeThickness,\n          fontWeight: (_h2 = (_g2 = spec.style) == null ? void 0 : _g2.textFontWeight) != null ? _h2 : TEXT_STYLE_GLOBAL.fontWeight\n        };\n        const textStyleObj = new HGC.libraries.PIXI.TextStyle(localTextStyle);\n        let textGraphic;\n        if (trackInfo.textGraphics.length > trackInfo.textsBeingUsed) {\n          textGraphic = trackInfo.textGraphics[trackInfo.textsBeingUsed];\n          textGraphic.style.fill = color2;\n          textGraphic.visible = true;\n          textGraphic.text = text;\n          textGraphic.alpha = 1;\n        } else {\n          textGraphic = new HGC.libraries.PIXI.Text(text, {\n            ...localTextStyle,\n            fill: color2\n          });\n          trackInfo.textGraphics.push(textGraphic);\n        }\n        const metric = HGC.libraries.PIXI.TextMetrics.measureText(text, textStyleObj);\n        trackInfo.textsBeingUsed++;\n        const alphaTransition = model.markVisibility(d, {\n          ...metric,\n          zoomLevel: trackInfo._xScale.invert(trackWidth) - trackInfo._xScale.invert(0)\n        });\n        const actualOpacity = Math.min(alphaTransition, opacity);\n        if (!text || actualOpacity === 0) {\n          trackInfo.textsBeingUsed--;\n          textGraphic.visible = false;\n          return;\n        }\n        textGraphic.alpha = actualOpacity;\n        textGraphic.resolution = 8;\n        textGraphic.updateText();\n        textGraphic.texture.baseTexture.scaleMode = HGC.libraries.PIXI.SCALE_MODES.LINEAR;\n        const sprite = new HGC.libraries.PIXI.Sprite(textGraphic.texture);\n        sprite.x = x;\n        sprite.y = rowHeight - y - prevYEnd;\n        sprite.width = xe - x;\n        sprite.height = y;\n        rowGraphics.addChild(sprite);\n        prevYEnd += y;\n      });\n    });\n  } else {\n    rowCategories.forEach((rowCategory) => {\n      const rowGraphics = tile.graphics;\n      const rowPosition = model.encodedValue(\"row\", rowCategory);\n      data2.filter((d) => !getValueUsingChannel(d, spec.row) || getValueUsingChannel(d, spec.row) === rowCategory).forEach((d) => {\n        var _a2, _b2, _c2, _d2, _e2, _f2, _g2, _h2;\n        const text = model.encodedPIXIProperty(\"text\", d);\n        const color2 = model.encodedPIXIProperty(\"color\", d);\n        const cx = model.encodedPIXIProperty(\"x-center\", d) + dx;\n        const y = model.encodedPIXIProperty(\"y\", d) + dy;\n        const size = model.encodedPIXIProperty(\"size\", d);\n        const stroke = model.encodedPIXIProperty(\"stroke\", d);\n        const strokeWidth = model.encodedPIXIProperty(\"strokeWidth\", d);\n        const opacity = model.encodedPIXIProperty(\"opacity\", d);\n        if (cx < 0 || cx > trackWidth) {\n          return;\n        }\n        if (trackInfo.textsBeingUsed > 1e3) {\n          return;\n        }\n        const localTextStyle = {\n          ...TEXT_STYLE_GLOBAL,\n          fontSize: size != null ? size : ((_a2 = spec.style) == null ? void 0 : _a2.textFontSize) ? `${(_b2 = spec.style) == null ? void 0 : _b2.textFontSize}px` : TEXT_STYLE_GLOBAL.fontSize,\n          stroke: (_d2 = stroke != null ? stroke : (_c2 = spec.style) == null ? void 0 : _c2.textStroke) != null ? _d2 : TEXT_STYLE_GLOBAL.stroke,\n          strokeThickness: (_f2 = strokeWidth != null ? strokeWidth : (_e2 = spec.style) == null ? void 0 : _e2.textStrokeWidth) != null ? _f2 : TEXT_STYLE_GLOBAL.strokeThickness,\n          fontWeight: (_h2 = (_g2 = spec.style) == null ? void 0 : _g2.textFontWeight) != null ? _h2 : TEXT_STYLE_GLOBAL.fontWeight\n        };\n        const textStyleObj = new HGC.libraries.PIXI.TextStyle(localTextStyle);\n        let textGraphic;\n        if (trackInfo.textGraphics.length > trackInfo.textsBeingUsed) {\n          textGraphic = trackInfo.textGraphics[trackInfo.textsBeingUsed];\n          textGraphic.style.fill = color2;\n          textGraphic.visible = true;\n          textGraphic.text = text;\n          textGraphic.alpha = 1;\n        } else {\n          textGraphic = new HGC.libraries.PIXI.Text(text, {\n            ...localTextStyle,\n            fill: color2\n          });\n          trackInfo.textGraphics.push(textGraphic);\n        }\n        const metric = HGC.libraries.PIXI.TextMetrics.measureText(text, textStyleObj);\n        trackInfo.textsBeingUsed++;\n        const alphaTransition = model.markVisibility(d, {\n          ...metric,\n          zoomLevel: trackInfo._xScale.invert(trackWidth) - trackInfo._xScale.invert(0)\n        });\n        const actualOpacity = Math.min(alphaTransition, opacity);\n        if (!text || actualOpacity === 0) {\n          trackInfo.textsBeingUsed--;\n          textGraphic.visible = false;\n          return;\n        }\n        textGraphic.alpha = actualOpacity;\n        textGraphic.anchor.y = 0.5;\n        textGraphic.anchor.x = textAnchor === \"middle\" ? 0.5 : textAnchor === \"start\" ? 0 : 1;\n        let polygonForMouseEvents = [];\n        if (circular) {\n          const r = trackOuterRadius - (rowPosition + rowHeight - y) / trackHeight * trackRingSize;\n          const centerPos = cartesianToPolar(cx, trackWidth, r, tcx, tcy, startAngle, endAngle);\n          textGraphic.x = centerPos.x;\n          textGraphic.y = centerPos.y;\n          textGraphic.resolution = 4;\n          const tw = metric.width / (2 * r * Math.PI) * trackWidth;\n          let [minX, maxX] = [cx - tw / 2, cx + tw / 2];\n          if (minX < 0) {\n            const gap = -minX;\n            minX = 0;\n            maxX += gap;\n          } else if (maxX > trackWidth) {\n            const gap = maxX - trackWidth;\n            maxX = trackWidth;\n            minX -= gap;\n          }\n          const ropePoints = [];\n          const eventPointsFar = [];\n          const eventPointsNear = [];\n          for (let i = maxX; i >= minX; i -= tw / 10) {\n            const p = cartesianToPolar(i, trackWidth, r, tcx, tcy, startAngle, endAngle);\n            ropePoints.push(new HGC.libraries.PIXI.Point(p.x, p.y));\n            const pFar = cartesianToPolar(i, trackWidth, r + metric.height / 2, tcx, tcy, startAngle, endAngle);\n            const pNear = cartesianToPolar(i, trackWidth, r - metric.height / 2, tcx, tcy, startAngle, endAngle);\n            eventPointsFar.push(pFar.x, pFar.y);\n            if (i === maxX) {\n              eventPointsNear.push(pFar.y, pFar.x);\n            }\n            eventPointsNear.push(pNear.y, pNear.x);\n          }\n          textGraphic.updateText();\n          const rope = new HGC.libraries.PIXI.SimpleRope(textGraphic.texture, ropePoints);\n          rope.alpha = actualOpacity;\n          rowGraphics.addChild(rope);\n          eventPointsNear.reverse();\n          polygonForMouseEvents = eventPointsFar.concat(eventPointsNear);\n        } else {\n          textGraphic.position.x = cx;\n          textGraphic.position.y = rowPosition + rowHeight - y;\n          rowGraphics.addChild(textGraphic);\n          const { height: h, width: w } = metric;\n          const ys = textGraphic.position.y - h / 2;\n          const ye = ys + h;\n          let xs = 0;\n          let xe = 0;\n          if (textAnchor === \"start\") {\n            xs = cx;\n            xe = cx + w;\n          } else if (textAnchor === \"middle\") {\n            xs = cx - w / 2;\n            xe = cx + w / 2;\n          } else {\n            xs = cx - w;\n            xe = cx;\n          }\n          polygonForMouseEvents = [xs, ys, xs, ye, xe, ye, xe, ys];\n        }\n        model.getMouseEventModel().addPolygonBasedEvent(d, polygonForMouseEvents);\n      });\n    });\n  }\n}\nfunction drawRule(HGC, trackInfo, tile, model) {\n  var _a, _b, _c, _d, _e, _f, _g, _h;\n  const spec = model.spec();\n  const data2 = model.data();\n  const [trackWidth, trackHeight] = trackInfo.dimensions;\n  const circular = spec.layout === \"circular\";\n  const trackInnerRadius = (_a = spec.innerRadius) != null ? _a : 220;\n  const trackOuterRadius = (_b = spec.outerRadius) != null ? _b : 300;\n  const startAngle = (_c = spec.startAngle) != null ? _c : 0;\n  const endAngle = (_d = spec.endAngle) != null ? _d : 360;\n  const trackRingSize = trackOuterRadius - trackInnerRadius;\n  const cx = trackWidth / 2;\n  const cy = trackHeight / 2;\n  const rowCategories = (_e = model.getChannelDomainArray(\"row\")) != null ? _e : [\"___SINGLE_ROW___\"];\n  const rowHeight = trackHeight / rowCategories.length;\n  const dashed = (_f = spec.style) == null ? void 0 : _f.dashed;\n  const linePattern = (_g = spec.style) == null ? void 0 : _g.linePattern;\n  const curved = (_h = spec.style) == null ? void 0 : _h.curve;\n  const g = tile.graphics;\n  rowCategories.forEach((rowCategory) => {\n    const rowPosition = model.encodedValue(\"row\", rowCategory);\n    data2.filter((d) => !getValueUsingChannel(d, spec.row) || getValueUsingChannel(d, spec.row) === rowCategory).forEach((d) => {\n      const x = model.encodedPIXIProperty(\"x\", d);\n      const xe = model.encodedPIXIProperty(\"xe\", d);\n      const y = model.encodedPIXIProperty(\"y\", d);\n      const color2 = model.encodedPIXIProperty(\"color\", d);\n      const strokeWidth = model.encodedPIXIProperty(\"strokeWidth\", d);\n      const opacity = model.encodedPIXIProperty(\"opacity\", d);\n      const alphaTransition = model.markVisibility(d, {\n        width: xe - x,\n        zoomLevel: trackInfo._xScale.invert(trackWidth) - trackInfo._xScale.invert(0)\n      });\n      const actualOpacity = Math.min(alphaTransition, opacity);\n      g.lineStyle(strokeWidth, colorToHex(color2), actualOpacity, 0.5);\n      if (!xe && (!spec.y || !(\"field\" in spec.y))) {\n        if (circular) {\n          return;\n        } else {\n          if (dashed) {\n            const [dashSize, gapSize] = dashed;\n            let curPos = 0;\n            do {\n              g.moveTo(x, curPos);\n              g.lineTo(x, curPos + dashSize);\n              curPos += dashSize + gapSize;\n            } while (curPos < trackHeight);\n          } else {\n            g.moveTo(x, 0);\n            g.lineTo(x, trackHeight);\n          }\n        }\n      } else if (!xe && y) {\n        if (circular) {\n          g.lineStyle(strokeWidth, colorToHex(color2), 0, 0.5);\n          const midR = trackOuterRadius - (rowPosition + y) / trackHeight * trackRingSize;\n          const farR = midR + strokeWidth / 2;\n          const nearR = midR - strokeWidth / 2;\n          const sPos = cartesianToPolar(0, trackWidth, nearR, cx, cy, startAngle, endAngle);\n          const startRad = valueToRadian(0, trackWidth, startAngle, endAngle);\n          const endRad = valueToRadian(trackWidth, trackWidth, startAngle, endAngle);\n          g.beginFill(colorToHex(color2), actualOpacity);\n          g.moveTo(sPos.x, sPos.y);\n          g.arc(cx, cy, nearR, startRad, endRad, true);\n          g.arc(cx, cy, farR, endRad, startRad, false);\n          g.closePath();\n        } else {\n          if (dashed) {\n            const [dashSize, gapSize] = dashed;\n            let curPos = 0;\n            do {\n              g.moveTo(curPos, rowPosition + rowHeight - y);\n              g.lineTo(curPos + dashSize, rowPosition + rowHeight - y);\n              curPos += dashSize + gapSize;\n            } while (curPos < trackWidth);\n          } else {\n            g.moveTo(0, rowPosition + rowHeight - y);\n            g.lineTo(trackWidth, rowPosition + rowHeight - y);\n          }\n        }\n      } else {\n        if (circular) {\n          if (strokeWidth === 0) {\n            return;\n          }\n          g.lineStyle(strokeWidth, colorToHex(color2), 0, 0.5);\n          const midR = trackOuterRadius - (rowPosition + y) / trackHeight * trackRingSize;\n          const farR = midR + strokeWidth / 2;\n          const nearR = midR - strokeWidth / 2;\n          const sPos = cartesianToPolar(x, trackWidth, nearR, cx, cy, startAngle, endAngle);\n          const startRad = valueToRadian(x, trackWidth, startAngle, endAngle);\n          const endRad = valueToRadian(xe, trackWidth, startAngle, endAngle);\n          g.beginFill(colorToHex(color2), actualOpacity);\n          g.moveTo(sPos.x, sPos.y);\n          g.arc(cx, cy, nearR, startRad, endRad, true);\n          g.arc(cx, cy, farR, endRad, startRad, false);\n          g.closePath();\n        } else if (dashed) {\n          const [dashSize, gapSize] = dashed;\n          let curPos = x;\n          do {\n            g.moveTo(curPos, rowPosition + rowHeight - y);\n            g.lineTo(curPos + dashSize, rowPosition + rowHeight - y);\n            curPos += dashSize + gapSize;\n          } while (curPos < xe);\n        } else {\n          if (curved === void 0) {\n            g.moveTo(x, rowPosition + rowHeight - y);\n            g.lineTo(xe, rowPosition + rowHeight - y);\n          } else if (curved === \"top\") {\n            const CURVE_HEIGHT = 2;\n            const xm = x + (xe - x) / 2;\n            g.moveTo(x, rowPosition + rowHeight - y + CURVE_HEIGHT / 2);\n            g.lineTo(xm, rowPosition + rowHeight - y - CURVE_HEIGHT / 2);\n            g.moveTo(xm, rowPosition + rowHeight - y - CURVE_HEIGHT / 2);\n            g.lineTo(xe, rowPosition + rowHeight - y + CURVE_HEIGHT / 2);\n          }\n        }\n        if (linePattern && curved === void 0 && !circular) {\n          const { type: pType, size: pSize } = linePattern;\n          let curPos = Math.max(x, 0);\n          g.lineStyle(0);\n          const PATTERN_GAP_SIZE = pSize * 2;\n          let count2 = 0;\n          while (curPos < Math.min(xe, trackWidth) && count2 < 100) {\n            const x0 = curPos;\n            const x1 = curPos + pSize;\n            const ym = rowPosition + rowHeight - y;\n            const y0 = ym - pSize / 2;\n            const y1 = ym + pSize / 2;\n            g.beginFill(colorToHex(color2), actualOpacity);\n            g.drawPolygon(pType === \"triangleLeft\" ? [x1, y0, x0, ym, x1, y1, x1, y0] : [x0, y0, x1, ym, x0, y1, x0, y0]);\n            g.endFill();\n            curPos += pSize + PATTERN_GAP_SIZE;\n            count2++;\n          }\n        }\n      }\n    });\n  });\n}\nfunction drawEdgeBundling(g, trackInfo, model) {\n  var _a, _b, _c, _d;\n  const spec = model.spec();\n  if (!spec.width || !spec.height) {\n    console.warn(\"Size of a track is not properly determined, so visual mark cannot be rendered\");\n    return;\n  }\n  const data2 = model.data();\n  const [trackWidth, trackHeight] = trackInfo.dimensions;\n  const circular = spec.layout === \"circular\";\n  const trackInnerRadius = (_a = spec.innerRadius) != null ? _a : 220;\n  const trackOuterRadius = (_b = spec.outerRadius) != null ? _b : 300;\n  const startAngle = (_c = spec.startAngle) != null ? _c : 0;\n  const endAngle = (_d = spec.endAngle) != null ? _d : 360;\n  const trackRingSize = trackOuterRadius - trackInnerRadius;\n  const tcx = trackWidth / 2;\n  const tcy = trackHeight / 2;\n  data2.forEach((d) => {\n    const x = model.encodedPIXIProperty(\"x\", d);\n    const xe = model.encodedPIXIProperty(\"xe\", d);\n    const stroke = model.encodedPIXIProperty(\"stroke\", d);\n    const strokeWidth = model.encodedPIXIProperty(\"strokeWidth\", d);\n    const opacity = model.encodedPIXIProperty(\"opacity\", d);\n    g.lineStyle(strokeWidth, colorToHex(stroke), opacity, 0.5);\n    if (circular) {\n      const r = trackOuterRadius - trackRingSize / trackHeight;\n      const posS = cartesianToPolar(x, trackWidth, r, tcx, tcy, startAngle, endAngle);\n      const posE = cartesianToPolar(xe, trackWidth, r, tcx, tcy, startAngle, endAngle);\n      const x1 = posS.x;\n      const y1 = posS.y;\n      const x4 = posE.x;\n      const y4 = posE.y;\n      g.moveTo(x1, y1);\n      g.lineTo(x4, y4);\n    } else {\n      const midX = (x + xe) / 2;\n      g.beginFill(colorToHex(\"white\"), 0);\n      g.arc(midX, 0, (xe - x) / 2, -Math.PI, Math.PI);\n      g.closePath();\n    }\n  });\n}\nfunction drawWithinLink(g, trackInfo, model) {\n  var _a, _b, _c, _d, _e, _f, _g, _h;\n  if (((_a = model.spec().style) == null ? void 0 : _a.linkStyle) === \"experimentalEdgeBundling\") {\n    drawEdgeBundling(g, trackInfo, model);\n    return;\n  }\n  const spec = model.spec();\n  if (!spec.width || !spec.height) {\n    console.warn(\"Size of a track is not properly determined, so visual mark cannot be rendered\");\n    return;\n  }\n  const data2 = model.data();\n  const [trackWidth, trackHeight] = trackInfo.dimensions;\n  const circular = spec.layout === \"circular\";\n  const trackInnerRadius = (_b = spec.innerRadius) != null ? _b : 220;\n  const trackOuterRadius = (_c = spec.outerRadius) != null ? _c : 300;\n  const startAngle = (_d = spec.startAngle) != null ? _d : 0;\n  const endAngle = (_e = spec.endAngle) != null ? _e : 360;\n  const trackRingSize = trackOuterRadius - trackInnerRadius;\n  const tcx = trackWidth / 2;\n  const tcy = trackHeight / 2;\n  const rowCategories = (_f = model.getChannelDomainArray(\"row\")) != null ? _f : [\"___SINGLE_ROW___\"];\n  const rowHeight = trackHeight / rowCategories.length;\n  const MIN_HEIGHT = (_h = (_g = spec.style) == null ? void 0 : _g.linkMinHeight) != null ? _h : 0.5;\n  rowCategories.forEach((rowCategory) => {\n    const rowPosition = model.encodedValue(\"row\", rowCategory);\n    data2.filter((d) => !getValueUsingChannel(d, spec.row) || getValueUsingChannel(d, spec.row) === rowCategory).forEach((d) => {\n      var _a2, _b2, _c2, _d2, _e2;\n      let x = model.encodedPIXIProperty(\"x\", d);\n      let xe = model.encodedPIXIProperty(\"xe\", d);\n      let x1 = model.encodedPIXIProperty(\"x1\", d);\n      let x1e = model.encodedPIXIProperty(\"x1e\", d);\n      const y = model.encodedPIXIProperty(\"y\", d);\n      const stroke = model.encodedPIXIProperty(\"stroke\", d);\n      const strokeWidth = model.encodedPIXIProperty(\"strokeWidth\", d);\n      const color2 = model.encodedPIXIProperty(\"color\", d);\n      const opacity = model.encodedPIXIProperty(\"opacity\", d);\n      if (typeof xe !== \"undefined\") {\n        [x, xe] = [x, xe].sort((a, b) => a - b);\n      }\n      if (typeof x1 !== \"undefined\" && typeof x1e !== \"undefined\") {\n        [x1, x1e] = [x1, x1e].sort((a, b) => a - b);\n      }\n      const isRibbon = typeof xe !== \"undefined\" && typeof x1 !== \"undefined\" && typeof x1e !== \"undefined\" && Math.abs(x - xe) > 0.1 && Math.abs(x1 - x1e) > 0.1;\n      if (!isRibbon && xe === void 0 && !Is2DTrack(spec)) {\n        if (x1 === void 0 && x1e === void 0) {\n          return;\n        }\n        xe = x1 !== void 0 ? x1 : x1e;\n      }\n      if (!isRibbon && Math.abs(x - xe) <= 0.1 && Math.abs(x1 - x1e) <= 0.1) {\n        x = (x + xe) / 2;\n        xe = (x1 + x1e) / 2;\n      }\n      g.lineStyle(strokeWidth, colorToHex(stroke), opacity, 0.5);\n      const flipY = IsChannelDeep(spec.y) && spec.y.flip || spec.flipY;\n      const baseY = (_a2 = spec.baselineY) != null ? _a2 : rowPosition + (flipY ? 0 : rowHeight);\n      let pathForMouseEvent = [];\n      if (isRibbon) {\n        g.beginFill(color2 === \"none\" ? colorToHex(\"white\") : colorToHex(color2), color2 === \"none\" ? 0 : opacity);\n        let [_x1, _x2, _x3, _x4] = [x, xe, x1, x1e];\n        [_x1, _x2, _x3, _x4] = [_x1, _x2, _x3, _x4].sort((a, b) => a - b);\n        if (_x1 > trackWidth || _x4 < 0 || Math.abs(_x4 - _x1) < 0.5) {\n          return;\n        }\n        if (circular) {\n          if (_x1 < 0 || _x4 > trackWidth) {\n            return;\n          }\n          const r = trackOuterRadius - rowPosition / trackHeight * trackRingSize;\n          const posX = cartesianToPolar(_x1, trackWidth, r, tcx, tcy, startAngle, endAngle);\n          const posXE = cartesianToPolar(_x2, trackWidth, r, tcx, tcy, startAngle, endAngle);\n          const posX1 = cartesianToPolar(_x3, trackWidth, r, tcx, tcy, startAngle, endAngle);\n          const posX1E = cartesianToPolar(_x4, trackWidth, r, tcx, tcy, startAngle, endAngle);\n          g.moveTo(posX.x, posX.y);\n          g.bezierCurveTo(tcx, tcy, tcx, tcy, posX1E.x, posX1E.y);\n          g.arc(tcx, tcy, trackOuterRadius, positionToRadian(posX1E.x, posX1E.y, tcx, tcy), positionToRadian(posX1.x, posX1.y, tcx, tcy), false);\n          g.bezierCurveTo(tcx, tcy, tcx, tcy, posXE.x, posXE.y);\n          g.arc(tcx, tcy, trackOuterRadius, positionToRadian(posXE.x, posXE.y, tcx, tcy), positionToRadian(posX.x, posX.y, tcx, tcy), false);\n          pathForMouseEvent = Array.from(g.currentPath.points);\n          g.endFill();\n        } else {\n          g.moveTo(_x1, baseY);\n          if (!((_b2 = spec.style) == null ? void 0 : _b2.linkStyle) || ((_c2 = spec.style) == null ? void 0 : _c2.linkStyle) === \"circular\") {\n            g.arc((_x1 + _x4) / 2, baseY, (_x4 - _x1) / 2, -Math.PI, Math.PI, false);\n            g.arc((_x2 + _x3) / 2, baseY, (_x3 - _x2) / 2, Math.PI, -Math.PI, true);\n            pathForMouseEvent = Array.from(g.currentPath.points);\n            g.closePath();\n          } else {\n            g.lineTo(_x3, rowPosition + rowHeight);\n            g.bezierCurveTo(_x3 + (_x2 - _x3) / 3, rowPosition + rowHeight - (_x2 - _x3) / 2, _x3 + (_x2 - _x3) / 3 * 2, rowPosition + rowHeight - (_x2 - _x3) / 2, _x2, rowPosition + rowHeight);\n            g.lineTo(_x4, rowPosition + rowHeight);\n            g.bezierCurveTo(_x1 + (_x4 - _x1) / 3 * 2, rowPosition + rowHeight - (_x4 - _x1) / 2, _x1 + (_x4 - _x1) / 3, rowPosition + rowHeight - (_x4 - _x1) / 2, _x1, rowPosition + rowHeight);\n            pathForMouseEvent = Array.from(g.currentPath.points);\n            g.endFill();\n          }\n        }\n        model.getMouseEventModel().addPolygonBasedEvent(d, pathForMouseEvent);\n      } else {\n        const midX = (x + xe) / 2;\n        g.beginFill(colorToHex(\"white\"), 0);\n        if (circular) {\n          if (x < 0 || xe > trackWidth) {\n            return;\n          }\n          if (((_d2 = spec.style) == null ? void 0 : _d2.linkStyle) === \"straight\") {\n            const r = trackOuterRadius - rowPosition / trackHeight * trackRingSize;\n            const posS = cartesianToPolar(x, trackWidth, r, tcx, tcy, startAngle, endAngle);\n            const posE = cartesianToPolar(xe, trackWidth, r, tcx, tcy, startAngle, endAngle);\n            const x12 = posS.x;\n            const y1 = posS.y;\n            const x4 = posE.x;\n            const y4 = posE.y;\n            g.moveTo(x12, y1);\n            g.lineTo(x4, y4);\n            const length = 100;\n            const eventPoints = Array.from({ length }, (d2, i) => {\n              return {\n                x: (x4 - x12) / (length - 1) * i + x12,\n                y: (y4 - y1) / (length - 1) * i + y1\n              };\n            });\n            pathForMouseEvent = eventPoints.flatMap((d2) => [d2.x, d2.y]);\n          } else {\n            const r = trackOuterRadius - rowPosition / trackHeight * trackRingSize;\n            const posS = cartesianToPolar(x, trackWidth, r, tcx, tcy, startAngle, endAngle);\n            const posE = cartesianToPolar(xe, trackWidth, r, tcx, tcy, startAngle, endAngle);\n            const x12 = posS.x;\n            const y1 = posS.y;\n            const x2 = posS.x;\n            const y2 = posS.y;\n            const x3 = trackWidth / 2;\n            const y3 = trackHeight / 2;\n            const x4 = posE.x;\n            const y4 = posE.y;\n            g.moveTo(x12, y1);\n            const bezier = new Bezier(x12, y1, x2, y2, x3, y3, x4, y4);\n            const points = bezier.getLUT(14);\n            points.forEach((d2) => g.lineTo(d2.x, d2.y));\n            const morePoints = bezier.getLUT(1e3);\n            pathForMouseEvent = morePoints.flatMap((d2) => [d2.x, d2.y]);\n          }\n        } else {\n          if (((_e2 = spec.style) == null ? void 0 : _e2.linkStyle) === \"elliptical\") {\n            if (!(0 <= x && x <= trackWidth) && !(0 <= xe && xe <= trackWidth)) {\n              return;\n            }\n            const morePoints = [];\n            const numSteps = 1e3;\n            const constantY = IsChannelDeep(spec.y);\n            for (let step = 0; step <= numSteps; step++) {\n              const theta = Math.PI * (step / numSteps);\n              const mx = (xe - x) / 2 * Math.cos(theta) + (x + xe) / 2;\n              const my = baseY - y * Math.sin(theta) * (constantY ? 1 : Math.min(xe - x + trackWidth * MIN_HEIGHT, trackWidth) / trackWidth) * (flipY ? -1 : 1);\n              if (step % 20 === 0 || step === numSteps) {\n                if (step === 0) {\n                  g.moveTo(mx, my);\n                } else {\n                  g.lineTo(mx, my);\n                }\n              }\n              morePoints.push({ x: mx, y: my });\n            }\n            pathForMouseEvent = morePoints.flatMap((d2) => [d2.x, d2.y]);\n          } else {\n            if (xe < 0 || x > trackWidth) {\n              return;\n            }\n            g.arc(midX, baseY, (xe - x) / 2, -Math.PI, Math.PI);\n            pathForMouseEvent = Array.from(g.currentPath.points);\n            g.closePath();\n          }\n        }\n        model.getMouseEventModel().addLineBasedEvent(d, pathForMouseEvent);\n      }\n    });\n  });\n}\nfunction drawGrid(trackInfo, tm, theme) {\n  drawYGridQuantitative(trackInfo, tm, theme);\n  drawRowGrid(trackInfo, tm, theme);\n}\nfunction drawRowGrid(trackInfo, tm, theme) {\n  var _a, _b, _c, _d;\n  const spec = tm.spec();\n  if (!IsChannelDeep(spec.row) || spec.row.grid !== true) {\n    return;\n  }\n  const [trackX, trackY] = trackInfo.position;\n  const [trackWidth, trackHeight] = trackInfo.dimensions;\n  const circular = tm.spec().layout === \"circular\";\n  const trackInnerRadius = (_a = spec.innerRadius) != null ? _a : 220;\n  const trackOuterRadius = (_b = spec.outerRadius) != null ? _b : 300;\n  const startAngle = (_c = spec.startAngle) != null ? _c : 0;\n  const endAngle = (_d = spec.endAngle) != null ? _d : 360;\n  const trackRingSize = trackOuterRadius - trackInnerRadius;\n  const cx = trackWidth / 2;\n  const cy = trackHeight / 2;\n  const rowCategories = tm.getChannelDomainArray(\"row\");\n  if (!rowCategories) {\n    return;\n  }\n  const rowHeight = trackHeight / rowCategories.length;\n  if (circular && trackRingSize <= 20 || !circular && rowHeight <= 20) {\n    return;\n  }\n  const graphics = trackInfo.pBackground;\n  const strokeWidth = theme.axis.gridStrokeWidth;\n  rowCategories.forEach((rowCategory) => {\n    const rowPosition = tm.encodedValue(\"row\", rowCategory);\n    if (!circular) {\n      graphics.lineStyle(strokeWidth, colorToHex(theme.axis.gridColor), 1, 0.5);\n      const y = trackY + rowPosition + rowHeight / 2;\n      graphics.moveTo(trackX, y);\n      graphics.lineTo(trackX + trackWidth, y);\n    } else {\n      const y = rowPosition + rowHeight / 2;\n      const midR = trackOuterRadius - y / trackHeight * trackRingSize;\n      const farR = midR + strokeWidth / 2;\n      const nearR = midR - strokeWidth / 2;\n      const sPos = cartesianToPolar(0, trackWidth, nearR, cx, cy, startAngle, endAngle);\n      const startRad = valueToRadian(0, trackWidth, startAngle, endAngle);\n      const endRad = valueToRadian(trackWidth, trackWidth, startAngle, endAngle);\n      graphics.lineStyle(strokeWidth, colorToHex(\"black\"), 0, 0.5);\n      graphics.beginFill(colorToHex(theme.axis.gridColor), 1);\n      graphics.moveTo(trackX + sPos.x, trackY + sPos.y);\n      graphics.arc(trackX + cx, trackY + cy, nearR, startRad, endRad, true);\n      graphics.arc(trackX + cx, trackY + cy, farR, endRad, startRad, false);\n      graphics.closePath();\n    }\n  });\n}\nfunction drawYGridQuantitative(trackInfo, tm, theme) {\n  var _a, _b, _c, _d, _e;\n  const spec = tm.spec();\n  if (!IsChannelDeep(spec.y) || spec.y.grid !== true) {\n    return;\n  }\n  const [trackX, trackY] = trackInfo.position;\n  const [trackWidth, trackHeight] = trackInfo.dimensions;\n  const startX = trackX;\n  const endX = trackX + trackWidth;\n  const circular = tm.spec().layout === \"circular\";\n  const trackInnerRadius = (_a = spec.innerRadius) != null ? _a : 220;\n  const trackOuterRadius = (_b = spec.outerRadius) != null ? _b : 300;\n  const startAngle = (_c = spec.startAngle) != null ? _c : 0;\n  const endAngle = (_d = spec.endAngle) != null ? _d : 360;\n  const trackRingSize = trackOuterRadius - trackInnerRadius;\n  const cx = trackWidth / 2;\n  const cy = trackHeight / 2;\n  const rowCategories = (_e = tm.getChannelDomainArray(\"row\")) != null ? _e : [\"___SINGLE_ROW___\"];\n  const rowHeight = trackHeight / rowCategories.length;\n  const scale = tm.getChannelScale(\"y\");\n  const domain = tm.getChannelDomainArray(\"y\");\n  if (!scale || !domain) {\n    return;\n  }\n  if (circular && rowHeight / trackHeight * trackRingSize <= 20 || !circular && rowHeight <= 20) {\n    return;\n  }\n  const graphics = trackInfo.pBackground;\n  const strokeWidth = theme.axis.gridStrokeWidth;\n  rowCategories.forEach((rowCategory) => {\n    const rowPosition = tm.encodedValue(\"row\", rowCategory);\n    const assignedHeight = circular ? rowHeight / trackHeight * trackRingSize : rowHeight;\n    const tickCount = Math.max(Math.ceil(assignedHeight / 40), 1);\n    let ticks = scale.ticks(tickCount).filter((v) => domain[0] <= v && v <= domain[1]);\n    if (ticks.length === 1) {\n      ticks = scale.ticks(tickCount + 1).filter((v) => domain[0] <= v && v <= domain[1]);\n    }\n    if (!circular) {\n      graphics.lineStyle(strokeWidth, colorToHex(theme.axis.gridColor), 1, 0.5);\n      ticks.forEach((value) => {\n        var _a2;\n        const y = trackY + rowPosition + rowHeight - scale(value);\n        if (theme.axis.gridStrokeType === \"solid\") {\n          graphics.moveTo(startX, y);\n          graphics.lineTo(endX, y);\n        } else if (theme.axis.gridStrokeType === \"dashed\") {\n          const [line, gap] = (_a2 = theme.axis.gridStrokeDash) != null ? _a2 : [1, 1];\n          for (let i = startX; i < endX; i += line + gap) {\n            graphics.moveTo(i, y);\n            graphics.lineTo(i + line, y);\n          }\n        }\n      });\n    } else {\n      ticks.forEach((value) => {\n        const y = scale(value);\n        const midR = trackOuterRadius - (rowPosition + rowHeight - y) / trackHeight * trackRingSize;\n        const farR = midR + strokeWidth / 2;\n        const nearR = midR - strokeWidth / 2;\n        const sPos = cartesianToPolar(0, trackWidth, nearR, cx, cy, startAngle, endAngle);\n        const startRad = valueToRadian(0, trackWidth, startAngle, endAngle);\n        const endRad = valueToRadian(trackWidth, trackWidth, startAngle, endAngle);\n        graphics.lineStyle(strokeWidth, colorToHex(\"black\"), 0, 0.5);\n        graphics.beginFill(colorToHex(theme.axis.gridColor), 1);\n        graphics.moveTo(trackX + sPos.x, trackY + sPos.y);\n        graphics.arc(trackX + cx, trackY + cy, nearR, startRad, endRad, true);\n        graphics.arc(trackX + cx, trackY + cy, farR, endRad, startRad, false);\n        graphics.closePath();\n      });\n    }\n  });\n}\nconst DEFAULT_TEXT_STYLE = {\n  color: \"black\",\n  size: 10,\n  fontFamily: \"Arial\",\n  fontWeight: \"normal\",\n  stroke: \"#ffffff\",\n  strokeThickness: 0\n};\nfunction getTextStyle(style = {}) {\n  const merged = { ...DEFAULT_TEXT_STYLE, ...style };\n  const pixiTextStyle = {\n    fontSize: `${merged.size}px`,\n    fontFamily: merged.fontFamily,\n    fontWeight: merged.fontWeight === \"light\" ? \"lighter\" : merged.fontWeight,\n    fill: merged.color,\n    lineJoin: \"round\",\n    stroke: merged.stroke,\n    strokeThickness: merged.strokeThickness\n  };\n  return pixiTextStyle;\n}\nfunction drawCircularTitle(HGC, trackInfo, tile, gos, theme) {\n  var _a, _b, _c;\n  const spec = gos.spec();\n  const { title: title2 } = spec;\n  if (spec.layout !== \"circular\") {\n    return;\n  }\n  if (!title2) {\n    return;\n  }\n  const [tw, th] = trackInfo.dimensions;\n  const trackOuterRadius = (_a = spec.outerRadius) != null ? _a : 300;\n  const startAngle = (_b = spec.startAngle) != null ? _b : 0;\n  const endAngle = (_c = spec.endAngle) != null ? _c : 360;\n  const cx = tw / 2;\n  const cy = th / 2;\n  const g = tile.graphics;\n  const titleR = trackOuterRadius - 1;\n  const padding = 1;\n  const pos = cartesianToPolar(padding, tw, titleR, cx, cy, startAngle, endAngle);\n  const styleConfig = getTextStyle({\n    color: theme.track.titleColor,\n    size: 12,\n    fontFamily: theme.axis.labelFontFamily,\n    fontWeight: theme.axis.labelFontWeight\n  });\n  const textGraphic = new HGC.libraries.PIXI.Text(title2, styleConfig);\n  textGraphic.anchor.x = 1;\n  textGraphic.anchor.y = 0.5;\n  textGraphic.position.x = pos.x;\n  textGraphic.position.y = pos.y;\n  textGraphic.resolution = 4;\n  const txtStyle = new HGC.libraries.PIXI.TextStyle(styleConfig);\n  const metric = HGC.libraries.PIXI.TextMetrics.measureText(textGraphic.text, txtStyle);\n  const txtWidth = metric.width / (2 * titleR * Math.PI) * tw * 360 / (endAngle - startAngle);\n  const scaledStartX = padding;\n  const scaledEndX = padding + txtWidth;\n  const ropePoints = [];\n  for (let i = scaledEndX; i >= scaledStartX; i -= txtWidth / 10) {\n    const p = cartesianToPolar(i, tw, titleR - metric.height / 2, cx, cy, startAngle, endAngle);\n    ropePoints.push(new HGC.libraries.PIXI.Point(p.x, p.y));\n  }\n  const startRad = valueToRadian(scaledStartX, tw, startAngle, endAngle);\n  const endRad = valueToRadian(scaledEndX + padding, tw, startAngle, endAngle);\n  g.lineStyle(1, colorToHex(\"red\"), 0, 0.5);\n  g.beginFill(colorToHex(theme.track.titleBackground), 0.5);\n  g.moveTo(pos.x, pos.y);\n  g.arc(cx, cy, titleR - metric.height, startRad, endRad, true);\n  g.arc(cx, cy, titleR, endRad, startRad, false);\n  g.closePath();\n  textGraphic.updateText();\n  const rope = new HGC.libraries.PIXI.SimpleRope(textGraphic.texture, ropePoints);\n  g.addChild(rope);\n}\nfunction drawChartOutlines(HGC, trackInfo, tm, theme) {\n  var _a, _b, _c, _d;\n  const g = trackInfo.pBorder;\n  const [l, t] = trackInfo.position;\n  const [w, h] = trackInfo.dimensions;\n  g.lineStyle((_b = (_a = tm.spec().style) == null ? void 0 : _a.outlineWidth) != null ? _b : 1, colorToHex((_d = (_c = tm.spec().style) == null ? void 0 : _c.outline) != null ? _d : theme.track.outline), 1, 0.5);\n  g.beginFill(colorToHex(\"white\"), 0);\n  g.drawRect(l, t, w, h);\n  const x = tm.spec().x;\n  g.lineStyle(1, colorToHex(theme.axis.baselineColor), 1, 0.5);\n  if (IsChannelDeep(x) && x.axis === \"top\") {\n    g.moveTo(l, t);\n    g.lineTo(l + w, t);\n  } else if (IsChannelDeep(x) && x.axis === \"bottom\") {\n    g.moveTo(l, t + h);\n    g.lineTo(l + w, t + h);\n  }\n}\nfunction drawColorLegend(HGC, trackInfo, tile, tm, theme) {\n  if (!trackInfo.gLegend) {\n    return;\n  }\n  trackInfo.gLegend.selectAll(\".brush\").remove();\n  const spec = tm.spec();\n  const offset = { offsetRight: 0 };\n  if (IsChannelDeep(spec.color) && spec.color.legend) {\n    switch (spec.color.type) {\n      case \"nominal\":\n        drawColorLegendCategories(HGC, trackInfo, tile, tm, theme);\n        break;\n      case \"quantitative\":\n        drawColorLegendQuantitative(HGC, trackInfo, tile, tm, theme, \"color\", offset);\n        break;\n    }\n  }\n  if (IsChannelDeep(spec.stroke) && spec.stroke.legend) {\n    switch (spec.stroke.type) {\n      case \"quantitative\":\n        drawColorLegendQuantitative(HGC, trackInfo, tile, tm, theme, \"stroke\", offset);\n        break;\n    }\n  }\n}\nfunction drawColorLegendQuantitative(HGC, trackInfo, tile, tm, theme, channelKey, offset) {\n  const spec = tm.spec();\n  const channel = spec[channelKey];\n  if (!IsChannelDeep(channel) || channel.type !== \"quantitative\" || !channel.legend) {\n    return;\n  }\n  const [trackX, trackY] = trackInfo.position;\n  const [trackWidth, trackHeight] = trackInfo.dimensions;\n  const legendWidth = 80;\n  const legendHeight = trackHeight - 2 > 110 ? 110 : Math.max(trackHeight - 2, 40 - 2);\n  const colorBarDim = {\n    top: 10,\n    left: 55,\n    width: 20,\n    height: legendHeight - 20\n  };\n  const legendX = trackX + trackWidth - legendWidth - 1 - offset.offsetRight;\n  const legendY = trackY + 1;\n  const colorScale = tm.getChannelScale(channelKey);\n  const colorDomain = tm.getChannelDomainArray(channelKey);\n  if (!colorScale || !colorDomain) {\n    return;\n  }\n  const graphics = trackInfo.pBorder;\n  graphics.beginFill(colorToHex(theme.legend.background), theme.legend.backgroundOpacity);\n  graphics.lineStyle(1, colorToHex(theme.legend.backgroundStroke), theme.legend.backgroundOpacity, 0);\n  graphics.drawRect(legendX, legendY, legendWidth, legendHeight);\n  if (channel.title) {\n    const titleStr = channel.title;\n    const labelTextStyle2 = getTextStyle({\n      color: theme.legend.labelColor,\n      size: theme.legend.labelFontSize,\n      fontWeight: theme.legend.labelFontWeight,\n      fontFamily: theme.legend.labelFontFamily\n    });\n    const textGraphic = new HGC.libraries.PIXI.Text(titleStr, {\n      ...labelTextStyle2,\n      fontWeight: \"bold\"\n    });\n    textGraphic.anchor.x = 0;\n    textGraphic.anchor.y = 0;\n    textGraphic.position.x = legendX + 10;\n    textGraphic.position.y = legendY + 10;\n    const textStyleObj = new HGC.libraries.PIXI.TextStyle({ ...labelTextStyle2, fontWeight: \"bold\" });\n    const textMetrics = HGC.libraries.PIXI.TextMetrics.measureText(titleStr, textStyleObj);\n    graphics.addChild(textGraphic);\n    colorBarDim.top += textMetrics.height + 4;\n    colorBarDim.height -= textMetrics.height + 4;\n  }\n  const [startValue, endValue] = colorDomain;\n  const extent = endValue - startValue;\n  const scaleOffset = IsChannelDeep(channel) && channel.scaleOffset ? channel.scaleOffset : [0, 1];\n  [...Array(colorBarDim.height).keys()].forEach((y) => {\n    let value;\n    const scaleOffsetSorted = Array.from(scaleOffset).sort();\n    if (y / colorBarDim.height >= scaleOffsetSorted[1]) {\n      value = endValue;\n    } else if (y / colorBarDim.height <= scaleOffsetSorted[0]) {\n      value = startValue;\n    } else {\n      const s1 = scaleLinear().domain([colorBarDim.height * scaleOffsetSorted[0], colorBarDim.height * scaleOffsetSorted[1]]).range([0, colorBarDim.height]);\n      const s2 = scaleLinear().domain([0, colorBarDim.height]).range([startValue, endValue]);\n      value = s2(s1(y));\n    }\n    graphics.beginFill(colorToHex(colorScale(value)), 1);\n    graphics.lineStyle(1, colorToHex(theme.legend.backgroundStroke), 0, 0.5);\n    graphics.drawRect(legendX + colorBarDim.left, legendY + colorBarDim.top + colorBarDim.height - y, colorBarDim.width, 1);\n  });\n  const BRUSH_HEIGHT = 4;\n  trackInfo.colorBrushes = trackInfo.gLegend.append(\"g\").attr(\"class\", channelKey).selectAll(`.brush`).data(scaleOffset.map((d, i) => {\n    return { y: d, id: i };\n  })).enter().append(\"rect\").attr(\"class\", `brush`).attr(\"pointer-events\", \"all\").attr(\"cursor\", \"ns-resize\").attr(\"transform\", (d) => `translate(${legendX + colorBarDim.left}, ${legendY + colorBarDim.top - BRUSH_HEIGHT / 2 + colorBarDim.height - colorBarDim.height * d.y})`).attr(\"width\", `${colorBarDim.width}px`).attr(\"height\", `${BRUSH_HEIGHT}px`).attr(\"fill\", \"lightgrey\").attr(\"stroke\", \"black\").attr(\"stroke-width\", \"0.5px\").call(HGC.libraries.d3Drag.drag().on(\"start\", () => {\n    trackInfo.startEvent = HGC.libraries.d3Selection.event.sourceEvent;\n  }).on(\"drag\", (d) => {\n    if (channel && channel.scaleOffset) {\n      const endEvent = HGC.libraries.d3Selection.event.sourceEvent;\n      const diffY = trackInfo.startEvent.clientY - endEvent.clientY;\n      const newScaleOffset = [channel.scaleOffset[0], channel.scaleOffset[1]];\n      if (d.id === 0) {\n        newScaleOffset[0] += diffY / colorBarDim.height;\n      } else {\n        newScaleOffset[1] += diffY / colorBarDim.height;\n      }\n      newScaleOffset[0] = Math.min(1, Math.max(0, newScaleOffset[0]));\n      newScaleOffset[1] = Math.min(1, Math.max(0, newScaleOffset[1]));\n      trackInfo.updateScaleOffsetFromOriginalSpec(spec._renderingId, newScaleOffset, channelKey);\n      trackInfo.shareScaleOffsetAcrossTracksAndTiles(newScaleOffset, channelKey);\n      trackInfo.draw();\n      trackInfo.startEvent = HGC.libraries.d3Selection.event.sourceEvent;\n    }\n  }));\n  const tickCount = Math.max(Math.ceil(colorBarDim.height / 30), 2);\n  let ticks = colorScale.ticks(tickCount).filter((v) => colorDomain[0] <= v && v <= colorDomain[1]);\n  if (ticks.length === 1) {\n    ticks = colorScale.ticks(tickCount + 1).filter((v) => colorDomain[0] <= v && v <= colorDomain[1]);\n  }\n  const TICK_STROKE_SIZE = 1;\n  graphics.lineStyle(TICK_STROKE_SIZE, colorToHex(theme.legend.tickColor), 1, 0.5);\n  const labelTextStyle = getTextStyle({\n    color: theme.legend.labelColor,\n    size: theme.legend.labelFontSize,\n    fontWeight: theme.legend.labelFontWeight,\n    fontFamily: theme.legend.labelFontFamily\n  });\n  const tickEnd = legendX + colorBarDim.left;\n  ticks.forEach((value) => {\n    let y = legendY + colorBarDim.top + colorBarDim.height - (value - startValue) / extent * colorBarDim.height;\n    if (y === legendY + colorBarDim.top) {\n      y += TICK_STROKE_SIZE / 2;\n    } else if (y === legendY + colorBarDim.top + colorBarDim.height) {\n      y -= TICK_STROKE_SIZE / 2;\n    }\n    graphics.moveTo(tickEnd - 3, y);\n    graphics.lineTo(tickEnd, y);\n    const textGraphic = new HGC.libraries.PIXI.Text(value, labelTextStyle);\n    textGraphic.anchor.x = 1;\n    textGraphic.anchor.y = 0.5;\n    textGraphic.position.x = tickEnd - 6;\n    textGraphic.position.y = y;\n    graphics.addChild(textGraphic);\n  });\n  offset.offsetRight = trackWidth - legendX;\n}\nfunction drawColorLegendCategories(HGC, trackInfo, tile, tm, theme) {\n  var _a, _b, _c, _d, _e;\n  const spec = tm.spec();\n  if (!IsChannelDeep(spec.color) || spec.color.type !== \"nominal\" || !spec.color.legend) {\n    return;\n  }\n  const colorCategories = (_a = tm.getChannelDomainArray(\"color\")) != null ? _a : [\"___SINGLE_COLOR___\"];\n  if (colorCategories.length === 0) {\n    return;\n  }\n  const graphics = trackInfo.pBorder;\n  const paddingX = 10;\n  const paddingY = 4;\n  let cumY = paddingY;\n  let maxWidth = 0;\n  const recipe = [];\n  const labelTextStyle = getTextStyle({\n    color: theme.legend.labelColor,\n    size: theme.legend.labelFontSize,\n    fontWeight: theme.legend.labelFontWeight,\n    fontFamily: theme.legend.labelFontFamily\n  });\n  if ((_b = spec.style) == null ? void 0 : _b.inlineLegend) {\n    colorCategories.map((d) => d).reverse().forEach((category) => {\n      if (maxWidth > trackInfo.dimensions[0]) {\n        return;\n      }\n      const color2 = tm.encodedValue(\"color\", category);\n      const textGraphic = new HGC.libraries.PIXI.Text(category, labelTextStyle);\n      textGraphic.anchor.x = 1;\n      textGraphic.anchor.y = 0;\n      textGraphic.position.x = trackInfo.position[0] + trackInfo.dimensions[0] - maxWidth - paddingX;\n      textGraphic.position.y = trackInfo.position[1] + paddingY;\n      graphics.addChild(textGraphic);\n      const textStyleObj = new HGC.libraries.PIXI.TextStyle(labelTextStyle);\n      const textMetrics = HGC.libraries.PIXI.TextMetrics.measureText(category, textStyleObj);\n      if (cumY < textMetrics.height + paddingY * 3) {\n        cumY = textMetrics.height + paddingY * 3;\n      }\n      recipe.push({\n        x: trackInfo.position[0] + trackInfo.dimensions[0] - textMetrics.width - maxWidth - paddingX * 2,\n        y: trackInfo.position[1] + paddingY + textMetrics.height / 2,\n        color: color2\n      });\n      maxWidth += textMetrics.width + paddingX * 3;\n    });\n  } else {\n    if ((_c = spec.style) == null ? void 0 : _c.legendTitle) {\n      const textGraphic = new HGC.libraries.PIXI.Text((_d = spec.style) == null ? void 0 : _d.legendTitle, {\n        ...labelTextStyle,\n        fontWeight: \"bold\"\n      });\n      textGraphic.anchor.x = 1;\n      textGraphic.anchor.y = 0;\n      textGraphic.position.x = trackInfo.position[0] + trackInfo.dimensions[0] - paddingX;\n      textGraphic.position.y = trackInfo.position[1] + cumY;\n      const textStyleObj = new HGC.libraries.PIXI.TextStyle({ ...labelTextStyle, fontWeight: \"bold\" });\n      const textMetrics = HGC.libraries.PIXI.TextMetrics.measureText((_e = spec.style) == null ? void 0 : _e.legendTitle, textStyleObj);\n      graphics.addChild(textGraphic);\n      cumY += textMetrics.height + paddingY * 2;\n    }\n    colorCategories.forEach((category) => {\n      if (cumY > trackInfo.dimensions[1]) {\n        return;\n      }\n      const color2 = tm.encodedValue(\"color\", category);\n      const textGraphic = new HGC.libraries.PIXI.Text(category, labelTextStyle);\n      textGraphic.anchor.x = 1;\n      textGraphic.anchor.y = 0;\n      textGraphic.position.x = trackInfo.position[0] + trackInfo.dimensions[0] - paddingX;\n      textGraphic.position.y = trackInfo.position[1] + cumY;\n      graphics.addChild(textGraphic);\n      const textStyleObj = new HGC.libraries.PIXI.TextStyle(labelTextStyle);\n      const textMetrics = HGC.libraries.PIXI.TextMetrics.measureText(category, textStyleObj);\n      if (maxWidth < textMetrics.width + paddingX * 3) {\n        maxWidth = textMetrics.width + paddingX * 3;\n      }\n      recipe.push({\n        x: trackInfo.position[0] + trackInfo.dimensions[0] - textMetrics.width - paddingX * 2,\n        y: trackInfo.position[1] + cumY + textMetrics.height / 2,\n        color: color2\n      });\n      cumY += textMetrics.height + paddingY * 2;\n    });\n  }\n  graphics.beginFill(colorToHex(theme.legend.background), theme.legend.backgroundOpacity);\n  graphics.lineStyle(1, colorToHex(theme.legend.backgroundStroke), theme.legend.backgroundOpacity, 0);\n  graphics.drawRect(trackInfo.position[0] + trackInfo.dimensions[0] - maxWidth - 1, trackInfo.position[1] + 1, maxWidth, cumY - paddingY);\n  recipe.forEach((r) => {\n    graphics.lineStyle(1, colorToHex(\"black\"), 0, 0);\n    graphics.beginFill(colorToHex(r.color), 1);\n    graphics.drawCircle(r.x, r.y, 4);\n  });\n}\nfunction drawRowLegend(HGC, trackInfo, tile, tm, theme) {\n  var _a;\n  const spec = tm.spec();\n  if (!IsChannelDeep(spec.row) || spec.row.type !== \"nominal\" || !spec.row.legend) {\n    return;\n  }\n  const rowCategories = (_a = tm.getChannelDomainArray(\"row\")) != null ? _a : [\"___SINGLE_ROW___\"];\n  if (rowCategories.length === 0) {\n    return;\n  }\n  const graphics = trackInfo.pBorder;\n  const paddingX = 4;\n  const paddingY = 2;\n  const labelTextStyle = getTextStyle({\n    color: theme.legend.labelColor,\n    size: theme.legend.labelFontSize,\n    fontWeight: theme.legend.labelFontWeight,\n    fontFamily: theme.legend.labelFontFamily\n  });\n  rowCategories.forEach((category) => {\n    const rowPosition = tm.encodedValue(\"row\", category);\n    const textGraphic = new HGC.libraries.PIXI.Text(category, labelTextStyle);\n    textGraphic.anchor.x = 0;\n    textGraphic.anchor.y = 0;\n    textGraphic.position.x = trackInfo.position[0] + paddingX;\n    textGraphic.position.y = trackInfo.position[1] + rowPosition + paddingY;\n    graphics.addChild(textGraphic);\n    const textStyleObj = new HGC.libraries.PIXI.TextStyle(labelTextStyle);\n    const textMetrics = HGC.libraries.PIXI.TextMetrics.measureText(category, textStyleObj);\n    graphics.beginFill(colorToHex(theme.legend.background), theme.legend.backgroundOpacity);\n    graphics.lineStyle(1, colorToHex(theme.legend.backgroundStroke), 0, 0);\n    graphics.drawRect(trackInfo.position[0] + 1, trackInfo.position[1] + rowPosition + 1, textMetrics.width + paddingX * 2, textMetrics.height + paddingY * 2);\n  });\n}\nconst EXTENT_TICK_SIZE = 8;\nconst TICK_SIZE = 6;\nfunction drawLinearYAxis(HGC, trackInfo, tile, gos, theme) {\n  var _a;\n  const spec = gos.spec();\n  const CIRCULAR = spec.layout === \"circular\";\n  const yDomain = gos.getChannelDomainArray(\"y\");\n  const yRange = gos.getChannelRangeArray(\"y\");\n  if (CIRCULAR) {\n    return;\n  }\n  if (!gos.isShowYAxis() || !yDomain || !yRange) {\n    return;\n  }\n  const [tw, th] = trackInfo.dimensions;\n  const [tx, ty] = trackInfo.position;\n  const rowCategories = (_a = gos.getChannelDomainArray(\"row\")) != null ? _a : [\"___SINGLE_ROW___\"];\n  const rowHeight = th / rowCategories.length;\n  if (rowHeight <= 20) {\n    return;\n  }\n  const yChannel = gos.spec().y;\n  const isLeft = IsChannelDeep(yChannel) && \"axis\" in yChannel && yChannel.axis === \"right\" ? false : true;\n  const yScale = scaleLinear().domain(yDomain).range(yRange);\n  const graphics = trackInfo.pBorder;\n  rowCategories.forEach((category) => {\n    const rowPosition = gos.encodedValue(\"row\", category);\n    const dx = isLeft ? tx : tx + tw;\n    const dy = ty + rowPosition;\n    graphics.lineStyle(1, colorToHex(theme.axis.baselineColor), 1, 0.5);\n    graphics.moveTo(dx, dy);\n    graphics.lineTo(dx, dy + rowHeight);\n    const tickCount = Math.max(Math.ceil(rowHeight / 40), 1);\n    let ticks = yScale.ticks(tickCount).filter((v) => yDomain[0] <= v && v <= yDomain[1]);\n    if (ticks.length === 1) {\n      ticks = yScale.ticks(tickCount + 1).filter((v) => yDomain[0] <= v && v <= yDomain[1]);\n    }\n    graphics.lineStyle(1, colorToHex(theme.axis.tickColor), 1, 0.5);\n    let tickEnd = isLeft ? dx + TICK_SIZE : dx - TICK_SIZE;\n    ticks.forEach((t) => {\n      const y = yScale(t);\n      graphics.moveTo(dx, dy + rowHeight - y);\n      graphics.lineTo(tickEnd, dy + rowHeight - y);\n    });\n    tickEnd = isLeft ? dx + EXTENT_TICK_SIZE : dx - EXTENT_TICK_SIZE;\n    graphics.moveTo(dx, dy);\n    graphics.lineTo(tickEnd, dy);\n    graphics.moveTo(dx, dy + rowHeight);\n    graphics.lineTo(tickEnd, dy + rowHeight);\n    const styleConfig = getTextStyle({\n      color: theme.axis.labelColor,\n      size: theme.axis.labelFontSize,\n      fontFamily: theme.axis.labelFontFamily,\n      fontWeight: theme.axis.labelFontWeight\n    });\n    ticks.forEach((t) => {\n      const y = yScale(t);\n      tickEnd = isLeft ? dx + TICK_SIZE * 2 : dx - TICK_SIZE * 2;\n      const textGraphic = new HGC.libraries.PIXI.Text(t, styleConfig);\n      textGraphic.anchor.x = isLeft ? 0 : 1;\n      textGraphic.anchor.y = y === 0 ? 0.9 : 0.5;\n      textGraphic.position.x = tickEnd;\n      textGraphic.position.y = dy + rowHeight - y;\n      graphics.addChild(textGraphic);\n    });\n  });\n}\nfunction drawCircularYAxis(HGC, trackInfo, tile, gos, theme) {\n  var _a, _b, _c, _d, _e;\n  const spec = gos.spec();\n  const CIRCULAR = spec.layout === \"circular\";\n  const yDomain = gos.getChannelDomainArray(\"y\");\n  const yRange = gos.getChannelRangeArray(\"y\");\n  if (!CIRCULAR) {\n    return;\n  }\n  if (!gos.isShowYAxis() || !yDomain || !yRange) {\n    return;\n  }\n  const [tw, th] = trackInfo.dimensions;\n  const trackInnerRadius = (_a = spec.innerRadius) != null ? _a : 220;\n  const trackOuterRadius = (_b = spec.outerRadius) != null ? _b : 300;\n  const trackRingSize = trackOuterRadius - trackInnerRadius;\n  const startAngle = (_c = spec.startAngle) != null ? _c : 0;\n  const endAngle = (_d = spec.endAngle) != null ? _d : 360;\n  const cx = tw / 2;\n  const cy = th / 2;\n  const rowCategories = (_e = gos.getChannelDomainArray(\"row\")) != null ? _e : [\"___SINGLE_ROW___\"];\n  const rowHeight = th / rowCategories.length;\n  if (rowHeight / th * trackRingSize <= 20) {\n    return;\n  }\n  const yChannel = gos.spec().y;\n  const isLeft = IsChannelDeep(yChannel) && \"axis\" in yChannel && yChannel.axis === \"right\" ? false : true;\n  const yScale = scaleLinear().domain(yDomain).range(yRange);\n  const graphics = tile.graphics;\n  rowCategories.forEach((category) => {\n    const rowPosition = gos.encodedValue(\"row\", category);\n    const innerR = trackOuterRadius - (rowPosition + rowHeight) / th * trackRingSize;\n    const outerR = trackOuterRadius - rowPosition / th * trackRingSize;\n    const innerPos = cartesianToPolar(isLeft ? 0 : tw, tw, innerR, cx, cy, startAngle, endAngle);\n    const outerPos = cartesianToPolar(isLeft ? 0 : tw, tw, outerR, cx, cy, startAngle, endAngle);\n    graphics.lineStyle(1, colorToHex(theme.axis.baselineColor), 1, 0.5);\n    graphics.moveTo(innerPos.x, innerPos.y);\n    graphics.lineTo(outerPos.x, outerPos.y);\n    const SCALED_TICK_SIZE = (r) => TICK_SIZE * tw / 2 / Math.PI / r;\n    const SCALED_EXTENT_TICK_SIZE = (r) => EXTENT_TICK_SIZE * tw / 2 / Math.PI / r;\n    const axisHeight = rowHeight / th * trackRingSize;\n    const tickCount = Math.max(Math.ceil(axisHeight / 40), 1);\n    let ticks = yScale.ticks(tickCount).filter((v) => yDomain[0] <= v && v <= yDomain[1]);\n    if (ticks.length === 1) {\n      ticks = yScale.ticks(tickCount + 1).filter((v) => yDomain[0] <= v && v <= yDomain[1]);\n    }\n    graphics.lineStyle(1, colorToHex(theme.axis.tickColor), 1, 0.5);\n    ticks.forEach((t) => {\n      const y = yScale(t);\n      const currentR = trackOuterRadius - (rowPosition + rowHeight - y) / th * trackRingSize;\n      const scaledStartX = isLeft ? 0 : tw - SCALED_TICK_SIZE(currentR);\n      const scaledEndX = isLeft ? SCALED_TICK_SIZE(currentR) : tw;\n      const pos = cartesianToPolar(scaledStartX, tw, currentR, cx, cy, startAngle, endAngle);\n      const startRad = valueToRadian(scaledStartX, tw, startAngle, endAngle);\n      const endRad = valueToRadian(scaledEndX, tw, startAngle, endAngle);\n      graphics.moveTo(pos.x, pos.y);\n      graphics.arc(cx, cy, currentR, startRad, endRad, true);\n      graphics.arc(cx, cy, currentR, endRad, startRad, false);\n      graphics.closePath();\n    });\n    {\n      const scaledStartX = isLeft ? 0 : tw - SCALED_EXTENT_TICK_SIZE(trackInnerRadius);\n      const scaledEndX = isLeft ? SCALED_EXTENT_TICK_SIZE(trackInnerRadius) : tw;\n      const startRad = valueToRadian(scaledStartX, tw, startAngle, endAngle);\n      const endRad = valueToRadian(scaledEndX, tw, startAngle, endAngle);\n      graphics.moveTo(innerPos.x, innerPos.y);\n      graphics.arc(cx, cy, trackInnerRadius, startRad, endRad, true);\n      graphics.arc(cx, cy, trackInnerRadius, endRad, startRad, false);\n      graphics.closePath();\n    }\n    {\n      const scaledStartX = isLeft ? 0 : tw - SCALED_EXTENT_TICK_SIZE(trackOuterRadius);\n      const scaledEndX = isLeft ? SCALED_EXTENT_TICK_SIZE(trackOuterRadius) : tw;\n      const startRad = valueToRadian(scaledStartX, tw, startAngle, endAngle);\n      const endRad = valueToRadian(scaledEndX, tw, startAngle, endAngle);\n      graphics.moveTo(outerPos.x, outerPos.y);\n      graphics.arc(cx, cy, trackOuterRadius, startRad, endRad, true);\n      graphics.arc(cx, cy, trackOuterRadius, endRad, startRad, false);\n      graphics.closePath();\n    }\n    ticks.forEach((t) => {\n      const y = yScale(t);\n      const currentR = trackOuterRadius - (rowPosition + rowHeight - y) / th * trackRingSize;\n      const pos = cartesianToPolar(SCALED_TICK_SIZE(currentR) * 2, tw, currentR, cx, cy, startAngle, endAngle);\n      const styleConfig = getTextStyle({\n        color: theme.axis.labelColor,\n        size: theme.axis.labelFontSize,\n        fontFamily: theme.axis.labelFontFamily,\n        fontWeight: theme.axis.labelFontWeight\n      });\n      const textGraphic = new HGC.libraries.PIXI.Text(t, styleConfig);\n      textGraphic.anchor.x = isLeft ? 1 : 0;\n      textGraphic.anchor.y = 0.5;\n      textGraphic.position.x = pos.x;\n      textGraphic.position.y = pos.y;\n      textGraphic.resolution = 4;\n      const txtStyle = new HGC.libraries.PIXI.TextStyle(styleConfig);\n      const metric = HGC.libraries.PIXI.TextMetrics.measureText(textGraphic.text, txtStyle);\n      const txtWidth = metric.width / (2 * currentR * Math.PI) * tw * 360 / (endAngle - startAngle);\n      const scaledStartX = isLeft ? SCALED_TICK_SIZE(currentR) * 2 : tw - SCALED_TICK_SIZE(currentR) * 2 - txtWidth;\n      const scaledEndX = isLeft ? SCALED_TICK_SIZE(currentR) * 2 + txtWidth : tw - SCALED_TICK_SIZE(currentR) * 2;\n      const ropePoints = [];\n      for (let i = scaledEndX; i >= scaledStartX; i -= txtWidth / 10) {\n        const p = cartesianToPolar(i, tw, currentR, cx, cy, startAngle, endAngle);\n        ropePoints.push(new HGC.libraries.PIXI.Point(p.x, p.y));\n      }\n      textGraphic.updateText();\n      const rope = new HGC.libraries.PIXI.SimpleRope(textGraphic.texture, ropePoints);\n      graphics.addChild(rope);\n    });\n  });\n}\nfunction drawCircularOutlines(HGC, trackInfo, tile, tm, theme) {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l;\n  const spec = tm.spec();\n  const [l, t] = trackInfo.position;\n  const [trackWidth, trackHeight] = trackInfo.dimensions;\n  const trackInnerRadius = (_a = spec.innerRadius) != null ? _a : 220;\n  const trackOuterRadius = (_b = spec.outerRadius) != null ? _b : 300;\n  const startAngle = (_c = spec.startAngle) != null ? _c : 0;\n  const endAngle = (_d = spec.endAngle) != null ? _d : 360;\n  const cx = l + trackWidth / 2;\n  const cy = t + trackHeight / 2;\n  const posStartInner = cartesianToPolar(0, trackWidth, trackInnerRadius, cx, cy, startAngle, endAngle);\n  const startRad = valueToRadian(0, trackWidth, startAngle, endAngle);\n  const endRad = valueToRadian(trackWidth, trackWidth, startAngle, endAngle);\n  const g = trackInfo.pBackground;\n  if (!(spec.layout === \"circular\" && spec.mark === \"withinLink\")) {\n    g.lineStyle(((_e = spec.style) == null ? void 0 : _e.outlineWidth) ? ((_f = spec.style) == null ? void 0 : _f.outlineWidth) / 2.5 : 0, colorToHex((_h = (_g = spec.style) == null ? void 0 : _g.outline) != null ? _h : \"#DBDBDB\"), 1, 1);\n    g.beginFill(colorToHex((_j = (_i = tm.spec().style) == null ? void 0 : _i.background) != null ? _j : theme.track.background), (_l = (_k = tm.spec().style) == null ? void 0 : _k.backgroundOpacity) != null ? _l : !theme.track.background || theme.track.background === \"transparent\" ? 0 : 1);\n    g.moveTo(posStartInner.x, posStartInner.y);\n    g.arc(cx, cy, trackInnerRadius, startRad, endRad, true);\n    g.arc(cx, cy, trackOuterRadius, endRad, startRad, false);\n    g.closePath();\n  }\n  if (IsChannelDeep(spec.x) && spec.x.axis === \"top\") {\n    g.lineStyle(0.5, colorToHex(\"black\"), 0, 0.5);\n    g.beginFill(colorToHex(\"white\"), 0);\n    g.moveTo(posStartInner.x, posStartInner.y);\n    g.arc(cx, cy, trackOuterRadius - 0.5, startRad, endRad, true);\n    g.arc(cx, cy, trackOuterRadius, endRad, startRad, false);\n    g.closePath();\n  }\n  g.lineStyle(0.5, colorToHex(\"black\"), 0, 0.5);\n  g.beginFill(colorToHex(\"white\"), 0);\n  g.moveTo(cx, cy);\n  g.arc(cx, cy, trackOuterRadius + 3, startRad, endRad, false);\n  g.closePath();\n  g.lineStyle(1, colorToHex(\"#DBDBDB\"), 0, 0);\n  g.beginFill(colorToHex(\"white\"), 0);\n  g.drawCircle(cx, cy, trackInnerRadius - 1);\n}\nfunction drawBackground(HGC, trackInfo, tile, tm, theme) {\n  var _a, _b, _c, _d, _e, _f;\n  const [l, t] = trackInfo.position;\n  const [w, h] = trackInfo.dimensions;\n  const g = trackInfo.pBackground;\n  if (((_a = tm.spec().style) == null ? void 0 : _a.background) || theme.track.background && theme.track.background !== \"transparent\") {\n    g.clear();\n    const bg = (_c = (_b = tm.spec().style) == null ? void 0 : _b.background) != null ? _c : theme.track.background;\n    const alpha = isUndefined((_d = tm.spec().style) == null ? void 0 : _d.backgroundOpacity) ? 1 : (_e = tm.spec().style) == null ? void 0 : _e.backgroundOpacity;\n    g.lineStyle(1, colorToHex(\"white\"), 0, 0);\n    g.beginFill(colorToHex(bg), alpha);\n    g.drawRect(l, t, w, h);\n  }\n  if (theme.track.alternatingBackground && theme.track.alternatingBackground !== \"transparent\") {\n    const spec = tm.spec();\n    if (!IsChannelDeep(spec.row) || spec.row.type !== \"nominal\") {\n      return;\n    }\n    const rowCategories = (_f = tm.getChannelDomainArray(\"row\")) != null ? _f : [\"___SINGLE_ROW___\"];\n    if (rowCategories.length === 0) {\n      return;\n    }\n    rowCategories.forEach((category, i) => {\n      var _a2, _b2, _c2, _d2;\n      if (i % 2 === 0) {\n        return;\n      }\n      const rowPosition = tm.encodedValue(\"row\", category);\n      const bg = (_b2 = (_a2 = tm.spec().style) == null ? void 0 : _a2.background) != null ? _b2 : theme.track.alternatingBackground;\n      const alpha = isUndefined((_c2 = tm.spec().style) == null ? void 0 : _c2.backgroundOpacity) ? 1 : (_d2 = tm.spec().style) == null ? void 0 : _d2.backgroundOpacity;\n      g.lineStyle(1, colorToHex(\"white\"), 0, 0);\n      g.beginFill(colorToHex(bg), alpha);\n      g.drawRect(trackInfo.position[0], trackInfo.position[1] + rowPosition, w, h / rowCategories.length);\n    });\n  }\n}\nfunction drawBetweenLink(g, trackInfo, model) {\n  var _a, _b, _c, _d, _e;\n  const spec = model.spec();\n  if (!spec.width || !spec.height) {\n    console.warn(\"Size of a track is not properly determined, so visual mark cannot be rendered\");\n    return;\n  }\n  const data2 = model.data();\n  const [trackWidth, trackHeight] = trackInfo.dimensions;\n  const circular = spec.layout === \"circular\";\n  const trackInnerRadius = (_a = spec.innerRadius) != null ? _a : 220;\n  const trackOuterRadius = (_b = spec.outerRadius) != null ? _b : 300;\n  const startAngle = (_c = spec.startAngle) != null ? _c : 0;\n  const endAngle = (_d = spec.endAngle) != null ? _d : 360;\n  const trackRingSize = trackOuterRadius - trackInnerRadius;\n  const tcx = trackWidth / 2;\n  const tcy = trackHeight / 2;\n  const rowCategories = (_e = model.getChannelDomainArray(\"row\")) != null ? _e : [\"___SINGLE_ROW___\"];\n  const rowHeight = trackHeight / rowCategories.length;\n  rowCategories.forEach((rowCategory) => {\n    const rowPosition = model.encodedValue(\"row\", rowCategory);\n    data2.filter((d) => !getValueUsingChannel(d, spec.row) || getValueUsingChannel(d, spec.row) === rowCategory).forEach((d) => {\n      var _a2, _b2;\n      let x = model.encodedPIXIProperty(\"x\", d);\n      let xe = model.encodedPIXIProperty(\"xe\", d);\n      let x1 = model.encodedPIXIProperty(\"x1\", d);\n      let x1e = model.encodedPIXIProperty(\"x1e\", d);\n      const y = model.encodedPIXIProperty(\"y\", d);\n      const stroke = model.encodedPIXIProperty(\"stroke\", d);\n      const strokeWidth = model.encodedPIXIProperty(\"strokeWidth\", d);\n      const color2 = model.encodedPIXIProperty(\"color\", d);\n      const opacity = model.encodedPIXIProperty(\"opacity\", d);\n      if (typeof xe !== \"undefined\") {\n        [x, xe] = [x, xe].sort((a, b) => a - b);\n      }\n      if (typeof x1 !== \"undefined\" && typeof x1e !== \"undefined\") {\n        [x1, x1e] = [x1, x1e].sort((a, b) => a - b);\n      }\n      const isRibon = typeof xe !== \"undefined\" && typeof x1 !== \"undefined\" && typeof x1e !== \"undefined\" && Math.abs(x - xe) > 0.1 && Math.abs(x1 - x1e) > 0.1;\n      if (!isRibon && xe === void 0 && !Is2DTrack(spec)) {\n        if (x1 === void 0 && x1e === void 0) {\n          return;\n        }\n        xe = x1 !== void 0 ? x1 : x1e;\n      }\n      if (!isRibon && Math.abs(x - xe) <= 0.1 && Math.abs(x1 - x1e) <= 0.1) {\n        x = (x + xe) / 2;\n        xe = (x1 + x1e) / 2;\n      }\n      g.lineStyle(strokeWidth, colorToHex(stroke), opacity, 0.5);\n      if (isRibon) {\n        g.beginFill(color2 === \"none\" ? colorToHex(\"white\") : colorToHex(color2), color2 === \"none\" ? 0 : opacity);\n        let [_x1, _x2, _x3, _x4] = [x, xe, x1, x1e];\n        [_x1, _x2] = [_x1, _x2].sort((a, b) => a - b);\n        [_x3, _x4] = [_x3, _x4].sort((a, b) => a - b);\n        if (_x1 > trackWidth || _x4 < 0 || Math.abs(_x4 - _x1) < 0.5) {\n          return;\n        }\n        if (circular) {\n          if (_x1 < 0 || _x4 > trackWidth) {\n            return;\n          }\n          const r = trackOuterRadius - rowPosition / trackHeight * trackRingSize;\n          const posX = cartesianToPolar(_x1, trackWidth, r, tcx, tcy, startAngle, endAngle);\n          const posXE = cartesianToPolar(_x2, trackWidth, r, tcx, tcy, startAngle, endAngle);\n          const posX1 = cartesianToPolar(_x3, trackWidth, r, tcx, tcy, startAngle, endAngle);\n          const posX1E = cartesianToPolar(_x4, trackWidth, r, tcx, tcy, startAngle, endAngle);\n          g.moveTo(posX.x, posX.y);\n          g.bezierCurveTo(tcx, tcy, tcx, tcy, posX1E.x, posX1E.y);\n          g.arc(tcx, tcy, trackOuterRadius, positionToRadian(posX1E.x, posX1E.y, tcx, tcy), positionToRadian(posX1.x, posX1.y, tcx, tcy), false);\n          g.bezierCurveTo(tcx, tcy, tcx, tcy, posXE.x, posXE.y);\n          g.arc(tcx, tcy, trackOuterRadius, positionToRadian(posXE.x, posXE.y, tcx, tcy), positionToRadian(posX.x, posX.y, tcx, tcy), false);\n          g.endFill();\n        } else {\n          g.moveTo(_x1, rowPosition);\n          g.lineTo(_x2, rowPosition);\n          g.lineTo(_x4, rowPosition + rowHeight);\n          g.lineTo(_x3, rowPosition + rowHeight);\n          g.lineTo(_x1, rowPosition);\n          g.closePath();\n        }\n      } else {\n        if (Is2DTrack(spec)) {\n          if (((_a2 = spec.style) == null ? void 0 : _a2.linkConnectionType) === \"curve\") {\n            g.moveTo(x, 0);\n            g.bezierCurveTo(x / 5 * 4, (rowPosition + rowHeight - y) / 2, x / 2, (rowPosition + rowHeight - y) / 5 * 4, 0, rowPosition + rowHeight - y);\n          } else if (((_b2 = spec.style) == null ? void 0 : _b2.linkConnectionType) === \"straight\") {\n            g.moveTo(x, 0);\n            g.lineTo(0, rowPosition + rowHeight - y);\n          } else {\n            g.moveTo(x, 0);\n            g.lineTo(x, rowPosition + rowHeight - y);\n            g.lineTo(0, rowPosition + rowHeight - y);\n          }\n          return;\n        }\n        if (circular) {\n          let prevX, prevY;\n          for (let t = 0; t <= 1; t += 0.02) {\n            const logodds = (t2) => Math.log(t2 / (1 - t2));\n            const movingRadius = (t2) => trackOuterRadius - 1 / (1 + Math.exp(logodds(t2))) * trackRingSize + 3;\n            const getRadian = (t2, s, e) => ((e - s) * t2 + s) / trackWidth;\n            const _x = tcx + movingRadius(t) * Math.cos(-getRadian(t, x, xe) * 2 * Math.PI - Math.PI / 2);\n            const _y = tcy + movingRadius(t) * Math.sin(-getRadian(t, x, xe) * 2 * Math.PI - Math.PI / 2);\n            if (prevX && prevY) {\n              g.lineStyle(strokeWidth, colorToHex(stroke), opacity, 0.5);\n              g.moveTo(prevX, prevY);\n              g.lineTo(_x, _y);\n            }\n            prevX = _x;\n            prevY = _y;\n          }\n          return;\n        }\n        g.moveTo(xe, rowPosition + rowHeight);\n        g.lineTo(x, rowPosition);\n      }\n    });\n  });\n}\nconst SUPPORTED_CHANNELS = [\n  \"x\",\n  \"xe\",\n  \"x1\",\n  \"x1e\",\n  \"y\",\n  \"ye\",\n  \"y1\",\n  \"y1e\",\n  \"color\",\n  \"size\",\n  \"row\",\n  \"stroke\",\n  \"strokeWidth\",\n  \"opacity\",\n  \"text\"\n];\nfunction drawMark(HGC, trackInfo, tile, model) {\n  if (!HGC || !trackInfo || !tile) {\n    return;\n  }\n  if (model.spec().mark === \"brush\") {\n    return;\n  }\n  [\"x\", \"x1\", \"x1e\", \"xe\"].forEach((d) => {\n    model.setChannelScale(d, trackInfo._xScale);\n  });\n  if (Is2DTrack(model.spec()) || IsVerticalRule(model.spec())) {\n    const yScale = trackInfo._yScale.copy();\n    yScale.range([yScale.range()[1], yScale.range()[0]]);\n    [\"y\", \"y1\", \"y1e\", \"ye\"].forEach((d) => {\n      model.setChannelScale(d, yScale);\n    });\n  }\n  const [trackWidth, trackHeight] = trackInfo.dimensions;\n  switch (model.spec().mark) {\n    case \"point\":\n      drawPoint(trackInfo, tile.graphics, model);\n      break;\n    case \"bar\":\n      drawBar(trackInfo, tile, model);\n      break;\n    case \"line\":\n      drawLine(tile.graphics, model, trackWidth, trackHeight);\n      break;\n    case \"area\":\n      drawArea(HGC, trackInfo, tile, model);\n      break;\n    case \"rect\":\n      drawRect(HGC, trackInfo, tile, model);\n      break;\n    case \"triangleLeft\":\n    case \"triangleRight\":\n    case \"triangleBottom\":\n      drawTriangle(tile.graphics, model, trackWidth, trackHeight);\n      break;\n    case \"text\":\n      drawText(HGC, trackInfo, tile, model);\n      break;\n    case \"rule\":\n      drawRule(HGC, trackInfo, tile, model);\n      break;\n    case \"betweenLink\":\n      drawBetweenLink(tile.graphics, trackInfo, model);\n      break;\n    case \"withinLink\":\n      drawWithinLink(tile.graphics, trackInfo, model);\n      break;\n    default:\n      console.warn(\"Unsupported mark type\");\n      break;\n  }\n}\nfunction drawPreEmbellishment(HGC, trackInfo, tile, model, theme) {\n  if (!HGC || !trackInfo || !tile) {\n    return;\n  }\n  if (model.spec().mark === \"brush\") {\n    return;\n  }\n  trackInfo.pBackground.clear();\n  trackInfo.pBackground.removeChildren();\n  trackInfo.pBorder.clear();\n  trackInfo.pBorder.removeChildren();\n  const CIRCULAR = model.spec().layout === \"circular\";\n  [\"x\", \"x1\", \"x1e\", \"xe\"].forEach((d) => {\n    model.setChannelScale(d, trackInfo._xScale);\n  });\n  if (CIRCULAR) {\n    drawCircularOutlines(HGC, trackInfo, tile, model, theme);\n  } else {\n    drawBackground(HGC, trackInfo, tile, model, theme);\n    drawChartOutlines(HGC, trackInfo, model, theme);\n  }\n  drawGrid(trackInfo, model, theme);\n}\nfunction drawPostEmbellishment(HGC, trackInfo, tile, model, theme) {\n  if (!HGC || !trackInfo || !tile) {\n    return;\n  }\n  if (model.spec().mark === \"brush\") {\n    return;\n  }\n  const CIRCULAR = model.spec().layout === \"circular\";\n  [\"x\", \"x1\", \"x1e\", \"xe\"].forEach((d) => {\n    model.setChannelScale(d, trackInfo._xScale);\n  });\n  if (CIRCULAR) {\n    drawCircularYAxis(HGC, trackInfo, tile, model, theme);\n    drawCircularTitle(HGC, trackInfo, tile, model, theme);\n  } else {\n    drawLinearYAxis(HGC, trackInfo, tile, model, theme);\n    drawRowLegend(HGC, trackInfo, tile, model, theme);\n  }\n  drawColorLegend(HGC, trackInfo, tile, model, theme);\n}\nfunction resolveSuperposedTracks(track) {\n  if (IsDataTrack(track)) {\n    return [];\n  }\n  if (!IsOverlaidTrack(track)) {\n    return [track];\n  }\n  if (track.overlay.length === 0) {\n    return [{ ...track, superpose: void 0 }];\n  }\n  const base = JSON.parse(JSON.stringify(track));\n  delete base.overlay;\n  const resolved = [];\n  track.overlay.forEach((subSpec, i) => {\n    const spec = Object.assign(JSON.parse(JSON.stringify(base)), subSpec);\n    if (spec.title && i !== 0) {\n      delete spec.title;\n    }\n    resolved.push(spec);\n  });\n  let xAxisPosition = void 0;\n  resolved.forEach((d) => {\n    if (IsChannelDeep(d.x) && d.x.axis && !xAxisPosition) {\n      xAxisPosition = d.x.axis;\n    }\n  });\n  const corrected = resolved.map((d) => {\n    return {\n      ...d,\n      x: { ...d.x, axis: xAxisPosition }\n    };\n  });\n  return corrected;\n}\nfunction spreadTracksByData(tracks) {\n  return [].concat(...tracks.map((t) => {\n    if (IsDataTrack(t) || !IsOverlaidTrack(t) || t.overlay.length <= 1) {\n      return [t];\n    }\n    if (t.overlay.filter((s) => s.data).length === 0) {\n      return [t];\n    }\n    if (isIdenticalDataSpec([t.data, ...t.overlay.map((s) => s.data)])) {\n      return [t];\n    }\n    const base = JSON.parse(JSON.stringify(t));\n    delete base.overlay;\n    const spread = [];\n    const original = JSON.parse(JSON.stringify(base));\n    original.overlay = [];\n    t.overlay.forEach((subSpec) => {\n      if (!original.data) {\n        original.data = subSpec.data;\n      }\n      if (!subSpec.data || isIdenticalDataSpec([original.data, subSpec.data])) {\n        original.overlay.push(subSpec);\n        return;\n      }\n      const spec = Object.assign(JSON.parse(JSON.stringify(base)), subSpec);\n      spread.push(spec);\n    });\n    const output = original.overlay.length > 0 ? [original, ...spread] : spread;\n    return output.map((track, i, arr) => {\n      const overlayOnPreviousTrack = i !== 0;\n      const y = IsSingleTrack(track) && IsChannelDeep(track.y) && !track.y.axis && overlayOnPreviousTrack ? { ...track.y, axis: i === 1 ? \"right\" : \"none\" } : IsSingleTrack(track) ? track.y : void 0;\n      if (track.title && i !== arr.length - 1 && arr.length !== 1) {\n        delete track.title;\n      }\n      return { ...track, overlayOnPreviousTrack, y };\n    });\n  }));\n}\nfunction isIdenticalDataSpec(specs) {\n  if (specs.length === 0) {\n    return false;\n  }\n  const definedSpecs = specs.filter((d) => d);\n  if (definedSpecs.length !== specs.length) {\n    return false;\n  }\n  const keys = Object.keys(definedSpecs[0]).sort();\n  let isIdentical = true;\n  keys.forEach((k) => {\n    const uniqueProperties = Array.from(new Set(definedSpecs.map((d) => JSON.stringify(d[k]))));\n    if (uniqueProperties.length !== 1) {\n      isIdentical = false;\n      return;\n    }\n  });\n  return isIdentical;\n}\nconst PREDEFINED_COLOR_STR_MAP = {\n  viridis: interpolateViridis,\n  grey: interpolateGreys,\n  warm: interpolateWarm,\n  spectral: interpolateSpectral,\n  cividis: interpolateCividis,\n  bupu: interpolateBuPu,\n  rdbu: interpolateRdBu,\n  hot: interpolateYlOrBr,\n  pink: interpolateRdPu\n};\nfunction getHiGlassColorRange(colorStr = \"viridis\", step = 100) {\n  var _a;\n  const interpolate = (_a = PREDEFINED_COLOR_STR_MAP[colorStr]) != null ? _a : PREDEFINED_COLOR_STR_MAP[\"viridis\"];\n  return [...Array(step)].map((v, i) => interpolate(1 / step * i));\n}\nfunction IsFlatTracks(_) {\n  return !(\"alignment\" in _) && !_.tracks.find((d) => d.alignment === \"overlay\" || \"tracks\" in d);\n}\nfunction IsOverlaidTracks(_) {\n  return \"alignment\" in _ && _.alignment === \"overlay\";\n}\nfunction IsStackedTracks(_) {\n  return !IsFlatTracks(_) && !IsOverlaidTracks(_);\n}\nfunction IsDataTrack(_) {\n  return !IsOverlaidTrack(_) && \"data\" in _ && !(\"mark\" in _);\n}\nfunction IsDataTemplate(_) {\n  return !!(\"data\" in _ && \"overrideTemplate\" in _ && _.overrideTemplate);\n}\nfunction IsDataDeep(data2) {\n  return typeof data2 === \"object\";\n}\nfunction IsDomainChr(domain) {\n  return \"chromosome\" in domain && !(\"interval\" in domain);\n}\nfunction IsDomainInterval(domain) {\n  return !(\"chromosome\" in domain) && \"interval\" in domain;\n}\nfunction IsDomainChrInterval(domain) {\n  return \"chromosome\" in domain && \"interval\" in domain;\n}\nfunction IsSingleTrack(track) {\n  return !(\"overlay\" in track);\n}\nfunction IsOverlaidTrack(track) {\n  return \"overlay\" in track;\n}\nfunction IsTemplateTrack(track) {\n  return \"template\" in track;\n}\nfunction IsVerticalRule(track) {\n  return IsSingleTrack(track) && !IsChannelDeep(track.x) && IsChannelDeep(track.y) && track.y.type === \"genomic\";\n}\nfunction Is2DTrack(track) {\n  const t = IsSingleTrack(track) ? track : resolveSuperposedTracks(track)[0];\n  return IsChannelDeep(t.x) && t.x.type === \"genomic\" && IsChannelDeep(t.y) && t.y.type === \"genomic\";\n}\nfunction IsHiGlassMatrix(track) {\n  return Is2DTrack(track) && track.data.type === \"matrix\" && (track.mark === \"bar\" || track.mark === \"rect\") && track.xe && track.ye;\n}\nfunction IsChannelValue(channel) {\n  return channel !== null && typeof channel === \"object\" && \"value\" in channel;\n}\nfunction IsDataDeepTileset(_) {\n  return _ !== void 0 && (_.type === \"vector\" || _.type === \"beddb\" || _.type === \"multivec\" || _.type === \"bigwig\" || _.type === \"matrix\" || _.type === \"bam\" || _.type === \"vcf\");\n}\nfunction IsChannelDeep(channel) {\n  return typeof channel === \"object\" && !(\"value\" in channel);\n}\nfunction IsOneOfFilter(_) {\n  return \"oneOf\" in _;\n}\nfunction IsRangeFilter(_) {\n  return \"inRange\" in _;\n}\nfunction IsIncludeFilter(_) {\n  return \"include\" in _;\n}\nfunction IsDomainArray(domain) {\n  return isArray$1(domain);\n}\nfunction IsRangeArray(range2) {\n  return isArray$1(range2);\n}\nfunction IsStackedMark(track) {\n  return (track.mark === \"bar\" || track.mark === \"area\" || track.mark === \"text\") && IsChannelDeep(track.color) && track.color.type === \"nominal\" && (!track.row || IsChannelValue(track.row)) && IsChannelDeep(track.y) && track.y.type === \"quantitative\" && !IsChannelDeep(track.ye);\n}\nfunction IsStackedChannel(track, channelKey) {\n  const channel = track[channelKey];\n  return IsStackedMark(track) && (channelKey === \"x\" || channelKey === \"y\") && IsChannelDeep(channel) && channel.type === \"quantitative\";\n}\nfunction getValueUsingChannel(datum, channel) {\n  if (IsChannelDeep(channel) && channel.field) {\n    return datum[channel == null ? void 0 : channel.field];\n  }\n  return void 0;\n}\nfunction getChannelKeysByAggregateFnc(spec) {\n  const keys = [];\n  SUPPORTED_CHANNELS.forEach((k) => {\n    const c = spec[k];\n    if (IsChannelDeep(c) && \"aggregate\" in c) {\n      keys.push(k);\n    }\n  });\n  return keys;\n}\nfunction getChannelKeysByType(spec, t) {\n  const keys = [];\n  SUPPORTED_CHANNELS.forEach((k) => {\n    const c = spec[k];\n    if (IsChannelDeep(c) && c.type === t) {\n      keys.push(k);\n    }\n  });\n  return keys;\n}\nfunction IsXAxis(_) {\n  if ((IsSingleTrack(_) || IsOverlaidTrack(_)) && IsChannelDeep(_.x) && _.x.axis && _.x.axis !== \"none\") {\n    return true;\n  } else if (IsOverlaidTrack(_)) {\n    let isFound = false;\n    _.overlay.forEach((t) => {\n      if (isFound)\n        return;\n      if (IsChannelDeep(t.x) && t.x.axis && t.x.axis !== \"none\") {\n        isFound = true;\n      }\n    });\n    return isFound;\n  }\n  return false;\n}\nfunction IsYAxis(_) {\n  if ((IsSingleTrack(_) || IsOverlaidTrack(_)) && IsChannelDeep(_.y) && _.y.axis && _.y.axis !== \"none\") {\n    return true;\n  } else if (IsOverlaidTrack(_)) {\n    let isFound = false;\n    _.overlay.forEach((t) => {\n      if (isFound)\n        return;\n      if (IsChannelDeep(t.y) && t.y.axis && t.y.axis !== \"none\") {\n        isFound = true;\n      }\n    });\n    return isFound;\n  }\n  return false;\n}\nfunction IsMouseEventsDeep(_) {\n  return typeof _ === \"object\";\n}\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nfunction rng() {\n  if (!getRandomValues) {\n    getRandomValues = typeof crypto !== \"undefined\" && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== \"undefined\" && typeof msCrypto.getRandomValues === \"function\" && msCrypto.getRandomValues.bind(msCrypto);\n    if (!getRandomValues) {\n      throw new Error(\"crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported\");\n    }\n  }\n  return getRandomValues(rnds8);\n}\nvar REGEX = /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;\nfunction validate$2(uuid) {\n  return typeof uuid === \"string\" && REGEX.test(uuid);\n}\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 256).toString(16).substr(1));\n}\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0;\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + \"-\" + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + \"-\" + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + \"-\" + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + \"-\" + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();\n  if (!validate$2(uuid)) {\n    throw TypeError(\"Stringified UUID is invalid\");\n  }\n  return uuid;\n}\nvar _nodeId;\nvar _clockseq;\nvar _lastMSecs = 0;\nvar _lastNSecs = 0;\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || new Array(16);\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== void 0 ? options.clockseq : _clockseq;\n  if (node == null || clockseq == null) {\n    var seedBytes = options.random || (options.rng || rng)();\n    if (node == null) {\n      node = _nodeId = [seedBytes[0] | 1, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];\n    }\n    if (clockseq == null) {\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 16383;\n    }\n  }\n  var msecs = options.msecs !== void 0 ? options.msecs : Date.now();\n  var nsecs = options.nsecs !== void 0 ? options.nsecs : _lastNSecs + 1;\n  var dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 1e4;\n  if (dt < 0 && options.clockseq === void 0) {\n    clockseq = clockseq + 1 & 16383;\n  }\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === void 0) {\n    nsecs = 0;\n  }\n  if (nsecs >= 1e4) {\n    throw new Error(\"uuid.v1(): Can't create more than 10M uuids/sec\");\n  }\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n  msecs += 122192928e5;\n  var tl = ((msecs & 268435455) * 1e4 + nsecs) % 4294967296;\n  b[i++] = tl >>> 24 & 255;\n  b[i++] = tl >>> 16 & 255;\n  b[i++] = tl >>> 8 & 255;\n  b[i++] = tl & 255;\n  var tmh = msecs / 4294967296 * 1e4 & 268435455;\n  b[i++] = tmh >>> 8 & 255;\n  b[i++] = tmh & 255;\n  b[i++] = tmh >>> 24 & 15 | 16;\n  b[i++] = tmh >>> 16 & 255;\n  b[i++] = clockseq >>> 8 | 128;\n  b[i++] = clockseq & 255;\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n  return buf || stringify(b);\n}\nfunction parse(uuid) {\n  if (!validate$2(uuid)) {\n    throw TypeError(\"Invalid UUID\");\n  }\n  var v;\n  var arr = new Uint8Array(16);\n  arr[0] = (v = parseInt(uuid.slice(0, 8), 16)) >>> 24;\n  arr[1] = v >>> 16 & 255;\n  arr[2] = v >>> 8 & 255;\n  arr[3] = v & 255;\n  arr[4] = (v = parseInt(uuid.slice(9, 13), 16)) >>> 8;\n  arr[5] = v & 255;\n  arr[6] = (v = parseInt(uuid.slice(14, 18), 16)) >>> 8;\n  arr[7] = v & 255;\n  arr[8] = (v = parseInt(uuid.slice(19, 23), 16)) >>> 8;\n  arr[9] = v & 255;\n  arr[10] = (v = parseInt(uuid.slice(24, 36), 16)) / 1099511627776 & 255;\n  arr[11] = v / 4294967296 & 255;\n  arr[12] = v >>> 24 & 255;\n  arr[13] = v >>> 16 & 255;\n  arr[14] = v >>> 8 & 255;\n  arr[15] = v & 255;\n  return arr;\n}\nfunction stringToBytes(str) {\n  str = unescape(encodeURIComponent(str));\n  var bytes = [];\n  for (var i = 0; i < str.length; ++i) {\n    bytes.push(str.charCodeAt(i));\n  }\n  return bytes;\n}\nvar DNS = \"6ba7b810-9dad-11d1-80b4-00c04fd430c8\";\nvar URL$2 = \"6ba7b811-9dad-11d1-80b4-00c04fd430c8\";\nfunction v35(name2, version2, hashfunc) {\n  function generateUUID(value, namespace, buf, offset) {\n    if (typeof value === \"string\") {\n      value = stringToBytes(value);\n    }\n    if (typeof namespace === \"string\") {\n      namespace = parse(namespace);\n    }\n    if (namespace.length !== 16) {\n      throw TypeError(\"Namespace must be array-like (16 iterable integer values, 0-255)\");\n    }\n    var bytes = new Uint8Array(16 + value.length);\n    bytes.set(namespace);\n    bytes.set(value, namespace.length);\n    bytes = hashfunc(bytes);\n    bytes[6] = bytes[6] & 15 | version2;\n    bytes[8] = bytes[8] & 63 | 128;\n    if (buf) {\n      offset = offset || 0;\n      for (var i = 0; i < 16; ++i) {\n        buf[offset + i] = bytes[i];\n      }\n      return buf;\n    }\n    return stringify(bytes);\n  }\n  try {\n    generateUUID.name = name2;\n  } catch (err) {\n  }\n  generateUUID.DNS = DNS;\n  generateUUID.URL = URL$2;\n  return generateUUID;\n}\nfunction md5(bytes) {\n  if (typeof bytes === \"string\") {\n    var msg = unescape(encodeURIComponent(bytes));\n    bytes = new Uint8Array(msg.length);\n    for (var i = 0; i < msg.length; ++i) {\n      bytes[i] = msg.charCodeAt(i);\n    }\n  }\n  return md5ToHexEncodedArray(wordsToMd5(bytesToWords(bytes), bytes.length * 8));\n}\nfunction md5ToHexEncodedArray(input) {\n  var output = [];\n  var length32 = input.length * 32;\n  var hexTab = \"0123456789abcdef\";\n  for (var i = 0; i < length32; i += 8) {\n    var x = input[i >> 5] >>> i % 32 & 255;\n    var hex = parseInt(hexTab.charAt(x >>> 4 & 15) + hexTab.charAt(x & 15), 16);\n    output.push(hex);\n  }\n  return output;\n}\nfunction getOutputLength(inputLength8) {\n  return (inputLength8 + 64 >>> 9 << 4) + 14 + 1;\n}\nfunction wordsToMd5(x, len) {\n  x[len >> 5] |= 128 << len % 32;\n  x[getOutputLength(len) - 1] = len;\n  var a = 1732584193;\n  var b = -271733879;\n  var c = -1732584194;\n  var d = 271733878;\n  for (var i = 0; i < x.length; i += 16) {\n    var olda = a;\n    var oldb = b;\n    var oldc = c;\n    var oldd = d;\n    a = md5ff(a, b, c, d, x[i], 7, -680876936);\n    d = md5ff(d, a, b, c, x[i + 1], 12, -389564586);\n    c = md5ff(c, d, a, b, x[i + 2], 17, 606105819);\n    b = md5ff(b, c, d, a, x[i + 3], 22, -1044525330);\n    a = md5ff(a, b, c, d, x[i + 4], 7, -176418897);\n    d = md5ff(d, a, b, c, x[i + 5], 12, 1200080426);\n    c = md5ff(c, d, a, b, x[i + 6], 17, -1473231341);\n    b = md5ff(b, c, d, a, x[i + 7], 22, -45705983);\n    a = md5ff(a, b, c, d, x[i + 8], 7, 1770035416);\n    d = md5ff(d, a, b, c, x[i + 9], 12, -1958414417);\n    c = md5ff(c, d, a, b, x[i + 10], 17, -42063);\n    b = md5ff(b, c, d, a, x[i + 11], 22, -1990404162);\n    a = md5ff(a, b, c, d, x[i + 12], 7, 1804603682);\n    d = md5ff(d, a, b, c, x[i + 13], 12, -40341101);\n    c = md5ff(c, d, a, b, x[i + 14], 17, -1502002290);\n    b = md5ff(b, c, d, a, x[i + 15], 22, 1236535329);\n    a = md5gg(a, b, c, d, x[i + 1], 5, -165796510);\n    d = md5gg(d, a, b, c, x[i + 6], 9, -1069501632);\n    c = md5gg(c, d, a, b, x[i + 11], 14, 643717713);\n    b = md5gg(b, c, d, a, x[i], 20, -373897302);\n    a = md5gg(a, b, c, d, x[i + 5], 5, -701558691);\n    d = md5gg(d, a, b, c, x[i + 10], 9, 38016083);\n    c = md5gg(c, d, a, b, x[i + 15], 14, -660478335);\n    b = md5gg(b, c, d, a, x[i + 4], 20, -405537848);\n    a = md5gg(a, b, c, d, x[i + 9], 5, 568446438);\n    d = md5gg(d, a, b, c, x[i + 14], 9, -1019803690);\n    c = md5gg(c, d, a, b, x[i + 3], 14, -187363961);\n    b = md5gg(b, c, d, a, x[i + 8], 20, 1163531501);\n    a = md5gg(a, b, c, d, x[i + 13], 5, -1444681467);\n    d = md5gg(d, a, b, c, x[i + 2], 9, -51403784);\n    c = md5gg(c, d, a, b, x[i + 7], 14, 1735328473);\n    b = md5gg(b, c, d, a, x[i + 12], 20, -1926607734);\n    a = md5hh(a, b, c, d, x[i + 5], 4, -378558);\n    d = md5hh(d, a, b, c, x[i + 8], 11, -2022574463);\n    c = md5hh(c, d, a, b, x[i + 11], 16, 1839030562);\n    b = md5hh(b, c, d, a, x[i + 14], 23, -35309556);\n    a = md5hh(a, b, c, d, x[i + 1], 4, -1530992060);\n    d = md5hh(d, a, b, c, x[i + 4], 11, 1272893353);\n    c = md5hh(c, d, a, b, x[i + 7], 16, -155497632);\n    b = md5hh(b, c, d, a, x[i + 10], 23, -1094730640);\n    a = md5hh(a, b, c, d, x[i + 13], 4, 681279174);\n    d = md5hh(d, a, b, c, x[i], 11, -358537222);\n    c = md5hh(c, d, a, b, x[i + 3], 16, -722521979);\n    b = md5hh(b, c, d, a, x[i + 6], 23, 76029189);\n    a = md5hh(a, b, c, d, x[i + 9], 4, -640364487);\n    d = md5hh(d, a, b, c, x[i + 12], 11, -421815835);\n    c = md5hh(c, d, a, b, x[i + 15], 16, 530742520);\n    b = md5hh(b, c, d, a, x[i + 2], 23, -995338651);\n    a = md5ii(a, b, c, d, x[i], 6, -198630844);\n    d = md5ii(d, a, b, c, x[i + 7], 10, 1126891415);\n    c = md5ii(c, d, a, b, x[i + 14], 15, -1416354905);\n    b = md5ii(b, c, d, a, x[i + 5], 21, -57434055);\n    a = md5ii(a, b, c, d, x[i + 12], 6, 1700485571);\n    d = md5ii(d, a, b, c, x[i + 3], 10, -1894986606);\n    c = md5ii(c, d, a, b, x[i + 10], 15, -1051523);\n    b = md5ii(b, c, d, a, x[i + 1], 21, -2054922799);\n    a = md5ii(a, b, c, d, x[i + 8], 6, 1873313359);\n    d = md5ii(d, a, b, c, x[i + 15], 10, -30611744);\n    c = md5ii(c, d, a, b, x[i + 6], 15, -1560198380);\n    b = md5ii(b, c, d, a, x[i + 13], 21, 1309151649);\n    a = md5ii(a, b, c, d, x[i + 4], 6, -145523070);\n    d = md5ii(d, a, b, c, x[i + 11], 10, -1120210379);\n    c = md5ii(c, d, a, b, x[i + 2], 15, 718787259);\n    b = md5ii(b, c, d, a, x[i + 9], 21, -343485551);\n    a = safeAdd(a, olda);\n    b = safeAdd(b, oldb);\n    c = safeAdd(c, oldc);\n    d = safeAdd(d, oldd);\n  }\n  return [a, b, c, d];\n}\nfunction bytesToWords(input) {\n  if (input.length === 0) {\n    return [];\n  }\n  var length8 = input.length * 8;\n  var output = new Uint32Array(getOutputLength(length8));\n  for (var i = 0; i < length8; i += 8) {\n    output[i >> 5] |= (input[i / 8] & 255) << i % 32;\n  }\n  return output;\n}\nfunction safeAdd(x, y) {\n  var lsw = (x & 65535) + (y & 65535);\n  var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n  return msw << 16 | lsw & 65535;\n}\nfunction bitRotateLeft(num, cnt) {\n  return num << cnt | num >>> 32 - cnt;\n}\nfunction md5cmn(q, a, b, x, s, t) {\n  return safeAdd(bitRotateLeft(safeAdd(safeAdd(a, q), safeAdd(x, t)), s), b);\n}\nfunction md5ff(a, b, c, d, x, s, t) {\n  return md5cmn(b & c | ~b & d, a, b, x, s, t);\n}\nfunction md5gg(a, b, c, d, x, s, t) {\n  return md5cmn(b & d | c & ~d, a, b, x, s, t);\n}\nfunction md5hh(a, b, c, d, x, s, t) {\n  return md5cmn(b ^ c ^ d, a, b, x, s, t);\n}\nfunction md5ii(a, b, c, d, x, s, t) {\n  return md5cmn(c ^ (b | ~d), a, b, x, s, t);\n}\nv35(\"v3\", 48, md5);\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)();\n  rnds[6] = rnds[6] & 15 | 64;\n  rnds[8] = rnds[8] & 63 | 128;\n  if (buf) {\n    offset = offset || 0;\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n    return buf;\n  }\n  return stringify(rnds);\n}\nfunction f(s, x, y, z) {\n  switch (s) {\n    case 0:\n      return x & y ^ ~x & z;\n    case 1:\n      return x ^ y ^ z;\n    case 2:\n      return x & y ^ x & z ^ y & z;\n    case 3:\n      return x ^ y ^ z;\n  }\n}\nfunction ROTL(x, n) {\n  return x << n | x >>> 32 - n;\n}\nfunction sha1(bytes) {\n  var K = [1518500249, 1859775393, 2400959708, 3395469782];\n  var H = [1732584193, 4023233417, 2562383102, 271733878, 3285377520];\n  if (typeof bytes === \"string\") {\n    var msg = unescape(encodeURIComponent(bytes));\n    bytes = [];\n    for (var i = 0; i < msg.length; ++i) {\n      bytes.push(msg.charCodeAt(i));\n    }\n  } else if (!Array.isArray(bytes)) {\n    bytes = Array.prototype.slice.call(bytes);\n  }\n  bytes.push(128);\n  var l = bytes.length / 4 + 2;\n  var N = Math.ceil(l / 16);\n  var M = new Array(N);\n  for (var _i = 0; _i < N; ++_i) {\n    var arr = new Uint32Array(16);\n    for (var j = 0; j < 16; ++j) {\n      arr[j] = bytes[_i * 64 + j * 4] << 24 | bytes[_i * 64 + j * 4 + 1] << 16 | bytes[_i * 64 + j * 4 + 2] << 8 | bytes[_i * 64 + j * 4 + 3];\n    }\n    M[_i] = arr;\n  }\n  M[N - 1][14] = (bytes.length - 1) * 8 / Math.pow(2, 32);\n  M[N - 1][14] = Math.floor(M[N - 1][14]);\n  M[N - 1][15] = (bytes.length - 1) * 8 & 4294967295;\n  for (var _i2 = 0; _i2 < N; ++_i2) {\n    var W = new Uint32Array(80);\n    for (var t = 0; t < 16; ++t) {\n      W[t] = M[_i2][t];\n    }\n    for (var _t = 16; _t < 80; ++_t) {\n      W[_t] = ROTL(W[_t - 3] ^ W[_t - 8] ^ W[_t - 14] ^ W[_t - 16], 1);\n    }\n    var a = H[0];\n    var b = H[1];\n    var c = H[2];\n    var d = H[3];\n    var e = H[4];\n    for (var _t2 = 0; _t2 < 80; ++_t2) {\n      var s = Math.floor(_t2 / 20);\n      var T = ROTL(a, 5) + f(s, b, c, d) + e + K[s] + W[_t2] >>> 0;\n      e = d;\n      d = c;\n      c = ROTL(b, 30) >>> 0;\n      b = a;\n      a = T;\n    }\n    H[0] = H[0] + a >>> 0;\n    H[1] = H[1] + b >>> 0;\n    H[2] = H[2] + c >>> 0;\n    H[3] = H[3] + d >>> 0;\n    H[4] = H[4] + e >>> 0;\n  }\n  return [H[0] >> 24 & 255, H[0] >> 16 & 255, H[0] >> 8 & 255, H[0] & 255, H[1] >> 24 & 255, H[1] >> 16 & 255, H[1] >> 8 & 255, H[1] & 255, H[2] >> 24 & 255, H[2] >> 16 & 255, H[2] >> 8 & 255, H[2] & 255, H[3] >> 24 & 255, H[3] >> 16 & 255, H[3] >> 8 & 255, H[3] & 255, H[4] >> 24 & 255, H[4] >> 16 & 255, H[4] >> 8 & 255, H[4] & 255];\n}\nv35(\"v5\", 80, sha1);\nfunction getStyleOverridden(parent, child) {\n  const base = parent ? JSON.parse(JSON.stringify(parent)) : {};\n  return child ? Object.assign(base, child) : base;\n}\nfunction traverseTracks(spec, callback) {\n  if (\"tracks\" in spec) {\n    spec.tracks.forEach((t, i, ts) => {\n      callback(t, i, ts);\n      traverseTracks(t, callback);\n    });\n  } else if (\"views\" in spec) {\n    spec.views.forEach((view) => traverseTracks(view, callback));\n  }\n}\nfunction traverseTracksAndViews(spec, callback) {\n  if (\"tracks\" in spec) {\n    spec.tracks.forEach((t) => {\n      callback(t);\n      traverseTracksAndViews(t, callback);\n    });\n  } else if (\"views\" in spec) {\n    spec.views.forEach((v) => {\n      callback(v);\n      traverseTracksAndViews(v, callback);\n    });\n  }\n}\nfunction traverseViewArrangements(spec, callback) {\n  if (\"tracks\" in spec)\n    ;\n  else {\n    callback(spec);\n    spec.views.forEach((v) => {\n      traverseViewArrangements(v, callback);\n    });\n  }\n}\nfunction convertToFlatTracks(spec) {\n  if (IsFlatTracks(spec)) {\n    const base = JSON.parse(JSON.stringify(spec));\n    delete base.tracks;\n    return spec.tracks.filter((track) => !track._invalidTrack).map((track) => Object.assign(JSON.parse(JSON.stringify(base)), track));\n  }\n  const newTracks = [];\n  if (IsStackedTracks(spec)) {\n    spec.tracks.filter((track) => !track._invalidTrack).map((track) => {\n      if (\"alignment\" in track) {\n        newTracks.push({\n          ...track,\n          overlay: [...track.tracks],\n          tracks: void 0,\n          alignment: void 0\n        });\n      } else {\n        const base = JSON.parse(JSON.stringify(spec));\n        delete base.tracks;\n        const newSpec = Object.assign(JSON.parse(JSON.stringify(base)), track);\n        newTracks.push(newSpec);\n      }\n    });\n  } else {\n    newTracks.push({\n      ...spec,\n      overlay: [...spec.tracks.filter((track) => !track._invalidTrack)],\n      tracks: void 0,\n      alignment: void 0\n    });\n  }\n  return JSON.parse(JSON.stringify(newTracks));\n}\nfunction traverseToFixSpecDownstream(spec, parentDef) {\n  if (parentDef) {\n    if (spec.assembly === void 0)\n      spec.assembly = parentDef.assembly;\n    if (spec.layout === void 0)\n      spec.layout = parentDef.layout;\n    if (spec.orientation === void 0)\n      spec.orientation = parentDef.orientation;\n    if (spec.static === void 0)\n      spec.static = parentDef.static !== void 0 ? parentDef.static : false;\n    if (spec.zoomLimits === void 0)\n      spec.zoomLimits = parentDef.zoomLimits;\n    if (spec.xDomain === void 0)\n      spec.xDomain = parentDef.xDomain;\n    if (spec.yDomain === void 0)\n      spec.yDomain = parentDef.yDomain;\n    if (spec.linkingId === void 0)\n      spec.linkingId = parentDef.linkingId;\n    if (spec.centerRadius === void 0)\n      spec.centerRadius = parentDef.centerRadius;\n    if (spec.spacing === void 0 && !(\"tracks\" in spec))\n      spec.spacing = parentDef.spacing;\n    if (spec.xOffset === void 0)\n      spec.xOffset = parentDef.xOffset;\n    if (spec.yOffset === void 0)\n      spec.yOffset = parentDef.yOffset;\n    if (\"views\" in spec && \"arrangement\" in parentDef && spec.arrangement === void 0)\n      spec.arrangement = parentDef.arrangement;\n    spec.style = getStyleOverridden(parentDef.style, spec.style);\n  } else {\n    if (spec.assembly === void 0)\n      spec.assembly = \"hg38\";\n    if (spec.layout === void 0)\n      spec.layout = \"linear\";\n    if (spec.orientation === void 0)\n      spec.orientation = \"horizontal\";\n    if (spec.static === void 0)\n      spec.static = false;\n    if (spec.zoomLimits === void 0)\n      spec.zoomLimits = [1, null];\n    if (spec.centerRadius === void 0)\n      spec.centerRadius = DEFAULT_INNER_RADIUS_PROP;\n    if (spec.spacing === void 0)\n      spec.spacing = DEFAULT_VIEW_SPACING;\n    if (\"views\" in spec && spec.arrangement === void 0)\n      spec.arrangement = \"vertical\";\n    if (spec.xOffset === void 0)\n      spec.xOffset = 0;\n    if (spec.yOffset === void 0)\n      spec.yOffset = 0;\n  }\n  if (\"tracks\" in spec) {\n    let tracks = convertToFlatTracks(spec);\n    tracks = spreadTracksByData(tracks);\n    const linkID = v4();\n    tracks.forEach((track, i, array) => {\n      var _a, _b, _c;\n      if (!track.width)\n        track.width = DEFAULT_TRACK_WIDTH_LINEAR;\n      if (!track.height)\n        track.height = DEFAULT_TRACK_HEIGHT_LINEAR;\n      if (\"displacement\" in track) {\n        if (((_a = track.displacement) == null ? void 0 : _a.type) === \"pile\" && track.row === void 0 && IsChannelDeep(track.x) && track.x.field && IsChannelDeep(track.xe) && track.xe.field) {\n          const newField = v4();\n          const startField = track.x.field;\n          const endField = track.xe.field;\n          const padding = track.displacement.padding;\n          const displaceTransform = {\n            type: \"displace\",\n            newField,\n            boundingBox: { startField, endField, padding },\n            method: \"pile\"\n          };\n          if (!track.dataTransform) {\n            track.dataTransform = [];\n          }\n          track.dataTransform = [...track.dataTransform, displaceTransform];\n          track.row = { field: newField, type: \"nominal\" };\n        } else if (((_b = track.displacement) == null ? void 0 : _b.type) === \"spread\")\n          ;\n      }\n      if (track.layout)\n        track.layout = void 0;\n      if (track.zoomLimits)\n        track.zoomLimits = void 0;\n      if (!track.assembly)\n        track.assembly = spec.assembly;\n      if (!track.layout)\n        track.layout = spec.layout;\n      if (!track.orientation)\n        track.orientation = spec.orientation;\n      if (track.static === void 0)\n        track.static = spec.static !== void 0 ? spec.static : false;\n      if (!track.zoomLimits)\n        track.zoomLimits = spec.zoomLimits;\n      track.style = getStyleOverridden(spec.style, track.style);\n      if (IsOverlaidTrack(track)) {\n        track.overlay.forEach((o) => {\n          o.style = getStyleOverridden(track.style, o.style);\n        });\n      }\n      if ((track.layout === \"circular\" || Is2DTrack(track)) && track.orientation === \"vertical\") {\n        track.orientation = \"horizontal\";\n      }\n      if (Is2DTrack(track)) {\n        track.layout = \"linear\";\n        if ((IsSingleTrack(track) || IsOverlaidTrack(track)) && IsChannelDeep(track.y) && !track.y.domain) {\n          track.y.domain = spec.yDomain;\n        } else if (IsOverlaidTrack(track)) {\n          track.overlay.forEach((o) => {\n            if (IsChannelDeep(o.y) && !o.y.domain) {\n              o.y.domain = spec.yDomain;\n            }\n          });\n        }\n      }\n      if ((IsSingleTrack(track) || IsOverlaidTrack(track)) && IsChannelDeep(track.x) && !track.x.domain) {\n        track.x.domain = spec.xDomain;\n      } else if (IsOverlaidTrack(track)) {\n        track.overlay.forEach((o) => {\n          if (IsChannelDeep(o.x) && !o.x.domain) {\n            o.x.domain = spec.xDomain;\n          }\n        });\n      }\n      if ((IsSingleTrack(track) || IsOverlaidTrack(track)) && IsChannelDeep(track.x) && !track.x.linkingId) {\n        track.x.linkingId = (_c = spec.linkingId) != null ? _c : linkID;\n      } else if (IsOverlaidTrack(track)) {\n        let isAdded = false;\n        track.overlay.forEach((o) => {\n          var _a2;\n          if (isAdded)\n            return;\n          if (IsChannelDeep(o.x) && !o.x.linkingId) {\n            o.x.linkingId = (_a2 = spec.linkingId) != null ? _a2 : linkID;\n            isAdded = true;\n          }\n        });\n      }\n      if (i === 0) {\n        track.overlayOnPreviousTrack = false;\n      }\n      if (i === 0 || i !== 0 && tracks.slice(0, i).filter((d) => !d.overlayOnPreviousTrack).length === 1 && track.overlayOnPreviousTrack === true) {\n        if ((IsSingleTrack(track) || IsOverlaidTrack(track)) && IsChannelDeep(track.x) && !track.x.axis) {\n          if (track.orientation === \"vertical\") {\n            track.x.axis = \"left\";\n          } else {\n            track.x.axis = \"top\";\n          }\n        } else if (IsOverlaidTrack(track)) {\n          track.overlay.forEach((o) => {\n            if (IsChannelDeep(o.x) && !o.x.axis) {\n              if (track.orientation === \"vertical\") {\n                o.x.axis = \"left\";\n              } else {\n                o.x.axis = \"top\";\n              }\n            }\n          });\n        }\n      }\n      if ((IsSingleTrack(track) || IsOverlaidTrack(track)) && IsChannelDeep(track.x) && track.x.axis && track.x.axis !== \"none\") {\n        if (track.orientation === \"vertical\") {\n          if (track.x.axis === \"top\") {\n            track.x.axis = \"left\";\n          } else if (track.x.axis === \"bottom\") {\n            track.x.axis = \"right\";\n          }\n        } else {\n          if (track.x.axis === \"left\") {\n            track.x.axis = \"top\";\n          } else if (track.x.axis === \"right\") {\n            track.x.axis = \"bottom\";\n          }\n        }\n      } else if (IsOverlaidTrack(track)) {\n        track.overlay.forEach((o) => {\n          if (IsChannelDeep(o.x) && o.x.axis && o.x.axis !== \"none\") {\n            if (track.orientation === \"vertical\") {\n              if (o.x.axis === \"top\") {\n                o.x.axis = \"left\";\n              } else if (o.x.axis === \"bottom\") {\n                o.x.axis = \"right\";\n              }\n            } else {\n              if (o.x.axis === \"left\") {\n                o.x.axis = \"top\";\n              } else if (o.x.axis === \"right\") {\n                o.x.axis = \"bottom\";\n              }\n            }\n          }\n        });\n      }\n      if (i !== 0 && (i === array.length - 1 && array.slice(0, i + 1).filter((d) => d.overlayOnPreviousTrack).length < i || i !== array.length - 1 && array.slice(i + 1).filter((d) => d.overlayOnPreviousTrack).length === array.length - i - 1 && array.slice(0, i + 1).filter((d) => d.overlayOnPreviousTrack).length < i)) {\n        if (IsSingleTrack(track) && track.mark === \"withinLink\" && track.flipY === void 0) {\n          track.flipY = true;\n        } else if (IsOverlaidTrack(track)) {\n          if (track.mark === \"withinLink\" && track.flipY === void 0) {\n            track.flipY = true;\n          }\n          track.overlay.forEach((o) => {\n            if (o.mark === \"withinLink\" && o.flipY === void 0) {\n              o.flipY = true;\n            }\n          });\n        }\n      }\n      if (track.overlayOnPreviousTrack && array[i - 1]) {\n        track.width = array[i - 1].width;\n        track.height = array[i - 1].height;\n        track.layout = array[i - 1].layout;\n        track.assembly = array[i - 1].assembly;\n      }\n    });\n    spec.tracks = tracks;\n  } else {\n    spec.views.forEach((v) => {\n      traverseToFixSpecDownstream(v, spec);\n    });\n  }\n}\nfunction getVectorTemplate(column, value) {\n  return {\n    data: {\n      type: \"vector\",\n      url: \"\",\n      column,\n      value\n    },\n    mark: \"bar\",\n    x: { field: column, type: \"genomic\", axis: \"top\" },\n    y: { field: value, type: \"quantitative\" },\n    width: 400,\n    height: 100\n  };\n}\nfunction getMultivecTemplate(row, column, value, categories) {\n  return categories && categories.length < 10 ? {\n    data: {\n      type: \"multivec\",\n      url: \"\",\n      row,\n      column,\n      value,\n      categories\n    },\n    mark: \"bar\",\n    x: { field: column, type: \"genomic\", axis: \"top\" },\n    y: { field: value, type: \"quantitative\" },\n    row: { field: row, type: \"nominal\", legend: true },\n    color: { field: row, type: \"nominal\" },\n    width: 400,\n    height: 100\n  } : {\n    data: {\n      type: \"multivec\",\n      url: \"\",\n      row,\n      column,\n      value,\n      categories\n    },\n    mark: \"rect\",\n    x: { field: column, type: \"genomic\", axis: \"top\" },\n    row: { field: row, type: \"nominal\", legend: true },\n    color: { field: value, type: \"quantitative\" },\n    width: 400,\n    height: 100\n  };\n}\nfunction overrideDataTemplates(spec) {\n  traverseTracks(spec, (t, i, ts) => {\n    if (!t.data || !IsDataDeepTileset(t.data)) {\n      return;\n    }\n    if (\"alignment\" in t) {\n      return;\n    }\n    if (!IsDataTemplate(t)) {\n      return;\n    }\n    switch (t.data.type) {\n      case \"vector\":\n      case \"bigwig\":\n        ts[i] = Object.assign(getVectorTemplate(t.data.column, t.data.value), t);\n        break;\n      case \"multivec\":\n        ts[i] = Object.assign(getMultivecTemplate(t.data.row, t.data.column, t.data.value, t.data.categories), t);\n        break;\n    }\n  });\n}\nconst GoslingTemplates = [\n  {\n    name: \"gene\",\n    channels: [\n      { name: \"startPosition\", type: \"genomic\", required: true },\n      { name: \"endPosition\", type: \"genomic\", required: true },\n      { name: \"strandColor\", type: \"nominal\", required: true },\n      { name: \"strandRow\", type: \"nominal\", required: true },\n      { name: \"opacity\", type: \"value\", required: false },\n      { name: \"geneHeight\", type: \"value\", required: false },\n      { name: \"geneLabel\", type: \"nominal\", required: true },\n      { name: \"geneLabelColor\", type: \"nominal\", required: true },\n      { name: \"geneLabelFontSize\", type: \"value\", required: false },\n      { name: \"geneLabelStroke\", type: \"value\", required: false },\n      { name: \"geneLabelStrokeThickness\", type: \"value\", required: false },\n      { name: \"geneLabelOpacity\", type: \"value\", required: false },\n      { name: \"type\", type: \"nominal\", required: true }\n    ],\n    mapping: [\n      {\n        dataTransform: [\n          { type: \"filter\", base: \"type\", oneOf: [\"gene\"] },\n          { type: \"filter\", base: \"strandColor\", oneOf: [\"-\"] }\n        ],\n        mark: \"triangleLeft\",\n        x: { base: \"startPosition\", type: \"genomic\" },\n        size: { base: \"geneHeight\", value: 12 },\n        row: { base: \"strandRow\", type: \"nominal\", domain: [\"+\", \"-\"] },\n        color: { base: \"strandColor\", type: \"nominal\", domain: [\"+\", \"-\"], range: [\"blue\", \"red\"] },\n        opacity: { base: \"opacity\", value: 0.4 },\n        style: { align: \"right\" }\n      },\n      {\n        dataTransform: [\n          { type: \"filter\", base: \"type\", oneOf: [\"gene\"] },\n          { type: \"filter\", base: \"strandColor\", oneOf: [\"+\"] }\n        ],\n        mark: \"triangleRight\",\n        x: { base: \"endPosition\", type: \"genomic\" },\n        size: { base: \"geneHeight\", value: 12 },\n        row: { base: \"strandRow\", type: \"nominal\", domain: [\"+\", \"-\"] },\n        color: { base: \"strandColor\", type: \"nominal\", domain: [\"+\", \"-\"], range: [\"blue\", \"red\"] },\n        opacity: { base: \"opacity\", value: 0.4 },\n        style: { align: \"left\" }\n      },\n      {\n        dataTransform: [{ type: \"filter\", base: \"type\", oneOf: [\"exon\"] }],\n        mark: \"rect\",\n        x: { base: \"startPosition\", type: \"genomic\" },\n        xe: { base: \"endPosition\", type: \"genomic\" },\n        size: { base: \"geneHeight\", value: 12 },\n        row: { base: \"strandRow\", type: \"nominal\", domain: [\"+\", \"-\"] },\n        color: { base: \"strandColor\", type: \"nominal\", domain: [\"+\", \"-\"], range: [\"blue\", \"red\"] },\n        opacity: { base: \"opacity\", value: 0.4 }\n      },\n      {\n        dataTransform: [\n          { type: \"filter\", base: \"type\", oneOf: [\"gene\"] },\n          { type: \"filter\", base: \"strandColor\", oneOf: [\"+\"] }\n        ],\n        mark: \"rect\",\n        x: { base: \"startPosition\", type: \"genomic\" },\n        xe: { base: \"endPosition\", type: \"genomic\" },\n        row: { base: \"strandRow\", type: \"nominal\", domain: [\"+\", \"-\"] },\n        color: { base: \"strandColor\", type: \"nominal\", domain: [\"+\", \"-\"], range: [\"blue\", \"red\"] },\n        opacity: { base: \"opacity\", value: 0.4 },\n        size: { value: 3 }\n      },\n      {\n        dataTransform: [\n          { type: \"filter\", base: \"type\", oneOf: [\"gene\"] },\n          { type: \"filter\", base: \"strandColor\", oneOf: [\"-\"] }\n        ],\n        mark: \"rect\",\n        x: { base: \"startPosition\", type: \"genomic\" },\n        xe: { base: \"endPosition\", type: \"genomic\" },\n        row: { base: \"strandRow\", type: \"nominal\", domain: [\"+\", \"-\"] },\n        color: { base: \"strandColor\", type: \"nominal\", domain: [\"+\", \"-\"], range: [\"blue\", \"red\"] },\n        opacity: { base: \"opacity\", value: 0.4 },\n        size: { value: 3 }\n      },\n      {\n        dataTransform: [{ type: \"filter\", base: \"type\", oneOf: [\"gene\"] }],\n        mark: \"text\",\n        text: { base: \"geneLabel\", type: \"nominal\" },\n        x: { base: \"startPosition\", type: \"genomic\" },\n        xe: { base: \"endPosition\", type: \"genomic\" },\n        row: { base: \"strandRow\", type: \"nominal\", domain: [\"+\", \"-\"] },\n        color: { base: \"geneLabelColor\", type: \"nominal\", domain: [\"+\", \"-\"], range: [\"blue\", \"red\"] },\n        opacity: { base: \"opacity\", value: 1 },\n        size: { base: \"geneLabelFontSize\", value: 18 },\n        stroke: { base: \"geneLabelStroke\", value: \"white\" },\n        strokeWidth: { base: \"geneLabelStrokeThickness\", value: 2 },\n        visibility: [\n          {\n            operation: \"less-than\",\n            measure: \"width\",\n            threshold: \"|xe-x|\",\n            transitionPadding: 10,\n            target: \"mark\"\n          }\n        ]\n      }\n    ]\n  },\n  {\n    name: \"ideogram\",\n    channels: [\n      { name: \"startPosition\", type: \"genomic\", required: true },\n      { name: \"endPosition\", type: \"genomic\", required: true },\n      { name: \"chrHeight\", type: \"value\", required: false },\n      { name: \"name\", type: \"nominal\", required: true },\n      { name: \"stainBackgroundColor\", type: \"nominal\", required: true },\n      { name: \"stainLabelColor\", type: \"nominal\", required: true },\n      { name: \"stainStroke\", type: \"value\", required: false },\n      { name: \"stainStrokeWidth\", type: \"value\", required: false }\n    ],\n    mapping: [\n      {\n        mark: \"rect\",\n        dataTransform: [{ type: \"filter\", base: \"stainBackgroundColor\", oneOf: [\"acen\"], not: true }],\n        color: {\n          base: \"stainBackgroundColor\",\n          type: \"nominal\",\n          domain: [\"gneg\", \"gpos25\", \"gpos50\", \"gpos75\", \"gpos100\", \"gvar\", \"acen\"],\n          range: [\"white\", \"lightgray\", \"gray\", \"gray\", \"black\", \"#7B9CC8\", \"#DC4542\"]\n        },\n        size: { base: \"chrHeight\", value: 18 },\n        x: { base: \"startPosition\", type: \"genomic\" },\n        xe: { base: \"endPosition\", type: \"genomic\" },\n        stroke: { base: \"stainStroke\", value: \"gray\" },\n        strokeWidth: { base: \"stainStrokeWidth\", value: 0.3 }\n      },\n      {\n        mark: \"triangleRight\",\n        dataTransform: [\n          { type: \"filter\", base: \"stainBackgroundColor\", oneOf: [\"acen\"] },\n          { type: \"filter\", base: \"name\", include: \"q\" }\n        ],\n        color: {\n          base: \"stainBackgroundColor\",\n          type: \"nominal\",\n          domain: [\"gneg\", \"gpos25\", \"gpos50\", \"gpos75\", \"gpos100\", \"gvar\", \"acen\"],\n          range: [\"white\", \"lightgray\", \"gray\", \"gray\", \"black\", \"#7B9CC8\", \"#DC4542\"]\n        },\n        size: { base: \"chrHeight\", value: 18 },\n        x: { base: \"startPosition\", type: \"genomic\" },\n        xe: { base: \"endPosition\", type: \"genomic\" },\n        stroke: { base: \"stainStroke\", value: \"gray\" },\n        strokeWidth: { base: \"stainStrokeWidth\", value: 0.3 }\n      },\n      {\n        mark: \"triangleLeft\",\n        dataTransform: [\n          { type: \"filter\", base: \"stainBackgroundColor\", oneOf: [\"acen\"] },\n          { type: \"filter\", base: \"name\", include: \"p\" }\n        ],\n        color: {\n          base: \"stainBackgroundColor\",\n          type: \"nominal\",\n          domain: [\"gneg\", \"gpos25\", \"gpos50\", \"gpos75\", \"gpos100\", \"gvar\", \"acen\"],\n          range: [\"white\", \"lightgray\", \"gray\", \"gray\", \"black\", \"#7B9CC8\", \"#DC4542\"]\n        },\n        size: { base: \"chrHeight\", value: 18 },\n        x: { base: \"startPosition\", type: \"genomic\" },\n        xe: { base: \"endPosition\", type: \"genomic\" },\n        stroke: { base: \"stainStroke\", value: \"gray\" },\n        strokeWidth: { base: \"stainStrokeWidth\", value: 0.3 }\n      },\n      {\n        mark: \"text\",\n        dataTransform: [{ type: \"filter\", base: \"stainLabelColor\", oneOf: [\"acen\"], not: true }],\n        color: {\n          base: \"stainLabelColor\",\n          type: \"nominal\",\n          domain: [\"gneg\", \"gpos25\", \"gpos50\", \"gpos75\", \"gpos100\", \"gvar\"],\n          range: [\"black\", \"black\", \"black\", \"black\", \"white\", \"black\"]\n        },\n        text: { base: \"name\", type: \"nominal\" },\n        x: { base: \"startPosition\", type: \"genomic\" },\n        xe: { base: \"endPosition\", type: \"genomic\" },\n        visibility: [\n          {\n            operation: \"less-than\",\n            measure: \"width\",\n            threshold: \"|xe-x|\",\n            transitionPadding: 10,\n            target: \"mark\"\n          }\n        ]\n      }\n    ]\n  },\n  {\n    name: \"sequence\",\n    channels: [\n      { name: \"startPosition\", type: \"genomic\", required: true },\n      { name: \"endPosition\", type: \"genomic\", required: true },\n      { name: \"barLength\", type: \"quantitative\", required: true },\n      { name: \"baseBackground\", type: \"nominal\", required: true },\n      { name: \"baseLabelColor\", type: \"nominal\", required: true },\n      { name: \"baseLabelFontSize\", type: \"value\", required: false }\n    ],\n    mapping: [\n      {\n        mark: \"bar\",\n        x: { base: \"startPosition\", type: \"genomic\" },\n        xe: { base: \"endPosition\", type: \"genomic\" },\n        y: { base: \"barLength\", type: \"quantitative\", axis: \"none\" },\n        color: { base: \"baseBackground\", type: \"nominal\", domain: [\"A\", \"T\", \"G\", \"C\"] }\n      },\n      {\n        dataTransform: [{ type: \"filter\", base: \"barLength\", oneOf: [0], not: true }],\n        mark: \"text\",\n        x: { base: \"startPosition\", type: \"genomic\" },\n        xe: { base: \"endPosition\", type: \"genomic\" },\n        color: { base: \"baseLabelColor\", type: \"nominal\", domain: [\"A\", \"T\", \"G\", \"C\"], range: [\"white\"] },\n        text: { base: \"baseBackground\", type: \"nominal\" },\n        size: { base: \"baseLabelFontSize\", value: 18 },\n        visibility: [\n          {\n            operation: \"less-than\",\n            measure: \"width\",\n            threshold: \"|xe-x|\",\n            transitionPadding: 30,\n            target: \"mark\"\n          },\n          {\n            operation: \"LT\",\n            measure: \"zoomLevel\",\n            threshold: 10,\n            target: \"track\"\n          }\n        ]\n      }\n    ]\n  }\n];\nfunction replaceTrackTemplates(spec, templates) {\n  traverseTracks(spec, (t, i, ts) => {\n    var _a, _b;\n    if (!IsTemplateTrack(t)) {\n      return;\n    }\n    const { template: name2 } = t;\n    const templateDef = templates.find((d) => d.name === name2);\n    if (!templateDef) {\n      t._invalidTrack = true;\n      console.warn(`There is no track template named '${name2}'`);\n      return;\n    }\n    let isValid = true;\n    templateDef.channels.forEach((d) => {\n      if (d.required && (!t.encoding || !(d.name in t.encoding))) {\n        isValid = false;\n        console.warn(`A template spec ('${name2}') does not contain a required channel, ${d.name}`);\n      }\n    });\n    if (!isValid) {\n      t._invalidTrack = true;\n      return;\n    }\n    const viewBase = JSON.parse(JSON.stringify(t));\n    if (\"encoding\" in viewBase) {\n      delete viewBase.encoding;\n    }\n    const convertedView = {\n      ...viewBase,\n      alignment: \"overlay\",\n      tracks: [],\n      width: (_a = t.width) != null ? _a : 100,\n      height: (_b = t.height) != null ? _b : 100\n    };\n    templateDef.mapping.forEach((singleTrackMappingDef) => {\n      const convertedTrack = {\n        data: t.data,\n        mark: singleTrackMappingDef.mark\n      };\n      const { dataTransform } = singleTrackMappingDef;\n      if (dataTransform) {\n        dataTransform.map((dataTramsformMap) => {\n          const baseChannelName = dataTramsformMap.base;\n          if (baseChannelName && t.encoding && baseChannelName in t.encoding && \"field\" in t.encoding[baseChannelName]) {\n            delete dataTramsformMap.base;\n            dataTramsformMap.field = t.encoding[baseChannelName].field;\n          }\n        });\n      }\n      const encodingSpec = t.encoding;\n      if (!encodingSpec) {\n        Object.keys(singleTrackMappingDef).filter((k) => k !== \"mark\").forEach((channelKey) => {\n          const channelMap = JSON.parse(JSON.stringify(singleTrackMappingDef[channelKey]));\n          if (\"base\" in channelMap) {\n            delete channelMap.base;\n          }\n          convertedTrack[channelKey] = channelMap;\n        });\n      } else {\n        Object.keys(singleTrackMappingDef).filter((k) => k !== \"mark\").forEach((channelKey) => {\n          const channelMap = JSON.parse(JSON.stringify(singleTrackMappingDef[channelKey]));\n          if (\"base\" in channelMap) {\n            const baseChannelName = channelMap.base;\n            if (baseChannelName in encodingSpec) {\n              const base = JSON.parse(JSON.stringify(encodingSpec[baseChannelName]));\n              delete channelMap.base;\n              const newChannelSpec = Object.assign(channelMap, JSON.parse(JSON.stringify(base)));\n              convertedTrack[channelKey] = newChannelSpec;\n            } else {\n              delete channelMap.base;\n              convertedTrack[channelKey] = channelMap;\n            }\n          } else {\n            convertedTrack[channelKey] = channelMap;\n          }\n        });\n      }\n      convertedView.tracks.push(convertedTrack);\n    });\n    ts[i] = convertedView;\n  });\n}\nfunction formatDecimal(x) {\n  return Math.abs(x = Math.round(x)) >= 1e21 ? x.toLocaleString(\"en\").replace(/,/g, \"\") : x.toString(10);\n}\nfunction formatDecimalParts(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0)\n    return null;\n  var i, coefficient = x.slice(0, i);\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\nfunction exponent(x) {\n  return x = formatDecimalParts(Math.abs(x)), x ? x[1] : NaN;\n}\nfunction formatGroup(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length, t = [], j = 0, g = grouping[0], length = 0;\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width)\n        g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width)\n        break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n    return t.reverse().join(thousands);\n  };\n}\nfunction formatNumerals(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\nfunction formatSpecifier(specifier) {\n  if (!(match = re.exec(specifier)))\n    throw new Error(\"invalid format: \" + specifier);\n  var match;\n  return new FormatSpecifier({\n    fill: match[1],\n    align: match[2],\n    sign: match[3],\n    symbol: match[4],\n    zero: match[5],\n    width: match[6],\n    comma: match[7],\n    precision: match[8] && match[8].slice(1),\n    trim: match[9],\n    type: match[10]\n  });\n}\nformatSpecifier.prototype = FormatSpecifier.prototype;\nfunction FormatSpecifier(specifier) {\n  this.fill = specifier.fill === void 0 ? \" \" : specifier.fill + \"\";\n  this.align = specifier.align === void 0 ? \">\" : specifier.align + \"\";\n  this.sign = specifier.sign === void 0 ? \"-\" : specifier.sign + \"\";\n  this.symbol = specifier.symbol === void 0 ? \"\" : specifier.symbol + \"\";\n  this.zero = !!specifier.zero;\n  this.width = specifier.width === void 0 ? void 0 : +specifier.width;\n  this.comma = !!specifier.comma;\n  this.precision = specifier.precision === void 0 ? void 0 : +specifier.precision;\n  this.trim = !!specifier.trim;\n  this.type = specifier.type === void 0 ? \"\" : specifier.type + \"\";\n}\nFormatSpecifier.prototype.toString = function() {\n  return this.fill + this.align + this.sign + this.symbol + (this.zero ? \"0\" : \"\") + (this.width === void 0 ? \"\" : Math.max(1, this.width | 0)) + (this.comma ? \",\" : \"\") + (this.precision === void 0 ? \"\" : \".\" + Math.max(0, this.precision | 0)) + (this.trim ? \"~\" : \"\") + this.type;\n};\nfunction formatTrim(s) {\n  out:\n    for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n      switch (s[i]) {\n        case \".\":\n          i0 = i1 = i;\n          break;\n        case \"0\":\n          if (i0 === 0)\n            i0 = i;\n          i1 = i;\n          break;\n        default:\n          if (!+s[i])\n            break out;\n          if (i0 > 0)\n            i0 = 0;\n          break;\n      }\n    }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\nvar prefixExponent;\nfunction formatPrefixAuto(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d)\n    return x + \"\";\n  var coefficient = d[0], exponent2 = d[1], i = exponent2 - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent2 / 3))) * 3) + 1, n = coefficient.length;\n  return i === n ? coefficient : i > n ? coefficient + new Array(i - n + 1).join(\"0\") : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i) : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimalParts(x, Math.max(0, p + i - 1))[0];\n}\nfunction formatRounded(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d)\n    return x + \"\";\n  var coefficient = d[0], exponent2 = d[1];\n  return exponent2 < 0 ? \"0.\" + new Array(-exponent2).join(\"0\") + coefficient : coefficient.length > exponent2 + 1 ? coefficient.slice(0, exponent2 + 1) + \".\" + coefficient.slice(exponent2 + 1) : coefficient + new Array(exponent2 - coefficient.length + 2).join(\"0\");\n}\nvar formatTypes = {\n  \"%\": function(x, p) {\n    return (x * 100).toFixed(p);\n  },\n  \"b\": function(x) {\n    return Math.round(x).toString(2);\n  },\n  \"c\": function(x) {\n    return x + \"\";\n  },\n  \"d\": formatDecimal,\n  \"e\": function(x, p) {\n    return x.toExponential(p);\n  },\n  \"f\": function(x, p) {\n    return x.toFixed(p);\n  },\n  \"g\": function(x, p) {\n    return x.toPrecision(p);\n  },\n  \"o\": function(x) {\n    return Math.round(x).toString(8);\n  },\n  \"p\": function(x, p) {\n    return formatRounded(x * 100, p);\n  },\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": function(x) {\n    return Math.round(x).toString(16).toUpperCase();\n  },\n  \"x\": function(x) {\n    return Math.round(x).toString(16);\n  }\n};\nfunction identity$1(x) {\n  return x;\n}\nvar map$1 = Array.prototype.map, prefixes = [\"y\", \"z\", \"a\", \"f\", \"p\", \"n\", \"\\xB5\", \"m\", \"\", \"k\", \"M\", \"G\", \"T\", \"P\", \"E\", \"Z\", \"Y\"];\nfunction formatLocale(locale2) {\n  var group2 = locale2.grouping === void 0 || locale2.thousands === void 0 ? identity$1 : formatGroup(map$1.call(locale2.grouping, Number), locale2.thousands + \"\"), currencyPrefix = locale2.currency === void 0 ? \"\" : locale2.currency[0] + \"\", currencySuffix = locale2.currency === void 0 ? \"\" : locale2.currency[1] + \"\", decimal = locale2.decimal === void 0 ? \".\" : locale2.decimal + \"\", numerals = locale2.numerals === void 0 ? identity$1 : formatNumerals(map$1.call(locale2.numerals, String)), percent = locale2.percent === void 0 ? \"%\" : locale2.percent + \"\", minus = locale2.minus === void 0 ? \"-\" : locale2.minus + \"\", nan = locale2.nan === void 0 ? \"NaN\" : locale2.nan + \"\";\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n    var fill = specifier.fill, align = specifier.align, sign = specifier.sign, symbol = specifier.symbol, zero = specifier.zero, width = specifier.width, comma = specifier.comma, precision = specifier.precision, trim = specifier.trim, type2 = specifier.type;\n    if (type2 === \"n\")\n      comma = true, type2 = \"g\";\n    else if (!formatTypes[type2])\n      precision === void 0 && (precision = 12), trim = true, type2 = \"g\";\n    if (zero || fill === \"0\" && align === \"=\")\n      zero = true, fill = \"0\", align = \"=\";\n    var prefix = symbol === \"$\" ? currencyPrefix : symbol === \"#\" && /[boxX]/.test(type2) ? \"0\" + type2.toLowerCase() : \"\", suffix = symbol === \"$\" ? currencySuffix : /[%p]/.test(type2) ? percent : \"\";\n    var formatType = formatTypes[type2], maybeSuffix = /[defgprs%]/.test(type2);\n    precision = precision === void 0 ? 6 : /[gprs]/.test(type2) ? Math.max(1, Math.min(21, precision)) : Math.max(0, Math.min(20, precision));\n    function format2(value) {\n      var valuePrefix = prefix, valueSuffix = suffix, i, n, c;\n      if (type2 === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n        var valueNegative = value < 0 || 1 / value < 0;\n        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);\n        if (trim)\n          value = formatTrim(value);\n        if (valueNegative && +value === 0 && sign !== \"+\")\n          valueNegative = false;\n        valuePrefix = (valueNegative ? sign === \"(\" ? sign : minus : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type2 === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n      if (comma && !zero)\n        value = group2(value, Infinity);\n      var length = valuePrefix.length + value.length + valueSuffix.length, padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n      if (comma && zero)\n        value = group2(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n      switch (align) {\n        case \"<\":\n          value = valuePrefix + value + valueSuffix + padding;\n          break;\n        case \"=\":\n          value = valuePrefix + padding + value + valueSuffix;\n          break;\n        case \"^\":\n          value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length);\n          break;\n        default:\n          value = padding + valuePrefix + value + valueSuffix;\n          break;\n      }\n      return numerals(value);\n    }\n    format2.toString = function() {\n      return specifier + \"\";\n    };\n    return format2;\n  }\n  function formatPrefix2(specifier, value) {\n    var f2 = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)), e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3, k = Math.pow(10, -e), prefix = prefixes[8 + e / 3];\n    return function(value2) {\n      return f2(k * value2) + prefix;\n    };\n  }\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix2\n  };\n}\nvar locale;\nvar format$1;\nvar formatPrefix;\ndefaultLocale({\n  decimal: \".\",\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"],\n  minus: \"-\"\n});\nfunction defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format$1 = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\nfunction precisionPrefix(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\nconst CHROM_SIZE_HG38 = {\n  chr1: 248956422,\n  chr2: 242193529,\n  chr3: 198295559,\n  chr4: 190214555,\n  chr5: 181538259,\n  chr6: 170805979,\n  chr7: 159345973,\n  chr8: 145138636,\n  chr9: 138394717,\n  chr10: 133797422,\n  chr11: 135086622,\n  chr12: 133275309,\n  chr13: 114364328,\n  chr14: 107043718,\n  chr15: 101991189,\n  chr16: 90338345,\n  chr17: 83257441,\n  chr18: 80373285,\n  chr19: 58617616,\n  chr20: 64444167,\n  chr21: 46709983,\n  chr22: 50818468,\n  chrX: 156040895,\n  chrY: 57227415\n};\nconst CHROM_SIZE_HG19 = {\n  chr1: 249250621,\n  chr2: 243199373,\n  chr3: 198022430,\n  chr4: 191154276,\n  chr5: 180915260,\n  chr6: 171115067,\n  chr7: 159138663,\n  chr8: 146364022,\n  chr9: 141213431,\n  chr10: 135534747,\n  chr11: 135006516,\n  chr12: 133851895,\n  chr13: 115169878,\n  chr14: 107349540,\n  chr15: 102531392,\n  chr16: 90354753,\n  chr17: 81195210,\n  chr18: 78077248,\n  chr19: 59128983,\n  chr20: 63025520,\n  chr21: 48129895,\n  chr22: 51304566,\n  chrX: 155270560,\n  chrY: 59373566,\n  chrM: 16571\n};\nconst CHROM_SIZE_HG18 = {\n  chr1: 247249719,\n  chr2: 242951149,\n  chr3: 199501827,\n  chr4: 191273063,\n  chr5: 180857866,\n  chr6: 170899992,\n  chr7: 158821424,\n  chr8: 146274826,\n  chr9: 140273252,\n  chr10: 135374737,\n  chr11: 134452384,\n  chr12: 132349534,\n  chr13: 114142980,\n  chr14: 106368585,\n  chr15: 100338915,\n  chr16: 88827254,\n  chr17: 78774742,\n  chr18: 76117153,\n  chr19: 63811651,\n  chr20: 62435964,\n  chr21: 46944323,\n  chr22: 49691432,\n  chrX: 154913754,\n  chrY: 57772954,\n  chrM: 16571\n};\nconst CHROM_SIZE_HG17 = {\n  chr1: 245522847,\n  chr2: 243018229,\n  chr3: 199505740,\n  chr4: 191411218,\n  chr5: 180857866,\n  chr6: 170975699,\n  chr7: 158628139,\n  chr8: 146274826,\n  chr9: 138429268,\n  chr10: 135413628,\n  chr11: 134452384,\n  chr12: 132449811,\n  chr13: 114142980,\n  chr14: 106368585,\n  chr15: 100338915,\n  chr16: 88827254,\n  chr17: 78774742,\n  chr18: 76117153,\n  chr19: 63811651,\n  chr20: 62435964,\n  chr21: 46944323,\n  chr22: 49554710,\n  chrX: 154824264,\n  chrY: 57701691,\n  chrM: 16571\n};\nconst CHROM_SIZE_HG16 = {\n  chr1: 246127941,\n  chr2: 243615958,\n  chr3: 199344050,\n  chr4: 191731959,\n  chr5: 181034922,\n  chr6: 170914576,\n  chr7: 158545518,\n  chr8: 146308819,\n  chr9: 136372045,\n  chr10: 135037215,\n  chr11: 134482954,\n  chr12: 132078379,\n  chr13: 113042980,\n  chr14: 105311216,\n  chr15: 100256656,\n  chr16: 90041932,\n  chr17: 81860266,\n  chr18: 76115139,\n  chr19: 63811651,\n  chr20: 63741868,\n  chr21: 46976097,\n  chr22: 49396972,\n  chrX: 153692391,\n  chrY: 50286555,\n  chrM: 16571\n};\nconst CHROM_SIZE_MM10 = {\n  chr1: 195471971,\n  chr2: 182113224,\n  chr3: 160039680,\n  chr4: 156508116,\n  chr5: 151834684,\n  chr6: 149736546,\n  chr7: 145441459,\n  chr8: 129401213,\n  chr9: 124595110,\n  chr10: 130694993,\n  chr11: 122082543,\n  chr12: 120129022,\n  chr13: 120421639,\n  chr14: 124902244,\n  chr15: 104043685,\n  chr16: 98207768,\n  chr17: 94987271,\n  chr18: 90702639,\n  chr19: 61431566,\n  chrX: 171031299,\n  chrY: 91744698,\n  chrM: 16299\n};\nconst CHROM_SIZE_MM9 = {\n  chr1: 197195432,\n  chr2: 181748087,\n  chr3: 159599783,\n  chr4: 155630120,\n  chr5: 152537259,\n  chr6: 149517037,\n  chr7: 152524553,\n  chr8: 131738871,\n  chr9: 124076172,\n  chr10: 129993255,\n  chr11: 121843856,\n  chr12: 121257530,\n  chr13: 120284312,\n  chr14: 125194864,\n  chr15: 103494974,\n  chr16: 98319150,\n  chr17: 95272651,\n  chr18: 90772031,\n  chr19: 61342430,\n  chrX: 166650296,\n  chrY: 15902555,\n  chrM: 16299\n};\nfunction getRelativeGenomicPosition(absPos, assembly) {\n  var _a;\n  const [chromosome, absInterval] = (_a = Object.entries(GET_CHROM_SIZES(assembly).interval).find((d) => {\n    const [start, end] = d[1];\n    return start <= absPos && absPos < end;\n  })) != null ? _a : [null, null];\n  if (!chromosome || !absInterval) {\n    return { chromosome: \"unknown\", position: absPos };\n  }\n  return { chromosome, position: absPos - absInterval[0] };\n}\nfunction GET_CHROM_SIZES(assembly) {\n  if (assembly && assembly in CRHOM_SIZES) {\n    return CRHOM_SIZES[assembly];\n  } else {\n    return CRHOM_SIZES.hg38;\n  }\n}\nconst basePath = (assembly) => `https://s3.amazonaws.com/gosling-lang.org/data/${assembly}.chrom.sizes`;\nconst CRHOM_SIZES = Object.freeze({\n  hg38: {\n    size: CHROM_SIZE_HG38,\n    interval: getChromInterval(CHROM_SIZE_HG38),\n    total: getChromTotalSize(CHROM_SIZE_HG38),\n    path: basePath(\"hg38\")\n  },\n  hg19: {\n    size: CHROM_SIZE_HG19,\n    interval: getChromInterval(CHROM_SIZE_HG19),\n    total: getChromTotalSize(CHROM_SIZE_HG19),\n    path: basePath(\"hg19\")\n  },\n  hg18: {\n    size: CHROM_SIZE_HG18,\n    interval: getChromInterval(CHROM_SIZE_HG18),\n    total: getChromTotalSize(CHROM_SIZE_HG18),\n    path: basePath(\"hg18\")\n  },\n  hg17: {\n    size: CHROM_SIZE_HG17,\n    interval: getChromInterval(CHROM_SIZE_HG17),\n    total: getChromTotalSize(CHROM_SIZE_HG17),\n    path: basePath(\"hg17\")\n  },\n  hg16: {\n    size: CHROM_SIZE_HG16,\n    interval: getChromInterval(CHROM_SIZE_HG16),\n    total: getChromTotalSize(CHROM_SIZE_HG16),\n    path: basePath(\"hg16\")\n  },\n  mm10: {\n    size: CHROM_SIZE_MM10,\n    interval: getChromInterval(CHROM_SIZE_MM10),\n    total: getChromTotalSize(CHROM_SIZE_MM10),\n    path: basePath(\"mm10\")\n  },\n  mm9: {\n    size: CHROM_SIZE_MM9,\n    interval: getChromInterval(CHROM_SIZE_MM9),\n    total: getChromTotalSize(CHROM_SIZE_MM9),\n    path: basePath(\"mm9\")\n  },\n  unknown: {\n    size: { chr: Number.MAX_VALUE },\n    interval: { chr: [0, Number.MAX_VALUE] },\n    total: Number.MAX_VALUE,\n    path: basePath(\"hg38\")\n  }\n});\nfunction getChromInterval(chromSize) {\n  const interval2 = {};\n  Object.keys(chromSize).reduce((sum2, k) => {\n    interval2[k] = [sum2, sum2 + chromSize[k]];\n    return sum2 + chromSize[k];\n  }, 0);\n  return interval2;\n}\nfunction getChromTotalSize(chromSize) {\n  return Object.values(chromSize).reduce((sum2, current) => sum2 + current, 0);\n}\nfunction definePluginTrack(config2, factory2) {\n  var _a;\n  function Track(...args) {\n    if (!new.target) {\n      throw new Error('Uncaught TypeError: Class constructor cannot be invoked without \"new\"');\n    }\n    return factory2(...args);\n  }\n  Track.config = {\n    ...config2,\n    availableOptions: Object.keys((_a = config2.defaultOptions) != null ? _a : {})\n  };\n  return Track;\n}\nconst TICK_WIDTH = 200;\nconst TICK_HEIGHT = 6;\nconst TICK_TEXT_SEPARATION = 2;\nconst TICK_COLOR = 7829367;\nconst icon$1 = '<svg version=\"1.0\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 5640 5420\" preserveAspectRatio=\"xMidYMid meet\"> <g id=\"layer101\" fill=\"#000000\" stroke=\"none\"> <path d=\"M0 2710 l0 -2710 2820 0 2820 0 0 2710 0 2710 -2820 0 -2820 0 0 -2710z\"/> </g> <g id=\"layer102\" fill=\"#750075\" stroke=\"none\"> <path d=\"M200 4480 l0 -740 630 0 630 0 0 740 0 740 -630 0 -630 0 0 -740z\"/> <path d=\"M1660 4420 l0 -800 570 0 570 0 0 800 0 800 -570 0 -570 0 0 -800z\"/> <path d=\"M3000 3450 l0 -1770 570 0 570 0 0 1770 0 1770 -570 0 -570 0 0 -1770z\"/> <path d=\"M4340 2710 l0 -2510 560 0 560 0 0 2510 0 2510 -560 0 -560 0 0 -2510z\"/> <path d=\"M200 1870 l0 -1670 630 0 630 0 0 1670 0 1670 -630 0 -630 0 0 -1670z\"/> <path d=\"M1660 1810 l0 -1610 570 0 570 0 0 1610 0 1610 -570 0 -570 0 0 -1610z\"/> <path d=\"M3000 840 l0 -640 570 0 570 0 0 640 0 640 -570 0 -570 0 0 -640z\"/> </g> <g id=\"layer103\" fill=\"#ffff04\" stroke=\"none\"> <path d=\"M200 4480 l0 -740 630 0 630 0 0 740 0 740 -630 0 -630 0 0 -740z\"/> <path d=\"M1660 4420 l0 -800 570 0 570 0 0 800 0 800 -570 0 -570 0 0 -800z\"/> <path d=\"M3000 3450 l0 -1770 570 0 570 0 0 1770 0 1770 -570 0 -570 0 0 -1770z\"/> </g> </svg>';\nconst config$1 = {\n  type: \"axis-track\",\n  datatype: [\"multivec\", \"epilogos\"],\n  local: false,\n  orientation: \"1d-horizontal\",\n  thumbnail: new DOMParser().parseFromString(icon$1, \"text/xml\").documentElement,\n  defaultOptions: {\n    innerRadius: 340,\n    outerRadius: 310,\n    startAngle: 0,\n    endAngle: 360,\n    width: 700,\n    height: 700,\n    layout: \"linear\",\n    labelPosition: \"none\",\n    labelColor: \"black\",\n    labelTextOpacity: 0.4,\n    trackBorderWidth: 0,\n    trackBorderColor: \"black\",\n    tickPositions: \"even\",\n    fontSize: 12,\n    fontFamily: \"sans-serif\",\n    fontWeight: \"normal\",\n    color: \"#808080\",\n    stroke: \"#ffffff\",\n    backgroundColor: \"transparent\",\n    showMousePosition: false,\n    tickColor: TICK_COLOR\n  }\n};\nconst factory = (HGC, context2, options) => {\n  const { absToChr, colorToHex: colorToHex2, pixiTextToSvg, svgLine, showMousePosition } = HGC.utils;\n  function createTickText(text, style) {\n    return Object.assign(new HGC.libraries.PIXI.Text(text, style), { hashValue: Math.random() });\n  }\n  class AxisTrackClass extends HGC.tracks.PixiTrack {\n    constructor() {\n      super(context2, options);\n      const { dataConfig, animate, chromInfoPath, isShowGlobalMousePosition } = context2;\n      this.searchField = null;\n      this.dataConfig = dataConfig;\n      this.allTexts = [];\n      this.pTicksCircular = new HGC.libraries.PIXI.Graphics();\n      this.pTicks = new HGC.libraries.PIXI.Graphics();\n      this.pMain.addChild(this.pTicks);\n      this.pMain.addChild(this.pTicksCircular);\n      this.gTicks = {};\n      this.tickTexts = {};\n      this.options = options;\n      this.isShowGlobalMousePosition = isShowGlobalMousePosition;\n      this.pixiTextConfig = getTextStyle({\n        size: +this.options.fontSize,\n        fontFamily: this.options.fontFamily,\n        fontWeight: this.options.fontWeight,\n        color: this.options.color,\n        stroke: this.options.stroke,\n        strokeThickness: 2\n      });\n      this.stroke = colorToHex2(this.pixiTextConfig.stroke);\n      this.tickWidth = TICK_WIDTH;\n      this.tickHeight = TICK_HEIGHT;\n      this.tickTextSeparation = TICK_TEXT_SEPARATION;\n      this.tickColor = colorToHex2(this.options.tickColor);\n      this.animate = animate;\n      this.pubSubs = [];\n      if (this.options.showMousePosition && !this.hideMousePosition) {\n        this.hideMousePosition = showMousePosition(this, this.is2d, this.isShowGlobalMousePosition());\n      }\n      let chromSizesPath = chromInfoPath;\n      if (!chromSizesPath) {\n        chromSizesPath = `${dataConfig.server}/chrom-sizes/?id=${dataConfig.tilesetUid}`;\n      }\n      const assembly = this.options.assembly;\n      const chrPositions = {};\n      const chromLengths = { ...GET_CHROM_SIZES(assembly).size };\n      const cumPositions = [];\n      Object.keys(GET_CHROM_SIZES(assembly).size).forEach((k) => {\n        chrPositions[k] = { chr: k, pos: GET_CHROM_SIZES(assembly).size[k] };\n      });\n      Object.keys(GET_CHROM_SIZES(assembly).interval).forEach((k) => {\n        cumPositions.push({ chr: k, pos: GET_CHROM_SIZES(assembly).interval[k][0] });\n      });\n      this.chromInfo = { chrPositions, chromLengths, cumPositions };\n      this.rerender(this.options, true);\n      this.draw();\n      this.animate();\n    }\n    initBoundsTicks() {\n      if (this.pTicks) {\n        this.pMain.removeChild(this.pTicks);\n        this.pTicks = null;\n      }\n      if (!this.gBoundTicks) {\n        this.gBoundTicks = new HGC.libraries.PIXI.Graphics();\n        this.leftBoundTick = createTickText(\"\", this.pixiTextConfig);\n        this.rightBoundTick = createTickText(\"\", this.pixiTextConfig);\n        this.gBoundTicks.addChild(this.leftBoundTick);\n        this.gBoundTicks.addChild(this.rightBoundTick);\n        this.pMain.addChild(this.gBoundTicks);\n      }\n      this.texts = [];\n    }\n    initChromLabels() {\n      if (!this.chromInfo)\n        return;\n      if (this.gBoundTicks) {\n        this.pMain.removeChild(this.gBoundTicks);\n        this.gBoundTicks = void 0;\n      }\n      if (!this.pTicks) {\n        this.pTicks = new HGC.libraries.PIXI.Graphics();\n        this.pMain.addChild(this.pTicks);\n      }\n      this.texts = [];\n      this.pTicks.removeChildren();\n      this.chromInfo.cumPositions.forEach((info) => {\n        var _a, _b, _c;\n        const chromName = info.chr;\n        this.gTicks[chromName] = new HGC.libraries.PIXI.Graphics();\n        if (!this.tickTexts[chromName])\n          this.tickTexts[chromName] = [];\n        const text = createTickText(chromName, this.pixiTextConfig);\n        (_a = this.pTicks) == null ? void 0 : _a.addChild(text);\n        (_b = this.pTicks) == null ? void 0 : _b.addChild(this.gTicks[chromName]);\n        (_c = this.texts) == null ? void 0 : _c.push(text);\n      });\n    }\n    rerender(options2, force) {\n      const strOptions = JSON.stringify(options2);\n      if (!force && strOptions === this.prevOptions)\n        return;\n      this.prevOptions = strOptions;\n      this.options = options2;\n      this.pixiTextConfig.fontSize = +this.options.fontSize ? `${+this.options.fontSize}px` : this.pixiTextConfig.fontSize;\n      this.pixiTextConfig.fill = this.options.color || this.pixiTextConfig.fill;\n      this.pixiTextConfig.stroke = this.options.stroke || this.pixiTextConfig.stroke;\n      this.stroke = colorToHex2(this.pixiTextConfig.stroke);\n      this.tickColor = this.options.tickColor ? colorToHex2(this.options.tickColor) : TICK_COLOR;\n      if (this.options.tickPositions === \"ends\" && this.options.layout !== \"circular\") {\n        this.initBoundsTicks();\n      } else {\n        this.initChromLabels();\n      }\n      super.rerender(options2, force);\n      if (this.options.showMousePosition && !this.hideMousePosition) {\n        this.hideMousePosition = showMousePosition(this, this.is2d, this.isShowGlobalMousePosition());\n      }\n      if (!this.options.showMousePosition && this.hideMousePosition) {\n        this.hideMousePosition();\n        this.hideMousePosition = void 0;\n      }\n    }\n    formatTick(pos) {\n      if (isNaN(pos)) {\n        return \"null\";\n      }\n      const domain = this._xScale.domain();\n      const viewWidth = domain[1] - domain[0];\n      const p = precisionPrefix(pos, viewWidth);\n      const fPlain = format$1(\",\");\n      const fPrecision = formatPrefix(`,.${p}`, viewWidth);\n      let f2 = fPlain;\n      if (this.options.tickFormat === \"si\") {\n        f2 = fPrecision;\n      } else if (this.options.tickFormat === \"plain\") {\n        f2 = fPlain;\n      } else if (this.options.tickPositions === \"ends\") {\n        f2 = fPrecision;\n      }\n      return f2(pos);\n    }\n    drawBoundsTicks(x1, x2) {\n      if (!this.gBoundTicks || !this.leftBoundTick || !this.rightBoundTick)\n        return;\n      const graphics = this.gBoundTicks;\n      graphics.clear();\n      graphics.lineStyle(1, 0);\n      const lineYStart = this.options.reverseOrientation ? 0 : this.dimensions[1];\n      const lineYEnd = this.options.reverseOrientation ? this.tickHeight : this.dimensions[1] - this.tickHeight;\n      graphics.moveTo(1, lineYStart);\n      graphics.lineTo(1, lineYEnd);\n      graphics.moveTo(this.dimensions[0] - 1, lineYStart);\n      graphics.lineTo(this.dimensions[0] - 1, lineYEnd);\n      this.leftBoundTick.x = 0;\n      this.leftBoundTick.y = this.options.reverseOrientation ? lineYEnd + this.tickTextSeparation : lineYEnd - this.tickTextSeparation;\n      this.leftBoundTick.text = this.options.assembly === \"unknown\" ? `${this.formatTick(x1[1])}` : `${x1[0]}: ${this.formatTick(x1[1])}`;\n      this.leftBoundTick.anchor.y = this.options.reverseOrientation ? 0 : 1;\n      this.rightBoundTick.x = this.dimensions[0];\n      this.rightBoundTick.text = this.options.assembly === \"unknown\" ? `${this.formatTick(x2[1])}` : `${x2[0]}: ${this.formatTick(x2[1])}`;\n      this.rightBoundTick.y = this.options.reverseOrientation ? lineYEnd + this.tickTextSeparation : lineYEnd - this.tickTextSeparation;\n      this.rightBoundTick.anchor.y = this.options.reverseOrientation ? 0 : 1;\n      this.rightBoundTick.anchor.x = 1;\n      if (this.flipText) {\n        this.leftBoundTick.scale.x = -1;\n        this.leftBoundTick.anchor.x = 1;\n        this.rightBoundTick.scale.x = -1;\n        this.rightBoundTick.anchor.x = 0;\n      }\n      this.leftBoundTick.tickLine = [1, this.dimensions[1], 1, this.dimensions[1] - this.tickHeight];\n      this.rightBoundTick.tickLine = [\n        this.dimensions[0] - 1,\n        this.dimensions[1],\n        this.dimensions[0] - 1,\n        this.dimensions[1] - this.tickHeight\n      ];\n      this.tickTexts = {};\n      this.tickTexts.all = [this.leftBoundTick, this.rightBoundTick];\n    }\n    drawTicks(cumPos) {\n      const graphics = this.gTicks[cumPos.chr];\n      graphics.visible = true;\n      graphics.clear();\n      const chromLen = +this.chromInfo.chromLengths[cumPos.chr];\n      const vpLeft = Math.max(this._xScale(cumPos.pos), 0);\n      const vpRight = Math.min(this._xScale(cumPos.pos + chromLen), this.dimensions[0]);\n      const numTicks = (vpRight - vpLeft) / this.tickWidth;\n      const xScale = scaleLinear().domain([\n        Math.max(1, this._xScale.invert(0) - cumPos.pos),\n        Math.min(chromLen, this._xScale.invert(this.dimensions[0]) - cumPos.pos)\n      ]).range([vpLeft, vpRight]);\n      const ticks = xScale.ticks(numTicks).filter((tick) => Number.isInteger(tick));\n      const tickTexts = this.tickTexts[cumPos.chr];\n      const tickHeight = this.tickHeight;\n      const xPadding = 0;\n      let yPadding = tickHeight + this.tickTextSeparation;\n      if (this.options.reverseOrientation) {\n        yPadding = this.dimensions[1] - yPadding;\n      }\n      while (tickTexts.length < ticks.length) {\n        const newText = createTickText(\"\", this.pixiTextConfig);\n        tickTexts.push(newText);\n        this.gTicks[cumPos.chr].addChild(newText);\n      }\n      while (tickTexts.length > ticks.length) {\n        const text = tickTexts.pop();\n        this.gTicks[cumPos.chr].removeChild(text);\n      }\n      let i = 0;\n      while (i < ticks.length) {\n        tickTexts[i].visible = true;\n        tickTexts[i].anchor.x = 0.5;\n        tickTexts[i].anchor.y = this.options.layout === \"circular\" ? 0 : this.options.reverseOrientation ? 0 : 1;\n        if (this.flipText)\n          tickTexts[i].scale.x = -1;\n        const chrText = this.options.assembly === \"unknown\" ? \"\" : `${cumPos.chr}: `;\n        tickTexts[i].text = ticks[i] === 0 ? `${chrText}1` : `${chrText}${this.formatTick(ticks[i])}`;\n        const x = this._xScale(cumPos.pos + ticks[i]);\n        if (this.options.layout === \"circular\") {\n          const rope = this.addCurvedText(tickTexts[i], x + xPadding);\n          rope && this.pTicksCircular.addChild(rope);\n        } else {\n          tickTexts[i].x = x + xPadding;\n          tickTexts[i].y = this.dimensions[1] - yPadding;\n          tickTexts[i].tickLine = [x - 1, this.dimensions[1], x - 1, this.dimensions[1] - tickHeight - 1];\n          const lineYStart = this.options.reverseOrientation ? 0 : this.dimensions[1];\n          const lineYEnd = this.options.reverseOrientation ? tickHeight : this.dimensions[1] - tickHeight;\n          graphics.lineStyle(1, this.tickColor);\n          graphics.moveTo(x, lineYStart);\n          graphics.lineTo(x, lineYEnd);\n        }\n        i += 1;\n      }\n      if (this.options.layout === \"circular\")\n        i = 0;\n      while (i < tickTexts.length) {\n        tickTexts[i].visible = false;\n        i += 1;\n      }\n      return ticks.length;\n    }\n    addCurvedText(textObj, cx) {\n      const [width, height] = this.dimensions;\n      const { startAngle, endAngle } = this.options;\n      const factor = Math.min(width, height) / Math.min(this.options.width, this.options.height);\n      const innerRadius = this.options.innerRadius * factor;\n      const outerRadius = this.options.outerRadius * factor;\n      const r = (outerRadius + innerRadius) / 2;\n      const centerPos = cartesianToPolar(cx, width, r, width / 2, height / 2, startAngle, endAngle);\n      textObj.x = centerPos.x;\n      textObj.y = centerPos.y;\n      textObj.resolution = 4;\n      const txtStyle = new HGC.libraries.PIXI.TextStyle(this.pixiTextConfig);\n      const metric = HGC.libraries.PIXI.TextMetrics.measureText(textObj.text, txtStyle);\n      const tw = metric.width / (2 * r * Math.PI) * width * 360 / (endAngle - startAngle);\n      let [minX, maxX] = [cx - tw / 2, cx + tw / 2];\n      if (minX < 0) {\n        const gap = -minX;\n        minX = 0;\n        maxX += gap;\n      } else if (maxX > width) {\n        const gap = maxX - width;\n        maxX = width;\n        minX -= gap;\n      }\n      const ropePoints = [];\n      const baseR = innerRadius + metric.height / 2 + 3;\n      for (let i = maxX; i >= minX; i -= tw / 10) {\n        const p = cartesianToPolar(i, width, baseR, width / 2, height / 2, startAngle, endAngle);\n        ropePoints.push(new HGC.libraries.PIXI.Point(p.x, p.y));\n      }\n      if (ropePoints.length === 0) {\n        return void 0;\n      }\n      textObj.updateText();\n      const rope = new HGC.libraries.PIXI.SimpleRope(textObj.texture, ropePoints);\n      return rope;\n    }\n    draw() {\n      this.allTexts = [];\n      if (!this.texts)\n        return;\n      const x1 = absToChr(this._xScale.domain()[0], this.chromInfo);\n      const x2 = absToChr(this._xScale.domain()[1], this.chromInfo);\n      if (!x1 || !x2) {\n        console.warn(\"Empty chromInfo:\", this.dataConfig, this.chromInfo);\n        return;\n      }\n      if (this.options.tickPositions === \"ends\" && this.options.layout !== \"circular\") {\n        if (!this.gBoundTicks)\n          return;\n        this.gBoundTicks.visible = true;\n        this.drawBoundsTicks(x1, x2);\n        return;\n      }\n      if (!this.pTicks) {\n        return;\n      }\n      const circular = this.options.layout === \"circular\";\n      for (let i = 0; i < this.texts.length; i++) {\n        this.texts[i].visible = false;\n        this.gTicks[this.chromInfo.cumPositions[i].chr].visible = false;\n      }\n      let yPadding = this.tickHeight + this.tickTextSeparation;\n      if (this.options.reverseOrientation) {\n        yPadding = this.dimensions[1] - yPadding;\n      }\n      Object.keys(this.chromInfo.chrPositions).forEach((chrom) => {\n        if (this.tickTexts[chrom]) {\n          this.tickTexts[chrom].forEach((tick) => {\n            tick.visible = false;\n          });\n        }\n      });\n      this.pTicksCircular.removeChildren();\n      for (let i = x1[3]; i <= x2[3]; i++) {\n        const xCumPos = this.chromInfo.cumPositions[i];\n        const midX = xCumPos.pos + this.chromInfo.chromLengths[xCumPos.chr] / 2;\n        const viewportMidX = this._xScale(midX);\n        const chrText = this.texts[i];\n        chrText.anchor.x = 0.5;\n        chrText.anchor.y = circular ? 0.5 : this.options.reverseOrientation ? 0 : 1;\n        let rope;\n        if (circular) {\n          rope = this.addCurvedText(chrText, viewportMidX);\n          if (rope) {\n            this.pTicksCircular.addChild(rope);\n          }\n        } else {\n          chrText.x = viewportMidX;\n          chrText.y = this.dimensions[1] - yPadding;\n        }\n        chrText.updateTransform();\n        if (this.flipText)\n          chrText.scale.x = -1;\n        const numTicksDrawn = this.drawTicks(xCumPos);\n        if (!circular) {\n          chrText.visible = numTicksDrawn <= 0;\n        } else {\n          if (numTicksDrawn > 0) {\n            rope && this.pTicksCircular.removeChild(rope);\n          }\n        }\n        this.allTexts.push({\n          importance: chrText.hashValue,\n          text: chrText,\n          rope\n        });\n      }\n      this.hideOverlaps(this.allTexts);\n    }\n    hideOverlaps(allTexts) {\n      const tree = new RBush();\n      allTexts.sort((a, b) => b.importance - a.importance).forEach(({ text, rope }) => {\n        text.updateTransform();\n        const b = text.getBounds();\n        const m = 5;\n        const boxWithMargin = {\n          minX: b.x - m,\n          minY: b.y - m,\n          maxX: b.x + b.width + m * 2,\n          maxY: b.y + b.height + m * 2\n        };\n        if (!tree.collides(boxWithMargin)) {\n          tree.insert(boxWithMargin);\n        } else {\n          text.visible = false;\n          if (this.options.layout === \"circular\" && rope) {\n            this.pTicksCircular.removeChild(rope);\n          }\n        }\n      });\n    }\n    setPosition(newPosition) {\n      super.setPosition(newPosition);\n      [this.pMain.position.x, this.pMain.position.y] = this.position;\n    }\n    zoomed(newXScale, newYScale) {\n      const domainValues = [...newXScale.domain(), ...newYScale.domain()];\n      if (domainValues.filter((d) => isNaN(d)).length !== 0) {\n        return;\n      }\n      this.xScale(newXScale);\n      this.yScale(newYScale);\n      this.draw();\n    }\n    exportSVG() {\n      let track = null;\n      let base = null;\n      if (super.exportSVG) {\n        [base, track] = super.exportSVG();\n      } else {\n        base = document.createElement(\"g\");\n        track = base;\n      }\n      base.setAttribute(\"class\", \"chromosome-labels\");\n      const output = document.createElement(\"g\");\n      track.appendChild(output);\n      output.setAttribute(\"transform\", `translate(${this.position[0]},${this.position[1]})`);\n      this.allTexts.filter((text) => text.text.visible).forEach((text) => {\n        const g = pixiTextToSvg(text.text);\n        output.appendChild(g);\n      });\n      Object.values(this.tickTexts).forEach((texts) => {\n        texts.filter((x) => x.visible).forEach((text) => {\n          if (!text.tickLine)\n            return;\n          let g = pixiTextToSvg(text);\n          output.appendChild(g);\n          g = svgLine(text.x, this.options.reverseOrientation ? 0 : this.dimensions[1], text.x, this.options.reverseOrientation ? this.tickHeight : this.dimensions[1] - this.tickHeight, 1, this.tickColor);\n          const line = document.createElement(\"line\");\n          line.setAttribute(\"x1\", String(text.tickLine[0]));\n          line.setAttribute(\"y1\", String(text.tickLine[1]));\n          line.setAttribute(\"x2\", String(text.tickLine[2]));\n          line.setAttribute(\"y2\", String(text.tickLine[3]));\n          line.setAttribute(\"style\", \"stroke: grey\");\n          output.appendChild(g);\n          output.appendChild(line);\n        });\n      });\n      return [base, track];\n    }\n  }\n  return new AxisTrackClass();\n};\nvar AxisTrack = definePluginTrack(config$1, factory);\nfunction BrushTrack(HGC, ...args) {\n  if (!new.target) {\n    throw new Error('Uncaught TypeError: Class constructor cannot be invoked without \"new\"');\n  }\n  class BrushTrackClass extends HGC.tracks.SVGTrack {\n    constructor(params) {\n      var _a, _b;\n      super(...params);\n      const [context2, options] = params;\n      const { registerViewportChanged, removeViewportChanged, setDomainsCallback } = context2;\n      this.uid = v1();\n      this.options = options;\n      this.hasFromView = !context2.projectionXDomain;\n      this.removeViewportChanged = removeViewportChanged;\n      this.setDomainsCallback = setDomainsCallback;\n      this.viewportXDomain = this.hasFromView ? null : context2.projectionXDomain;\n      this.viewportYDomain = this.hasFromView ? null : [0, 0];\n      this.prevExtent = [0, 0];\n      this.RR = 0.02;\n      const extent = [0, Math.PI * 1.7];\n      this.circularBrushData = this.getBrushData(extent);\n      this.brush = arc().innerRadius((_a = this.options.innerRadius) != null ? _a : 100).outerRadius((_b = this.options.outerRadius) != null ? _b : 200);\n      this.gBrush = this.gMain.append(\"g\").attr(\"id\", `brush-${this.uid}`).selectAll(\".brush\").data(this.circularBrushData).enter().append(\"path\").attr(\"class\", \"brush\").attr(\"d\", this.brush).attr(\"fill\", this.options.projectionFillColor).attr(\"stroke\", this.options.projectionStrokeColor).attr(\"fill-opacity\", (d) => d.type === \"brush\" ? this.options.projectionFillOpacity : 0).attr(\"stroke-opacity\", (d) => d.type === \"brush\" ? this.options.projectionStrokeOpacity : 0).attr(\"stroke-width\", this.options.strokeWidth).style(\"pointer-events\", \"all\").style(\"cursor\", (d) => d.cursor).call(this.dragged());\n      registerViewportChanged(this.uid, this.viewportChanged.bind(this));\n      this.draw();\n    }\n    getBrushData(extent) {\n      return [\n        {\n          type: \"brush\",\n          startAngle: extent[0],\n          endAngle: extent[1],\n          cursor: \"grab\"\n        },\n        {\n          type: \"start\",\n          startAngle: extent[0],\n          endAngle: extent[0] + this.RR,\n          cursor: \"move\"\n        },\n        {\n          type: \"end\",\n          startAngle: extent[1] - this.RR,\n          endAngle: extent[1],\n          cursor: \"move\"\n        }\n      ];\n    }\n    cropExtent(extent) {\n      let [s, e] = extent;\n      let round = 0;\n      while (s > Math.PI * 2 || e > Math.PI * 2 || s < 0 || e < 0) {\n        if (round++ > 10) {\n          break;\n        }\n        if (s > Math.PI * 2 || e > Math.PI * 2) {\n          s -= Math.PI * 2;\n          e -= Math.PI * 2;\n        } else if (s < 0 || e < 0) {\n          s += Math.PI * 2;\n          e += Math.PI * 2;\n        }\n      }\n      return [s, e].sort((a, b) => a - b);\n    }\n    updateBrush(extent) {\n      let [s, e] = extent;\n      if (s <= RADIAN_GAP && e <= RADIAN_GAP || s >= Math.PI * 2 - RADIAN_GAP && e >= Math.PI * 2 - RADIAN_GAP) {\n        this.gBrush.attr(\"visibility\", \"hidden\");\n        return;\n      }\n      if (s < RADIAN_GAP) {\n        s = RADIAN_GAP;\n      }\n      if (s > Math.PI * 2 - RADIAN_GAP) {\n        s = Math.PI * 2 - RADIAN_GAP;\n      }\n      if (e < RADIAN_GAP) {\n        e = RADIAN_GAP;\n      }\n      if (e > Math.PI * 2 - RADIAN_GAP) {\n        e = Math.PI * 2 - RADIAN_GAP;\n      }\n      this.circularBrushData = this.getBrushData(extent);\n      this.gBrush.data(this.circularBrushData).attr(\"d\", this.brush).attr(\"visibility\", \"visible\");\n    }\n    dragged() {\n      const start = () => {\n        this.startEvent = HGC.libraries.d3Selection.event.sourceEvent;\n        this.prevExtent = [this.circularBrushData[0].startAngle, this.circularBrushData[0].endAngle];\n      };\n      const drag = (d) => {\n        const [x, y] = this.position;\n        const [w, h] = this.dimensions;\n        const endEvent = HGC.libraries.d3Selection.event.sourceEvent;\n        const startX = this.startEvent.layerX - x;\n        const startY = this.startEvent.layerY - y;\n        const endX = endEvent.layerX - x;\n        const endY = endEvent.layerY - y;\n        const radDiff = Math.atan2(startX - w / 2, startY - h / 2) - Math.atan2(endX - w / 2, endY - h / 2);\n        let [s, e] = this.prevExtent;\n        if (d.type === \"brush\") {\n          s = s + radDiff;\n          e = e + radDiff;\n          if (s < RADIAN_GAP || Math.PI * 2 - RADIAN_GAP < e) {\n            const sto = RADIAN_GAP - s;\n            const eto = e - (Math.PI * 2 - RADIAN_GAP);\n            if (sto > eto) {\n              e += sto;\n              s += sto;\n            } else {\n              s -= eto;\n              e -= eto;\n            }\n          }\n        } else if (d.type === \"start\") {\n          s = s + radDiff;\n        } else if (d.type === \"end\") {\n          e = e + radDiff;\n        }\n        [s, e] = this.cropExtent([s, e]);\n        if (!this._xScale || !this._yScale) {\n          return;\n        }\n        const scale = (this.options.endAngle - this.options.startAngle) / 360;\n        const offsetedS = s - this.options.startAngle / 360 * Math.PI * 2;\n        const offsetedE = e - this.options.startAngle / 360 * Math.PI * 2;\n        const xDomain = [\n          this._xScale.invert(w - w * offsetedE / (Math.PI * 2 * scale)),\n          this._xScale.invert(w - w * offsetedS / (Math.PI * 2 * scale))\n        ];\n        const yDomain = this.viewportYDomain;\n        if (!this.hasFromView) {\n          this.viewportXDomain = xDomain;\n        }\n        this.setDomainsCallback(xDomain, yDomain);\n        this.updateBrush([s, e]);\n      };\n      return HGC.libraries.d3Drag.drag().on(\"start\", start).on(\"drag\", drag);\n    }\n    draw() {\n      if (!this._xScale || !this.yScale) {\n        return;\n      }\n      if (!this.viewportXDomain || !this.viewportYDomain) {\n        return;\n      }\n      const x0 = this._xScale(this.viewportXDomain[0]);\n      const x1 = this._xScale(this.viewportXDomain[1]);\n      const [w] = this.dimensions;\n      let e = valueToRadian(x0, w, this.options.startAngle, this.options.endAngle) + Math.PI / 2;\n      let s = valueToRadian(x1, w, this.options.startAngle, this.options.endAngle) + Math.PI / 2;\n      [s, e] = this.cropExtent([s, e]);\n      this.updateBrush([s, e]);\n    }\n    viewportChanged(viewportXScale, viewportYScale) {\n      const viewportXDomain = viewportXScale.domain();\n      const viewportYDomain = viewportYScale.domain();\n      this.viewportXDomain = viewportXDomain;\n      this.viewportYDomain = viewportYDomain;\n      this.draw();\n    }\n    remove() {\n      this.removeViewportChanged(this.uid);\n      super.remove();\n    }\n    rerender() {\n    }\n    zoomed(newXScale, newYScale) {\n      this.xScale(newXScale);\n      this.yScale(newYScale);\n      this.draw();\n    }\n    setPosition(newPosition) {\n      super.setPosition(newPosition);\n      this.draw();\n    }\n    setDimensions(newDimensions) {\n      super.setDimensions(newDimensions);\n      this.gBrush.attr(\"transform\", `translate(${newDimensions[0] / 2},${newDimensions[1] / 2})`);\n      this.draw();\n    }\n  }\n  return new BrushTrackClass(args);\n}\nconst icon = '<svg version=\"1.0\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 5640 5420\" preserveAspectRatio=\"xMidYMid meet\"> <g id=\"layer101\" fill=\"#000000\" stroke=\"none\"> <path d=\"M0 2710 l0 -2710 2820 0 2820 0 0 2710 0 2710 -2820 0 -2820 0 0 -2710z\"/> </g> <g id=\"layer102\" fill=\"#750075\" stroke=\"none\"> <path d=\"M200 4480 l0 -740 630 0 630 0 0 740 0 740 -630 0 -630 0 0 -740z\"/> <path d=\"M1660 4420 l0 -800 570 0 570 0 0 800 0 800 -570 0 -570 0 0 -800z\"/> <path d=\"M3000 3450 l0 -1770 570 0 570 0 0 1770 0 1770 -570 0 -570 0 0 -1770z\"/> <path d=\"M4340 2710 l0 -2510 560 0 560 0 0 2510 0 2510 -560 0 -560 0 0 -2510z\"/> <path d=\"M200 1870 l0 -1670 630 0 630 0 0 1670 0 1670 -630 0 -630 0 0 -1670z\"/> <path d=\"M1660 1810 l0 -1610 570 0 570 0 0 1610 0 1610 -570 0 -570 0 0 -1610z\"/> <path d=\"M3000 840 l0 -640 570 0 570 0 0 640 0 640 -570 0 -570 0 0 -640z\"/> </g> <g id=\"layer103\" fill=\"#ffff04\" stroke=\"none\"> <path d=\"M200 4480 l0 -740 630 0 630 0 0 740 0 740 -630 0 -630 0 0 -740z\"/> <path d=\"M1660 4420 l0 -800 570 0 570 0 0 800 0 800 -570 0 -570 0 0 -800z\"/> <path d=\"M3000 3450 l0 -1770 570 0 570 0 0 1770 0 1770 -570 0 -570 0 0 -1770z\"/> </g> </svg>';\nBrushTrack.config = {\n  type: \"brush-track\",\n  datatype: [\"projection\"],\n  local: false,\n  projection: true,\n  orientation: \"2d\",\n  thumbnail: new DOMParser().parseFromString(icon, \"text/xml\").documentElement,\n  availableOptions: [\n    \"innerRadius\",\n    \"outerRadius\",\n    \"startAngle\",\n    \"endAngle\",\n    \"axisPositionHorizontal\",\n    \"projectionFillColor\",\n    \"projectionStrokeColor\",\n    \"projectionFillOpacity\",\n    \"projectionStrokeOpacity\",\n    \"strokeWidth\"\n  ],\n  defaultOptions: {\n    innerRadius: 100,\n    outerRadius: 200,\n    startAngle: 0,\n    endAngle: 360,\n    axisPositionHorizontal: \"left\",\n    projectionFillColor: \"#777\",\n    projectionStrokeColor: \"#777\",\n    projectionFillOpacity: 0.3,\n    projectionStrokeOpacity: 0.7,\n    strokeWidth: 1\n  }\n};\nfunction filterData(filter2, data2) {\n  const { field, not: not3 } = filter2;\n  let output = Array.from(data2);\n  if (IsOneOfFilter(filter2)) {\n    const { oneOf: oneOf2 } = filter2;\n    output = output.filter((d) => {\n      return not3 ? oneOf2.indexOf(d[field]) === -1 : oneOf2.indexOf(d[field]) !== -1;\n    });\n  } else if (IsRangeFilter(filter2)) {\n    const { inRange } = filter2;\n    output = output.filter((d) => {\n      return not3 ? !(inRange[0] <= d[field] && d[field] <= inRange[1]) : inRange[0] <= d[field] && d[field] <= inRange[1];\n    });\n  } else if (IsIncludeFilter(filter2)) {\n    const { include } = filter2;\n    output = output.filter((d) => {\n      return not3 ? `${d[field]}`.includes(include) : !`${d[field]}`.includes(include);\n    });\n  }\n  return output;\n}\nfunction concatString(concat2, data2) {\n  const { fields, separator, newField } = concat2;\n  let output = Array.from(data2);\n  output = output.map((d) => {\n    const strs = fields.map((f2) => d[f2]);\n    d[newField] = strs.join(separator);\n    return d;\n  });\n  return output;\n}\nfunction replaceString(_, data2) {\n  const { field, replace, newField } = _;\n  let output = Array.from(data2);\n  output = output.map((d) => {\n    d[newField] = d[field];\n    replace.forEach((r) => {\n      const { from: from2, to } = r;\n      d[newField] = d[newField].toString().replaceAll(from2, to);\n    });\n    return d;\n  });\n  return output;\n}\nfunction calculateData(log, data2) {\n  const { field, base, newField } = log;\n  let output = Array.from(data2);\n  output = output.map((d) => {\n    if (+d[field]) {\n      if (base === \"e\") {\n        d[newField != null ? newField : field] = Math.log(+d[field]);\n      } else {\n        d[newField != null ? newField : field] = Math.log(+d[field]) / Math.log(base != null ? base : 10);\n      }\n    }\n    return d;\n  });\n  return output;\n}\nfunction calculateGenomicLength(_, data2) {\n  const { startField, endField, newField } = _;\n  const output = Array.from(data2);\n  output.forEach((d) => {\n    const s = d[startField];\n    const e = d[endField];\n    if (!s || !e) {\n      return;\n    }\n    d[newField] = Math.abs(+e - +s);\n  });\n  return output;\n}\nfunction inferSvType(_, data2) {\n  const { firstBp, secondBp, newField } = _;\n  const output = Array.from(data2);\n  const [DUP, TRA, DEL, t2tINV, h2hINV] = [\"DUP\", \"TRA\", \"DEL\", \"t2tINV\", \"h2hINV\"];\n  output.forEach((d) => {\n    const chr1 = d[firstBp.chrField];\n    const chr2 = d[secondBp.chrField];\n    if (chr1 !== chr2) {\n      d[newField] = TRA;\n      return;\n    }\n    let pos1 = d[firstBp.posField];\n    let pos2 = d[secondBp.posField];\n    let strand1 = d[firstBp.strandField];\n    let strand2 = d[secondBp.strandField];\n    if (pos1 > pos2) {\n      const _pos = pos1;\n      const _strand = strand1;\n      pos1 = pos2;\n      strand1 = strand2;\n      pos2 = _pos;\n      strand2 = _strand;\n    }\n    switch (`${strand1}${strand2}`) {\n      case \"+-\":\n        d[newField] = DEL;\n        break;\n      case \"--\":\n        d[newField] = t2tINV;\n        break;\n      case \"++\":\n        d[newField] = h2hINV;\n        break;\n      case \"-+\":\n        d[newField] = DUP;\n        break;\n      default:\n        d[newField] = \"unknown\";\n    }\n  });\n  return output;\n}\nfunction aggregateCoverage(_, data2, scale) {\n  const { startField, endField, newField, groupField } = _;\n  const coverage = {};\n  const binSize = 1;\n  data2.forEach((d) => {\n    const curStart = scale(d[startField]);\n    const curEnd = scale(d[endField]);\n    const group2 = groupField ? d[groupField] : \"__NO_GROUP__\";\n    const adjustedStart = Math.floor(curStart);\n    for (let i = adjustedStart; i < curEnd; i += binSize) {\n      if (!coverage[group2]) {\n        coverage[group2] = {};\n      }\n      if (!coverage[group2][i]) {\n        coverage[group2][i] = 0;\n      }\n      coverage[group2][i]++;\n    }\n  });\n  const output = Object.entries(coverage).flatMap((group2) => {\n    const [groupName, coverageRecords] = group2;\n    return Object.entries(coverageRecords).map((entry) => {\n      const [key, value] = entry;\n      return {\n        [startField]: scale.invert(+key),\n        [endField]: scale.invert(+key + binSize),\n        [newField != null ? newField : \"coverage\"]: value,\n        [groupField != null ? groupField : \"group\"]: groupName\n      };\n    });\n  });\n  return output;\n}\nfunction displace(t, data2, scale) {\n  const { boundingBox, method, newField } = t;\n  const { startField, endField, groupField } = boundingBox;\n  let padding = 0;\n  if (boundingBox.padding && scale && !boundingBox.isPaddingBP) {\n    padding = Math.abs(scale.invert(boundingBox.padding) - scale.invert(0));\n  } else if (boundingBox.padding && boundingBox.isPaddingBP) {\n    padding = boundingBox.padding;\n  }\n  const base = Array.from(data2);\n  if (base && base.length > 0) {\n    if (!Object.keys(base[0]).find((d) => d === startField) || !Object.keys(base[0]).find((d) => d === endField)) {\n      return base;\n    }\n  }\n  if (method === \"pile\") {\n    {\n      const { maxRows } = t;\n      const occupiedSpaceInRows = {};\n      const sorted = base.sort((a, b) => a[startField] - b[startField]);\n      sorted.forEach((d) => {\n        const start = d[startField] - padding;\n        const end = d[endField] + padding;\n        const group2 = groupField ? d[groupField] : \"__NO_GROUP__\";\n        if (!occupiedSpaceInRows[group2]) {\n          occupiedSpaceInRows[group2] = [];\n        }\n        let rowIndex = occupiedSpaceInRows[group2].findIndex((d2) => {\n          if (end < d2.start) {\n            d2.start = start;\n            return true;\n          } else if (d2.end < start) {\n            d2.end = end;\n            return true;\n          }\n          return false;\n        });\n        if (rowIndex === -1) {\n          occupiedSpaceInRows[group2].push({ start, end });\n          rowIndex = occupiedSpaceInRows[group2].length - 1;\n        }\n        d[newField] = `${maxRows && maxRows <= rowIndex ? maxRows - 1 : rowIndex}`;\n      });\n    }\n  } else if (method === \"spread\") {\n    const boundingBoxes = [];\n    base.sort((a, b) => a[startField] - b[startField]).forEach((d) => {\n      let start = d[startField] - padding;\n      let end = d[endField] + padding;\n      let overlapped = boundingBoxes.filter((box) => box.start === start && end === box.end || box.start < start && start < box.end || box.start < end && end < box.end || start < box.start && box.end < end);\n      if (overlapped.length > 0) {\n        let trial = 0;\n        do {\n          overlapped = boundingBoxes.filter((box) => box.start === start && end === box.end || box.start < start && start < box.end || box.start < end && end < box.end || start < box.start && box.end < end);\n          if (overlapped.length > 0) {\n            if (trial % 2 === 0) {\n              start += padding * trial;\n              end += padding * trial;\n            } else {\n              start -= padding * trial;\n              end -= padding * trial;\n            }\n          }\n          trial++;\n        } while (overlapped.length > 0 && trial < 1e3);\n      }\n      d[`${newField}Start`] = `${start + padding}`;\n      d[`${newField}Etart`] = `${end - padding}`;\n      boundingBoxes.push({ start, end });\n    });\n  }\n  return base;\n}\nfunction splitExon(split, data2, assembly = \"hg38\") {\n  const { separator, fields, flag } = split;\n  let output = Array.from(data2);\n  output = output.map((d) => {\n    const newRows = [];\n    fields.forEach((f2) => {\n      const { field, type: type2, newField, chrField } = f2;\n      const splitted = d[field].toString().split(separator);\n      splitted.forEach((s, i) => {\n        let newValue = s;\n        if (type2 === \"genomic\") {\n          newValue = GET_CHROM_SIZES(assembly).interval[d[chrField]][0] + +s;\n        }\n        if (!newRows[i]) {\n          newRows[i] = Object.assign(JSON.parse(JSON.stringify(d)), {\n            [newField]: newValue,\n            [flag.field]: flag.value\n          });\n        } else {\n          newRows[i][newField] = newValue;\n        }\n      });\n    });\n    return [d, ...newRows];\n  }).reduce((a, b) => a.concat(b), []);\n  return output;\n}\nfunction parseSubJSON(_, data2) {\n  const { field, genomicField, baseGenomicField, genomicLengthField } = _;\n  let output = Array.from(data2);\n  output = output.map((d) => {\n    let newRows = JSON.parse(d[field]);\n    newRows = newRows.map((row) => {\n      var _a, _b;\n      if (row[genomicField] && d[baseGenomicField]) {\n        row[`${genomicField}_start`] = +row[genomicField] + +d[baseGenomicField];\n        row[`${genomicField}_end`] = +row[genomicField] + +d[baseGenomicField] + +row[genomicLengthField];\n      }\n      return Object.assign(JSON.parse(JSON.stringify(d)), {\n        ...row,\n        [`${genomicField}_start`]: row[`${genomicField}_start`],\n        [`${genomicField}_end`]: row[`${genomicField}_end`],\n        type: (_b = (_a = row.type) != null ? _a : row.variant) != null ? _b : null,\n        isParsedRow: \"yes\"\n      });\n    });\n    return [d, ...newRows];\n  }).reduce((a, b) => a.concat(b), []);\n  return output;\n}\nfunction aggregateData(spec, data2) {\n  if (getChannelKeysByAggregateFnc(spec).length === 0) {\n    return data2;\n  }\n  const nChannelKeys = getChannelKeysByType(spec, \"nominal\");\n  if (nChannelKeys.length !== 1) {\n    console.warn(\"Currently, we only support aggregating datasets with single nominal field.\");\n    return data2;\n  }\n  const nFieldSpec = spec[nChannelKeys[0]];\n  if (!IsChannelDeep(nFieldSpec)) {\n    return data2;\n  }\n  const nField = nFieldSpec.field;\n  if (!nField) {\n    return data2;\n  }\n  const qChannelKeys = [...getChannelKeysByType(spec, \"quantitative\"), ...getChannelKeysByType(spec, \"genomic\")];\n  const aggregated = [];\n  const uniqueCategories = Array.from(new Set(data2.map((d) => d[nField])));\n  let failed = false;\n  uniqueCategories.forEach((c) => {\n    const datum = {};\n    datum[nField] = c;\n    qChannelKeys.forEach((q) => {\n      const qFieldSpec = spec[q];\n      if (!IsChannelDeep(qFieldSpec)) {\n        failed = true;\n        return;\n      }\n      const { field: qField } = qFieldSpec;\n      if (!qField || !(\"aggregate\" in qFieldSpec)) {\n        failed = true;\n        return;\n      }\n      datum[qField] = qFieldSpec.aggregate === \"max\" ? Math.max(...data2.filter((d) => d[nField] === c).map((d) => +d[qField])) : Math.min(...data2.filter((d) => d[nField] === c).map((d) => +d[qField]));\n    });\n    aggregated.push(datum);\n  });\n  return !failed ? aggregated : data2;\n}\nfunction CSVDataFetcher(HGC, ...args) {\n  if (!new.target) {\n    throw new Error('Uncaught TypeError: Class constructor cannot be invoked without \"new\"');\n  }\n  class CSVDataFetcherClass {\n    constructor(params) {\n      const [dataConfig] = params;\n      this.dataConfig = dataConfig;\n      this.tilesetInfoLoading = false;\n      this.assembly = this.dataConfig.assembly;\n      this.filter = this.dataConfig.filter;\n      if (!dataConfig.url) {\n        console.error(\"Please provide the `url` of the data\");\n        return;\n      }\n      const chromosomeSizes = GET_CHROM_SIZES(this.assembly).size;\n      const chromosomeCumPositions = [];\n      const chromosomePositions = {};\n      let prevEndPosition = 0;\n      Object.keys(GET_CHROM_SIZES(this.assembly).size).forEach((chrStr, i) => {\n        const positionInfo = {\n          id: i,\n          chr: chrStr,\n          pos: prevEndPosition\n        };\n        chromosomeCumPositions.push(positionInfo);\n        chromosomePositions[chrStr] = positionInfo;\n        prevEndPosition += GET_CHROM_SIZES(this.assembly).size[chrStr];\n      });\n      this.chromSizes = {\n        chrToAbs: (chrom, chromPos) => this.chromSizes.chrPositions[chrom].pos + chromPos,\n        cumPositions: chromosomeCumPositions,\n        chrPositions: chromosomePositions,\n        totalLength: prevEndPosition,\n        chromLengths: chromosomeSizes\n      };\n      if (dataConfig.data) {\n        this.values = dataConfig.data;\n      } else {\n        this.dataPromise = this.fetchCSV();\n      }\n    }\n    fetchCSV() {\n      var _a;\n      const {\n        url,\n        chromosomeField,\n        genomicFields,\n        headerNames,\n        chromosomePrefix,\n        longToWideId,\n        genomicFieldsToConvert\n      } = this.dataConfig;\n      const separator = (_a = this.dataConfig.separator) != null ? _a : \",\";\n      return fetch(url).then((response) => {\n        return response.ok ? response.text() : Promise.reject(response.status);\n      }).then((text) => {\n        const textWithHeader = headerNames ? `${headerNames.join(separator)}\n${text}` : text;\n        return dsvFormat(separator).parse(textWithHeader, (row) => {\n          let successfullyGotChrInfo = true;\n          if (genomicFieldsToConvert) {\n            genomicFieldsToConvert.forEach((d) => {\n              const cField = d.chromosomeField;\n              d.genomicFields.forEach((g) => {\n                try {\n                  if (this.assembly !== \"unknown\") {\n                    const chr = chromosomePrefix ? row[cField].replace(chromosomePrefix, \"chr\") : row[cField].includes(\"chr\") ? row[cField] : `chr${row[cField]}`;\n                    row[g] = GET_CHROM_SIZES(this.assembly).interval[chr][0] + +row[g];\n                  } else {\n                  }\n                } catch (e) {\n                  successfullyGotChrInfo = false;\n                }\n              });\n            });\n          } else {\n            genomicFields.forEach((g) => {\n              if (!row[chromosomeField]) {\n                return;\n              }\n              try {\n                const chr = chromosomePrefix ? row[chromosomeField].replace(chromosomePrefix, \"chr\") : row[chromosomeField].includes(\"chr\") ? row[chromosomeField] : `chr${row[chromosomeField]}`;\n                row[g] = GET_CHROM_SIZES(this.assembly).interval[chr][0] + +row[g];\n              } catch (e) {\n                successfullyGotChrInfo = false;\n              }\n            });\n          }\n          if (!successfullyGotChrInfo) {\n            return void 0;\n          }\n          return row;\n        });\n      }).then((json) => {\n        var _a2;\n        if (longToWideId && ((_a2 = json[0]) == null ? void 0 : _a2[longToWideId])) {\n          const keys = Object.keys(json[0]);\n          const newJson = {};\n          json.forEach((d) => {\n            if (!newJson[d[longToWideId]]) {\n              newJson[d[longToWideId]] = JSON.parse(JSON.stringify(d));\n            } else {\n              keys.forEach((k) => {\n                newJson[d[longToWideId]][`${k}_2`] = d[k];\n              });\n            }\n          });\n          this.values = Object.keys(newJson).map((k) => newJson[k]);\n        } else {\n          this.values = json;\n        }\n      }).catch((error) => {\n        console.error(\"[Gosling Data Fetcher] Error fetching data\", error);\n      });\n    }\n    generateTilesetInfo(callback) {\n      this.tilesetInfoLoading = false;\n      const TILE_SIZE = 1024;\n      const totalLength = this.chromSizes.totalLength;\n      const retVal = {\n        tile_size: TILE_SIZE,\n        max_zoom: Math.ceil(Math.log(totalLength / TILE_SIZE) / Math.log(2)),\n        max_width: totalLength,\n        min_pos: [0, 0],\n        max_pos: [totalLength, totalLength]\n      };\n      if (callback) {\n        callback(retVal);\n      }\n      return retVal;\n    }\n    tilesetInfo(callback) {\n      if (!this.dataPromise) {\n        return;\n      }\n      this.tilesetInfoLoading = true;\n      return this.dataPromise.then(() => this.generateTilesetInfo(callback)).catch((err) => {\n        this.tilesetInfoLoading = false;\n        console.error(\"[Gosling Data Fetcher] Error parsing data:\", err);\n      });\n    }\n    fetchTilesDebounced(receivedTiles, tileIds) {\n      const tiles = {};\n      const validTileIds = [];\n      const tilePromises = [];\n      for (const tileId of tileIds) {\n        const parts = tileId.split(\".\");\n        const z = parseInt(parts[0], 10);\n        const x = parseInt(parts[1], 10);\n        const y = parseInt(parts[2], 10);\n        if (Number.isNaN(x) || Number.isNaN(z)) {\n          console.warn(\"[Gosling Data Fetcher] Invalid tile zoom or position:\", z, x, y);\n          continue;\n        }\n        validTileIds.push(tileId);\n        tilePromises.push(this.tile(z, x, y));\n      }\n      Promise.all(tilePromises).then((values) => {\n        values.forEach((value, i) => {\n          const validTileId = validTileIds[i];\n          tiles[validTileId] = value;\n          tiles[validTileId].tilePositionId = validTileId;\n        });\n        receivedTiles(tiles);\n      });\n      return tiles;\n    }\n    tile(z, x, y) {\n      var _a;\n      return (_a = this.tilesetInfo()) == null ? void 0 : _a.then((tsInfo) => {\n        var _a2, _b;\n        const tileWidth = +tsInfo.max_width / 2 ** +z;\n        const minX = tsInfo.min_pos[0] + x * tileWidth;\n        const maxX = tsInfo.min_pos[0] + (x + 1) * tileWidth;\n        let tabularData = this.values.filter((d) => {\n          if (this.dataConfig.genomicFields) {\n            return this.dataConfig.genomicFields.find((g) => minX < d[g] && d[g] <= maxX);\n          } else {\n            const allGenomicFields = [];\n            this.dataConfig.genomicFieldsToConvert.forEach((d2) => allGenomicFields.push(...d2.genomicFields));\n            return allGenomicFields.find((g) => minX < d[g] && d[g] <= maxX);\n          }\n        });\n        (_a2 = this.filter) == null ? void 0 : _a2.forEach((f2) => {\n          tabularData = filterData(f2, tabularData);\n        });\n        const sizeLimit = (_b = this.dataConfig.sampleLength) != null ? _b : 1e3;\n        return {\n          tabularData: tabularData.length > sizeLimit ? sampleSize(tabularData, sizeLimit) : tabularData,\n          server: null,\n          tilePos: [x, y],\n          zoomLevel: z\n        };\n      });\n    }\n  }\n  return new CSVDataFetcherClass(args);\n}\nCSVDataFetcher.config = {\n  type: \"csv\"\n};\nfunction RawDataFetcher(HGC, ...args) {\n  if (!new.target) {\n    throw new Error('Uncaught TypeError: Class constructor cannot be invoked without \"new\"');\n  }\n  class RawDataFetcherClass {\n    constructor(params) {\n      const [dataConfig] = params;\n      this.dataConfig = dataConfig;\n      this.tilesetInfoLoading = false;\n      this.assembly = this.dataConfig.assembly;\n      if (!dataConfig.values) {\n        console.error(\"Please provide `values` of the raw data\");\n        return;\n      }\n      const chromosomeSizes = GET_CHROM_SIZES(this.assembly).size;\n      const chromosomeCumPositions = [];\n      const chromosomePositions = {};\n      let prevEndPosition = 0;\n      Object.keys(GET_CHROM_SIZES(this.assembly).size).forEach((chrStr, i) => {\n        const positionInfo = {\n          id: i,\n          chr: chrStr,\n          pos: prevEndPosition\n        };\n        chromosomeCumPositions.push(positionInfo);\n        chromosomePositions[chrStr] = positionInfo;\n        prevEndPosition += GET_CHROM_SIZES(this.assembly).size[chrStr];\n      });\n      this.chromSizes = {\n        chrToAbs: (chrom, chromPos) => this.chromSizes.chrPositions[chrom].pos + chromPos,\n        cumPositions: chromosomeCumPositions,\n        chrPositions: chromosomePositions,\n        totalLength: prevEndPosition,\n        chromLengths: chromosomeSizes\n      };\n      this.values = dataConfig.values.map((row) => {\n        let successfullyGotChrInfo = true;\n        this.dataConfig.genomicFields.forEach((g) => {\n          if (!row[this.dataConfig.chromosomeField]) {\n            return;\n          }\n          try {\n            const chr = row[this.dataConfig.chromosomeField].includes(\"chr\") ? row[this.dataConfig.chromosomeField] : `chr${row[this.dataConfig.chromosomeField]}`;\n            row[g] = GET_CHROM_SIZES(this.assembly).interval[chr][0] + +row[g];\n          } catch (e) {\n            successfullyGotChrInfo = false;\n          }\n        });\n        if (!successfullyGotChrInfo) {\n          return void 0;\n        }\n        return row;\n      });\n    }\n    tilesetInfo(callback) {\n      this.tilesetInfoLoading = false;\n      const TILE_SIZE = 1024;\n      const totalLength = this.chromSizes.totalLength;\n      const retVal = {\n        tile_size: TILE_SIZE,\n        max_zoom: Math.ceil(Math.log(totalLength / TILE_SIZE) / Math.log(2)),\n        max_width: totalLength,\n        min_pos: [0, 0],\n        max_pos: [totalLength, totalLength]\n      };\n      if (callback) {\n        callback(retVal);\n      }\n      return retVal;\n    }\n    fetchTilesDebounced(receivedTiles, tileIds) {\n      const tiles = {};\n      const validTileIds = [];\n      const tilePromises = [];\n      for (const tileId of tileIds) {\n        const parts = tileId.split(\".\");\n        const z = parseInt(parts[0], 10);\n        const x = parseInt(parts[1], 10);\n        const y = parseInt(parts[2], 10);\n        if (Number.isNaN(x) || Number.isNaN(z)) {\n          console.warn(\"[Gosling Data Fetcher] Invalid tile zoom or position:\", z, x, y);\n          continue;\n        }\n        validTileIds.push(tileId);\n        tilePromises.push(this.tile(z, x, y));\n      }\n      Promise.all(tilePromises).then((values) => {\n        values.forEach((value, i) => {\n          const validTileId = validTileIds[i];\n          tiles[validTileId] = value;\n          tiles[validTileId].tilePositionId = validTileId;\n        });\n        receivedTiles(tiles);\n      });\n      return tiles;\n    }\n    tile(z, x, y) {\n      var _a;\n      const tsInfo = this.tilesetInfo();\n      const tileWidth = +tsInfo.max_width / 2 ** +z;\n      const minX = tsInfo.min_pos[0] + x * tileWidth;\n      const maxX = tsInfo.min_pos[0] + (x + 1) * tileWidth;\n      let tabularData = this.values;\n      const sizeLimit = (_a = this.dataConfig.sampleLength) != null ? _a : 1e3;\n      if (sizeLimit < tabularData.length) {\n        tabularData = tabularData.filter((d) => {\n          return this.dataConfig.genomicFields.find((g) => minX < d[g] && d[g] <= maxX);\n        });\n      }\n      if (sizeLimit < tabularData.length) {\n        tabularData = sampleSize(tabularData, sizeLimit);\n      }\n      return {\n        tabularData,\n        server: null,\n        tilePos: [x, y],\n        zoomLevel: z\n      };\n    }\n  }\n  return new RawDataFetcherClass(args);\n}\nRawDataFetcher.config = {\n  type: \"json\"\n};\nvar commonjsGlobal = typeof globalThis !== \"undefined\" ? globalThis : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : {};\nfunction getAugmentedNamespace(n) {\n  if (n.__esModule)\n    return n;\n  var a = Object.defineProperty({}, \"__esModule\", { value: true });\n  Object.keys(n).forEach(function(k) {\n    var d = Object.getOwnPropertyDescriptor(n, k);\n    Object.defineProperty(a, k, d.get ? d : {\n      enumerable: true,\n      get: function() {\n        return n[k];\n      }\n    });\n  });\n  return a;\n}\nvar dist$1 = {};\nvar bigwig = {};\nvar interopRequireDefault = { exports: {} };\n(function(module) {\n  function _interopRequireDefault2(obj) {\n    return obj && obj.__esModule ? obj : {\n      \"default\": obj\n    };\n  }\n  module.exports = _interopRequireDefault2;\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n})(interopRequireDefault);\nvar runtime = { exports: {} };\n(function(module) {\n  var runtime2 = function(exports) {\n    var Op = Object.prototype;\n    var hasOwn = Op.hasOwnProperty;\n    var undefined$1;\n    var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n    var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n    var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n    var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n    function define(obj, key, value) {\n      Object.defineProperty(obj, key, {\n        value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n      return obj[key];\n    }\n    try {\n      define({}, \"\");\n    } catch (err) {\n      define = function(obj, key, value) {\n        return obj[key] = value;\n      };\n    }\n    function wrap(innerFn, outerFn, self2, tryLocsList) {\n      var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n      var generator = Object.create(protoGenerator.prototype);\n      var context2 = new Context3(tryLocsList || []);\n      generator._invoke = makeInvokeMethod(innerFn, self2, context2);\n      return generator;\n    }\n    exports.wrap = wrap;\n    function tryCatch(fn, obj, arg) {\n      try {\n        return { type: \"normal\", arg: fn.call(obj, arg) };\n      } catch (err) {\n        return { type: \"throw\", arg: err };\n      }\n    }\n    var GenStateSuspendedStart = \"suspendedStart\";\n    var GenStateSuspendedYield = \"suspendedYield\";\n    var GenStateExecuting = \"executing\";\n    var GenStateCompleted = \"completed\";\n    var ContinueSentinel = {};\n    function Generator() {\n    }\n    function GeneratorFunction() {\n    }\n    function GeneratorFunctionPrototype() {\n    }\n    var IteratorPrototype = {};\n    define(IteratorPrototype, iteratorSymbol, function() {\n      return this;\n    });\n    var getProto = Object.getPrototypeOf;\n    var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n    if (NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n      IteratorPrototype = NativeIteratorPrototype;\n    }\n    var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n    GeneratorFunction.prototype = GeneratorFunctionPrototype;\n    define(Gp, \"constructor\", GeneratorFunctionPrototype);\n    define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction);\n    GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\");\n    function defineIteratorMethods(prototype) {\n      [\"next\", \"throw\", \"return\"].forEach(function(method) {\n        define(prototype, method, function(arg) {\n          return this._invoke(method, arg);\n        });\n      });\n    }\n    exports.isGeneratorFunction = function(genFun) {\n      var ctor = typeof genFun === \"function\" && genFun.constructor;\n      return ctor ? ctor === GeneratorFunction || (ctor.displayName || ctor.name) === \"GeneratorFunction\" : false;\n    };\n    exports.mark = function(genFun) {\n      if (Object.setPrototypeOf) {\n        Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n      } else {\n        genFun.__proto__ = GeneratorFunctionPrototype;\n        define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n      }\n      genFun.prototype = Object.create(Gp);\n      return genFun;\n    };\n    exports.awrap = function(arg) {\n      return { __await: arg };\n    };\n    function AsyncIterator(generator, PromiseImpl) {\n      function invoke(method, arg, resolve2, reject) {\n        var record = tryCatch(generator[method], generator, arg);\n        if (record.type === \"throw\") {\n          reject(record.arg);\n        } else {\n          var result = record.arg;\n          var value = result.value;\n          if (value && typeof value === \"object\" && hasOwn.call(value, \"__await\")) {\n            return PromiseImpl.resolve(value.__await).then(function(value2) {\n              invoke(\"next\", value2, resolve2, reject);\n            }, function(err) {\n              invoke(\"throw\", err, resolve2, reject);\n            });\n          }\n          return PromiseImpl.resolve(value).then(function(unwrapped) {\n            result.value = unwrapped;\n            resolve2(result);\n          }, function(error) {\n            return invoke(\"throw\", error, resolve2, reject);\n          });\n        }\n      }\n      var previousPromise;\n      function enqueue(method, arg) {\n        function callInvokeWithMethodAndArg() {\n          return new PromiseImpl(function(resolve2, reject) {\n            invoke(method, arg, resolve2, reject);\n          });\n        }\n        return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n      this._invoke = enqueue;\n    }\n    defineIteratorMethods(AsyncIterator.prototype);\n    define(AsyncIterator.prototype, asyncIteratorSymbol, function() {\n      return this;\n    });\n    exports.AsyncIterator = AsyncIterator;\n    exports.async = function(innerFn, outerFn, self2, tryLocsList, PromiseImpl) {\n      if (PromiseImpl === void 0)\n        PromiseImpl = Promise;\n      var iter = new AsyncIterator(wrap(innerFn, outerFn, self2, tryLocsList), PromiseImpl);\n      return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function(result) {\n        return result.done ? result.value : iter.next();\n      });\n    };\n    function makeInvokeMethod(innerFn, self2, context2) {\n      var state = GenStateSuspendedStart;\n      return function invoke(method, arg) {\n        if (state === GenStateExecuting) {\n          throw new Error(\"Generator is already running\");\n        }\n        if (state === GenStateCompleted) {\n          if (method === \"throw\") {\n            throw arg;\n          }\n          return doneResult();\n        }\n        context2.method = method;\n        context2.arg = arg;\n        while (true) {\n          var delegate = context2.delegate;\n          if (delegate) {\n            var delegateResult = maybeInvokeDelegate(delegate, context2);\n            if (delegateResult) {\n              if (delegateResult === ContinueSentinel)\n                continue;\n              return delegateResult;\n            }\n          }\n          if (context2.method === \"next\") {\n            context2.sent = context2._sent = context2.arg;\n          } else if (context2.method === \"throw\") {\n            if (state === GenStateSuspendedStart) {\n              state = GenStateCompleted;\n              throw context2.arg;\n            }\n            context2.dispatchException(context2.arg);\n          } else if (context2.method === \"return\") {\n            context2.abrupt(\"return\", context2.arg);\n          }\n          state = GenStateExecuting;\n          var record = tryCatch(innerFn, self2, context2);\n          if (record.type === \"normal\") {\n            state = context2.done ? GenStateCompleted : GenStateSuspendedYield;\n            if (record.arg === ContinueSentinel) {\n              continue;\n            }\n            return {\n              value: record.arg,\n              done: context2.done\n            };\n          } else if (record.type === \"throw\") {\n            state = GenStateCompleted;\n            context2.method = \"throw\";\n            context2.arg = record.arg;\n          }\n        }\n      };\n    }\n    function maybeInvokeDelegate(delegate, context2) {\n      var method = delegate.iterator[context2.method];\n      if (method === undefined$1) {\n        context2.delegate = null;\n        if (context2.method === \"throw\") {\n          if (delegate.iterator[\"return\"]) {\n            context2.method = \"return\";\n            context2.arg = undefined$1;\n            maybeInvokeDelegate(delegate, context2);\n            if (context2.method === \"throw\") {\n              return ContinueSentinel;\n            }\n          }\n          context2.method = \"throw\";\n          context2.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n        }\n        return ContinueSentinel;\n      }\n      var record = tryCatch(method, delegate.iterator, context2.arg);\n      if (record.type === \"throw\") {\n        context2.method = \"throw\";\n        context2.arg = record.arg;\n        context2.delegate = null;\n        return ContinueSentinel;\n      }\n      var info = record.arg;\n      if (!info) {\n        context2.method = \"throw\";\n        context2.arg = new TypeError(\"iterator result is not an object\");\n        context2.delegate = null;\n        return ContinueSentinel;\n      }\n      if (info.done) {\n        context2[delegate.resultName] = info.value;\n        context2.next = delegate.nextLoc;\n        if (context2.method !== \"return\") {\n          context2.method = \"next\";\n          context2.arg = undefined$1;\n        }\n      } else {\n        return info;\n      }\n      context2.delegate = null;\n      return ContinueSentinel;\n    }\n    defineIteratorMethods(Gp);\n    define(Gp, toStringTagSymbol, \"Generator\");\n    define(Gp, iteratorSymbol, function() {\n      return this;\n    });\n    define(Gp, \"toString\", function() {\n      return \"[object Generator]\";\n    });\n    function pushTryEntry(locs) {\n      var entry = { tryLoc: locs[0] };\n      if (1 in locs) {\n        entry.catchLoc = locs[1];\n      }\n      if (2 in locs) {\n        entry.finallyLoc = locs[2];\n        entry.afterLoc = locs[3];\n      }\n      this.tryEntries.push(entry);\n    }\n    function resetTryEntry(entry) {\n      var record = entry.completion || {};\n      record.type = \"normal\";\n      delete record.arg;\n      entry.completion = record;\n    }\n    function Context3(tryLocsList) {\n      this.tryEntries = [{ tryLoc: \"root\" }];\n      tryLocsList.forEach(pushTryEntry, this);\n      this.reset(true);\n    }\n    exports.keys = function(object) {\n      var keys = [];\n      for (var key in object) {\n        keys.push(key);\n      }\n      keys.reverse();\n      return function next() {\n        while (keys.length) {\n          var key2 = keys.pop();\n          if (key2 in object) {\n            next.value = key2;\n            next.done = false;\n            return next;\n          }\n        }\n        next.done = true;\n        return next;\n      };\n    };\n    function values(iterable) {\n      if (iterable) {\n        var iteratorMethod = iterable[iteratorSymbol];\n        if (iteratorMethod) {\n          return iteratorMethod.call(iterable);\n        }\n        if (typeof iterable.next === \"function\") {\n          return iterable;\n        }\n        if (!isNaN(iterable.length)) {\n          var i = -1, next = function next2() {\n            while (++i < iterable.length) {\n              if (hasOwn.call(iterable, i)) {\n                next2.value = iterable[i];\n                next2.done = false;\n                return next2;\n              }\n            }\n            next2.value = undefined$1;\n            next2.done = true;\n            return next2;\n          };\n          return next.next = next;\n        }\n      }\n      return { next: doneResult };\n    }\n    exports.values = values;\n    function doneResult() {\n      return { value: undefined$1, done: true };\n    }\n    Context3.prototype = {\n      constructor: Context3,\n      reset: function(skipTempReset) {\n        this.prev = 0;\n        this.next = 0;\n        this.sent = this._sent = undefined$1;\n        this.done = false;\n        this.delegate = null;\n        this.method = \"next\";\n        this.arg = undefined$1;\n        this.tryEntries.forEach(resetTryEntry);\n        if (!skipTempReset) {\n          for (var name2 in this) {\n            if (name2.charAt(0) === \"t\" && hasOwn.call(this, name2) && !isNaN(+name2.slice(1))) {\n              this[name2] = undefined$1;\n            }\n          }\n        }\n      },\n      stop: function() {\n        this.done = true;\n        var rootEntry = this.tryEntries[0];\n        var rootRecord = rootEntry.completion;\n        if (rootRecord.type === \"throw\") {\n          throw rootRecord.arg;\n        }\n        return this.rval;\n      },\n      dispatchException: function(exception) {\n        if (this.done) {\n          throw exception;\n        }\n        var context2 = this;\n        function handle(loc, caught) {\n          record.type = \"throw\";\n          record.arg = exception;\n          context2.next = loc;\n          if (caught) {\n            context2.method = \"next\";\n            context2.arg = undefined$1;\n          }\n          return !!caught;\n        }\n        for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n          var entry = this.tryEntries[i];\n          var record = entry.completion;\n          if (entry.tryLoc === \"root\") {\n            return handle(\"end\");\n          }\n          if (entry.tryLoc <= this.prev) {\n            var hasCatch = hasOwn.call(entry, \"catchLoc\");\n            var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n            if (hasCatch && hasFinally) {\n              if (this.prev < entry.catchLoc) {\n                return handle(entry.catchLoc, true);\n              } else if (this.prev < entry.finallyLoc) {\n                return handle(entry.finallyLoc);\n              }\n            } else if (hasCatch) {\n              if (this.prev < entry.catchLoc) {\n                return handle(entry.catchLoc, true);\n              }\n            } else if (hasFinally) {\n              if (this.prev < entry.finallyLoc) {\n                return handle(entry.finallyLoc);\n              }\n            } else {\n              throw new Error(\"try statement without catch or finally\");\n            }\n          }\n        }\n      },\n      abrupt: function(type2, arg) {\n        for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n          var entry = this.tryEntries[i];\n          if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n            var finallyEntry = entry;\n            break;\n          }\n        }\n        if (finallyEntry && (type2 === \"break\" || type2 === \"continue\") && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc) {\n          finallyEntry = null;\n        }\n        var record = finallyEntry ? finallyEntry.completion : {};\n        record.type = type2;\n        record.arg = arg;\n        if (finallyEntry) {\n          this.method = \"next\";\n          this.next = finallyEntry.finallyLoc;\n          return ContinueSentinel;\n        }\n        return this.complete(record);\n      },\n      complete: function(record, afterLoc) {\n        if (record.type === \"throw\") {\n          throw record.arg;\n        }\n        if (record.type === \"break\" || record.type === \"continue\") {\n          this.next = record.arg;\n        } else if (record.type === \"return\") {\n          this.rval = this.arg = record.arg;\n          this.method = \"return\";\n          this.next = \"end\";\n        } else if (record.type === \"normal\" && afterLoc) {\n          this.next = afterLoc;\n        }\n        return ContinueSentinel;\n      },\n      finish: function(finallyLoc) {\n        for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n          var entry = this.tryEntries[i];\n          if (entry.finallyLoc === finallyLoc) {\n            this.complete(entry.completion, entry.afterLoc);\n            resetTryEntry(entry);\n            return ContinueSentinel;\n          }\n        }\n      },\n      \"catch\": function(tryLoc) {\n        for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n          var entry = this.tryEntries[i];\n          if (entry.tryLoc === tryLoc) {\n            var record = entry.completion;\n            if (record.type === \"throw\") {\n              var thrown = record.arg;\n              resetTryEntry(entry);\n            }\n            return thrown;\n          }\n        }\n        throw new Error(\"illegal catch attempt\");\n      },\n      delegateYield: function(iterable, resultName, nextLoc) {\n        this.delegate = {\n          iterator: values(iterable),\n          resultName,\n          nextLoc\n        };\n        if (this.method === \"next\") {\n          this.arg = undefined$1;\n        }\n        return ContinueSentinel;\n      }\n    };\n    return exports;\n  }(module.exports);\n  try {\n    regeneratorRuntime = runtime2;\n  } catch (accidentalStrictMode) {\n    if (typeof globalThis === \"object\") {\n      globalThis.regeneratorRuntime = runtime2;\n    } else {\n      Function(\"r\", \"regeneratorRuntime = r\")(runtime2);\n    }\n  }\n})(runtime);\nvar regenerator = runtime.exports;\nvar asyncToGenerator = { exports: {} };\n(function(module) {\n  function asyncGeneratorStep(gen, resolve2, reject, _next, _throw, key, arg) {\n    try {\n      var info = gen[key](arg);\n      var value = info.value;\n    } catch (error) {\n      reject(error);\n      return;\n    }\n    if (info.done) {\n      resolve2(value);\n    } else {\n      Promise.resolve(value).then(_next, _throw);\n    }\n  }\n  function _asyncToGenerator(fn) {\n    return function() {\n      var self2 = this, args = arguments;\n      return new Promise(function(resolve2, reject) {\n        var gen = fn.apply(self2, args);\n        function _next(value) {\n          asyncGeneratorStep(gen, resolve2, reject, _next, _throw, \"next\", value);\n        }\n        function _throw(err) {\n          asyncGeneratorStep(gen, resolve2, reject, _next, _throw, \"throw\", err);\n        }\n        _next(void 0);\n      });\n    };\n  }\n  module.exports = _asyncToGenerator;\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n})(asyncToGenerator);\nvar classCallCheck = { exports: {} };\n(function(module) {\n  function _classCallCheck3(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n  module.exports = _classCallCheck3;\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n})(classCallCheck);\nvar createClass = { exports: {} };\n(function(module) {\n  function _defineProperties2(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor)\n        descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n  function _createClass3(Constructor, protoProps, staticProps) {\n    if (protoProps)\n      _defineProperties2(Constructor.prototype, protoProps);\n    if (staticProps)\n      _defineProperties2(Constructor, staticProps);\n    return Constructor;\n  }\n  module.exports = _createClass3;\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n})(createClass);\nvar inherits = { exports: {} };\nvar setPrototypeOf = { exports: {} };\n(function(module) {\n  function _setPrototypeOf2(o, p) {\n    module.exports = _setPrototypeOf2 = Object.setPrototypeOf || function _setPrototypeOf3(o2, p2) {\n      o2.__proto__ = p2;\n      return o2;\n    };\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n    return _setPrototypeOf2(o, p);\n  }\n  module.exports = _setPrototypeOf2;\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n})(setPrototypeOf);\n(function(module) {\n  var setPrototypeOf$1 = setPrototypeOf.exports;\n  function _inherits3(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass)\n      setPrototypeOf$1(subClass, superClass);\n  }\n  module.exports = _inherits3;\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n})(inherits);\nvar possibleConstructorReturn = { exports: {} };\nvar _typeof$2 = { exports: {} };\n(function(module) {\n  function _typeof3(obj) {\n    \"@babel/helpers - typeof\";\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      module.exports = _typeof3 = function _typeof4(obj2) {\n        return typeof obj2;\n      };\n      module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n    } else {\n      module.exports = _typeof3 = function _typeof4(obj2) {\n        return obj2 && typeof Symbol === \"function\" && obj2.constructor === Symbol && obj2 !== Symbol.prototype ? \"symbol\" : typeof obj2;\n      };\n      module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n    }\n    return _typeof3(obj);\n  }\n  module.exports = _typeof3;\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n})(_typeof$2);\nvar assertThisInitialized = { exports: {} };\n(function(module) {\n  function _assertThisInitialized3(self2) {\n    if (self2 === void 0) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n    return self2;\n  }\n  module.exports = _assertThisInitialized3;\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n})(assertThisInitialized);\n(function(module) {\n  var _typeof3 = _typeof$2.exports[\"default\"];\n  var assertThisInitialized$1 = assertThisInitialized.exports;\n  function _possibleConstructorReturn3(self2, call) {\n    if (call && (_typeof3(call) === \"object\" || typeof call === \"function\")) {\n      return call;\n    } else if (call !== void 0) {\n      throw new TypeError(\"Derived constructors may only return object or undefined\");\n    }\n    return assertThisInitialized$1(self2);\n  }\n  module.exports = _possibleConstructorReturn3;\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n})(possibleConstructorReturn);\nvar getPrototypeOf = { exports: {} };\n(function(module) {\n  function _getPrototypeOf3(o) {\n    module.exports = _getPrototypeOf3 = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf4(o2) {\n      return o2.__proto__ || Object.getPrototypeOf(o2);\n    };\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n    return _getPrototypeOf3(o);\n  }\n  module.exports = _getPrototypeOf3;\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n})(getPrototypeOf);\nvar blockView = {};\nvar defineProperty = { exports: {} };\n(function(module) {\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n    return obj;\n  }\n  module.exports = _defineProperty;\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n})(defineProperty);\nvar binary_parser = {};\nvar vmBrowser = {};\nfunction runInThisContext(code) {\n  const fn = new Function(\"code\", \"return eval(code);\");\n  return fn.call(globalThis, code);\n}\nvmBrowser.runInThisContext = runInThisContext;\nvar context = {};\nfunction _typeof$1(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof$1 = function _typeof3(obj2) {\n      return typeof obj2;\n    };\n  } else {\n    _typeof$1 = function _typeof3(obj2) {\n      return obj2 && typeof Symbol === \"function\" && obj2.constructor === Symbol && obj2 !== Symbol.prototype ? \"symbol\" : typeof obj2;\n    };\n  }\n  return _typeof$1(obj);\n}\nvar Context$2 = function Context() {\n  this.code = \"\";\n  this.scopes = [[\"vars\"]];\n  this.isAsync = false;\n  this.bitFields = [];\n  this.tmpVariableCount = 0;\n  this.references = {};\n};\nContext$2.prototype.generateVariable = function(name2) {\n  var arr = [];\n  Array.prototype.push.apply(arr, this.scopes[this.scopes.length - 1]);\n  while (/^\\$parent\\./.test(name2)) {\n    arr.pop();\n    name2 = name2.replace(/^\\$parent\\./, \"\");\n  }\n  if (name2) {\n    arr.push(name2);\n  }\n  return arr.join(\".\");\n};\nContext$2.prototype.generateOption = function(val) {\n  switch (_typeof$1(val)) {\n    case \"number\":\n      return val.toString();\n    case \"string\":\n      return this.generateVariable(val);\n    case \"function\":\n      return \"(\".concat(val, \").call(\").concat(this.generateVariable(), \", vars)\");\n    default:\n      return void 0;\n  }\n};\nContext$2.prototype.generateError = function() {\n  var args = Array.prototype.slice.call(arguments);\n  var err = Context$2.interpolate.apply(this, args);\n  if (this.isAsync) {\n    this.pushCode(\"return process.nextTick(function() { callback(new Error(\".concat(err, \"), vars); });\"));\n  } else {\n    this.pushCode(\"throw new Error(\".concat(err, \");\"));\n  }\n};\nContext$2.prototype.generateTmpVariable = function() {\n  return \"$tmp\".concat(this.tmpVariableCount++);\n};\nContext$2.prototype.pushCode = function() {\n  var args = Array.prototype.slice.call(arguments);\n  this.code += \"\".concat(Context$2.interpolate.apply(this, args), \"\\n\");\n};\nContext$2.prototype.pushPath = function(name2) {\n  if (name2) {\n    this.scopes[this.scopes.length - 1].push(name2);\n  }\n};\nContext$2.prototype.popPath = function(name2) {\n  if (name2) {\n    this.scopes[this.scopes.length - 1].pop();\n  }\n};\nContext$2.prototype.pushScope = function(name2) {\n  this.scopes.push([name2]);\n};\nContext$2.prototype.popScope = function() {\n  this.scopes.pop();\n};\nContext$2.prototype.addReference = function(alias) {\n  if (this.references[alias])\n    return;\n  this.references[alias] = { resolved: false, requested: false };\n};\nContext$2.prototype.markResolved = function(alias) {\n  this.references[alias].resolved = true;\n};\nContext$2.prototype.markRequested = function(aliasList) {\n  aliasList.forEach(function(alias) {\n    this.references[alias].requested = true;\n  }.bind(this));\n};\nContext$2.prototype.getUnresolvedReferences = function() {\n  var references = this.references;\n  return Object.keys(this.references).filter(function(alias) {\n    return !references[alias].resolved && !references[alias].requested;\n  });\n};\nContext$2.interpolate = function(s) {\n  var re2 = /{\\d+}/g;\n  var matches = s.match(re2);\n  var params = Array.prototype.slice.call(arguments, 1);\n  if (matches) {\n    matches.forEach(function(match) {\n      var index = parseInt(match.substr(1, match.length - 2), 10);\n      s = s.replace(match, params[index].toString());\n    });\n  }\n  return s;\n};\ncontext.Context = Context$2;\nvar long = Long$1;\nvar wasm = null;\ntry {\n  wasm = new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([\n    0,\n    97,\n    115,\n    109,\n    1,\n    0,\n    0,\n    0,\n    1,\n    13,\n    2,\n    96,\n    0,\n    1,\n    127,\n    96,\n    4,\n    127,\n    127,\n    127,\n    127,\n    1,\n    127,\n    3,\n    7,\n    6,\n    0,\n    1,\n    1,\n    1,\n    1,\n    1,\n    6,\n    6,\n    1,\n    127,\n    1,\n    65,\n    0,\n    11,\n    7,\n    50,\n    6,\n    3,\n    109,\n    117,\n    108,\n    0,\n    1,\n    5,\n    100,\n    105,\n    118,\n    95,\n    115,\n    0,\n    2,\n    5,\n    100,\n    105,\n    118,\n    95,\n    117,\n    0,\n    3,\n    5,\n    114,\n    101,\n    109,\n    95,\n    115,\n    0,\n    4,\n    5,\n    114,\n    101,\n    109,\n    95,\n    117,\n    0,\n    5,\n    8,\n    103,\n    101,\n    116,\n    95,\n    104,\n    105,\n    103,\n    104,\n    0,\n    0,\n    10,\n    191,\n    1,\n    6,\n    4,\n    0,\n    35,\n    0,\n    11,\n    36,\n    1,\n    1,\n    126,\n    32,\n    0,\n    173,\n    32,\n    1,\n    173,\n    66,\n    32,\n    134,\n    132,\n    32,\n    2,\n    173,\n    32,\n    3,\n    173,\n    66,\n    32,\n    134,\n    132,\n    126,\n    34,\n    4,\n    66,\n    32,\n    135,\n    167,\n    36,\n    0,\n    32,\n    4,\n    167,\n    11,\n    36,\n    1,\n    1,\n    126,\n    32,\n    0,\n    173,\n    32,\n    1,\n    173,\n    66,\n    32,\n    134,\n    132,\n    32,\n    2,\n    173,\n    32,\n    3,\n    173,\n    66,\n    32,\n    134,\n    132,\n    127,\n    34,\n    4,\n    66,\n    32,\n    135,\n    167,\n    36,\n    0,\n    32,\n    4,\n    167,\n    11,\n    36,\n    1,\n    1,\n    126,\n    32,\n    0,\n    173,\n    32,\n    1,\n    173,\n    66,\n    32,\n    134,\n    132,\n    32,\n    2,\n    173,\n    32,\n    3,\n    173,\n    66,\n    32,\n    134,\n    132,\n    128,\n    34,\n    4,\n    66,\n    32,\n    135,\n    167,\n    36,\n    0,\n    32,\n    4,\n    167,\n    11,\n    36,\n    1,\n    1,\n    126,\n    32,\n    0,\n    173,\n    32,\n    1,\n    173,\n    66,\n    32,\n    134,\n    132,\n    32,\n    2,\n    173,\n    32,\n    3,\n    173,\n    66,\n    32,\n    134,\n    132,\n    129,\n    34,\n    4,\n    66,\n    32,\n    135,\n    167,\n    36,\n    0,\n    32,\n    4,\n    167,\n    11,\n    36,\n    1,\n    1,\n    126,\n    32,\n    0,\n    173,\n    32,\n    1,\n    173,\n    66,\n    32,\n    134,\n    132,\n    32,\n    2,\n    173,\n    32,\n    3,\n    173,\n    66,\n    32,\n    134,\n    132,\n    130,\n    34,\n    4,\n    66,\n    32,\n    135,\n    167,\n    36,\n    0,\n    32,\n    4,\n    167,\n    11\n  ])), {}).exports;\n} catch (e) {\n}\nfunction Long$1(low, high, unsigned) {\n  this.low = low | 0;\n  this.high = high | 0;\n  this.unsigned = !!unsigned;\n}\nLong$1.prototype.__isLong__;\nObject.defineProperty(Long$1.prototype, \"__isLong__\", { value: true });\nfunction isLong(obj) {\n  return (obj && obj[\"__isLong__\"]) === true;\n}\nLong$1.isLong = isLong;\nvar INT_CACHE = {};\nvar UINT_CACHE = {};\nfunction fromInt(value, unsigned) {\n  var obj, cachedObj, cache2;\n  if (unsigned) {\n    value >>>= 0;\n    if (cache2 = 0 <= value && value < 256) {\n      cachedObj = UINT_CACHE[value];\n      if (cachedObj)\n        return cachedObj;\n    }\n    obj = fromBits(value, (value | 0) < 0 ? -1 : 0, true);\n    if (cache2)\n      UINT_CACHE[value] = obj;\n    return obj;\n  } else {\n    value |= 0;\n    if (cache2 = -128 <= value && value < 128) {\n      cachedObj = INT_CACHE[value];\n      if (cachedObj)\n        return cachedObj;\n    }\n    obj = fromBits(value, value < 0 ? -1 : 0, false);\n    if (cache2)\n      INT_CACHE[value] = obj;\n    return obj;\n  }\n}\nLong$1.fromInt = fromInt;\nfunction fromNumber(value, unsigned) {\n  if (isNaN(value))\n    return unsigned ? UZERO : ZERO;\n  if (unsigned) {\n    if (value < 0)\n      return UZERO;\n    if (value >= TWO_PWR_64_DBL)\n      return MAX_UNSIGNED_VALUE;\n  } else {\n    if (value <= -TWO_PWR_63_DBL)\n      return MIN_VALUE;\n    if (value + 1 >= TWO_PWR_63_DBL)\n      return MAX_VALUE;\n  }\n  if (value < 0)\n    return fromNumber(-value, unsigned).neg();\n  return fromBits(value % TWO_PWR_32_DBL | 0, value / TWO_PWR_32_DBL | 0, unsigned);\n}\nLong$1.fromNumber = fromNumber;\nfunction fromBits(lowBits, highBits, unsigned) {\n  return new Long$1(lowBits, highBits, unsigned);\n}\nLong$1.fromBits = fromBits;\nvar pow_dbl = Math.pow;\nfunction fromString(str, unsigned, radix) {\n  if (str.length === 0)\n    throw Error(\"empty string\");\n  if (str === \"NaN\" || str === \"Infinity\" || str === \"+Infinity\" || str === \"-Infinity\")\n    return ZERO;\n  if (typeof unsigned === \"number\") {\n    radix = unsigned, unsigned = false;\n  } else {\n    unsigned = !!unsigned;\n  }\n  radix = radix || 10;\n  if (radix < 2 || 36 < radix)\n    throw RangeError(\"radix\");\n  var p;\n  if ((p = str.indexOf(\"-\")) > 0)\n    throw Error(\"interior hyphen\");\n  else if (p === 0) {\n    return fromString(str.substring(1), unsigned, radix).neg();\n  }\n  var radixToPower = fromNumber(pow_dbl(radix, 8));\n  var result = ZERO;\n  for (var i = 0; i < str.length; i += 8) {\n    var size = Math.min(8, str.length - i), value = parseInt(str.substring(i, i + size), radix);\n    if (size < 8) {\n      var power = fromNumber(pow_dbl(radix, size));\n      result = result.mul(power).add(fromNumber(value));\n    } else {\n      result = result.mul(radixToPower);\n      result = result.add(fromNumber(value));\n    }\n  }\n  result.unsigned = unsigned;\n  return result;\n}\nLong$1.fromString = fromString;\nfunction fromValue(val, unsigned) {\n  if (typeof val === \"number\")\n    return fromNumber(val, unsigned);\n  if (typeof val === \"string\")\n    return fromString(val, unsigned);\n  return fromBits(val.low, val.high, typeof unsigned === \"boolean\" ? unsigned : val.unsigned);\n}\nLong$1.fromValue = fromValue;\nvar TWO_PWR_16_DBL = 1 << 16;\nvar TWO_PWR_24_DBL = 1 << 24;\nvar TWO_PWR_32_DBL = TWO_PWR_16_DBL * TWO_PWR_16_DBL;\nvar TWO_PWR_64_DBL = TWO_PWR_32_DBL * TWO_PWR_32_DBL;\nvar TWO_PWR_63_DBL = TWO_PWR_64_DBL / 2;\nvar TWO_PWR_24 = fromInt(TWO_PWR_24_DBL);\nvar ZERO = fromInt(0);\nLong$1.ZERO = ZERO;\nvar UZERO = fromInt(0, true);\nLong$1.UZERO = UZERO;\nvar ONE = fromInt(1);\nLong$1.ONE = ONE;\nvar UONE = fromInt(1, true);\nLong$1.UONE = UONE;\nvar NEG_ONE = fromInt(-1);\nLong$1.NEG_ONE = NEG_ONE;\nvar MAX_VALUE = fromBits(4294967295 | 0, 2147483647 | 0, false);\nLong$1.MAX_VALUE = MAX_VALUE;\nvar MAX_UNSIGNED_VALUE = fromBits(4294967295 | 0, 4294967295 | 0, true);\nLong$1.MAX_UNSIGNED_VALUE = MAX_UNSIGNED_VALUE;\nvar MIN_VALUE = fromBits(0, 2147483648 | 0, false);\nLong$1.MIN_VALUE = MIN_VALUE;\nvar LongPrototype = Long$1.prototype;\nLongPrototype.toInt = function toInt() {\n  return this.unsigned ? this.low >>> 0 : this.low;\n};\nLongPrototype.toNumber = function toNumber() {\n  if (this.unsigned)\n    return (this.high >>> 0) * TWO_PWR_32_DBL + (this.low >>> 0);\n  return this.high * TWO_PWR_32_DBL + (this.low >>> 0);\n};\nLongPrototype.toString = function toString(radix) {\n  radix = radix || 10;\n  if (radix < 2 || 36 < radix)\n    throw RangeError(\"radix\");\n  if (this.isZero())\n    return \"0\";\n  if (this.isNegative()) {\n    if (this.eq(MIN_VALUE)) {\n      var radixLong = fromNumber(radix), div = this.div(radixLong), rem1 = div.mul(radixLong).sub(this);\n      return div.toString(radix) + rem1.toInt().toString(radix);\n    } else\n      return \"-\" + this.neg().toString(radix);\n  }\n  var radixToPower = fromNumber(pow_dbl(radix, 6), this.unsigned), rem = this;\n  var result = \"\";\n  while (true) {\n    var remDiv = rem.div(radixToPower), intval = rem.sub(remDiv.mul(radixToPower)).toInt() >>> 0, digits = intval.toString(radix);\n    rem = remDiv;\n    if (rem.isZero())\n      return digits + result;\n    else {\n      while (digits.length < 6)\n        digits = \"0\" + digits;\n      result = \"\" + digits + result;\n    }\n  }\n};\nLongPrototype.getHighBits = function getHighBits() {\n  return this.high;\n};\nLongPrototype.getHighBitsUnsigned = function getHighBitsUnsigned() {\n  return this.high >>> 0;\n};\nLongPrototype.getLowBits = function getLowBits() {\n  return this.low;\n};\nLongPrototype.getLowBitsUnsigned = function getLowBitsUnsigned() {\n  return this.low >>> 0;\n};\nLongPrototype.getNumBitsAbs = function getNumBitsAbs() {\n  if (this.isNegative())\n    return this.eq(MIN_VALUE) ? 64 : this.neg().getNumBitsAbs();\n  var val = this.high != 0 ? this.high : this.low;\n  for (var bit = 31; bit > 0; bit--)\n    if ((val & 1 << bit) != 0)\n      break;\n  return this.high != 0 ? bit + 33 : bit + 1;\n};\nLongPrototype.isZero = function isZero() {\n  return this.high === 0 && this.low === 0;\n};\nLongPrototype.eqz = LongPrototype.isZero;\nLongPrototype.isNegative = function isNegative() {\n  return !this.unsigned && this.high < 0;\n};\nLongPrototype.isPositive = function isPositive() {\n  return this.unsigned || this.high >= 0;\n};\nLongPrototype.isOdd = function isOdd() {\n  return (this.low & 1) === 1;\n};\nLongPrototype.isEven = function isEven() {\n  return (this.low & 1) === 0;\n};\nLongPrototype.equals = function equals(other) {\n  if (!isLong(other))\n    other = fromValue(other);\n  if (this.unsigned !== other.unsigned && this.high >>> 31 === 1 && other.high >>> 31 === 1)\n    return false;\n  return this.high === other.high && this.low === other.low;\n};\nLongPrototype.eq = LongPrototype.equals;\nLongPrototype.notEquals = function notEquals(other) {\n  return !this.eq(other);\n};\nLongPrototype.neq = LongPrototype.notEquals;\nLongPrototype.ne = LongPrototype.notEquals;\nLongPrototype.lessThan = function lessThan(other) {\n  return this.comp(other) < 0;\n};\nLongPrototype.lt = LongPrototype.lessThan;\nLongPrototype.lessThanOrEqual = function lessThanOrEqual(other) {\n  return this.comp(other) <= 0;\n};\nLongPrototype.lte = LongPrototype.lessThanOrEqual;\nLongPrototype.le = LongPrototype.lessThanOrEqual;\nLongPrototype.greaterThan = function greaterThan(other) {\n  return this.comp(other) > 0;\n};\nLongPrototype.gt = LongPrototype.greaterThan;\nLongPrototype.greaterThanOrEqual = function greaterThanOrEqual(other) {\n  return this.comp(other) >= 0;\n};\nLongPrototype.gte = LongPrototype.greaterThanOrEqual;\nLongPrototype.ge = LongPrototype.greaterThanOrEqual;\nLongPrototype.compare = function compare(other) {\n  if (!isLong(other))\n    other = fromValue(other);\n  if (this.eq(other))\n    return 0;\n  var thisNeg = this.isNegative(), otherNeg = other.isNegative();\n  if (thisNeg && !otherNeg)\n    return -1;\n  if (!thisNeg && otherNeg)\n    return 1;\n  if (!this.unsigned)\n    return this.sub(other).isNegative() ? -1 : 1;\n  return other.high >>> 0 > this.high >>> 0 || other.high === this.high && other.low >>> 0 > this.low >>> 0 ? -1 : 1;\n};\nLongPrototype.comp = LongPrototype.compare;\nLongPrototype.negate = function negate() {\n  if (!this.unsigned && this.eq(MIN_VALUE))\n    return MIN_VALUE;\n  return this.not().add(ONE);\n};\nLongPrototype.neg = LongPrototype.negate;\nLongPrototype.add = function add(addend) {\n  if (!isLong(addend))\n    addend = fromValue(addend);\n  var a48 = this.high >>> 16;\n  var a32 = this.high & 65535;\n  var a16 = this.low >>> 16;\n  var a00 = this.low & 65535;\n  var b48 = addend.high >>> 16;\n  var b32 = addend.high & 65535;\n  var b16 = addend.low >>> 16;\n  var b00 = addend.low & 65535;\n  var c48 = 0, c32 = 0, c16 = 0, c00 = 0;\n  c00 += a00 + b00;\n  c16 += c00 >>> 16;\n  c00 &= 65535;\n  c16 += a16 + b16;\n  c32 += c16 >>> 16;\n  c16 &= 65535;\n  c32 += a32 + b32;\n  c48 += c32 >>> 16;\n  c32 &= 65535;\n  c48 += a48 + b48;\n  c48 &= 65535;\n  return fromBits(c16 << 16 | c00, c48 << 16 | c32, this.unsigned);\n};\nLongPrototype.subtract = function subtract(subtrahend) {\n  if (!isLong(subtrahend))\n    subtrahend = fromValue(subtrahend);\n  return this.add(subtrahend.neg());\n};\nLongPrototype.sub = LongPrototype.subtract;\nLongPrototype.multiply = function multiply(multiplier) {\n  if (this.isZero())\n    return ZERO;\n  if (!isLong(multiplier))\n    multiplier = fromValue(multiplier);\n  if (wasm) {\n    var low = wasm.mul(this.low, this.high, multiplier.low, multiplier.high);\n    return fromBits(low, wasm.get_high(), this.unsigned);\n  }\n  if (multiplier.isZero())\n    return ZERO;\n  if (this.eq(MIN_VALUE))\n    return multiplier.isOdd() ? MIN_VALUE : ZERO;\n  if (multiplier.eq(MIN_VALUE))\n    return this.isOdd() ? MIN_VALUE : ZERO;\n  if (this.isNegative()) {\n    if (multiplier.isNegative())\n      return this.neg().mul(multiplier.neg());\n    else\n      return this.neg().mul(multiplier).neg();\n  } else if (multiplier.isNegative())\n    return this.mul(multiplier.neg()).neg();\n  if (this.lt(TWO_PWR_24) && multiplier.lt(TWO_PWR_24))\n    return fromNumber(this.toNumber() * multiplier.toNumber(), this.unsigned);\n  var a48 = this.high >>> 16;\n  var a32 = this.high & 65535;\n  var a16 = this.low >>> 16;\n  var a00 = this.low & 65535;\n  var b48 = multiplier.high >>> 16;\n  var b32 = multiplier.high & 65535;\n  var b16 = multiplier.low >>> 16;\n  var b00 = multiplier.low & 65535;\n  var c48 = 0, c32 = 0, c16 = 0, c00 = 0;\n  c00 += a00 * b00;\n  c16 += c00 >>> 16;\n  c00 &= 65535;\n  c16 += a16 * b00;\n  c32 += c16 >>> 16;\n  c16 &= 65535;\n  c16 += a00 * b16;\n  c32 += c16 >>> 16;\n  c16 &= 65535;\n  c32 += a32 * b00;\n  c48 += c32 >>> 16;\n  c32 &= 65535;\n  c32 += a16 * b16;\n  c48 += c32 >>> 16;\n  c32 &= 65535;\n  c32 += a00 * b32;\n  c48 += c32 >>> 16;\n  c32 &= 65535;\n  c48 += a48 * b00 + a32 * b16 + a16 * b32 + a00 * b48;\n  c48 &= 65535;\n  return fromBits(c16 << 16 | c00, c48 << 16 | c32, this.unsigned);\n};\nLongPrototype.mul = LongPrototype.multiply;\nLongPrototype.divide = function divide(divisor) {\n  if (!isLong(divisor))\n    divisor = fromValue(divisor);\n  if (divisor.isZero())\n    throw Error(\"division by zero\");\n  if (wasm) {\n    if (!this.unsigned && this.high === -2147483648 && divisor.low === -1 && divisor.high === -1) {\n      return this;\n    }\n    var low = (this.unsigned ? wasm.div_u : wasm.div_s)(this.low, this.high, divisor.low, divisor.high);\n    return fromBits(low, wasm.get_high(), this.unsigned);\n  }\n  if (this.isZero())\n    return this.unsigned ? UZERO : ZERO;\n  var approx, rem, res;\n  if (!this.unsigned) {\n    if (this.eq(MIN_VALUE)) {\n      if (divisor.eq(ONE) || divisor.eq(NEG_ONE))\n        return MIN_VALUE;\n      else if (divisor.eq(MIN_VALUE))\n        return ONE;\n      else {\n        var halfThis = this.shr(1);\n        approx = halfThis.div(divisor).shl(1);\n        if (approx.eq(ZERO)) {\n          return divisor.isNegative() ? ONE : NEG_ONE;\n        } else {\n          rem = this.sub(divisor.mul(approx));\n          res = approx.add(rem.div(divisor));\n          return res;\n        }\n      }\n    } else if (divisor.eq(MIN_VALUE))\n      return this.unsigned ? UZERO : ZERO;\n    if (this.isNegative()) {\n      if (divisor.isNegative())\n        return this.neg().div(divisor.neg());\n      return this.neg().div(divisor).neg();\n    } else if (divisor.isNegative())\n      return this.div(divisor.neg()).neg();\n    res = ZERO;\n  } else {\n    if (!divisor.unsigned)\n      divisor = divisor.toUnsigned();\n    if (divisor.gt(this))\n      return UZERO;\n    if (divisor.gt(this.shru(1)))\n      return UONE;\n    res = UZERO;\n  }\n  rem = this;\n  while (rem.gte(divisor)) {\n    approx = Math.max(1, Math.floor(rem.toNumber() / divisor.toNumber()));\n    var log2 = Math.ceil(Math.log(approx) / Math.LN2), delta = log2 <= 48 ? 1 : pow_dbl(2, log2 - 48), approxRes = fromNumber(approx), approxRem = approxRes.mul(divisor);\n    while (approxRem.isNegative() || approxRem.gt(rem)) {\n      approx -= delta;\n      approxRes = fromNumber(approx, this.unsigned);\n      approxRem = approxRes.mul(divisor);\n    }\n    if (approxRes.isZero())\n      approxRes = ONE;\n    res = res.add(approxRes);\n    rem = rem.sub(approxRem);\n  }\n  return res;\n};\nLongPrototype.div = LongPrototype.divide;\nLongPrototype.modulo = function modulo(divisor) {\n  if (!isLong(divisor))\n    divisor = fromValue(divisor);\n  if (wasm) {\n    var low = (this.unsigned ? wasm.rem_u : wasm.rem_s)(this.low, this.high, divisor.low, divisor.high);\n    return fromBits(low, wasm.get_high(), this.unsigned);\n  }\n  return this.sub(this.div(divisor).mul(divisor));\n};\nLongPrototype.mod = LongPrototype.modulo;\nLongPrototype.rem = LongPrototype.modulo;\nLongPrototype.not = function not() {\n  return fromBits(~this.low, ~this.high, this.unsigned);\n};\nLongPrototype.and = function and(other) {\n  if (!isLong(other))\n    other = fromValue(other);\n  return fromBits(this.low & other.low, this.high & other.high, this.unsigned);\n};\nLongPrototype.or = function or(other) {\n  if (!isLong(other))\n    other = fromValue(other);\n  return fromBits(this.low | other.low, this.high | other.high, this.unsigned);\n};\nLongPrototype.xor = function xor(other) {\n  if (!isLong(other))\n    other = fromValue(other);\n  return fromBits(this.low ^ other.low, this.high ^ other.high, this.unsigned);\n};\nLongPrototype.shiftLeft = function shiftLeft(numBits) {\n  if (isLong(numBits))\n    numBits = numBits.toInt();\n  if ((numBits &= 63) === 0)\n    return this;\n  else if (numBits < 32)\n    return fromBits(this.low << numBits, this.high << numBits | this.low >>> 32 - numBits, this.unsigned);\n  else\n    return fromBits(0, this.low << numBits - 32, this.unsigned);\n};\nLongPrototype.shl = LongPrototype.shiftLeft;\nLongPrototype.shiftRight = function shiftRight(numBits) {\n  if (isLong(numBits))\n    numBits = numBits.toInt();\n  if ((numBits &= 63) === 0)\n    return this;\n  else if (numBits < 32)\n    return fromBits(this.low >>> numBits | this.high << 32 - numBits, this.high >> numBits, this.unsigned);\n  else\n    return fromBits(this.high >> numBits - 32, this.high >= 0 ? 0 : -1, this.unsigned);\n};\nLongPrototype.shr = LongPrototype.shiftRight;\nLongPrototype.shiftRightUnsigned = function shiftRightUnsigned(numBits) {\n  if (isLong(numBits))\n    numBits = numBits.toInt();\n  numBits &= 63;\n  if (numBits === 0)\n    return this;\n  else {\n    var high = this.high;\n    if (numBits < 32) {\n      var low = this.low;\n      return fromBits(low >>> numBits | high << 32 - numBits, high >>> numBits, this.unsigned);\n    } else if (numBits === 32)\n      return fromBits(high, 0, this.unsigned);\n    else\n      return fromBits(high >>> numBits - 32, 0, this.unsigned);\n  }\n};\nLongPrototype.shru = LongPrototype.shiftRightUnsigned;\nLongPrototype.shr_u = LongPrototype.shiftRightUnsigned;\nLongPrototype.toSigned = function toSigned() {\n  if (!this.unsigned)\n    return this;\n  return fromBits(this.low, this.high, false);\n};\nLongPrototype.toUnsigned = function toUnsigned() {\n  if (this.unsigned)\n    return this;\n  return fromBits(this.low, this.high, true);\n};\nLongPrototype.toBytes = function toBytes(le) {\n  return le ? this.toBytesLE() : this.toBytesBE();\n};\nLongPrototype.toBytesLE = function toBytesLE() {\n  var hi = this.high, lo = this.low;\n  return [\n    lo & 255,\n    lo >>> 8 & 255,\n    lo >>> 16 & 255,\n    lo >>> 24,\n    hi & 255,\n    hi >>> 8 & 255,\n    hi >>> 16 & 255,\n    hi >>> 24\n  ];\n};\nLongPrototype.toBytesBE = function toBytesBE() {\n  var hi = this.high, lo = this.low;\n  return [\n    hi >>> 24,\n    hi >>> 16 & 255,\n    hi >>> 8 & 255,\n    hi & 255,\n    lo >>> 24,\n    lo >>> 16 & 255,\n    lo >>> 8 & 255,\n    lo & 255\n  ];\n};\nLong$1.fromBytes = function fromBytes(bytes, unsigned, le) {\n  return le ? Long$1.fromBytesLE(bytes, unsigned) : Long$1.fromBytesBE(bytes, unsigned);\n};\nLong$1.fromBytesLE = function fromBytesLE(bytes, unsigned) {\n  return new Long$1(bytes[0] | bytes[1] << 8 | bytes[2] << 16 | bytes[3] << 24, bytes[4] | bytes[5] << 8 | bytes[6] << 16 | bytes[7] << 24, unsigned);\n};\nLong$1.fromBytesBE = function fromBytesBE(bytes, unsigned) {\n  return new Long$1(bytes[4] << 24 | bytes[5] << 16 | bytes[6] << 8 | bytes[7], bytes[0] << 24 | bytes[1] << 16 | bytes[2] << 8 | bytes[3], unsigned);\n};\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof3(obj2) {\n      return typeof obj2;\n    };\n  } else {\n    _typeof = function _typeof3(obj2) {\n      return obj2 && typeof Symbol === \"function\" && obj2.constructor === Symbol && obj2 !== Symbol.prototype ? \"symbol\" : typeof obj2;\n    };\n  }\n  return _typeof(obj);\n}\nvar _require = require$$0, Buffer$1 = _require.Buffer;\nvar vm = vmBrowser;\nvar Context$1 = context.Context;\nvar Long = long;\nif (typeof window !== \"undefined\")\n  window.Buffer = Buffer$1;\nif (typeof self !== \"undefined\")\n  self.Buffer = Buffer$1;\nvar PRIMITIVE_TYPES = {\n  UInt8: 1,\n  UInt16LE: 2,\n  UInt16BE: 2,\n  UInt32LE: 4,\n  UInt32BE: 4,\n  Int8: 1,\n  Int16LE: 2,\n  Int16BE: 2,\n  Int32LE: 4,\n  Int32BE: 4,\n  FloatLE: 4,\n  FloatBE: 4,\n  DoubleLE: 8,\n  DoubleBE: 8,\n  UInt64: 8,\n  Int64: 8\n};\nvar SPECIAL_TYPES = {\n  String: null,\n  Buffer: null,\n  Array: null,\n  Skip: null,\n  Choice: null,\n  Nest: null,\n  Bit: null,\n  Itf8: null,\n  Ltf8: null\n};\nvar aliasRegistry = {};\nvar FUNCTION_PREFIX = \"___parser_\";\nvar BIT_RANGE = [];\n(function() {\n  var i;\n  for (i = 1; i <= 32; i++) {\n    BIT_RANGE.push(i);\n  }\n})();\nvar NAME_MAP = {};\nObject.keys(PRIMITIVE_TYPES).concat(Object.keys(SPECIAL_TYPES)).forEach(function(type2) {\n  NAME_MAP[type2.toLowerCase()] = type2;\n});\nvar Parser = function Parser2() {\n  this.varName = \"\";\n  this.type = \"\";\n  this.options = {};\n  this.next = null;\n  this.head = null;\n  this.compiled = null;\n  this.endian = \"le\";\n  this.constructorFn = null;\n  this.alias = null;\n};\nParser.start = function() {\n  return new Parser();\n};\nObject.keys(PRIMITIVE_TYPES).forEach(function(type2) {\n  Parser.prototype[type2.toLowerCase()] = function(varName, options) {\n    return this.setNextParser(type2.toLowerCase(), varName, options);\n  };\n  var typeWithoutEndian = type2.replace(/BE|LE/, \"\").toLowerCase();\n  if (!(typeWithoutEndian in Parser.prototype)) {\n    Parser.prototype[typeWithoutEndian] = function(varName, options) {\n      return this[typeWithoutEndian + this.endian](varName, options);\n    };\n  }\n});\nBIT_RANGE.forEach(function(i) {\n  Parser.prototype[\"bit\".concat(i.toString())] = function(varName, options) {\n    if (!options) {\n      options = {};\n    }\n    options.length = i;\n    return this.setNextParser(\"bit\", varName, options);\n  };\n});\nParser.prototype.namely = function(alias) {\n  aliasRegistry[alias] = this;\n  this.alias = alias;\n  return this;\n};\nParser.prototype.skip = function(length, options) {\n  if (options && options.assert) {\n    throw new Error(\"assert option on skip is not allowed.\");\n  }\n  return this.setNextParser(\"skip\", \"\", { length });\n};\nParser.prototype.string = function(varName, options) {\n  if (!options.zeroTerminated && !options.length && !options.greedy) {\n    throw new Error(\"Neither length, zeroTerminated, nor greedy is defined for string.\");\n  }\n  if ((options.zeroTerminated || options.length) && options.greedy) {\n    throw new Error(\"greedy is mutually exclusive with length and zeroTerminated for string.\");\n  }\n  if (options.stripNull && !(options.length || options.greedy)) {\n    throw new Error(\"Length or greedy must be defined if stripNull is defined.\");\n  }\n  options.encoding = options.encoding || \"utf8\";\n  return this.setNextParser(\"string\", varName, options);\n};\nParser.prototype.buffer = function(varName, options) {\n  if (!options.length && !options.readUntil) {\n    throw new Error(\"Length nor readUntil is defined in buffer parser\");\n  }\n  return this.setNextParser(\"buffer\", varName, options);\n};\nParser.prototype.array = function(varName, options) {\n  if (!options.readUntil && !options.length && !options.lengthInBytes) {\n    throw new Error(\"Length option of array is not defined.\");\n  }\n  if (!options.type) {\n    throw new Error(\"Type option of array is not defined.\");\n  }\n  if (typeof options.type === \"string\" && !aliasRegistry[options.type] && Object.keys(PRIMITIVE_TYPES).indexOf(NAME_MAP[options.type]) < 0) {\n    throw new Error('Specified primitive type \"'.concat(options.type, '\" is not supported.'));\n  }\n  return this.setNextParser(\"array\", varName, options);\n};\nParser.prototype.choice = function(varName, options) {\n  if (arguments.length === 1 && _typeof(varName) === \"object\") {\n    options = varName;\n    varName = null;\n  }\n  if (!options.tag) {\n    throw new Error(\"Tag option of array is not defined.\");\n  }\n  if (!options.choices) {\n    throw new Error(\"Choices option of array is not defined.\");\n  }\n  Object.keys(options.choices).forEach(function(key) {\n    if (!options.choices[key]) {\n      throw new Error(\"Choice Case \".concat(key, \" of \").concat(varName, \" is not valid.\"));\n    }\n    if (typeof options.choices[key] === \"string\" && !aliasRegistry[options.choices[key]] && Object.keys(PRIMITIVE_TYPES).indexOf(NAME_MAP[options.choices[key]]) < 0) {\n      throw new Error('Specified primitive type \"'.concat(options.choices[key], '\" is not supported.'));\n    }\n  }, this);\n  return this.setNextParser(\"choice\", varName, options);\n};\nParser.prototype.nest = function(varName, options) {\n  if (arguments.length === 1 && _typeof(varName) === \"object\") {\n    options = varName;\n    varName = null;\n  }\n  if (!options.type) {\n    throw new Error(\"Type option of nest is not defined.\");\n  }\n  if (!(options.type instanceof Parser) && !aliasRegistry[options.type]) {\n    throw new Error(\"Type option of nest must be a Parser object.\");\n  }\n  if (!(options.type instanceof Parser) && !varName) {\n    throw new Error(\"options.type must be a object if variable name is omitted.\");\n  }\n  return this.setNextParser(\"nest\", varName, options);\n};\nParser.prototype.endianess = function(endianess) {\n  switch (endianess.toLowerCase()) {\n    case \"little\":\n      this.endian = \"le\";\n      break;\n    case \"big\":\n      this.endian = \"be\";\n      break;\n    default:\n      throw new Error(\"Invalid endianess: \".concat(endianess));\n  }\n  return this;\n};\nParser.prototype.create = function(constructorFn) {\n  if (!(constructorFn instanceof Function)) {\n    throw new Error(\"Constructor must be a Function object.\");\n  }\n  this.constructorFn = constructorFn;\n  return this;\n};\nParser.prototype.getCode = function() {\n  var ctx = new Context$1();\n  ctx.pushCode(\"if (!Buffer.isBuffer(buffer)) {\");\n  ctx.generateError('\"argument buffer is not a Buffer object\"');\n  ctx.pushCode(\"}\");\n  if (!this.alias) {\n    this.addRawCode(ctx);\n  } else {\n    this.addAliasedCode(ctx);\n  }\n  if (this.alias) {\n    ctx.pushCode(\"return {0}(0)\", FUNCTION_PREFIX + this.alias);\n  } else {\n    ctx.pushCode(\"return { offset: offset, result: vars };\");\n  }\n  return ctx.code;\n};\nParser.prototype.addRawCode = function(ctx) {\n  ctx.pushCode(\"var offset = 0;\");\n  if (this.constructorFn) {\n    ctx.pushCode(\"var vars = new constructorFn();\");\n  } else {\n    ctx.pushCode(\"var vars = {};\");\n  }\n  this.generate(ctx);\n  this.resolveReferences(ctx);\n  ctx.pushCode(\"return { offset: offset, result: vars };\");\n};\nParser.prototype.addAliasedCode = function(ctx) {\n  ctx.pushCode(\"function {0}(offset) {\", FUNCTION_PREFIX + this.alias);\n  if (this.constructorFn) {\n    ctx.pushCode(\"var vars = new constructorFn();\");\n  } else {\n    ctx.pushCode(\"var vars = {};\");\n  }\n  this.generate(ctx);\n  ctx.markResolved(this.alias);\n  this.resolveReferences(ctx);\n  ctx.pushCode(\"return { offset: offset, result: vars };\");\n  ctx.pushCode(\"}\");\n  return ctx;\n};\nParser.prototype.resolveReferences = function(ctx) {\n  var references = ctx.getUnresolvedReferences();\n  ctx.markRequested(references);\n  references.forEach(function(alias) {\n    var parser = aliasRegistry[alias];\n    parser.addAliasedCode(ctx);\n  });\n};\nParser.prototype.compile = function() {\n  var src = \"(function(buffer, constructorFn, Long) { \".concat(this.getCode(), \" })\");\n  this.compiled = vm.runInThisContext(src);\n};\nParser.prototype.sizeOf = function() {\n  var size = NaN;\n  if (Object.keys(PRIMITIVE_TYPES).indexOf(this.type) >= 0) {\n    size = PRIMITIVE_TYPES[this.type];\n  } else if (this.type === \"String\" && typeof this.options.length === \"number\") {\n    size = this.options.length;\n  } else if (this.type === \"Buffer\" && typeof this.options.length === \"number\") {\n    size = this.options.length;\n  } else if (this.type === \"Array\" && typeof this.options.length === \"number\") {\n    var elementSize = NaN;\n    if (typeof this.options.type === \"string\") {\n      elementSize = PRIMITIVE_TYPES[NAME_MAP[this.options.type]];\n    } else if (this.options.type instanceof Parser) {\n      elementSize = this.options.type.sizeOf();\n    }\n    size = this.options.length * elementSize;\n  } else if (this.type === \"Skip\") {\n    size = this.options.length;\n  } else if (this.type === \"Nest\") {\n    size = this.options.type.sizeOf();\n  } else if (!this.type) {\n    size = 0;\n  }\n  if (this.next) {\n    size += this.next.sizeOf();\n  }\n  return size;\n};\nParser.prototype.parse = function(buffer2) {\n  if (!this.compiled) {\n    this.compile();\n  }\n  return this.compiled(buffer2, this.constructorFn, Long);\n};\nParser.prototype.setNextParser = function(type2, varName, options) {\n  var parser = new Parser();\n  parser.type = NAME_MAP[type2];\n  parser.varName = varName;\n  parser.options = options || parser.options;\n  parser.endian = this.endian;\n  if (this.head) {\n    this.head.next = parser;\n  } else {\n    this.next = parser;\n  }\n  this.head = parser;\n  return this;\n};\nParser.prototype.generate = function(ctx) {\n  if (this.type) {\n    this[\"generate\".concat(this.type)](ctx);\n    this.generateAssert(ctx);\n  }\n  var varName = ctx.generateVariable(this.varName);\n  if (this.options.formatter) {\n    this.generateFormatter(ctx, varName, this.options.formatter);\n  }\n  return this.generateNext(ctx);\n};\nParser.prototype.generateAssert = function(ctx) {\n  if (!this.options.assert) {\n    return;\n  }\n  var varName = ctx.generateVariable(this.varName);\n  switch (_typeof(this.options.assert)) {\n    case \"function\":\n      ctx.pushCode(\"if (!({0}).call(vars, {1})) {\", this.options.assert, varName);\n      break;\n    case \"number\":\n      ctx.pushCode(\"if ({0} !== {1}) {\", this.options.assert, varName);\n      break;\n    case \"string\":\n      ctx.pushCode('if (\"{0}\" !== {1}) {', this.options.assert, varName);\n      break;\n    default:\n      throw new Error(\"Assert option supports only strings, numbers and assert functions.\");\n  }\n  ctx.generateError('\"Assert error: {0} is \" + {0}', varName);\n  ctx.pushCode(\"}\");\n};\nParser.prototype.generateNext = function(ctx) {\n  if (this.next) {\n    ctx = this.next.generate(ctx);\n  }\n  return ctx;\n};\nObject.keys(PRIMITIVE_TYPES).forEach(function(type2) {\n  Parser.prototype[\"generate\".concat(type2)] = function(ctx) {\n    if (type2 === \"UInt64\") {\n      ctx.pushCode(\"{0} = Long.fromBytes(buffer.slice(offset,offset+8), true, this.endian === 'le').toNumber();\", ctx.generateVariable(this.varName), type2);\n    } else if (type2 === \"Int64\") {\n      ctx.pushCode(\"{0} = Long.fromBytes(buffer.slice(offset,offset+8), false, this.endian === 'le').toNumber();\", ctx.generateVariable(this.varName), type2);\n    } else {\n      ctx.pushCode(\"{0} = buffer.read{1}(offset);\", ctx.generateVariable(this.varName), type2);\n    }\n    ctx.pushCode(\"offset += {0};\", PRIMITIVE_TYPES[type2]);\n  };\n});\nParser.prototype.generateBit = function(ctx) {\n  var parser = JSON.parse(JSON.stringify(this));\n  parser.varName = ctx.generateVariable(parser.varName);\n  ctx.bitFields.push(parser);\n  if (!this.next || this.next && [\"Bit\", \"Nest\"].indexOf(this.next.type) < 0) {\n    var sum2 = 0;\n    ctx.bitFields.forEach(function(p) {\n      sum2 += p.options.length;\n    });\n    var val = ctx.generateTmpVariable();\n    if (sum2 <= 8) {\n      ctx.pushCode(\"var {0} = buffer.readUInt8(offset);\", val);\n      sum2 = 8;\n    } else if (sum2 <= 16) {\n      ctx.pushCode(\"var {0} = buffer.readUInt16BE(offset);\", val);\n      sum2 = 16;\n    } else if (sum2 <= 24) {\n      var val1 = ctx.generateTmpVariable();\n      var val2 = ctx.generateTmpVariable();\n      ctx.pushCode(\"var {0} = buffer.readUInt16BE(offset);\", val1);\n      ctx.pushCode(\"var {0} = buffer.readUInt8(offset + 2);\", val2);\n      ctx.pushCode(\"var {2} = ({0} << 8) | {1};\", val1, val2, val);\n      sum2 = 24;\n    } else if (sum2 <= 32) {\n      ctx.pushCode(\"var {0} = buffer.readUInt32BE(offset);\", val);\n      sum2 = 32;\n    } else {\n      throw new Error(\"Currently, bit field sequence longer than 4-bytes is not supported.\");\n    }\n    ctx.pushCode(\"offset += {0};\", sum2 / 8);\n    var bitOffset = 0;\n    var isBigEndian = this.endian === \"be\";\n    ctx.bitFields.forEach(function(p) {\n      ctx.pushCode(\"{0} = {1} >> {2} & {3};\", p.varName, val, isBigEndian ? sum2 - bitOffset - p.options.length : bitOffset, (1 << p.options.length) - 1);\n      bitOffset += p.options.length;\n    });\n    ctx.bitFields = [];\n  }\n};\nParser.prototype.generateSkip = function(ctx) {\n  var length = ctx.generateOption(this.options.length);\n  ctx.pushCode(\"offset += {0};\", length);\n};\nParser.prototype.generateString = function(ctx) {\n  var name2 = ctx.generateVariable(this.varName);\n  var start = ctx.generateTmpVariable();\n  if (this.options.length && this.options.zeroTerminated) {\n    ctx.pushCode(\"var {0} = offset;\", start);\n    ctx.pushCode(\"while(buffer.readUInt8(offset++) !== 0 && offset - {0}  < {1});\", start, this.options.length);\n    ctx.pushCode(\"{0} = buffer.toString('{1}', {2}, offset - {2} < {3} ? offset - 1 : offset);\", name2, this.options.encoding, start, this.options.length);\n  } else if (this.options.length) {\n    ctx.pushCode(\"{0} = buffer.toString('{1}', offset, offset + {2});\", name2, this.options.encoding, ctx.generateOption(this.options.length));\n    ctx.pushCode(\"offset += {0};\", ctx.generateOption(this.options.length));\n  } else if (this.options.zeroTerminated) {\n    ctx.pushCode(\"var {0} = offset;\", start);\n    ctx.pushCode(\"while(buffer.readUInt8(offset++) !== 0);\");\n    ctx.pushCode(\"{0} = buffer.toString('{1}', {2}, offset - 1);\", name2, this.options.encoding, start);\n  } else if (this.options.greedy) {\n    ctx.pushCode(\"var {0} = offset;\", start);\n    ctx.pushCode(\"while(buffer.length > offset++);\");\n    ctx.pushCode(\"{0} = buffer.toString('{1}', {2}, offset);\", name2, this.options.encoding, start);\n  }\n  if (this.options.stripNull) {\n    ctx.pushCode(\"{0} = {0}.replace(/\\\\x00+$/g, '')\", name2);\n  }\n};\nParser.prototype.generateBuffer = function(ctx) {\n  if (this.options.readUntil === \"eof\") {\n    ctx.pushCode(\"{0} = buffer.slice(offset);\", ctx.generateVariable(this.varName));\n  } else {\n    ctx.pushCode(\"{0} = buffer.slice(offset, offset + {1});\", ctx.generateVariable(this.varName), ctx.generateOption(this.options.length));\n    ctx.pushCode(\"offset += {0};\", ctx.generateOption(this.options.length));\n  }\n  if (this.options.clone) {\n    ctx.pushCode(\"{0} = Buffer.from({0});\", ctx.generateVariable(this.varName));\n  }\n};\nParser.prototype.generateArray = function(ctx) {\n  var length = ctx.generateOption(this.options.length);\n  var lengthInBytes = ctx.generateOption(this.options.lengthInBytes);\n  var type2 = this.options.type;\n  var counter = ctx.generateTmpVariable();\n  var lhs = ctx.generateVariable(this.varName);\n  var item = ctx.generateTmpVariable();\n  var key = this.options.key;\n  var isHash = typeof key === \"string\";\n  if (isHash) {\n    ctx.pushCode(\"{0} = {};\", lhs);\n  } else {\n    ctx.pushCode(\"{0} = [];\", lhs);\n  }\n  if (typeof this.options.readUntil === \"function\") {\n    ctx.pushCode(\"do {\");\n  } else if (this.options.readUntil === \"eof\") {\n    ctx.pushCode(\"for (var {0} = 0; offset < buffer.length; {0}++) {\", counter);\n  } else if (lengthInBytes !== void 0) {\n    ctx.pushCode(\"for (var {0} = offset; offset - {0} < {1}; ) {\", counter, lengthInBytes);\n  } else {\n    ctx.pushCode(\"for (var {0} = 0; {0} < {1}; {0}++) {\", counter, length);\n  }\n  if (typeof type2 === \"string\") {\n    if (!aliasRegistry[type2]) {\n      ctx.pushCode(\"var {0} = buffer.read{1}(offset);\", item, NAME_MAP[type2]);\n      ctx.pushCode(\"offset += {0};\", PRIMITIVE_TYPES[NAME_MAP[type2]]);\n    } else {\n      var tempVar = ctx.generateTmpVariable();\n      ctx.pushCode(\"var {0} = {1}(offset);\", tempVar, FUNCTION_PREFIX + type2);\n      ctx.pushCode(\"var {0} = {1}.result; offset = {1}.offset;\", item, tempVar);\n      if (type2 !== this.alias)\n        ctx.addReference(type2);\n    }\n  } else if (type2 instanceof Parser) {\n    ctx.pushCode(\"var {0} = {};\", item);\n    ctx.pushScope(item);\n    type2.generate(ctx);\n    ctx.popScope();\n  }\n  if (isHash) {\n    ctx.pushCode(\"{0}[{2}.{1}] = {2};\", lhs, key, item);\n  } else {\n    ctx.pushCode(\"{0}.push({1});\", lhs, item);\n  }\n  ctx.pushCode(\"}\");\n  if (typeof this.options.readUntil === \"function\") {\n    ctx.pushCode(\" while (!({0}).call(this, {1}, buffer.slice(offset)));\", this.options.readUntil, item);\n  }\n};\nParser.prototype.generateChoiceCase = function(ctx, varName, type2) {\n  if (typeof type2 === \"string\") {\n    if (!aliasRegistry[type2]) {\n      ctx.pushCode(\"{0} = buffer.read{1}(offset);\", ctx.generateVariable(this.varName), NAME_MAP[type2]);\n      ctx.pushCode(\"offset += {0};\", PRIMITIVE_TYPES[NAME_MAP[type2]]);\n    } else {\n      var tempVar = ctx.generateTmpVariable();\n      ctx.pushCode(\"var {0} = {1}(offset);\", tempVar, FUNCTION_PREFIX + type2);\n      ctx.pushCode(\"{0} = {1}.result; offset = {1}.offset;\", ctx.generateVariable(this.varName), tempVar);\n      if (type2 !== this.alias)\n        ctx.addReference(type2);\n    }\n  } else if (type2 instanceof Parser) {\n    ctx.pushPath(varName);\n    type2.generate(ctx);\n    ctx.popPath(varName);\n  }\n};\nParser.prototype.generateChoice = function(ctx) {\n  var tag = ctx.generateOption(this.options.tag);\n  if (this.varName) {\n    ctx.pushCode(\"{0} = {};\", ctx.generateVariable(this.varName));\n  }\n  ctx.pushCode(\"switch({0}) {\", tag);\n  Object.keys(this.options.choices).forEach(function(t) {\n    var type2 = this.options.choices[t];\n    if (Number.isNaN(parseInt(t, 10))) {\n      ctx.pushCode(\"case '{0}':\", t);\n    } else {\n      ctx.pushCode(\"case {0}:\", t);\n    }\n    this.generateChoiceCase(ctx, this.varName, type2);\n    ctx.pushCode(\"break;\");\n  }, this);\n  ctx.pushCode(\"default:\");\n  if (this.options.defaultChoice) {\n    this.generateChoiceCase(ctx, this.varName, this.options.defaultChoice);\n  } else {\n    ctx.generateError('\"Met undefined tag value \" + {0} + \" at choice\"', tag);\n  }\n  ctx.pushCode(\"}\");\n};\nParser.prototype.generateNest = function(ctx) {\n  var nestVar = ctx.generateVariable(this.varName);\n  if (this.options.type instanceof Parser) {\n    if (this.varName) {\n      ctx.pushCode(\"{0} = {};\", nestVar);\n    }\n    ctx.pushPath(this.varName);\n    this.options.type.generate(ctx);\n    ctx.popPath(this.varName);\n  } else if (aliasRegistry[this.options.type]) {\n    var tempVar = ctx.generateTmpVariable();\n    ctx.pushCode(\"var {0} = {1}(offset);\", tempVar, FUNCTION_PREFIX + this.options.type);\n    ctx.pushCode(\"{0} = {1}.result; offset = {1}.offset;\", nestVar, tempVar);\n    if (this.options.type !== this.alias)\n      ctx.addReference(this.options.type);\n  }\n};\nParser.prototype.generateFormatter = function(ctx, varName, formatter) {\n  if (typeof formatter === \"function\") {\n    ctx.pushCode(\"{0} = ({1}).call(this, {0});\", varName, formatter);\n  }\n};\nParser.prototype.isInteger = function() {\n  return !!this.type.match(/U?Int[8|16|32][BE|LE]?|Bit\\d+/);\n};\nParser.prototype.itf8 = function(varName, options) {\n  return this.setNextParser(\"itf8\", varName, options);\n};\nParser.prototype.itf8 = function(varName, options) {\n  return this.setNextParser(\"itf8\", varName, options);\n};\nParser.prototype.generateItf8 = function(ctx) {\n  var name2 = ctx.generateVariable(this.varName);\n  var countFlags = ctx.generateTmpVariable();\n  ctx.pushCode(\"\\n    var \".concat(countFlags, \" = buffer[offset];\\n    if (\").concat(countFlags, \" < 0x80) {\\n      \").concat(name2, \" = \").concat(countFlags, \";\\n      offset += 1;\\n    } else if (\").concat(countFlags, \" < 0xc0) {\\n      \").concat(name2, \" = ((\").concat(countFlags, \"<<8) | buffer[offset+1]) & 0x3fff;\\n      offset += 2;\\n    } else if (\").concat(countFlags, \" < 0xe0) {\\n      \").concat(name2, \" = ((\").concat(countFlags, \"<<16) | (buffer[offset+1]<< 8) |  buffer[offset+2]) & 0x1fffff;\\n      offset += 3;\\n    } else if (\").concat(countFlags, \" < 0xf0) {\\n      \").concat(name2, \" = ((\").concat(countFlags, \"<<24) | (buffer[offset+1]<<16) | (buffer[offset+2]<<8) | buffer[offset+3]) & 0x0fffffff;\\n      offset += 4\\n    } else {\\n      \").concat(name2, \" = ((\").concat(countFlags, \" & 0x0f)<<28) | (buffer[offset+1]<<20) | (buffer[offset+2]<<12) | (buffer[offset+3]<<4) | (buffer[offset+4] & 0x0f);\\n      // x=((0xff & 0x0f)<<28) | (0xff<<20) | (0xff<<12) | (0xff<<4) | (0x0f & 0x0f);\\n      // TODO *val_p = uv < 0x80000000UL ? uv : -((int32_t) (0xffffffffUL - uv)) - 1;\\n      offset += 5\\n    }\\n  \"));\n};\nParser.prototype.ltf8 = function(varName, options) {\n  return this.setNextParser(\"ltf8\", varName, options);\n};\nParser.prototype.generateLtf8 = function(ctx) {\n  var name2 = ctx.generateVariable(this.varName);\n  var countFlags = ctx.generateTmpVariable();\n  ctx.pushCode(\"\\n  var \".concat(countFlags, \" = buffer[offset];\\n  if (\").concat(countFlags, \" < 0x80) {\\n    \").concat(name2, \" = \").concat(countFlags, \";\\n    offset += 1;\\n  } else if (\").concat(countFlags, \" < 0xc0) {\\n    \").concat(name2, \" = ((buffer[offset]<<8) | buffer[offset+1]) & 0x3fff;\\n    offset += 2;\\n  } else if (\").concat(countFlags, \" < 0xe0) {\\n    \").concat(name2, \" = ((buffer[offset]<<16) | (buffer[offset+1]<<8) | buffer[offset+2]) & 0x1fffff;\\n    \").concat(name2, \" = (((\").concat(countFlags, \" & 63) << 16) | buffer.readUInt16LE(offset + 1));\\n    offset += 3;\\n  } else if (\").concat(countFlags, \" < 0xf0) {\\n    \").concat(name2, \" = ((buffer[offset]<<24) | (buffer[offset+1]<<16) | (buffer[offset+2]<<8) | buffer[offset+3]) & 0x0fffffff;\\n    offset += 4;\\n  } else if (\").concat(countFlags, \" < 0xf8) {\\n    \").concat(name2, \" = (((buffer[offset] & 15) * Math.pow(2,32))) +\\n      (buffer[offset+1]<<24) | (buffer[offset+2]<<16 | buffer[offset+3]<<8 | buffer[offset+4])\\n    // TODO *val_p = uv < 0x80000000UL ? uv : -((int32_t) (0xffffffffUL - uv)) - 1;\\n    offset += 5;\\n  } else if (\").concat(countFlags, \" < 0xfc) {\\n    \").concat(name2, \" = ((((buffer[offset] & 7) << 8) | buffer[offset+1] )) * Math.pow(2,32) +\\n      (buffer[offset+2]<<24) | (buffer[offset+3]<<16 | buffer[offset+4]<<8 | buffer[offset+5])\\n    offset += 6;\\n  } else if (\").concat(countFlags, \" < 0xfe) {\\n    \").concat(name2, \" = ((((buffer[offset] & 3) << 16) | buffer[offset+1]<<8 | buffer[offset+2])) * Math.pow(2,32) +\\n      (buffer[offset+3]<<24) | (buffer[offset+4]<<16 | buffer[offset+5]<<8 | buffer[offset+6])\\n    offset += 7;\\n  } else if (\").concat(countFlags, \" < 0xff) {\\n    \").concat(name2, \" = Long.fromBytesBE(buffer.slice(offset+1,offset+8));\\n    if (\").concat(name2, \".greaterThan(Number.MAX_SAFE_INTEGER) || \").concat(name2, \".lessThan(Number.MIN_SAFE_INTEGER))\\n      throw new Error('integer overflow')\\n    \").concat(name2, \" = \").concat(name2, \".toNumber()\\n    offset += 8;\\n  } else {\\n    \").concat(name2, \" = Long.fromBytesBE(buffer.slice(offset+1,offset+9));\\n    if (\").concat(name2, \".greaterThan(Number.MAX_SAFE_INTEGER) || \").concat(name2, \".lessThan(Number.MIN_SAFE_INTEGER))\\n      throw new Error('integer overflow')\\n    \").concat(name2, \" = \").concat(name2, \".toNumber()\\n    offset += 9;\\n  }\\n  \"));\n};\nbinary_parser.Parser = Parser;\nvar dist = {};\nvar AbortablePromiseCache$1 = {};\nvar abortcontrollerPonyfill = {};\nvar cjsPonyfill = {};\nObject.defineProperty(cjsPonyfill, \"__esModule\", { value: true });\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor)\n      descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps)\n    _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps)\n    _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass)\n    _setPrototypeOf(subClass, superClass);\n}\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf3(o2) {\n    return o2.__proto__ || Object.getPrototypeOf(o2);\n  };\n  return _getPrototypeOf(o);\n}\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf2(o2, p2) {\n    o2.__proto__ = p2;\n    return o2;\n  };\n  return _setPrototypeOf(o, p);\n}\nfunction _isNativeReflectConstruct$3() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct)\n    return false;\n  if (Reflect.construct.sham)\n    return false;\n  if (typeof Proxy === \"function\")\n    return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {\n    }));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nfunction _assertThisInitialized(self2) {\n  if (self2 === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self2;\n}\nfunction _possibleConstructorReturn(self2, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n  return _assertThisInitialized(self2);\n}\nfunction _createSuper$3(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct$3();\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived), result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n    if (object === null)\n      break;\n  }\n  return object;\n}\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get2(target2, property2, receiver2) {\n      var base = _superPropBase(target2, property2);\n      if (!base)\n        return;\n      var desc = Object.getOwnPropertyDescriptor(base, property2);\n      if (desc.get) {\n        return desc.get.call(receiver2);\n      }\n      return desc.value;\n    };\n  }\n  return _get(target, property, receiver || target);\n}\nvar Emitter = /* @__PURE__ */ function() {\n  function Emitter2() {\n    _classCallCheck(this, Emitter2);\n    Object.defineProperty(this, \"listeners\", {\n      value: {},\n      writable: true,\n      configurable: true\n    });\n  }\n  _createClass(Emitter2, [{\n    key: \"addEventListener\",\n    value: function addEventListener(type2, callback, options) {\n      if (!(type2 in this.listeners)) {\n        this.listeners[type2] = [];\n      }\n      this.listeners[type2].push({\n        callback,\n        options\n      });\n    }\n  }, {\n    key: \"removeEventListener\",\n    value: function removeEventListener(type2, callback) {\n      if (!(type2 in this.listeners)) {\n        return;\n      }\n      var stack = this.listeners[type2];\n      for (var i = 0, l = stack.length; i < l; i++) {\n        if (stack[i].callback === callback) {\n          stack.splice(i, 1);\n          return;\n        }\n      }\n    }\n  }, {\n    key: \"dispatchEvent\",\n    value: function dispatchEvent(event) {\n      if (!(event.type in this.listeners)) {\n        return;\n      }\n      var stack = this.listeners[event.type];\n      var stackToCall = stack.slice();\n      for (var i = 0, l = stackToCall.length; i < l; i++) {\n        var listener = stackToCall[i];\n        try {\n          listener.callback.call(this, event);\n        } catch (e) {\n          Promise.resolve().then(function() {\n            throw e;\n          });\n        }\n        if (listener.options && listener.options.once) {\n          this.removeEventListener(event.type, listener.callback);\n        }\n      }\n      return !event.defaultPrevented;\n    }\n  }]);\n  return Emitter2;\n}();\nvar AbortSignal$1 = /* @__PURE__ */ function(_Emitter) {\n  _inherits(AbortSignal2, _Emitter);\n  var _super = _createSuper$3(AbortSignal2);\n  function AbortSignal2() {\n    var _this;\n    _classCallCheck(this, AbortSignal2);\n    _this = _super.call(this);\n    if (!_this.listeners) {\n      Emitter.call(_assertThisInitialized(_this));\n    }\n    Object.defineProperty(_assertThisInitialized(_this), \"aborted\", {\n      value: false,\n      writable: true,\n      configurable: true\n    });\n    Object.defineProperty(_assertThisInitialized(_this), \"onabort\", {\n      value: null,\n      writable: true,\n      configurable: true\n    });\n    return _this;\n  }\n  _createClass(AbortSignal2, [{\n    key: \"toString\",\n    value: function toString2() {\n      return \"[object AbortSignal]\";\n    }\n  }, {\n    key: \"dispatchEvent\",\n    value: function dispatchEvent(event) {\n      if (event.type === \"abort\") {\n        this.aborted = true;\n        if (typeof this.onabort === \"function\") {\n          this.onabort.call(this, event);\n        }\n      }\n      _get(_getPrototypeOf(AbortSignal2.prototype), \"dispatchEvent\", this).call(this, event);\n    }\n  }]);\n  return AbortSignal2;\n}(Emitter);\nvar AbortController$1 = /* @__PURE__ */ function() {\n  function AbortController2() {\n    _classCallCheck(this, AbortController2);\n    Object.defineProperty(this, \"signal\", {\n      value: new AbortSignal$1(),\n      writable: true,\n      configurable: true\n    });\n  }\n  _createClass(AbortController2, [{\n    key: \"abort\",\n    value: function abort() {\n      var event;\n      try {\n        event = new Event(\"abort\");\n      } catch (e) {\n        if (typeof document !== \"undefined\") {\n          if (!document.createEvent) {\n            event = document.createEventObject();\n            event.type = \"abort\";\n          } else {\n            event = document.createEvent(\"Event\");\n            event.initEvent(\"abort\", false, false);\n          }\n        } else {\n          event = {\n            type: \"abort\",\n            bubbles: false,\n            cancelable: false\n          };\n        }\n      }\n      this.signal.dispatchEvent(event);\n    }\n  }, {\n    key: \"toString\",\n    value: function toString2() {\n      return \"[object AbortController]\";\n    }\n  }]);\n  return AbortController2;\n}();\nif (typeof Symbol !== \"undefined\" && Symbol.toStringTag) {\n  AbortController$1.prototype[Symbol.toStringTag] = \"AbortController\";\n  AbortSignal$1.prototype[Symbol.toStringTag] = \"AbortSignal\";\n}\nfunction polyfillNeeded(self2) {\n  if (self2.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL) {\n    console.log(\"__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill\");\n    return true;\n  }\n  return typeof self2.Request === \"function\" && !self2.Request.prototype.hasOwnProperty(\"signal\") || !self2.AbortController;\n}\nfunction abortableFetchDecorator(patchTargets) {\n  if (typeof patchTargets === \"function\") {\n    patchTargets = {\n      fetch: patchTargets\n    };\n  }\n  var _patchTargets = patchTargets, fetch2 = _patchTargets.fetch, _patchTargets$Request = _patchTargets.Request, NativeRequest = _patchTargets$Request === void 0 ? fetch2.Request : _patchTargets$Request, NativeAbortController = _patchTargets.AbortController, _patchTargets$__FORCE = _patchTargets.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL, __FORCE_INSTALL_ABORTCONTROLLER_POLYFILL = _patchTargets$__FORCE === void 0 ? false : _patchTargets$__FORCE;\n  if (!polyfillNeeded({\n    fetch: fetch2,\n    Request: NativeRequest,\n    AbortController: NativeAbortController,\n    __FORCE_INSTALL_ABORTCONTROLLER_POLYFILL\n  })) {\n    return {\n      fetch: fetch2,\n      Request\n    };\n  }\n  var Request = NativeRequest;\n  if (Request && !Request.prototype.hasOwnProperty(\"signal\") || __FORCE_INSTALL_ABORTCONTROLLER_POLYFILL) {\n    Request = function Request2(input, init2) {\n      var signal;\n      if (init2 && init2.signal) {\n        signal = init2.signal;\n        delete init2.signal;\n      }\n      var request = new NativeRequest(input, init2);\n      if (signal) {\n        Object.defineProperty(request, \"signal\", {\n          writable: false,\n          enumerable: false,\n          configurable: true,\n          value: signal\n        });\n      }\n      return request;\n    };\n    Request.prototype = NativeRequest.prototype;\n  }\n  var realFetch = fetch2;\n  var abortableFetch = function abortableFetch2(input, init2) {\n    var signal = Request && Request.prototype.isPrototypeOf(input) ? input.signal : init2 ? init2.signal : void 0;\n    if (signal) {\n      var abortError;\n      try {\n        abortError = new DOMException(\"Aborted\", \"AbortError\");\n      } catch (err) {\n        abortError = new Error(\"Aborted\");\n        abortError.name = \"AbortError\";\n      }\n      if (signal.aborted) {\n        return Promise.reject(abortError);\n      }\n      var cancellation = new Promise(function(_, reject) {\n        signal.addEventListener(\"abort\", function() {\n          return reject(abortError);\n        }, {\n          once: true\n        });\n      });\n      if (init2 && init2.signal) {\n        delete init2.signal;\n      }\n      return Promise.race([cancellation, realFetch(input, init2)]);\n    }\n    return realFetch(input, init2);\n  };\n  return {\n    fetch: abortableFetch,\n    Request\n  };\n}\ncjsPonyfill.AbortController = AbortController$1;\ncjsPonyfill.AbortSignal = AbortSignal$1;\ncjsPonyfill.abortableFetch = abortableFetchDecorator;\nObject.defineProperty(abortcontrollerPonyfill, \"__esModule\", { value: true });\nabortcontrollerPonyfill.AbortSignal = abortcontrollerPonyfill.AbortController = void 0;\nvar _cjsPonyfill = cjsPonyfill;\nvar getGlobal = function getGlobal2() {\n  if (typeof self !== \"undefined\") {\n    return self;\n  }\n  if (typeof window !== \"undefined\") {\n    return window;\n  }\n  if (typeof commonjsGlobal !== \"undefined\") {\n    return commonjsGlobal;\n  }\n  throw new Error(\"unable to locate global object\");\n};\nvar AbortController = typeof getGlobal().AbortController === \"undefined\" ? _cjsPonyfill.AbortController : getGlobal().AbortController;\nabortcontrollerPonyfill.AbortController = AbortController;\nvar AbortSignal = typeof getGlobal().AbortController === \"undefined\" ? _cjsPonyfill.AbortSignal : getGlobal().AbortSignal;\nabortcontrollerPonyfill.AbortSignal = AbortSignal;\nvar AggregateAbortController$1 = {};\nvar _interopRequireDefault$9 = interopRequireDefault.exports;\nObject.defineProperty(AggregateAbortController$1, \"__esModule\", { value: true });\nAggregateAbortController$1.default = void 0;\nvar _createClass2$7 = _interopRequireDefault$9(createClass.exports);\nvar _defineProperty2$7 = _interopRequireDefault$9(defineProperty.exports);\nvar _classCallCheck2$8 = _interopRequireDefault$9(classCallCheck.exports);\nvar _abortcontrollerPonyfill$1 = abortcontrollerPonyfill;\nvar NullSignal = function NullSignal2() {\n  (0, _classCallCheck2$8.default)(this, NullSignal2);\n};\nvar AggregateAbortController = /* @__PURE__ */ function() {\n  function AggregateAbortController2() {\n    (0, _classCallCheck2$8.default)(this, AggregateAbortController2);\n    (0, _defineProperty2$7.default)(this, \"signals\", /* @__PURE__ */ new Set());\n    (0, _defineProperty2$7.default)(this, \"abortController\", new _abortcontrollerPonyfill$1.AbortController());\n  }\n  (0, _createClass2$7.default)(AggregateAbortController2, [{\n    key: \"addSignal\",\n    value: function addSignal() {\n      var _this = this;\n      var signal = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : new NullSignal();\n      if (this.signal.aborted) {\n        throw new Error(\"cannot add a signal, already aborted!\");\n      }\n      this.signals.add(signal);\n      if (signal.aborted) {\n        this.handleAborted(signal);\n      } else if (typeof signal.addEventListener === \"function\") {\n        signal.addEventListener(\"abort\", function() {\n          _this.handleAborted(signal);\n        });\n      }\n    }\n  }, { key: \"handleAborted\", value: function handleAborted(signal) {\n    this.signals.delete(signal);\n    if (this.signals.size === 0) {\n      this.abortController.abort();\n    }\n  } }, { key: \"abort\", value: function abort() {\n    this.abortController.abort();\n  } }, { key: \"signal\", get: function get() {\n    return this.abortController.signal;\n  } }]);\n  return AggregateAbortController2;\n}();\nAggregateAbortController$1.default = AggregateAbortController;\nvar AggregateStatusReporter$1 = {};\nvar _interopRequireDefault$8 = interopRequireDefault.exports;\nObject.defineProperty(AggregateStatusReporter$1, \"__esModule\", { value: true });\nAggregateStatusReporter$1.default = void 0;\nvar _classCallCheck2$7 = _interopRequireDefault$8(classCallCheck.exports);\nvar _createClass2$6 = _interopRequireDefault$8(createClass.exports);\nvar _defineProperty2$6 = _interopRequireDefault$8(defineProperty.exports);\nvar AggregateStatusReporter = /* @__PURE__ */ function() {\n  function AggregateStatusReporter2() {\n    (0, _classCallCheck2$7.default)(this, AggregateStatusReporter2);\n    (0, _defineProperty2$6.default)(this, \"callbacks\", /* @__PURE__ */ new Set());\n    (0, _defineProperty2$6.default)(this, \"currentMessage\", void 0);\n  }\n  (0, _createClass2$6.default)(AggregateStatusReporter2, [{ key: \"addCallback\", value: function addCallback() {\n    var callback = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : function() {\n    };\n    this.callbacks.add(callback);\n    callback(this.currentMessage);\n  } }, { key: \"callback\", value: function callback(message) {\n    this.currentMessage = message;\n    this.callbacks.forEach(function(elt) {\n      elt(message);\n    });\n  } }]);\n  return AggregateStatusReporter2;\n}();\nAggregateStatusReporter$1.default = AggregateStatusReporter;\nvar _interopRequireDefault$7 = interopRequireDefault.exports;\nObject.defineProperty(AbortablePromiseCache$1, \"__esModule\", { value: true });\nAbortablePromiseCache$1.default = void 0;\nvar _typeof2 = _interopRequireDefault$7(_typeof$2.exports);\nvar _classCallCheck2$6 = _interopRequireDefault$7(classCallCheck.exports);\nvar _createClass2$5 = _interopRequireDefault$7(createClass.exports);\nvar _defineProperty2$5 = _interopRequireDefault$7(defineProperty.exports);\nvar _abortcontrollerPonyfill = abortcontrollerPonyfill;\nvar _AggregateAbortController = _interopRequireDefault$7(AggregateAbortController$1);\nvar _AggregateStatusReporter = _interopRequireDefault$7(AggregateStatusReporter$1);\nvar AbortablePromiseCache = /* @__PURE__ */ function() {\n  function AbortablePromiseCache2(_ref) {\n    var fill = _ref.fill, cache2 = _ref.cache;\n    (0, _classCallCheck2$6.default)(this, AbortablePromiseCache2);\n    (0, _defineProperty2$5.default)(this, \"cache\", void 0);\n    (0, _defineProperty2$5.default)(this, \"fillCallback\", void 0);\n    if (typeof fill !== \"function\")\n      throw new TypeError(\"must pass a fill function\");\n    if ((0, _typeof2.default)(cache2) !== \"object\")\n      throw new TypeError(\"must pass a cache object\");\n    if (typeof cache2.get !== \"function\" || typeof cache2.set !== \"function\" || typeof cache2.delete !== \"function\")\n      throw new TypeError(\"cache must implement get(key), set(key, val), and and delete(key)\");\n    this.cache = cache2;\n    this.fillCallback = fill;\n  }\n  (0, _createClass2$5.default)(AbortablePromiseCache2, [{ key: \"evict\", value: function evict(key, entry) {\n    if (this.cache.get(key) === entry)\n      this.cache.delete(key);\n  } }, { key: \"fill\", value: function fill(key, data2, signal, statusCallback) {\n    var _this = this;\n    var aborter = new _AggregateAbortController.default();\n    var statusReporter = new _AggregateStatusReporter.default();\n    statusReporter.addCallback(statusCallback);\n    var newEntry = {\n      aborter,\n      promise: this.fillCallback(data2, aborter.signal, function(message) {\n        statusReporter.callback(message);\n      }),\n      settled: false,\n      statusReporter,\n      get aborted() {\n        return this.aborter.signal.aborted;\n      }\n    };\n    newEntry.aborter.addSignal(signal);\n    newEntry.aborter.signal.addEventListener(\"abort\", function() {\n      if (!newEntry.settled) {\n        _this.evict(key, newEntry);\n      }\n    });\n    newEntry.promise.then(function() {\n      newEntry.settled = true;\n    }, function(exception) {\n      newEntry.settled = true;\n      _this.evict(key, newEntry);\n    }).catch(function(e) {\n      console.error(e);\n      throw e;\n    });\n    this.cache.set(key, newEntry);\n  } }, {\n    key: \"has\",\n    value: function has(key) {\n      return this.cache.has(key);\n    }\n  }, {\n    key: \"get\",\n    value: function get(key, data2, signal, statusCallback) {\n      if (!signal && data2 instanceof _abortcontrollerPonyfill.AbortSignal)\n        throw new TypeError(\"second get argument appears to be an AbortSignal, perhaps you meant to pass `null` for the fill data?\");\n      var cacheEntry = this.cache.get(key);\n      if (cacheEntry) {\n        if (cacheEntry.aborted && !cacheEntry.settled) {\n          this.evict(key, cacheEntry);\n          return this.get(key, data2, signal, statusCallback);\n        }\n        if (cacheEntry.settled) {\n          return cacheEntry.promise;\n        }\n        cacheEntry.aborter.addSignal(signal);\n        cacheEntry.statusReporter.addCallback(statusCallback);\n        return AbortablePromiseCache2.checkSinglePromise(cacheEntry.promise, signal);\n      }\n      this.fill(key, data2, signal, statusCallback);\n      return AbortablePromiseCache2.checkSinglePromise(this.cache.get(key).promise, signal);\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete(key) {\n      var cachedEntry = this.cache.get(key);\n      if (cachedEntry) {\n        if (!cachedEntry.settled)\n          cachedEntry.aborter.abort();\n        this.cache.delete(key);\n      }\n    }\n  }, { key: \"clear\", value: function clear() {\n    var keyIter = this.cache.keys();\n    var deleteCount = 0;\n    for (var result = keyIter.next(); !result.done; result = keyIter.next()) {\n      this.delete(result.value);\n      deleteCount += 1;\n    }\n    return deleteCount;\n  } }], [{ key: \"isAbortException\", value: function isAbortException(exception) {\n    return exception.name === \"AbortError\" || exception.code === \"ERR_ABORTED\" || exception.message === \"AbortError: aborted\" || exception.message === \"Error: aborted\";\n  } }, { key: \"checkSinglePromise\", value: function checkSinglePromise(promise, signal) {\n    function checkForSingleAbort() {\n      if (signal && signal.aborted)\n        throw Object.assign(new Error(\"aborted\"), { code: \"ERR_ABORTED\" });\n    }\n    return promise.then(function(result) {\n      checkForSingleAbort();\n      return result;\n    }, function(error) {\n      checkForSingleAbort();\n      throw error;\n    });\n  } }]);\n  return AbortablePromiseCache2;\n}();\nAbortablePromiseCache$1.default = AbortablePromiseCache;\nvar _interopRequireDefault$6 = interopRequireDefault.exports;\nObject.defineProperty(dist, \"__esModule\", { value: true });\ndist.default = void 0;\nvar _AbortablePromiseCache = _interopRequireDefault$6(AbortablePromiseCache$1);\nvar _default = _AbortablePromiseCache.default;\ndist.default = _default;\nfunction inflateSync(src) {\n  return Buffer$2.from(unzlibSync(src));\n}\nvar zlib = { inflateSync };\nvar zlib$1 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  inflateSync,\n  \"default\": zlib\n}, Symbol.toStringTag, { value: \"Module\" }));\nvar require$$8 = /* @__PURE__ */ getAugmentedNamespace(zlib$1);\nvar range$1 = {};\nvar _interopRequireDefault$5 = interopRequireDefault.exports;\nObject.defineProperty(range$1, \"__esModule\", {\n  value: true\n});\nrange$1.default = void 0;\nvar _classCallCheck2$5 = _interopRequireDefault$5(classCallCheck.exports);\nvar _createClass2$4 = _interopRequireDefault$5(createClass.exports);\nvar _defineProperty2$4 = _interopRequireDefault$5(defineProperty.exports);\nvar Range = /* @__PURE__ */ function() {\n  function Range2(arg1, arg2) {\n    (0, _classCallCheck2$5.default)(this, Range2);\n    (0, _defineProperty2$4.default)(this, \"ranges\", void 0);\n    this.ranges = arguments.length === 2 ? [{\n      min: arg1,\n      max: arg2\n    }] : 0 in arg1 ? Object.assign({}, arg1) : [arg1];\n  }\n  (0, _createClass2$4.default)(Range2, [{\n    key: \"min\",\n    value: function min2() {\n      return this.ranges[0].min;\n    }\n  }, {\n    key: \"max\",\n    value: function max2() {\n      return this.ranges[this.ranges.length - 1].max;\n    }\n  }, {\n    key: \"contains\",\n    value: function contains2(pos) {\n      for (var s = 0; s < this.ranges.length; s += 1) {\n        var r = this.ranges[s];\n        if (r.min <= pos && r.max >= pos) {\n          return true;\n        }\n      }\n      return false;\n    }\n  }, {\n    key: \"isContiguous\",\n    value: function isContiguous() {\n      return this.ranges.length > 1;\n    }\n  }, {\n    key: \"getRanges\",\n    value: function getRanges() {\n      return this.ranges.map(function(r) {\n        return new Range2(r.min, r.max);\n      });\n    }\n  }, {\n    key: \"toString\",\n    value: function toString2() {\n      return this.ranges.map(function(r) {\n        return \"[\".concat(r.min, \"-\").concat(r.max, \"]\");\n      }).join(\",\");\n    }\n  }, {\n    key: \"union\",\n    value: function union(s1) {\n      var ranges = this.getRanges().concat(s1.getRanges()).sort(this.rangeOrder);\n      var oranges = [];\n      var current = ranges[0];\n      for (var i = 1; i < ranges.length; i += 1) {\n        var nxt = ranges[i];\n        if (nxt.min() > current.max() + 1) {\n          oranges.push(current);\n          current = nxt;\n        } else if (nxt.max() > current.max()) {\n          current = new Range2(current.min(), nxt.max());\n        }\n      }\n      oranges.push(current);\n      if (oranges.length === 1) {\n        return oranges[0];\n      }\n      return new Range2(oranges);\n    }\n  }, {\n    key: \"intersection\",\n    value: function intersection(arg) {\n      var s0 = this;\n      var s1 = arg;\n      var r0 = this.ranges();\n      var r1 = s1.ranges();\n      var l0 = r0.length;\n      var l1 = r1.length;\n      var i0 = 0;\n      var i1 = 0;\n      var or2 = [];\n      while (i0 < l0 && i1 < l1) {\n        s0 = r0[i0];\n        s1 = r1[i1];\n        var lapMin = Math.max(s0.min(), s1.min());\n        var lapMax = Math.min(s0.max(), s1.max());\n        if (lapMax >= lapMin) {\n          or2.push(new Range2(lapMin, lapMax));\n        }\n        if (s0.max() > s1.max()) {\n          i1 += 1;\n        } else {\n          i0 += 1;\n        }\n      }\n      if (or2.length === 0) {\n        throw new Error(\"found range of length 0\");\n      }\n      if (or2.length === 1) {\n        return or2[0];\n      }\n      return new Range2(or2);\n    }\n  }, {\n    key: \"coverage\",\n    value: function coverage() {\n      var tot = 0;\n      var rl = this.ranges();\n      for (var ri = 0; ri < rl.length; ri += 1) {\n        var r = rl[ri];\n        tot += r.max() - r.min() + 1;\n      }\n      return tot;\n    }\n  }, {\n    key: \"rangeOrder\",\n    value: function rangeOrder(tmpa, tmpb) {\n      var a = tmpa;\n      var b = tmpb;\n      if (arguments.length < 2) {\n        b = a;\n        a = this;\n      }\n      if (a.min() < b.min()) {\n        return -1;\n      }\n      if (a.min() > b.min()) {\n        return 1;\n      }\n      if (a.max() < b.max()) {\n        return -1;\n      }\n      if (b.max() > a.max()) {\n        return 1;\n      }\n      return 0;\n    }\n  }]);\n  return Range2;\n}();\nrange$1.default = Range;\nvar util$6 = {};\nvar wrapNativeSuper = { exports: {} };\nvar isNativeFunction = { exports: {} };\n(function(module) {\n  function _isNativeFunction(fn) {\n    return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n  }\n  module.exports = _isNativeFunction;\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n})(isNativeFunction);\nvar construct = { exports: {} };\nvar isNativeReflectConstruct = { exports: {} };\n(function(module) {\n  function _isNativeReflectConstruct2() {\n    if (typeof Reflect === \"undefined\" || !Reflect.construct)\n      return false;\n    if (Reflect.construct.sham)\n      return false;\n    if (typeof Proxy === \"function\")\n      return true;\n    try {\n      Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {\n      }));\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n  module.exports = _isNativeReflectConstruct2;\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n})(isNativeReflectConstruct);\n(function(module) {\n  var setPrototypeOf$1 = setPrototypeOf.exports;\n  var isNativeReflectConstruct$1 = isNativeReflectConstruct.exports;\n  function _construct(Parent, args, Class) {\n    if (isNativeReflectConstruct$1()) {\n      module.exports = _construct = Reflect.construct;\n      module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n    } else {\n      module.exports = _construct = function _construct2(Parent2, args2, Class2) {\n        var a = [null];\n        a.push.apply(a, args2);\n        var Constructor = Function.bind.apply(Parent2, a);\n        var instance = new Constructor();\n        if (Class2)\n          setPrototypeOf$1(instance, Class2.prototype);\n        return instance;\n      };\n      module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n    }\n    return _construct.apply(null, arguments);\n  }\n  module.exports = _construct;\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n})(construct);\n(function(module) {\n  var getPrototypeOf$1 = getPrototypeOf.exports;\n  var setPrototypeOf$1 = setPrototypeOf.exports;\n  var isNativeFunction$1 = isNativeFunction.exports;\n  var construct$1 = construct.exports;\n  function _wrapNativeSuper(Class) {\n    var _cache = typeof Map === \"function\" ? /* @__PURE__ */ new Map() : void 0;\n    module.exports = _wrapNativeSuper = function _wrapNativeSuper3(Class2) {\n      if (Class2 === null || !isNativeFunction$1(Class2))\n        return Class2;\n      if (typeof Class2 !== \"function\") {\n        throw new TypeError(\"Super expression must either be null or a function\");\n      }\n      if (typeof _cache !== \"undefined\") {\n        if (_cache.has(Class2))\n          return _cache.get(Class2);\n        _cache.set(Class2, Wrapper);\n      }\n      function Wrapper() {\n        return construct$1(Class2, arguments, getPrototypeOf$1(this).constructor);\n      }\n      Wrapper.prototype = Object.create(Class2.prototype, {\n        constructor: {\n          value: Wrapper,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n      return setPrototypeOf$1(Wrapper, Class2);\n    };\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n    return _wrapNativeSuper(Class);\n  }\n  module.exports = _wrapNativeSuper;\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n})(wrapNativeSuper);\nvar _interopRequireDefault$4 = interopRequireDefault.exports;\nObject.defineProperty(util$6, \"__esModule\", {\n  value: true\n});\nutil$6.groupBlocks = groupBlocks;\nutil$6.checkAbortSignal = checkAbortSignal;\nutil$6.abortBreakPoint = abortBreakPoint;\nutil$6.AbortError = void 0;\nvar _regenerator$4 = _interopRequireDefault$4(regenerator);\nvar _asyncToGenerator2$4 = _interopRequireDefault$4(asyncToGenerator.exports);\nvar _classCallCheck2$4 = _interopRequireDefault$4(classCallCheck.exports);\nvar _assertThisInitialized2$1 = _interopRequireDefault$4(assertThisInitialized.exports);\nvar _inherits2$2 = _interopRequireDefault$4(inherits.exports);\nvar _possibleConstructorReturn2$2 = _interopRequireDefault$4(possibleConstructorReturn.exports);\nvar _getPrototypeOf2$2 = _interopRequireDefault$4(getPrototypeOf.exports);\nvar _wrapNativeSuper2 = _interopRequireDefault$4(wrapNativeSuper.exports);\nvar _defineProperty2$3 = _interopRequireDefault$4(defineProperty.exports);\nfunction _createSuper$2(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct$2();\n  return function _createSuperInternal() {\n    var Super = (0, _getPrototypeOf2$2.default)(Derived), result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = (0, _getPrototypeOf2$2.default)(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return (0, _possibleConstructorReturn2$2.default)(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$2() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct)\n    return false;\n  if (Reflect.construct.sham)\n    return false;\n  if (typeof Proxy === \"function\")\n    return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function() {\n    }));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar AbortError = /* @__PURE__ */ function(_Error) {\n  (0, _inherits2$2.default)(AbortError2, _Error);\n  var _super = _createSuper$2(AbortError2);\n  function AbortError2(message) {\n    var _this;\n    (0, _classCallCheck2$4.default)(this, AbortError2);\n    _this = _super.call(this, message);\n    (0, _defineProperty2$3.default)((0, _assertThisInitialized2$1.default)(_this), \"code\", void 0);\n    _this.code = \"ERR_ABORTED\";\n    return _this;\n  }\n  return AbortError2;\n}(/* @__PURE__ */ (0, _wrapNativeSuper2.default)(Error));\nutil$6.AbortError = AbortError;\nfunction groupBlocks(blocks) {\n  blocks.sort(function(b0, b1) {\n    return (b0.offset | 0) - (b1.offset | 0);\n  });\n  var blockGroups = [];\n  var lastBlock;\n  var lastBlockEnd;\n  for (var i = 0; i < blocks.length; i += 1) {\n    if (lastBlock && blocks[i].offset - lastBlockEnd <= 2e3) {\n      lastBlock.length += blocks[i].length - lastBlockEnd + blocks[i].offset;\n      lastBlock.blocks.push(blocks[i]);\n    } else {\n      blockGroups.push(lastBlock = {\n        blocks: [blocks[i]],\n        length: blocks[i].length,\n        offset: blocks[i].offset\n      });\n    }\n    lastBlockEnd = lastBlock.offset + lastBlock.length;\n  }\n  return blockGroups;\n}\nfunction checkAbortSignal(signal) {\n  if (!signal)\n    return;\n  if (signal.aborted) {\n    if (typeof DOMException !== \"undefined\") {\n      throw new DOMException(\"aborted\", \"AbortError\");\n    } else {\n      var e = new AbortError(\"aborted\");\n      e.code = \"ERR_ABORTED\";\n      throw e;\n    }\n  }\n}\nfunction abortBreakPoint(_x) {\n  return _abortBreakPoint.apply(this, arguments);\n}\nfunction _abortBreakPoint() {\n  _abortBreakPoint = (0, _asyncToGenerator2$4.default)(/* @__PURE__ */ _regenerator$4.default.mark(function _callee(signal) {\n    return _regenerator$4.default.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return Promise.resolve();\n          case 2:\n            checkAbortSignal(signal);\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _abortBreakPoint.apply(this, arguments);\n}\nvar _interopRequireDefault$3 = interopRequireDefault.exports;\nObject.defineProperty(blockView, \"__esModule\", {\n  value: true\n});\nblockView.BlockView = void 0;\nvar _regenerator$3 = _interopRequireDefault$3(regenerator);\nvar _asyncToGenerator2$3 = _interopRequireDefault$3(asyncToGenerator.exports);\nvar _classCallCheck2$3 = _interopRequireDefault$3(classCallCheck.exports);\nvar _createClass2$3 = _interopRequireDefault$3(createClass.exports);\nvar _defineProperty2$2 = _interopRequireDefault$3(defineProperty.exports);\nvar _binaryParser$2 = binary_parser;\nvar _abortablePromiseCache$2 = _interopRequireDefault$3(dist);\nvar _zlib = _interopRequireDefault$3(require$$8);\nvar _quickLru$2 = _interopRequireDefault$3(require$$9);\nvar _range = _interopRequireDefault$3(range$1);\nvar _util = util$6;\nfunction ownKeys$2(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly)\n      symbols = symbols.filter(function(sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread$2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys$2(Object(source), true).forEach(function(key) {\n        (0, _defineProperty2$2.default)(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$2(Object(source)).forEach(function(key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\nvar BIG_WIG_TYPE_GRAPH = 1;\nvar BIG_WIG_TYPE_VSTEP = 2;\nvar BIG_WIG_TYPE_FSTEP = 3;\nfunction getParsers$1(isBigEndian) {\n  var _choices;\n  var le = isBigEndian ? \"big\" : \"little\";\n  var summaryParser = new _binaryParser$2.Parser().endianess(le).uint32(\"chromId\").uint32(\"start\").uint32(\"end\").uint32(\"validCnt\").float(\"minScore\").float(\"maxScore\").float(\"sumData\").float(\"sumSqData\");\n  var leafParser = new _binaryParser$2.Parser().endianess(le).uint8(\"isLeaf\").skip(1).uint16(\"cnt\").choice({\n    tag: \"isLeaf\",\n    choices: {\n      1: new _binaryParser$2.Parser().array(\"blocksToFetch\", {\n        length: \"cnt\",\n        type: new _binaryParser$2.Parser().uint32(\"startChrom\").uint32(\"startBase\").uint32(\"endChrom\").uint32(\"endBase\").uint64(\"blockOffset\").uint64(\"blockSize\")\n      }),\n      0: new _binaryParser$2.Parser().array(\"recurOffsets\", {\n        length: \"cnt\",\n        type: new _binaryParser$2.Parser().uint32(\"startChrom\").uint32(\"startBase\").uint32(\"endChrom\").uint32(\"endBase\").uint64(\"blockOffset\")\n      })\n    }\n  });\n  var bigBedParser = new _binaryParser$2.Parser().endianess(le).uint32(\"chromId\").int32(\"start\").int32(\"end\").string(\"rest\", {\n    zeroTerminated: true\n  });\n  var bigWigParser = new _binaryParser$2.Parser().endianess(le).skip(4).int32(\"blockStart\").skip(4).uint32(\"itemStep\").uint32(\"itemSpan\").uint8(\"blockType\").skip(1).uint16(\"itemCount\").choice({\n    tag: \"blockType\",\n    choices: (_choices = {}, (0, _defineProperty2$2.default)(_choices, BIG_WIG_TYPE_FSTEP, new _binaryParser$2.Parser().array(\"items\", {\n      length: \"itemCount\",\n      type: new _binaryParser$2.Parser().float(\"score\")\n    })), (0, _defineProperty2$2.default)(_choices, BIG_WIG_TYPE_VSTEP, new _binaryParser$2.Parser().array(\"items\", {\n      length: \"itemCount\",\n      type: new _binaryParser$2.Parser().int32(\"start\").float(\"score\")\n    })), (0, _defineProperty2$2.default)(_choices, BIG_WIG_TYPE_GRAPH, new _binaryParser$2.Parser().array(\"items\", {\n      length: \"itemCount\",\n      type: new _binaryParser$2.Parser().int32(\"start\").int32(\"end\").float(\"score\")\n    })), _choices)\n  });\n  return {\n    bigWigParser,\n    bigBedParser,\n    summaryParser,\n    leafParser\n  };\n}\nvar BlockView = /* @__PURE__ */ function() {\n  function BlockView2(bbi2, refsByName, cirTreeOffset, cirTreeLength, isBigEndian, isCompressed, blockType) {\n    var _this = this;\n    (0, _classCallCheck2$3.default)(this, BlockView2);\n    (0, _defineProperty2$2.default)(this, \"cirTreeOffset\", void 0);\n    (0, _defineProperty2$2.default)(this, \"cirTreeLength\", void 0);\n    (0, _defineProperty2$2.default)(this, \"bbi\", void 0);\n    (0, _defineProperty2$2.default)(this, \"isCompressed\", void 0);\n    (0, _defineProperty2$2.default)(this, \"isBigEndian\", void 0);\n    (0, _defineProperty2$2.default)(this, \"refsByName\", void 0);\n    (0, _defineProperty2$2.default)(this, \"blockType\", void 0);\n    (0, _defineProperty2$2.default)(this, \"cirTreePromise\", void 0);\n    (0, _defineProperty2$2.default)(this, \"featureCache\", new _abortablePromiseCache$2.default({\n      cache: new _quickLru$2.default({\n        maxSize: 1e3\n      }),\n      fill: function() {\n        var _fill = (0, _asyncToGenerator2$3.default)(/* @__PURE__ */ _regenerator$3.default.mark(function _callee(requestData, signal) {\n          var length, offset, _yield$_this$bbi$read, buffer2;\n          return _regenerator$3.default.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  length = requestData.length, offset = requestData.offset;\n                  _context.next = 3;\n                  return _this.bbi.read(Buffer.alloc(length), 0, length, offset, {\n                    signal\n                  });\n                case 3:\n                  _yield$_this$bbi$read = _context.sent;\n                  buffer2 = _yield$_this$bbi$read.buffer;\n                  return _context.abrupt(\"return\", buffer2);\n                case 6:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n        function fill(_x, _x2) {\n          return _fill.apply(this, arguments);\n        }\n        return fill;\n      }()\n    }));\n    (0, _defineProperty2$2.default)(this, \"leafParser\", void 0);\n    (0, _defineProperty2$2.default)(this, \"bigWigParser\", void 0);\n    (0, _defineProperty2$2.default)(this, \"bigBedParser\", void 0);\n    (0, _defineProperty2$2.default)(this, \"summaryParser\", void 0);\n    if (!(cirTreeOffset >= 0))\n      throw new Error(\"invalid cirTreeOffset!\");\n    if (!(cirTreeLength > 0))\n      throw new Error(\"invalid cirTreeLength!\");\n    this.cirTreeOffset = cirTreeOffset;\n    this.cirTreeLength = cirTreeLength;\n    this.isCompressed = isCompressed;\n    this.refsByName = refsByName;\n    this.isBigEndian = isBigEndian;\n    this.bbi = bbi2;\n    this.blockType = blockType;\n    Object.assign(this, getParsers$1(isBigEndian));\n  }\n  (0, _createClass2$3.default)(BlockView2, [{\n    key: \"readWigData\",\n    value: function() {\n      var _readWigData = (0, _asyncToGenerator2$3.default)(/* @__PURE__ */ _regenerator$3.default.mark(function _callee3(chrName, start, end, observer, opts) {\n        var _this2 = this;\n        var refsByName, bbi2, cirTreeOffset, isBigEndian, signal, chrId, request, _yield$this$cirTreePr, buffer2, cirBlockSize, blocksToFetch, outstanding, cirFobRecur2, filterFeats, cirFobStartFetch, cirFobRecur;\n        return _regenerator$3.default.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                refsByName = this.refsByName, bbi2 = this.bbi, cirTreeOffset = this.cirTreeOffset, isBigEndian = this.isBigEndian;\n                signal = opts.signal;\n                chrId = refsByName[chrName];\n                if (chrId === void 0) {\n                  observer.complete();\n                }\n                request = {\n                  chrId,\n                  start,\n                  end\n                };\n                if (!this.cirTreePromise) {\n                  this.cirTreePromise = bbi2.read(Buffer.alloc(48), 0, 48, cirTreeOffset, {\n                    signal\n                  });\n                }\n                _context3.next = 9;\n                return this.cirTreePromise;\n              case 9:\n                _yield$this$cirTreePr = _context3.sent;\n                buffer2 = _yield$this$cirTreePr.buffer;\n                cirBlockSize = isBigEndian ? buffer2.readUInt32BE(4) : buffer2.readUInt32LE(4);\n                blocksToFetch = [];\n                outstanding = 0;\n                filterFeats = function filterFeats2(b) {\n                  return (b.startChrom < chrId || b.startChrom === chrId && b.startBase <= end) && (b.endChrom > chrId || b.endChrom === chrId && b.endBase >= start);\n                };\n                cirFobStartFetch = /* @__PURE__ */ function() {\n                  var _ref = (0, _asyncToGenerator2$3.default)(/* @__PURE__ */ _regenerator$3.default.mark(function _callee2(off, fr, level) {\n                    var length, offset, resultBuffer, i;\n                    return _regenerator$3.default.wrap(function _callee2$(_context2) {\n                      while (1) {\n                        switch (_context2.prev = _context2.next) {\n                          case 0:\n                            _context2.prev = 0;\n                            length = fr.max() - fr.min();\n                            offset = fr.min();\n                            _context2.next = 5;\n                            return _this2.featureCache.get(\"\".concat(length, \"_\").concat(offset), {\n                              length,\n                              offset\n                            }, signal);\n                          case 5:\n                            resultBuffer = _context2.sent;\n                            for (i = 0; i < off.length; i += 1) {\n                              if (fr.contains(off[i])) {\n                                cirFobRecur2(resultBuffer, off[i] - offset, level, observer, opts);\n                                outstanding -= 1;\n                                if (outstanding === 0) {\n                                  _this2.readFeatures(observer, blocksToFetch, _objectSpread$2(_objectSpread$2({}, opts), {}, {\n                                    request\n                                  }));\n                                }\n                              }\n                            }\n                            _context2.next = 12;\n                            break;\n                          case 9:\n                            _context2.prev = 9;\n                            _context2.t0 = _context2[\"catch\"](0);\n                            observer.error(_context2.t0);\n                          case 12:\n                          case \"end\":\n                            return _context2.stop();\n                        }\n                      }\n                    }, _callee2, null, [[0, 9]]);\n                  }));\n                  return function cirFobStartFetch2(_x8, _x9, _x10) {\n                    return _ref.apply(this, arguments);\n                  };\n                }();\n                cirFobRecur = function cirFobRecur3(offset, level) {\n                  try {\n                    outstanding += offset.length;\n                    var maxCirBlockSpan = 4 + cirBlockSize * 32;\n                    var spans = new _range.default(offset[0], offset[0] + maxCirBlockSpan);\n                    for (var i = 1; i < offset.length; i += 1) {\n                      var blockSpan = new _range.default(offset[i], offset[i] + maxCirBlockSpan);\n                      spans = spans.union(blockSpan);\n                    }\n                    spans.getRanges().map(function(fr) {\n                      return cirFobStartFetch(offset, fr, level);\n                    });\n                  } catch (e) {\n                    observer.error(e);\n                  }\n                };\n                cirFobRecur2 = function cirFobRecur22(cirBlockData, offset, level) {\n                  try {\n                    var data2 = cirBlockData.slice(offset);\n                    var p = _this2.leafParser.parse(data2).result;\n                    if (p.blocksToFetch) {\n                      blocksToFetch = blocksToFetch.concat(p.blocksToFetch.filter(filterFeats).map(function(l) {\n                        return {\n                          offset: l.blockOffset,\n                          length: l.blockSize\n                        };\n                      }));\n                    }\n                    if (p.recurOffsets) {\n                      var recurOffsets = p.recurOffsets.filter(filterFeats).map(function(l) {\n                        return l.blockOffset;\n                      });\n                      if (recurOffsets.length > 0) {\n                        cirFobRecur(recurOffsets, level + 1);\n                      }\n                    }\n                  } catch (e) {\n                    observer.error(e);\n                  }\n                };\n                return _context3.abrupt(\"return\", cirFobRecur([cirTreeOffset + 48], 1));\n              case 21:\n                _context3.prev = 21;\n                _context3.t0 = _context3[\"catch\"](0);\n                observer.error(_context3.t0);\n              case 24:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[0, 21]]);\n      }));\n      function readWigData(_x3, _x4, _x5, _x6, _x7) {\n        return _readWigData.apply(this, arguments);\n      }\n      return readWigData;\n    }()\n  }, {\n    key: \"parseSummaryBlock\",\n    value: function parseSummaryBlock(data2, startOffset, request) {\n      var features = [];\n      var currOffset = startOffset;\n      while (currOffset < data2.byteLength) {\n        var res = this.summaryParser.parse(data2.slice(currOffset));\n        features.push(res.result);\n        currOffset += res.offset;\n      }\n      var items2 = features;\n      if (request)\n        items2 = items2.filter(function(elt) {\n          return elt.chromId === request.chrId;\n        });\n      items2 = items2.map(function(elt) {\n        return {\n          start: elt.start,\n          end: elt.end,\n          maxScore: elt.maxScore,\n          minScore: elt.minScore,\n          score: elt.sumData / (elt.validCnt || 1),\n          summary: true\n        };\n      });\n      return request ? items2.filter(function(f2) {\n        return BlockView2.coordFilter(f2, request);\n      }) : items2;\n    }\n  }, {\n    key: \"parseBigBedBlock\",\n    value: function parseBigBedBlock(data2, startOffset, offset, request) {\n      var items2 = [];\n      var currOffset = startOffset;\n      while (currOffset < data2.byteLength) {\n        var res = this.bigBedParser.parse(data2.slice(currOffset));\n        res.result.uniqueId = \"bb-\".concat(offset + currOffset);\n        items2.push(res.result);\n        currOffset += res.offset;\n      }\n      return request ? items2.filter(function(f2) {\n        return BlockView2.coordFilter(f2, request);\n      }) : items2;\n    }\n  }, {\n    key: \"parseBigWigBlock\",\n    value: function parseBigWigBlock(bytes, startOffset, request) {\n      var data2 = bytes.slice(startOffset);\n      var results = this.bigWigParser.parse(data2).result;\n      var items2 = results.items, itemSpan = results.itemSpan, itemStep = results.itemStep, blockStart = results.blockStart, blockType = results.blockType;\n      if (blockType === BIG_WIG_TYPE_FSTEP) {\n        for (var i = 0; i < items2.length; i++) {\n          items2[i].start = blockStart + i * itemStep;\n          items2[i].end = blockStart + i * itemStep + itemSpan;\n        }\n      } else if (blockType === BIG_WIG_TYPE_VSTEP) {\n        for (var _i = 0; _i < items2.length; _i++) {\n          items2[_i].end = items2[_i].start + itemSpan;\n        }\n      }\n      return request ? items2.filter(function(f2) {\n        return BlockView2.coordFilter(f2, request);\n      }) : items2;\n    }\n  }, {\n    key: \"readFeatures\",\n    value: function() {\n      var _readFeatures = (0, _asyncToGenerator2$3.default)(/* @__PURE__ */ _regenerator$3.default.mark(function _callee5(observer, blocks) {\n        var _this3 = this;\n        var opts, blockType, isCompressed, signal, request, blockGroupsToFetch, _args5 = arguments;\n        return _regenerator$3.default.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                opts = _args5.length > 2 && _args5[2] !== void 0 ? _args5[2] : {};\n                _context5.prev = 1;\n                blockType = this.blockType, isCompressed = this.isCompressed;\n                signal = opts.signal, request = opts.request;\n                blockGroupsToFetch = (0, _util.groupBlocks)(blocks);\n                (0, _util.checkAbortSignal)(signal);\n                _context5.next = 8;\n                return Promise.all(blockGroupsToFetch.map(/* @__PURE__ */ function() {\n                  var _ref2 = (0, _asyncToGenerator2$3.default)(/* @__PURE__ */ _regenerator$3.default.mark(function _callee4(blockGroup) {\n                    var length, offset, data2;\n                    return _regenerator$3.default.wrap(function _callee4$(_context4) {\n                      while (1) {\n                        switch (_context4.prev = _context4.next) {\n                          case 0:\n                            (0, _util.checkAbortSignal)(signal);\n                            length = blockGroup.length, offset = blockGroup.offset;\n                            _context4.next = 4;\n                            return _this3.featureCache.get(\"\".concat(length, \"_\").concat(offset), blockGroup, signal);\n                          case 4:\n                            data2 = _context4.sent;\n                            blockGroup.blocks.forEach(function(block) {\n                              (0, _util.checkAbortSignal)(signal);\n                              var blockOffset = block.offset - blockGroup.offset;\n                              var resultData = data2;\n                              if (isCompressed) {\n                                resultData = _zlib.default.inflateSync(data2.slice(blockOffset));\n                                blockOffset = 0;\n                              }\n                              (0, _util.checkAbortSignal)(signal);\n                              switch (blockType) {\n                                case \"summary\":\n                                  observer.next(_this3.parseSummaryBlock(resultData, blockOffset, request));\n                                  break;\n                                case \"bigwig\":\n                                  observer.next(_this3.parseBigWigBlock(resultData, blockOffset, request));\n                                  break;\n                                case \"bigbed\":\n                                  observer.next(_this3.parseBigBedBlock(resultData, blockOffset, block.offset * (1 << 8), request));\n                                  break;\n                                default:\n                                  console.warn(\"Don't know what to do with \".concat(blockType));\n                              }\n                            });\n                          case 6:\n                          case \"end\":\n                            return _context4.stop();\n                        }\n                      }\n                    }, _callee4);\n                  }));\n                  return function(_x13) {\n                    return _ref2.apply(this, arguments);\n                  };\n                }()));\n              case 8:\n                observer.complete();\n                _context5.next = 14;\n                break;\n              case 11:\n                _context5.prev = 11;\n                _context5.t0 = _context5[\"catch\"](1);\n                observer.error(_context5.t0);\n              case 14:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[1, 11]]);\n      }));\n      function readFeatures(_x11, _x12) {\n        return _readFeatures.apply(this, arguments);\n      }\n      return readFeatures;\n    }()\n  }], [{\n    key: \"coordFilter\",\n    value: function coordFilter(f2, range2) {\n      return f2.start < range2.end && f2.end >= range2.start;\n    }\n  }]);\n  return BlockView2;\n}();\nblockView.BlockView = BlockView;\nvar bbi = {};\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {\n    d2.__proto__ = b2;\n  } || function(d2, b2) {\n    for (var p in b2)\n      if (b2.hasOwnProperty(p))\n        d2[p] = b2[p];\n  };\n  return extendStatics(d, b);\n};\nfunction __extends(d, b) {\n  extendStatics(d, b);\n  function __() {\n    this.constructor = d;\n  }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\nfunction isFunction(x) {\n  return typeof x === \"function\";\n}\nvar _enable_super_gross_mode_that_will_cause_bad_things = false;\nvar config = {\n  Promise: void 0,\n  set useDeprecatedSynchronousErrorHandling(value) {\n    if (value) {\n      var error = /* @__PURE__ */ new Error();\n      /* @__PURE__ */ console.warn(\"DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \\n\" + error.stack);\n    }\n    _enable_super_gross_mode_that_will_cause_bad_things = value;\n  },\n  get useDeprecatedSynchronousErrorHandling() {\n    return _enable_super_gross_mode_that_will_cause_bad_things;\n  }\n};\nfunction hostReportError(err) {\n  setTimeout(function() {\n    throw err;\n  }, 0);\n}\nvar empty$1 = {\n  closed: true,\n  next: function(value) {\n  },\n  error: function(err) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n      throw err;\n    } else {\n      hostReportError(err);\n    }\n  },\n  complete: function() {\n  }\n};\nvar isArray = /* @__PURE__ */ function() {\n  return Array.isArray || function(x) {\n    return x && typeof x.length === \"number\";\n  };\n}();\nfunction isObject(x) {\n  return x !== null && typeof x === \"object\";\n}\nvar UnsubscriptionErrorImpl = /* @__PURE__ */ function() {\n  function UnsubscriptionErrorImpl2(errors) {\n    Error.call(this);\n    this.message = errors ? errors.length + \" errors occurred during unsubscription:\\n\" + errors.map(function(err, i) {\n      return i + 1 + \") \" + err.toString();\n    }).join(\"\\n  \") : \"\";\n    this.name = \"UnsubscriptionError\";\n    this.errors = errors;\n    return this;\n  }\n  UnsubscriptionErrorImpl2.prototype = /* @__PURE__ */ Object.create(Error.prototype);\n  return UnsubscriptionErrorImpl2;\n}();\nvar UnsubscriptionError = UnsubscriptionErrorImpl;\nvar Subscription = /* @__PURE__ */ function() {\n  function Subscription2(unsubscribe2) {\n    this.closed = false;\n    this._parentOrParents = null;\n    this._subscriptions = null;\n    if (unsubscribe2) {\n      this._ctorUnsubscribe = true;\n      this._unsubscribe = unsubscribe2;\n    }\n  }\n  Subscription2.prototype.unsubscribe = function() {\n    var errors;\n    if (this.closed) {\n      return;\n    }\n    var _a = this, _parentOrParents = _a._parentOrParents, _ctorUnsubscribe = _a._ctorUnsubscribe, _unsubscribe = _a._unsubscribe, _subscriptions = _a._subscriptions;\n    this.closed = true;\n    this._parentOrParents = null;\n    this._subscriptions = null;\n    if (_parentOrParents instanceof Subscription2) {\n      _parentOrParents.remove(this);\n    } else if (_parentOrParents !== null) {\n      for (var index = 0; index < _parentOrParents.length; ++index) {\n        var parent_1 = _parentOrParents[index];\n        parent_1.remove(this);\n      }\n    }\n    if (isFunction(_unsubscribe)) {\n      if (_ctorUnsubscribe) {\n        this._unsubscribe = void 0;\n      }\n      try {\n        _unsubscribe.call(this);\n      } catch (e) {\n        errors = e instanceof UnsubscriptionError ? flattenUnsubscriptionErrors(e.errors) : [e];\n      }\n    }\n    if (isArray(_subscriptions)) {\n      var index = -1;\n      var len = _subscriptions.length;\n      while (++index < len) {\n        var sub = _subscriptions[index];\n        if (isObject(sub)) {\n          try {\n            sub.unsubscribe();\n          } catch (e) {\n            errors = errors || [];\n            if (e instanceof UnsubscriptionError) {\n              errors = errors.concat(flattenUnsubscriptionErrors(e.errors));\n            } else {\n              errors.push(e);\n            }\n          }\n        }\n      }\n    }\n    if (errors) {\n      throw new UnsubscriptionError(errors);\n    }\n  };\n  Subscription2.prototype.add = function(teardown) {\n    var subscription = teardown;\n    if (!teardown) {\n      return Subscription2.EMPTY;\n    }\n    switch (typeof teardown) {\n      case \"function\":\n        subscription = new Subscription2(teardown);\n      case \"object\":\n        if (subscription === this || subscription.closed || typeof subscription.unsubscribe !== \"function\") {\n          return subscription;\n        } else if (this.closed) {\n          subscription.unsubscribe();\n          return subscription;\n        } else if (!(subscription instanceof Subscription2)) {\n          var tmp = subscription;\n          subscription = new Subscription2();\n          subscription._subscriptions = [tmp];\n        }\n        break;\n      default: {\n        throw new Error(\"unrecognized teardown \" + teardown + \" added to Subscription.\");\n      }\n    }\n    var _parentOrParents = subscription._parentOrParents;\n    if (_parentOrParents === null) {\n      subscription._parentOrParents = this;\n    } else if (_parentOrParents instanceof Subscription2) {\n      if (_parentOrParents === this) {\n        return subscription;\n      }\n      subscription._parentOrParents = [_parentOrParents, this];\n    } else if (_parentOrParents.indexOf(this) === -1) {\n      _parentOrParents.push(this);\n    } else {\n      return subscription;\n    }\n    var subscriptions = this._subscriptions;\n    if (subscriptions === null) {\n      this._subscriptions = [subscription];\n    } else {\n      subscriptions.push(subscription);\n    }\n    return subscription;\n  };\n  Subscription2.prototype.remove = function(subscription) {\n    var subscriptions = this._subscriptions;\n    if (subscriptions) {\n      var subscriptionIndex = subscriptions.indexOf(subscription);\n      if (subscriptionIndex !== -1) {\n        subscriptions.splice(subscriptionIndex, 1);\n      }\n    }\n  };\n  Subscription2.EMPTY = function(empty2) {\n    empty2.closed = true;\n    return empty2;\n  }(new Subscription2());\n  return Subscription2;\n}();\nfunction flattenUnsubscriptionErrors(errors) {\n  return errors.reduce(function(errs, err) {\n    return errs.concat(err instanceof UnsubscriptionError ? err.errors : err);\n  }, []);\n}\nvar rxSubscriber = /* @__PURE__ */ function() {\n  return typeof Symbol === \"function\" ? /* @__PURE__ */ Symbol(\"rxSubscriber\") : \"@@rxSubscriber_\" + /* @__PURE__ */ Math.random();\n}();\nvar Subscriber = /* @__PURE__ */ function(_super) {\n  __extends(Subscriber2, _super);\n  function Subscriber2(destinationOrNext, error, complete) {\n    var _this = _super.call(this) || this;\n    _this.syncErrorValue = null;\n    _this.syncErrorThrown = false;\n    _this.syncErrorThrowable = false;\n    _this.isStopped = false;\n    switch (arguments.length) {\n      case 0:\n        _this.destination = empty$1;\n        break;\n      case 1:\n        if (!destinationOrNext) {\n          _this.destination = empty$1;\n          break;\n        }\n        if (typeof destinationOrNext === \"object\") {\n          if (destinationOrNext instanceof Subscriber2) {\n            _this.syncErrorThrowable = destinationOrNext.syncErrorThrowable;\n            _this.destination = destinationOrNext;\n            destinationOrNext.add(_this);\n          } else {\n            _this.syncErrorThrowable = true;\n            _this.destination = new SafeSubscriber(_this, destinationOrNext);\n          }\n          break;\n        }\n      default:\n        _this.syncErrorThrowable = true;\n        _this.destination = new SafeSubscriber(_this, destinationOrNext, error, complete);\n        break;\n    }\n    return _this;\n  }\n  Subscriber2.prototype[rxSubscriber] = function() {\n    return this;\n  };\n  Subscriber2.create = function(next, error, complete) {\n    var subscriber = new Subscriber2(next, error, complete);\n    subscriber.syncErrorThrowable = false;\n    return subscriber;\n  };\n  Subscriber2.prototype.next = function(value) {\n    if (!this.isStopped) {\n      this._next(value);\n    }\n  };\n  Subscriber2.prototype.error = function(err) {\n    if (!this.isStopped) {\n      this.isStopped = true;\n      this._error(err);\n    }\n  };\n  Subscriber2.prototype.complete = function() {\n    if (!this.isStopped) {\n      this.isStopped = true;\n      this._complete();\n    }\n  };\n  Subscriber2.prototype.unsubscribe = function() {\n    if (this.closed) {\n      return;\n    }\n    this.isStopped = true;\n    _super.prototype.unsubscribe.call(this);\n  };\n  Subscriber2.prototype._next = function(value) {\n    this.destination.next(value);\n  };\n  Subscriber2.prototype._error = function(err) {\n    this.destination.error(err);\n    this.unsubscribe();\n  };\n  Subscriber2.prototype._complete = function() {\n    this.destination.complete();\n    this.unsubscribe();\n  };\n  Subscriber2.prototype._unsubscribeAndRecycle = function() {\n    var _parentOrParents = this._parentOrParents;\n    this._parentOrParents = null;\n    this.unsubscribe();\n    this.closed = false;\n    this.isStopped = false;\n    this._parentOrParents = _parentOrParents;\n    return this;\n  };\n  return Subscriber2;\n}(Subscription);\nvar SafeSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(SafeSubscriber2, _super);\n  function SafeSubscriber2(_parentSubscriber, observerOrNext, error, complete) {\n    var _this = _super.call(this) || this;\n    _this._parentSubscriber = _parentSubscriber;\n    var next;\n    var context2 = _this;\n    if (isFunction(observerOrNext)) {\n      next = observerOrNext;\n    } else if (observerOrNext) {\n      next = observerOrNext.next;\n      error = observerOrNext.error;\n      complete = observerOrNext.complete;\n      if (observerOrNext !== empty$1) {\n        context2 = Object.create(observerOrNext);\n        if (isFunction(context2.unsubscribe)) {\n          _this.add(context2.unsubscribe.bind(context2));\n        }\n        context2.unsubscribe = _this.unsubscribe.bind(_this);\n      }\n    }\n    _this._context = context2;\n    _this._next = next;\n    _this._error = error;\n    _this._complete = complete;\n    return _this;\n  }\n  SafeSubscriber2.prototype.next = function(value) {\n    if (!this.isStopped && this._next) {\n      var _parentSubscriber = this._parentSubscriber;\n      if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n        this.__tryOrUnsub(this._next, value);\n      } else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {\n        this.unsubscribe();\n      }\n    }\n  };\n  SafeSubscriber2.prototype.error = function(err) {\n    if (!this.isStopped) {\n      var _parentSubscriber = this._parentSubscriber;\n      var useDeprecatedSynchronousErrorHandling = config.useDeprecatedSynchronousErrorHandling;\n      if (this._error) {\n        if (!useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n          this.__tryOrUnsub(this._error, err);\n          this.unsubscribe();\n        } else {\n          this.__tryOrSetError(_parentSubscriber, this._error, err);\n          this.unsubscribe();\n        }\n      } else if (!_parentSubscriber.syncErrorThrowable) {\n        this.unsubscribe();\n        if (useDeprecatedSynchronousErrorHandling) {\n          throw err;\n        }\n        hostReportError(err);\n      } else {\n        if (useDeprecatedSynchronousErrorHandling) {\n          _parentSubscriber.syncErrorValue = err;\n          _parentSubscriber.syncErrorThrown = true;\n        } else {\n          hostReportError(err);\n        }\n        this.unsubscribe();\n      }\n    }\n  };\n  SafeSubscriber2.prototype.complete = function() {\n    var _this = this;\n    if (!this.isStopped) {\n      var _parentSubscriber = this._parentSubscriber;\n      if (this._complete) {\n        var wrappedComplete = function() {\n          return _this._complete.call(_this._context);\n        };\n        if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n          this.__tryOrUnsub(wrappedComplete);\n          this.unsubscribe();\n        } else {\n          this.__tryOrSetError(_parentSubscriber, wrappedComplete);\n          this.unsubscribe();\n        }\n      } else {\n        this.unsubscribe();\n      }\n    }\n  };\n  SafeSubscriber2.prototype.__tryOrUnsub = function(fn, value) {\n    try {\n      fn.call(this._context, value);\n    } catch (err) {\n      this.unsubscribe();\n      if (config.useDeprecatedSynchronousErrorHandling) {\n        throw err;\n      } else {\n        hostReportError(err);\n      }\n    }\n  };\n  SafeSubscriber2.prototype.__tryOrSetError = function(parent, fn, value) {\n    if (!config.useDeprecatedSynchronousErrorHandling) {\n      throw new Error(\"bad call\");\n    }\n    try {\n      fn.call(this._context, value);\n    } catch (err) {\n      if (config.useDeprecatedSynchronousErrorHandling) {\n        parent.syncErrorValue = err;\n        parent.syncErrorThrown = true;\n        return true;\n      } else {\n        hostReportError(err);\n        return true;\n      }\n    }\n    return false;\n  };\n  SafeSubscriber2.prototype._unsubscribe = function() {\n    var _parentSubscriber = this._parentSubscriber;\n    this._context = null;\n    this._parentSubscriber = null;\n    _parentSubscriber.unsubscribe();\n  };\n  return SafeSubscriber2;\n}(Subscriber);\nfunction canReportError(observer) {\n  while (observer) {\n    var _a = observer, closed_1 = _a.closed, destination = _a.destination, isStopped = _a.isStopped;\n    if (closed_1 || isStopped) {\n      return false;\n    } else if (destination && destination instanceof Subscriber) {\n      observer = destination;\n    } else {\n      observer = null;\n    }\n  }\n  return true;\n}\nfunction toSubscriber(nextOrObserver, error, complete) {\n  if (nextOrObserver) {\n    if (nextOrObserver instanceof Subscriber) {\n      return nextOrObserver;\n    }\n    if (nextOrObserver[rxSubscriber]) {\n      return nextOrObserver[rxSubscriber]();\n    }\n  }\n  if (!nextOrObserver && !error && !complete) {\n    return new Subscriber(empty$1);\n  }\n  return new Subscriber(nextOrObserver, error, complete);\n}\nvar observable = /* @__PURE__ */ function() {\n  return typeof Symbol === \"function\" && Symbol.observable || \"@@observable\";\n}();\nfunction identity(x) {\n  return x;\n}\nfunction pipe() {\n  var fns = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    fns[_i] = arguments[_i];\n  }\n  return pipeFromArray(fns);\n}\nfunction pipeFromArray(fns) {\n  if (fns.length === 0) {\n    return identity;\n  }\n  if (fns.length === 1) {\n    return fns[0];\n  }\n  return function piped(input) {\n    return fns.reduce(function(prev, fn) {\n      return fn(prev);\n    }, input);\n  };\n}\nvar Observable = /* @__PURE__ */ function() {\n  function Observable2(subscribe2) {\n    this._isScalar = false;\n    if (subscribe2) {\n      this._subscribe = subscribe2;\n    }\n  }\n  Observable2.prototype.lift = function(operator) {\n    var observable2 = new Observable2();\n    observable2.source = this;\n    observable2.operator = operator;\n    return observable2;\n  };\n  Observable2.prototype.subscribe = function(observerOrNext, error, complete) {\n    var operator = this.operator;\n    var sink = toSubscriber(observerOrNext, error, complete);\n    if (operator) {\n      sink.add(operator.call(sink, this.source));\n    } else {\n      sink.add(this.source || config.useDeprecatedSynchronousErrorHandling && !sink.syncErrorThrowable ? this._subscribe(sink) : this._trySubscribe(sink));\n    }\n    if (config.useDeprecatedSynchronousErrorHandling) {\n      if (sink.syncErrorThrowable) {\n        sink.syncErrorThrowable = false;\n        if (sink.syncErrorThrown) {\n          throw sink.syncErrorValue;\n        }\n      }\n    }\n    return sink;\n  };\n  Observable2.prototype._trySubscribe = function(sink) {\n    try {\n      return this._subscribe(sink);\n    } catch (err) {\n      if (config.useDeprecatedSynchronousErrorHandling) {\n        sink.syncErrorThrown = true;\n        sink.syncErrorValue = err;\n      }\n      if (canReportError(sink)) {\n        sink.error(err);\n      } else {\n        console.warn(err);\n      }\n    }\n  };\n  Observable2.prototype.forEach = function(next, promiseCtor) {\n    var _this = this;\n    promiseCtor = getPromiseCtor(promiseCtor);\n    return new promiseCtor(function(resolve2, reject) {\n      var subscription;\n      subscription = _this.subscribe(function(value) {\n        try {\n          next(value);\n        } catch (err) {\n          reject(err);\n          if (subscription) {\n            subscription.unsubscribe();\n          }\n        }\n      }, reject, resolve2);\n    });\n  };\n  Observable2.prototype._subscribe = function(subscriber) {\n    var source = this.source;\n    return source && source.subscribe(subscriber);\n  };\n  Observable2.prototype[observable] = function() {\n    return this;\n  };\n  Observable2.prototype.pipe = function() {\n    var operations = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      operations[_i] = arguments[_i];\n    }\n    if (operations.length === 0) {\n      return this;\n    }\n    return pipeFromArray(operations)(this);\n  };\n  Observable2.prototype.toPromise = function(promiseCtor) {\n    var _this = this;\n    promiseCtor = getPromiseCtor(promiseCtor);\n    return new promiseCtor(function(resolve2, reject) {\n      var value;\n      _this.subscribe(function(x) {\n        return value = x;\n      }, function(err) {\n        return reject(err);\n      }, function() {\n        return resolve2(value);\n      });\n    });\n  };\n  Observable2.create = function(subscribe2) {\n    return new Observable2(subscribe2);\n  };\n  return Observable2;\n}();\nfunction getPromiseCtor(promiseCtor) {\n  if (!promiseCtor) {\n    promiseCtor = config.Promise || Promise;\n  }\n  if (!promiseCtor) {\n    throw new Error(\"no Promise impl found\");\n  }\n  return promiseCtor;\n}\nvar ObjectUnsubscribedErrorImpl = /* @__PURE__ */ function() {\n  function ObjectUnsubscribedErrorImpl2() {\n    Error.call(this);\n    this.message = \"object unsubscribed\";\n    this.name = \"ObjectUnsubscribedError\";\n    return this;\n  }\n  ObjectUnsubscribedErrorImpl2.prototype = /* @__PURE__ */ Object.create(Error.prototype);\n  return ObjectUnsubscribedErrorImpl2;\n}();\nvar ObjectUnsubscribedError = ObjectUnsubscribedErrorImpl;\nvar SubjectSubscription = /* @__PURE__ */ function(_super) {\n  __extends(SubjectSubscription2, _super);\n  function SubjectSubscription2(subject, subscriber) {\n    var _this = _super.call(this) || this;\n    _this.subject = subject;\n    _this.subscriber = subscriber;\n    _this.closed = false;\n    return _this;\n  }\n  SubjectSubscription2.prototype.unsubscribe = function() {\n    if (this.closed) {\n      return;\n    }\n    this.closed = true;\n    var subject = this.subject;\n    var observers = subject.observers;\n    this.subject = null;\n    if (!observers || observers.length === 0 || subject.isStopped || subject.closed) {\n      return;\n    }\n    var subscriberIndex = observers.indexOf(this.subscriber);\n    if (subscriberIndex !== -1) {\n      observers.splice(subscriberIndex, 1);\n    }\n  };\n  return SubjectSubscription2;\n}(Subscription);\nvar SubjectSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(SubjectSubscriber2, _super);\n  function SubjectSubscriber2(destination) {\n    var _this = _super.call(this, destination) || this;\n    _this.destination = destination;\n    return _this;\n  }\n  return SubjectSubscriber2;\n}(Subscriber);\nvar Subject = /* @__PURE__ */ function(_super) {\n  __extends(Subject2, _super);\n  function Subject2() {\n    var _this = _super.call(this) || this;\n    _this.observers = [];\n    _this.closed = false;\n    _this.isStopped = false;\n    _this.hasError = false;\n    _this.thrownError = null;\n    return _this;\n  }\n  Subject2.prototype[rxSubscriber] = function() {\n    return new SubjectSubscriber(this);\n  };\n  Subject2.prototype.lift = function(operator) {\n    var subject = new AnonymousSubject(this, this);\n    subject.operator = operator;\n    return subject;\n  };\n  Subject2.prototype.next = function(value) {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError();\n    }\n    if (!this.isStopped) {\n      var observers = this.observers;\n      var len = observers.length;\n      var copy2 = observers.slice();\n      for (var i = 0; i < len; i++) {\n        copy2[i].next(value);\n      }\n    }\n  };\n  Subject2.prototype.error = function(err) {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError();\n    }\n    this.hasError = true;\n    this.thrownError = err;\n    this.isStopped = true;\n    var observers = this.observers;\n    var len = observers.length;\n    var copy2 = observers.slice();\n    for (var i = 0; i < len; i++) {\n      copy2[i].error(err);\n    }\n    this.observers.length = 0;\n  };\n  Subject2.prototype.complete = function() {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError();\n    }\n    this.isStopped = true;\n    var observers = this.observers;\n    var len = observers.length;\n    var copy2 = observers.slice();\n    for (var i = 0; i < len; i++) {\n      copy2[i].complete();\n    }\n    this.observers.length = 0;\n  };\n  Subject2.prototype.unsubscribe = function() {\n    this.isStopped = true;\n    this.closed = true;\n    this.observers = null;\n  };\n  Subject2.prototype._trySubscribe = function(subscriber) {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError();\n    } else {\n      return _super.prototype._trySubscribe.call(this, subscriber);\n    }\n  };\n  Subject2.prototype._subscribe = function(subscriber) {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError();\n    } else if (this.hasError) {\n      subscriber.error(this.thrownError);\n      return Subscription.EMPTY;\n    } else if (this.isStopped) {\n      subscriber.complete();\n      return Subscription.EMPTY;\n    } else {\n      this.observers.push(subscriber);\n      return new SubjectSubscription(this, subscriber);\n    }\n  };\n  Subject2.prototype.asObservable = function() {\n    var observable2 = new Observable();\n    observable2.source = this;\n    return observable2;\n  };\n  Subject2.create = function(destination, source) {\n    return new AnonymousSubject(destination, source);\n  };\n  return Subject2;\n}(Observable);\nvar AnonymousSubject = /* @__PURE__ */ function(_super) {\n  __extends(AnonymousSubject2, _super);\n  function AnonymousSubject2(destination, source) {\n    var _this = _super.call(this) || this;\n    _this.destination = destination;\n    _this.source = source;\n    return _this;\n  }\n  AnonymousSubject2.prototype.next = function(value) {\n    var destination = this.destination;\n    if (destination && destination.next) {\n      destination.next(value);\n    }\n  };\n  AnonymousSubject2.prototype.error = function(err) {\n    var destination = this.destination;\n    if (destination && destination.error) {\n      this.destination.error(err);\n    }\n  };\n  AnonymousSubject2.prototype.complete = function() {\n    var destination = this.destination;\n    if (destination && destination.complete) {\n      this.destination.complete();\n    }\n  };\n  AnonymousSubject2.prototype._subscribe = function(subscriber) {\n    var source = this.source;\n    if (source) {\n      return this.source.subscribe(subscriber);\n    } else {\n      return Subscription.EMPTY;\n    }\n  };\n  return AnonymousSubject2;\n}(Subject);\nfunction refCount() {\n  return function refCountOperatorFunction(source) {\n    return source.lift(new RefCountOperator(source));\n  };\n}\nvar RefCountOperator = /* @__PURE__ */ function() {\n  function RefCountOperator2(connectable) {\n    this.connectable = connectable;\n  }\n  RefCountOperator2.prototype.call = function(subscriber, source) {\n    var connectable = this.connectable;\n    connectable._refCount++;\n    var refCounter = new RefCountSubscriber(subscriber, connectable);\n    var subscription = source.subscribe(refCounter);\n    if (!refCounter.closed) {\n      refCounter.connection = connectable.connect();\n    }\n    return subscription;\n  };\n  return RefCountOperator2;\n}();\nvar RefCountSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(RefCountSubscriber2, _super);\n  function RefCountSubscriber2(destination, connectable) {\n    var _this = _super.call(this, destination) || this;\n    _this.connectable = connectable;\n    return _this;\n  }\n  RefCountSubscriber2.prototype._unsubscribe = function() {\n    var connectable = this.connectable;\n    if (!connectable) {\n      this.connection = null;\n      return;\n    }\n    this.connectable = null;\n    var refCount2 = connectable._refCount;\n    if (refCount2 <= 0) {\n      this.connection = null;\n      return;\n    }\n    connectable._refCount = refCount2 - 1;\n    if (refCount2 > 1) {\n      this.connection = null;\n      return;\n    }\n    var connection = this.connection;\n    var sharedConnection = connectable._connection;\n    this.connection = null;\n    if (sharedConnection && (!connection || sharedConnection === connection)) {\n      sharedConnection.unsubscribe();\n    }\n  };\n  return RefCountSubscriber2;\n}(Subscriber);\nvar ConnectableObservable = /* @__PURE__ */ function(_super) {\n  __extends(ConnectableObservable2, _super);\n  function ConnectableObservable2(source, subjectFactory) {\n    var _this = _super.call(this) || this;\n    _this.source = source;\n    _this.subjectFactory = subjectFactory;\n    _this._refCount = 0;\n    _this._isComplete = false;\n    return _this;\n  }\n  ConnectableObservable2.prototype._subscribe = function(subscriber) {\n    return this.getSubject().subscribe(subscriber);\n  };\n  ConnectableObservable2.prototype.getSubject = function() {\n    var subject = this._subject;\n    if (!subject || subject.isStopped) {\n      this._subject = this.subjectFactory();\n    }\n    return this._subject;\n  };\n  ConnectableObservable2.prototype.connect = function() {\n    var connection = this._connection;\n    if (!connection) {\n      this._isComplete = false;\n      connection = this._connection = new Subscription();\n      connection.add(this.source.subscribe(new ConnectableSubscriber(this.getSubject(), this)));\n      if (connection.closed) {\n        this._connection = null;\n        connection = Subscription.EMPTY;\n      }\n    }\n    return connection;\n  };\n  ConnectableObservable2.prototype.refCount = function() {\n    return refCount()(this);\n  };\n  return ConnectableObservable2;\n}(Observable);\nvar connectableObservableDescriptor = /* @__PURE__ */ function() {\n  var connectableProto = ConnectableObservable.prototype;\n  return {\n    operator: { value: null },\n    _refCount: { value: 0, writable: true },\n    _subject: { value: null, writable: true },\n    _connection: { value: null, writable: true },\n    _subscribe: { value: connectableProto._subscribe },\n    _isComplete: { value: connectableProto._isComplete, writable: true },\n    getSubject: { value: connectableProto.getSubject },\n    connect: { value: connectableProto.connect },\n    refCount: { value: connectableProto.refCount }\n  };\n}();\nvar ConnectableSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(ConnectableSubscriber2, _super);\n  function ConnectableSubscriber2(destination, connectable) {\n    var _this = _super.call(this, destination) || this;\n    _this.connectable = connectable;\n    return _this;\n  }\n  ConnectableSubscriber2.prototype._error = function(err) {\n    this._unsubscribe();\n    _super.prototype._error.call(this, err);\n  };\n  ConnectableSubscriber2.prototype._complete = function() {\n    this.connectable._isComplete = true;\n    this._unsubscribe();\n    _super.prototype._complete.call(this);\n  };\n  ConnectableSubscriber2.prototype._unsubscribe = function() {\n    var connectable = this.connectable;\n    if (connectable) {\n      this.connectable = null;\n      var connection = connectable._connection;\n      connectable._refCount = 0;\n      connectable._subject = null;\n      connectable._connection = null;\n      if (connection) {\n        connection.unsubscribe();\n      }\n    }\n  };\n  return ConnectableSubscriber2;\n}(SubjectSubscriber);\nfunction groupBy(keySelector, elementSelector, durationSelector, subjectSelector) {\n  return function(source) {\n    return source.lift(new GroupByOperator(keySelector, elementSelector, durationSelector, subjectSelector));\n  };\n}\nvar GroupByOperator = /* @__PURE__ */ function() {\n  function GroupByOperator2(keySelector, elementSelector, durationSelector, subjectSelector) {\n    this.keySelector = keySelector;\n    this.elementSelector = elementSelector;\n    this.durationSelector = durationSelector;\n    this.subjectSelector = subjectSelector;\n  }\n  GroupByOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new GroupBySubscriber(subscriber, this.keySelector, this.elementSelector, this.durationSelector, this.subjectSelector));\n  };\n  return GroupByOperator2;\n}();\nvar GroupBySubscriber = /* @__PURE__ */ function(_super) {\n  __extends(GroupBySubscriber2, _super);\n  function GroupBySubscriber2(destination, keySelector, elementSelector, durationSelector, subjectSelector) {\n    var _this = _super.call(this, destination) || this;\n    _this.keySelector = keySelector;\n    _this.elementSelector = elementSelector;\n    _this.durationSelector = durationSelector;\n    _this.subjectSelector = subjectSelector;\n    _this.groups = null;\n    _this.attemptedToUnsubscribe = false;\n    _this.count = 0;\n    return _this;\n  }\n  GroupBySubscriber2.prototype._next = function(value) {\n    var key;\n    try {\n      key = this.keySelector(value);\n    } catch (err) {\n      this.error(err);\n      return;\n    }\n    this._group(value, key);\n  };\n  GroupBySubscriber2.prototype._group = function(value, key) {\n    var groups = this.groups;\n    if (!groups) {\n      groups = this.groups = /* @__PURE__ */ new Map();\n    }\n    var group2 = groups.get(key);\n    var element;\n    if (this.elementSelector) {\n      try {\n        element = this.elementSelector(value);\n      } catch (err) {\n        this.error(err);\n      }\n    } else {\n      element = value;\n    }\n    if (!group2) {\n      group2 = this.subjectSelector ? this.subjectSelector() : new Subject();\n      groups.set(key, group2);\n      var groupedObservable = new GroupedObservable(key, group2, this);\n      this.destination.next(groupedObservable);\n      if (this.durationSelector) {\n        var duration = void 0;\n        try {\n          duration = this.durationSelector(new GroupedObservable(key, group2));\n        } catch (err) {\n          this.error(err);\n          return;\n        }\n        this.add(duration.subscribe(new GroupDurationSubscriber(key, group2, this)));\n      }\n    }\n    if (!group2.closed) {\n      group2.next(element);\n    }\n  };\n  GroupBySubscriber2.prototype._error = function(err) {\n    var groups = this.groups;\n    if (groups) {\n      groups.forEach(function(group2, key) {\n        group2.error(err);\n      });\n      groups.clear();\n    }\n    this.destination.error(err);\n  };\n  GroupBySubscriber2.prototype._complete = function() {\n    var groups = this.groups;\n    if (groups) {\n      groups.forEach(function(group2, key) {\n        group2.complete();\n      });\n      groups.clear();\n    }\n    this.destination.complete();\n  };\n  GroupBySubscriber2.prototype.removeGroup = function(key) {\n    this.groups.delete(key);\n  };\n  GroupBySubscriber2.prototype.unsubscribe = function() {\n    if (!this.closed) {\n      this.attemptedToUnsubscribe = true;\n      if (this.count === 0) {\n        _super.prototype.unsubscribe.call(this);\n      }\n    }\n  };\n  return GroupBySubscriber2;\n}(Subscriber);\nvar GroupDurationSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(GroupDurationSubscriber2, _super);\n  function GroupDurationSubscriber2(key, group2, parent) {\n    var _this = _super.call(this, group2) || this;\n    _this.key = key;\n    _this.group = group2;\n    _this.parent = parent;\n    return _this;\n  }\n  GroupDurationSubscriber2.prototype._next = function(value) {\n    this.complete();\n  };\n  GroupDurationSubscriber2.prototype._unsubscribe = function() {\n    var _a = this, parent = _a.parent, key = _a.key;\n    this.key = this.parent = null;\n    if (parent) {\n      parent.removeGroup(key);\n    }\n  };\n  return GroupDurationSubscriber2;\n}(Subscriber);\nvar GroupedObservable = /* @__PURE__ */ function(_super) {\n  __extends(GroupedObservable2, _super);\n  function GroupedObservable2(key, groupSubject, refCountSubscription) {\n    var _this = _super.call(this) || this;\n    _this.key = key;\n    _this.groupSubject = groupSubject;\n    _this.refCountSubscription = refCountSubscription;\n    return _this;\n  }\n  GroupedObservable2.prototype._subscribe = function(subscriber) {\n    var subscription = new Subscription();\n    var _a = this, refCountSubscription = _a.refCountSubscription, groupSubject = _a.groupSubject;\n    if (refCountSubscription && !refCountSubscription.closed) {\n      subscription.add(new InnerRefCountSubscription(refCountSubscription));\n    }\n    subscription.add(groupSubject.subscribe(subscriber));\n    return subscription;\n  };\n  return GroupedObservable2;\n}(Observable);\nvar InnerRefCountSubscription = /* @__PURE__ */ function(_super) {\n  __extends(InnerRefCountSubscription2, _super);\n  function InnerRefCountSubscription2(parent) {\n    var _this = _super.call(this) || this;\n    _this.parent = parent;\n    parent.count++;\n    return _this;\n  }\n  InnerRefCountSubscription2.prototype.unsubscribe = function() {\n    var parent = this.parent;\n    if (!parent.closed && !this.closed) {\n      _super.prototype.unsubscribe.call(this);\n      parent.count -= 1;\n      if (parent.count === 0 && parent.attemptedToUnsubscribe) {\n        parent.unsubscribe();\n      }\n    }\n  };\n  return InnerRefCountSubscription2;\n}(Subscription);\nvar BehaviorSubject = /* @__PURE__ */ function(_super) {\n  __extends(BehaviorSubject2, _super);\n  function BehaviorSubject2(_value) {\n    var _this = _super.call(this) || this;\n    _this._value = _value;\n    return _this;\n  }\n  Object.defineProperty(BehaviorSubject2.prototype, \"value\", {\n    get: function() {\n      return this.getValue();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  BehaviorSubject2.prototype._subscribe = function(subscriber) {\n    var subscription = _super.prototype._subscribe.call(this, subscriber);\n    if (subscription && !subscription.closed) {\n      subscriber.next(this._value);\n    }\n    return subscription;\n  };\n  BehaviorSubject2.prototype.getValue = function() {\n    if (this.hasError) {\n      throw this.thrownError;\n    } else if (this.closed) {\n      throw new ObjectUnsubscribedError();\n    } else {\n      return this._value;\n    }\n  };\n  BehaviorSubject2.prototype.next = function(value) {\n    _super.prototype.next.call(this, this._value = value);\n  };\n  return BehaviorSubject2;\n}(Subject);\nvar Action = /* @__PURE__ */ function(_super) {\n  __extends(Action2, _super);\n  function Action2(scheduler, work) {\n    return _super.call(this) || this;\n  }\n  Action2.prototype.schedule = function(state, delay2) {\n    return this;\n  };\n  return Action2;\n}(Subscription);\nvar AsyncAction = /* @__PURE__ */ function(_super) {\n  __extends(AsyncAction2, _super);\n  function AsyncAction2(scheduler, work) {\n    var _this = _super.call(this, scheduler, work) || this;\n    _this.scheduler = scheduler;\n    _this.work = work;\n    _this.pending = false;\n    return _this;\n  }\n  AsyncAction2.prototype.schedule = function(state, delay2) {\n    if (delay2 === void 0) {\n      delay2 = 0;\n    }\n    if (this.closed) {\n      return this;\n    }\n    this.state = state;\n    var id = this.id;\n    var scheduler = this.scheduler;\n    if (id != null) {\n      this.id = this.recycleAsyncId(scheduler, id, delay2);\n    }\n    this.pending = true;\n    this.delay = delay2;\n    this.id = this.id || this.requestAsyncId(scheduler, this.id, delay2);\n    return this;\n  };\n  AsyncAction2.prototype.requestAsyncId = function(scheduler, id, delay2) {\n    if (delay2 === void 0) {\n      delay2 = 0;\n    }\n    return setInterval(scheduler.flush.bind(scheduler, this), delay2);\n  };\n  AsyncAction2.prototype.recycleAsyncId = function(scheduler, id, delay2) {\n    if (delay2 === void 0) {\n      delay2 = 0;\n    }\n    if (delay2 !== null && this.delay === delay2 && this.pending === false) {\n      return id;\n    }\n    clearInterval(id);\n    return void 0;\n  };\n  AsyncAction2.prototype.execute = function(state, delay2) {\n    if (this.closed) {\n      return new Error(\"executing a cancelled action\");\n    }\n    this.pending = false;\n    var error = this._execute(state, delay2);\n    if (error) {\n      return error;\n    } else if (this.pending === false && this.id != null) {\n      this.id = this.recycleAsyncId(this.scheduler, this.id, null);\n    }\n  };\n  AsyncAction2.prototype._execute = function(state, delay2) {\n    var errored = false;\n    var errorValue = void 0;\n    try {\n      this.work(state);\n    } catch (e) {\n      errored = true;\n      errorValue = !!e && e || new Error(e);\n    }\n    if (errored) {\n      this.unsubscribe();\n      return errorValue;\n    }\n  };\n  AsyncAction2.prototype._unsubscribe = function() {\n    var id = this.id;\n    var scheduler = this.scheduler;\n    var actions = scheduler.actions;\n    var index = actions.indexOf(this);\n    this.work = null;\n    this.state = null;\n    this.pending = false;\n    this.scheduler = null;\n    if (index !== -1) {\n      actions.splice(index, 1);\n    }\n    if (id != null) {\n      this.id = this.recycleAsyncId(scheduler, id, null);\n    }\n    this.delay = null;\n  };\n  return AsyncAction2;\n}(Action);\nvar QueueAction = /* @__PURE__ */ function(_super) {\n  __extends(QueueAction2, _super);\n  function QueueAction2(scheduler, work) {\n    var _this = _super.call(this, scheduler, work) || this;\n    _this.scheduler = scheduler;\n    _this.work = work;\n    return _this;\n  }\n  QueueAction2.prototype.schedule = function(state, delay2) {\n    if (delay2 === void 0) {\n      delay2 = 0;\n    }\n    if (delay2 > 0) {\n      return _super.prototype.schedule.call(this, state, delay2);\n    }\n    this.delay = delay2;\n    this.state = state;\n    this.scheduler.flush(this);\n    return this;\n  };\n  QueueAction2.prototype.execute = function(state, delay2) {\n    return delay2 > 0 || this.closed ? _super.prototype.execute.call(this, state, delay2) : this._execute(state, delay2);\n  };\n  QueueAction2.prototype.requestAsyncId = function(scheduler, id, delay2) {\n    if (delay2 === void 0) {\n      delay2 = 0;\n    }\n    if (delay2 !== null && delay2 > 0 || delay2 === null && this.delay > 0) {\n      return _super.prototype.requestAsyncId.call(this, scheduler, id, delay2);\n    }\n    return scheduler.flush(this);\n  };\n  return QueueAction2;\n}(AsyncAction);\nvar Scheduler = /* @__PURE__ */ function() {\n  function Scheduler2(SchedulerAction, now) {\n    if (now === void 0) {\n      now = Scheduler2.now;\n    }\n    this.SchedulerAction = SchedulerAction;\n    this.now = now;\n  }\n  Scheduler2.prototype.schedule = function(work, delay2, state) {\n    if (delay2 === void 0) {\n      delay2 = 0;\n    }\n    return new this.SchedulerAction(this, work).schedule(state, delay2);\n  };\n  Scheduler2.now = function() {\n    return Date.now();\n  };\n  return Scheduler2;\n}();\nvar AsyncScheduler = /* @__PURE__ */ function(_super) {\n  __extends(AsyncScheduler2, _super);\n  function AsyncScheduler2(SchedulerAction, now) {\n    if (now === void 0) {\n      now = Scheduler.now;\n    }\n    var _this = _super.call(this, SchedulerAction, function() {\n      if (AsyncScheduler2.delegate && AsyncScheduler2.delegate !== _this) {\n        return AsyncScheduler2.delegate.now();\n      } else {\n        return now();\n      }\n    }) || this;\n    _this.actions = [];\n    _this.active = false;\n    _this.scheduled = void 0;\n    return _this;\n  }\n  AsyncScheduler2.prototype.schedule = function(work, delay2, state) {\n    if (delay2 === void 0) {\n      delay2 = 0;\n    }\n    if (AsyncScheduler2.delegate && AsyncScheduler2.delegate !== this) {\n      return AsyncScheduler2.delegate.schedule(work, delay2, state);\n    } else {\n      return _super.prototype.schedule.call(this, work, delay2, state);\n    }\n  };\n  AsyncScheduler2.prototype.flush = function(action) {\n    var actions = this.actions;\n    if (this.active) {\n      actions.push(action);\n      return;\n    }\n    var error;\n    this.active = true;\n    do {\n      if (error = action.execute(action.state, action.delay)) {\n        break;\n      }\n    } while (action = actions.shift());\n    this.active = false;\n    if (error) {\n      while (action = actions.shift()) {\n        action.unsubscribe();\n      }\n      throw error;\n    }\n  };\n  return AsyncScheduler2;\n}(Scheduler);\nvar QueueScheduler = /* @__PURE__ */ function(_super) {\n  __extends(QueueScheduler2, _super);\n  function QueueScheduler2() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  return QueueScheduler2;\n}(AsyncScheduler);\nvar queueScheduler = /* @__PURE__ */ new QueueScheduler(QueueAction);\nvar queue = queueScheduler;\nvar EMPTY = /* @__PURE__ */ new Observable(function(subscriber) {\n  return subscriber.complete();\n});\nfunction empty(scheduler) {\n  return scheduler ? emptyScheduled(scheduler) : EMPTY;\n}\nfunction emptyScheduled(scheduler) {\n  return new Observable(function(subscriber) {\n    return scheduler.schedule(function() {\n      return subscriber.complete();\n    });\n  });\n}\nfunction isScheduler(value) {\n  return value && typeof value.schedule === \"function\";\n}\nvar subscribeToArray = function(array) {\n  return function(subscriber) {\n    for (var i = 0, len = array.length; i < len && !subscriber.closed; i++) {\n      subscriber.next(array[i]);\n    }\n    subscriber.complete();\n  };\n};\nfunction scheduleArray(input, scheduler) {\n  return new Observable(function(subscriber) {\n    var sub = new Subscription();\n    var i = 0;\n    sub.add(scheduler.schedule(function() {\n      if (i === input.length) {\n        subscriber.complete();\n        return;\n      }\n      subscriber.next(input[i++]);\n      if (!subscriber.closed) {\n        sub.add(this.schedule());\n      }\n    }));\n    return sub;\n  });\n}\nfunction fromArray(input, scheduler) {\n  if (!scheduler) {\n    return new Observable(subscribeToArray(input));\n  } else {\n    return scheduleArray(input, scheduler);\n  }\n}\nfunction of() {\n  var args = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    args[_i] = arguments[_i];\n  }\n  var scheduler = args[args.length - 1];\n  if (isScheduler(scheduler)) {\n    args.pop();\n    return scheduleArray(args, scheduler);\n  } else {\n    return fromArray(args);\n  }\n}\nfunction throwError(error, scheduler) {\n  if (!scheduler) {\n    return new Observable(function(subscriber) {\n      return subscriber.error(error);\n    });\n  } else {\n    return new Observable(function(subscriber) {\n      return scheduler.schedule(dispatch$7, 0, { error, subscriber });\n    });\n  }\n}\nfunction dispatch$7(_a) {\n  var error = _a.error, subscriber = _a.subscriber;\n  subscriber.error(error);\n}\nvar NotificationKind;\n/* @__PURE__ */ (function(NotificationKind2) {\n  NotificationKind2[\"NEXT\"] = \"N\";\n  NotificationKind2[\"ERROR\"] = \"E\";\n  NotificationKind2[\"COMPLETE\"] = \"C\";\n})(NotificationKind || (NotificationKind = {}));\nvar Notification = /* @__PURE__ */ function() {\n  function Notification2(kind, value, error) {\n    this.kind = kind;\n    this.value = value;\n    this.error = error;\n    this.hasValue = kind === \"N\";\n  }\n  Notification2.prototype.observe = function(observer) {\n    switch (this.kind) {\n      case \"N\":\n        return observer.next && observer.next(this.value);\n      case \"E\":\n        return observer.error && observer.error(this.error);\n      case \"C\":\n        return observer.complete && observer.complete();\n    }\n  };\n  Notification2.prototype.do = function(next, error, complete) {\n    var kind = this.kind;\n    switch (kind) {\n      case \"N\":\n        return next && next(this.value);\n      case \"E\":\n        return error && error(this.error);\n      case \"C\":\n        return complete && complete();\n    }\n  };\n  Notification2.prototype.accept = function(nextOrObserver, error, complete) {\n    if (nextOrObserver && typeof nextOrObserver.next === \"function\") {\n      return this.observe(nextOrObserver);\n    } else {\n      return this.do(nextOrObserver, error, complete);\n    }\n  };\n  Notification2.prototype.toObservable = function() {\n    var kind = this.kind;\n    switch (kind) {\n      case \"N\":\n        return of(this.value);\n      case \"E\":\n        return throwError(this.error);\n      case \"C\":\n        return empty();\n    }\n    throw new Error(\"unexpected notification kind value\");\n  };\n  Notification2.createNext = function(value) {\n    if (typeof value !== \"undefined\") {\n      return new Notification2(\"N\", value);\n    }\n    return Notification2.undefinedValueNotification;\n  };\n  Notification2.createError = function(err) {\n    return new Notification2(\"E\", void 0, err);\n  };\n  Notification2.createComplete = function() {\n    return Notification2.completeNotification;\n  };\n  Notification2.completeNotification = new Notification2(\"C\");\n  Notification2.undefinedValueNotification = new Notification2(\"N\", void 0);\n  return Notification2;\n}();\nfunction observeOn(scheduler, delay2) {\n  if (delay2 === void 0) {\n    delay2 = 0;\n  }\n  return function observeOnOperatorFunction(source) {\n    return source.lift(new ObserveOnOperator(scheduler, delay2));\n  };\n}\nvar ObserveOnOperator = /* @__PURE__ */ function() {\n  function ObserveOnOperator2(scheduler, delay2) {\n    if (delay2 === void 0) {\n      delay2 = 0;\n    }\n    this.scheduler = scheduler;\n    this.delay = delay2;\n  }\n  ObserveOnOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new ObserveOnSubscriber(subscriber, this.scheduler, this.delay));\n  };\n  return ObserveOnOperator2;\n}();\nvar ObserveOnSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(ObserveOnSubscriber2, _super);\n  function ObserveOnSubscriber2(destination, scheduler, delay2) {\n    if (delay2 === void 0) {\n      delay2 = 0;\n    }\n    var _this = _super.call(this, destination) || this;\n    _this.scheduler = scheduler;\n    _this.delay = delay2;\n    return _this;\n  }\n  ObserveOnSubscriber2.dispatch = function(arg) {\n    var notification = arg.notification, destination = arg.destination;\n    notification.observe(destination);\n    this.unsubscribe();\n  };\n  ObserveOnSubscriber2.prototype.scheduleMessage = function(notification) {\n    var destination = this.destination;\n    destination.add(this.scheduler.schedule(ObserveOnSubscriber2.dispatch, this.delay, new ObserveOnMessage(notification, this.destination)));\n  };\n  ObserveOnSubscriber2.prototype._next = function(value) {\n    this.scheduleMessage(Notification.createNext(value));\n  };\n  ObserveOnSubscriber2.prototype._error = function(err) {\n    this.scheduleMessage(Notification.createError(err));\n    this.unsubscribe();\n  };\n  ObserveOnSubscriber2.prototype._complete = function() {\n    this.scheduleMessage(Notification.createComplete());\n    this.unsubscribe();\n  };\n  return ObserveOnSubscriber2;\n}(Subscriber);\nvar ObserveOnMessage = /* @__PURE__ */ function() {\n  function ObserveOnMessage2(notification, destination) {\n    this.notification = notification;\n    this.destination = destination;\n  }\n  return ObserveOnMessage2;\n}();\nvar ReplaySubject = /* @__PURE__ */ function(_super) {\n  __extends(ReplaySubject2, _super);\n  function ReplaySubject2(bufferSize, windowTime2, scheduler) {\n    if (bufferSize === void 0) {\n      bufferSize = Number.POSITIVE_INFINITY;\n    }\n    if (windowTime2 === void 0) {\n      windowTime2 = Number.POSITIVE_INFINITY;\n    }\n    var _this = _super.call(this) || this;\n    _this.scheduler = scheduler;\n    _this._events = [];\n    _this._infiniteTimeWindow = false;\n    _this._bufferSize = bufferSize < 1 ? 1 : bufferSize;\n    _this._windowTime = windowTime2 < 1 ? 1 : windowTime2;\n    if (windowTime2 === Number.POSITIVE_INFINITY) {\n      _this._infiniteTimeWindow = true;\n      _this.next = _this.nextInfiniteTimeWindow;\n    } else {\n      _this.next = _this.nextTimeWindow;\n    }\n    return _this;\n  }\n  ReplaySubject2.prototype.nextInfiniteTimeWindow = function(value) {\n    if (!this.isStopped) {\n      var _events = this._events;\n      _events.push(value);\n      if (_events.length > this._bufferSize) {\n        _events.shift();\n      }\n    }\n    _super.prototype.next.call(this, value);\n  };\n  ReplaySubject2.prototype.nextTimeWindow = function(value) {\n    if (!this.isStopped) {\n      this._events.push(new ReplayEvent(this._getNow(), value));\n      this._trimBufferThenGetEvents();\n    }\n    _super.prototype.next.call(this, value);\n  };\n  ReplaySubject2.prototype._subscribe = function(subscriber) {\n    var _infiniteTimeWindow = this._infiniteTimeWindow;\n    var _events = _infiniteTimeWindow ? this._events : this._trimBufferThenGetEvents();\n    var scheduler = this.scheduler;\n    var len = _events.length;\n    var subscription;\n    if (this.closed) {\n      throw new ObjectUnsubscribedError();\n    } else if (this.isStopped || this.hasError) {\n      subscription = Subscription.EMPTY;\n    } else {\n      this.observers.push(subscriber);\n      subscription = new SubjectSubscription(this, subscriber);\n    }\n    if (scheduler) {\n      subscriber.add(subscriber = new ObserveOnSubscriber(subscriber, scheduler));\n    }\n    if (_infiniteTimeWindow) {\n      for (var i = 0; i < len && !subscriber.closed; i++) {\n        subscriber.next(_events[i]);\n      }\n    } else {\n      for (var i = 0; i < len && !subscriber.closed; i++) {\n        subscriber.next(_events[i].value);\n      }\n    }\n    if (this.hasError) {\n      subscriber.error(this.thrownError);\n    } else if (this.isStopped) {\n      subscriber.complete();\n    }\n    return subscription;\n  };\n  ReplaySubject2.prototype._getNow = function() {\n    return (this.scheduler || queue).now();\n  };\n  ReplaySubject2.prototype._trimBufferThenGetEvents = function() {\n    var now = this._getNow();\n    var _bufferSize = this._bufferSize;\n    var _windowTime = this._windowTime;\n    var _events = this._events;\n    var eventsCount = _events.length;\n    var spliceCount = 0;\n    while (spliceCount < eventsCount) {\n      if (now - _events[spliceCount].time < _windowTime) {\n        break;\n      }\n      spliceCount++;\n    }\n    if (eventsCount > _bufferSize) {\n      spliceCount = Math.max(spliceCount, eventsCount - _bufferSize);\n    }\n    if (spliceCount > 0) {\n      _events.splice(0, spliceCount);\n    }\n    return _events;\n  };\n  return ReplaySubject2;\n}(Subject);\nvar ReplayEvent = /* @__PURE__ */ function() {\n  function ReplayEvent2(time2, value) {\n    this.time = time2;\n    this.value = value;\n  }\n  return ReplayEvent2;\n}();\nvar AsyncSubject = /* @__PURE__ */ function(_super) {\n  __extends(AsyncSubject2, _super);\n  function AsyncSubject2() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.value = null;\n    _this.hasNext = false;\n    _this.hasCompleted = false;\n    return _this;\n  }\n  AsyncSubject2.prototype._subscribe = function(subscriber) {\n    if (this.hasError) {\n      subscriber.error(this.thrownError);\n      return Subscription.EMPTY;\n    } else if (this.hasCompleted && this.hasNext) {\n      subscriber.next(this.value);\n      subscriber.complete();\n      return Subscription.EMPTY;\n    }\n    return _super.prototype._subscribe.call(this, subscriber);\n  };\n  AsyncSubject2.prototype.next = function(value) {\n    if (!this.hasCompleted) {\n      this.value = value;\n      this.hasNext = true;\n    }\n  };\n  AsyncSubject2.prototype.error = function(error) {\n    if (!this.hasCompleted) {\n      _super.prototype.error.call(this, error);\n    }\n  };\n  AsyncSubject2.prototype.complete = function() {\n    this.hasCompleted = true;\n    if (this.hasNext) {\n      _super.prototype.next.call(this, this.value);\n    }\n    _super.prototype.complete.call(this);\n  };\n  return AsyncSubject2;\n}(Subject);\nvar nextHandle = 1;\nvar RESOLVED = /* @__PURE__ */ function() {\n  return /* @__PURE__ */ Promise.resolve();\n}();\nvar activeHandles = {};\nfunction findAndClearHandle(handle) {\n  if (handle in activeHandles) {\n    delete activeHandles[handle];\n    return true;\n  }\n  return false;\n}\nvar Immediate = {\n  setImmediate: function(cb) {\n    var handle = nextHandle++;\n    activeHandles[handle] = true;\n    RESOLVED.then(function() {\n      return findAndClearHandle(handle) && cb();\n    });\n    return handle;\n  },\n  clearImmediate: function(handle) {\n    findAndClearHandle(handle);\n  }\n};\nvar AsapAction = /* @__PURE__ */ function(_super) {\n  __extends(AsapAction2, _super);\n  function AsapAction2(scheduler, work) {\n    var _this = _super.call(this, scheduler, work) || this;\n    _this.scheduler = scheduler;\n    _this.work = work;\n    return _this;\n  }\n  AsapAction2.prototype.requestAsyncId = function(scheduler, id, delay2) {\n    if (delay2 === void 0) {\n      delay2 = 0;\n    }\n    if (delay2 !== null && delay2 > 0) {\n      return _super.prototype.requestAsyncId.call(this, scheduler, id, delay2);\n    }\n    scheduler.actions.push(this);\n    return scheduler.scheduled || (scheduler.scheduled = Immediate.setImmediate(scheduler.flush.bind(scheduler, null)));\n  };\n  AsapAction2.prototype.recycleAsyncId = function(scheduler, id, delay2) {\n    if (delay2 === void 0) {\n      delay2 = 0;\n    }\n    if (delay2 !== null && delay2 > 0 || delay2 === null && this.delay > 0) {\n      return _super.prototype.recycleAsyncId.call(this, scheduler, id, delay2);\n    }\n    if (scheduler.actions.length === 0) {\n      Immediate.clearImmediate(id);\n      scheduler.scheduled = void 0;\n    }\n    return void 0;\n  };\n  return AsapAction2;\n}(AsyncAction);\nvar AsapScheduler = /* @__PURE__ */ function(_super) {\n  __extends(AsapScheduler2, _super);\n  function AsapScheduler2() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  AsapScheduler2.prototype.flush = function(action) {\n    this.active = true;\n    this.scheduled = void 0;\n    var actions = this.actions;\n    var error;\n    var index = -1;\n    var count2 = actions.length;\n    action = action || actions.shift();\n    do {\n      if (error = action.execute(action.state, action.delay)) {\n        break;\n      }\n    } while (++index < count2 && (action = actions.shift()));\n    this.active = false;\n    if (error) {\n      while (++index < count2 && (action = actions.shift())) {\n        action.unsubscribe();\n      }\n      throw error;\n    }\n  };\n  return AsapScheduler2;\n}(AsyncScheduler);\nvar asapScheduler = /* @__PURE__ */ new AsapScheduler(AsapAction);\nvar asap = asapScheduler;\nvar asyncScheduler = /* @__PURE__ */ new AsyncScheduler(AsyncAction);\nvar async$1 = asyncScheduler;\nvar AnimationFrameAction = /* @__PURE__ */ function(_super) {\n  __extends(AnimationFrameAction2, _super);\n  function AnimationFrameAction2(scheduler, work) {\n    var _this = _super.call(this, scheduler, work) || this;\n    _this.scheduler = scheduler;\n    _this.work = work;\n    return _this;\n  }\n  AnimationFrameAction2.prototype.requestAsyncId = function(scheduler, id, delay2) {\n    if (delay2 === void 0) {\n      delay2 = 0;\n    }\n    if (delay2 !== null && delay2 > 0) {\n      return _super.prototype.requestAsyncId.call(this, scheduler, id, delay2);\n    }\n    scheduler.actions.push(this);\n    return scheduler.scheduled || (scheduler.scheduled = requestAnimationFrame(function() {\n      return scheduler.flush(null);\n    }));\n  };\n  AnimationFrameAction2.prototype.recycleAsyncId = function(scheduler, id, delay2) {\n    if (delay2 === void 0) {\n      delay2 = 0;\n    }\n    if (delay2 !== null && delay2 > 0 || delay2 === null && this.delay > 0) {\n      return _super.prototype.recycleAsyncId.call(this, scheduler, id, delay2);\n    }\n    if (scheduler.actions.length === 0) {\n      cancelAnimationFrame(id);\n      scheduler.scheduled = void 0;\n    }\n    return void 0;\n  };\n  return AnimationFrameAction2;\n}(AsyncAction);\nvar AnimationFrameScheduler = /* @__PURE__ */ function(_super) {\n  __extends(AnimationFrameScheduler2, _super);\n  function AnimationFrameScheduler2() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  AnimationFrameScheduler2.prototype.flush = function(action) {\n    this.active = true;\n    this.scheduled = void 0;\n    var actions = this.actions;\n    var error;\n    var index = -1;\n    var count2 = actions.length;\n    action = action || actions.shift();\n    do {\n      if (error = action.execute(action.state, action.delay)) {\n        break;\n      }\n    } while (++index < count2 && (action = actions.shift()));\n    this.active = false;\n    if (error) {\n      while (++index < count2 && (action = actions.shift())) {\n        action.unsubscribe();\n      }\n      throw error;\n    }\n  };\n  return AnimationFrameScheduler2;\n}(AsyncScheduler);\nvar animationFrameScheduler = /* @__PURE__ */ new AnimationFrameScheduler(AnimationFrameAction);\nvar animationFrame = animationFrameScheduler;\nvar VirtualTimeScheduler = /* @__PURE__ */ function(_super) {\n  __extends(VirtualTimeScheduler2, _super);\n  function VirtualTimeScheduler2(SchedulerAction, maxFrames) {\n    if (SchedulerAction === void 0) {\n      SchedulerAction = VirtualAction;\n    }\n    if (maxFrames === void 0) {\n      maxFrames = Number.POSITIVE_INFINITY;\n    }\n    var _this = _super.call(this, SchedulerAction, function() {\n      return _this.frame;\n    }) || this;\n    _this.maxFrames = maxFrames;\n    _this.frame = 0;\n    _this.index = -1;\n    return _this;\n  }\n  VirtualTimeScheduler2.prototype.flush = function() {\n    var _a = this, actions = _a.actions, maxFrames = _a.maxFrames;\n    var error, action;\n    while ((action = actions[0]) && action.delay <= maxFrames) {\n      actions.shift();\n      this.frame = action.delay;\n      if (error = action.execute(action.state, action.delay)) {\n        break;\n      }\n    }\n    if (error) {\n      while (action = actions.shift()) {\n        action.unsubscribe();\n      }\n      throw error;\n    }\n  };\n  VirtualTimeScheduler2.frameTimeFactor = 10;\n  return VirtualTimeScheduler2;\n}(AsyncScheduler);\nvar VirtualAction = /* @__PURE__ */ function(_super) {\n  __extends(VirtualAction2, _super);\n  function VirtualAction2(scheduler, work, index) {\n    if (index === void 0) {\n      index = scheduler.index += 1;\n    }\n    var _this = _super.call(this, scheduler, work) || this;\n    _this.scheduler = scheduler;\n    _this.work = work;\n    _this.index = index;\n    _this.active = true;\n    _this.index = scheduler.index = index;\n    return _this;\n  }\n  VirtualAction2.prototype.schedule = function(state, delay2) {\n    if (delay2 === void 0) {\n      delay2 = 0;\n    }\n    if (!this.id) {\n      return _super.prototype.schedule.call(this, state, delay2);\n    }\n    this.active = false;\n    var action = new VirtualAction2(this.scheduler, this.work);\n    this.add(action);\n    return action.schedule(state, delay2);\n  };\n  VirtualAction2.prototype.requestAsyncId = function(scheduler, id, delay2) {\n    if (delay2 === void 0) {\n      delay2 = 0;\n    }\n    this.delay = scheduler.frame + delay2;\n    var actions = scheduler.actions;\n    actions.push(this);\n    actions.sort(VirtualAction2.sortActions);\n    return true;\n  };\n  VirtualAction2.prototype.recycleAsyncId = function(scheduler, id, delay2) {\n    return void 0;\n  };\n  VirtualAction2.prototype._execute = function(state, delay2) {\n    if (this.active === true) {\n      return _super.prototype._execute.call(this, state, delay2);\n    }\n  };\n  VirtualAction2.sortActions = function(a, b) {\n    if (a.delay === b.delay) {\n      if (a.index === b.index) {\n        return 0;\n      } else if (a.index > b.index) {\n        return 1;\n      } else {\n        return -1;\n      }\n    } else if (a.delay > b.delay) {\n      return 1;\n    } else {\n      return -1;\n    }\n  };\n  return VirtualAction2;\n}(AsyncAction);\nfunction noop$1() {\n}\nfunction isObservable(obj) {\n  return !!obj && (obj instanceof Observable || typeof obj.lift === \"function\" && typeof obj.subscribe === \"function\");\n}\nvar ArgumentOutOfRangeErrorImpl = /* @__PURE__ */ function() {\n  function ArgumentOutOfRangeErrorImpl2() {\n    Error.call(this);\n    this.message = \"argument out of range\";\n    this.name = \"ArgumentOutOfRangeError\";\n    return this;\n  }\n  ArgumentOutOfRangeErrorImpl2.prototype = /* @__PURE__ */ Object.create(Error.prototype);\n  return ArgumentOutOfRangeErrorImpl2;\n}();\nvar ArgumentOutOfRangeError = ArgumentOutOfRangeErrorImpl;\nvar EmptyErrorImpl = /* @__PURE__ */ function() {\n  function EmptyErrorImpl2() {\n    Error.call(this);\n    this.message = \"no elements in sequence\";\n    this.name = \"EmptyError\";\n    return this;\n  }\n  EmptyErrorImpl2.prototype = /* @__PURE__ */ Object.create(Error.prototype);\n  return EmptyErrorImpl2;\n}();\nvar EmptyError = EmptyErrorImpl;\nvar TimeoutErrorImpl = /* @__PURE__ */ function() {\n  function TimeoutErrorImpl2() {\n    Error.call(this);\n    this.message = \"Timeout has occurred\";\n    this.name = \"TimeoutError\";\n    return this;\n  }\n  TimeoutErrorImpl2.prototype = /* @__PURE__ */ Object.create(Error.prototype);\n  return TimeoutErrorImpl2;\n}();\nvar TimeoutError = TimeoutErrorImpl;\nfunction map(project, thisArg) {\n  return function mapOperation(source) {\n    if (typeof project !== \"function\") {\n      throw new TypeError(\"argument is not a function. Are you looking for `mapTo()`?\");\n    }\n    return source.lift(new MapOperator(project, thisArg));\n  };\n}\nvar MapOperator = /* @__PURE__ */ function() {\n  function MapOperator2(project, thisArg) {\n    this.project = project;\n    this.thisArg = thisArg;\n  }\n  MapOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new MapSubscriber(subscriber, this.project, this.thisArg));\n  };\n  return MapOperator2;\n}();\nvar MapSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(MapSubscriber2, _super);\n  function MapSubscriber2(destination, project, thisArg) {\n    var _this = _super.call(this, destination) || this;\n    _this.project = project;\n    _this.count = 0;\n    _this.thisArg = thisArg || _this;\n    return _this;\n  }\n  MapSubscriber2.prototype._next = function(value) {\n    var result;\n    try {\n      result = this.project.call(this.thisArg, value, this.count++);\n    } catch (err) {\n      this.destination.error(err);\n      return;\n    }\n    this.destination.next(result);\n  };\n  return MapSubscriber2;\n}(Subscriber);\nfunction bindCallback(callbackFunc, resultSelector, scheduler) {\n  if (resultSelector) {\n    if (isScheduler(resultSelector)) {\n      scheduler = resultSelector;\n    } else {\n      return function() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return bindCallback(callbackFunc, scheduler).apply(void 0, args).pipe(map(function(args2) {\n          return isArray(args2) ? resultSelector.apply(void 0, args2) : resultSelector(args2);\n        }));\n      };\n    }\n  }\n  return function() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    var context2 = this;\n    var subject;\n    var params = {\n      context: context2,\n      subject,\n      callbackFunc,\n      scheduler\n    };\n    return new Observable(function(subscriber) {\n      if (!scheduler) {\n        if (!subject) {\n          subject = new AsyncSubject();\n          var handler = function() {\n            var innerArgs = [];\n            for (var _i2 = 0; _i2 < arguments.length; _i2++) {\n              innerArgs[_i2] = arguments[_i2];\n            }\n            subject.next(innerArgs.length <= 1 ? innerArgs[0] : innerArgs);\n            subject.complete();\n          };\n          try {\n            callbackFunc.apply(context2, args.concat([handler]));\n          } catch (err) {\n            if (canReportError(subject)) {\n              subject.error(err);\n            } else {\n              console.warn(err);\n            }\n          }\n        }\n        return subject.subscribe(subscriber);\n      } else {\n        var state = {\n          args,\n          subscriber,\n          params\n        };\n        return scheduler.schedule(dispatch$6, 0, state);\n      }\n    });\n  };\n}\nfunction dispatch$6(state) {\n  var _this = this;\n  var args = state.args, subscriber = state.subscriber, params = state.params;\n  var callbackFunc = params.callbackFunc, context2 = params.context, scheduler = params.scheduler;\n  var subject = params.subject;\n  if (!subject) {\n    subject = params.subject = new AsyncSubject();\n    var handler = function() {\n      var innerArgs = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        innerArgs[_i] = arguments[_i];\n      }\n      var value = innerArgs.length <= 1 ? innerArgs[0] : innerArgs;\n      _this.add(scheduler.schedule(dispatchNext$3, 0, { value, subject }));\n    };\n    try {\n      callbackFunc.apply(context2, args.concat([handler]));\n    } catch (err) {\n      subject.error(err);\n    }\n  }\n  this.add(subject.subscribe(subscriber));\n}\nfunction dispatchNext$3(state) {\n  var value = state.value, subject = state.subject;\n  subject.next(value);\n  subject.complete();\n}\nfunction bindNodeCallback(callbackFunc, resultSelector, scheduler) {\n  if (resultSelector) {\n    if (isScheduler(resultSelector)) {\n      scheduler = resultSelector;\n    } else {\n      return function() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return bindNodeCallback(callbackFunc, scheduler).apply(void 0, args).pipe(map(function(args2) {\n          return isArray(args2) ? resultSelector.apply(void 0, args2) : resultSelector(args2);\n        }));\n      };\n    }\n  }\n  return function() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    var params = {\n      subject: void 0,\n      args,\n      callbackFunc,\n      scheduler,\n      context: this\n    };\n    return new Observable(function(subscriber) {\n      var context2 = params.context;\n      var subject = params.subject;\n      if (!scheduler) {\n        if (!subject) {\n          subject = params.subject = new AsyncSubject();\n          var handler = function() {\n            var innerArgs = [];\n            for (var _i2 = 0; _i2 < arguments.length; _i2++) {\n              innerArgs[_i2] = arguments[_i2];\n            }\n            var err = innerArgs.shift();\n            if (err) {\n              subject.error(err);\n              return;\n            }\n            subject.next(innerArgs.length <= 1 ? innerArgs[0] : innerArgs);\n            subject.complete();\n          };\n          try {\n            callbackFunc.apply(context2, args.concat([handler]));\n          } catch (err) {\n            if (canReportError(subject)) {\n              subject.error(err);\n            } else {\n              console.warn(err);\n            }\n          }\n        }\n        return subject.subscribe(subscriber);\n      } else {\n        return scheduler.schedule(dispatch$5, 0, { params, subscriber, context: context2 });\n      }\n    });\n  };\n}\nfunction dispatch$5(state) {\n  var _this = this;\n  var params = state.params, subscriber = state.subscriber, context2 = state.context;\n  var callbackFunc = params.callbackFunc, args = params.args, scheduler = params.scheduler;\n  var subject = params.subject;\n  if (!subject) {\n    subject = params.subject = new AsyncSubject();\n    var handler = function() {\n      var innerArgs = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        innerArgs[_i] = arguments[_i];\n      }\n      var err = innerArgs.shift();\n      if (err) {\n        _this.add(scheduler.schedule(dispatchError, 0, { err, subject }));\n      } else {\n        var value = innerArgs.length <= 1 ? innerArgs[0] : innerArgs;\n        _this.add(scheduler.schedule(dispatchNext$2, 0, { value, subject }));\n      }\n    };\n    try {\n      callbackFunc.apply(context2, args.concat([handler]));\n    } catch (err) {\n      this.add(scheduler.schedule(dispatchError, 0, { err, subject }));\n    }\n  }\n  this.add(subject.subscribe(subscriber));\n}\nfunction dispatchNext$2(arg) {\n  var value = arg.value, subject = arg.subject;\n  subject.next(value);\n  subject.complete();\n}\nfunction dispatchError(arg) {\n  var err = arg.err, subject = arg.subject;\n  subject.error(err);\n}\nvar OuterSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(OuterSubscriber2, _super);\n  function OuterSubscriber2() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  OuterSubscriber2.prototype.notifyNext = function(outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n    this.destination.next(innerValue);\n  };\n  OuterSubscriber2.prototype.notifyError = function(error, innerSub) {\n    this.destination.error(error);\n  };\n  OuterSubscriber2.prototype.notifyComplete = function(innerSub) {\n    this.destination.complete();\n  };\n  return OuterSubscriber2;\n}(Subscriber);\nvar InnerSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(InnerSubscriber2, _super);\n  function InnerSubscriber2(parent, outerValue, outerIndex) {\n    var _this = _super.call(this) || this;\n    _this.parent = parent;\n    _this.outerValue = outerValue;\n    _this.outerIndex = outerIndex;\n    _this.index = 0;\n    return _this;\n  }\n  InnerSubscriber2.prototype._next = function(value) {\n    this.parent.notifyNext(this.outerValue, value, this.outerIndex, this.index++, this);\n  };\n  InnerSubscriber2.prototype._error = function(error) {\n    this.parent.notifyError(error, this);\n    this.unsubscribe();\n  };\n  InnerSubscriber2.prototype._complete = function() {\n    this.parent.notifyComplete(this);\n    this.unsubscribe();\n  };\n  return InnerSubscriber2;\n}(Subscriber);\nvar subscribeToPromise = function(promise) {\n  return function(subscriber) {\n    promise.then(function(value) {\n      if (!subscriber.closed) {\n        subscriber.next(value);\n        subscriber.complete();\n      }\n    }, function(err) {\n      return subscriber.error(err);\n    }).then(null, hostReportError);\n    return subscriber;\n  };\n};\nfunction getSymbolIterator() {\n  if (typeof Symbol !== \"function\" || !Symbol.iterator) {\n    return \"@@iterator\";\n  }\n  return Symbol.iterator;\n}\nvar iterator = /* @__PURE__ */ getSymbolIterator();\nvar subscribeToIterable = function(iterable) {\n  return function(subscriber) {\n    var iterator$1 = iterable[iterator]();\n    do {\n      var item = void 0;\n      try {\n        item = iterator$1.next();\n      } catch (err) {\n        subscriber.error(err);\n        return subscriber;\n      }\n      if (item.done) {\n        subscriber.complete();\n        break;\n      }\n      subscriber.next(item.value);\n      if (subscriber.closed) {\n        break;\n      }\n    } while (true);\n    if (typeof iterator$1.return === \"function\") {\n      subscriber.add(function() {\n        if (iterator$1.return) {\n          iterator$1.return();\n        }\n      });\n    }\n    return subscriber;\n  };\n};\nvar subscribeToObservable = function(obj) {\n  return function(subscriber) {\n    var obs = obj[observable]();\n    if (typeof obs.subscribe !== \"function\") {\n      throw new TypeError(\"Provided object does not correctly implement Symbol.observable\");\n    } else {\n      return obs.subscribe(subscriber);\n    }\n  };\n};\nvar isArrayLike = function(x) {\n  return x && typeof x.length === \"number\" && typeof x !== \"function\";\n};\nfunction isPromise(value) {\n  return !!value && typeof value.subscribe !== \"function\" && typeof value.then === \"function\";\n}\nvar subscribeTo = function(result) {\n  if (!!result && typeof result[observable] === \"function\") {\n    return subscribeToObservable(result);\n  } else if (isArrayLike(result)) {\n    return subscribeToArray(result);\n  } else if (isPromise(result)) {\n    return subscribeToPromise(result);\n  } else if (!!result && typeof result[iterator] === \"function\") {\n    return subscribeToIterable(result);\n  } else {\n    var value = isObject(result) ? \"an invalid object\" : \"'\" + result + \"'\";\n    var msg = \"You provided \" + value + \" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.\";\n    throw new TypeError(msg);\n  }\n};\nfunction subscribeToResult(outerSubscriber, result, outerValue, outerIndex, innerSubscriber) {\n  if (innerSubscriber === void 0) {\n    innerSubscriber = new InnerSubscriber(outerSubscriber, outerValue, outerIndex);\n  }\n  if (innerSubscriber.closed) {\n    return void 0;\n  }\n  if (result instanceof Observable) {\n    return result.subscribe(innerSubscriber);\n  }\n  return subscribeTo(result)(innerSubscriber);\n}\nvar NONE = {};\nfunction combineLatest$1() {\n  var observables = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    observables[_i] = arguments[_i];\n  }\n  var resultSelector = void 0;\n  var scheduler = void 0;\n  if (isScheduler(observables[observables.length - 1])) {\n    scheduler = observables.pop();\n  }\n  if (typeof observables[observables.length - 1] === \"function\") {\n    resultSelector = observables.pop();\n  }\n  if (observables.length === 1 && isArray(observables[0])) {\n    observables = observables[0];\n  }\n  return fromArray(observables, scheduler).lift(new CombineLatestOperator(resultSelector));\n}\nvar CombineLatestOperator = /* @__PURE__ */ function() {\n  function CombineLatestOperator2(resultSelector) {\n    this.resultSelector = resultSelector;\n  }\n  CombineLatestOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new CombineLatestSubscriber(subscriber, this.resultSelector));\n  };\n  return CombineLatestOperator2;\n}();\nvar CombineLatestSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(CombineLatestSubscriber2, _super);\n  function CombineLatestSubscriber2(destination, resultSelector) {\n    var _this = _super.call(this, destination) || this;\n    _this.resultSelector = resultSelector;\n    _this.active = 0;\n    _this.values = [];\n    _this.observables = [];\n    return _this;\n  }\n  CombineLatestSubscriber2.prototype._next = function(observable2) {\n    this.values.push(NONE);\n    this.observables.push(observable2);\n  };\n  CombineLatestSubscriber2.prototype._complete = function() {\n    var observables = this.observables;\n    var len = observables.length;\n    if (len === 0) {\n      this.destination.complete();\n    } else {\n      this.active = len;\n      this.toRespond = len;\n      for (var i = 0; i < len; i++) {\n        var observable2 = observables[i];\n        this.add(subscribeToResult(this, observable2, void 0, i));\n      }\n    }\n  };\n  CombineLatestSubscriber2.prototype.notifyComplete = function(unused) {\n    if ((this.active -= 1) === 0) {\n      this.destination.complete();\n    }\n  };\n  CombineLatestSubscriber2.prototype.notifyNext = function(_outerValue, innerValue, outerIndex) {\n    var values = this.values;\n    var oldVal = values[outerIndex];\n    var toRespond = !this.toRespond ? 0 : oldVal === NONE ? --this.toRespond : this.toRespond;\n    values[outerIndex] = innerValue;\n    if (toRespond === 0) {\n      if (this.resultSelector) {\n        this._tryResultSelector(values);\n      } else {\n        this.destination.next(values.slice());\n      }\n    }\n  };\n  CombineLatestSubscriber2.prototype._tryResultSelector = function(values) {\n    var result;\n    try {\n      result = this.resultSelector.apply(this, values);\n    } catch (err) {\n      this.destination.error(err);\n      return;\n    }\n    this.destination.next(result);\n  };\n  return CombineLatestSubscriber2;\n}(OuterSubscriber);\nfunction scheduleObservable(input, scheduler) {\n  return new Observable(function(subscriber) {\n    var sub = new Subscription();\n    sub.add(scheduler.schedule(function() {\n      var observable$1 = input[observable]();\n      sub.add(observable$1.subscribe({\n        next: function(value) {\n          sub.add(scheduler.schedule(function() {\n            return subscriber.next(value);\n          }));\n        },\n        error: function(err) {\n          sub.add(scheduler.schedule(function() {\n            return subscriber.error(err);\n          }));\n        },\n        complete: function() {\n          sub.add(scheduler.schedule(function() {\n            return subscriber.complete();\n          }));\n        }\n      }));\n    }));\n    return sub;\n  });\n}\nfunction schedulePromise(input, scheduler) {\n  return new Observable(function(subscriber) {\n    var sub = new Subscription();\n    sub.add(scheduler.schedule(function() {\n      return input.then(function(value) {\n        sub.add(scheduler.schedule(function() {\n          subscriber.next(value);\n          sub.add(scheduler.schedule(function() {\n            return subscriber.complete();\n          }));\n        }));\n      }, function(err) {\n        sub.add(scheduler.schedule(function() {\n          return subscriber.error(err);\n        }));\n      });\n    }));\n    return sub;\n  });\n}\nfunction scheduleIterable(input, scheduler) {\n  if (!input) {\n    throw new Error(\"Iterable cannot be null\");\n  }\n  return new Observable(function(subscriber) {\n    var sub = new Subscription();\n    var iterator$1;\n    sub.add(function() {\n      if (iterator$1 && typeof iterator$1.return === \"function\") {\n        iterator$1.return();\n      }\n    });\n    sub.add(scheduler.schedule(function() {\n      iterator$1 = input[iterator]();\n      sub.add(scheduler.schedule(function() {\n        if (subscriber.closed) {\n          return;\n        }\n        var value;\n        var done;\n        try {\n          var result = iterator$1.next();\n          value = result.value;\n          done = result.done;\n        } catch (err) {\n          subscriber.error(err);\n          return;\n        }\n        if (done) {\n          subscriber.complete();\n        } else {\n          subscriber.next(value);\n          this.schedule();\n        }\n      }));\n    }));\n    return sub;\n  });\n}\nfunction isInteropObservable(input) {\n  return input && typeof input[observable] === \"function\";\n}\nfunction isIterable(input) {\n  return input && typeof input[iterator] === \"function\";\n}\nfunction scheduled(input, scheduler) {\n  if (input != null) {\n    if (isInteropObservable(input)) {\n      return scheduleObservable(input, scheduler);\n    } else if (isPromise(input)) {\n      return schedulePromise(input, scheduler);\n    } else if (isArrayLike(input)) {\n      return scheduleArray(input, scheduler);\n    } else if (isIterable(input) || typeof input === \"string\") {\n      return scheduleIterable(input, scheduler);\n    }\n  }\n  throw new TypeError((input !== null && typeof input || input) + \" is not observable\");\n}\nfunction from(input, scheduler) {\n  if (!scheduler) {\n    if (input instanceof Observable) {\n      return input;\n    }\n    return new Observable(subscribeTo(input));\n  } else {\n    return scheduled(input, scheduler);\n  }\n}\nvar SimpleInnerSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(SimpleInnerSubscriber2, _super);\n  function SimpleInnerSubscriber2(parent) {\n    var _this = _super.call(this) || this;\n    _this.parent = parent;\n    return _this;\n  }\n  SimpleInnerSubscriber2.prototype._next = function(value) {\n    this.parent.notifyNext(value);\n  };\n  SimpleInnerSubscriber2.prototype._error = function(error) {\n    this.parent.notifyError(error);\n    this.unsubscribe();\n  };\n  SimpleInnerSubscriber2.prototype._complete = function() {\n    this.parent.notifyComplete();\n    this.unsubscribe();\n  };\n  return SimpleInnerSubscriber2;\n}(Subscriber);\nvar SimpleOuterSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(SimpleOuterSubscriber2, _super);\n  function SimpleOuterSubscriber2() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  SimpleOuterSubscriber2.prototype.notifyNext = function(innerValue) {\n    this.destination.next(innerValue);\n  };\n  SimpleOuterSubscriber2.prototype.notifyError = function(err) {\n    this.destination.error(err);\n  };\n  SimpleOuterSubscriber2.prototype.notifyComplete = function() {\n    this.destination.complete();\n  };\n  return SimpleOuterSubscriber2;\n}(Subscriber);\nfunction innerSubscribe(result, innerSubscriber) {\n  if (innerSubscriber.closed) {\n    return void 0;\n  }\n  if (result instanceof Observable) {\n    return result.subscribe(innerSubscriber);\n  }\n  var subscription;\n  try {\n    subscription = subscribeTo(result)(innerSubscriber);\n  } catch (error) {\n    innerSubscriber.error(error);\n  }\n  return subscription;\n}\nfunction mergeMap(project, resultSelector, concurrent) {\n  if (concurrent === void 0) {\n    concurrent = Number.POSITIVE_INFINITY;\n  }\n  if (typeof resultSelector === \"function\") {\n    return function(source) {\n      return source.pipe(mergeMap(function(a, i) {\n        return from(project(a, i)).pipe(map(function(b, ii) {\n          return resultSelector(a, b, i, ii);\n        }));\n      }, concurrent));\n    };\n  } else if (typeof resultSelector === \"number\") {\n    concurrent = resultSelector;\n  }\n  return function(source) {\n    return source.lift(new MergeMapOperator(project, concurrent));\n  };\n}\nvar MergeMapOperator = /* @__PURE__ */ function() {\n  function MergeMapOperator2(project, concurrent) {\n    if (concurrent === void 0) {\n      concurrent = Number.POSITIVE_INFINITY;\n    }\n    this.project = project;\n    this.concurrent = concurrent;\n  }\n  MergeMapOperator2.prototype.call = function(observer, source) {\n    return source.subscribe(new MergeMapSubscriber(observer, this.project, this.concurrent));\n  };\n  return MergeMapOperator2;\n}();\nvar MergeMapSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(MergeMapSubscriber2, _super);\n  function MergeMapSubscriber2(destination, project, concurrent) {\n    if (concurrent === void 0) {\n      concurrent = Number.POSITIVE_INFINITY;\n    }\n    var _this = _super.call(this, destination) || this;\n    _this.project = project;\n    _this.concurrent = concurrent;\n    _this.hasCompleted = false;\n    _this.buffer = [];\n    _this.active = 0;\n    _this.index = 0;\n    return _this;\n  }\n  MergeMapSubscriber2.prototype._next = function(value) {\n    if (this.active < this.concurrent) {\n      this._tryNext(value);\n    } else {\n      this.buffer.push(value);\n    }\n  };\n  MergeMapSubscriber2.prototype._tryNext = function(value) {\n    var result;\n    var index = this.index++;\n    try {\n      result = this.project(value, index);\n    } catch (err) {\n      this.destination.error(err);\n      return;\n    }\n    this.active++;\n    this._innerSub(result);\n  };\n  MergeMapSubscriber2.prototype._innerSub = function(ish) {\n    var innerSubscriber = new SimpleInnerSubscriber(this);\n    var destination = this.destination;\n    destination.add(innerSubscriber);\n    var innerSubscription = innerSubscribe(ish, innerSubscriber);\n    if (innerSubscription !== innerSubscriber) {\n      destination.add(innerSubscription);\n    }\n  };\n  MergeMapSubscriber2.prototype._complete = function() {\n    this.hasCompleted = true;\n    if (this.active === 0 && this.buffer.length === 0) {\n      this.destination.complete();\n    }\n    this.unsubscribe();\n  };\n  MergeMapSubscriber2.prototype.notifyNext = function(innerValue) {\n    this.destination.next(innerValue);\n  };\n  MergeMapSubscriber2.prototype.notifyComplete = function() {\n    var buffer2 = this.buffer;\n    this.active--;\n    if (buffer2.length > 0) {\n      this._next(buffer2.shift());\n    } else if (this.active === 0 && this.hasCompleted) {\n      this.destination.complete();\n    }\n  };\n  return MergeMapSubscriber2;\n}(SimpleOuterSubscriber);\nvar flatMap = mergeMap;\nfunction mergeAll(concurrent) {\n  if (concurrent === void 0) {\n    concurrent = Number.POSITIVE_INFINITY;\n  }\n  return mergeMap(identity, concurrent);\n}\nfunction concatAll() {\n  return mergeAll(1);\n}\nfunction concat$1() {\n  var observables = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    observables[_i] = arguments[_i];\n  }\n  return concatAll()(of.apply(void 0, observables));\n}\nfunction defer(observableFactory) {\n  return new Observable(function(subscriber) {\n    var input;\n    try {\n      input = observableFactory();\n    } catch (err) {\n      subscriber.error(err);\n      return void 0;\n    }\n    var source = input ? from(input) : empty();\n    return source.subscribe(subscriber);\n  });\n}\nfunction forkJoin() {\n  var sources = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    sources[_i] = arguments[_i];\n  }\n  if (sources.length === 1) {\n    var first_1 = sources[0];\n    if (isArray(first_1)) {\n      return forkJoinInternal(first_1, null);\n    }\n    if (isObject(first_1) && Object.getPrototypeOf(first_1) === Object.prototype) {\n      var keys = Object.keys(first_1);\n      return forkJoinInternal(keys.map(function(key) {\n        return first_1[key];\n      }), keys);\n    }\n  }\n  if (typeof sources[sources.length - 1] === \"function\") {\n    var resultSelector_1 = sources.pop();\n    sources = sources.length === 1 && isArray(sources[0]) ? sources[0] : sources;\n    return forkJoinInternal(sources, null).pipe(map(function(args) {\n      return resultSelector_1.apply(void 0, args);\n    }));\n  }\n  return forkJoinInternal(sources, null);\n}\nfunction forkJoinInternal(sources, keys) {\n  return new Observable(function(subscriber) {\n    var len = sources.length;\n    if (len === 0) {\n      subscriber.complete();\n      return;\n    }\n    var values = new Array(len);\n    var completed = 0;\n    var emitted = 0;\n    var _loop_1 = function(i2) {\n      var source = from(sources[i2]);\n      var hasValue = false;\n      subscriber.add(source.subscribe({\n        next: function(value) {\n          if (!hasValue) {\n            hasValue = true;\n            emitted++;\n          }\n          values[i2] = value;\n        },\n        error: function(err) {\n          return subscriber.error(err);\n        },\n        complete: function() {\n          completed++;\n          if (completed === len || !hasValue) {\n            if (emitted === len) {\n              subscriber.next(keys ? keys.reduce(function(result, key, i3) {\n                return result[key] = values[i3], result;\n              }, {}) : values);\n            }\n            subscriber.complete();\n          }\n        }\n      }));\n    };\n    for (var i = 0; i < len; i++) {\n      _loop_1(i);\n    }\n  });\n}\nfunction fromEvent(target, eventName, options, resultSelector) {\n  if (isFunction(options)) {\n    resultSelector = options;\n    options = void 0;\n  }\n  if (resultSelector) {\n    return fromEvent(target, eventName, options).pipe(map(function(args) {\n      return isArray(args) ? resultSelector.apply(void 0, args) : resultSelector(args);\n    }));\n  }\n  return new Observable(function(subscriber) {\n    function handler(e) {\n      if (arguments.length > 1) {\n        subscriber.next(Array.prototype.slice.call(arguments));\n      } else {\n        subscriber.next(e);\n      }\n    }\n    setupSubscription(target, eventName, handler, subscriber, options);\n  });\n}\nfunction setupSubscription(sourceObj, eventName, handler, subscriber, options) {\n  var unsubscribe2;\n  if (isEventTarget(sourceObj)) {\n    var source_1 = sourceObj;\n    sourceObj.addEventListener(eventName, handler, options);\n    unsubscribe2 = function() {\n      return source_1.removeEventListener(eventName, handler, options);\n    };\n  } else if (isJQueryStyleEventEmitter(sourceObj)) {\n    var source_2 = sourceObj;\n    sourceObj.on(eventName, handler);\n    unsubscribe2 = function() {\n      return source_2.off(eventName, handler);\n    };\n  } else if (isNodeStyleEventEmitter(sourceObj)) {\n    var source_3 = sourceObj;\n    sourceObj.addListener(eventName, handler);\n    unsubscribe2 = function() {\n      return source_3.removeListener(eventName, handler);\n    };\n  } else if (sourceObj && sourceObj.length) {\n    for (var i = 0, len = sourceObj.length; i < len; i++) {\n      setupSubscription(sourceObj[i], eventName, handler, subscriber, options);\n    }\n  } else {\n    throw new TypeError(\"Invalid event target\");\n  }\n  subscriber.add(unsubscribe2);\n}\nfunction isNodeStyleEventEmitter(sourceObj) {\n  return sourceObj && typeof sourceObj.addListener === \"function\" && typeof sourceObj.removeListener === \"function\";\n}\nfunction isJQueryStyleEventEmitter(sourceObj) {\n  return sourceObj && typeof sourceObj.on === \"function\" && typeof sourceObj.off === \"function\";\n}\nfunction isEventTarget(sourceObj) {\n  return sourceObj && typeof sourceObj.addEventListener === \"function\" && typeof sourceObj.removeEventListener === \"function\";\n}\nfunction fromEventPattern(addHandler, removeHandler, resultSelector) {\n  if (resultSelector) {\n    return fromEventPattern(addHandler, removeHandler).pipe(map(function(args) {\n      return isArray(args) ? resultSelector.apply(void 0, args) : resultSelector(args);\n    }));\n  }\n  return new Observable(function(subscriber) {\n    var handler = function() {\n      var e = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        e[_i] = arguments[_i];\n      }\n      return subscriber.next(e.length === 1 ? e[0] : e);\n    };\n    var retValue;\n    try {\n      retValue = addHandler(handler);\n    } catch (err) {\n      subscriber.error(err);\n      return void 0;\n    }\n    if (!isFunction(removeHandler)) {\n      return void 0;\n    }\n    return function() {\n      return removeHandler(handler, retValue);\n    };\n  });\n}\nfunction generate(initialStateOrOptions, condition, iterate, resultSelectorOrObservable, scheduler) {\n  var resultSelector;\n  var initialState;\n  if (arguments.length == 1) {\n    var options = initialStateOrOptions;\n    initialState = options.initialState;\n    condition = options.condition;\n    iterate = options.iterate;\n    resultSelector = options.resultSelector || identity;\n    scheduler = options.scheduler;\n  } else if (resultSelectorOrObservable === void 0 || isScheduler(resultSelectorOrObservable)) {\n    initialState = initialStateOrOptions;\n    resultSelector = identity;\n    scheduler = resultSelectorOrObservable;\n  } else {\n    initialState = initialStateOrOptions;\n    resultSelector = resultSelectorOrObservable;\n  }\n  return new Observable(function(subscriber) {\n    var state = initialState;\n    if (scheduler) {\n      return scheduler.schedule(dispatch$4, 0, {\n        subscriber,\n        iterate,\n        condition,\n        resultSelector,\n        state\n      });\n    }\n    do {\n      if (condition) {\n        var conditionResult = void 0;\n        try {\n          conditionResult = condition(state);\n        } catch (err) {\n          subscriber.error(err);\n          return void 0;\n        }\n        if (!conditionResult) {\n          subscriber.complete();\n          break;\n        }\n      }\n      var value = void 0;\n      try {\n        value = resultSelector(state);\n      } catch (err) {\n        subscriber.error(err);\n        return void 0;\n      }\n      subscriber.next(value);\n      if (subscriber.closed) {\n        break;\n      }\n      try {\n        state = iterate(state);\n      } catch (err) {\n        subscriber.error(err);\n        return void 0;\n      }\n    } while (true);\n    return void 0;\n  });\n}\nfunction dispatch$4(state) {\n  var subscriber = state.subscriber, condition = state.condition;\n  if (subscriber.closed) {\n    return void 0;\n  }\n  if (state.needIterate) {\n    try {\n      state.state = state.iterate(state.state);\n    } catch (err) {\n      subscriber.error(err);\n      return void 0;\n    }\n  } else {\n    state.needIterate = true;\n  }\n  if (condition) {\n    var conditionResult = void 0;\n    try {\n      conditionResult = condition(state.state);\n    } catch (err) {\n      subscriber.error(err);\n      return void 0;\n    }\n    if (!conditionResult) {\n      subscriber.complete();\n      return void 0;\n    }\n    if (subscriber.closed) {\n      return void 0;\n    }\n  }\n  var value;\n  try {\n    value = state.resultSelector(state.state);\n  } catch (err) {\n    subscriber.error(err);\n    return void 0;\n  }\n  if (subscriber.closed) {\n    return void 0;\n  }\n  subscriber.next(value);\n  if (subscriber.closed) {\n    return void 0;\n  }\n  return this.schedule(state);\n}\nfunction iif(condition, trueResult, falseResult) {\n  if (trueResult === void 0) {\n    trueResult = EMPTY;\n  }\n  if (falseResult === void 0) {\n    falseResult = EMPTY;\n  }\n  return defer(function() {\n    return condition() ? trueResult : falseResult;\n  });\n}\nfunction isNumeric(val) {\n  return !isArray(val) && val - parseFloat(val) + 1 >= 0;\n}\nfunction interval(period, scheduler) {\n  if (period === void 0) {\n    period = 0;\n  }\n  if (scheduler === void 0) {\n    scheduler = async$1;\n  }\n  if (!isNumeric(period) || period < 0) {\n    period = 0;\n  }\n  if (!scheduler || typeof scheduler.schedule !== \"function\") {\n    scheduler = async$1;\n  }\n  return new Observable(function(subscriber) {\n    subscriber.add(scheduler.schedule(dispatch$3, period, { subscriber, counter: 0, period }));\n    return subscriber;\n  });\n}\nfunction dispatch$3(state) {\n  var subscriber = state.subscriber, counter = state.counter, period = state.period;\n  subscriber.next(counter);\n  this.schedule({ subscriber, counter: counter + 1, period }, period);\n}\nfunction merge$1() {\n  var observables = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    observables[_i] = arguments[_i];\n  }\n  var concurrent = Number.POSITIVE_INFINITY;\n  var scheduler = null;\n  var last2 = observables[observables.length - 1];\n  if (isScheduler(last2)) {\n    scheduler = observables.pop();\n    if (observables.length > 1 && typeof observables[observables.length - 1] === \"number\") {\n      concurrent = observables.pop();\n    }\n  } else if (typeof last2 === \"number\") {\n    concurrent = observables.pop();\n  }\n  if (scheduler === null && observables.length === 1 && observables[0] instanceof Observable) {\n    return observables[0];\n  }\n  return mergeAll(concurrent)(fromArray(observables, scheduler));\n}\nvar NEVER = /* @__PURE__ */ new Observable(noop$1);\nfunction never() {\n  return NEVER;\n}\nfunction onErrorResumeNext$1() {\n  var sources = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    sources[_i] = arguments[_i];\n  }\n  if (sources.length === 0) {\n    return EMPTY;\n  }\n  var first2 = sources[0], remainder = sources.slice(1);\n  if (sources.length === 1 && isArray(first2)) {\n    return onErrorResumeNext$1.apply(void 0, first2);\n  }\n  return new Observable(function(subscriber) {\n    var subNext = function() {\n      return subscriber.add(onErrorResumeNext$1.apply(void 0, remainder).subscribe(subscriber));\n    };\n    return from(first2).subscribe({\n      next: function(value) {\n        subscriber.next(value);\n      },\n      error: subNext,\n      complete: subNext\n    });\n  });\n}\nfunction pairs(obj, scheduler) {\n  if (!scheduler) {\n    return new Observable(function(subscriber) {\n      var keys = Object.keys(obj);\n      for (var i = 0; i < keys.length && !subscriber.closed; i++) {\n        var key = keys[i];\n        if (obj.hasOwnProperty(key)) {\n          subscriber.next([key, obj[key]]);\n        }\n      }\n      subscriber.complete();\n    });\n  } else {\n    return new Observable(function(subscriber) {\n      var keys = Object.keys(obj);\n      var subscription = new Subscription();\n      subscription.add(scheduler.schedule(dispatch$2, 0, { keys, index: 0, subscriber, subscription, obj }));\n      return subscription;\n    });\n  }\n}\nfunction dispatch$2(state) {\n  var keys = state.keys, index = state.index, subscriber = state.subscriber, subscription = state.subscription, obj = state.obj;\n  if (!subscriber.closed) {\n    if (index < keys.length) {\n      var key = keys[index];\n      subscriber.next([key, obj[key]]);\n      subscription.add(this.schedule({ keys, index: index + 1, subscriber, subscription, obj }));\n    } else {\n      subscriber.complete();\n    }\n  }\n}\nfunction not$1(pred, thisArg) {\n  function notPred() {\n    return !notPred.pred.apply(notPred.thisArg, arguments);\n  }\n  notPred.pred = pred;\n  notPred.thisArg = thisArg;\n  return notPred;\n}\nfunction filter(predicate, thisArg) {\n  return function filterOperatorFunction(source) {\n    return source.lift(new FilterOperator(predicate, thisArg));\n  };\n}\nvar FilterOperator = /* @__PURE__ */ function() {\n  function FilterOperator2(predicate, thisArg) {\n    this.predicate = predicate;\n    this.thisArg = thisArg;\n  }\n  FilterOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new FilterSubscriber(subscriber, this.predicate, this.thisArg));\n  };\n  return FilterOperator2;\n}();\nvar FilterSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(FilterSubscriber2, _super);\n  function FilterSubscriber2(destination, predicate, thisArg) {\n    var _this = _super.call(this, destination) || this;\n    _this.predicate = predicate;\n    _this.thisArg = thisArg;\n    _this.count = 0;\n    return _this;\n  }\n  FilterSubscriber2.prototype._next = function(value) {\n    var result;\n    try {\n      result = this.predicate.call(this.thisArg, value, this.count++);\n    } catch (err) {\n      this.destination.error(err);\n      return;\n    }\n    if (result) {\n      this.destination.next(value);\n    }\n  };\n  return FilterSubscriber2;\n}(Subscriber);\nfunction partition$1(source, predicate, thisArg) {\n  return [\n    filter(predicate, thisArg)(new Observable(subscribeTo(source))),\n    filter(not$1(predicate, thisArg))(new Observable(subscribeTo(source)))\n  ];\n}\nfunction race$1() {\n  var observables = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    observables[_i] = arguments[_i];\n  }\n  if (observables.length === 1) {\n    if (isArray(observables[0])) {\n      observables = observables[0];\n    } else {\n      return observables[0];\n    }\n  }\n  return fromArray(observables, void 0).lift(new RaceOperator());\n}\nvar RaceOperator = /* @__PURE__ */ function() {\n  function RaceOperator2() {\n  }\n  RaceOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new RaceSubscriber(subscriber));\n  };\n  return RaceOperator2;\n}();\nvar RaceSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(RaceSubscriber2, _super);\n  function RaceSubscriber2(destination) {\n    var _this = _super.call(this, destination) || this;\n    _this.hasFirst = false;\n    _this.observables = [];\n    _this.subscriptions = [];\n    return _this;\n  }\n  RaceSubscriber2.prototype._next = function(observable2) {\n    this.observables.push(observable2);\n  };\n  RaceSubscriber2.prototype._complete = function() {\n    var observables = this.observables;\n    var len = observables.length;\n    if (len === 0) {\n      this.destination.complete();\n    } else {\n      for (var i = 0; i < len && !this.hasFirst; i++) {\n        var observable2 = observables[i];\n        var subscription = subscribeToResult(this, observable2, void 0, i);\n        if (this.subscriptions) {\n          this.subscriptions.push(subscription);\n        }\n        this.add(subscription);\n      }\n      this.observables = null;\n    }\n  };\n  RaceSubscriber2.prototype.notifyNext = function(_outerValue, innerValue, outerIndex) {\n    if (!this.hasFirst) {\n      this.hasFirst = true;\n      for (var i = 0; i < this.subscriptions.length; i++) {\n        if (i !== outerIndex) {\n          var subscription = this.subscriptions[i];\n          subscription.unsubscribe();\n          this.remove(subscription);\n        }\n      }\n      this.subscriptions = null;\n    }\n    this.destination.next(innerValue);\n  };\n  return RaceSubscriber2;\n}(OuterSubscriber);\nfunction range(start, count2, scheduler) {\n  if (start === void 0) {\n    start = 0;\n  }\n  return new Observable(function(subscriber) {\n    if (count2 === void 0) {\n      count2 = start;\n      start = 0;\n    }\n    var index = 0;\n    var current = start;\n    if (scheduler) {\n      return scheduler.schedule(dispatch$1, 0, {\n        index,\n        count: count2,\n        start,\n        subscriber\n      });\n    } else {\n      do {\n        if (index++ >= count2) {\n          subscriber.complete();\n          break;\n        }\n        subscriber.next(current++);\n        if (subscriber.closed) {\n          break;\n        }\n      } while (true);\n    }\n    return void 0;\n  });\n}\nfunction dispatch$1(state) {\n  var start = state.start, index = state.index, count2 = state.count, subscriber = state.subscriber;\n  if (index >= count2) {\n    subscriber.complete();\n    return;\n  }\n  subscriber.next(start);\n  if (subscriber.closed) {\n    return;\n  }\n  state.index = index + 1;\n  state.start = start + 1;\n  this.schedule(state);\n}\nfunction timer(dueTime, periodOrScheduler, scheduler) {\n  if (dueTime === void 0) {\n    dueTime = 0;\n  }\n  var period = -1;\n  if (isNumeric(periodOrScheduler)) {\n    period = Number(periodOrScheduler) < 1 && 1 || Number(periodOrScheduler);\n  } else if (isScheduler(periodOrScheduler)) {\n    scheduler = periodOrScheduler;\n  }\n  if (!isScheduler(scheduler)) {\n    scheduler = async$1;\n  }\n  return new Observable(function(subscriber) {\n    var due = isNumeric(dueTime) ? dueTime : +dueTime - scheduler.now();\n    return scheduler.schedule(dispatch, due, {\n      index: 0,\n      period,\n      subscriber\n    });\n  });\n}\nfunction dispatch(state) {\n  var index = state.index, period = state.period, subscriber = state.subscriber;\n  subscriber.next(index);\n  if (subscriber.closed) {\n    return;\n  } else if (period === -1) {\n    return subscriber.complete();\n  }\n  state.index = index + 1;\n  this.schedule(state, period);\n}\nfunction using(resourceFactory, observableFactory) {\n  return new Observable(function(subscriber) {\n    var resource;\n    try {\n      resource = resourceFactory();\n    } catch (err) {\n      subscriber.error(err);\n      return void 0;\n    }\n    var result;\n    try {\n      result = observableFactory(resource);\n    } catch (err) {\n      subscriber.error(err);\n      return void 0;\n    }\n    var source = result ? from(result) : EMPTY;\n    var subscription = source.subscribe(subscriber);\n    return function() {\n      subscription.unsubscribe();\n      if (resource) {\n        resource.unsubscribe();\n      }\n    };\n  });\n}\nfunction zip$1() {\n  var observables = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    observables[_i] = arguments[_i];\n  }\n  var resultSelector = observables[observables.length - 1];\n  if (typeof resultSelector === \"function\") {\n    observables.pop();\n  }\n  return fromArray(observables, void 0).lift(new ZipOperator(resultSelector));\n}\nvar ZipOperator = /* @__PURE__ */ function() {\n  function ZipOperator2(resultSelector) {\n    this.resultSelector = resultSelector;\n  }\n  ZipOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new ZipSubscriber(subscriber, this.resultSelector));\n  };\n  return ZipOperator2;\n}();\nvar ZipSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(ZipSubscriber2, _super);\n  function ZipSubscriber2(destination, resultSelector, values) {\n    var _this = _super.call(this, destination) || this;\n    _this.resultSelector = resultSelector;\n    _this.iterators = [];\n    _this.active = 0;\n    _this.resultSelector = typeof resultSelector === \"function\" ? resultSelector : void 0;\n    return _this;\n  }\n  ZipSubscriber2.prototype._next = function(value) {\n    var iterators = this.iterators;\n    if (isArray(value)) {\n      iterators.push(new StaticArrayIterator(value));\n    } else if (typeof value[iterator] === \"function\") {\n      iterators.push(new StaticIterator(value[iterator]()));\n    } else {\n      iterators.push(new ZipBufferIterator(this.destination, this, value));\n    }\n  };\n  ZipSubscriber2.prototype._complete = function() {\n    var iterators = this.iterators;\n    var len = iterators.length;\n    this.unsubscribe();\n    if (len === 0) {\n      this.destination.complete();\n      return;\n    }\n    this.active = len;\n    for (var i = 0; i < len; i++) {\n      var iterator2 = iterators[i];\n      if (iterator2.stillUnsubscribed) {\n        var destination = this.destination;\n        destination.add(iterator2.subscribe());\n      } else {\n        this.active--;\n      }\n    }\n  };\n  ZipSubscriber2.prototype.notifyInactive = function() {\n    this.active--;\n    if (this.active === 0) {\n      this.destination.complete();\n    }\n  };\n  ZipSubscriber2.prototype.checkIterators = function() {\n    var iterators = this.iterators;\n    var len = iterators.length;\n    var destination = this.destination;\n    for (var i = 0; i < len; i++) {\n      var iterator2 = iterators[i];\n      if (typeof iterator2.hasValue === \"function\" && !iterator2.hasValue()) {\n        return;\n      }\n    }\n    var shouldComplete = false;\n    var args = [];\n    for (var i = 0; i < len; i++) {\n      var iterator2 = iterators[i];\n      var result = iterator2.next();\n      if (iterator2.hasCompleted()) {\n        shouldComplete = true;\n      }\n      if (result.done) {\n        destination.complete();\n        return;\n      }\n      args.push(result.value);\n    }\n    if (this.resultSelector) {\n      this._tryresultSelector(args);\n    } else {\n      destination.next(args);\n    }\n    if (shouldComplete) {\n      destination.complete();\n    }\n  };\n  ZipSubscriber2.prototype._tryresultSelector = function(args) {\n    var result;\n    try {\n      result = this.resultSelector.apply(this, args);\n    } catch (err) {\n      this.destination.error(err);\n      return;\n    }\n    this.destination.next(result);\n  };\n  return ZipSubscriber2;\n}(Subscriber);\nvar StaticIterator = /* @__PURE__ */ function() {\n  function StaticIterator2(iterator2) {\n    this.iterator = iterator2;\n    this.nextResult = iterator2.next();\n  }\n  StaticIterator2.prototype.hasValue = function() {\n    return true;\n  };\n  StaticIterator2.prototype.next = function() {\n    var result = this.nextResult;\n    this.nextResult = this.iterator.next();\n    return result;\n  };\n  StaticIterator2.prototype.hasCompleted = function() {\n    var nextResult = this.nextResult;\n    return Boolean(nextResult && nextResult.done);\n  };\n  return StaticIterator2;\n}();\nvar StaticArrayIterator = /* @__PURE__ */ function() {\n  function StaticArrayIterator2(array) {\n    this.array = array;\n    this.index = 0;\n    this.length = 0;\n    this.length = array.length;\n  }\n  StaticArrayIterator2.prototype[iterator] = function() {\n    return this;\n  };\n  StaticArrayIterator2.prototype.next = function(value) {\n    var i = this.index++;\n    var array = this.array;\n    return i < this.length ? { value: array[i], done: false } : { value: null, done: true };\n  };\n  StaticArrayIterator2.prototype.hasValue = function() {\n    return this.array.length > this.index;\n  };\n  StaticArrayIterator2.prototype.hasCompleted = function() {\n    return this.array.length === this.index;\n  };\n  return StaticArrayIterator2;\n}();\nvar ZipBufferIterator = /* @__PURE__ */ function(_super) {\n  __extends(ZipBufferIterator2, _super);\n  function ZipBufferIterator2(destination, parent, observable2) {\n    var _this = _super.call(this, destination) || this;\n    _this.parent = parent;\n    _this.observable = observable2;\n    _this.stillUnsubscribed = true;\n    _this.buffer = [];\n    _this.isComplete = false;\n    return _this;\n  }\n  ZipBufferIterator2.prototype[iterator] = function() {\n    return this;\n  };\n  ZipBufferIterator2.prototype.next = function() {\n    var buffer2 = this.buffer;\n    if (buffer2.length === 0 && this.isComplete) {\n      return { value: null, done: true };\n    } else {\n      return { value: buffer2.shift(), done: false };\n    }\n  };\n  ZipBufferIterator2.prototype.hasValue = function() {\n    return this.buffer.length > 0;\n  };\n  ZipBufferIterator2.prototype.hasCompleted = function() {\n    return this.buffer.length === 0 && this.isComplete;\n  };\n  ZipBufferIterator2.prototype.notifyComplete = function() {\n    if (this.buffer.length > 0) {\n      this.isComplete = true;\n      this.parent.notifyInactive();\n    } else {\n      this.destination.complete();\n    }\n  };\n  ZipBufferIterator2.prototype.notifyNext = function(innerValue) {\n    this.buffer.push(innerValue);\n    this.parent.checkIterators();\n  };\n  ZipBufferIterator2.prototype.subscribe = function() {\n    return innerSubscribe(this.observable, new SimpleInnerSubscriber(this));\n  };\n  return ZipBufferIterator2;\n}(SimpleOuterSubscriber);\nvar _esm5 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  Observable,\n  ConnectableObservable,\n  GroupedObservable,\n  observable,\n  Subject,\n  BehaviorSubject,\n  ReplaySubject,\n  AsyncSubject,\n  asap,\n  asapScheduler,\n  async: async$1,\n  asyncScheduler,\n  queue,\n  queueScheduler,\n  animationFrame,\n  animationFrameScheduler,\n  VirtualTimeScheduler,\n  VirtualAction,\n  Scheduler,\n  Subscription,\n  Subscriber,\n  Notification,\n  get NotificationKind() {\n    return NotificationKind;\n  },\n  pipe,\n  noop: noop$1,\n  identity,\n  isObservable,\n  ArgumentOutOfRangeError,\n  EmptyError,\n  ObjectUnsubscribedError,\n  UnsubscriptionError,\n  TimeoutError,\n  bindCallback,\n  bindNodeCallback,\n  combineLatest: combineLatest$1,\n  concat: concat$1,\n  defer,\n  empty,\n  forkJoin,\n  from,\n  fromEvent,\n  fromEventPattern,\n  generate,\n  iif,\n  interval,\n  merge: merge$1,\n  never,\n  of,\n  onErrorResumeNext: onErrorResumeNext$1,\n  pairs,\n  partition: partition$1,\n  race: race$1,\n  range,\n  throwError,\n  timer,\n  using,\n  zip: zip$1,\n  scheduled,\n  EMPTY,\n  NEVER,\n  config\n}, Symbol.toStringTag, { value: \"Module\" }));\nvar require$$12$1 = /* @__PURE__ */ getAugmentedNamespace(_esm5);\nfunction audit(durationSelector) {\n  return function auditOperatorFunction(source) {\n    return source.lift(new AuditOperator(durationSelector));\n  };\n}\nvar AuditOperator = /* @__PURE__ */ function() {\n  function AuditOperator2(durationSelector) {\n    this.durationSelector = durationSelector;\n  }\n  AuditOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new AuditSubscriber(subscriber, this.durationSelector));\n  };\n  return AuditOperator2;\n}();\nvar AuditSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(AuditSubscriber2, _super);\n  function AuditSubscriber2(destination, durationSelector) {\n    var _this = _super.call(this, destination) || this;\n    _this.durationSelector = durationSelector;\n    _this.hasValue = false;\n    return _this;\n  }\n  AuditSubscriber2.prototype._next = function(value) {\n    this.value = value;\n    this.hasValue = true;\n    if (!this.throttled) {\n      var duration = void 0;\n      try {\n        var durationSelector = this.durationSelector;\n        duration = durationSelector(value);\n      } catch (err) {\n        return this.destination.error(err);\n      }\n      var innerSubscription = innerSubscribe(duration, new SimpleInnerSubscriber(this));\n      if (!innerSubscription || innerSubscription.closed) {\n        this.clearThrottle();\n      } else {\n        this.add(this.throttled = innerSubscription);\n      }\n    }\n  };\n  AuditSubscriber2.prototype.clearThrottle = function() {\n    var _a = this, value = _a.value, hasValue = _a.hasValue, throttled = _a.throttled;\n    if (throttled) {\n      this.remove(throttled);\n      this.throttled = void 0;\n      throttled.unsubscribe();\n    }\n    if (hasValue) {\n      this.value = void 0;\n      this.hasValue = false;\n      this.destination.next(value);\n    }\n  };\n  AuditSubscriber2.prototype.notifyNext = function() {\n    this.clearThrottle();\n  };\n  AuditSubscriber2.prototype.notifyComplete = function() {\n    this.clearThrottle();\n  };\n  return AuditSubscriber2;\n}(SimpleOuterSubscriber);\nfunction auditTime(duration, scheduler) {\n  if (scheduler === void 0) {\n    scheduler = async$1;\n  }\n  return audit(function() {\n    return timer(duration, scheduler);\n  });\n}\nfunction buffer(closingNotifier) {\n  return function bufferOperatorFunction(source) {\n    return source.lift(new BufferOperator(closingNotifier));\n  };\n}\nvar BufferOperator = /* @__PURE__ */ function() {\n  function BufferOperator2(closingNotifier) {\n    this.closingNotifier = closingNotifier;\n  }\n  BufferOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new BufferSubscriber(subscriber, this.closingNotifier));\n  };\n  return BufferOperator2;\n}();\nvar BufferSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(BufferSubscriber2, _super);\n  function BufferSubscriber2(destination, closingNotifier) {\n    var _this = _super.call(this, destination) || this;\n    _this.buffer = [];\n    _this.add(innerSubscribe(closingNotifier, new SimpleInnerSubscriber(_this)));\n    return _this;\n  }\n  BufferSubscriber2.prototype._next = function(value) {\n    this.buffer.push(value);\n  };\n  BufferSubscriber2.prototype.notifyNext = function() {\n    var buffer2 = this.buffer;\n    this.buffer = [];\n    this.destination.next(buffer2);\n  };\n  return BufferSubscriber2;\n}(SimpleOuterSubscriber);\nfunction bufferCount(bufferSize, startBufferEvery) {\n  if (startBufferEvery === void 0) {\n    startBufferEvery = null;\n  }\n  return function bufferCountOperatorFunction(source) {\n    return source.lift(new BufferCountOperator(bufferSize, startBufferEvery));\n  };\n}\nvar BufferCountOperator = /* @__PURE__ */ function() {\n  function BufferCountOperator2(bufferSize, startBufferEvery) {\n    this.bufferSize = bufferSize;\n    this.startBufferEvery = startBufferEvery;\n    if (!startBufferEvery || bufferSize === startBufferEvery) {\n      this.subscriberClass = BufferCountSubscriber;\n    } else {\n      this.subscriberClass = BufferSkipCountSubscriber;\n    }\n  }\n  BufferCountOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new this.subscriberClass(subscriber, this.bufferSize, this.startBufferEvery));\n  };\n  return BufferCountOperator2;\n}();\nvar BufferCountSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(BufferCountSubscriber2, _super);\n  function BufferCountSubscriber2(destination, bufferSize) {\n    var _this = _super.call(this, destination) || this;\n    _this.bufferSize = bufferSize;\n    _this.buffer = [];\n    return _this;\n  }\n  BufferCountSubscriber2.prototype._next = function(value) {\n    var buffer2 = this.buffer;\n    buffer2.push(value);\n    if (buffer2.length == this.bufferSize) {\n      this.destination.next(buffer2);\n      this.buffer = [];\n    }\n  };\n  BufferCountSubscriber2.prototype._complete = function() {\n    var buffer2 = this.buffer;\n    if (buffer2.length > 0) {\n      this.destination.next(buffer2);\n    }\n    _super.prototype._complete.call(this);\n  };\n  return BufferCountSubscriber2;\n}(Subscriber);\nvar BufferSkipCountSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(BufferSkipCountSubscriber2, _super);\n  function BufferSkipCountSubscriber2(destination, bufferSize, startBufferEvery) {\n    var _this = _super.call(this, destination) || this;\n    _this.bufferSize = bufferSize;\n    _this.startBufferEvery = startBufferEvery;\n    _this.buffers = [];\n    _this.count = 0;\n    return _this;\n  }\n  BufferSkipCountSubscriber2.prototype._next = function(value) {\n    var _a = this, bufferSize = _a.bufferSize, startBufferEvery = _a.startBufferEvery, buffers = _a.buffers, count2 = _a.count;\n    this.count++;\n    if (count2 % startBufferEvery === 0) {\n      buffers.push([]);\n    }\n    for (var i = buffers.length; i--; ) {\n      var buffer2 = buffers[i];\n      buffer2.push(value);\n      if (buffer2.length === bufferSize) {\n        buffers.splice(i, 1);\n        this.destination.next(buffer2);\n      }\n    }\n  };\n  BufferSkipCountSubscriber2.prototype._complete = function() {\n    var _a = this, buffers = _a.buffers, destination = _a.destination;\n    while (buffers.length > 0) {\n      var buffer2 = buffers.shift();\n      if (buffer2.length > 0) {\n        destination.next(buffer2);\n      }\n    }\n    _super.prototype._complete.call(this);\n  };\n  return BufferSkipCountSubscriber2;\n}(Subscriber);\nfunction bufferTime(bufferTimeSpan) {\n  var length = arguments.length;\n  var scheduler = async$1;\n  if (isScheduler(arguments[arguments.length - 1])) {\n    scheduler = arguments[arguments.length - 1];\n    length--;\n  }\n  var bufferCreationInterval = null;\n  if (length >= 2) {\n    bufferCreationInterval = arguments[1];\n  }\n  var maxBufferSize = Number.POSITIVE_INFINITY;\n  if (length >= 3) {\n    maxBufferSize = arguments[2];\n  }\n  return function bufferTimeOperatorFunction(source) {\n    return source.lift(new BufferTimeOperator(bufferTimeSpan, bufferCreationInterval, maxBufferSize, scheduler));\n  };\n}\nvar BufferTimeOperator = /* @__PURE__ */ function() {\n  function BufferTimeOperator2(bufferTimeSpan, bufferCreationInterval, maxBufferSize, scheduler) {\n    this.bufferTimeSpan = bufferTimeSpan;\n    this.bufferCreationInterval = bufferCreationInterval;\n    this.maxBufferSize = maxBufferSize;\n    this.scheduler = scheduler;\n  }\n  BufferTimeOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new BufferTimeSubscriber(subscriber, this.bufferTimeSpan, this.bufferCreationInterval, this.maxBufferSize, this.scheduler));\n  };\n  return BufferTimeOperator2;\n}();\nvar Context2 = /* @__PURE__ */ function() {\n  function Context3() {\n    this.buffer = [];\n  }\n  return Context3;\n}();\nvar BufferTimeSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(BufferTimeSubscriber2, _super);\n  function BufferTimeSubscriber2(destination, bufferTimeSpan, bufferCreationInterval, maxBufferSize, scheduler) {\n    var _this = _super.call(this, destination) || this;\n    _this.bufferTimeSpan = bufferTimeSpan;\n    _this.bufferCreationInterval = bufferCreationInterval;\n    _this.maxBufferSize = maxBufferSize;\n    _this.scheduler = scheduler;\n    _this.contexts = [];\n    var context2 = _this.openContext();\n    _this.timespanOnly = bufferCreationInterval == null || bufferCreationInterval < 0;\n    if (_this.timespanOnly) {\n      var timeSpanOnlyState = { subscriber: _this, context: context2, bufferTimeSpan };\n      _this.add(context2.closeAction = scheduler.schedule(dispatchBufferTimeSpanOnly, bufferTimeSpan, timeSpanOnlyState));\n    } else {\n      var closeState = { subscriber: _this, context: context2 };\n      var creationState = { bufferTimeSpan, bufferCreationInterval, subscriber: _this, scheduler };\n      _this.add(context2.closeAction = scheduler.schedule(dispatchBufferClose, bufferTimeSpan, closeState));\n      _this.add(scheduler.schedule(dispatchBufferCreation, bufferCreationInterval, creationState));\n    }\n    return _this;\n  }\n  BufferTimeSubscriber2.prototype._next = function(value) {\n    var contexts = this.contexts;\n    var len = contexts.length;\n    var filledBufferContext;\n    for (var i = 0; i < len; i++) {\n      var context_1 = contexts[i];\n      var buffer2 = context_1.buffer;\n      buffer2.push(value);\n      if (buffer2.length == this.maxBufferSize) {\n        filledBufferContext = context_1;\n      }\n    }\n    if (filledBufferContext) {\n      this.onBufferFull(filledBufferContext);\n    }\n  };\n  BufferTimeSubscriber2.prototype._error = function(err) {\n    this.contexts.length = 0;\n    _super.prototype._error.call(this, err);\n  };\n  BufferTimeSubscriber2.prototype._complete = function() {\n    var _a = this, contexts = _a.contexts, destination = _a.destination;\n    while (contexts.length > 0) {\n      var context_2 = contexts.shift();\n      destination.next(context_2.buffer);\n    }\n    _super.prototype._complete.call(this);\n  };\n  BufferTimeSubscriber2.prototype._unsubscribe = function() {\n    this.contexts = null;\n  };\n  BufferTimeSubscriber2.prototype.onBufferFull = function(context2) {\n    this.closeContext(context2);\n    var closeAction = context2.closeAction;\n    closeAction.unsubscribe();\n    this.remove(closeAction);\n    if (!this.closed && this.timespanOnly) {\n      context2 = this.openContext();\n      var bufferTimeSpan = this.bufferTimeSpan;\n      var timeSpanOnlyState = { subscriber: this, context: context2, bufferTimeSpan };\n      this.add(context2.closeAction = this.scheduler.schedule(dispatchBufferTimeSpanOnly, bufferTimeSpan, timeSpanOnlyState));\n    }\n  };\n  BufferTimeSubscriber2.prototype.openContext = function() {\n    var context2 = new Context2();\n    this.contexts.push(context2);\n    return context2;\n  };\n  BufferTimeSubscriber2.prototype.closeContext = function(context2) {\n    this.destination.next(context2.buffer);\n    var contexts = this.contexts;\n    var spliceIndex = contexts ? contexts.indexOf(context2) : -1;\n    if (spliceIndex >= 0) {\n      contexts.splice(contexts.indexOf(context2), 1);\n    }\n  };\n  return BufferTimeSubscriber2;\n}(Subscriber);\nfunction dispatchBufferTimeSpanOnly(state) {\n  var subscriber = state.subscriber;\n  var prevContext = state.context;\n  if (prevContext) {\n    subscriber.closeContext(prevContext);\n  }\n  if (!subscriber.closed) {\n    state.context = subscriber.openContext();\n    state.context.closeAction = this.schedule(state, state.bufferTimeSpan);\n  }\n}\nfunction dispatchBufferCreation(state) {\n  var bufferCreationInterval = state.bufferCreationInterval, bufferTimeSpan = state.bufferTimeSpan, subscriber = state.subscriber, scheduler = state.scheduler;\n  var context2 = subscriber.openContext();\n  var action = this;\n  if (!subscriber.closed) {\n    subscriber.add(context2.closeAction = scheduler.schedule(dispatchBufferClose, bufferTimeSpan, { subscriber, context: context2 }));\n    action.schedule(state, bufferCreationInterval);\n  }\n}\nfunction dispatchBufferClose(arg) {\n  var subscriber = arg.subscriber, context2 = arg.context;\n  subscriber.closeContext(context2);\n}\nfunction bufferToggle(openings, closingSelector) {\n  return function bufferToggleOperatorFunction(source) {\n    return source.lift(new BufferToggleOperator(openings, closingSelector));\n  };\n}\nvar BufferToggleOperator = /* @__PURE__ */ function() {\n  function BufferToggleOperator2(openings, closingSelector) {\n    this.openings = openings;\n    this.closingSelector = closingSelector;\n  }\n  BufferToggleOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new BufferToggleSubscriber(subscriber, this.openings, this.closingSelector));\n  };\n  return BufferToggleOperator2;\n}();\nvar BufferToggleSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(BufferToggleSubscriber2, _super);\n  function BufferToggleSubscriber2(destination, openings, closingSelector) {\n    var _this = _super.call(this, destination) || this;\n    _this.closingSelector = closingSelector;\n    _this.contexts = [];\n    _this.add(subscribeToResult(_this, openings));\n    return _this;\n  }\n  BufferToggleSubscriber2.prototype._next = function(value) {\n    var contexts = this.contexts;\n    var len = contexts.length;\n    for (var i = 0; i < len; i++) {\n      contexts[i].buffer.push(value);\n    }\n  };\n  BufferToggleSubscriber2.prototype._error = function(err) {\n    var contexts = this.contexts;\n    while (contexts.length > 0) {\n      var context_1 = contexts.shift();\n      context_1.subscription.unsubscribe();\n      context_1.buffer = null;\n      context_1.subscription = null;\n    }\n    this.contexts = null;\n    _super.prototype._error.call(this, err);\n  };\n  BufferToggleSubscriber2.prototype._complete = function() {\n    var contexts = this.contexts;\n    while (contexts.length > 0) {\n      var context_2 = contexts.shift();\n      this.destination.next(context_2.buffer);\n      context_2.subscription.unsubscribe();\n      context_2.buffer = null;\n      context_2.subscription = null;\n    }\n    this.contexts = null;\n    _super.prototype._complete.call(this);\n  };\n  BufferToggleSubscriber2.prototype.notifyNext = function(outerValue, innerValue) {\n    outerValue ? this.closeBuffer(outerValue) : this.openBuffer(innerValue);\n  };\n  BufferToggleSubscriber2.prototype.notifyComplete = function(innerSub) {\n    this.closeBuffer(innerSub.context);\n  };\n  BufferToggleSubscriber2.prototype.openBuffer = function(value) {\n    try {\n      var closingSelector = this.closingSelector;\n      var closingNotifier = closingSelector.call(this, value);\n      if (closingNotifier) {\n        this.trySubscribe(closingNotifier);\n      }\n    } catch (err) {\n      this._error(err);\n    }\n  };\n  BufferToggleSubscriber2.prototype.closeBuffer = function(context2) {\n    var contexts = this.contexts;\n    if (contexts && context2) {\n      var buffer2 = context2.buffer, subscription = context2.subscription;\n      this.destination.next(buffer2);\n      contexts.splice(contexts.indexOf(context2), 1);\n      this.remove(subscription);\n      subscription.unsubscribe();\n    }\n  };\n  BufferToggleSubscriber2.prototype.trySubscribe = function(closingNotifier) {\n    var contexts = this.contexts;\n    var buffer2 = [];\n    var subscription = new Subscription();\n    var context2 = { buffer: buffer2, subscription };\n    contexts.push(context2);\n    var innerSubscription = subscribeToResult(this, closingNotifier, context2);\n    if (!innerSubscription || innerSubscription.closed) {\n      this.closeBuffer(context2);\n    } else {\n      innerSubscription.context = context2;\n      this.add(innerSubscription);\n      subscription.add(innerSubscription);\n    }\n  };\n  return BufferToggleSubscriber2;\n}(OuterSubscriber);\nfunction bufferWhen(closingSelector) {\n  return function(source) {\n    return source.lift(new BufferWhenOperator(closingSelector));\n  };\n}\nvar BufferWhenOperator = /* @__PURE__ */ function() {\n  function BufferWhenOperator2(closingSelector) {\n    this.closingSelector = closingSelector;\n  }\n  BufferWhenOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new BufferWhenSubscriber(subscriber, this.closingSelector));\n  };\n  return BufferWhenOperator2;\n}();\nvar BufferWhenSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(BufferWhenSubscriber2, _super);\n  function BufferWhenSubscriber2(destination, closingSelector) {\n    var _this = _super.call(this, destination) || this;\n    _this.closingSelector = closingSelector;\n    _this.subscribing = false;\n    _this.openBuffer();\n    return _this;\n  }\n  BufferWhenSubscriber2.prototype._next = function(value) {\n    this.buffer.push(value);\n  };\n  BufferWhenSubscriber2.prototype._complete = function() {\n    var buffer2 = this.buffer;\n    if (buffer2) {\n      this.destination.next(buffer2);\n    }\n    _super.prototype._complete.call(this);\n  };\n  BufferWhenSubscriber2.prototype._unsubscribe = function() {\n    this.buffer = void 0;\n    this.subscribing = false;\n  };\n  BufferWhenSubscriber2.prototype.notifyNext = function() {\n    this.openBuffer();\n  };\n  BufferWhenSubscriber2.prototype.notifyComplete = function() {\n    if (this.subscribing) {\n      this.complete();\n    } else {\n      this.openBuffer();\n    }\n  };\n  BufferWhenSubscriber2.prototype.openBuffer = function() {\n    var closingSubscription = this.closingSubscription;\n    if (closingSubscription) {\n      this.remove(closingSubscription);\n      closingSubscription.unsubscribe();\n    }\n    var buffer2 = this.buffer;\n    if (this.buffer) {\n      this.destination.next(buffer2);\n    }\n    this.buffer = [];\n    var closingNotifier;\n    try {\n      var closingSelector = this.closingSelector;\n      closingNotifier = closingSelector();\n    } catch (err) {\n      return this.error(err);\n    }\n    closingSubscription = new Subscription();\n    this.closingSubscription = closingSubscription;\n    this.add(closingSubscription);\n    this.subscribing = true;\n    closingSubscription.add(innerSubscribe(closingNotifier, new SimpleInnerSubscriber(this)));\n    this.subscribing = false;\n  };\n  return BufferWhenSubscriber2;\n}(SimpleOuterSubscriber);\nfunction catchError(selector) {\n  return function catchErrorOperatorFunction(source) {\n    var operator = new CatchOperator(selector);\n    var caught = source.lift(operator);\n    return operator.caught = caught;\n  };\n}\nvar CatchOperator = /* @__PURE__ */ function() {\n  function CatchOperator2(selector) {\n    this.selector = selector;\n  }\n  CatchOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new CatchSubscriber(subscriber, this.selector, this.caught));\n  };\n  return CatchOperator2;\n}();\nvar CatchSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(CatchSubscriber2, _super);\n  function CatchSubscriber2(destination, selector, caught) {\n    var _this = _super.call(this, destination) || this;\n    _this.selector = selector;\n    _this.caught = caught;\n    return _this;\n  }\n  CatchSubscriber2.prototype.error = function(err) {\n    if (!this.isStopped) {\n      var result = void 0;\n      try {\n        result = this.selector(err, this.caught);\n      } catch (err2) {\n        _super.prototype.error.call(this, err2);\n        return;\n      }\n      this._unsubscribeAndRecycle();\n      var innerSubscriber = new SimpleInnerSubscriber(this);\n      this.add(innerSubscriber);\n      var innerSubscription = innerSubscribe(result, innerSubscriber);\n      if (innerSubscription !== innerSubscriber) {\n        this.add(innerSubscription);\n      }\n    }\n  };\n  return CatchSubscriber2;\n}(SimpleOuterSubscriber);\nfunction combineAll(project) {\n  return function(source) {\n    return source.lift(new CombineLatestOperator(project));\n  };\n}\nfunction combineLatest() {\n  var observables = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    observables[_i] = arguments[_i];\n  }\n  var project = null;\n  if (typeof observables[observables.length - 1] === \"function\") {\n    project = observables.pop();\n  }\n  if (observables.length === 1 && isArray(observables[0])) {\n    observables = observables[0].slice();\n  }\n  return function(source) {\n    return source.lift.call(from([source].concat(observables)), new CombineLatestOperator(project));\n  };\n}\nfunction concat() {\n  var observables = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    observables[_i] = arguments[_i];\n  }\n  return function(source) {\n    return source.lift.call(concat$1.apply(void 0, [source].concat(observables)));\n  };\n}\nfunction concatMap(project, resultSelector) {\n  return mergeMap(project, resultSelector, 1);\n}\nfunction concatMapTo(innerObservable, resultSelector) {\n  return concatMap(function() {\n    return innerObservable;\n  }, resultSelector);\n}\nfunction count(predicate) {\n  return function(source) {\n    return source.lift(new CountOperator(predicate, source));\n  };\n}\nvar CountOperator = /* @__PURE__ */ function() {\n  function CountOperator2(predicate, source) {\n    this.predicate = predicate;\n    this.source = source;\n  }\n  CountOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new CountSubscriber(subscriber, this.predicate, this.source));\n  };\n  return CountOperator2;\n}();\nvar CountSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(CountSubscriber2, _super);\n  function CountSubscriber2(destination, predicate, source) {\n    var _this = _super.call(this, destination) || this;\n    _this.predicate = predicate;\n    _this.source = source;\n    _this.count = 0;\n    _this.index = 0;\n    return _this;\n  }\n  CountSubscriber2.prototype._next = function(value) {\n    if (this.predicate) {\n      this._tryPredicate(value);\n    } else {\n      this.count++;\n    }\n  };\n  CountSubscriber2.prototype._tryPredicate = function(value) {\n    var result;\n    try {\n      result = this.predicate(value, this.index++, this.source);\n    } catch (err) {\n      this.destination.error(err);\n      return;\n    }\n    if (result) {\n      this.count++;\n    }\n  };\n  CountSubscriber2.prototype._complete = function() {\n    this.destination.next(this.count);\n    this.destination.complete();\n  };\n  return CountSubscriber2;\n}(Subscriber);\nfunction debounce(durationSelector) {\n  return function(source) {\n    return source.lift(new DebounceOperator(durationSelector));\n  };\n}\nvar DebounceOperator = /* @__PURE__ */ function() {\n  function DebounceOperator2(durationSelector) {\n    this.durationSelector = durationSelector;\n  }\n  DebounceOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new DebounceSubscriber(subscriber, this.durationSelector));\n  };\n  return DebounceOperator2;\n}();\nvar DebounceSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(DebounceSubscriber2, _super);\n  function DebounceSubscriber2(destination, durationSelector) {\n    var _this = _super.call(this, destination) || this;\n    _this.durationSelector = durationSelector;\n    _this.hasValue = false;\n    return _this;\n  }\n  DebounceSubscriber2.prototype._next = function(value) {\n    try {\n      var result = this.durationSelector.call(this, value);\n      if (result) {\n        this._tryNext(value, result);\n      }\n    } catch (err) {\n      this.destination.error(err);\n    }\n  };\n  DebounceSubscriber2.prototype._complete = function() {\n    this.emitValue();\n    this.destination.complete();\n  };\n  DebounceSubscriber2.prototype._tryNext = function(value, duration) {\n    var subscription = this.durationSubscription;\n    this.value = value;\n    this.hasValue = true;\n    if (subscription) {\n      subscription.unsubscribe();\n      this.remove(subscription);\n    }\n    subscription = innerSubscribe(duration, new SimpleInnerSubscriber(this));\n    if (subscription && !subscription.closed) {\n      this.add(this.durationSubscription = subscription);\n    }\n  };\n  DebounceSubscriber2.prototype.notifyNext = function() {\n    this.emitValue();\n  };\n  DebounceSubscriber2.prototype.notifyComplete = function() {\n    this.emitValue();\n  };\n  DebounceSubscriber2.prototype.emitValue = function() {\n    if (this.hasValue) {\n      var value = this.value;\n      var subscription = this.durationSubscription;\n      if (subscription) {\n        this.durationSubscription = void 0;\n        subscription.unsubscribe();\n        this.remove(subscription);\n      }\n      this.value = void 0;\n      this.hasValue = false;\n      _super.prototype._next.call(this, value);\n    }\n  };\n  return DebounceSubscriber2;\n}(SimpleOuterSubscriber);\nfunction debounceTime(dueTime, scheduler) {\n  if (scheduler === void 0) {\n    scheduler = async$1;\n  }\n  return function(source) {\n    return source.lift(new DebounceTimeOperator(dueTime, scheduler));\n  };\n}\nvar DebounceTimeOperator = /* @__PURE__ */ function() {\n  function DebounceTimeOperator2(dueTime, scheduler) {\n    this.dueTime = dueTime;\n    this.scheduler = scheduler;\n  }\n  DebounceTimeOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new DebounceTimeSubscriber(subscriber, this.dueTime, this.scheduler));\n  };\n  return DebounceTimeOperator2;\n}();\nvar DebounceTimeSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(DebounceTimeSubscriber2, _super);\n  function DebounceTimeSubscriber2(destination, dueTime, scheduler) {\n    var _this = _super.call(this, destination) || this;\n    _this.dueTime = dueTime;\n    _this.scheduler = scheduler;\n    _this.debouncedSubscription = null;\n    _this.lastValue = null;\n    _this.hasValue = false;\n    return _this;\n  }\n  DebounceTimeSubscriber2.prototype._next = function(value) {\n    this.clearDebounce();\n    this.lastValue = value;\n    this.hasValue = true;\n    this.add(this.debouncedSubscription = this.scheduler.schedule(dispatchNext$1, this.dueTime, this));\n  };\n  DebounceTimeSubscriber2.prototype._complete = function() {\n    this.debouncedNext();\n    this.destination.complete();\n  };\n  DebounceTimeSubscriber2.prototype.debouncedNext = function() {\n    this.clearDebounce();\n    if (this.hasValue) {\n      var lastValue = this.lastValue;\n      this.lastValue = null;\n      this.hasValue = false;\n      this.destination.next(lastValue);\n    }\n  };\n  DebounceTimeSubscriber2.prototype.clearDebounce = function() {\n    var debouncedSubscription = this.debouncedSubscription;\n    if (debouncedSubscription !== null) {\n      this.remove(debouncedSubscription);\n      debouncedSubscription.unsubscribe();\n      this.debouncedSubscription = null;\n    }\n  };\n  return DebounceTimeSubscriber2;\n}(Subscriber);\nfunction dispatchNext$1(subscriber) {\n  subscriber.debouncedNext();\n}\nfunction defaultIfEmpty(defaultValue) {\n  if (defaultValue === void 0) {\n    defaultValue = null;\n  }\n  return function(source) {\n    return source.lift(new DefaultIfEmptyOperator(defaultValue));\n  };\n}\nvar DefaultIfEmptyOperator = /* @__PURE__ */ function() {\n  function DefaultIfEmptyOperator2(defaultValue) {\n    this.defaultValue = defaultValue;\n  }\n  DefaultIfEmptyOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new DefaultIfEmptySubscriber(subscriber, this.defaultValue));\n  };\n  return DefaultIfEmptyOperator2;\n}();\nvar DefaultIfEmptySubscriber = /* @__PURE__ */ function(_super) {\n  __extends(DefaultIfEmptySubscriber2, _super);\n  function DefaultIfEmptySubscriber2(destination, defaultValue) {\n    var _this = _super.call(this, destination) || this;\n    _this.defaultValue = defaultValue;\n    _this.isEmpty = true;\n    return _this;\n  }\n  DefaultIfEmptySubscriber2.prototype._next = function(value) {\n    this.isEmpty = false;\n    this.destination.next(value);\n  };\n  DefaultIfEmptySubscriber2.prototype._complete = function() {\n    if (this.isEmpty) {\n      this.destination.next(this.defaultValue);\n    }\n    this.destination.complete();\n  };\n  return DefaultIfEmptySubscriber2;\n}(Subscriber);\nfunction isDate(value) {\n  return value instanceof Date && !isNaN(+value);\n}\nfunction delay(delay2, scheduler) {\n  if (scheduler === void 0) {\n    scheduler = async$1;\n  }\n  var absoluteDelay = isDate(delay2);\n  var delayFor = absoluteDelay ? +delay2 - scheduler.now() : Math.abs(delay2);\n  return function(source) {\n    return source.lift(new DelayOperator(delayFor, scheduler));\n  };\n}\nvar DelayOperator = /* @__PURE__ */ function() {\n  function DelayOperator2(delay2, scheduler) {\n    this.delay = delay2;\n    this.scheduler = scheduler;\n  }\n  DelayOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new DelaySubscriber(subscriber, this.delay, this.scheduler));\n  };\n  return DelayOperator2;\n}();\nvar DelaySubscriber = /* @__PURE__ */ function(_super) {\n  __extends(DelaySubscriber2, _super);\n  function DelaySubscriber2(destination, delay2, scheduler) {\n    var _this = _super.call(this, destination) || this;\n    _this.delay = delay2;\n    _this.scheduler = scheduler;\n    _this.queue = [];\n    _this.active = false;\n    _this.errored = false;\n    return _this;\n  }\n  DelaySubscriber2.dispatch = function(state) {\n    var source = state.source;\n    var queue2 = source.queue;\n    var scheduler = state.scheduler;\n    var destination = state.destination;\n    while (queue2.length > 0 && queue2[0].time - scheduler.now() <= 0) {\n      queue2.shift().notification.observe(destination);\n    }\n    if (queue2.length > 0) {\n      var delay_1 = Math.max(0, queue2[0].time - scheduler.now());\n      this.schedule(state, delay_1);\n    } else {\n      this.unsubscribe();\n      source.active = false;\n    }\n  };\n  DelaySubscriber2.prototype._schedule = function(scheduler) {\n    this.active = true;\n    var destination = this.destination;\n    destination.add(scheduler.schedule(DelaySubscriber2.dispatch, this.delay, {\n      source: this,\n      destination: this.destination,\n      scheduler\n    }));\n  };\n  DelaySubscriber2.prototype.scheduleNotification = function(notification) {\n    if (this.errored === true) {\n      return;\n    }\n    var scheduler = this.scheduler;\n    var message = new DelayMessage(scheduler.now() + this.delay, notification);\n    this.queue.push(message);\n    if (this.active === false) {\n      this._schedule(scheduler);\n    }\n  };\n  DelaySubscriber2.prototype._next = function(value) {\n    this.scheduleNotification(Notification.createNext(value));\n  };\n  DelaySubscriber2.prototype._error = function(err) {\n    this.errored = true;\n    this.queue = [];\n    this.destination.error(err);\n    this.unsubscribe();\n  };\n  DelaySubscriber2.prototype._complete = function() {\n    this.scheduleNotification(Notification.createComplete());\n    this.unsubscribe();\n  };\n  return DelaySubscriber2;\n}(Subscriber);\nvar DelayMessage = /* @__PURE__ */ function() {\n  function DelayMessage2(time2, notification) {\n    this.time = time2;\n    this.notification = notification;\n  }\n  return DelayMessage2;\n}();\nfunction delayWhen(delayDurationSelector, subscriptionDelay) {\n  if (subscriptionDelay) {\n    return function(source) {\n      return new SubscriptionDelayObservable(source, subscriptionDelay).lift(new DelayWhenOperator(delayDurationSelector));\n    };\n  }\n  return function(source) {\n    return source.lift(new DelayWhenOperator(delayDurationSelector));\n  };\n}\nvar DelayWhenOperator = /* @__PURE__ */ function() {\n  function DelayWhenOperator2(delayDurationSelector) {\n    this.delayDurationSelector = delayDurationSelector;\n  }\n  DelayWhenOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new DelayWhenSubscriber(subscriber, this.delayDurationSelector));\n  };\n  return DelayWhenOperator2;\n}();\nvar DelayWhenSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(DelayWhenSubscriber2, _super);\n  function DelayWhenSubscriber2(destination, delayDurationSelector) {\n    var _this = _super.call(this, destination) || this;\n    _this.delayDurationSelector = delayDurationSelector;\n    _this.completed = false;\n    _this.delayNotifierSubscriptions = [];\n    _this.index = 0;\n    return _this;\n  }\n  DelayWhenSubscriber2.prototype.notifyNext = function(outerValue, _innerValue, _outerIndex, _innerIndex, innerSub) {\n    this.destination.next(outerValue);\n    this.removeSubscription(innerSub);\n    this.tryComplete();\n  };\n  DelayWhenSubscriber2.prototype.notifyError = function(error, innerSub) {\n    this._error(error);\n  };\n  DelayWhenSubscriber2.prototype.notifyComplete = function(innerSub) {\n    var value = this.removeSubscription(innerSub);\n    if (value) {\n      this.destination.next(value);\n    }\n    this.tryComplete();\n  };\n  DelayWhenSubscriber2.prototype._next = function(value) {\n    var index = this.index++;\n    try {\n      var delayNotifier = this.delayDurationSelector(value, index);\n      if (delayNotifier) {\n        this.tryDelay(delayNotifier, value);\n      }\n    } catch (err) {\n      this.destination.error(err);\n    }\n  };\n  DelayWhenSubscriber2.prototype._complete = function() {\n    this.completed = true;\n    this.tryComplete();\n    this.unsubscribe();\n  };\n  DelayWhenSubscriber2.prototype.removeSubscription = function(subscription) {\n    subscription.unsubscribe();\n    var subscriptionIdx = this.delayNotifierSubscriptions.indexOf(subscription);\n    if (subscriptionIdx !== -1) {\n      this.delayNotifierSubscriptions.splice(subscriptionIdx, 1);\n    }\n    return subscription.outerValue;\n  };\n  DelayWhenSubscriber2.prototype.tryDelay = function(delayNotifier, value) {\n    var notifierSubscription = subscribeToResult(this, delayNotifier, value);\n    if (notifierSubscription && !notifierSubscription.closed) {\n      var destination = this.destination;\n      destination.add(notifierSubscription);\n      this.delayNotifierSubscriptions.push(notifierSubscription);\n    }\n  };\n  DelayWhenSubscriber2.prototype.tryComplete = function() {\n    if (this.completed && this.delayNotifierSubscriptions.length === 0) {\n      this.destination.complete();\n    }\n  };\n  return DelayWhenSubscriber2;\n}(OuterSubscriber);\nvar SubscriptionDelayObservable = /* @__PURE__ */ function(_super) {\n  __extends(SubscriptionDelayObservable2, _super);\n  function SubscriptionDelayObservable2(source, subscriptionDelay) {\n    var _this = _super.call(this) || this;\n    _this.source = source;\n    _this.subscriptionDelay = subscriptionDelay;\n    return _this;\n  }\n  SubscriptionDelayObservable2.prototype._subscribe = function(subscriber) {\n    this.subscriptionDelay.subscribe(new SubscriptionDelaySubscriber(subscriber, this.source));\n  };\n  return SubscriptionDelayObservable2;\n}(Observable);\nvar SubscriptionDelaySubscriber = /* @__PURE__ */ function(_super) {\n  __extends(SubscriptionDelaySubscriber2, _super);\n  function SubscriptionDelaySubscriber2(parent, source) {\n    var _this = _super.call(this) || this;\n    _this.parent = parent;\n    _this.source = source;\n    _this.sourceSubscribed = false;\n    return _this;\n  }\n  SubscriptionDelaySubscriber2.prototype._next = function(unused) {\n    this.subscribeToSource();\n  };\n  SubscriptionDelaySubscriber2.prototype._error = function(err) {\n    this.unsubscribe();\n    this.parent.error(err);\n  };\n  SubscriptionDelaySubscriber2.prototype._complete = function() {\n    this.unsubscribe();\n    this.subscribeToSource();\n  };\n  SubscriptionDelaySubscriber2.prototype.subscribeToSource = function() {\n    if (!this.sourceSubscribed) {\n      this.sourceSubscribed = true;\n      this.unsubscribe();\n      this.source.subscribe(this.parent);\n    }\n  };\n  return SubscriptionDelaySubscriber2;\n}(Subscriber);\nfunction dematerialize() {\n  return function dematerializeOperatorFunction(source) {\n    return source.lift(new DeMaterializeOperator());\n  };\n}\nvar DeMaterializeOperator = /* @__PURE__ */ function() {\n  function DeMaterializeOperator2() {\n  }\n  DeMaterializeOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new DeMaterializeSubscriber(subscriber));\n  };\n  return DeMaterializeOperator2;\n}();\nvar DeMaterializeSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(DeMaterializeSubscriber2, _super);\n  function DeMaterializeSubscriber2(destination) {\n    return _super.call(this, destination) || this;\n  }\n  DeMaterializeSubscriber2.prototype._next = function(value) {\n    value.observe(this.destination);\n  };\n  return DeMaterializeSubscriber2;\n}(Subscriber);\nfunction distinct(keySelector, flushes) {\n  return function(source) {\n    return source.lift(new DistinctOperator(keySelector, flushes));\n  };\n}\nvar DistinctOperator = /* @__PURE__ */ function() {\n  function DistinctOperator2(keySelector, flushes) {\n    this.keySelector = keySelector;\n    this.flushes = flushes;\n  }\n  DistinctOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new DistinctSubscriber(subscriber, this.keySelector, this.flushes));\n  };\n  return DistinctOperator2;\n}();\nvar DistinctSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(DistinctSubscriber2, _super);\n  function DistinctSubscriber2(destination, keySelector, flushes) {\n    var _this = _super.call(this, destination) || this;\n    _this.keySelector = keySelector;\n    _this.values = /* @__PURE__ */ new Set();\n    if (flushes) {\n      _this.add(innerSubscribe(flushes, new SimpleInnerSubscriber(_this)));\n    }\n    return _this;\n  }\n  DistinctSubscriber2.prototype.notifyNext = function() {\n    this.values.clear();\n  };\n  DistinctSubscriber2.prototype.notifyError = function(error) {\n    this._error(error);\n  };\n  DistinctSubscriber2.prototype._next = function(value) {\n    if (this.keySelector) {\n      this._useKeySelector(value);\n    } else {\n      this._finalizeNext(value, value);\n    }\n  };\n  DistinctSubscriber2.prototype._useKeySelector = function(value) {\n    var key;\n    var destination = this.destination;\n    try {\n      key = this.keySelector(value);\n    } catch (err) {\n      destination.error(err);\n      return;\n    }\n    this._finalizeNext(key, value);\n  };\n  DistinctSubscriber2.prototype._finalizeNext = function(key, value) {\n    var values = this.values;\n    if (!values.has(key)) {\n      values.add(key);\n      this.destination.next(value);\n    }\n  };\n  return DistinctSubscriber2;\n}(SimpleOuterSubscriber);\nfunction distinctUntilChanged(compare2, keySelector) {\n  return function(source) {\n    return source.lift(new DistinctUntilChangedOperator(compare2, keySelector));\n  };\n}\nvar DistinctUntilChangedOperator = /* @__PURE__ */ function() {\n  function DistinctUntilChangedOperator2(compare2, keySelector) {\n    this.compare = compare2;\n    this.keySelector = keySelector;\n  }\n  DistinctUntilChangedOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new DistinctUntilChangedSubscriber(subscriber, this.compare, this.keySelector));\n  };\n  return DistinctUntilChangedOperator2;\n}();\nvar DistinctUntilChangedSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(DistinctUntilChangedSubscriber2, _super);\n  function DistinctUntilChangedSubscriber2(destination, compare2, keySelector) {\n    var _this = _super.call(this, destination) || this;\n    _this.keySelector = keySelector;\n    _this.hasKey = false;\n    if (typeof compare2 === \"function\") {\n      _this.compare = compare2;\n    }\n    return _this;\n  }\n  DistinctUntilChangedSubscriber2.prototype.compare = function(x, y) {\n    return x === y;\n  };\n  DistinctUntilChangedSubscriber2.prototype._next = function(value) {\n    var key;\n    try {\n      var keySelector = this.keySelector;\n      key = keySelector ? keySelector(value) : value;\n    } catch (err) {\n      return this.destination.error(err);\n    }\n    var result = false;\n    if (this.hasKey) {\n      try {\n        var compare2 = this.compare;\n        result = compare2(this.key, key);\n      } catch (err) {\n        return this.destination.error(err);\n      }\n    } else {\n      this.hasKey = true;\n    }\n    if (!result) {\n      this.key = key;\n      this.destination.next(value);\n    }\n  };\n  return DistinctUntilChangedSubscriber2;\n}(Subscriber);\nfunction distinctUntilKeyChanged(key, compare2) {\n  return distinctUntilChanged(function(x, y) {\n    return compare2 ? compare2(x[key], y[key]) : x[key] === y[key];\n  });\n}\nfunction throwIfEmpty(errorFactory) {\n  if (errorFactory === void 0) {\n    errorFactory = defaultErrorFactory;\n  }\n  return function(source) {\n    return source.lift(new ThrowIfEmptyOperator(errorFactory));\n  };\n}\nvar ThrowIfEmptyOperator = /* @__PURE__ */ function() {\n  function ThrowIfEmptyOperator2(errorFactory) {\n    this.errorFactory = errorFactory;\n  }\n  ThrowIfEmptyOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new ThrowIfEmptySubscriber(subscriber, this.errorFactory));\n  };\n  return ThrowIfEmptyOperator2;\n}();\nvar ThrowIfEmptySubscriber = /* @__PURE__ */ function(_super) {\n  __extends(ThrowIfEmptySubscriber2, _super);\n  function ThrowIfEmptySubscriber2(destination, errorFactory) {\n    var _this = _super.call(this, destination) || this;\n    _this.errorFactory = errorFactory;\n    _this.hasValue = false;\n    return _this;\n  }\n  ThrowIfEmptySubscriber2.prototype._next = function(value) {\n    this.hasValue = true;\n    this.destination.next(value);\n  };\n  ThrowIfEmptySubscriber2.prototype._complete = function() {\n    if (!this.hasValue) {\n      var err = void 0;\n      try {\n        err = this.errorFactory();\n      } catch (e) {\n        err = e;\n      }\n      this.destination.error(err);\n    } else {\n      return this.destination.complete();\n    }\n  };\n  return ThrowIfEmptySubscriber2;\n}(Subscriber);\nfunction defaultErrorFactory() {\n  return new EmptyError();\n}\nfunction take(count2) {\n  return function(source) {\n    if (count2 === 0) {\n      return empty();\n    } else {\n      return source.lift(new TakeOperator(count2));\n    }\n  };\n}\nvar TakeOperator = /* @__PURE__ */ function() {\n  function TakeOperator2(total) {\n    this.total = total;\n    if (this.total < 0) {\n      throw new ArgumentOutOfRangeError();\n    }\n  }\n  TakeOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new TakeSubscriber(subscriber, this.total));\n  };\n  return TakeOperator2;\n}();\nvar TakeSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(TakeSubscriber2, _super);\n  function TakeSubscriber2(destination, total) {\n    var _this = _super.call(this, destination) || this;\n    _this.total = total;\n    _this.count = 0;\n    return _this;\n  }\n  TakeSubscriber2.prototype._next = function(value) {\n    var total = this.total;\n    var count2 = ++this.count;\n    if (count2 <= total) {\n      this.destination.next(value);\n      if (count2 === total) {\n        this.destination.complete();\n        this.unsubscribe();\n      }\n    }\n  };\n  return TakeSubscriber2;\n}(Subscriber);\nfunction elementAt(index, defaultValue) {\n  if (index < 0) {\n    throw new ArgumentOutOfRangeError();\n  }\n  var hasDefaultValue = arguments.length >= 2;\n  return function(source) {\n    return source.pipe(filter(function(v, i) {\n      return i === index;\n    }), take(1), hasDefaultValue ? defaultIfEmpty(defaultValue) : throwIfEmpty(function() {\n      return new ArgumentOutOfRangeError();\n    }));\n  };\n}\nfunction endWith() {\n  var array = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    array[_i] = arguments[_i];\n  }\n  return function(source) {\n    return concat$1(source, of.apply(void 0, array));\n  };\n}\nfunction every(predicate, thisArg) {\n  return function(source) {\n    return source.lift(new EveryOperator(predicate, thisArg, source));\n  };\n}\nvar EveryOperator = /* @__PURE__ */ function() {\n  function EveryOperator2(predicate, thisArg, source) {\n    this.predicate = predicate;\n    this.thisArg = thisArg;\n    this.source = source;\n  }\n  EveryOperator2.prototype.call = function(observer, source) {\n    return source.subscribe(new EverySubscriber(observer, this.predicate, this.thisArg, this.source));\n  };\n  return EveryOperator2;\n}();\nvar EverySubscriber = /* @__PURE__ */ function(_super) {\n  __extends(EverySubscriber2, _super);\n  function EverySubscriber2(destination, predicate, thisArg, source) {\n    var _this = _super.call(this, destination) || this;\n    _this.predicate = predicate;\n    _this.thisArg = thisArg;\n    _this.source = source;\n    _this.index = 0;\n    _this.thisArg = thisArg || _this;\n    return _this;\n  }\n  EverySubscriber2.prototype.notifyComplete = function(everyValueMatch) {\n    this.destination.next(everyValueMatch);\n    this.destination.complete();\n  };\n  EverySubscriber2.prototype._next = function(value) {\n    var result = false;\n    try {\n      result = this.predicate.call(this.thisArg, value, this.index++, this.source);\n    } catch (err) {\n      this.destination.error(err);\n      return;\n    }\n    if (!result) {\n      this.notifyComplete(false);\n    }\n  };\n  EverySubscriber2.prototype._complete = function() {\n    this.notifyComplete(true);\n  };\n  return EverySubscriber2;\n}(Subscriber);\nfunction exhaust() {\n  return function(source) {\n    return source.lift(new SwitchFirstOperator());\n  };\n}\nvar SwitchFirstOperator = /* @__PURE__ */ function() {\n  function SwitchFirstOperator2() {\n  }\n  SwitchFirstOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new SwitchFirstSubscriber(subscriber));\n  };\n  return SwitchFirstOperator2;\n}();\nvar SwitchFirstSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(SwitchFirstSubscriber2, _super);\n  function SwitchFirstSubscriber2(destination) {\n    var _this = _super.call(this, destination) || this;\n    _this.hasCompleted = false;\n    _this.hasSubscription = false;\n    return _this;\n  }\n  SwitchFirstSubscriber2.prototype._next = function(value) {\n    if (!this.hasSubscription) {\n      this.hasSubscription = true;\n      this.add(innerSubscribe(value, new SimpleInnerSubscriber(this)));\n    }\n  };\n  SwitchFirstSubscriber2.prototype._complete = function() {\n    this.hasCompleted = true;\n    if (!this.hasSubscription) {\n      this.destination.complete();\n    }\n  };\n  SwitchFirstSubscriber2.prototype.notifyComplete = function() {\n    this.hasSubscription = false;\n    if (this.hasCompleted) {\n      this.destination.complete();\n    }\n  };\n  return SwitchFirstSubscriber2;\n}(SimpleOuterSubscriber);\nfunction exhaustMap(project, resultSelector) {\n  if (resultSelector) {\n    return function(source) {\n      return source.pipe(exhaustMap(function(a, i) {\n        return from(project(a, i)).pipe(map(function(b, ii) {\n          return resultSelector(a, b, i, ii);\n        }));\n      }));\n    };\n  }\n  return function(source) {\n    return source.lift(new ExhaustMapOperator(project));\n  };\n}\nvar ExhaustMapOperator = /* @__PURE__ */ function() {\n  function ExhaustMapOperator2(project) {\n    this.project = project;\n  }\n  ExhaustMapOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new ExhaustMapSubscriber(subscriber, this.project));\n  };\n  return ExhaustMapOperator2;\n}();\nvar ExhaustMapSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(ExhaustMapSubscriber2, _super);\n  function ExhaustMapSubscriber2(destination, project) {\n    var _this = _super.call(this, destination) || this;\n    _this.project = project;\n    _this.hasSubscription = false;\n    _this.hasCompleted = false;\n    _this.index = 0;\n    return _this;\n  }\n  ExhaustMapSubscriber2.prototype._next = function(value) {\n    if (!this.hasSubscription) {\n      this.tryNext(value);\n    }\n  };\n  ExhaustMapSubscriber2.prototype.tryNext = function(value) {\n    var result;\n    var index = this.index++;\n    try {\n      result = this.project(value, index);\n    } catch (err) {\n      this.destination.error(err);\n      return;\n    }\n    this.hasSubscription = true;\n    this._innerSub(result);\n  };\n  ExhaustMapSubscriber2.prototype._innerSub = function(result) {\n    var innerSubscriber = new SimpleInnerSubscriber(this);\n    var destination = this.destination;\n    destination.add(innerSubscriber);\n    var innerSubscription = innerSubscribe(result, innerSubscriber);\n    if (innerSubscription !== innerSubscriber) {\n      destination.add(innerSubscription);\n    }\n  };\n  ExhaustMapSubscriber2.prototype._complete = function() {\n    this.hasCompleted = true;\n    if (!this.hasSubscription) {\n      this.destination.complete();\n    }\n    this.unsubscribe();\n  };\n  ExhaustMapSubscriber2.prototype.notifyNext = function(innerValue) {\n    this.destination.next(innerValue);\n  };\n  ExhaustMapSubscriber2.prototype.notifyError = function(err) {\n    this.destination.error(err);\n  };\n  ExhaustMapSubscriber2.prototype.notifyComplete = function() {\n    this.hasSubscription = false;\n    if (this.hasCompleted) {\n      this.destination.complete();\n    }\n  };\n  return ExhaustMapSubscriber2;\n}(SimpleOuterSubscriber);\nfunction expand(project, concurrent, scheduler) {\n  if (concurrent === void 0) {\n    concurrent = Number.POSITIVE_INFINITY;\n  }\n  concurrent = (concurrent || 0) < 1 ? Number.POSITIVE_INFINITY : concurrent;\n  return function(source) {\n    return source.lift(new ExpandOperator(project, concurrent, scheduler));\n  };\n}\nvar ExpandOperator = /* @__PURE__ */ function() {\n  function ExpandOperator2(project, concurrent, scheduler) {\n    this.project = project;\n    this.concurrent = concurrent;\n    this.scheduler = scheduler;\n  }\n  ExpandOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new ExpandSubscriber(subscriber, this.project, this.concurrent, this.scheduler));\n  };\n  return ExpandOperator2;\n}();\nvar ExpandSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(ExpandSubscriber2, _super);\n  function ExpandSubscriber2(destination, project, concurrent, scheduler) {\n    var _this = _super.call(this, destination) || this;\n    _this.project = project;\n    _this.concurrent = concurrent;\n    _this.scheduler = scheduler;\n    _this.index = 0;\n    _this.active = 0;\n    _this.hasCompleted = false;\n    if (concurrent < Number.POSITIVE_INFINITY) {\n      _this.buffer = [];\n    }\n    return _this;\n  }\n  ExpandSubscriber2.dispatch = function(arg) {\n    var subscriber = arg.subscriber, result = arg.result, value = arg.value, index = arg.index;\n    subscriber.subscribeToProjection(result, value, index);\n  };\n  ExpandSubscriber2.prototype._next = function(value) {\n    var destination = this.destination;\n    if (destination.closed) {\n      this._complete();\n      return;\n    }\n    var index = this.index++;\n    if (this.active < this.concurrent) {\n      destination.next(value);\n      try {\n        var project = this.project;\n        var result = project(value, index);\n        if (!this.scheduler) {\n          this.subscribeToProjection(result, value, index);\n        } else {\n          var state = { subscriber: this, result, value, index };\n          var destination_1 = this.destination;\n          destination_1.add(this.scheduler.schedule(ExpandSubscriber2.dispatch, 0, state));\n        }\n      } catch (e) {\n        destination.error(e);\n      }\n    } else {\n      this.buffer.push(value);\n    }\n  };\n  ExpandSubscriber2.prototype.subscribeToProjection = function(result, value, index) {\n    this.active++;\n    var destination = this.destination;\n    destination.add(innerSubscribe(result, new SimpleInnerSubscriber(this)));\n  };\n  ExpandSubscriber2.prototype._complete = function() {\n    this.hasCompleted = true;\n    if (this.hasCompleted && this.active === 0) {\n      this.destination.complete();\n    }\n    this.unsubscribe();\n  };\n  ExpandSubscriber2.prototype.notifyNext = function(innerValue) {\n    this._next(innerValue);\n  };\n  ExpandSubscriber2.prototype.notifyComplete = function() {\n    var buffer2 = this.buffer;\n    this.active--;\n    if (buffer2 && buffer2.length > 0) {\n      this._next(buffer2.shift());\n    }\n    if (this.hasCompleted && this.active === 0) {\n      this.destination.complete();\n    }\n  };\n  return ExpandSubscriber2;\n}(SimpleOuterSubscriber);\nfunction finalize(callback) {\n  return function(source) {\n    return source.lift(new FinallyOperator(callback));\n  };\n}\nvar FinallyOperator = /* @__PURE__ */ function() {\n  function FinallyOperator2(callback) {\n    this.callback = callback;\n  }\n  FinallyOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new FinallySubscriber(subscriber, this.callback));\n  };\n  return FinallyOperator2;\n}();\nvar FinallySubscriber = /* @__PURE__ */ function(_super) {\n  __extends(FinallySubscriber2, _super);\n  function FinallySubscriber2(destination, callback) {\n    var _this = _super.call(this, destination) || this;\n    _this.add(new Subscription(callback));\n    return _this;\n  }\n  return FinallySubscriber2;\n}(Subscriber);\nfunction find(predicate, thisArg) {\n  if (typeof predicate !== \"function\") {\n    throw new TypeError(\"predicate is not a function\");\n  }\n  return function(source) {\n    return source.lift(new FindValueOperator(predicate, source, false, thisArg));\n  };\n}\nvar FindValueOperator = /* @__PURE__ */ function() {\n  function FindValueOperator2(predicate, source, yieldIndex, thisArg) {\n    this.predicate = predicate;\n    this.source = source;\n    this.yieldIndex = yieldIndex;\n    this.thisArg = thisArg;\n  }\n  FindValueOperator2.prototype.call = function(observer, source) {\n    return source.subscribe(new FindValueSubscriber(observer, this.predicate, this.source, this.yieldIndex, this.thisArg));\n  };\n  return FindValueOperator2;\n}();\nvar FindValueSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(FindValueSubscriber2, _super);\n  function FindValueSubscriber2(destination, predicate, source, yieldIndex, thisArg) {\n    var _this = _super.call(this, destination) || this;\n    _this.predicate = predicate;\n    _this.source = source;\n    _this.yieldIndex = yieldIndex;\n    _this.thisArg = thisArg;\n    _this.index = 0;\n    return _this;\n  }\n  FindValueSubscriber2.prototype.notifyComplete = function(value) {\n    var destination = this.destination;\n    destination.next(value);\n    destination.complete();\n    this.unsubscribe();\n  };\n  FindValueSubscriber2.prototype._next = function(value) {\n    var _a = this, predicate = _a.predicate, thisArg = _a.thisArg;\n    var index = this.index++;\n    try {\n      var result = predicate.call(thisArg || this, value, index, this.source);\n      if (result) {\n        this.notifyComplete(this.yieldIndex ? index : value);\n      }\n    } catch (err) {\n      this.destination.error(err);\n    }\n  };\n  FindValueSubscriber2.prototype._complete = function() {\n    this.notifyComplete(this.yieldIndex ? -1 : void 0);\n  };\n  return FindValueSubscriber2;\n}(Subscriber);\nfunction findIndex(predicate, thisArg) {\n  return function(source) {\n    return source.lift(new FindValueOperator(predicate, source, true, thisArg));\n  };\n}\nfunction first(predicate, defaultValue) {\n  var hasDefaultValue = arguments.length >= 2;\n  return function(source) {\n    return source.pipe(predicate ? filter(function(v, i) {\n      return predicate(v, i, source);\n    }) : identity, take(1), hasDefaultValue ? defaultIfEmpty(defaultValue) : throwIfEmpty(function() {\n      return new EmptyError();\n    }));\n  };\n}\nfunction ignoreElements() {\n  return function ignoreElementsOperatorFunction(source) {\n    return source.lift(new IgnoreElementsOperator());\n  };\n}\nvar IgnoreElementsOperator = /* @__PURE__ */ function() {\n  function IgnoreElementsOperator2() {\n  }\n  IgnoreElementsOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new IgnoreElementsSubscriber(subscriber));\n  };\n  return IgnoreElementsOperator2;\n}();\nvar IgnoreElementsSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(IgnoreElementsSubscriber2, _super);\n  function IgnoreElementsSubscriber2() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  IgnoreElementsSubscriber2.prototype._next = function(unused) {\n  };\n  return IgnoreElementsSubscriber2;\n}(Subscriber);\nfunction isEmpty() {\n  return function(source) {\n    return source.lift(new IsEmptyOperator());\n  };\n}\nvar IsEmptyOperator = /* @__PURE__ */ function() {\n  function IsEmptyOperator2() {\n  }\n  IsEmptyOperator2.prototype.call = function(observer, source) {\n    return source.subscribe(new IsEmptySubscriber(observer));\n  };\n  return IsEmptyOperator2;\n}();\nvar IsEmptySubscriber = /* @__PURE__ */ function(_super) {\n  __extends(IsEmptySubscriber2, _super);\n  function IsEmptySubscriber2(destination) {\n    return _super.call(this, destination) || this;\n  }\n  IsEmptySubscriber2.prototype.notifyComplete = function(isEmpty2) {\n    var destination = this.destination;\n    destination.next(isEmpty2);\n    destination.complete();\n  };\n  IsEmptySubscriber2.prototype._next = function(value) {\n    this.notifyComplete(false);\n  };\n  IsEmptySubscriber2.prototype._complete = function() {\n    this.notifyComplete(true);\n  };\n  return IsEmptySubscriber2;\n}(Subscriber);\nfunction takeLast(count2) {\n  return function takeLastOperatorFunction(source) {\n    if (count2 === 0) {\n      return empty();\n    } else {\n      return source.lift(new TakeLastOperator(count2));\n    }\n  };\n}\nvar TakeLastOperator = /* @__PURE__ */ function() {\n  function TakeLastOperator2(total) {\n    this.total = total;\n    if (this.total < 0) {\n      throw new ArgumentOutOfRangeError();\n    }\n  }\n  TakeLastOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new TakeLastSubscriber(subscriber, this.total));\n  };\n  return TakeLastOperator2;\n}();\nvar TakeLastSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(TakeLastSubscriber2, _super);\n  function TakeLastSubscriber2(destination, total) {\n    var _this = _super.call(this, destination) || this;\n    _this.total = total;\n    _this.ring = new Array();\n    _this.count = 0;\n    return _this;\n  }\n  TakeLastSubscriber2.prototype._next = function(value) {\n    var ring = this.ring;\n    var total = this.total;\n    var count2 = this.count++;\n    if (ring.length < total) {\n      ring.push(value);\n    } else {\n      var index = count2 % total;\n      ring[index] = value;\n    }\n  };\n  TakeLastSubscriber2.prototype._complete = function() {\n    var destination = this.destination;\n    var count2 = this.count;\n    if (count2 > 0) {\n      var total = this.count >= this.total ? this.total : this.count;\n      var ring = this.ring;\n      for (var i = 0; i < total; i++) {\n        var idx = count2++ % total;\n        destination.next(ring[idx]);\n      }\n    }\n    destination.complete();\n  };\n  return TakeLastSubscriber2;\n}(Subscriber);\nfunction last(predicate, defaultValue) {\n  var hasDefaultValue = arguments.length >= 2;\n  return function(source) {\n    return source.pipe(predicate ? filter(function(v, i) {\n      return predicate(v, i, source);\n    }) : identity, takeLast(1), hasDefaultValue ? defaultIfEmpty(defaultValue) : throwIfEmpty(function() {\n      return new EmptyError();\n    }));\n  };\n}\nfunction mapTo(value) {\n  return function(source) {\n    return source.lift(new MapToOperator(value));\n  };\n}\nvar MapToOperator = /* @__PURE__ */ function() {\n  function MapToOperator2(value) {\n    this.value = value;\n  }\n  MapToOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new MapToSubscriber(subscriber, this.value));\n  };\n  return MapToOperator2;\n}();\nvar MapToSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(MapToSubscriber2, _super);\n  function MapToSubscriber2(destination, value) {\n    var _this = _super.call(this, destination) || this;\n    _this.value = value;\n    return _this;\n  }\n  MapToSubscriber2.prototype._next = function(x) {\n    this.destination.next(this.value);\n  };\n  return MapToSubscriber2;\n}(Subscriber);\nfunction materialize() {\n  return function materializeOperatorFunction(source) {\n    return source.lift(new MaterializeOperator());\n  };\n}\nvar MaterializeOperator = /* @__PURE__ */ function() {\n  function MaterializeOperator2() {\n  }\n  MaterializeOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new MaterializeSubscriber(subscriber));\n  };\n  return MaterializeOperator2;\n}();\nvar MaterializeSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(MaterializeSubscriber2, _super);\n  function MaterializeSubscriber2(destination) {\n    return _super.call(this, destination) || this;\n  }\n  MaterializeSubscriber2.prototype._next = function(value) {\n    this.destination.next(Notification.createNext(value));\n  };\n  MaterializeSubscriber2.prototype._error = function(err) {\n    var destination = this.destination;\n    destination.next(Notification.createError(err));\n    destination.complete();\n  };\n  MaterializeSubscriber2.prototype._complete = function() {\n    var destination = this.destination;\n    destination.next(Notification.createComplete());\n    destination.complete();\n  };\n  return MaterializeSubscriber2;\n}(Subscriber);\nfunction scan(accumulator, seed) {\n  var hasSeed = false;\n  if (arguments.length >= 2) {\n    hasSeed = true;\n  }\n  return function scanOperatorFunction(source) {\n    return source.lift(new ScanOperator(accumulator, seed, hasSeed));\n  };\n}\nvar ScanOperator = /* @__PURE__ */ function() {\n  function ScanOperator2(accumulator, seed, hasSeed) {\n    if (hasSeed === void 0) {\n      hasSeed = false;\n    }\n    this.accumulator = accumulator;\n    this.seed = seed;\n    this.hasSeed = hasSeed;\n  }\n  ScanOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new ScanSubscriber(subscriber, this.accumulator, this.seed, this.hasSeed));\n  };\n  return ScanOperator2;\n}();\nvar ScanSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(ScanSubscriber2, _super);\n  function ScanSubscriber2(destination, accumulator, _seed, hasSeed) {\n    var _this = _super.call(this, destination) || this;\n    _this.accumulator = accumulator;\n    _this._seed = _seed;\n    _this.hasSeed = hasSeed;\n    _this.index = 0;\n    return _this;\n  }\n  Object.defineProperty(ScanSubscriber2.prototype, \"seed\", {\n    get: function() {\n      return this._seed;\n    },\n    set: function(value) {\n      this.hasSeed = true;\n      this._seed = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  ScanSubscriber2.prototype._next = function(value) {\n    if (!this.hasSeed) {\n      this.seed = value;\n      this.destination.next(value);\n    } else {\n      return this._tryNext(value);\n    }\n  };\n  ScanSubscriber2.prototype._tryNext = function(value) {\n    var index = this.index++;\n    var result;\n    try {\n      result = this.accumulator(this.seed, value, index);\n    } catch (err) {\n      this.destination.error(err);\n    }\n    this.seed = result;\n    this.destination.next(result);\n  };\n  return ScanSubscriber2;\n}(Subscriber);\nfunction reduce(accumulator, seed) {\n  if (arguments.length >= 2) {\n    return function reduceOperatorFunctionWithSeed(source) {\n      return pipe(scan(accumulator, seed), takeLast(1), defaultIfEmpty(seed))(source);\n    };\n  }\n  return function reduceOperatorFunction(source) {\n    return pipe(scan(function(acc, value, index) {\n      return accumulator(acc, value, index + 1);\n    }), takeLast(1))(source);\n  };\n}\nfunction max(comparer) {\n  var max2 = typeof comparer === \"function\" ? function(x, y) {\n    return comparer(x, y) > 0 ? x : y;\n  } : function(x, y) {\n    return x > y ? x : y;\n  };\n  return reduce(max2);\n}\nfunction merge() {\n  var observables = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    observables[_i] = arguments[_i];\n  }\n  return function(source) {\n    return source.lift.call(merge$1.apply(void 0, [source].concat(observables)));\n  };\n}\nfunction mergeMapTo(innerObservable, resultSelector, concurrent) {\n  if (concurrent === void 0) {\n    concurrent = Number.POSITIVE_INFINITY;\n  }\n  if (typeof resultSelector === \"function\") {\n    return mergeMap(function() {\n      return innerObservable;\n    }, resultSelector, concurrent);\n  }\n  if (typeof resultSelector === \"number\") {\n    concurrent = resultSelector;\n  }\n  return mergeMap(function() {\n    return innerObservable;\n  }, concurrent);\n}\nfunction mergeScan(accumulator, seed, concurrent) {\n  if (concurrent === void 0) {\n    concurrent = Number.POSITIVE_INFINITY;\n  }\n  return function(source) {\n    return source.lift(new MergeScanOperator(accumulator, seed, concurrent));\n  };\n}\nvar MergeScanOperator = /* @__PURE__ */ function() {\n  function MergeScanOperator2(accumulator, seed, concurrent) {\n    this.accumulator = accumulator;\n    this.seed = seed;\n    this.concurrent = concurrent;\n  }\n  MergeScanOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new MergeScanSubscriber(subscriber, this.accumulator, this.seed, this.concurrent));\n  };\n  return MergeScanOperator2;\n}();\nvar MergeScanSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(MergeScanSubscriber2, _super);\n  function MergeScanSubscriber2(destination, accumulator, acc, concurrent) {\n    var _this = _super.call(this, destination) || this;\n    _this.accumulator = accumulator;\n    _this.acc = acc;\n    _this.concurrent = concurrent;\n    _this.hasValue = false;\n    _this.hasCompleted = false;\n    _this.buffer = [];\n    _this.active = 0;\n    _this.index = 0;\n    return _this;\n  }\n  MergeScanSubscriber2.prototype._next = function(value) {\n    if (this.active < this.concurrent) {\n      var index = this.index++;\n      var destination = this.destination;\n      var ish = void 0;\n      try {\n        var accumulator = this.accumulator;\n        ish = accumulator(this.acc, value, index);\n      } catch (e) {\n        return destination.error(e);\n      }\n      this.active++;\n      this._innerSub(ish);\n    } else {\n      this.buffer.push(value);\n    }\n  };\n  MergeScanSubscriber2.prototype._innerSub = function(ish) {\n    var innerSubscriber = new SimpleInnerSubscriber(this);\n    var destination = this.destination;\n    destination.add(innerSubscriber);\n    var innerSubscription = innerSubscribe(ish, innerSubscriber);\n    if (innerSubscription !== innerSubscriber) {\n      destination.add(innerSubscription);\n    }\n  };\n  MergeScanSubscriber2.prototype._complete = function() {\n    this.hasCompleted = true;\n    if (this.active === 0 && this.buffer.length === 0) {\n      if (this.hasValue === false) {\n        this.destination.next(this.acc);\n      }\n      this.destination.complete();\n    }\n    this.unsubscribe();\n  };\n  MergeScanSubscriber2.prototype.notifyNext = function(innerValue) {\n    var destination = this.destination;\n    this.acc = innerValue;\n    this.hasValue = true;\n    destination.next(innerValue);\n  };\n  MergeScanSubscriber2.prototype.notifyComplete = function() {\n    var buffer2 = this.buffer;\n    this.active--;\n    if (buffer2.length > 0) {\n      this._next(buffer2.shift());\n    } else if (this.active === 0 && this.hasCompleted) {\n      if (this.hasValue === false) {\n        this.destination.next(this.acc);\n      }\n      this.destination.complete();\n    }\n  };\n  return MergeScanSubscriber2;\n}(SimpleOuterSubscriber);\nfunction min(comparer) {\n  var min2 = typeof comparer === \"function\" ? function(x, y) {\n    return comparer(x, y) < 0 ? x : y;\n  } : function(x, y) {\n    return x < y ? x : y;\n  };\n  return reduce(min2);\n}\nfunction multicast(subjectOrSubjectFactory, selector) {\n  return function multicastOperatorFunction(source) {\n    var subjectFactory;\n    if (typeof subjectOrSubjectFactory === \"function\") {\n      subjectFactory = subjectOrSubjectFactory;\n    } else {\n      subjectFactory = function subjectFactory2() {\n        return subjectOrSubjectFactory;\n      };\n    }\n    if (typeof selector === \"function\") {\n      return source.lift(new MulticastOperator(subjectFactory, selector));\n    }\n    var connectable = Object.create(source, connectableObservableDescriptor);\n    connectable.source = source;\n    connectable.subjectFactory = subjectFactory;\n    return connectable;\n  };\n}\nvar MulticastOperator = /* @__PURE__ */ function() {\n  function MulticastOperator2(subjectFactory, selector) {\n    this.subjectFactory = subjectFactory;\n    this.selector = selector;\n  }\n  MulticastOperator2.prototype.call = function(subscriber, source) {\n    var selector = this.selector;\n    var subject = this.subjectFactory();\n    var subscription = selector(subject).subscribe(subscriber);\n    subscription.add(source.subscribe(subject));\n    return subscription;\n  };\n  return MulticastOperator2;\n}();\nfunction onErrorResumeNext() {\n  var nextSources = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    nextSources[_i] = arguments[_i];\n  }\n  if (nextSources.length === 1 && isArray(nextSources[0])) {\n    nextSources = nextSources[0];\n  }\n  return function(source) {\n    return source.lift(new OnErrorResumeNextOperator(nextSources));\n  };\n}\nvar OnErrorResumeNextOperator = /* @__PURE__ */ function() {\n  function OnErrorResumeNextOperator2(nextSources) {\n    this.nextSources = nextSources;\n  }\n  OnErrorResumeNextOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new OnErrorResumeNextSubscriber(subscriber, this.nextSources));\n  };\n  return OnErrorResumeNextOperator2;\n}();\nvar OnErrorResumeNextSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(OnErrorResumeNextSubscriber2, _super);\n  function OnErrorResumeNextSubscriber2(destination, nextSources) {\n    var _this = _super.call(this, destination) || this;\n    _this.destination = destination;\n    _this.nextSources = nextSources;\n    return _this;\n  }\n  OnErrorResumeNextSubscriber2.prototype.notifyError = function() {\n    this.subscribeToNextSource();\n  };\n  OnErrorResumeNextSubscriber2.prototype.notifyComplete = function() {\n    this.subscribeToNextSource();\n  };\n  OnErrorResumeNextSubscriber2.prototype._error = function(err) {\n    this.subscribeToNextSource();\n    this.unsubscribe();\n  };\n  OnErrorResumeNextSubscriber2.prototype._complete = function() {\n    this.subscribeToNextSource();\n    this.unsubscribe();\n  };\n  OnErrorResumeNextSubscriber2.prototype.subscribeToNextSource = function() {\n    var next = this.nextSources.shift();\n    if (!!next) {\n      var innerSubscriber = new SimpleInnerSubscriber(this);\n      var destination = this.destination;\n      destination.add(innerSubscriber);\n      var innerSubscription = innerSubscribe(next, innerSubscriber);\n      if (innerSubscription !== innerSubscriber) {\n        destination.add(innerSubscription);\n      }\n    } else {\n      this.destination.complete();\n    }\n  };\n  return OnErrorResumeNextSubscriber2;\n}(SimpleOuterSubscriber);\nfunction pairwise() {\n  return function(source) {\n    return source.lift(new PairwiseOperator());\n  };\n}\nvar PairwiseOperator = /* @__PURE__ */ function() {\n  function PairwiseOperator2() {\n  }\n  PairwiseOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new PairwiseSubscriber(subscriber));\n  };\n  return PairwiseOperator2;\n}();\nvar PairwiseSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(PairwiseSubscriber2, _super);\n  function PairwiseSubscriber2(destination) {\n    var _this = _super.call(this, destination) || this;\n    _this.hasPrev = false;\n    return _this;\n  }\n  PairwiseSubscriber2.prototype._next = function(value) {\n    var pair;\n    if (this.hasPrev) {\n      pair = [this.prev, value];\n    } else {\n      this.hasPrev = true;\n    }\n    this.prev = value;\n    if (pair) {\n      this.destination.next(pair);\n    }\n  };\n  return PairwiseSubscriber2;\n}(Subscriber);\nfunction partition(predicate, thisArg) {\n  return function(source) {\n    return [\n      filter(predicate, thisArg)(source),\n      filter(not$1(predicate, thisArg))(source)\n    ];\n  };\n}\nfunction pluck() {\n  var properties2 = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    properties2[_i] = arguments[_i];\n  }\n  var length = properties2.length;\n  if (length === 0) {\n    throw new Error(\"list of properties cannot be empty.\");\n  }\n  return function(source) {\n    return map(plucker(properties2, length))(source);\n  };\n}\nfunction plucker(props, length) {\n  var mapper = function(x) {\n    var currentProp = x;\n    for (var i = 0; i < length; i++) {\n      var p = currentProp != null ? currentProp[props[i]] : void 0;\n      if (p !== void 0) {\n        currentProp = p;\n      } else {\n        return void 0;\n      }\n    }\n    return currentProp;\n  };\n  return mapper;\n}\nfunction publish$1(selector) {\n  return selector ? multicast(function() {\n    return new Subject();\n  }, selector) : multicast(new Subject());\n}\nfunction publishBehavior(value) {\n  return function(source) {\n    return multicast(new BehaviorSubject(value))(source);\n  };\n}\nfunction publishLast() {\n  return function(source) {\n    return multicast(new AsyncSubject())(source);\n  };\n}\nfunction publishReplay(bufferSize, windowTime2, selectorOrScheduler, scheduler) {\n  if (selectorOrScheduler && typeof selectorOrScheduler !== \"function\") {\n    scheduler = selectorOrScheduler;\n  }\n  var selector = typeof selectorOrScheduler === \"function\" ? selectorOrScheduler : void 0;\n  var subject = new ReplaySubject(bufferSize, windowTime2, scheduler);\n  return function(source) {\n    return multicast(function() {\n      return subject;\n    }, selector)(source);\n  };\n}\nfunction race() {\n  var observables = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    observables[_i] = arguments[_i];\n  }\n  return function raceOperatorFunction(source) {\n    if (observables.length === 1 && isArray(observables[0])) {\n      observables = observables[0];\n    }\n    return source.lift.call(race$1.apply(void 0, [source].concat(observables)));\n  };\n}\nfunction repeat(count2) {\n  if (count2 === void 0) {\n    count2 = -1;\n  }\n  return function(source) {\n    if (count2 === 0) {\n      return empty();\n    } else if (count2 < 0) {\n      return source.lift(new RepeatOperator(-1, source));\n    } else {\n      return source.lift(new RepeatOperator(count2 - 1, source));\n    }\n  };\n}\nvar RepeatOperator = /* @__PURE__ */ function() {\n  function RepeatOperator2(count2, source) {\n    this.count = count2;\n    this.source = source;\n  }\n  RepeatOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new RepeatSubscriber(subscriber, this.count, this.source));\n  };\n  return RepeatOperator2;\n}();\nvar RepeatSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(RepeatSubscriber2, _super);\n  function RepeatSubscriber2(destination, count2, source) {\n    var _this = _super.call(this, destination) || this;\n    _this.count = count2;\n    _this.source = source;\n    return _this;\n  }\n  RepeatSubscriber2.prototype.complete = function() {\n    if (!this.isStopped) {\n      var _a = this, source = _a.source, count2 = _a.count;\n      if (count2 === 0) {\n        return _super.prototype.complete.call(this);\n      } else if (count2 > -1) {\n        this.count = count2 - 1;\n      }\n      source.subscribe(this._unsubscribeAndRecycle());\n    }\n  };\n  return RepeatSubscriber2;\n}(Subscriber);\nfunction repeatWhen(notifier) {\n  return function(source) {\n    return source.lift(new RepeatWhenOperator(notifier));\n  };\n}\nvar RepeatWhenOperator = /* @__PURE__ */ function() {\n  function RepeatWhenOperator2(notifier) {\n    this.notifier = notifier;\n  }\n  RepeatWhenOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new RepeatWhenSubscriber(subscriber, this.notifier, source));\n  };\n  return RepeatWhenOperator2;\n}();\nvar RepeatWhenSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(RepeatWhenSubscriber2, _super);\n  function RepeatWhenSubscriber2(destination, notifier, source) {\n    var _this = _super.call(this, destination) || this;\n    _this.notifier = notifier;\n    _this.source = source;\n    _this.sourceIsBeingSubscribedTo = true;\n    return _this;\n  }\n  RepeatWhenSubscriber2.prototype.notifyNext = function() {\n    this.sourceIsBeingSubscribedTo = true;\n    this.source.subscribe(this);\n  };\n  RepeatWhenSubscriber2.prototype.notifyComplete = function() {\n    if (this.sourceIsBeingSubscribedTo === false) {\n      return _super.prototype.complete.call(this);\n    }\n  };\n  RepeatWhenSubscriber2.prototype.complete = function() {\n    this.sourceIsBeingSubscribedTo = false;\n    if (!this.isStopped) {\n      if (!this.retries) {\n        this.subscribeToRetries();\n      }\n      if (!this.retriesSubscription || this.retriesSubscription.closed) {\n        return _super.prototype.complete.call(this);\n      }\n      this._unsubscribeAndRecycle();\n      this.notifications.next(void 0);\n    }\n  };\n  RepeatWhenSubscriber2.prototype._unsubscribe = function() {\n    var _a = this, notifications = _a.notifications, retriesSubscription = _a.retriesSubscription;\n    if (notifications) {\n      notifications.unsubscribe();\n      this.notifications = void 0;\n    }\n    if (retriesSubscription) {\n      retriesSubscription.unsubscribe();\n      this.retriesSubscription = void 0;\n    }\n    this.retries = void 0;\n  };\n  RepeatWhenSubscriber2.prototype._unsubscribeAndRecycle = function() {\n    var _unsubscribe = this._unsubscribe;\n    this._unsubscribe = null;\n    _super.prototype._unsubscribeAndRecycle.call(this);\n    this._unsubscribe = _unsubscribe;\n    return this;\n  };\n  RepeatWhenSubscriber2.prototype.subscribeToRetries = function() {\n    this.notifications = new Subject();\n    var retries;\n    try {\n      var notifier = this.notifier;\n      retries = notifier(this.notifications);\n    } catch (e) {\n      return _super.prototype.complete.call(this);\n    }\n    this.retries = retries;\n    this.retriesSubscription = innerSubscribe(retries, new SimpleInnerSubscriber(this));\n  };\n  return RepeatWhenSubscriber2;\n}(SimpleOuterSubscriber);\nfunction retry(count2) {\n  if (count2 === void 0) {\n    count2 = -1;\n  }\n  return function(source) {\n    return source.lift(new RetryOperator(count2, source));\n  };\n}\nvar RetryOperator = /* @__PURE__ */ function() {\n  function RetryOperator2(count2, source) {\n    this.count = count2;\n    this.source = source;\n  }\n  RetryOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new RetrySubscriber(subscriber, this.count, this.source));\n  };\n  return RetryOperator2;\n}();\nvar RetrySubscriber = /* @__PURE__ */ function(_super) {\n  __extends(RetrySubscriber2, _super);\n  function RetrySubscriber2(destination, count2, source) {\n    var _this = _super.call(this, destination) || this;\n    _this.count = count2;\n    _this.source = source;\n    return _this;\n  }\n  RetrySubscriber2.prototype.error = function(err) {\n    if (!this.isStopped) {\n      var _a = this, source = _a.source, count2 = _a.count;\n      if (count2 === 0) {\n        return _super.prototype.error.call(this, err);\n      } else if (count2 > -1) {\n        this.count = count2 - 1;\n      }\n      source.subscribe(this._unsubscribeAndRecycle());\n    }\n  };\n  return RetrySubscriber2;\n}(Subscriber);\nfunction retryWhen(notifier) {\n  return function(source) {\n    return source.lift(new RetryWhenOperator(notifier, source));\n  };\n}\nvar RetryWhenOperator = /* @__PURE__ */ function() {\n  function RetryWhenOperator2(notifier, source) {\n    this.notifier = notifier;\n    this.source = source;\n  }\n  RetryWhenOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new RetryWhenSubscriber(subscriber, this.notifier, this.source));\n  };\n  return RetryWhenOperator2;\n}();\nvar RetryWhenSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(RetryWhenSubscriber2, _super);\n  function RetryWhenSubscriber2(destination, notifier, source) {\n    var _this = _super.call(this, destination) || this;\n    _this.notifier = notifier;\n    _this.source = source;\n    return _this;\n  }\n  RetryWhenSubscriber2.prototype.error = function(err) {\n    if (!this.isStopped) {\n      var errors = this.errors;\n      var retries = this.retries;\n      var retriesSubscription = this.retriesSubscription;\n      if (!retries) {\n        errors = new Subject();\n        try {\n          var notifier = this.notifier;\n          retries = notifier(errors);\n        } catch (e) {\n          return _super.prototype.error.call(this, e);\n        }\n        retriesSubscription = innerSubscribe(retries, new SimpleInnerSubscriber(this));\n      } else {\n        this.errors = void 0;\n        this.retriesSubscription = void 0;\n      }\n      this._unsubscribeAndRecycle();\n      this.errors = errors;\n      this.retries = retries;\n      this.retriesSubscription = retriesSubscription;\n      errors.next(err);\n    }\n  };\n  RetryWhenSubscriber2.prototype._unsubscribe = function() {\n    var _a = this, errors = _a.errors, retriesSubscription = _a.retriesSubscription;\n    if (errors) {\n      errors.unsubscribe();\n      this.errors = void 0;\n    }\n    if (retriesSubscription) {\n      retriesSubscription.unsubscribe();\n      this.retriesSubscription = void 0;\n    }\n    this.retries = void 0;\n  };\n  RetryWhenSubscriber2.prototype.notifyNext = function() {\n    var _unsubscribe = this._unsubscribe;\n    this._unsubscribe = null;\n    this._unsubscribeAndRecycle();\n    this._unsubscribe = _unsubscribe;\n    this.source.subscribe(this);\n  };\n  return RetryWhenSubscriber2;\n}(SimpleOuterSubscriber);\nfunction sample(notifier) {\n  return function(source) {\n    return source.lift(new SampleOperator(notifier));\n  };\n}\nvar SampleOperator = /* @__PURE__ */ function() {\n  function SampleOperator2(notifier) {\n    this.notifier = notifier;\n  }\n  SampleOperator2.prototype.call = function(subscriber, source) {\n    var sampleSubscriber = new SampleSubscriber(subscriber);\n    var subscription = source.subscribe(sampleSubscriber);\n    subscription.add(innerSubscribe(this.notifier, new SimpleInnerSubscriber(sampleSubscriber)));\n    return subscription;\n  };\n  return SampleOperator2;\n}();\nvar SampleSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(SampleSubscriber2, _super);\n  function SampleSubscriber2() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.hasValue = false;\n    return _this;\n  }\n  SampleSubscriber2.prototype._next = function(value) {\n    this.value = value;\n    this.hasValue = true;\n  };\n  SampleSubscriber2.prototype.notifyNext = function() {\n    this.emitValue();\n  };\n  SampleSubscriber2.prototype.notifyComplete = function() {\n    this.emitValue();\n  };\n  SampleSubscriber2.prototype.emitValue = function() {\n    if (this.hasValue) {\n      this.hasValue = false;\n      this.destination.next(this.value);\n    }\n  };\n  return SampleSubscriber2;\n}(SimpleOuterSubscriber);\nfunction sampleTime(period, scheduler) {\n  if (scheduler === void 0) {\n    scheduler = async$1;\n  }\n  return function(source) {\n    return source.lift(new SampleTimeOperator(period, scheduler));\n  };\n}\nvar SampleTimeOperator = /* @__PURE__ */ function() {\n  function SampleTimeOperator2(period, scheduler) {\n    this.period = period;\n    this.scheduler = scheduler;\n  }\n  SampleTimeOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new SampleTimeSubscriber(subscriber, this.period, this.scheduler));\n  };\n  return SampleTimeOperator2;\n}();\nvar SampleTimeSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(SampleTimeSubscriber2, _super);\n  function SampleTimeSubscriber2(destination, period, scheduler) {\n    var _this = _super.call(this, destination) || this;\n    _this.period = period;\n    _this.scheduler = scheduler;\n    _this.hasValue = false;\n    _this.add(scheduler.schedule(dispatchNotification, period, { subscriber: _this, period }));\n    return _this;\n  }\n  SampleTimeSubscriber2.prototype._next = function(value) {\n    this.lastValue = value;\n    this.hasValue = true;\n  };\n  SampleTimeSubscriber2.prototype.notifyNext = function() {\n    if (this.hasValue) {\n      this.hasValue = false;\n      this.destination.next(this.lastValue);\n    }\n  };\n  return SampleTimeSubscriber2;\n}(Subscriber);\nfunction dispatchNotification(state) {\n  var subscriber = state.subscriber, period = state.period;\n  subscriber.notifyNext();\n  this.schedule(state, period);\n}\nfunction sequenceEqual(compareTo, comparator) {\n  return function(source) {\n    return source.lift(new SequenceEqualOperator(compareTo, comparator));\n  };\n}\nvar SequenceEqualOperator = /* @__PURE__ */ function() {\n  function SequenceEqualOperator2(compareTo, comparator) {\n    this.compareTo = compareTo;\n    this.comparator = comparator;\n  }\n  SequenceEqualOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new SequenceEqualSubscriber(subscriber, this.compareTo, this.comparator));\n  };\n  return SequenceEqualOperator2;\n}();\nvar SequenceEqualSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(SequenceEqualSubscriber2, _super);\n  function SequenceEqualSubscriber2(destination, compareTo, comparator) {\n    var _this = _super.call(this, destination) || this;\n    _this.compareTo = compareTo;\n    _this.comparator = comparator;\n    _this._a = [];\n    _this._b = [];\n    _this._oneComplete = false;\n    _this.destination.add(compareTo.subscribe(new SequenceEqualCompareToSubscriber(destination, _this)));\n    return _this;\n  }\n  SequenceEqualSubscriber2.prototype._next = function(value) {\n    if (this._oneComplete && this._b.length === 0) {\n      this.emit(false);\n    } else {\n      this._a.push(value);\n      this.checkValues();\n    }\n  };\n  SequenceEqualSubscriber2.prototype._complete = function() {\n    if (this._oneComplete) {\n      this.emit(this._a.length === 0 && this._b.length === 0);\n    } else {\n      this._oneComplete = true;\n    }\n    this.unsubscribe();\n  };\n  SequenceEqualSubscriber2.prototype.checkValues = function() {\n    var _c = this, _a = _c._a, _b = _c._b, comparator = _c.comparator;\n    while (_a.length > 0 && _b.length > 0) {\n      var a = _a.shift();\n      var b = _b.shift();\n      var areEqual = false;\n      try {\n        areEqual = comparator ? comparator(a, b) : a === b;\n      } catch (e) {\n        this.destination.error(e);\n      }\n      if (!areEqual) {\n        this.emit(false);\n      }\n    }\n  };\n  SequenceEqualSubscriber2.prototype.emit = function(value) {\n    var destination = this.destination;\n    destination.next(value);\n    destination.complete();\n  };\n  SequenceEqualSubscriber2.prototype.nextB = function(value) {\n    if (this._oneComplete && this._a.length === 0) {\n      this.emit(false);\n    } else {\n      this._b.push(value);\n      this.checkValues();\n    }\n  };\n  SequenceEqualSubscriber2.prototype.completeB = function() {\n    if (this._oneComplete) {\n      this.emit(this._a.length === 0 && this._b.length === 0);\n    } else {\n      this._oneComplete = true;\n    }\n  };\n  return SequenceEqualSubscriber2;\n}(Subscriber);\nvar SequenceEqualCompareToSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(SequenceEqualCompareToSubscriber2, _super);\n  function SequenceEqualCompareToSubscriber2(destination, parent) {\n    var _this = _super.call(this, destination) || this;\n    _this.parent = parent;\n    return _this;\n  }\n  SequenceEqualCompareToSubscriber2.prototype._next = function(value) {\n    this.parent.nextB(value);\n  };\n  SequenceEqualCompareToSubscriber2.prototype._error = function(err) {\n    this.parent.error(err);\n    this.unsubscribe();\n  };\n  SequenceEqualCompareToSubscriber2.prototype._complete = function() {\n    this.parent.completeB();\n    this.unsubscribe();\n  };\n  return SequenceEqualCompareToSubscriber2;\n}(Subscriber);\nfunction shareSubjectFactory() {\n  return new Subject();\n}\nfunction share() {\n  return function(source) {\n    return refCount()(multicast(shareSubjectFactory)(source));\n  };\n}\nfunction shareReplay(configOrBufferSize, windowTime2, scheduler) {\n  var config2;\n  if (configOrBufferSize && typeof configOrBufferSize === \"object\") {\n    config2 = configOrBufferSize;\n  } else {\n    config2 = {\n      bufferSize: configOrBufferSize,\n      windowTime: windowTime2,\n      refCount: false,\n      scheduler\n    };\n  }\n  return function(source) {\n    return source.lift(shareReplayOperator(config2));\n  };\n}\nfunction shareReplayOperator(_a) {\n  var _b = _a.bufferSize, bufferSize = _b === void 0 ? Number.POSITIVE_INFINITY : _b, _c = _a.windowTime, windowTime2 = _c === void 0 ? Number.POSITIVE_INFINITY : _c, useRefCount = _a.refCount, scheduler = _a.scheduler;\n  var subject;\n  var refCount2 = 0;\n  var subscription;\n  var hasError = false;\n  var isComplete = false;\n  return function shareReplayOperation(source) {\n    refCount2++;\n    var innerSub;\n    if (!subject || hasError) {\n      hasError = false;\n      subject = new ReplaySubject(bufferSize, windowTime2, scheduler);\n      innerSub = subject.subscribe(this);\n      subscription = source.subscribe({\n        next: function(value) {\n          subject.next(value);\n        },\n        error: function(err) {\n          hasError = true;\n          subject.error(err);\n        },\n        complete: function() {\n          isComplete = true;\n          subscription = void 0;\n          subject.complete();\n        }\n      });\n      if (isComplete) {\n        subscription = void 0;\n      }\n    } else {\n      innerSub = subject.subscribe(this);\n    }\n    this.add(function() {\n      refCount2--;\n      innerSub.unsubscribe();\n      innerSub = void 0;\n      if (subscription && !isComplete && useRefCount && refCount2 === 0) {\n        subscription.unsubscribe();\n        subscription = void 0;\n        subject = void 0;\n      }\n    });\n  };\n}\nfunction single(predicate) {\n  return function(source) {\n    return source.lift(new SingleOperator(predicate, source));\n  };\n}\nvar SingleOperator = /* @__PURE__ */ function() {\n  function SingleOperator2(predicate, source) {\n    this.predicate = predicate;\n    this.source = source;\n  }\n  SingleOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new SingleSubscriber(subscriber, this.predicate, this.source));\n  };\n  return SingleOperator2;\n}();\nvar SingleSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(SingleSubscriber2, _super);\n  function SingleSubscriber2(destination, predicate, source) {\n    var _this = _super.call(this, destination) || this;\n    _this.predicate = predicate;\n    _this.source = source;\n    _this.seenValue = false;\n    _this.index = 0;\n    return _this;\n  }\n  SingleSubscriber2.prototype.applySingleValue = function(value) {\n    if (this.seenValue) {\n      this.destination.error(\"Sequence contains more than one element\");\n    } else {\n      this.seenValue = true;\n      this.singleValue = value;\n    }\n  };\n  SingleSubscriber2.prototype._next = function(value) {\n    var index = this.index++;\n    if (this.predicate) {\n      this.tryNext(value, index);\n    } else {\n      this.applySingleValue(value);\n    }\n  };\n  SingleSubscriber2.prototype.tryNext = function(value, index) {\n    try {\n      if (this.predicate(value, index, this.source)) {\n        this.applySingleValue(value);\n      }\n    } catch (err) {\n      this.destination.error(err);\n    }\n  };\n  SingleSubscriber2.prototype._complete = function() {\n    var destination = this.destination;\n    if (this.index > 0) {\n      destination.next(this.seenValue ? this.singleValue : void 0);\n      destination.complete();\n    } else {\n      destination.error(new EmptyError());\n    }\n  };\n  return SingleSubscriber2;\n}(Subscriber);\nfunction skip(count2) {\n  return function(source) {\n    return source.lift(new SkipOperator(count2));\n  };\n}\nvar SkipOperator = /* @__PURE__ */ function() {\n  function SkipOperator2(total) {\n    this.total = total;\n  }\n  SkipOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new SkipSubscriber(subscriber, this.total));\n  };\n  return SkipOperator2;\n}();\nvar SkipSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(SkipSubscriber2, _super);\n  function SkipSubscriber2(destination, total) {\n    var _this = _super.call(this, destination) || this;\n    _this.total = total;\n    _this.count = 0;\n    return _this;\n  }\n  SkipSubscriber2.prototype._next = function(x) {\n    if (++this.count > this.total) {\n      this.destination.next(x);\n    }\n  };\n  return SkipSubscriber2;\n}(Subscriber);\nfunction skipLast(count2) {\n  return function(source) {\n    return source.lift(new SkipLastOperator(count2));\n  };\n}\nvar SkipLastOperator = /* @__PURE__ */ function() {\n  function SkipLastOperator2(_skipCount) {\n    this._skipCount = _skipCount;\n    if (this._skipCount < 0) {\n      throw new ArgumentOutOfRangeError();\n    }\n  }\n  SkipLastOperator2.prototype.call = function(subscriber, source) {\n    if (this._skipCount === 0) {\n      return source.subscribe(new Subscriber(subscriber));\n    } else {\n      return source.subscribe(new SkipLastSubscriber(subscriber, this._skipCount));\n    }\n  };\n  return SkipLastOperator2;\n}();\nvar SkipLastSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(SkipLastSubscriber2, _super);\n  function SkipLastSubscriber2(destination, _skipCount) {\n    var _this = _super.call(this, destination) || this;\n    _this._skipCount = _skipCount;\n    _this._count = 0;\n    _this._ring = new Array(_skipCount);\n    return _this;\n  }\n  SkipLastSubscriber2.prototype._next = function(value) {\n    var skipCount = this._skipCount;\n    var count2 = this._count++;\n    if (count2 < skipCount) {\n      this._ring[count2] = value;\n    } else {\n      var currentIndex = count2 % skipCount;\n      var ring = this._ring;\n      var oldValue = ring[currentIndex];\n      ring[currentIndex] = value;\n      this.destination.next(oldValue);\n    }\n  };\n  return SkipLastSubscriber2;\n}(Subscriber);\nfunction skipUntil(notifier) {\n  return function(source) {\n    return source.lift(new SkipUntilOperator(notifier));\n  };\n}\nvar SkipUntilOperator = /* @__PURE__ */ function() {\n  function SkipUntilOperator2(notifier) {\n    this.notifier = notifier;\n  }\n  SkipUntilOperator2.prototype.call = function(destination, source) {\n    return source.subscribe(new SkipUntilSubscriber(destination, this.notifier));\n  };\n  return SkipUntilOperator2;\n}();\nvar SkipUntilSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(SkipUntilSubscriber2, _super);\n  function SkipUntilSubscriber2(destination, notifier) {\n    var _this = _super.call(this, destination) || this;\n    _this.hasValue = false;\n    var innerSubscriber = new SimpleInnerSubscriber(_this);\n    _this.add(innerSubscriber);\n    _this.innerSubscription = innerSubscriber;\n    var innerSubscription = innerSubscribe(notifier, innerSubscriber);\n    if (innerSubscription !== innerSubscriber) {\n      _this.add(innerSubscription);\n      _this.innerSubscription = innerSubscription;\n    }\n    return _this;\n  }\n  SkipUntilSubscriber2.prototype._next = function(value) {\n    if (this.hasValue) {\n      _super.prototype._next.call(this, value);\n    }\n  };\n  SkipUntilSubscriber2.prototype.notifyNext = function() {\n    this.hasValue = true;\n    if (this.innerSubscription) {\n      this.innerSubscription.unsubscribe();\n    }\n  };\n  SkipUntilSubscriber2.prototype.notifyComplete = function() {\n  };\n  return SkipUntilSubscriber2;\n}(SimpleOuterSubscriber);\nfunction skipWhile(predicate) {\n  return function(source) {\n    return source.lift(new SkipWhileOperator(predicate));\n  };\n}\nvar SkipWhileOperator = /* @__PURE__ */ function() {\n  function SkipWhileOperator2(predicate) {\n    this.predicate = predicate;\n  }\n  SkipWhileOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new SkipWhileSubscriber(subscriber, this.predicate));\n  };\n  return SkipWhileOperator2;\n}();\nvar SkipWhileSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(SkipWhileSubscriber2, _super);\n  function SkipWhileSubscriber2(destination, predicate) {\n    var _this = _super.call(this, destination) || this;\n    _this.predicate = predicate;\n    _this.skipping = true;\n    _this.index = 0;\n    return _this;\n  }\n  SkipWhileSubscriber2.prototype._next = function(value) {\n    var destination = this.destination;\n    if (this.skipping) {\n      this.tryCallPredicate(value);\n    }\n    if (!this.skipping) {\n      destination.next(value);\n    }\n  };\n  SkipWhileSubscriber2.prototype.tryCallPredicate = function(value) {\n    try {\n      var result = this.predicate(value, this.index++);\n      this.skipping = Boolean(result);\n    } catch (err) {\n      this.destination.error(err);\n    }\n  };\n  return SkipWhileSubscriber2;\n}(Subscriber);\nfunction startWith() {\n  var array = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    array[_i] = arguments[_i];\n  }\n  var scheduler = array[array.length - 1];\n  if (isScheduler(scheduler)) {\n    array.pop();\n    return function(source) {\n      return concat$1(array, source, scheduler);\n    };\n  } else {\n    return function(source) {\n      return concat$1(array, source);\n    };\n  }\n}\nvar SubscribeOnObservable = /* @__PURE__ */ function(_super) {\n  __extends(SubscribeOnObservable2, _super);\n  function SubscribeOnObservable2(source, delayTime, scheduler) {\n    if (delayTime === void 0) {\n      delayTime = 0;\n    }\n    if (scheduler === void 0) {\n      scheduler = asap;\n    }\n    var _this = _super.call(this) || this;\n    _this.source = source;\n    _this.delayTime = delayTime;\n    _this.scheduler = scheduler;\n    if (!isNumeric(delayTime) || delayTime < 0) {\n      _this.delayTime = 0;\n    }\n    if (!scheduler || typeof scheduler.schedule !== \"function\") {\n      _this.scheduler = asap;\n    }\n    return _this;\n  }\n  SubscribeOnObservable2.create = function(source, delay2, scheduler) {\n    if (delay2 === void 0) {\n      delay2 = 0;\n    }\n    if (scheduler === void 0) {\n      scheduler = asap;\n    }\n    return new SubscribeOnObservable2(source, delay2, scheduler);\n  };\n  SubscribeOnObservable2.dispatch = function(arg) {\n    var source = arg.source, subscriber = arg.subscriber;\n    return this.add(source.subscribe(subscriber));\n  };\n  SubscribeOnObservable2.prototype._subscribe = function(subscriber) {\n    var delay2 = this.delayTime;\n    var source = this.source;\n    var scheduler = this.scheduler;\n    return scheduler.schedule(SubscribeOnObservable2.dispatch, delay2, {\n      source,\n      subscriber\n    });\n  };\n  return SubscribeOnObservable2;\n}(Observable);\nfunction subscribeOn(scheduler, delay2) {\n  if (delay2 === void 0) {\n    delay2 = 0;\n  }\n  return function subscribeOnOperatorFunction(source) {\n    return source.lift(new SubscribeOnOperator(scheduler, delay2));\n  };\n}\nvar SubscribeOnOperator = /* @__PURE__ */ function() {\n  function SubscribeOnOperator2(scheduler, delay2) {\n    this.scheduler = scheduler;\n    this.delay = delay2;\n  }\n  SubscribeOnOperator2.prototype.call = function(subscriber, source) {\n    return new SubscribeOnObservable(source, this.delay, this.scheduler).subscribe(subscriber);\n  };\n  return SubscribeOnOperator2;\n}();\nfunction switchMap(project, resultSelector) {\n  if (typeof resultSelector === \"function\") {\n    return function(source) {\n      return source.pipe(switchMap(function(a, i) {\n        return from(project(a, i)).pipe(map(function(b, ii) {\n          return resultSelector(a, b, i, ii);\n        }));\n      }));\n    };\n  }\n  return function(source) {\n    return source.lift(new SwitchMapOperator(project));\n  };\n}\nvar SwitchMapOperator = /* @__PURE__ */ function() {\n  function SwitchMapOperator2(project) {\n    this.project = project;\n  }\n  SwitchMapOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new SwitchMapSubscriber(subscriber, this.project));\n  };\n  return SwitchMapOperator2;\n}();\nvar SwitchMapSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(SwitchMapSubscriber2, _super);\n  function SwitchMapSubscriber2(destination, project) {\n    var _this = _super.call(this, destination) || this;\n    _this.project = project;\n    _this.index = 0;\n    return _this;\n  }\n  SwitchMapSubscriber2.prototype._next = function(value) {\n    var result;\n    var index = this.index++;\n    try {\n      result = this.project(value, index);\n    } catch (error) {\n      this.destination.error(error);\n      return;\n    }\n    this._innerSub(result);\n  };\n  SwitchMapSubscriber2.prototype._innerSub = function(result) {\n    var innerSubscription = this.innerSubscription;\n    if (innerSubscription) {\n      innerSubscription.unsubscribe();\n    }\n    var innerSubscriber = new SimpleInnerSubscriber(this);\n    var destination = this.destination;\n    destination.add(innerSubscriber);\n    this.innerSubscription = innerSubscribe(result, innerSubscriber);\n    if (this.innerSubscription !== innerSubscriber) {\n      destination.add(this.innerSubscription);\n    }\n  };\n  SwitchMapSubscriber2.prototype._complete = function() {\n    var innerSubscription = this.innerSubscription;\n    if (!innerSubscription || innerSubscription.closed) {\n      _super.prototype._complete.call(this);\n    }\n    this.unsubscribe();\n  };\n  SwitchMapSubscriber2.prototype._unsubscribe = function() {\n    this.innerSubscription = void 0;\n  };\n  SwitchMapSubscriber2.prototype.notifyComplete = function() {\n    this.innerSubscription = void 0;\n    if (this.isStopped) {\n      _super.prototype._complete.call(this);\n    }\n  };\n  SwitchMapSubscriber2.prototype.notifyNext = function(innerValue) {\n    this.destination.next(innerValue);\n  };\n  return SwitchMapSubscriber2;\n}(SimpleOuterSubscriber);\nfunction switchAll() {\n  return switchMap(identity);\n}\nfunction switchMapTo(innerObservable, resultSelector) {\n  return resultSelector ? switchMap(function() {\n    return innerObservable;\n  }, resultSelector) : switchMap(function() {\n    return innerObservable;\n  });\n}\nfunction takeUntil(notifier) {\n  return function(source) {\n    return source.lift(new TakeUntilOperator(notifier));\n  };\n}\nvar TakeUntilOperator = /* @__PURE__ */ function() {\n  function TakeUntilOperator2(notifier) {\n    this.notifier = notifier;\n  }\n  TakeUntilOperator2.prototype.call = function(subscriber, source) {\n    var takeUntilSubscriber = new TakeUntilSubscriber(subscriber);\n    var notifierSubscription = innerSubscribe(this.notifier, new SimpleInnerSubscriber(takeUntilSubscriber));\n    if (notifierSubscription && !takeUntilSubscriber.seenValue) {\n      takeUntilSubscriber.add(notifierSubscription);\n      return source.subscribe(takeUntilSubscriber);\n    }\n    return takeUntilSubscriber;\n  };\n  return TakeUntilOperator2;\n}();\nvar TakeUntilSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(TakeUntilSubscriber2, _super);\n  function TakeUntilSubscriber2(destination) {\n    var _this = _super.call(this, destination) || this;\n    _this.seenValue = false;\n    return _this;\n  }\n  TakeUntilSubscriber2.prototype.notifyNext = function() {\n    this.seenValue = true;\n    this.complete();\n  };\n  TakeUntilSubscriber2.prototype.notifyComplete = function() {\n  };\n  return TakeUntilSubscriber2;\n}(SimpleOuterSubscriber);\nfunction takeWhile(predicate, inclusive) {\n  if (inclusive === void 0) {\n    inclusive = false;\n  }\n  return function(source) {\n    return source.lift(new TakeWhileOperator(predicate, inclusive));\n  };\n}\nvar TakeWhileOperator = /* @__PURE__ */ function() {\n  function TakeWhileOperator2(predicate, inclusive) {\n    this.predicate = predicate;\n    this.inclusive = inclusive;\n  }\n  TakeWhileOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new TakeWhileSubscriber(subscriber, this.predicate, this.inclusive));\n  };\n  return TakeWhileOperator2;\n}();\nvar TakeWhileSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(TakeWhileSubscriber2, _super);\n  function TakeWhileSubscriber2(destination, predicate, inclusive) {\n    var _this = _super.call(this, destination) || this;\n    _this.predicate = predicate;\n    _this.inclusive = inclusive;\n    _this.index = 0;\n    return _this;\n  }\n  TakeWhileSubscriber2.prototype._next = function(value) {\n    var destination = this.destination;\n    var result;\n    try {\n      result = this.predicate(value, this.index++);\n    } catch (err) {\n      destination.error(err);\n      return;\n    }\n    this.nextOrComplete(value, result);\n  };\n  TakeWhileSubscriber2.prototype.nextOrComplete = function(value, predicateResult) {\n    var destination = this.destination;\n    if (Boolean(predicateResult)) {\n      destination.next(value);\n    } else {\n      if (this.inclusive) {\n        destination.next(value);\n      }\n      destination.complete();\n    }\n  };\n  return TakeWhileSubscriber2;\n}(Subscriber);\nfunction tap(nextOrObserver, error, complete) {\n  return function tapOperatorFunction(source) {\n    return source.lift(new DoOperator(nextOrObserver, error, complete));\n  };\n}\nvar DoOperator = /* @__PURE__ */ function() {\n  function DoOperator2(nextOrObserver, error, complete) {\n    this.nextOrObserver = nextOrObserver;\n    this.error = error;\n    this.complete = complete;\n  }\n  DoOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new TapSubscriber(subscriber, this.nextOrObserver, this.error, this.complete));\n  };\n  return DoOperator2;\n}();\nvar TapSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(TapSubscriber2, _super);\n  function TapSubscriber2(destination, observerOrNext, error, complete) {\n    var _this = _super.call(this, destination) || this;\n    _this._tapNext = noop$1;\n    _this._tapError = noop$1;\n    _this._tapComplete = noop$1;\n    _this._tapError = error || noop$1;\n    _this._tapComplete = complete || noop$1;\n    if (isFunction(observerOrNext)) {\n      _this._context = _this;\n      _this._tapNext = observerOrNext;\n    } else if (observerOrNext) {\n      _this._context = observerOrNext;\n      _this._tapNext = observerOrNext.next || noop$1;\n      _this._tapError = observerOrNext.error || noop$1;\n      _this._tapComplete = observerOrNext.complete || noop$1;\n    }\n    return _this;\n  }\n  TapSubscriber2.prototype._next = function(value) {\n    try {\n      this._tapNext.call(this._context, value);\n    } catch (err) {\n      this.destination.error(err);\n      return;\n    }\n    this.destination.next(value);\n  };\n  TapSubscriber2.prototype._error = function(err) {\n    try {\n      this._tapError.call(this._context, err);\n    } catch (err2) {\n      this.destination.error(err2);\n      return;\n    }\n    this.destination.error(err);\n  };\n  TapSubscriber2.prototype._complete = function() {\n    try {\n      this._tapComplete.call(this._context);\n    } catch (err) {\n      this.destination.error(err);\n      return;\n    }\n    return this.destination.complete();\n  };\n  return TapSubscriber2;\n}(Subscriber);\nvar defaultThrottleConfig = {\n  leading: true,\n  trailing: false\n};\nfunction throttle(durationSelector, config2) {\n  if (config2 === void 0) {\n    config2 = defaultThrottleConfig;\n  }\n  return function(source) {\n    return source.lift(new ThrottleOperator(durationSelector, !!config2.leading, !!config2.trailing));\n  };\n}\nvar ThrottleOperator = /* @__PURE__ */ function() {\n  function ThrottleOperator2(durationSelector, leading, trailing) {\n    this.durationSelector = durationSelector;\n    this.leading = leading;\n    this.trailing = trailing;\n  }\n  ThrottleOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new ThrottleSubscriber(subscriber, this.durationSelector, this.leading, this.trailing));\n  };\n  return ThrottleOperator2;\n}();\nvar ThrottleSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(ThrottleSubscriber2, _super);\n  function ThrottleSubscriber2(destination, durationSelector, _leading, _trailing) {\n    var _this = _super.call(this, destination) || this;\n    _this.destination = destination;\n    _this.durationSelector = durationSelector;\n    _this._leading = _leading;\n    _this._trailing = _trailing;\n    _this._hasValue = false;\n    return _this;\n  }\n  ThrottleSubscriber2.prototype._next = function(value) {\n    this._hasValue = true;\n    this._sendValue = value;\n    if (!this._throttled) {\n      if (this._leading) {\n        this.send();\n      } else {\n        this.throttle(value);\n      }\n    }\n  };\n  ThrottleSubscriber2.prototype.send = function() {\n    var _a = this, _hasValue = _a._hasValue, _sendValue = _a._sendValue;\n    if (_hasValue) {\n      this.destination.next(_sendValue);\n      this.throttle(_sendValue);\n    }\n    this._hasValue = false;\n    this._sendValue = void 0;\n  };\n  ThrottleSubscriber2.prototype.throttle = function(value) {\n    var duration = this.tryDurationSelector(value);\n    if (!!duration) {\n      this.add(this._throttled = innerSubscribe(duration, new SimpleInnerSubscriber(this)));\n    }\n  };\n  ThrottleSubscriber2.prototype.tryDurationSelector = function(value) {\n    try {\n      return this.durationSelector(value);\n    } catch (err) {\n      this.destination.error(err);\n      return null;\n    }\n  };\n  ThrottleSubscriber2.prototype.throttlingDone = function() {\n    var _a = this, _throttled = _a._throttled, _trailing = _a._trailing;\n    if (_throttled) {\n      _throttled.unsubscribe();\n    }\n    this._throttled = void 0;\n    if (_trailing) {\n      this.send();\n    }\n  };\n  ThrottleSubscriber2.prototype.notifyNext = function() {\n    this.throttlingDone();\n  };\n  ThrottleSubscriber2.prototype.notifyComplete = function() {\n    this.throttlingDone();\n  };\n  return ThrottleSubscriber2;\n}(SimpleOuterSubscriber);\nfunction throttleTime(duration, scheduler, config2) {\n  if (scheduler === void 0) {\n    scheduler = async$1;\n  }\n  if (config2 === void 0) {\n    config2 = defaultThrottleConfig;\n  }\n  return function(source) {\n    return source.lift(new ThrottleTimeOperator(duration, scheduler, config2.leading, config2.trailing));\n  };\n}\nvar ThrottleTimeOperator = /* @__PURE__ */ function() {\n  function ThrottleTimeOperator2(duration, scheduler, leading, trailing) {\n    this.duration = duration;\n    this.scheduler = scheduler;\n    this.leading = leading;\n    this.trailing = trailing;\n  }\n  ThrottleTimeOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new ThrottleTimeSubscriber(subscriber, this.duration, this.scheduler, this.leading, this.trailing));\n  };\n  return ThrottleTimeOperator2;\n}();\nvar ThrottleTimeSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(ThrottleTimeSubscriber2, _super);\n  function ThrottleTimeSubscriber2(destination, duration, scheduler, leading, trailing) {\n    var _this = _super.call(this, destination) || this;\n    _this.duration = duration;\n    _this.scheduler = scheduler;\n    _this.leading = leading;\n    _this.trailing = trailing;\n    _this._hasTrailingValue = false;\n    _this._trailingValue = null;\n    return _this;\n  }\n  ThrottleTimeSubscriber2.prototype._next = function(value) {\n    if (this.throttled) {\n      if (this.trailing) {\n        this._trailingValue = value;\n        this._hasTrailingValue = true;\n      }\n    } else {\n      this.add(this.throttled = this.scheduler.schedule(dispatchNext, this.duration, { subscriber: this }));\n      if (this.leading) {\n        this.destination.next(value);\n      } else if (this.trailing) {\n        this._trailingValue = value;\n        this._hasTrailingValue = true;\n      }\n    }\n  };\n  ThrottleTimeSubscriber2.prototype._complete = function() {\n    if (this._hasTrailingValue) {\n      this.destination.next(this._trailingValue);\n      this.destination.complete();\n    } else {\n      this.destination.complete();\n    }\n  };\n  ThrottleTimeSubscriber2.prototype.clearThrottle = function() {\n    var throttled = this.throttled;\n    if (throttled) {\n      if (this.trailing && this._hasTrailingValue) {\n        this.destination.next(this._trailingValue);\n        this._trailingValue = null;\n        this._hasTrailingValue = false;\n      }\n      throttled.unsubscribe();\n      this.remove(throttled);\n      this.throttled = null;\n    }\n  };\n  return ThrottleTimeSubscriber2;\n}(Subscriber);\nfunction dispatchNext(arg) {\n  var subscriber = arg.subscriber;\n  subscriber.clearThrottle();\n}\nfunction timeInterval(scheduler) {\n  if (scheduler === void 0) {\n    scheduler = async$1;\n  }\n  return function(source) {\n    return defer(function() {\n      return source.pipe(scan(function(_a, value) {\n        var current = _a.current;\n        return { value, current: scheduler.now(), last: current };\n      }, { current: scheduler.now(), value: void 0, last: void 0 }), map(function(_a) {\n        var current = _a.current, last2 = _a.last, value = _a.value;\n        return new TimeInterval(value, current - last2);\n      }));\n    });\n  };\n}\nvar TimeInterval = /* @__PURE__ */ function() {\n  function TimeInterval2(value, interval2) {\n    this.value = value;\n    this.interval = interval2;\n  }\n  return TimeInterval2;\n}();\nfunction timeoutWith(due, withObservable, scheduler) {\n  if (scheduler === void 0) {\n    scheduler = async$1;\n  }\n  return function(source) {\n    var absoluteTimeout = isDate(due);\n    var waitFor = absoluteTimeout ? +due - scheduler.now() : Math.abs(due);\n    return source.lift(new TimeoutWithOperator(waitFor, absoluteTimeout, withObservable, scheduler));\n  };\n}\nvar TimeoutWithOperator = /* @__PURE__ */ function() {\n  function TimeoutWithOperator2(waitFor, absoluteTimeout, withObservable, scheduler) {\n    this.waitFor = waitFor;\n    this.absoluteTimeout = absoluteTimeout;\n    this.withObservable = withObservable;\n    this.scheduler = scheduler;\n  }\n  TimeoutWithOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new TimeoutWithSubscriber(subscriber, this.absoluteTimeout, this.waitFor, this.withObservable, this.scheduler));\n  };\n  return TimeoutWithOperator2;\n}();\nvar TimeoutWithSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(TimeoutWithSubscriber2, _super);\n  function TimeoutWithSubscriber2(destination, absoluteTimeout, waitFor, withObservable, scheduler) {\n    var _this = _super.call(this, destination) || this;\n    _this.absoluteTimeout = absoluteTimeout;\n    _this.waitFor = waitFor;\n    _this.withObservable = withObservable;\n    _this.scheduler = scheduler;\n    _this.scheduleTimeout();\n    return _this;\n  }\n  TimeoutWithSubscriber2.dispatchTimeout = function(subscriber) {\n    var withObservable = subscriber.withObservable;\n    subscriber._unsubscribeAndRecycle();\n    subscriber.add(innerSubscribe(withObservable, new SimpleInnerSubscriber(subscriber)));\n  };\n  TimeoutWithSubscriber2.prototype.scheduleTimeout = function() {\n    var action = this.action;\n    if (action) {\n      this.action = action.schedule(this, this.waitFor);\n    } else {\n      this.add(this.action = this.scheduler.schedule(TimeoutWithSubscriber2.dispatchTimeout, this.waitFor, this));\n    }\n  };\n  TimeoutWithSubscriber2.prototype._next = function(value) {\n    if (!this.absoluteTimeout) {\n      this.scheduleTimeout();\n    }\n    _super.prototype._next.call(this, value);\n  };\n  TimeoutWithSubscriber2.prototype._unsubscribe = function() {\n    this.action = void 0;\n    this.scheduler = null;\n    this.withObservable = null;\n  };\n  return TimeoutWithSubscriber2;\n}(SimpleOuterSubscriber);\nfunction timeout(due, scheduler) {\n  if (scheduler === void 0) {\n    scheduler = async$1;\n  }\n  return timeoutWith(due, throwError(new TimeoutError()), scheduler);\n}\nfunction timestamp(scheduler) {\n  if (scheduler === void 0) {\n    scheduler = async$1;\n  }\n  return map(function(value) {\n    return new Timestamp(value, scheduler.now());\n  });\n}\nvar Timestamp = /* @__PURE__ */ function() {\n  function Timestamp2(value, timestamp2) {\n    this.value = value;\n    this.timestamp = timestamp2;\n  }\n  return Timestamp2;\n}();\nfunction toArrayReducer(arr, item, index) {\n  if (index === 0) {\n    return [item];\n  }\n  arr.push(item);\n  return arr;\n}\nfunction toArray() {\n  return reduce(toArrayReducer, []);\n}\nfunction window$1(windowBoundaries) {\n  return function windowOperatorFunction(source) {\n    return source.lift(new WindowOperator$1(windowBoundaries));\n  };\n}\nvar WindowOperator$1 = /* @__PURE__ */ function() {\n  function WindowOperator2(windowBoundaries) {\n    this.windowBoundaries = windowBoundaries;\n  }\n  WindowOperator2.prototype.call = function(subscriber, source) {\n    var windowSubscriber = new WindowSubscriber$1(subscriber);\n    var sourceSubscription = source.subscribe(windowSubscriber);\n    if (!sourceSubscription.closed) {\n      windowSubscriber.add(innerSubscribe(this.windowBoundaries, new SimpleInnerSubscriber(windowSubscriber)));\n    }\n    return sourceSubscription;\n  };\n  return WindowOperator2;\n}();\nvar WindowSubscriber$1 = /* @__PURE__ */ function(_super) {\n  __extends(WindowSubscriber2, _super);\n  function WindowSubscriber2(destination) {\n    var _this = _super.call(this, destination) || this;\n    _this.window = new Subject();\n    destination.next(_this.window);\n    return _this;\n  }\n  WindowSubscriber2.prototype.notifyNext = function() {\n    this.openWindow();\n  };\n  WindowSubscriber2.prototype.notifyError = function(error) {\n    this._error(error);\n  };\n  WindowSubscriber2.prototype.notifyComplete = function() {\n    this._complete();\n  };\n  WindowSubscriber2.prototype._next = function(value) {\n    this.window.next(value);\n  };\n  WindowSubscriber2.prototype._error = function(err) {\n    this.window.error(err);\n    this.destination.error(err);\n  };\n  WindowSubscriber2.prototype._complete = function() {\n    this.window.complete();\n    this.destination.complete();\n  };\n  WindowSubscriber2.prototype._unsubscribe = function() {\n    this.window = null;\n  };\n  WindowSubscriber2.prototype.openWindow = function() {\n    var prevWindow = this.window;\n    if (prevWindow) {\n      prevWindow.complete();\n    }\n    var destination = this.destination;\n    var newWindow = this.window = new Subject();\n    destination.next(newWindow);\n  };\n  return WindowSubscriber2;\n}(SimpleOuterSubscriber);\nfunction windowCount(windowSize, startWindowEvery) {\n  if (startWindowEvery === void 0) {\n    startWindowEvery = 0;\n  }\n  return function windowCountOperatorFunction(source) {\n    return source.lift(new WindowCountOperator(windowSize, startWindowEvery));\n  };\n}\nvar WindowCountOperator = /* @__PURE__ */ function() {\n  function WindowCountOperator2(windowSize, startWindowEvery) {\n    this.windowSize = windowSize;\n    this.startWindowEvery = startWindowEvery;\n  }\n  WindowCountOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new WindowCountSubscriber(subscriber, this.windowSize, this.startWindowEvery));\n  };\n  return WindowCountOperator2;\n}();\nvar WindowCountSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(WindowCountSubscriber2, _super);\n  function WindowCountSubscriber2(destination, windowSize, startWindowEvery) {\n    var _this = _super.call(this, destination) || this;\n    _this.destination = destination;\n    _this.windowSize = windowSize;\n    _this.startWindowEvery = startWindowEvery;\n    _this.windows = [new Subject()];\n    _this.count = 0;\n    destination.next(_this.windows[0]);\n    return _this;\n  }\n  WindowCountSubscriber2.prototype._next = function(value) {\n    var startWindowEvery = this.startWindowEvery > 0 ? this.startWindowEvery : this.windowSize;\n    var destination = this.destination;\n    var windowSize = this.windowSize;\n    var windows = this.windows;\n    var len = windows.length;\n    for (var i = 0; i < len && !this.closed; i++) {\n      windows[i].next(value);\n    }\n    var c = this.count - windowSize + 1;\n    if (c >= 0 && c % startWindowEvery === 0 && !this.closed) {\n      windows.shift().complete();\n    }\n    if (++this.count % startWindowEvery === 0 && !this.closed) {\n      var window_1 = new Subject();\n      windows.push(window_1);\n      destination.next(window_1);\n    }\n  };\n  WindowCountSubscriber2.prototype._error = function(err) {\n    var windows = this.windows;\n    if (windows) {\n      while (windows.length > 0 && !this.closed) {\n        windows.shift().error(err);\n      }\n    }\n    this.destination.error(err);\n  };\n  WindowCountSubscriber2.prototype._complete = function() {\n    var windows = this.windows;\n    if (windows) {\n      while (windows.length > 0 && !this.closed) {\n        windows.shift().complete();\n      }\n    }\n    this.destination.complete();\n  };\n  WindowCountSubscriber2.prototype._unsubscribe = function() {\n    this.count = 0;\n    this.windows = null;\n  };\n  return WindowCountSubscriber2;\n}(Subscriber);\nfunction windowTime(windowTimeSpan) {\n  var scheduler = async$1;\n  var windowCreationInterval = null;\n  var maxWindowSize = Number.POSITIVE_INFINITY;\n  if (isScheduler(arguments[3])) {\n    scheduler = arguments[3];\n  }\n  if (isScheduler(arguments[2])) {\n    scheduler = arguments[2];\n  } else if (isNumeric(arguments[2])) {\n    maxWindowSize = Number(arguments[2]);\n  }\n  if (isScheduler(arguments[1])) {\n    scheduler = arguments[1];\n  } else if (isNumeric(arguments[1])) {\n    windowCreationInterval = Number(arguments[1]);\n  }\n  return function windowTimeOperatorFunction(source) {\n    return source.lift(new WindowTimeOperator(windowTimeSpan, windowCreationInterval, maxWindowSize, scheduler));\n  };\n}\nvar WindowTimeOperator = /* @__PURE__ */ function() {\n  function WindowTimeOperator2(windowTimeSpan, windowCreationInterval, maxWindowSize, scheduler) {\n    this.windowTimeSpan = windowTimeSpan;\n    this.windowCreationInterval = windowCreationInterval;\n    this.maxWindowSize = maxWindowSize;\n    this.scheduler = scheduler;\n  }\n  WindowTimeOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new WindowTimeSubscriber(subscriber, this.windowTimeSpan, this.windowCreationInterval, this.maxWindowSize, this.scheduler));\n  };\n  return WindowTimeOperator2;\n}();\nvar CountedSubject = /* @__PURE__ */ function(_super) {\n  __extends(CountedSubject2, _super);\n  function CountedSubject2() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this._numberOfNextedValues = 0;\n    return _this;\n  }\n  CountedSubject2.prototype.next = function(value) {\n    this._numberOfNextedValues++;\n    _super.prototype.next.call(this, value);\n  };\n  Object.defineProperty(CountedSubject2.prototype, \"numberOfNextedValues\", {\n    get: function() {\n      return this._numberOfNextedValues;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return CountedSubject2;\n}(Subject);\nvar WindowTimeSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(WindowTimeSubscriber2, _super);\n  function WindowTimeSubscriber2(destination, windowTimeSpan, windowCreationInterval, maxWindowSize, scheduler) {\n    var _this = _super.call(this, destination) || this;\n    _this.destination = destination;\n    _this.windowTimeSpan = windowTimeSpan;\n    _this.windowCreationInterval = windowCreationInterval;\n    _this.maxWindowSize = maxWindowSize;\n    _this.scheduler = scheduler;\n    _this.windows = [];\n    var window2 = _this.openWindow();\n    if (windowCreationInterval !== null && windowCreationInterval >= 0) {\n      var closeState = { subscriber: _this, window: window2, context: null };\n      var creationState = { windowTimeSpan, windowCreationInterval, subscriber: _this, scheduler };\n      _this.add(scheduler.schedule(dispatchWindowClose, windowTimeSpan, closeState));\n      _this.add(scheduler.schedule(dispatchWindowCreation, windowCreationInterval, creationState));\n    } else {\n      var timeSpanOnlyState = { subscriber: _this, window: window2, windowTimeSpan };\n      _this.add(scheduler.schedule(dispatchWindowTimeSpanOnly, windowTimeSpan, timeSpanOnlyState));\n    }\n    return _this;\n  }\n  WindowTimeSubscriber2.prototype._next = function(value) {\n    var windows = this.windows;\n    var len = windows.length;\n    for (var i = 0; i < len; i++) {\n      var window_1 = windows[i];\n      if (!window_1.closed) {\n        window_1.next(value);\n        if (window_1.numberOfNextedValues >= this.maxWindowSize) {\n          this.closeWindow(window_1);\n        }\n      }\n    }\n  };\n  WindowTimeSubscriber2.prototype._error = function(err) {\n    var windows = this.windows;\n    while (windows.length > 0) {\n      windows.shift().error(err);\n    }\n    this.destination.error(err);\n  };\n  WindowTimeSubscriber2.prototype._complete = function() {\n    var windows = this.windows;\n    while (windows.length > 0) {\n      var window_2 = windows.shift();\n      if (!window_2.closed) {\n        window_2.complete();\n      }\n    }\n    this.destination.complete();\n  };\n  WindowTimeSubscriber2.prototype.openWindow = function() {\n    var window2 = new CountedSubject();\n    this.windows.push(window2);\n    var destination = this.destination;\n    destination.next(window2);\n    return window2;\n  };\n  WindowTimeSubscriber2.prototype.closeWindow = function(window2) {\n    window2.complete();\n    var windows = this.windows;\n    windows.splice(windows.indexOf(window2), 1);\n  };\n  return WindowTimeSubscriber2;\n}(Subscriber);\nfunction dispatchWindowTimeSpanOnly(state) {\n  var subscriber = state.subscriber, windowTimeSpan = state.windowTimeSpan, window2 = state.window;\n  if (window2) {\n    subscriber.closeWindow(window2);\n  }\n  state.window = subscriber.openWindow();\n  this.schedule(state, windowTimeSpan);\n}\nfunction dispatchWindowCreation(state) {\n  var windowTimeSpan = state.windowTimeSpan, subscriber = state.subscriber, scheduler = state.scheduler, windowCreationInterval = state.windowCreationInterval;\n  var window2 = subscriber.openWindow();\n  var action = this;\n  var context2 = { action, subscription: null };\n  var timeSpanState = { subscriber, window: window2, context: context2 };\n  context2.subscription = scheduler.schedule(dispatchWindowClose, windowTimeSpan, timeSpanState);\n  action.add(context2.subscription);\n  action.schedule(state, windowCreationInterval);\n}\nfunction dispatchWindowClose(state) {\n  var subscriber = state.subscriber, window2 = state.window, context2 = state.context;\n  if (context2 && context2.action && context2.subscription) {\n    context2.action.remove(context2.subscription);\n  }\n  subscriber.closeWindow(window2);\n}\nfunction windowToggle(openings, closingSelector) {\n  return function(source) {\n    return source.lift(new WindowToggleOperator(openings, closingSelector));\n  };\n}\nvar WindowToggleOperator = /* @__PURE__ */ function() {\n  function WindowToggleOperator2(openings, closingSelector) {\n    this.openings = openings;\n    this.closingSelector = closingSelector;\n  }\n  WindowToggleOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new WindowToggleSubscriber(subscriber, this.openings, this.closingSelector));\n  };\n  return WindowToggleOperator2;\n}();\nvar WindowToggleSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(WindowToggleSubscriber2, _super);\n  function WindowToggleSubscriber2(destination, openings, closingSelector) {\n    var _this = _super.call(this, destination) || this;\n    _this.openings = openings;\n    _this.closingSelector = closingSelector;\n    _this.contexts = [];\n    _this.add(_this.openSubscription = subscribeToResult(_this, openings, openings));\n    return _this;\n  }\n  WindowToggleSubscriber2.prototype._next = function(value) {\n    var contexts = this.contexts;\n    if (contexts) {\n      var len = contexts.length;\n      for (var i = 0; i < len; i++) {\n        contexts[i].window.next(value);\n      }\n    }\n  };\n  WindowToggleSubscriber2.prototype._error = function(err) {\n    var contexts = this.contexts;\n    this.contexts = null;\n    if (contexts) {\n      var len = contexts.length;\n      var index = -1;\n      while (++index < len) {\n        var context_1 = contexts[index];\n        context_1.window.error(err);\n        context_1.subscription.unsubscribe();\n      }\n    }\n    _super.prototype._error.call(this, err);\n  };\n  WindowToggleSubscriber2.prototype._complete = function() {\n    var contexts = this.contexts;\n    this.contexts = null;\n    if (contexts) {\n      var len = contexts.length;\n      var index = -1;\n      while (++index < len) {\n        var context_2 = contexts[index];\n        context_2.window.complete();\n        context_2.subscription.unsubscribe();\n      }\n    }\n    _super.prototype._complete.call(this);\n  };\n  WindowToggleSubscriber2.prototype._unsubscribe = function() {\n    var contexts = this.contexts;\n    this.contexts = null;\n    if (contexts) {\n      var len = contexts.length;\n      var index = -1;\n      while (++index < len) {\n        var context_3 = contexts[index];\n        context_3.window.unsubscribe();\n        context_3.subscription.unsubscribe();\n      }\n    }\n  };\n  WindowToggleSubscriber2.prototype.notifyNext = function(outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n    if (outerValue === this.openings) {\n      var closingNotifier = void 0;\n      try {\n        var closingSelector = this.closingSelector;\n        closingNotifier = closingSelector(innerValue);\n      } catch (e) {\n        return this.error(e);\n      }\n      var window_1 = new Subject();\n      var subscription = new Subscription();\n      var context_4 = { window: window_1, subscription };\n      this.contexts.push(context_4);\n      var innerSubscription = subscribeToResult(this, closingNotifier, context_4);\n      if (innerSubscription.closed) {\n        this.closeWindow(this.contexts.length - 1);\n      } else {\n        innerSubscription.context = context_4;\n        subscription.add(innerSubscription);\n      }\n      this.destination.next(window_1);\n    } else {\n      this.closeWindow(this.contexts.indexOf(outerValue));\n    }\n  };\n  WindowToggleSubscriber2.prototype.notifyError = function(err) {\n    this.error(err);\n  };\n  WindowToggleSubscriber2.prototype.notifyComplete = function(inner) {\n    if (inner !== this.openSubscription) {\n      this.closeWindow(this.contexts.indexOf(inner.context));\n    }\n  };\n  WindowToggleSubscriber2.prototype.closeWindow = function(index) {\n    if (index === -1) {\n      return;\n    }\n    var contexts = this.contexts;\n    var context2 = contexts[index];\n    var window2 = context2.window, subscription = context2.subscription;\n    contexts.splice(index, 1);\n    window2.complete();\n    subscription.unsubscribe();\n  };\n  return WindowToggleSubscriber2;\n}(OuterSubscriber);\nfunction windowWhen(closingSelector) {\n  return function windowWhenOperatorFunction(source) {\n    return source.lift(new WindowOperator(closingSelector));\n  };\n}\nvar WindowOperator = /* @__PURE__ */ function() {\n  function WindowOperator2(closingSelector) {\n    this.closingSelector = closingSelector;\n  }\n  WindowOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new WindowSubscriber(subscriber, this.closingSelector));\n  };\n  return WindowOperator2;\n}();\nvar WindowSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(WindowSubscriber2, _super);\n  function WindowSubscriber2(destination, closingSelector) {\n    var _this = _super.call(this, destination) || this;\n    _this.destination = destination;\n    _this.closingSelector = closingSelector;\n    _this.openWindow();\n    return _this;\n  }\n  WindowSubscriber2.prototype.notifyNext = function(_outerValue, _innerValue, _outerIndex, _innerIndex, innerSub) {\n    this.openWindow(innerSub);\n  };\n  WindowSubscriber2.prototype.notifyError = function(error) {\n    this._error(error);\n  };\n  WindowSubscriber2.prototype.notifyComplete = function(innerSub) {\n    this.openWindow(innerSub);\n  };\n  WindowSubscriber2.prototype._next = function(value) {\n    this.window.next(value);\n  };\n  WindowSubscriber2.prototype._error = function(err) {\n    this.window.error(err);\n    this.destination.error(err);\n    this.unsubscribeClosingNotification();\n  };\n  WindowSubscriber2.prototype._complete = function() {\n    this.window.complete();\n    this.destination.complete();\n    this.unsubscribeClosingNotification();\n  };\n  WindowSubscriber2.prototype.unsubscribeClosingNotification = function() {\n    if (this.closingNotification) {\n      this.closingNotification.unsubscribe();\n    }\n  };\n  WindowSubscriber2.prototype.openWindow = function(innerSub) {\n    if (innerSub === void 0) {\n      innerSub = null;\n    }\n    if (innerSub) {\n      this.remove(innerSub);\n      innerSub.unsubscribe();\n    }\n    var prevWindow = this.window;\n    if (prevWindow) {\n      prevWindow.complete();\n    }\n    var window2 = this.window = new Subject();\n    this.destination.next(window2);\n    var closingNotifier;\n    try {\n      var closingSelector = this.closingSelector;\n      closingNotifier = closingSelector();\n    } catch (e) {\n      this.destination.error(e);\n      this.window.error(e);\n      return;\n    }\n    this.add(this.closingNotification = subscribeToResult(this, closingNotifier));\n  };\n  return WindowSubscriber2;\n}(OuterSubscriber);\nfunction withLatestFrom() {\n  var args = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    args[_i] = arguments[_i];\n  }\n  return function(source) {\n    var project;\n    if (typeof args[args.length - 1] === \"function\") {\n      project = args.pop();\n    }\n    var observables = args;\n    return source.lift(new WithLatestFromOperator(observables, project));\n  };\n}\nvar WithLatestFromOperator = /* @__PURE__ */ function() {\n  function WithLatestFromOperator2(observables, project) {\n    this.observables = observables;\n    this.project = project;\n  }\n  WithLatestFromOperator2.prototype.call = function(subscriber, source) {\n    return source.subscribe(new WithLatestFromSubscriber(subscriber, this.observables, this.project));\n  };\n  return WithLatestFromOperator2;\n}();\nvar WithLatestFromSubscriber = /* @__PURE__ */ function(_super) {\n  __extends(WithLatestFromSubscriber2, _super);\n  function WithLatestFromSubscriber2(destination, observables, project) {\n    var _this = _super.call(this, destination) || this;\n    _this.observables = observables;\n    _this.project = project;\n    _this.toRespond = [];\n    var len = observables.length;\n    _this.values = new Array(len);\n    for (var i = 0; i < len; i++) {\n      _this.toRespond.push(i);\n    }\n    for (var i = 0; i < len; i++) {\n      var observable2 = observables[i];\n      _this.add(subscribeToResult(_this, observable2, void 0, i));\n    }\n    return _this;\n  }\n  WithLatestFromSubscriber2.prototype.notifyNext = function(_outerValue, innerValue, outerIndex) {\n    this.values[outerIndex] = innerValue;\n    var toRespond = this.toRespond;\n    if (toRespond.length > 0) {\n      var found = toRespond.indexOf(outerIndex);\n      if (found !== -1) {\n        toRespond.splice(found, 1);\n      }\n    }\n  };\n  WithLatestFromSubscriber2.prototype.notifyComplete = function() {\n  };\n  WithLatestFromSubscriber2.prototype._next = function(value) {\n    if (this.toRespond.length === 0) {\n      var args = [value].concat(this.values);\n      if (this.project) {\n        this._tryProject(args);\n      } else {\n        this.destination.next(args);\n      }\n    }\n  };\n  WithLatestFromSubscriber2.prototype._tryProject = function(args) {\n    var result;\n    try {\n      result = this.project.apply(this, args);\n    } catch (err) {\n      this.destination.error(err);\n      return;\n    }\n    this.destination.next(result);\n  };\n  return WithLatestFromSubscriber2;\n}(OuterSubscriber);\nfunction zip() {\n  var observables = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    observables[_i] = arguments[_i];\n  }\n  return function zipOperatorFunction(source) {\n    return source.lift.call(zip$1.apply(void 0, [source].concat(observables)));\n  };\n}\nfunction zipAll(project) {\n  return function(source) {\n    return source.lift(new ZipOperator(project));\n  };\n}\nvar operators = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  audit,\n  auditTime,\n  buffer,\n  bufferCount,\n  bufferTime,\n  bufferToggle,\n  bufferWhen,\n  catchError,\n  combineAll,\n  combineLatest,\n  concat,\n  concatAll,\n  concatMap,\n  concatMapTo,\n  count,\n  debounce,\n  debounceTime,\n  defaultIfEmpty,\n  delay,\n  delayWhen,\n  dematerialize,\n  distinct,\n  distinctUntilChanged,\n  distinctUntilKeyChanged,\n  elementAt,\n  endWith,\n  every,\n  exhaust,\n  exhaustMap,\n  expand,\n  filter,\n  finalize,\n  find,\n  findIndex,\n  first,\n  groupBy,\n  ignoreElements,\n  isEmpty,\n  last,\n  map,\n  mapTo,\n  materialize,\n  max,\n  merge,\n  mergeAll,\n  mergeMap,\n  flatMap,\n  mergeMapTo,\n  mergeScan,\n  min,\n  multicast,\n  observeOn,\n  onErrorResumeNext,\n  pairwise,\n  partition,\n  pluck,\n  publish: publish$1,\n  publishBehavior,\n  publishLast,\n  publishReplay,\n  race,\n  reduce,\n  repeat,\n  repeatWhen,\n  retry,\n  retryWhen,\n  refCount,\n  sample,\n  sampleTime,\n  scan,\n  sequenceEqual,\n  share,\n  shareReplay,\n  single,\n  skip,\n  skipLast,\n  skipUntil,\n  skipWhile,\n  startWith,\n  subscribeOn,\n  switchAll,\n  switchMap,\n  switchMapTo,\n  take,\n  takeLast,\n  takeUntil,\n  takeWhile,\n  tap,\n  throttle,\n  throttleTime,\n  throwIfEmpty,\n  timeInterval,\n  timeout,\n  timeoutWith,\n  timestamp,\n  toArray,\n  window: window$1,\n  windowCount,\n  windowTime,\n  windowToggle,\n  windowWhen,\n  withLatestFrom,\n  zip,\n  zipAll\n}, Symbol.toStringTag, { value: \"Module\" }));\nvar require$$13$1 = /* @__PURE__ */ getAugmentedNamespace(operators);\nvar _interopRequireDefault$2 = interopRequireDefault.exports;\nObject.defineProperty(bbi, \"__esModule\", {\n  value: true\n});\nbbi.BBI = void 0;\nvar _regenerator$2 = _interopRequireDefault$2(regenerator);\nvar _asyncToGenerator2$2 = _interopRequireDefault$2(asyncToGenerator.exports);\nvar _classCallCheck2$2 = _interopRequireDefault$2(classCallCheck.exports);\nvar _createClass2$2 = _interopRequireDefault$2(createClass.exports);\nvar _defineProperty2$1 = _interopRequireDefault$2(defineProperty.exports);\nvar _binaryParser$1 = binary_parser;\nvar _genericFilehandle = require$$7;\nvar _rxjs$1 = require$$12$1;\nvar _operators$1 = require$$13$1;\nvar _abortablePromiseCache$1 = _interopRequireDefault$2(dist);\nvar _quickLru$1 = _interopRequireDefault$2(require$$9);\nvar _blockView$1 = blockView;\nfunction ownKeys$1(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly)\n      symbols = symbols.filter(function(sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread$1(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys$1(Object(source), true).forEach(function(key) {\n        (0, _defineProperty2$1.default)(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$1(Object(source)).forEach(function(key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\nvar BIG_WIG_MAGIC = -2003829722;\nvar BIG_BED_MAGIC = -2021002517;\nfunction getParsers(isBE) {\n  var le = isBE ? \"big\" : \"little\";\n  var headerParser = new _binaryParser$1.Parser().endianess(le).int32(\"magic\").uint16(\"version\").uint16(\"numZoomLevels\").uint64(\"chromTreeOffset\").uint64(\"unzoomedDataOffset\").uint64(\"unzoomedIndexOffset\").uint16(\"fieldCount\").uint16(\"definedFieldCount\").uint64(\"asOffset\").uint64(\"totalSummaryOffset\").uint32(\"uncompressBufSize\").uint64(\"extHeaderOffset\").array(\"zoomLevels\", {\n    length: \"numZoomLevels\",\n    type: new _binaryParser$1.Parser().uint32(\"reductionLevel\").uint32(\"reserved\").uint64(\"dataOffset\").uint64(\"indexOffset\")\n  });\n  var totalSummaryParser = new _binaryParser$1.Parser().endianess(le).uint64(\"basesCovered\").double(\"scoreMin\").double(\"scoreMax\").double(\"scoreSum\").double(\"scoreSumSquares\");\n  var chromTreeParser = new _binaryParser$1.Parser().endianess(le).uint32(\"magic\").uint32(\"blockSize\").uint32(\"keySize\").uint32(\"valSize\").uint64(\"itemCount\");\n  var isLeafNode = new _binaryParser$1.Parser().endianess(le).uint8(\"isLeafNode\").skip(1).uint16(\"cnt\");\n  return {\n    chromTreeParser,\n    totalSummaryParser,\n    headerParser,\n    isLeafNode\n  };\n}\nvar BBI = /* @__PURE__ */ function() {\n  (0, _createClass2$2.default)(BBI2, [{\n    key: \"getHeader\",\n    value: function getHeader() {\n      var opts = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};\n      var options = \"aborted\" in opts ? {\n        signal: opts\n      } : opts;\n      return this.headerCache.get(JSON.stringify(options), options, options.signal);\n    }\n  }]);\n  function BBI2() {\n    var _this = this;\n    var options = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};\n    (0, _classCallCheck2$2.default)(this, BBI2);\n    (0, _defineProperty2$1.default)(this, \"bbi\", void 0);\n    (0, _defineProperty2$1.default)(this, \"headerCache\", new _abortablePromiseCache$1.default({\n      cache: new _quickLru$1.default({\n        maxSize: 1\n      }),\n      fill: function() {\n        var _fill = (0, _asyncToGenerator2$2.default)(/* @__PURE__ */ _regenerator$2.default.mark(function _callee(params, signal) {\n          return _regenerator$2.default.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  return _context.abrupt(\"return\", _this._getHeader(_objectSpread$1(_objectSpread$1({}, params), {}, {\n                    signal\n                  })));\n                case 1:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n        function fill(_x, _x2) {\n          return _fill.apply(this, arguments);\n        }\n        return fill;\n      }()\n    }));\n    (0, _defineProperty2$1.default)(this, \"renameRefSeqs\", void 0);\n    var filehandle = options.filehandle, renameRefSeqs = options.renameRefSeqs, path = options.path, url = options.url;\n    this.renameRefSeqs = renameRefSeqs || function(s) {\n      return s;\n    };\n    if (filehandle) {\n      this.bbi = filehandle;\n    } else if (url) {\n      this.bbi = new _genericFilehandle.RemoteFile(url);\n    } else if (path) {\n      this.bbi = new _genericFilehandle.LocalFile(path);\n    } else {\n      throw new Error(\"no file given\");\n    }\n  }\n  (0, _createClass2$2.default)(BBI2, [{\n    key: \"_getHeader\",\n    value: function() {\n      var _getHeader2 = (0, _asyncToGenerator2$2.default)(/* @__PURE__ */ _regenerator$2.default.mark(function _callee2(opts) {\n        var header, chroms;\n        return _regenerator$2.default.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this._getMainHeader(opts);\n              case 2:\n                header = _context2.sent;\n                _context2.next = 5;\n                return this._readChromTree(header, opts);\n              case 5:\n                chroms = _context2.sent;\n                return _context2.abrupt(\"return\", _objectSpread$1(_objectSpread$1({}, header), chroms));\n              case 7:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n      function _getHeader(_x3) {\n        return _getHeader2.apply(this, arguments);\n      }\n      return _getHeader;\n    }()\n  }, {\n    key: \"_getMainHeader\",\n    value: function() {\n      var _getMainHeader2 = (0, _asyncToGenerator2$2.default)(/* @__PURE__ */ _regenerator$2.default.mark(function _callee3(opts) {\n        var requestSize, _yield$this$bbi$read, buffer2, isBigEndian, ret, header, tail, _args3 = arguments;\n        return _regenerator$2.default.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                requestSize = _args3.length > 1 && _args3[1] !== void 0 ? _args3[1] : 2e3;\n                _context3.next = 3;\n                return this.bbi.read(Buffer.alloc(requestSize), 0, requestSize, 0, opts);\n              case 3:\n                _yield$this$bbi$read = _context3.sent;\n                buffer2 = _yield$this$bbi$read.buffer;\n                isBigEndian = this._isBigEndian(buffer2);\n                ret = getParsers(isBigEndian);\n                header = ret.headerParser.parse(buffer2).result;\n                header.fileType = header.magic === BIG_BED_MAGIC ? \"bigbed\" : \"bigwig\";\n                if (!(header.asOffset > requestSize || header.totalSummaryOffset > requestSize)) {\n                  _context3.next = 11;\n                  break;\n                }\n                return _context3.abrupt(\"return\", this._getMainHeader(opts, requestSize * 2));\n              case 11:\n                if (header.asOffset) {\n                  header.autoSql = buffer2.slice(header.asOffset, buffer2.indexOf(0, header.asOffset)).toString(\"utf8\");\n                }\n                if (!(header.totalSummaryOffset > requestSize)) {\n                  _context3.next = 14;\n                  break;\n                }\n                return _context3.abrupt(\"return\", this._getMainHeader(opts, requestSize * 2));\n              case 14:\n                if (header.totalSummaryOffset) {\n                  tail = buffer2.slice(header.totalSummaryOffset);\n                  header.totalSummary = ret.totalSummaryParser.parse(tail).result;\n                }\n                return _context3.abrupt(\"return\", _objectSpread$1(_objectSpread$1({}, header), {}, {\n                  isBigEndian\n                }));\n              case 16:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n      function _getMainHeader(_x4) {\n        return _getMainHeader2.apply(this, arguments);\n      }\n      return _getMainHeader;\n    }()\n  }, {\n    key: \"_isBigEndian\",\n    value: function _isBigEndian(buffer2) {\n      var ret = buffer2.readInt32LE(0);\n      if (ret === BIG_WIG_MAGIC || ret === BIG_BED_MAGIC) {\n        return false;\n      }\n      ret = buffer2.readInt32BE(0);\n      if (ret === BIG_WIG_MAGIC || ret === BIG_BED_MAGIC) {\n        return true;\n      }\n      throw new Error(\"not a BigWig/BigBed file\");\n    }\n  }, {\n    key: \"_readChromTree\",\n    value: function() {\n      var _readChromTree2 = (0, _asyncToGenerator2$2.default)(/* @__PURE__ */ _regenerator$2.default.mark(function _callee5(header, opts) {\n        var _this2 = this;\n        var isBE, le, refsByNumber, refsByName, chromTreeOffset, unzoomedDataOffset, _yield$this$bbi$read2, data2, p, keySize, leafNodeParser, nonleafNodeParser, rootNodeOffset, bptReadNode;\n        return _regenerator$2.default.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                isBE = header.isBigEndian;\n                le = isBE ? \"big\" : \"little\";\n                refsByNumber = [];\n                refsByName = {};\n                chromTreeOffset = header.chromTreeOffset;\n                unzoomedDataOffset = header.unzoomedDataOffset;\n                while (unzoomedDataOffset % 4 !== 0) {\n                  unzoomedDataOffset += 1;\n                }\n                _context5.next = 9;\n                return this.bbi.read(Buffer.alloc(unzoomedDataOffset - chromTreeOffset), 0, unzoomedDataOffset - chromTreeOffset, chromTreeOffset, opts);\n              case 9:\n                _yield$this$bbi$read2 = _context5.sent;\n                data2 = _yield$this$bbi$read2.buffer;\n                p = getParsers(isBE);\n                keySize = p.chromTreeParser.parse(data2).result.keySize;\n                leafNodeParser = new _binaryParser$1.Parser().endianess(le).string(\"key\", {\n                  stripNull: true,\n                  length: keySize\n                }).uint32(\"refId\").uint32(\"refSize\");\n                nonleafNodeParser = new _binaryParser$1.Parser().endianess(le).skip(keySize).uint64(\"childOffset\");\n                rootNodeOffset = 32;\n                bptReadNode = /* @__PURE__ */ function() {\n                  var _ref = (0, _asyncToGenerator2$2.default)(/* @__PURE__ */ _regenerator$2.default.mark(function _callee4(currentOffset) {\n                    var offset, ret, _ret$result, isLeafNode, cnt, n, leafRet, _leafRet$result, _key, refId, refSize, refRec, nextNodes, _n, nonleafRet, childOffset;\n                    return _regenerator$2.default.wrap(function _callee4$(_context4) {\n                      while (1) {\n                        switch (_context4.prev = _context4.next) {\n                          case 0:\n                            offset = currentOffset;\n                            if (!(offset >= data2.length)) {\n                              _context4.next = 3;\n                              break;\n                            }\n                            throw new Error(\"reading beyond end of buffer\");\n                          case 3:\n                            ret = p.isLeafNode.parse(data2.slice(offset));\n                            _ret$result = ret.result, isLeafNode = _ret$result.isLeafNode, cnt = _ret$result.cnt;\n                            offset += ret.offset;\n                            if (!isLeafNode) {\n                              _context4.next = 10;\n                              break;\n                            }\n                            for (n = 0; n < cnt; n += 1) {\n                              leafRet = leafNodeParser.parse(data2.slice(offset));\n                              offset += leafRet.offset;\n                              _leafRet$result = leafRet.result, _key = _leafRet$result.key, refId = _leafRet$result.refId, refSize = _leafRet$result.refSize;\n                              refRec = {\n                                name: _key,\n                                id: refId,\n                                length: refSize\n                              };\n                              refsByName[_this2.renameRefSeqs(_key)] = refId;\n                              refsByNumber[refId] = refRec;\n                            }\n                            _context4.next = 14;\n                            break;\n                          case 10:\n                            nextNodes = [];\n                            for (_n = 0; _n < cnt; _n += 1) {\n                              nonleafRet = nonleafNodeParser.parse(data2.slice(offset));\n                              childOffset = nonleafRet.result.childOffset;\n                              offset += nonleafRet.offset;\n                              childOffset -= chromTreeOffset;\n                              nextNodes.push(bptReadNode(childOffset));\n                            }\n                            _context4.next = 14;\n                            return Promise.all(nextNodes);\n                          case 14:\n                          case \"end\":\n                            return _context4.stop();\n                        }\n                      }\n                    }, _callee4);\n                  }));\n                  return function bptReadNode2(_x7) {\n                    return _ref.apply(this, arguments);\n                  };\n                }();\n                _context5.next = 19;\n                return bptReadNode(rootNodeOffset);\n              case 19:\n                return _context5.abrupt(\"return\", {\n                  refsByName,\n                  refsByNumber\n                });\n              case 20:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n      function _readChromTree(_x5, _x6) {\n        return _readChromTree2.apply(this, arguments);\n      }\n      return _readChromTree;\n    }()\n  }, {\n    key: \"getUnzoomedView\",\n    value: function() {\n      var _getUnzoomedView = (0, _asyncToGenerator2$2.default)(/* @__PURE__ */ _regenerator$2.default.mark(function _callee6(opts) {\n        var _yield$this$getHeader, unzoomedIndexOffset, zoomLevels, refsByName, uncompressBufSize, isBigEndian, fileType, nzl, cirLen;\n        return _regenerator$2.default.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.next = 2;\n                return this.getHeader(opts);\n              case 2:\n                _yield$this$getHeader = _context6.sent;\n                unzoomedIndexOffset = _yield$this$getHeader.unzoomedIndexOffset;\n                zoomLevels = _yield$this$getHeader.zoomLevels;\n                refsByName = _yield$this$getHeader.refsByName;\n                uncompressBufSize = _yield$this$getHeader.uncompressBufSize;\n                isBigEndian = _yield$this$getHeader.isBigEndian;\n                fileType = _yield$this$getHeader.fileType;\n                nzl = zoomLevels[0];\n                cirLen = nzl ? nzl.dataOffset - unzoomedIndexOffset : 4e3;\n                return _context6.abrupt(\"return\", new _blockView$1.BlockView(this.bbi, refsByName, unzoomedIndexOffset, cirLen, isBigEndian, uncompressBufSize > 0, fileType));\n              case 12:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n      function getUnzoomedView(_x8) {\n        return _getUnzoomedView.apply(this, arguments);\n      }\n      return getUnzoomedView;\n    }()\n  }, {\n    key: \"getFeatureStream\",\n    value: function() {\n      var _getFeatureStream = (0, _asyncToGenerator2$2.default)(/* @__PURE__ */ _regenerator$2.default.mark(function _callee7(refName, start, end) {\n        var opts, chrName, view, _args7 = arguments;\n        return _regenerator$2.default.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                opts = _args7.length > 3 && _args7[3] !== void 0 ? _args7[3] : {\n                  scale: 1\n                };\n                _context7.next = 3;\n                return this.getHeader(opts);\n              case 3:\n                chrName = this.renameRefSeqs(refName);\n                if (!opts.basesPerSpan) {\n                  _context7.next = 10;\n                  break;\n                }\n                _context7.next = 7;\n                return this.getView(1 / opts.basesPerSpan, opts);\n              case 7:\n                view = _context7.sent;\n                _context7.next = 19;\n                break;\n              case 10:\n                if (!opts.scale) {\n                  _context7.next = 16;\n                  break;\n                }\n                _context7.next = 13;\n                return this.getView(opts.scale, opts);\n              case 13:\n                view = _context7.sent;\n                _context7.next = 19;\n                break;\n              case 16:\n                _context7.next = 18;\n                return this.getView(1, opts);\n              case 18:\n                view = _context7.sent;\n              case 19:\n                if (view) {\n                  _context7.next = 21;\n                  break;\n                }\n                throw new Error(\"unable to get block view for data\");\n              case 21:\n                return _context7.abrupt(\"return\", new _rxjs$1.Observable(function(observer) {\n                  view.readWigData(chrName, start, end, observer, opts);\n                }));\n              case 22:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n      function getFeatureStream(_x9, _x10, _x11) {\n        return _getFeatureStream.apply(this, arguments);\n      }\n      return getFeatureStream;\n    }()\n  }, {\n    key: \"getFeatures\",\n    value: function() {\n      var _getFeatures = (0, _asyncToGenerator2$2.default)(/* @__PURE__ */ _regenerator$2.default.mark(function _callee8(refName, start, end) {\n        var opts, ob, ret, _args8 = arguments;\n        return _regenerator$2.default.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                opts = _args8.length > 3 && _args8[3] !== void 0 ? _args8[3] : {\n                  scale: 1\n                };\n                _context8.next = 3;\n                return this.getFeatureStream(refName, start, end, opts);\n              case 3:\n                ob = _context8.sent;\n                _context8.next = 6;\n                return ob.pipe((0, _operators$1.reduce)(function(acc, curr) {\n                  return acc.concat(curr);\n                })).toPromise();\n              case 6:\n                ret = _context8.sent;\n                return _context8.abrupt(\"return\", ret || []);\n              case 8:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n      function getFeatures(_x12, _x13, _x14) {\n        return _getFeatures.apply(this, arguments);\n      }\n      return getFeatures;\n    }()\n  }]);\n  return BBI2;\n}();\nbbi.BBI = BBI;\nvar _interopRequireDefault$1 = interopRequireDefault.exports;\nObject.defineProperty(bigwig, \"__esModule\", {\n  value: true\n});\nbigwig.BigWig = void 0;\nvar _regenerator$1 = _interopRequireDefault$1(regenerator);\nvar _asyncToGenerator2$1 = _interopRequireDefault$1(asyncToGenerator.exports);\nvar _classCallCheck2$1 = _interopRequireDefault$1(classCallCheck.exports);\nvar _createClass2$1 = _interopRequireDefault$1(createClass.exports);\nvar _inherits2$1 = _interopRequireDefault$1(inherits.exports);\nvar _possibleConstructorReturn2$1 = _interopRequireDefault$1(possibleConstructorReturn.exports);\nvar _getPrototypeOf2$1 = _interopRequireDefault$1(getPrototypeOf.exports);\nvar _blockView = blockView;\nvar _bbi$1 = bbi;\nfunction _createSuper$1(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct$1();\n  return function _createSuperInternal() {\n    var Super = (0, _getPrototypeOf2$1.default)(Derived), result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = (0, _getPrototypeOf2$1.default)(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return (0, _possibleConstructorReturn2$1.default)(this, result);\n  };\n}\nfunction _isNativeReflectConstruct$1() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct)\n    return false;\n  if (Reflect.construct.sham)\n    return false;\n  if (typeof Proxy === \"function\")\n    return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function() {\n    }));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar BigWig = /* @__PURE__ */ function(_BBI) {\n  (0, _inherits2$1.default)(BigWig2, _BBI);\n  var _super = _createSuper$1(BigWig2);\n  function BigWig2() {\n    (0, _classCallCheck2$1.default)(this, BigWig2);\n    return _super.apply(this, arguments);\n  }\n  (0, _createClass2$1.default)(BigWig2, [{\n    key: \"getView\",\n    value: function() {\n      var _getView = (0, _asyncToGenerator2$1.default)(/* @__PURE__ */ _regenerator$1.default.mark(function _callee(scale, opts) {\n        var _yield$this$getHeader, zoomLevels, refsByName, fileSize, isBigEndian, uncompressBufSize, basesPerPx, maxLevel, i, zh, indexLength;\n        return _regenerator$1.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.getHeader(opts);\n              case 2:\n                _yield$this$getHeader = _context.sent;\n                zoomLevels = _yield$this$getHeader.zoomLevels;\n                refsByName = _yield$this$getHeader.refsByName;\n                fileSize = _yield$this$getHeader.fileSize;\n                isBigEndian = _yield$this$getHeader.isBigEndian;\n                uncompressBufSize = _yield$this$getHeader.uncompressBufSize;\n                basesPerPx = 1 / scale;\n                maxLevel = zoomLevels.length;\n                if (!fileSize) {\n                  maxLevel -= 1;\n                }\n                i = maxLevel;\n              case 12:\n                if (!(i >= 0)) {\n                  _context.next = 20;\n                  break;\n                }\n                zh = zoomLevels[i];\n                if (!(zh && zh.reductionLevel <= 2 * basesPerPx)) {\n                  _context.next = 17;\n                  break;\n                }\n                indexLength = i < zoomLevels.length - 1 ? zoomLevels[i + 1].dataOffset - zh.indexOffset : fileSize - 4 - zh.indexOffset;\n                return _context.abrupt(\"return\", new _blockView.BlockView(this.bbi, refsByName, zh.indexOffset, indexLength, isBigEndian, uncompressBufSize > 0, \"summary\"));\n              case 17:\n                i -= 1;\n                _context.next = 12;\n                break;\n              case 20:\n                return _context.abrupt(\"return\", this.getUnzoomedView(opts));\n              case 21:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n      function getView(_x, _x2) {\n        return _getView.apply(this, arguments);\n      }\n      return getView;\n    }()\n  }]);\n  return BigWig2;\n}(_bbi$1.BBI);\nbigwig.BigWig = BigWig;\nvar bigbed = {};\nvar toConsumableArray = { exports: {} };\nvar arrayWithoutHoles = { exports: {} };\nvar arrayLikeToArray = { exports: {} };\n(function(module) {\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length)\n      len = arr.length;\n    for (var i = 0, arr2 = new Array(len); i < len; i++) {\n      arr2[i] = arr[i];\n    }\n    return arr2;\n  }\n  module.exports = _arrayLikeToArray;\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n})(arrayLikeToArray);\n(function(module) {\n  var arrayLikeToArray$1 = arrayLikeToArray.exports;\n  function _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr))\n      return arrayLikeToArray$1(arr);\n  }\n  module.exports = _arrayWithoutHoles;\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n})(arrayWithoutHoles);\nvar iterableToArray = { exports: {} };\n(function(module) {\n  function _iterableToArray(iter) {\n    if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null)\n      return Array.from(iter);\n  }\n  module.exports = _iterableToArray;\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n})(iterableToArray);\nvar unsupportedIterableToArray = { exports: {} };\n(function(module) {\n  var arrayLikeToArray$1 = arrayLikeToArray.exports;\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o)\n      return;\n    if (typeof o === \"string\")\n      return arrayLikeToArray$1(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor)\n      n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\")\n      return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))\n      return arrayLikeToArray$1(o, minLen);\n  }\n  module.exports = _unsupportedIterableToArray;\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n})(unsupportedIterableToArray);\nvar nonIterableSpread = { exports: {} };\n(function(module) {\n  function _nonIterableSpread() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  module.exports = _nonIterableSpread;\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n})(nonIterableSpread);\n(function(module) {\n  var arrayWithoutHoles$1 = arrayWithoutHoles.exports;\n  var iterableToArray$1 = iterableToArray.exports;\n  var unsupportedIterableToArray$1 = unsupportedIterableToArray.exports;\n  var nonIterableSpread$1 = nonIterableSpread.exports;\n  function _toConsumableArray(arr) {\n    return arrayWithoutHoles$1(arr) || iterableToArray$1(arr) || unsupportedIterableToArray$1(arr) || nonIterableSpread$1();\n  }\n  module.exports = _toConsumableArray;\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n})(toConsumableArray);\nvar _interopRequireDefault = interopRequireDefault.exports;\nObject.defineProperty(bigbed, \"__esModule\", {\n  value: true\n});\nbigbed.filterUndef = filterUndef;\nbigbed.BigBed = void 0;\nvar _toConsumableArray2 = _interopRequireDefault(toConsumableArray.exports);\nvar _regenerator = _interopRequireDefault(regenerator);\nvar _asyncToGenerator2 = _interopRequireDefault(asyncToGenerator.exports);\nvar _classCallCheck2 = _interopRequireDefault(classCallCheck.exports);\nvar _createClass2 = _interopRequireDefault(createClass.exports);\nvar _assertThisInitialized2 = _interopRequireDefault(assertThisInitialized.exports);\nvar _inherits2 = _interopRequireDefault(inherits.exports);\nvar _possibleConstructorReturn2 = _interopRequireDefault(possibleConstructorReturn.exports);\nvar _getPrototypeOf2 = _interopRequireDefault(getPrototypeOf.exports);\nvar _defineProperty2 = _interopRequireDefault(defineProperty.exports);\nvar _binaryParser = binary_parser;\nvar _rxjs = require$$12$1;\nvar _operators = require$$13$1;\nvar _abortablePromiseCache = _interopRequireDefault(dist);\nvar _quickLru = _interopRequireDefault(require$$9);\nvar _bbi = bbi;\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly)\n      symbols = symbols.filter(function(sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function(key) {\n        (0, _defineProperty2.default)(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function(key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = (0, _getPrototypeOf2.default)(Derived), result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = (0, _getPrototypeOf2.default)(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return (0, _possibleConstructorReturn2.default)(this, result);\n  };\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct)\n    return false;\n  if (Reflect.construct.sham)\n    return false;\n  if (typeof Proxy === \"function\")\n    return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function() {\n    }));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nfunction filterUndef(ts) {\n  return ts.filter(function(t) {\n    return !!t;\n  });\n}\nvar BigBed = /* @__PURE__ */ function(_BBI) {\n  (0, _inherits2.default)(BigBed2, _BBI);\n  var _super = _createSuper(BigBed2);\n  function BigBed2(opts) {\n    var _this;\n    (0, _classCallCheck2.default)(this, BigBed2);\n    _this = _super.call(this, opts);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"readIndicesCache\", new _abortablePromiseCache.default({\n      cache: new _quickLru.default({\n        maxSize: 1\n      }),\n      fill: function() {\n        var _fill = (0, _asyncToGenerator2.default)(/* @__PURE__ */ _regenerator.default.mark(function _callee(args, signal) {\n          return _regenerator.default.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  return _context.abrupt(\"return\", _this._readIndices(_objectSpread(_objectSpread({}, args), {}, {\n                    signal\n                  })));\n                case 1:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n        function fill(_x, _x2) {\n          return _fill.apply(this, arguments);\n        }\n        return fill;\n      }()\n    }));\n    return _this;\n  }\n  (0, _createClass2.default)(BigBed2, [{\n    key: \"readIndices\",\n    value: function readIndices() {\n      var opts = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};\n      var options = \"aborted\" in opts ? {\n        signal: opts\n      } : opts;\n      return this.readIndicesCache.get(JSON.stringify(options), options, options.signal);\n    }\n  }, {\n    key: \"getView\",\n    value: function() {\n      var _getView = (0, _asyncToGenerator2.default)(/* @__PURE__ */ _regenerator.default.mark(function _callee2(scale, opts) {\n        return _regenerator.default.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                return _context2.abrupt(\"return\", this.getUnzoomedView(opts));\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n      function getView(_x3, _x4) {\n        return _getView.apply(this, arguments);\n      }\n      return getView;\n    }()\n  }, {\n    key: \"_readIndices\",\n    value: function() {\n      var _readIndices2 = (0, _asyncToGenerator2.default)(/* @__PURE__ */ _regenerator.default.mark(function _callee3(opts) {\n        var _yield$this$getHeader, extHeaderOffset, isBigEndian, _yield$this$bbi$read, data2, le, ret, count2, offset, blocklen, len, _yield$this$bbi$read2, buffer2, extParser, indices, i;\n        return _regenerator.default.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.getHeader(opts);\n              case 2:\n                _yield$this$getHeader = _context3.sent;\n                extHeaderOffset = _yield$this$getHeader.extHeaderOffset;\n                isBigEndian = _yield$this$getHeader.isBigEndian;\n                _context3.next = 7;\n                return this.bbi.read(Buffer.alloc(64), 0, 64, extHeaderOffset);\n              case 7:\n                _yield$this$bbi$read = _context3.sent;\n                data2 = _yield$this$bbi$read.buffer;\n                le = isBigEndian ? \"big\" : \"little\";\n                ret = new _binaryParser.Parser().endianess(le).uint16(\"size\").uint16(\"count\").uint64(\"offset\").parse(data2).result;\n                count2 = ret.count, offset = ret.offset;\n                if (!(count2 === 0)) {\n                  _context3.next = 14;\n                  break;\n                }\n                return _context3.abrupt(\"return\", []);\n              case 14:\n                blocklen = 20;\n                len = blocklen * count2;\n                _context3.next = 18;\n                return this.bbi.read(Buffer.alloc(len), 0, len, offset);\n              case 18:\n                _yield$this$bbi$read2 = _context3.sent;\n                buffer2 = _yield$this$bbi$read2.buffer;\n                extParser = new _binaryParser.Parser().endianess(le).int16(\"type\").int16(\"fieldcount\").uint64(\"offset\").skip(4).int16(\"field\");\n                indices = [];\n                for (i = 0; i < count2; i += 1) {\n                  indices.push(extParser.parse(buffer2.slice(i * blocklen)).result);\n                }\n                return _context3.abrupt(\"return\", indices);\n              case 24:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n      function _readIndices(_x5) {\n        return _readIndices2.apply(this, arguments);\n      }\n      return _readIndices;\n    }()\n  }, {\n    key: \"searchExtraIndexBlocks\",\n    value: function() {\n      var _searchExtraIndexBlocks = (0, _asyncToGenerator2.default)(/* @__PURE__ */ _regenerator.default.mark(function _callee6(name2) {\n        var _this2 = this;\n        var opts, _yield$this$getHeader2, isBigEndian, indices, locs, _args6 = arguments;\n        return _regenerator.default.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                opts = _args6.length > 1 && _args6[1] !== void 0 ? _args6[1] : {};\n                _context6.next = 3;\n                return this.getHeader(opts);\n              case 3:\n                _yield$this$getHeader2 = _context6.sent;\n                isBigEndian = _yield$this$getHeader2.isBigEndian;\n                _context6.next = 7;\n                return this.readIndices(opts);\n              case 7:\n                indices = _context6.sent;\n                if (indices.length) {\n                  _context6.next = 10;\n                  break;\n                }\n                return _context6.abrupt(\"return\", []);\n              case 10:\n                locs = indices.map(/* @__PURE__ */ function() {\n                  var _ref = (0, _asyncToGenerator2.default)(/* @__PURE__ */ _regenerator.default.mark(function _callee5(index) {\n                    var offset, field, _yield$_this2$bbi$rea, data2, p, _p$parse$result, blockSize, keySize, valSize, bpt, bptReadNode, rootNodeOffset;\n                    return _regenerator.default.wrap(function _callee5$(_context5) {\n                      while (1) {\n                        switch (_context5.prev = _context5.next) {\n                          case 0:\n                            offset = index.offset, field = index.field;\n                            _context5.next = 3;\n                            return _this2.bbi.read(Buffer.alloc(32), 0, 32, offset, opts);\n                          case 3:\n                            _yield$_this2$bbi$rea = _context5.sent;\n                            data2 = _yield$_this2$bbi$rea.buffer;\n                            p = new _binaryParser.Parser().endianess(isBigEndian ? \"big\" : \"little\").int32(\"magic\").int32(\"blockSize\").int32(\"keySize\").int32(\"valSize\").uint64(\"itemCount\");\n                            _p$parse$result = p.parse(data2).result, blockSize = _p$parse$result.blockSize, keySize = _p$parse$result.keySize, valSize = _p$parse$result.valSize;\n                            bpt = new _binaryParser.Parser().endianess(isBigEndian ? \"big\" : \"little\").int8(\"nodeType\").skip(1).int16(\"cnt\").choice({\n                              tag: \"nodeType\",\n                              choices: {\n                                0: new _binaryParser.Parser().array(\"leafkeys\", {\n                                  length: \"cnt\",\n                                  type: new _binaryParser.Parser().string(\"key\", {\n                                    length: keySize,\n                                    stripNull: true\n                                  }).uint64(\"offset\")\n                                }),\n                                1: new _binaryParser.Parser().array(\"keys\", {\n                                  length: \"cnt\",\n                                  type: new _binaryParser.Parser().string(\"key\", {\n                                    length: keySize,\n                                    stripNull: true\n                                  }).uint64(\"offset\").uint32(\"length\").uint32(\"reserved\")\n                                })\n                              }\n                            });\n                            bptReadNode = /* @__PURE__ */ function() {\n                              var _ref2 = (0, _asyncToGenerator2.default)(/* @__PURE__ */ _regenerator.default.mark(function _callee4(nodeOffset) {\n                                var len, _yield$_this2$bbi$rea2, buffer2, node, lastOffset, i, key, _i;\n                                return _regenerator.default.wrap(function _callee4$(_context4) {\n                                  while (1) {\n                                    switch (_context4.prev = _context4.next) {\n                                      case 0:\n                                        len = 4 + blockSize * (keySize + valSize);\n                                        _context4.next = 3;\n                                        return _this2.bbi.read(Buffer.alloc(len), 0, len, nodeOffset, opts);\n                                      case 3:\n                                        _yield$_this2$bbi$rea2 = _context4.sent;\n                                        buffer2 = _yield$_this2$bbi$rea2.buffer;\n                                        node = bpt.parse(buffer2).result;\n                                        if (!node.leafkeys) {\n                                          _context4.next = 17;\n                                          break;\n                                        }\n                                        i = 0;\n                                      case 8:\n                                        if (!(i < node.leafkeys.length)) {\n                                          _context4.next = 16;\n                                          break;\n                                        }\n                                        key = node.leafkeys[i].key;\n                                        if (!(name2.localeCompare(key) < 0 && lastOffset)) {\n                                          _context4.next = 12;\n                                          break;\n                                        }\n                                        return _context4.abrupt(\"return\", bptReadNode(lastOffset));\n                                      case 12:\n                                        lastOffset = node.leafkeys[i].offset;\n                                      case 13:\n                                        i += 1;\n                                        _context4.next = 8;\n                                        break;\n                                      case 16:\n                                        return _context4.abrupt(\"return\", bptReadNode(lastOffset));\n                                      case 17:\n                                        _i = 0;\n                                      case 18:\n                                        if (!(_i < node.keys.length)) {\n                                          _context4.next = 24;\n                                          break;\n                                        }\n                                        if (!(node.keys[_i].key === name2)) {\n                                          _context4.next = 21;\n                                          break;\n                                        }\n                                        return _context4.abrupt(\"return\", _objectSpread(_objectSpread({}, node.keys[_i]), {}, {\n                                          field\n                                        }));\n                                      case 21:\n                                        _i += 1;\n                                        _context4.next = 18;\n                                        break;\n                                      case 24:\n                                        return _context4.abrupt(\"return\", void 0);\n                                      case 25:\n                                      case \"end\":\n                                        return _context4.stop();\n                                    }\n                                  }\n                                }, _callee4);\n                              }));\n                              return function bptReadNode2(_x8) {\n                                return _ref2.apply(this, arguments);\n                              };\n                            }();\n                            rootNodeOffset = 32;\n                            return _context5.abrupt(\"return\", bptReadNode(offset + rootNodeOffset));\n                          case 11:\n                          case \"end\":\n                            return _context5.stop();\n                        }\n                      }\n                    }, _callee5);\n                  }));\n                  return function(_x7) {\n                    return _ref.apply(this, arguments);\n                  };\n                }());\n                _context6.t0 = filterUndef;\n                _context6.next = 14;\n                return Promise.all(locs);\n              case 14:\n                _context6.t1 = _context6.sent;\n                return _context6.abrupt(\"return\", (0, _context6.t0)(_context6.t1));\n              case 16:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n      function searchExtraIndexBlocks(_x6) {\n        return _searchExtraIndexBlocks.apply(this, arguments);\n      }\n      return searchExtraIndexBlocks;\n    }()\n  }, {\n    key: \"searchExtraIndex\",\n    value: function() {\n      var _searchExtraIndex = (0, _asyncToGenerator2.default)(/* @__PURE__ */ _regenerator.default.mark(function _callee7(name2) {\n        var opts, blocks, view, res, ret, _args7 = arguments;\n        return _regenerator.default.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                opts = _args7.length > 1 && _args7[1] !== void 0 ? _args7[1] : {};\n                _context7.next = 3;\n                return this.searchExtraIndexBlocks(name2, opts);\n              case 3:\n                blocks = _context7.sent;\n                if (blocks.length) {\n                  _context7.next = 6;\n                  break;\n                }\n                return _context7.abrupt(\"return\", []);\n              case 6:\n                _context7.next = 8;\n                return this.getUnzoomedView(opts);\n              case 8:\n                view = _context7.sent;\n                res = blocks.map(function(block) {\n                  return new _rxjs.Observable(function(observer) {\n                    view.readFeatures(observer, [block], opts);\n                  }).pipe((0, _operators.reduce)(function(acc, curr) {\n                    return acc.concat(curr);\n                  }), (0, _operators.map)(function(x) {\n                    for (var i = 0; i < x.length; i += 1) {\n                      x[i].field = block.field;\n                    }\n                    return x;\n                  }));\n                });\n                _context7.next = 12;\n                return _rxjs.merge.apply(void 0, (0, _toConsumableArray2.default)(res)).toPromise();\n              case 12:\n                ret = _context7.sent;\n                return _context7.abrupt(\"return\", ret.filter(function(f2) {\n                  return f2.rest.split(\"\t\")[f2.field - 3] === name2;\n                }));\n              case 14:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n      function searchExtraIndex(_x9) {\n        return _searchExtraIndex.apply(this, arguments);\n      }\n      return searchExtraIndex;\n    }()\n  }]);\n  return BigBed2;\n}(_bbi.BBI);\nbigbed.BigBed = BigBed;\n(function(exports) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  Object.defineProperty(exports, \"BigWig\", {\n    enumerable: true,\n    get: function get() {\n      return _bigwig.BigWig;\n    }\n  });\n  Object.defineProperty(exports, \"BigBed\", {\n    enumerable: true,\n    get: function get() {\n      return _bigbed.BigBed;\n    }\n  });\n  Object.defineProperty(exports, \"Feature\", {\n    enumerable: true,\n    get: function get() {\n      return _bbi2.Feature;\n    }\n  });\n  Object.defineProperty(exports, \"Header\", {\n    enumerable: true,\n    get: function get() {\n      return _bbi2.Header;\n    }\n  });\n  Object.defineProperty(exports, \"RequestOptions\", {\n    enumerable: true,\n    get: function get() {\n      return _bbi2.RequestOptions;\n    }\n  });\n  var _bigwig = bigwig;\n  var _bigbed = bigbed;\n  var _bbi2 = bbi;\n})(dist$1);\nbisector((d) => d.pos).left;\nclass RemoteFile extends RemoteFile$1 {\n  constructor() {\n    super(...arguments);\n    this.read = async (buffer2, offset = 0, length, position = 0, opts = {}) => {\n      const { headers = {}, signal, overrides = {} } = opts;\n      if (length < Infinity) {\n        headers.range = `bytes=${position}-${position + length}`;\n      } else if (length === Infinity && position !== 0) {\n        headers.range = `bytes=${position}-`;\n      }\n      const args = {\n        ...this.baseOverrides,\n        ...overrides,\n        headers: {\n          ...headers,\n          ...overrides.headers,\n          ...this.baseOverrides.headers\n        },\n        method: \"GET\",\n        redirect: \"follow\",\n        mode: \"cors\",\n        signal\n      };\n      const response = await this.fetch(this.url, args);\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status} ${response.statusText} ${this.url}`);\n      }\n      if (response.status === 200 || response.status === 206) {\n        const responseData = await this.getBufferFromResponse(response);\n        const bytesCopied = responseData.copy(buffer2, offset, 0, Math.min(length, responseData.length));\n        const res = response.headers.get(\"content-range\");\n        const sizeMatch = /\\/(\\d+)$/.exec(res || \"\");\n        if (sizeMatch && sizeMatch[1]) {\n          this._stat = { size: parseInt(sizeMatch[1], 10) };\n        }\n        return { bytesRead: bytesCopied, buffer: buffer2 };\n      }\n      throw new Error(`HTTP ${response.status} fetching ${this.url}`);\n    };\n  }\n}\nfunction BBIDataFetcher(HGC, dataConfig) {\n  if (!new.target) {\n    throw new Error('Uncaught TypeError: Class constructor cannot be invoked without \"new\"');\n  }\n  const cls = class BBIDataFetcherClass {\n    constructor() {\n      dataConfig.chromSizesUrl = \"https://aveit.s3.amazonaws.com/higlass/data/sequence/hg38.chrom.sizes\";\n      this.dataConfig = dataConfig;\n      this.bwFileHeader = null;\n      this.bwFile = null;\n      this.TILE_SIZE = 1024;\n      this.errorTxt = \"\";\n      this.dataPromises = [];\n      const chromosomeSizes = GET_CHROM_SIZES(this.assembly).size;\n      const chromosomeCumPositions = [];\n      const chromosomePositions = {};\n      let prevEndPosition = 0;\n      Object.keys(GET_CHROM_SIZES(this.assembly).size).forEach((chrStr, i) => {\n        const positionInfo = {\n          id: i,\n          chr: chrStr,\n          pos: prevEndPosition\n        };\n        chromosomeCumPositions.push(positionInfo);\n        chromosomePositions[chrStr] = positionInfo;\n        prevEndPosition += GET_CHROM_SIZES(this.assembly).size[chrStr];\n      });\n      this.chromSizes = {\n        chrToAbs: (chrom, chromPos) => this.chromSizes.chrPositions[chrom].pos + chromPos,\n        cumPositions: chromosomeCumPositions,\n        chrPositions: chromosomePositions,\n        totalLength: prevEndPosition,\n        chromLengths: chromosomeSizes\n      };\n      this.dataPromises.push(this.loadBBI(dataConfig));\n    }\n    loadBBI(dataConfig2) {\n      if (dataConfig2.url) {\n        this.bwFile = new dist$1.BigWig({\n          filehandle: new RemoteFile(dataConfig2.url)\n        });\n        return this.bwFile.getHeader().then((h) => {\n          this.bwFileHeader = h;\n        });\n      } else {\n        console.error('Please enter a \"url\" field to the data config');\n        return null;\n      }\n    }\n    tilesetInfo(callback) {\n      this.tilesetInfoLoading = true;\n      return Promise.all(this.dataPromises).then(() => {\n        this.tilesetInfoLoading = false;\n        const totalLength = this.chromSizes.totalLength;\n        const retVal = {\n          tile_size: this.TILE_SIZE,\n          max_zoom: Math.ceil(Math.log(totalLength / this.TILE_SIZE) / Math.log(2)),\n          max_width: 2 ** Math.ceil(Math.log(totalLength) / Math.log(2)),\n          min_pos: [0],\n          max_pos: [totalLength]\n        };\n        if (callback) {\n          callback(retVal);\n        }\n        return retVal;\n      }).catch((err) => {\n        this.tilesetInfoLoading = false;\n        console.error(err);\n        if (callback) {\n          callback({\n            error: `Error parsing bigwig: ${err}`\n          });\n        }\n        return null;\n      });\n    }\n    fetchTilesDebounced(receivedTiles, tileIds) {\n      const tiles = {};\n      const validTileIds = [];\n      const tilePromises = [];\n      for (const tileId of tileIds) {\n        const parts = tileId.split(\".\");\n        const z = parseInt(parts[0], 10);\n        const x = parseInt(parts[1], 10);\n        if (Number.isNaN(x) || Number.isNaN(z)) {\n          console.warn(\"Invalid tile zoom or position:\", z, x);\n          continue;\n        }\n        validTileIds.push(tileId);\n        tilePromises.push(this.tile(z, x));\n      }\n      Promise.all(tilePromises).then((values) => {\n        for (let i = 0; i < values.length; i++) {\n          const validTileId = validTileIds[i];\n          tiles[validTileId] = values[i];\n          tiles[validTileId].tilePositionId = validTileId;\n        }\n        receivedTiles(tiles);\n      });\n      return tiles;\n    }\n    async tile(z, x) {\n      const tsInfo = await this.tilesetInfo();\n      const tileWidth = +tsInfo.max_width / 2 ** +z;\n      const recordPromises = [];\n      const tile = {\n        tilePos: [x],\n        tileId: `bigwig.${z}.${x}`,\n        zoomLevel: z\n      };\n      const minXOriginal = tsInfo.min_pos[0] + x * tileWidth;\n      let minX = minXOriginal;\n      const maxX = tsInfo.min_pos[0] + (x + 1) * tileWidth;\n      const basesPerPixel = this.determineScale(minX, maxX);\n      const basesPerBin = (maxX - minX) / this.TILE_SIZE;\n      const binStarts = [];\n      for (let i = 0; i < this.TILE_SIZE; i++) {\n        binStarts.push(minX + i * basesPerBin);\n      }\n      const { chromLengths, cumPositions } = this.chromSizes;\n      cumPositions.forEach((cumPos) => {\n        const chromName = cumPos.chr;\n        const chromStart = cumPos.pos;\n        const chromEnd = cumPos.pos + chromLengths[chromName];\n        let startPos, endPos;\n        if (chromStart <= minX && minX < chromEnd) {\n          if (maxX > chromEnd) {\n            startPos = minX - chromStart;\n            endPos = chromEnd - chromStart;\n            recordPromises.push(this.bwFile.getFeatures(chromName, startPos, endPos, {\n              scale: 1 / basesPerPixel\n            }).then((values) => {\n              values.forEach((v) => {\n                v[\"startAbs\"] = HGC.utils.chrToAbs(chromName, v.start, this.chromSizes);\n                v[\"endAbs\"] = HGC.utils.chrToAbs(chromName, v.end, this.chromSizes);\n              });\n              return values;\n            }));\n            minX = chromEnd;\n          } else {\n            startPos = Math.floor(minX - chromStart);\n            endPos = Math.ceil(maxX - chromStart);\n            if (!this.bwFile)\n              return;\n            recordPromises.push(this.bwFile.getFeatures(chromName, startPos, endPos, {\n              scale: 1 / basesPerPixel\n            }).then((values) => {\n              values.forEach((v) => {\n                v[\"startAbs\"] = HGC.utils.chrToAbs(chromName, v.start, this.chromSizes);\n                v[\"endAbs\"] = HGC.utils.chrToAbs(chromName, v.end, this.chromSizes);\n              });\n              return values;\n            }));\n            return;\n          }\n        }\n      });\n      return Promise.all(recordPromises).then((v) => {\n        const values = v.flat();\n        const dense = [];\n        for (let i = 0; i < this.TILE_SIZE; i++) {\n          dense.push(null);\n        }\n        binStarts.forEach((curStart, index) => {\n          if (curStart < minXOriginal || curStart > maxX) {\n            return;\n          }\n          const filtered = values.filter((v2) => {\n            return curStart >= v2.startAbs && curStart < v2.endAbs;\n          }).map((v2) => v2.score);\n          dense[index] = filtered.length > 0 ? filtered[0] : null;\n        });\n        const dde = new HGC.utils.DenseDataExtrema1D(dense);\n        tile.min_value = Math.min(...dense);\n        tile.max_value = Math.max(...dense);\n        tile.dense = dense;\n        tile.denseDataExtrema = dde;\n        tile.minNonZero = dde.minNonZeroInTile;\n        tile.maxNonZero = dde.maxNonZeroInTile;\n        return tile;\n      });\n    }\n    determineScale(minX, maxX) {\n      const reductionLevels = [1];\n      const numRequestedElements = maxX - minX;\n      if (!this.bwFileHeader) {\n        throw Error(\"no bigwig header\");\n      }\n      this.bwFileHeader.zoomLevels.forEach((z) => {\n        reductionLevels.push(z.reductionLevel);\n      });\n      let level;\n      reductionLevels.forEach((rl) => {\n        if (level)\n          return;\n        const numElementsFromFile = numRequestedElements / rl;\n        if (numElementsFromFile <= this.TILE_SIZE * 20) {\n          level = rl;\n        }\n      });\n      return level || reductionLevels.slice(-1)[0];\n    }\n  };\n  return new cls();\n}\nBBIDataFetcher.config = {\n  type: \"bigwig\"\n};\nvar uri_all = { exports: {} };\n/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */\n(function(module, exports) {\n  (function(global2, factory2) {\n    factory2(exports);\n  })(commonjsGlobal, function(exports2) {\n    function merge2() {\n      for (var _len = arguments.length, sets = Array(_len), _key = 0; _key < _len; _key++) {\n        sets[_key] = arguments[_key];\n      }\n      if (sets.length > 1) {\n        sets[0] = sets[0].slice(0, -1);\n        var xl = sets.length - 1;\n        for (var x = 1; x < xl; ++x) {\n          sets[x] = sets[x].slice(1, -1);\n        }\n        sets[xl] = sets[xl].slice(1);\n        return sets.join(\"\");\n      } else {\n        return sets[0];\n      }\n    }\n    function subexp(str) {\n      return \"(?:\" + str + \")\";\n    }\n    function typeOf(o) {\n      return o === void 0 ? \"undefined\" : o === null ? \"null\" : Object.prototype.toString.call(o).split(\" \").pop().split(\"]\").shift().toLowerCase();\n    }\n    function toUpperCase(str) {\n      return str.toUpperCase();\n    }\n    function toArray2(obj) {\n      return obj !== void 0 && obj !== null ? obj instanceof Array ? obj : typeof obj.length !== \"number\" || obj.split || obj.setInterval || obj.call ? [obj] : Array.prototype.slice.call(obj) : [];\n    }\n    function assign(target, source) {\n      var obj = target;\n      if (source) {\n        for (var key in source) {\n          obj[key] = source[key];\n        }\n      }\n      return obj;\n    }\n    function buildExps(isIRI) {\n      var ALPHA$$ = \"[A-Za-z]\", DIGIT$$ = \"[0-9]\", HEXDIG$$2 = merge2(DIGIT$$, \"[A-Fa-f]\"), PCT_ENCODED$2 = subexp(subexp(\"%[EFef]\" + HEXDIG$$2 + \"%\" + HEXDIG$$2 + HEXDIG$$2 + \"%\" + HEXDIG$$2 + HEXDIG$$2) + \"|\" + subexp(\"%[89A-Fa-f]\" + HEXDIG$$2 + \"%\" + HEXDIG$$2 + HEXDIG$$2) + \"|\" + subexp(\"%\" + HEXDIG$$2 + HEXDIG$$2)), GEN_DELIMS$$ = \"[\\\\:\\\\/\\\\?\\\\#\\\\[\\\\]\\\\@]\", SUB_DELIMS$$ = \"[\\\\!\\\\$\\\\&\\\\'\\\\(\\\\)\\\\*\\\\+\\\\,\\\\;\\\\=]\", RESERVED$$ = merge2(GEN_DELIMS$$, SUB_DELIMS$$), UCSCHAR$$ = isIRI ? \"[\\\\xA0-\\\\u200D\\\\u2010-\\\\u2029\\\\u202F-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF]\" : \"[]\", IPRIVATE$$ = isIRI ? \"[\\\\uE000-\\\\uF8FF]\" : \"[]\", UNRESERVED$$2 = merge2(ALPHA$$, DIGIT$$, \"[\\\\-\\\\.\\\\_\\\\~]\", UCSCHAR$$);\n      subexp(ALPHA$$ + merge2(ALPHA$$, DIGIT$$, \"[\\\\+\\\\-\\\\.]\") + \"*\");\n      subexp(subexp(PCT_ENCODED$2 + \"|\" + merge2(UNRESERVED$$2, SUB_DELIMS$$, \"[\\\\:]\")) + \"*\");\n      var DEC_OCTET_RELAXED$ = subexp(subexp(\"25[0-5]\") + \"|\" + subexp(\"2[0-4]\" + DIGIT$$) + \"|\" + subexp(\"1\" + DIGIT$$ + DIGIT$$) + \"|\" + subexp(\"0?[1-9]\" + DIGIT$$) + \"|0?0?\" + DIGIT$$), IPV4ADDRESS$ = subexp(DEC_OCTET_RELAXED$ + \"\\\\.\" + DEC_OCTET_RELAXED$ + \"\\\\.\" + DEC_OCTET_RELAXED$ + \"\\\\.\" + DEC_OCTET_RELAXED$), H16$ = subexp(HEXDIG$$2 + \"{1,4}\"), LS32$ = subexp(subexp(H16$ + \"\\\\:\" + H16$) + \"|\" + IPV4ADDRESS$), IPV6ADDRESS1$ = subexp(subexp(H16$ + \"\\\\:\") + \"{6}\" + LS32$), IPV6ADDRESS2$ = subexp(\"\\\\:\\\\:\" + subexp(H16$ + \"\\\\:\") + \"{5}\" + LS32$), IPV6ADDRESS3$ = subexp(subexp(H16$) + \"?\\\\:\\\\:\" + subexp(H16$ + \"\\\\:\") + \"{4}\" + LS32$), IPV6ADDRESS4$ = subexp(subexp(subexp(H16$ + \"\\\\:\") + \"{0,1}\" + H16$) + \"?\\\\:\\\\:\" + subexp(H16$ + \"\\\\:\") + \"{3}\" + LS32$), IPV6ADDRESS5$ = subexp(subexp(subexp(H16$ + \"\\\\:\") + \"{0,2}\" + H16$) + \"?\\\\:\\\\:\" + subexp(H16$ + \"\\\\:\") + \"{2}\" + LS32$), IPV6ADDRESS6$ = subexp(subexp(subexp(H16$ + \"\\\\:\") + \"{0,3}\" + H16$) + \"?\\\\:\\\\:\" + H16$ + \"\\\\:\" + LS32$), IPV6ADDRESS7$ = subexp(subexp(subexp(H16$ + \"\\\\:\") + \"{0,4}\" + H16$) + \"?\\\\:\\\\:\" + LS32$), IPV6ADDRESS8$ = subexp(subexp(subexp(H16$ + \"\\\\:\") + \"{0,5}\" + H16$) + \"?\\\\:\\\\:\" + H16$), IPV6ADDRESS9$ = subexp(subexp(subexp(H16$ + \"\\\\:\") + \"{0,6}\" + H16$) + \"?\\\\:\\\\:\"), IPV6ADDRESS$ = subexp([IPV6ADDRESS1$, IPV6ADDRESS2$, IPV6ADDRESS3$, IPV6ADDRESS4$, IPV6ADDRESS5$, IPV6ADDRESS6$, IPV6ADDRESS7$, IPV6ADDRESS8$, IPV6ADDRESS9$].join(\"|\")), ZONEID$ = subexp(subexp(UNRESERVED$$2 + \"|\" + PCT_ENCODED$2) + \"+\");\n      subexp(\"[vV]\" + HEXDIG$$2 + \"+\\\\.\" + merge2(UNRESERVED$$2, SUB_DELIMS$$, \"[\\\\:]\") + \"+\");\n      subexp(subexp(PCT_ENCODED$2 + \"|\" + merge2(UNRESERVED$$2, SUB_DELIMS$$)) + \"*\");\n      var PCHAR$ = subexp(PCT_ENCODED$2 + \"|\" + merge2(UNRESERVED$$2, SUB_DELIMS$$, \"[\\\\:\\\\@]\"));\n      subexp(subexp(PCT_ENCODED$2 + \"|\" + merge2(UNRESERVED$$2, SUB_DELIMS$$, \"[\\\\@]\")) + \"+\");\n      subexp(subexp(PCHAR$ + \"|\" + merge2(\"[\\\\/\\\\?]\", IPRIVATE$$)) + \"*\");\n      return {\n        NOT_SCHEME: new RegExp(merge2(\"[^]\", ALPHA$$, DIGIT$$, \"[\\\\+\\\\-\\\\.]\"), \"g\"),\n        NOT_USERINFO: new RegExp(merge2(\"[^\\\\%\\\\:]\", UNRESERVED$$2, SUB_DELIMS$$), \"g\"),\n        NOT_HOST: new RegExp(merge2(\"[^\\\\%\\\\[\\\\]\\\\:]\", UNRESERVED$$2, SUB_DELIMS$$), \"g\"),\n        NOT_PATH: new RegExp(merge2(\"[^\\\\%\\\\/\\\\:\\\\@]\", UNRESERVED$$2, SUB_DELIMS$$), \"g\"),\n        NOT_PATH_NOSCHEME: new RegExp(merge2(\"[^\\\\%\\\\/\\\\@]\", UNRESERVED$$2, SUB_DELIMS$$), \"g\"),\n        NOT_QUERY: new RegExp(merge2(\"[^\\\\%]\", UNRESERVED$$2, SUB_DELIMS$$, \"[\\\\:\\\\@\\\\/\\\\?]\", IPRIVATE$$), \"g\"),\n        NOT_FRAGMENT: new RegExp(merge2(\"[^\\\\%]\", UNRESERVED$$2, SUB_DELIMS$$, \"[\\\\:\\\\@\\\\/\\\\?]\"), \"g\"),\n        ESCAPE: new RegExp(merge2(\"[^]\", UNRESERVED$$2, SUB_DELIMS$$), \"g\"),\n        UNRESERVED: new RegExp(UNRESERVED$$2, \"g\"),\n        OTHER_CHARS: new RegExp(merge2(\"[^\\\\%]\", UNRESERVED$$2, RESERVED$$), \"g\"),\n        PCT_ENCODED: new RegExp(PCT_ENCODED$2, \"g\"),\n        IPV4ADDRESS: new RegExp(\"^(\" + IPV4ADDRESS$ + \")$\"),\n        IPV6ADDRESS: new RegExp(\"^\\\\[?(\" + IPV6ADDRESS$ + \")\" + subexp(subexp(\"\\\\%25|\\\\%(?!\" + HEXDIG$$2 + \"{2})\") + \"(\" + ZONEID$ + \")\") + \"?\\\\]?$\")\n      };\n    }\n    var URI_PROTOCOL = buildExps(false);\n    var IRI_PROTOCOL = buildExps(true);\n    var slicedToArray = function() {\n      function sliceIterator(arr, i) {\n        var _arr = [];\n        var _n = true;\n        var _d = false;\n        var _e = void 0;\n        try {\n          for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n            _arr.push(_s.value);\n            if (i && _arr.length === i)\n              break;\n          }\n        } catch (err) {\n          _d = true;\n          _e = err;\n        } finally {\n          try {\n            if (!_n && _i[\"return\"])\n              _i[\"return\"]();\n          } finally {\n            if (_d)\n              throw _e;\n          }\n        }\n        return _arr;\n      }\n      return function(arr, i) {\n        if (Array.isArray(arr)) {\n          return arr;\n        } else if (Symbol.iterator in Object(arr)) {\n          return sliceIterator(arr, i);\n        } else {\n          throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n        }\n      };\n    }();\n    var toConsumableArray2 = function(arr) {\n      if (Array.isArray(arr)) {\n        for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++)\n          arr2[i] = arr[i];\n        return arr2;\n      } else {\n        return Array.from(arr);\n      }\n    };\n    var maxInt = 2147483647;\n    var base = 36;\n    var tMin = 1;\n    var tMax = 26;\n    var skew = 38;\n    var damp = 700;\n    var initialBias = 72;\n    var initialN = 128;\n    var delimiter = \"-\";\n    var regexPunycode = /^xn--/;\n    var regexNonASCII = /[^\\0-\\x7E]/;\n    var regexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g;\n    var errors = {\n      \"overflow\": \"Overflow: input needs wider integers to process\",\n      \"not-basic\": \"Illegal input >= 0x80 (not a basic code point)\",\n      \"invalid-input\": \"Invalid input\"\n    };\n    var baseMinusTMin = base - tMin;\n    var floor = Math.floor;\n    var stringFromCharCode = String.fromCharCode;\n    function error$1(type2) {\n      throw new RangeError(errors[type2]);\n    }\n    function map2(array, fn) {\n      var result = [];\n      var length = array.length;\n      while (length--) {\n        result[length] = fn(array[length]);\n      }\n      return result;\n    }\n    function mapDomain(string, fn) {\n      var parts = string.split(\"@\");\n      var result = \"\";\n      if (parts.length > 1) {\n        result = parts[0] + \"@\";\n        string = parts[1];\n      }\n      string = string.replace(regexSeparators, \".\");\n      var labels = string.split(\".\");\n      var encoded = map2(labels, fn).join(\".\");\n      return result + encoded;\n    }\n    function ucs2decode(string) {\n      var output = [];\n      var counter = 0;\n      var length = string.length;\n      while (counter < length) {\n        var value = string.charCodeAt(counter++);\n        if (value >= 55296 && value <= 56319 && counter < length) {\n          var extra = string.charCodeAt(counter++);\n          if ((extra & 64512) == 56320) {\n            output.push(((value & 1023) << 10) + (extra & 1023) + 65536);\n          } else {\n            output.push(value);\n            counter--;\n          }\n        } else {\n          output.push(value);\n        }\n      }\n      return output;\n    }\n    var ucs2encode = function ucs2encode2(array) {\n      return String.fromCodePoint.apply(String, toConsumableArray2(array));\n    };\n    var basicToDigit = function basicToDigit2(codePoint) {\n      if (codePoint - 48 < 10) {\n        return codePoint - 22;\n      }\n      if (codePoint - 65 < 26) {\n        return codePoint - 65;\n      }\n      if (codePoint - 97 < 26) {\n        return codePoint - 97;\n      }\n      return base;\n    };\n    var digitToBasic = function digitToBasic2(digit, flag) {\n      return digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n    };\n    var adapt = function adapt2(delta, numPoints, firstTime) {\n      var k = 0;\n      delta = firstTime ? floor(delta / damp) : delta >> 1;\n      delta += floor(delta / numPoints);\n      for (; delta > baseMinusTMin * tMax >> 1; k += base) {\n        delta = floor(delta / baseMinusTMin);\n      }\n      return floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n    };\n    var decode = function decode2(input) {\n      var output = [];\n      var inputLength = input.length;\n      var i = 0;\n      var n = initialN;\n      var bias = initialBias;\n      var basic = input.lastIndexOf(delimiter);\n      if (basic < 0) {\n        basic = 0;\n      }\n      for (var j = 0; j < basic; ++j) {\n        if (input.charCodeAt(j) >= 128) {\n          error$1(\"not-basic\");\n        }\n        output.push(input.charCodeAt(j));\n      }\n      for (var index = basic > 0 ? basic + 1 : 0; index < inputLength; ) {\n        var oldi = i;\n        for (var w = 1, k = base; ; k += base) {\n          if (index >= inputLength) {\n            error$1(\"invalid-input\");\n          }\n          var digit = basicToDigit(input.charCodeAt(index++));\n          if (digit >= base || digit > floor((maxInt - i) / w)) {\n            error$1(\"overflow\");\n          }\n          i += digit * w;\n          var t = k <= bias ? tMin : k >= bias + tMax ? tMax : k - bias;\n          if (digit < t) {\n            break;\n          }\n          var baseMinusT = base - t;\n          if (w > floor(maxInt / baseMinusT)) {\n            error$1(\"overflow\");\n          }\n          w *= baseMinusT;\n        }\n        var out = output.length + 1;\n        bias = adapt(i - oldi, out, oldi == 0);\n        if (floor(i / out) > maxInt - n) {\n          error$1(\"overflow\");\n        }\n        n += floor(i / out);\n        i %= out;\n        output.splice(i++, 0, n);\n      }\n      return String.fromCodePoint.apply(String, output);\n    };\n    var encode = function encode2(input) {\n      var output = [];\n      input = ucs2decode(input);\n      var inputLength = input.length;\n      var n = initialN;\n      var delta = 0;\n      var bias = initialBias;\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = void 0;\n      try {\n        for (var _iterator = input[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var _currentValue2 = _step.value;\n          if (_currentValue2 < 128) {\n            output.push(stringFromCharCode(_currentValue2));\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n      var basicLength = output.length;\n      var handledCPCount = basicLength;\n      if (basicLength) {\n        output.push(delimiter);\n      }\n      while (handledCPCount < inputLength) {\n        var m = maxInt;\n        var _iteratorNormalCompletion2 = true;\n        var _didIteratorError2 = false;\n        var _iteratorError2 = void 0;\n        try {\n          for (var _iterator2 = input[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n            var currentValue = _step2.value;\n            if (currentValue >= n && currentValue < m) {\n              m = currentValue;\n            }\n          }\n        } catch (err) {\n          _didIteratorError2 = true;\n          _iteratorError2 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion2 && _iterator2.return) {\n              _iterator2.return();\n            }\n          } finally {\n            if (_didIteratorError2) {\n              throw _iteratorError2;\n            }\n          }\n        }\n        var handledCPCountPlusOne = handledCPCount + 1;\n        if (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n          error$1(\"overflow\");\n        }\n        delta += (m - n) * handledCPCountPlusOne;\n        n = m;\n        var _iteratorNormalCompletion3 = true;\n        var _didIteratorError3 = false;\n        var _iteratorError3 = void 0;\n        try {\n          for (var _iterator3 = input[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n            var _currentValue = _step3.value;\n            if (_currentValue < n && ++delta > maxInt) {\n              error$1(\"overflow\");\n            }\n            if (_currentValue == n) {\n              var q = delta;\n              for (var k = base; ; k += base) {\n                var t = k <= bias ? tMin : k >= bias + tMax ? tMax : k - bias;\n                if (q < t) {\n                  break;\n                }\n                var qMinusT = q - t;\n                var baseMinusT = base - t;\n                output.push(stringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0)));\n                q = floor(qMinusT / baseMinusT);\n              }\n              output.push(stringFromCharCode(digitToBasic(q, 0)));\n              bias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n              delta = 0;\n              ++handledCPCount;\n            }\n          }\n        } catch (err) {\n          _didIteratorError3 = true;\n          _iteratorError3 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion3 && _iterator3.return) {\n              _iterator3.return();\n            }\n          } finally {\n            if (_didIteratorError3) {\n              throw _iteratorError3;\n            }\n          }\n        }\n        ++delta;\n        ++n;\n      }\n      return output.join(\"\");\n    };\n    var toUnicode = function toUnicode2(input) {\n      return mapDomain(input, function(string) {\n        return regexPunycode.test(string) ? decode(string.slice(4).toLowerCase()) : string;\n      });\n    };\n    var toASCII = function toASCII2(input) {\n      return mapDomain(input, function(string) {\n        return regexNonASCII.test(string) ? \"xn--\" + encode(string) : string;\n      });\n    };\n    var punycode = {\n      \"version\": \"2.1.0\",\n      \"ucs2\": {\n        \"decode\": ucs2decode,\n        \"encode\": ucs2encode\n      },\n      \"decode\": decode,\n      \"encode\": encode,\n      \"toASCII\": toASCII,\n      \"toUnicode\": toUnicode\n    };\n    var SCHEMES = {};\n    function pctEncChar(chr) {\n      var c = chr.charCodeAt(0);\n      var e = void 0;\n      if (c < 16)\n        e = \"%0\" + c.toString(16).toUpperCase();\n      else if (c < 128)\n        e = \"%\" + c.toString(16).toUpperCase();\n      else if (c < 2048)\n        e = \"%\" + (c >> 6 | 192).toString(16).toUpperCase() + \"%\" + (c & 63 | 128).toString(16).toUpperCase();\n      else\n        e = \"%\" + (c >> 12 | 224).toString(16).toUpperCase() + \"%\" + (c >> 6 & 63 | 128).toString(16).toUpperCase() + \"%\" + (c & 63 | 128).toString(16).toUpperCase();\n      return e;\n    }\n    function pctDecChars(str) {\n      var newStr = \"\";\n      var i = 0;\n      var il = str.length;\n      while (i < il) {\n        var c = parseInt(str.substr(i + 1, 2), 16);\n        if (c < 128) {\n          newStr += String.fromCharCode(c);\n          i += 3;\n        } else if (c >= 194 && c < 224) {\n          if (il - i >= 6) {\n            var c2 = parseInt(str.substr(i + 4, 2), 16);\n            newStr += String.fromCharCode((c & 31) << 6 | c2 & 63);\n          } else {\n            newStr += str.substr(i, 6);\n          }\n          i += 6;\n        } else if (c >= 224) {\n          if (il - i >= 9) {\n            var _c = parseInt(str.substr(i + 4, 2), 16);\n            var c3 = parseInt(str.substr(i + 7, 2), 16);\n            newStr += String.fromCharCode((c & 15) << 12 | (_c & 63) << 6 | c3 & 63);\n          } else {\n            newStr += str.substr(i, 9);\n          }\n          i += 9;\n        } else {\n          newStr += str.substr(i, 3);\n          i += 3;\n        }\n      }\n      return newStr;\n    }\n    function _normalizeComponentEncoding(components, protocol) {\n      function decodeUnreserved2(str) {\n        var decStr = pctDecChars(str);\n        return !decStr.match(protocol.UNRESERVED) ? str : decStr;\n      }\n      if (components.scheme)\n        components.scheme = String(components.scheme).replace(protocol.PCT_ENCODED, decodeUnreserved2).toLowerCase().replace(protocol.NOT_SCHEME, \"\");\n      if (components.userinfo !== void 0)\n        components.userinfo = String(components.userinfo).replace(protocol.PCT_ENCODED, decodeUnreserved2).replace(protocol.NOT_USERINFO, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n      if (components.host !== void 0)\n        components.host = String(components.host).replace(protocol.PCT_ENCODED, decodeUnreserved2).toLowerCase().replace(protocol.NOT_HOST, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n      if (components.path !== void 0)\n        components.path = String(components.path).replace(protocol.PCT_ENCODED, decodeUnreserved2).replace(components.scheme ? protocol.NOT_PATH : protocol.NOT_PATH_NOSCHEME, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n      if (components.query !== void 0)\n        components.query = String(components.query).replace(protocol.PCT_ENCODED, decodeUnreserved2).replace(protocol.NOT_QUERY, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n      if (components.fragment !== void 0)\n        components.fragment = String(components.fragment).replace(protocol.PCT_ENCODED, decodeUnreserved2).replace(protocol.NOT_FRAGMENT, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n      return components;\n    }\n    function _stripLeadingZeros(str) {\n      return str.replace(/^0*(.*)/, \"$1\") || \"0\";\n    }\n    function _normalizeIPv4(host, protocol) {\n      var matches = host.match(protocol.IPV4ADDRESS) || [];\n      var _matches = slicedToArray(matches, 2), address = _matches[1];\n      if (address) {\n        return address.split(\".\").map(_stripLeadingZeros).join(\".\");\n      } else {\n        return host;\n      }\n    }\n    function _normalizeIPv6(host, protocol) {\n      var matches = host.match(protocol.IPV6ADDRESS) || [];\n      var _matches2 = slicedToArray(matches, 3), address = _matches2[1], zone = _matches2[2];\n      if (address) {\n        var _address$toLowerCase$ = address.toLowerCase().split(\"::\").reverse(), _address$toLowerCase$2 = slicedToArray(_address$toLowerCase$, 2), last2 = _address$toLowerCase$2[0], first2 = _address$toLowerCase$2[1];\n        var firstFields = first2 ? first2.split(\":\").map(_stripLeadingZeros) : [];\n        var lastFields = last2.split(\":\").map(_stripLeadingZeros);\n        var isLastFieldIPv4Address = protocol.IPV4ADDRESS.test(lastFields[lastFields.length - 1]);\n        var fieldCount = isLastFieldIPv4Address ? 7 : 8;\n        var lastFieldsStart = lastFields.length - fieldCount;\n        var fields = Array(fieldCount);\n        for (var x = 0; x < fieldCount; ++x) {\n          fields[x] = firstFields[x] || lastFields[lastFieldsStart + x] || \"\";\n        }\n        if (isLastFieldIPv4Address) {\n          fields[fieldCount - 1] = _normalizeIPv4(fields[fieldCount - 1], protocol);\n        }\n        var allZeroFields = fields.reduce(function(acc, field, index) {\n          if (!field || field === \"0\") {\n            var lastLongest = acc[acc.length - 1];\n            if (lastLongest && lastLongest.index + lastLongest.length === index) {\n              lastLongest.length++;\n            } else {\n              acc.push({ index, length: 1 });\n            }\n          }\n          return acc;\n        }, []);\n        var longestZeroFields = allZeroFields.sort(function(a, b) {\n          return b.length - a.length;\n        })[0];\n        var newHost = void 0;\n        if (longestZeroFields && longestZeroFields.length > 1) {\n          var newFirst = fields.slice(0, longestZeroFields.index);\n          var newLast = fields.slice(longestZeroFields.index + longestZeroFields.length);\n          newHost = newFirst.join(\":\") + \"::\" + newLast.join(\":\");\n        } else {\n          newHost = fields.join(\":\");\n        }\n        if (zone) {\n          newHost += \"%\" + zone;\n        }\n        return newHost;\n      } else {\n        return host;\n      }\n    }\n    var URI_PARSE = /^(?:([^:\\/?#]+):)?(?:\\/\\/((?:([^\\/?#@]*)@)?(\\[[^\\/?#\\]]+\\]|[^\\/?#:]*)(?:\\:(\\d*))?))?([^?#]*)(?:\\?([^#]*))?(?:#((?:.|\\n|\\r)*))?/i;\n    var NO_MATCH_IS_UNDEFINED = \"\".match(/(){0}/)[1] === void 0;\n    function parse2(uriString) {\n      var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};\n      var components = {};\n      var protocol = options.iri !== false ? IRI_PROTOCOL : URI_PROTOCOL;\n      if (options.reference === \"suffix\")\n        uriString = (options.scheme ? options.scheme + \":\" : \"\") + \"//\" + uriString;\n      var matches = uriString.match(URI_PARSE);\n      if (matches) {\n        if (NO_MATCH_IS_UNDEFINED) {\n          components.scheme = matches[1];\n          components.userinfo = matches[3];\n          components.host = matches[4];\n          components.port = parseInt(matches[5], 10);\n          components.path = matches[6] || \"\";\n          components.query = matches[7];\n          components.fragment = matches[8];\n          if (isNaN(components.port)) {\n            components.port = matches[5];\n          }\n        } else {\n          components.scheme = matches[1] || void 0;\n          components.userinfo = uriString.indexOf(\"@\") !== -1 ? matches[3] : void 0;\n          components.host = uriString.indexOf(\"//\") !== -1 ? matches[4] : void 0;\n          components.port = parseInt(matches[5], 10);\n          components.path = matches[6] || \"\";\n          components.query = uriString.indexOf(\"?\") !== -1 ? matches[7] : void 0;\n          components.fragment = uriString.indexOf(\"#\") !== -1 ? matches[8] : void 0;\n          if (isNaN(components.port)) {\n            components.port = uriString.match(/\\/\\/(?:.|\\n)*\\:(?:\\/|\\?|\\#|$)/) ? matches[4] : void 0;\n          }\n        }\n        if (components.host) {\n          components.host = _normalizeIPv6(_normalizeIPv4(components.host, protocol), protocol);\n        }\n        if (components.scheme === void 0 && components.userinfo === void 0 && components.host === void 0 && components.port === void 0 && !components.path && components.query === void 0) {\n          components.reference = \"same-document\";\n        } else if (components.scheme === void 0) {\n          components.reference = \"relative\";\n        } else if (components.fragment === void 0) {\n          components.reference = \"absolute\";\n        } else {\n          components.reference = \"uri\";\n        }\n        if (options.reference && options.reference !== \"suffix\" && options.reference !== components.reference) {\n          components.error = components.error || \"URI is not a \" + options.reference + \" reference.\";\n        }\n        var schemeHandler = SCHEMES[(options.scheme || components.scheme || \"\").toLowerCase()];\n        if (!options.unicodeSupport && (!schemeHandler || !schemeHandler.unicodeSupport)) {\n          if (components.host && (options.domainHost || schemeHandler && schemeHandler.domainHost)) {\n            try {\n              components.host = punycode.toASCII(components.host.replace(protocol.PCT_ENCODED, pctDecChars).toLowerCase());\n            } catch (e) {\n              components.error = components.error || \"Host's domain name can not be converted to ASCII via punycode: \" + e;\n            }\n          }\n          _normalizeComponentEncoding(components, URI_PROTOCOL);\n        } else {\n          _normalizeComponentEncoding(components, protocol);\n        }\n        if (schemeHandler && schemeHandler.parse) {\n          schemeHandler.parse(components, options);\n        }\n      } else {\n        components.error = components.error || \"URI can not be parsed.\";\n      }\n      return components;\n    }\n    function _recomposeAuthority(components, options) {\n      var protocol = options.iri !== false ? IRI_PROTOCOL : URI_PROTOCOL;\n      var uriTokens = [];\n      if (components.userinfo !== void 0) {\n        uriTokens.push(components.userinfo);\n        uriTokens.push(\"@\");\n      }\n      if (components.host !== void 0) {\n        uriTokens.push(_normalizeIPv6(_normalizeIPv4(String(components.host), protocol), protocol).replace(protocol.IPV6ADDRESS, function(_, $1, $2) {\n          return \"[\" + $1 + ($2 ? \"%25\" + $2 : \"\") + \"]\";\n        }));\n      }\n      if (typeof components.port === \"number\" || typeof components.port === \"string\") {\n        uriTokens.push(\":\");\n        uriTokens.push(String(components.port));\n      }\n      return uriTokens.length ? uriTokens.join(\"\") : void 0;\n    }\n    var RDS1 = /^\\.\\.?\\//;\n    var RDS2 = /^\\/\\.(\\/|$)/;\n    var RDS3 = /^\\/\\.\\.(\\/|$)/;\n    var RDS5 = /^\\/?(?:.|\\n)*?(?=\\/|$)/;\n    function removeDotSegments(input) {\n      var output = [];\n      while (input.length) {\n        if (input.match(RDS1)) {\n          input = input.replace(RDS1, \"\");\n        } else if (input.match(RDS2)) {\n          input = input.replace(RDS2, \"/\");\n        } else if (input.match(RDS3)) {\n          input = input.replace(RDS3, \"/\");\n          output.pop();\n        } else if (input === \".\" || input === \"..\") {\n          input = \"\";\n        } else {\n          var im = input.match(RDS5);\n          if (im) {\n            var s = im[0];\n            input = input.slice(s.length);\n            output.push(s);\n          } else {\n            throw new Error(\"Unexpected dot segment condition\");\n          }\n        }\n      }\n      return output.join(\"\");\n    }\n    function serialize(components) {\n      var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};\n      var protocol = options.iri ? IRI_PROTOCOL : URI_PROTOCOL;\n      var uriTokens = [];\n      var schemeHandler = SCHEMES[(options.scheme || components.scheme || \"\").toLowerCase()];\n      if (schemeHandler && schemeHandler.serialize)\n        schemeHandler.serialize(components, options);\n      if (components.host) {\n        if (protocol.IPV6ADDRESS.test(components.host))\n          ;\n        else if (options.domainHost || schemeHandler && schemeHandler.domainHost) {\n          try {\n            components.host = !options.iri ? punycode.toASCII(components.host.replace(protocol.PCT_ENCODED, pctDecChars).toLowerCase()) : punycode.toUnicode(components.host);\n          } catch (e) {\n            components.error = components.error || \"Host's domain name can not be converted to \" + (!options.iri ? \"ASCII\" : \"Unicode\") + \" via punycode: \" + e;\n          }\n        }\n      }\n      _normalizeComponentEncoding(components, protocol);\n      if (options.reference !== \"suffix\" && components.scheme) {\n        uriTokens.push(components.scheme);\n        uriTokens.push(\":\");\n      }\n      var authority = _recomposeAuthority(components, options);\n      if (authority !== void 0) {\n        if (options.reference !== \"suffix\") {\n          uriTokens.push(\"//\");\n        }\n        uriTokens.push(authority);\n        if (components.path && components.path.charAt(0) !== \"/\") {\n          uriTokens.push(\"/\");\n        }\n      }\n      if (components.path !== void 0) {\n        var s = components.path;\n        if (!options.absolutePath && (!schemeHandler || !schemeHandler.absolutePath)) {\n          s = removeDotSegments(s);\n        }\n        if (authority === void 0) {\n          s = s.replace(/^\\/\\//, \"/%2F\");\n        }\n        uriTokens.push(s);\n      }\n      if (components.query !== void 0) {\n        uriTokens.push(\"?\");\n        uriTokens.push(components.query);\n      }\n      if (components.fragment !== void 0) {\n        uriTokens.push(\"#\");\n        uriTokens.push(components.fragment);\n      }\n      return uriTokens.join(\"\");\n    }\n    function resolveComponents(base2, relative) {\n      var options = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};\n      var skipNormalization = arguments[3];\n      var target = {};\n      if (!skipNormalization) {\n        base2 = parse2(serialize(base2, options), options);\n        relative = parse2(serialize(relative, options), options);\n      }\n      options = options || {};\n      if (!options.tolerant && relative.scheme) {\n        target.scheme = relative.scheme;\n        target.userinfo = relative.userinfo;\n        target.host = relative.host;\n        target.port = relative.port;\n        target.path = removeDotSegments(relative.path || \"\");\n        target.query = relative.query;\n      } else {\n        if (relative.userinfo !== void 0 || relative.host !== void 0 || relative.port !== void 0) {\n          target.userinfo = relative.userinfo;\n          target.host = relative.host;\n          target.port = relative.port;\n          target.path = removeDotSegments(relative.path || \"\");\n          target.query = relative.query;\n        } else {\n          if (!relative.path) {\n            target.path = base2.path;\n            if (relative.query !== void 0) {\n              target.query = relative.query;\n            } else {\n              target.query = base2.query;\n            }\n          } else {\n            if (relative.path.charAt(0) === \"/\") {\n              target.path = removeDotSegments(relative.path);\n            } else {\n              if ((base2.userinfo !== void 0 || base2.host !== void 0 || base2.port !== void 0) && !base2.path) {\n                target.path = \"/\" + relative.path;\n              } else if (!base2.path) {\n                target.path = relative.path;\n              } else {\n                target.path = base2.path.slice(0, base2.path.lastIndexOf(\"/\") + 1) + relative.path;\n              }\n              target.path = removeDotSegments(target.path);\n            }\n            target.query = relative.query;\n          }\n          target.userinfo = base2.userinfo;\n          target.host = base2.host;\n          target.port = base2.port;\n        }\n        target.scheme = base2.scheme;\n      }\n      target.fragment = relative.fragment;\n      return target;\n    }\n    function resolve2(baseURI, relativeURI, options) {\n      var schemelessOptions = assign({ scheme: \"null\" }, options);\n      return serialize(resolveComponents(parse2(baseURI, schemelessOptions), parse2(relativeURI, schemelessOptions), schemelessOptions, true), schemelessOptions);\n    }\n    function normalize(uri2, options) {\n      if (typeof uri2 === \"string\") {\n        uri2 = serialize(parse2(uri2, options), options);\n      } else if (typeOf(uri2) === \"object\") {\n        uri2 = parse2(serialize(uri2, options), options);\n      }\n      return uri2;\n    }\n    function equal3(uriA, uriB, options) {\n      if (typeof uriA === \"string\") {\n        uriA = serialize(parse2(uriA, options), options);\n      } else if (typeOf(uriA) === \"object\") {\n        uriA = serialize(uriA, options);\n      }\n      if (typeof uriB === \"string\") {\n        uriB = serialize(parse2(uriB, options), options);\n      } else if (typeOf(uriB) === \"object\") {\n        uriB = serialize(uriB, options);\n      }\n      return uriA === uriB;\n    }\n    function escapeComponent(str, options) {\n      return str && str.toString().replace(!options || !options.iri ? URI_PROTOCOL.ESCAPE : IRI_PROTOCOL.ESCAPE, pctEncChar);\n    }\n    function unescapeComponent(str, options) {\n      return str && str.toString().replace(!options || !options.iri ? URI_PROTOCOL.PCT_ENCODED : IRI_PROTOCOL.PCT_ENCODED, pctDecChars);\n    }\n    var handler = {\n      scheme: \"http\",\n      domainHost: true,\n      parse: function parse3(components, options) {\n        if (!components.host) {\n          components.error = components.error || \"HTTP URIs must have a host.\";\n        }\n        return components;\n      },\n      serialize: function serialize2(components, options) {\n        var secure = String(components.scheme).toLowerCase() === \"https\";\n        if (components.port === (secure ? 443 : 80) || components.port === \"\") {\n          components.port = void 0;\n        }\n        if (!components.path) {\n          components.path = \"/\";\n        }\n        return components;\n      }\n    };\n    var handler$1 = {\n      scheme: \"https\",\n      domainHost: handler.domainHost,\n      parse: handler.parse,\n      serialize: handler.serialize\n    };\n    function isSecure(wsComponents) {\n      return typeof wsComponents.secure === \"boolean\" ? wsComponents.secure : String(wsComponents.scheme).toLowerCase() === \"wss\";\n    }\n    var handler$2 = {\n      scheme: \"ws\",\n      domainHost: true,\n      parse: function parse3(components, options) {\n        var wsComponents = components;\n        wsComponents.secure = isSecure(wsComponents);\n        wsComponents.resourceName = (wsComponents.path || \"/\") + (wsComponents.query ? \"?\" + wsComponents.query : \"\");\n        wsComponents.path = void 0;\n        wsComponents.query = void 0;\n        return wsComponents;\n      },\n      serialize: function serialize2(wsComponents, options) {\n        if (wsComponents.port === (isSecure(wsComponents) ? 443 : 80) || wsComponents.port === \"\") {\n          wsComponents.port = void 0;\n        }\n        if (typeof wsComponents.secure === \"boolean\") {\n          wsComponents.scheme = wsComponents.secure ? \"wss\" : \"ws\";\n          wsComponents.secure = void 0;\n        }\n        if (wsComponents.resourceName) {\n          var _wsComponents$resourc = wsComponents.resourceName.split(\"?\"), _wsComponents$resourc2 = slicedToArray(_wsComponents$resourc, 2), path = _wsComponents$resourc2[0], query = _wsComponents$resourc2[1];\n          wsComponents.path = path && path !== \"/\" ? path : void 0;\n          wsComponents.query = query;\n          wsComponents.resourceName = void 0;\n        }\n        wsComponents.fragment = void 0;\n        return wsComponents;\n      }\n    };\n    var handler$3 = {\n      scheme: \"wss\",\n      domainHost: handler$2.domainHost,\n      parse: handler$2.parse,\n      serialize: handler$2.serialize\n    };\n    var O = {};\n    var UNRESERVED$$ = \"[A-Za-z0-9\\\\-\\\\.\\\\_\\\\~\\\\xA0-\\\\u200D\\\\u2010-\\\\u2029\\\\u202F-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF]\";\n    var HEXDIG$$ = \"[0-9A-Fa-f]\";\n    var PCT_ENCODED$ = subexp(subexp(\"%[EFef]\" + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$) + \"|\" + subexp(\"%[89A-Fa-f]\" + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$) + \"|\" + subexp(\"%\" + HEXDIG$$ + HEXDIG$$));\n    var ATEXT$$ = \"[A-Za-z0-9\\\\!\\\\$\\\\%\\\\'\\\\*\\\\+\\\\-\\\\^\\\\_\\\\`\\\\{\\\\|\\\\}\\\\~]\";\n    var QTEXT$$ = \"[\\\\!\\\\$\\\\%\\\\'\\\\(\\\\)\\\\*\\\\+\\\\,\\\\-\\\\.0-9\\\\<\\\\>A-Z\\\\x5E-\\\\x7E]\";\n    var VCHAR$$ = merge2(QTEXT$$, '[\\\\\"\\\\\\\\]');\n    var SOME_DELIMS$$ = \"[\\\\!\\\\$\\\\'\\\\(\\\\)\\\\*\\\\+\\\\,\\\\;\\\\:\\\\@]\";\n    var UNRESERVED = new RegExp(UNRESERVED$$, \"g\");\n    var PCT_ENCODED = new RegExp(PCT_ENCODED$, \"g\");\n    var NOT_LOCAL_PART = new RegExp(merge2(\"[^]\", ATEXT$$, \"[\\\\.]\", '[\\\\\"]', VCHAR$$), \"g\");\n    var NOT_HFNAME = new RegExp(merge2(\"[^]\", UNRESERVED$$, SOME_DELIMS$$), \"g\");\n    var NOT_HFVALUE = NOT_HFNAME;\n    function decodeUnreserved(str) {\n      var decStr = pctDecChars(str);\n      return !decStr.match(UNRESERVED) ? str : decStr;\n    }\n    var handler$4 = {\n      scheme: \"mailto\",\n      parse: function parse$$1(components, options) {\n        var mailtoComponents = components;\n        var to = mailtoComponents.to = mailtoComponents.path ? mailtoComponents.path.split(\",\") : [];\n        mailtoComponents.path = void 0;\n        if (mailtoComponents.query) {\n          var unknownHeaders = false;\n          var headers = {};\n          var hfields = mailtoComponents.query.split(\"&\");\n          for (var x = 0, xl = hfields.length; x < xl; ++x) {\n            var hfield = hfields[x].split(\"=\");\n            switch (hfield[0]) {\n              case \"to\":\n                var toAddrs = hfield[1].split(\",\");\n                for (var _x = 0, _xl = toAddrs.length; _x < _xl; ++_x) {\n                  to.push(toAddrs[_x]);\n                }\n                break;\n              case \"subject\":\n                mailtoComponents.subject = unescapeComponent(hfield[1], options);\n                break;\n              case \"body\":\n                mailtoComponents.body = unescapeComponent(hfield[1], options);\n                break;\n              default:\n                unknownHeaders = true;\n                headers[unescapeComponent(hfield[0], options)] = unescapeComponent(hfield[1], options);\n                break;\n            }\n          }\n          if (unknownHeaders)\n            mailtoComponents.headers = headers;\n        }\n        mailtoComponents.query = void 0;\n        for (var _x2 = 0, _xl2 = to.length; _x2 < _xl2; ++_x2) {\n          var addr = to[_x2].split(\"@\");\n          addr[0] = unescapeComponent(addr[0]);\n          if (!options.unicodeSupport) {\n            try {\n              addr[1] = punycode.toASCII(unescapeComponent(addr[1], options).toLowerCase());\n            } catch (e) {\n              mailtoComponents.error = mailtoComponents.error || \"Email address's domain name can not be converted to ASCII via punycode: \" + e;\n            }\n          } else {\n            addr[1] = unescapeComponent(addr[1], options).toLowerCase();\n          }\n          to[_x2] = addr.join(\"@\");\n        }\n        return mailtoComponents;\n      },\n      serialize: function serialize$$1(mailtoComponents, options) {\n        var components = mailtoComponents;\n        var to = toArray2(mailtoComponents.to);\n        if (to) {\n          for (var x = 0, xl = to.length; x < xl; ++x) {\n            var toAddr = String(to[x]);\n            var atIdx = toAddr.lastIndexOf(\"@\");\n            var localPart = toAddr.slice(0, atIdx).replace(PCT_ENCODED, decodeUnreserved).replace(PCT_ENCODED, toUpperCase).replace(NOT_LOCAL_PART, pctEncChar);\n            var domain = toAddr.slice(atIdx + 1);\n            try {\n              domain = !options.iri ? punycode.toASCII(unescapeComponent(domain, options).toLowerCase()) : punycode.toUnicode(domain);\n            } catch (e) {\n              components.error = components.error || \"Email address's domain name can not be converted to \" + (!options.iri ? \"ASCII\" : \"Unicode\") + \" via punycode: \" + e;\n            }\n            to[x] = localPart + \"@\" + domain;\n          }\n          components.path = to.join(\",\");\n        }\n        var headers = mailtoComponents.headers = mailtoComponents.headers || {};\n        if (mailtoComponents.subject)\n          headers[\"subject\"] = mailtoComponents.subject;\n        if (mailtoComponents.body)\n          headers[\"body\"] = mailtoComponents.body;\n        var fields = [];\n        for (var name2 in headers) {\n          if (headers[name2] !== O[name2]) {\n            fields.push(name2.replace(PCT_ENCODED, decodeUnreserved).replace(PCT_ENCODED, toUpperCase).replace(NOT_HFNAME, pctEncChar) + \"=\" + headers[name2].replace(PCT_ENCODED, decodeUnreserved).replace(PCT_ENCODED, toUpperCase).replace(NOT_HFVALUE, pctEncChar));\n          }\n        }\n        if (fields.length) {\n          components.query = fields.join(\"&\");\n        }\n        return components;\n      }\n    };\n    var URN_PARSE = /^([^\\:]+)\\:(.*)/;\n    var handler$5 = {\n      scheme: \"urn\",\n      parse: function parse$$1(components, options) {\n        var matches = components.path && components.path.match(URN_PARSE);\n        var urnComponents = components;\n        if (matches) {\n          var scheme = options.scheme || urnComponents.scheme || \"urn\";\n          var nid = matches[1].toLowerCase();\n          var nss = matches[2];\n          var urnScheme = scheme + \":\" + (options.nid || nid);\n          var schemeHandler = SCHEMES[urnScheme];\n          urnComponents.nid = nid;\n          urnComponents.nss = nss;\n          urnComponents.path = void 0;\n          if (schemeHandler) {\n            urnComponents = schemeHandler.parse(urnComponents, options);\n          }\n        } else {\n          urnComponents.error = urnComponents.error || \"URN can not be parsed.\";\n        }\n        return urnComponents;\n      },\n      serialize: function serialize$$1(urnComponents, options) {\n        var scheme = options.scheme || urnComponents.scheme || \"urn\";\n        var nid = urnComponents.nid;\n        var urnScheme = scheme + \":\" + (options.nid || nid);\n        var schemeHandler = SCHEMES[urnScheme];\n        if (schemeHandler) {\n          urnComponents = schemeHandler.serialize(urnComponents, options);\n        }\n        var uriComponents = urnComponents;\n        var nss = urnComponents.nss;\n        uriComponents.path = (nid || options.nid) + \":\" + nss;\n        return uriComponents;\n      }\n    };\n    var UUID2 = /^[0-9A-Fa-f]{8}(?:\\-[0-9A-Fa-f]{4}){3}\\-[0-9A-Fa-f]{12}$/;\n    var handler$6 = {\n      scheme: \"urn:uuid\",\n      parse: function parse3(urnComponents, options) {\n        var uuidComponents = urnComponents;\n        uuidComponents.uuid = uuidComponents.nss;\n        uuidComponents.nss = void 0;\n        if (!options.tolerant && (!uuidComponents.uuid || !uuidComponents.uuid.match(UUID2))) {\n          uuidComponents.error = uuidComponents.error || \"UUID is not valid.\";\n        }\n        return uuidComponents;\n      },\n      serialize: function serialize2(uuidComponents, options) {\n        var urnComponents = uuidComponents;\n        urnComponents.nss = (uuidComponents.uuid || \"\").toLowerCase();\n        return urnComponents;\n      }\n    };\n    SCHEMES[handler.scheme] = handler;\n    SCHEMES[handler$1.scheme] = handler$1;\n    SCHEMES[handler$2.scheme] = handler$2;\n    SCHEMES[handler$3.scheme] = handler$3;\n    SCHEMES[handler$4.scheme] = handler$4;\n    SCHEMES[handler$5.scheme] = handler$5;\n    SCHEMES[handler$6.scheme] = handler$6;\n    exports2.SCHEMES = SCHEMES;\n    exports2.pctEncChar = pctEncChar;\n    exports2.pctDecChars = pctDecChars;\n    exports2.parse = parse2;\n    exports2.removeDotSegments = removeDotSegments;\n    exports2.serialize = serialize;\n    exports2.resolveComponents = resolveComponents;\n    exports2.resolve = resolve2;\n    exports2.normalize = normalize;\n    exports2.equal = equal3;\n    exports2.escapeComponent = escapeComponent;\n    exports2.unescapeComponent = unescapeComponent;\n    Object.defineProperty(exports2, \"__esModule\", { value: true });\n  });\n})(uri_all, uri_all.exports);\nvar fastDeepEqual = function equal(a, b) {\n  if (a === b)\n    return true;\n  if (a && b && typeof a == \"object\" && typeof b == \"object\") {\n    if (a.constructor !== b.constructor)\n      return false;\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length)\n        return false;\n      for (i = length; i-- !== 0; )\n        if (!equal(a[i], b[i]))\n          return false;\n      return true;\n    }\n    if (a.constructor === RegExp)\n      return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf)\n      return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString)\n      return a.toString() === b.toString();\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length)\n      return false;\n    for (i = length; i-- !== 0; )\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i]))\n        return false;\n    for (i = length; i-- !== 0; ) {\n      var key = keys[i];\n      if (!equal(a[key], b[key]))\n        return false;\n    }\n    return true;\n  }\n  return a !== a && b !== b;\n};\nvar ucs2length$1 = function ucs2length(str) {\n  var length = 0, len = str.length, pos = 0, value;\n  while (pos < len) {\n    length++;\n    value = str.charCodeAt(pos++);\n    if (value >= 55296 && value <= 56319 && pos < len) {\n      value = str.charCodeAt(pos);\n      if ((value & 64512) == 56320)\n        pos++;\n    }\n  }\n  return length;\n};\nvar util$5 = {\n  copy,\n  checkDataType,\n  checkDataTypes,\n  coerceToTypes,\n  toHash: toHash$1,\n  getProperty,\n  escapeQuotes,\n  equal: fastDeepEqual,\n  ucs2length: ucs2length$1,\n  varOccurences,\n  varReplace,\n  schemaHasRules,\n  schemaHasRulesExcept,\n  schemaUnknownRules,\n  toQuotedString,\n  getPathExpr,\n  getPath,\n  getData,\n  unescapeFragment,\n  unescapeJsonPointer,\n  escapeFragment,\n  escapeJsonPointer\n};\nfunction copy(o, to) {\n  to = to || {};\n  for (var key in o)\n    to[key] = o[key];\n  return to;\n}\nfunction checkDataType(dataType, data2, strictNumbers, negate2) {\n  var EQUAL = negate2 ? \" !== \" : \" === \", AND = negate2 ? \" || \" : \" && \", OK = negate2 ? \"!\" : \"\", NOT = negate2 ? \"\" : \"!\";\n  switch (dataType) {\n    case \"null\":\n      return data2 + EQUAL + \"null\";\n    case \"array\":\n      return OK + \"Array.isArray(\" + data2 + \")\";\n    case \"object\":\n      return \"(\" + OK + data2 + AND + \"typeof \" + data2 + EQUAL + '\"object\"' + AND + NOT + \"Array.isArray(\" + data2 + \"))\";\n    case \"integer\":\n      return \"(typeof \" + data2 + EQUAL + '\"number\"' + AND + NOT + \"(\" + data2 + \" % 1)\" + AND + data2 + EQUAL + data2 + (strictNumbers ? AND + OK + \"isFinite(\" + data2 + \")\" : \"\") + \")\";\n    case \"number\":\n      return \"(typeof \" + data2 + EQUAL + '\"' + dataType + '\"' + (strictNumbers ? AND + OK + \"isFinite(\" + data2 + \")\" : \"\") + \")\";\n    default:\n      return \"typeof \" + data2 + EQUAL + '\"' + dataType + '\"';\n  }\n}\nfunction checkDataTypes(dataTypes, data2, strictNumbers) {\n  switch (dataTypes.length) {\n    case 1:\n      return checkDataType(dataTypes[0], data2, strictNumbers, true);\n    default:\n      var code = \"\";\n      var types = toHash$1(dataTypes);\n      if (types.array && types.object) {\n        code = types.null ? \"(\" : \"(!\" + data2 + \" || \";\n        code += \"typeof \" + data2 + ' !== \"object\")';\n        delete types.null;\n        delete types.array;\n        delete types.object;\n      }\n      if (types.number)\n        delete types.integer;\n      for (var t in types)\n        code += (code ? \" && \" : \"\") + checkDataType(t, data2, strictNumbers, true);\n      return code;\n  }\n}\nvar COERCE_TO_TYPES = toHash$1([\"string\", \"number\", \"integer\", \"boolean\", \"null\"]);\nfunction coerceToTypes(optionCoerceTypes, dataTypes) {\n  if (Array.isArray(dataTypes)) {\n    var types = [];\n    for (var i = 0; i < dataTypes.length; i++) {\n      var t = dataTypes[i];\n      if (COERCE_TO_TYPES[t])\n        types[types.length] = t;\n      else if (optionCoerceTypes === \"array\" && t === \"array\")\n        types[types.length] = t;\n    }\n    if (types.length)\n      return types;\n  } else if (COERCE_TO_TYPES[dataTypes]) {\n    return [dataTypes];\n  } else if (optionCoerceTypes === \"array\" && dataTypes === \"array\") {\n    return [\"array\"];\n  }\n}\nfunction toHash$1(arr) {\n  var hash = {};\n  for (var i = 0; i < arr.length; i++)\n    hash[arr[i]] = true;\n  return hash;\n}\nvar IDENTIFIER$1 = /^[a-z$_][a-z$_0-9]*$/i;\nvar SINGLE_QUOTE = /'|\\\\/g;\nfunction getProperty(key) {\n  return typeof key == \"number\" ? \"[\" + key + \"]\" : IDENTIFIER$1.test(key) ? \".\" + key : \"['\" + escapeQuotes(key) + \"']\";\n}\nfunction escapeQuotes(str) {\n  return str.replace(SINGLE_QUOTE, \"\\\\$&\").replace(/\\n/g, \"\\\\n\").replace(/\\r/g, \"\\\\r\").replace(/\\f/g, \"\\\\f\").replace(/\\t/g, \"\\\\t\");\n}\nfunction varOccurences(str, dataVar) {\n  dataVar += \"[^0-9]\";\n  var matches = str.match(new RegExp(dataVar, \"g\"));\n  return matches ? matches.length : 0;\n}\nfunction varReplace(str, dataVar, expr) {\n  dataVar += \"([^0-9])\";\n  expr = expr.replace(/\\$/g, \"$$$$\");\n  return str.replace(new RegExp(dataVar, \"g\"), expr + \"$1\");\n}\nfunction schemaHasRules(schema, rules3) {\n  if (typeof schema == \"boolean\")\n    return !schema;\n  for (var key in schema)\n    if (rules3[key])\n      return true;\n}\nfunction schemaHasRulesExcept(schema, rules3, exceptKeyword) {\n  if (typeof schema == \"boolean\")\n    return !schema && exceptKeyword != \"not\";\n  for (var key in schema)\n    if (key != exceptKeyword && rules3[key])\n      return true;\n}\nfunction schemaUnknownRules(schema, rules3) {\n  if (typeof schema == \"boolean\")\n    return;\n  for (var key in schema)\n    if (!rules3[key])\n      return key;\n}\nfunction toQuotedString(str) {\n  return \"'\" + escapeQuotes(str) + \"'\";\n}\nfunction getPathExpr(currentPath, expr, jsonPointers, isNumber) {\n  var path = jsonPointers ? \"'/' + \" + expr + (isNumber ? \"\" : \".replace(/~/g, '~0').replace(/\\\\//g, '~1')\") : isNumber ? \"'[' + \" + expr + \" + ']'\" : \"'[\\\\'' + \" + expr + \" + '\\\\']'\";\n  return joinPaths(currentPath, path);\n}\nfunction getPath(currentPath, prop, jsonPointers) {\n  var path = jsonPointers ? toQuotedString(\"/\" + escapeJsonPointer(prop)) : toQuotedString(getProperty(prop));\n  return joinPaths(currentPath, path);\n}\nvar JSON_POINTER$1 = /^\\/(?:[^~]|~0|~1)*$/;\nvar RELATIVE_JSON_POINTER$1 = /^([0-9]+)(#|\\/(?:[^~]|~0|~1)*)?$/;\nfunction getData($data, lvl, paths) {\n  var up, jsonPointer, data2, matches;\n  if ($data === \"\")\n    return \"rootData\";\n  if ($data[0] == \"/\") {\n    if (!JSON_POINTER$1.test($data))\n      throw new Error(\"Invalid JSON-pointer: \" + $data);\n    jsonPointer = $data;\n    data2 = \"rootData\";\n  } else {\n    matches = $data.match(RELATIVE_JSON_POINTER$1);\n    if (!matches)\n      throw new Error(\"Invalid JSON-pointer: \" + $data);\n    up = +matches[1];\n    jsonPointer = matches[2];\n    if (jsonPointer == \"#\") {\n      if (up >= lvl)\n        throw new Error(\"Cannot access property/index \" + up + \" levels up, current level is \" + lvl);\n      return paths[lvl - up];\n    }\n    if (up > lvl)\n      throw new Error(\"Cannot access data \" + up + \" levels up, current level is \" + lvl);\n    data2 = \"data\" + (lvl - up || \"\");\n    if (!jsonPointer)\n      return data2;\n  }\n  var expr = data2;\n  var segments = jsonPointer.split(\"/\");\n  for (var i = 0; i < segments.length; i++) {\n    var segment = segments[i];\n    if (segment) {\n      data2 += getProperty(unescapeJsonPointer(segment));\n      expr += \" && \" + data2;\n    }\n  }\n  return expr;\n}\nfunction joinPaths(a, b) {\n  if (a == '\"\"')\n    return b;\n  return (a + \" + \" + b).replace(/([^\\\\])' \\+ '/g, \"$1\");\n}\nfunction unescapeFragment(str) {\n  return unescapeJsonPointer(decodeURIComponent(str));\n}\nfunction escapeFragment(str) {\n  return encodeURIComponent(escapeJsonPointer(str));\n}\nfunction escapeJsonPointer(str) {\n  return str.replace(/~/g, \"~0\").replace(/\\//g, \"~1\");\n}\nfunction unescapeJsonPointer(str) {\n  return str.replace(/~1/g, \"/\").replace(/~0/g, \"~\");\n}\nvar util$4 = util$5;\nvar schema_obj = SchemaObject$2;\nfunction SchemaObject$2(obj) {\n  util$4.copy(obj, this);\n}\nvar jsonSchemaTraverse = { exports: {} };\nvar traverse$1 = jsonSchemaTraverse.exports = function(schema, opts, cb) {\n  if (typeof opts == \"function\") {\n    cb = opts;\n    opts = {};\n  }\n  cb = opts.cb || cb;\n  var pre = typeof cb == \"function\" ? cb : cb.pre || function() {\n  };\n  var post = cb.post || function() {\n  };\n  _traverse(opts, pre, post, schema, \"\", schema);\n};\ntraverse$1.keywords = {\n  additionalItems: true,\n  items: true,\n  contains: true,\n  additionalProperties: true,\n  propertyNames: true,\n  not: true\n};\ntraverse$1.arrayKeywords = {\n  items: true,\n  allOf: true,\n  anyOf: true,\n  oneOf: true\n};\ntraverse$1.propsKeywords = {\n  definitions: true,\n  properties: true,\n  patternProperties: true,\n  dependencies: true\n};\ntraverse$1.skipKeywords = {\n  default: true,\n  enum: true,\n  const: true,\n  required: true,\n  maximum: true,\n  minimum: true,\n  exclusiveMaximum: true,\n  exclusiveMinimum: true,\n  multipleOf: true,\n  maxLength: true,\n  minLength: true,\n  pattern: true,\n  format: true,\n  maxItems: true,\n  minItems: true,\n  uniqueItems: true,\n  maxProperties: true,\n  minProperties: true\n};\nfunction _traverse(opts, pre, post, schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex) {\n  if (schema && typeof schema == \"object\" && !Array.isArray(schema)) {\n    pre(schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex);\n    for (var key in schema) {\n      var sch = schema[key];\n      if (Array.isArray(sch)) {\n        if (key in traverse$1.arrayKeywords) {\n          for (var i = 0; i < sch.length; i++)\n            _traverse(opts, pre, post, sch[i], jsonPtr + \"/\" + key + \"/\" + i, rootSchema, jsonPtr, key, schema, i);\n        }\n      } else if (key in traverse$1.propsKeywords) {\n        if (sch && typeof sch == \"object\") {\n          for (var prop in sch)\n            _traverse(opts, pre, post, sch[prop], jsonPtr + \"/\" + key + \"/\" + escapeJsonPtr(prop), rootSchema, jsonPtr, key, schema, prop);\n        }\n      } else if (key in traverse$1.keywords || opts.allKeys && !(key in traverse$1.skipKeywords)) {\n        _traverse(opts, pre, post, sch, jsonPtr + \"/\" + key, rootSchema, jsonPtr, key, schema);\n      }\n    }\n    post(schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex);\n  }\n}\nfunction escapeJsonPtr(str) {\n  return str.replace(/~/g, \"~0\").replace(/\\//g, \"~1\");\n}\nvar URI$1 = uri_all.exports, equal$1 = fastDeepEqual, util$3 = util$5, SchemaObject$1 = schema_obj, traverse = jsonSchemaTraverse.exports;\nvar resolve_1 = resolve$3;\nresolve$3.normalizeId = normalizeId;\nresolve$3.fullPath = getFullPath;\nresolve$3.url = resolveUrl;\nresolve$3.ids = resolveIds;\nresolve$3.inlineRef = inlineRef;\nresolve$3.schema = resolveSchema;\nfunction resolve$3(compile2, root, ref2) {\n  var refVal = this._refs[ref2];\n  if (typeof refVal == \"string\") {\n    if (this._refs[refVal])\n      refVal = this._refs[refVal];\n    else\n      return resolve$3.call(this, compile2, root, refVal);\n  }\n  refVal = refVal || this._schemas[ref2];\n  if (refVal instanceof SchemaObject$1) {\n    return inlineRef(refVal.schema, this._opts.inlineRefs) ? refVal.schema : refVal.validate || this._compile(refVal);\n  }\n  var res = resolveSchema.call(this, root, ref2);\n  var schema, v, baseId;\n  if (res) {\n    schema = res.schema;\n    root = res.root;\n    baseId = res.baseId;\n  }\n  if (schema instanceof SchemaObject$1) {\n    v = schema.validate || compile2.call(this, schema.schema, root, void 0, baseId);\n  } else if (schema !== void 0) {\n    v = inlineRef(schema, this._opts.inlineRefs) ? schema : compile2.call(this, schema, root, void 0, baseId);\n  }\n  return v;\n}\nfunction resolveSchema(root, ref2) {\n  var p = URI$1.parse(ref2), refPath = _getFullPath(p), baseId = getFullPath(this._getId(root.schema));\n  if (Object.keys(root.schema).length === 0 || refPath !== baseId) {\n    var id = normalizeId(refPath);\n    var refVal = this._refs[id];\n    if (typeof refVal == \"string\") {\n      return resolveRecursive.call(this, root, refVal, p);\n    } else if (refVal instanceof SchemaObject$1) {\n      if (!refVal.validate)\n        this._compile(refVal);\n      root = refVal;\n    } else {\n      refVal = this._schemas[id];\n      if (refVal instanceof SchemaObject$1) {\n        if (!refVal.validate)\n          this._compile(refVal);\n        if (id == normalizeId(ref2))\n          return { schema: refVal, root, baseId };\n        root = refVal;\n      } else {\n        return;\n      }\n    }\n    if (!root.schema)\n      return;\n    baseId = getFullPath(this._getId(root.schema));\n  }\n  return getJsonPointer.call(this, p, baseId, root.schema, root);\n}\nfunction resolveRecursive(root, ref2, parsedRef) {\n  var res = resolveSchema.call(this, root, ref2);\n  if (res) {\n    var schema = res.schema;\n    var baseId = res.baseId;\n    root = res.root;\n    var id = this._getId(schema);\n    if (id)\n      baseId = resolveUrl(baseId, id);\n    return getJsonPointer.call(this, parsedRef, baseId, schema, root);\n  }\n}\nvar PREVENT_SCOPE_CHANGE = util$3.toHash([\"properties\", \"patternProperties\", \"enum\", \"dependencies\", \"definitions\"]);\nfunction getJsonPointer(parsedRef, baseId, schema, root) {\n  parsedRef.fragment = parsedRef.fragment || \"\";\n  if (parsedRef.fragment.slice(0, 1) != \"/\")\n    return;\n  var parts = parsedRef.fragment.split(\"/\");\n  for (var i = 1; i < parts.length; i++) {\n    var part = parts[i];\n    if (part) {\n      part = util$3.unescapeFragment(part);\n      schema = schema[part];\n      if (schema === void 0)\n        break;\n      var id;\n      if (!PREVENT_SCOPE_CHANGE[part]) {\n        id = this._getId(schema);\n        if (id)\n          baseId = resolveUrl(baseId, id);\n        if (schema.$ref) {\n          var $ref2 = resolveUrl(baseId, schema.$ref);\n          var res = resolveSchema.call(this, root, $ref2);\n          if (res) {\n            schema = res.schema;\n            root = res.root;\n            baseId = res.baseId;\n          }\n        }\n      }\n    }\n  }\n  if (schema !== void 0 && schema !== root.schema)\n    return { schema, root, baseId };\n}\nvar SIMPLE_INLINED = util$3.toHash([\n  \"type\",\n  \"format\",\n  \"pattern\",\n  \"maxLength\",\n  \"minLength\",\n  \"maxProperties\",\n  \"minProperties\",\n  \"maxItems\",\n  \"minItems\",\n  \"maximum\",\n  \"minimum\",\n  \"uniqueItems\",\n  \"multipleOf\",\n  \"required\",\n  \"enum\"\n]);\nfunction inlineRef(schema, limit) {\n  if (limit === false)\n    return false;\n  if (limit === void 0 || limit === true)\n    return checkNoRef(schema);\n  else if (limit)\n    return countKeys(schema) <= limit;\n}\nfunction checkNoRef(schema) {\n  var item;\n  if (Array.isArray(schema)) {\n    for (var i = 0; i < schema.length; i++) {\n      item = schema[i];\n      if (typeof item == \"object\" && !checkNoRef(item))\n        return false;\n    }\n  } else {\n    for (var key in schema) {\n      if (key == \"$ref\")\n        return false;\n      item = schema[key];\n      if (typeof item == \"object\" && !checkNoRef(item))\n        return false;\n    }\n  }\n  return true;\n}\nfunction countKeys(schema) {\n  var count2 = 0, item;\n  if (Array.isArray(schema)) {\n    for (var i = 0; i < schema.length; i++) {\n      item = schema[i];\n      if (typeof item == \"object\")\n        count2 += countKeys(item);\n      if (count2 == Infinity)\n        return Infinity;\n    }\n  } else {\n    for (var key in schema) {\n      if (key == \"$ref\")\n        return Infinity;\n      if (SIMPLE_INLINED[key]) {\n        count2++;\n      } else {\n        item = schema[key];\n        if (typeof item == \"object\")\n          count2 += countKeys(item) + 1;\n        if (count2 == Infinity)\n          return Infinity;\n      }\n    }\n  }\n  return count2;\n}\nfunction getFullPath(id, normalize) {\n  if (normalize !== false)\n    id = normalizeId(id);\n  var p = URI$1.parse(id);\n  return _getFullPath(p);\n}\nfunction _getFullPath(p) {\n  return URI$1.serialize(p).split(\"#\")[0] + \"#\";\n}\nvar TRAILING_SLASH_HASH = /#\\/?$/;\nfunction normalizeId(id) {\n  return id ? id.replace(TRAILING_SLASH_HASH, \"\") : \"\";\n}\nfunction resolveUrl(baseId, id) {\n  id = normalizeId(id);\n  return URI$1.resolve(baseId, id);\n}\nfunction resolveIds(schema) {\n  var schemaId = normalizeId(this._getId(schema));\n  var baseIds = { \"\": schemaId };\n  var fullPaths = { \"\": getFullPath(schemaId, false) };\n  var localRefs = {};\n  var self2 = this;\n  traverse(schema, { allKeys: true }, function(sch, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex) {\n    if (jsonPtr === \"\")\n      return;\n    var id = self2._getId(sch);\n    var baseId = baseIds[parentJsonPtr];\n    var fullPath = fullPaths[parentJsonPtr] + \"/\" + parentKeyword;\n    if (keyIndex !== void 0)\n      fullPath += \"/\" + (typeof keyIndex == \"number\" ? keyIndex : util$3.escapeFragment(keyIndex));\n    if (typeof id == \"string\") {\n      id = baseId = normalizeId(baseId ? URI$1.resolve(baseId, id) : id);\n      var refVal = self2._refs[id];\n      if (typeof refVal == \"string\")\n        refVal = self2._refs[refVal];\n      if (refVal && refVal.schema) {\n        if (!equal$1(sch, refVal.schema))\n          throw new Error('id \"' + id + '\" resolves to more than one schema');\n      } else if (id != normalizeId(fullPath)) {\n        if (id[0] == \"#\") {\n          if (localRefs[id] && !equal$1(sch, localRefs[id]))\n            throw new Error('id \"' + id + '\" resolves to more than one schema');\n          localRefs[id] = sch;\n        } else {\n          self2._refs[id] = fullPath;\n        }\n      }\n    }\n    baseIds[jsonPtr] = baseId;\n    fullPaths[jsonPtr] = fullPath;\n  });\n  return localRefs;\n}\nvar resolve$2 = resolve_1;\nvar error_classes = {\n  Validation: errorSubclass(ValidationError$1),\n  MissingRef: errorSubclass(MissingRefError$1)\n};\nfunction ValidationError$1(errors) {\n  this.message = \"validation failed\";\n  this.errors = errors;\n  this.ajv = this.validation = true;\n}\nMissingRefError$1.message = function(baseId, ref2) {\n  return \"can't resolve reference \" + ref2 + \" from id \" + baseId;\n};\nfunction MissingRefError$1(baseId, ref2, message) {\n  this.message = message || MissingRefError$1.message(baseId, ref2);\n  this.missingRef = resolve$2.url(baseId, ref2);\n  this.missingSchema = resolve$2.normalizeId(resolve$2.fullPath(this.missingRef));\n}\nfunction errorSubclass(Subclass) {\n  Subclass.prototype = Object.create(Error.prototype);\n  Subclass.prototype.constructor = Subclass;\n  return Subclass;\n}\nvar fastJsonStableStringify = function(data2, opts) {\n  if (!opts)\n    opts = {};\n  if (typeof opts === \"function\")\n    opts = { cmp: opts };\n  var cycles = typeof opts.cycles === \"boolean\" ? opts.cycles : false;\n  var cmp = opts.cmp && function(f2) {\n    return function(node) {\n      return function(a, b) {\n        var aobj = { key: a, value: node[a] };\n        var bobj = { key: b, value: node[b] };\n        return f2(aobj, bobj);\n      };\n    };\n  }(opts.cmp);\n  var seen = [];\n  return function stringify2(node) {\n    if (node && node.toJSON && typeof node.toJSON === \"function\") {\n      node = node.toJSON();\n    }\n    if (node === void 0)\n      return;\n    if (typeof node == \"number\")\n      return isFinite(node) ? \"\" + node : \"null\";\n    if (typeof node !== \"object\")\n      return JSON.stringify(node);\n    var i, out;\n    if (Array.isArray(node)) {\n      out = \"[\";\n      for (i = 0; i < node.length; i++) {\n        if (i)\n          out += \",\";\n        out += stringify2(node[i]) || \"null\";\n      }\n      return out + \"]\";\n    }\n    if (node === null)\n      return \"null\";\n    if (seen.indexOf(node) !== -1) {\n      if (cycles)\n        return JSON.stringify(\"__cycle__\");\n      throw new TypeError(\"Converting circular structure to JSON\");\n    }\n    var seenIndex = seen.push(node) - 1;\n    var keys = Object.keys(node).sort(cmp && cmp(node));\n    out = \"\";\n    for (i = 0; i < keys.length; i++) {\n      var key = keys[i];\n      var value = stringify2(node[key]);\n      if (!value)\n        continue;\n      if (out)\n        out += \",\";\n      out += JSON.stringify(key) + \":\" + value;\n    }\n    seen.splice(seenIndex, 1);\n    return \"{\" + out + \"}\";\n  }(data2);\n};\nvar validate$1 = function generate_validate(it, $keyword, $ruleType) {\n  var out = \"\";\n  var $async = it.schema.$async === true, $refKeywords = it.util.schemaHasRulesExcept(it.schema, it.RULES.all, \"$ref\"), $id2 = it.self._getId(it.schema);\n  if (it.opts.strictKeywords) {\n    var $unknownKwd = it.util.schemaUnknownRules(it.schema, it.RULES.keywords);\n    if ($unknownKwd) {\n      var $keywordsMsg = \"unknown keyword: \" + $unknownKwd;\n      if (it.opts.strictKeywords === \"log\")\n        it.logger.warn($keywordsMsg);\n      else\n        throw new Error($keywordsMsg);\n    }\n  }\n  if (it.isTop) {\n    out += \" var validate = \";\n    if ($async) {\n      it.async = true;\n      out += \"async \";\n    }\n    out += \"function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; \";\n    if ($id2 && (it.opts.sourceCode || it.opts.processCode)) {\n      out += \" \" + (\"/*# sourceURL=\" + $id2 + \" */\") + \" \";\n    }\n  }\n  if (typeof it.schema == \"boolean\" || !($refKeywords || it.schema.$ref)) {\n    var $keyword = \"false schema\";\n    var $lvl = it.level;\n    var $dataLvl = it.dataLevel;\n    var $schema2 = it.schema[$keyword];\n    var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n    var $errSchemaPath = it.errSchemaPath + \"/\" + $keyword;\n    var $breakOnError = !it.opts.allErrors;\n    var $errorKeyword;\n    var $data = \"data\" + ($dataLvl || \"\");\n    var $valid = \"valid\" + $lvl;\n    if (it.schema === false) {\n      if (it.isTop) {\n        $breakOnError = true;\n      } else {\n        out += \" var \" + $valid + \" = false; \";\n      }\n      var $$outStack = $$outStack || [];\n      $$outStack.push(out);\n      out = \"\";\n      if (it.createErrors !== false) {\n        out += \" { keyword: '\" + ($errorKeyword || \"false schema\") + \"' , dataPath: (dataPath || '') + \" + it.errorPath + \" , schemaPath: \" + it.util.toQuotedString($errSchemaPath) + \" , params: {} \";\n        if (it.opts.messages !== false) {\n          out += \" , message: 'boolean schema is false' \";\n        }\n        if (it.opts.verbose) {\n          out += \" , schema: false , parentSchema: validate.schema\" + it.schemaPath + \" , data: \" + $data + \" \";\n        }\n        out += \" } \";\n      } else {\n        out += \" {} \";\n      }\n      var __err = out;\n      out = $$outStack.pop();\n      if (!it.compositeRule && $breakOnError) {\n        if (it.async) {\n          out += \" throw new ValidationError([\" + __err + \"]); \";\n        } else {\n          out += \" validate.errors = [\" + __err + \"]; return false; \";\n        }\n      } else {\n        out += \" var err = \" + __err + \";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \";\n      }\n    } else {\n      if (it.isTop) {\n        if ($async) {\n          out += \" return data; \";\n        } else {\n          out += \" validate.errors = null; return true; \";\n        }\n      } else {\n        out += \" var \" + $valid + \" = true; \";\n      }\n    }\n    if (it.isTop) {\n      out += \" }; return validate; \";\n    }\n    return out;\n  }\n  if (it.isTop) {\n    var $top = it.isTop, $lvl = it.level = 0, $dataLvl = it.dataLevel = 0, $data = \"data\";\n    it.rootId = it.resolve.fullPath(it.self._getId(it.root.schema));\n    it.baseId = it.baseId || it.rootId;\n    delete it.isTop;\n    it.dataPathArr = [\"\"];\n    if (it.schema.default !== void 0 && it.opts.useDefaults && it.opts.strictDefaults) {\n      var $defaultMsg = \"default is ignored in the schema root\";\n      if (it.opts.strictDefaults === \"log\")\n        it.logger.warn($defaultMsg);\n      else\n        throw new Error($defaultMsg);\n    }\n    out += \" var vErrors = null; \";\n    out += \" var errors = 0;     \";\n    out += \" if (rootData === undefined) rootData = data; \";\n  } else {\n    var $lvl = it.level, $dataLvl = it.dataLevel, $data = \"data\" + ($dataLvl || \"\");\n    if ($id2)\n      it.baseId = it.resolve.url(it.baseId, $id2);\n    if ($async && !it.async)\n      throw new Error(\"async schema in sync schema\");\n    out += \" var errs_\" + $lvl + \" = errors;\";\n  }\n  var $valid = \"valid\" + $lvl, $breakOnError = !it.opts.allErrors, $closingBraces1 = \"\", $closingBraces2 = \"\";\n  var $errorKeyword;\n  var $typeSchema = it.schema.type, $typeIsArray = Array.isArray($typeSchema);\n  if ($typeSchema && it.opts.nullable && it.schema.nullable === true) {\n    if ($typeIsArray) {\n      if ($typeSchema.indexOf(\"null\") == -1)\n        $typeSchema = $typeSchema.concat(\"null\");\n    } else if ($typeSchema != \"null\") {\n      $typeSchema = [$typeSchema, \"null\"];\n      $typeIsArray = true;\n    }\n  }\n  if ($typeIsArray && $typeSchema.length == 1) {\n    $typeSchema = $typeSchema[0];\n    $typeIsArray = false;\n  }\n  if (it.schema.$ref && $refKeywords) {\n    if (it.opts.extendRefs == \"fail\") {\n      throw new Error('$ref: validation keywords used in schema at path \"' + it.errSchemaPath + '\" (see option extendRefs)');\n    } else if (it.opts.extendRefs !== true) {\n      $refKeywords = false;\n      it.logger.warn('$ref: keywords ignored in schema at path \"' + it.errSchemaPath + '\"');\n    }\n  }\n  if (it.schema.$comment && it.opts.$comment) {\n    out += \" \" + it.RULES.all.$comment.code(it, \"$comment\");\n  }\n  if ($typeSchema) {\n    if (it.opts.coerceTypes) {\n      var $coerceToTypes = it.util.coerceToTypes(it.opts.coerceTypes, $typeSchema);\n    }\n    var $rulesGroup = it.RULES.types[$typeSchema];\n    if ($coerceToTypes || $typeIsArray || $rulesGroup === true || $rulesGroup && !$shouldUseGroup($rulesGroup)) {\n      var $schemaPath = it.schemaPath + \".type\", $errSchemaPath = it.errSchemaPath + \"/type\";\n      var $schemaPath = it.schemaPath + \".type\", $errSchemaPath = it.errSchemaPath + \"/type\", $method = $typeIsArray ? \"checkDataTypes\" : \"checkDataType\";\n      out += \" if (\" + it.util[$method]($typeSchema, $data, it.opts.strictNumbers, true) + \") { \";\n      if ($coerceToTypes) {\n        var $dataType = \"dataType\" + $lvl, $coerced = \"coerced\" + $lvl;\n        out += \" var \" + $dataType + \" = typeof \" + $data + \"; var \" + $coerced + \" = undefined; \";\n        if (it.opts.coerceTypes == \"array\") {\n          out += \" if (\" + $dataType + \" == 'object' && Array.isArray(\" + $data + \") && \" + $data + \".length == 1) { \" + $data + \" = \" + $data + \"[0]; \" + $dataType + \" = typeof \" + $data + \"; if (\" + it.util.checkDataType(it.schema.type, $data, it.opts.strictNumbers) + \") \" + $coerced + \" = \" + $data + \"; } \";\n        }\n        out += \" if (\" + $coerced + \" !== undefined) ; \";\n        var arr1 = $coerceToTypes;\n        if (arr1) {\n          var $type, $i = -1, l1 = arr1.length - 1;\n          while ($i < l1) {\n            $type = arr1[$i += 1];\n            if ($type == \"string\") {\n              out += \" else if (\" + $dataType + \" == 'number' || \" + $dataType + \" == 'boolean') \" + $coerced + \" = '' + \" + $data + \"; else if (\" + $data + \" === null) \" + $coerced + \" = ''; \";\n            } else if ($type == \"number\" || $type == \"integer\") {\n              out += \" else if (\" + $dataType + \" == 'boolean' || \" + $data + \" === null || (\" + $dataType + \" == 'string' && \" + $data + \" && \" + $data + \" == +\" + $data + \" \";\n              if ($type == \"integer\") {\n                out += \" && !(\" + $data + \" % 1)\";\n              }\n              out += \")) \" + $coerced + \" = +\" + $data + \"; \";\n            } else if ($type == \"boolean\") {\n              out += \" else if (\" + $data + \" === 'false' || \" + $data + \" === 0 || \" + $data + \" === null) \" + $coerced + \" = false; else if (\" + $data + \" === 'true' || \" + $data + \" === 1) \" + $coerced + \" = true; \";\n            } else if ($type == \"null\") {\n              out += \" else if (\" + $data + \" === '' || \" + $data + \" === 0 || \" + $data + \" === false) \" + $coerced + \" = null; \";\n            } else if (it.opts.coerceTypes == \"array\" && $type == \"array\") {\n              out += \" else if (\" + $dataType + \" == 'string' || \" + $dataType + \" == 'number' || \" + $dataType + \" == 'boolean' || \" + $data + \" == null) \" + $coerced + \" = [\" + $data + \"]; \";\n            }\n          }\n        }\n        out += \" else {   \";\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = \"\";\n        if (it.createErrors !== false) {\n          out += \" { keyword: '\" + ($errorKeyword || \"type\") + \"' , dataPath: (dataPath || '') + \" + it.errorPath + \" , schemaPath: \" + it.util.toQuotedString($errSchemaPath) + \" , params: { type: '\";\n          if ($typeIsArray) {\n            out += \"\" + $typeSchema.join(\",\");\n          } else {\n            out += \"\" + $typeSchema;\n          }\n          out += \"' } \";\n          if (it.opts.messages !== false) {\n            out += \" , message: 'should be \";\n            if ($typeIsArray) {\n              out += \"\" + $typeSchema.join(\",\");\n            } else {\n              out += \"\" + $typeSchema;\n            }\n            out += \"' \";\n          }\n          if (it.opts.verbose) {\n            out += \" , schema: validate.schema\" + $schemaPath + \" , parentSchema: validate.schema\" + it.schemaPath + \" , data: \" + $data + \" \";\n          }\n          out += \" } \";\n        } else {\n          out += \" {} \";\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) {\n          if (it.async) {\n            out += \" throw new ValidationError([\" + __err + \"]); \";\n          } else {\n            out += \" validate.errors = [\" + __err + \"]; return false; \";\n          }\n        } else {\n          out += \" var err = \" + __err + \";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \";\n        }\n        out += \" } if (\" + $coerced + \" !== undefined) {  \";\n        var $parentData = $dataLvl ? \"data\" + ($dataLvl - 1 || \"\") : \"parentData\", $parentDataProperty = $dataLvl ? it.dataPathArr[$dataLvl] : \"parentDataProperty\";\n        out += \" \" + $data + \" = \" + $coerced + \"; \";\n        if (!$dataLvl) {\n          out += \"if (\" + $parentData + \" !== undefined)\";\n        }\n        out += \" \" + $parentData + \"[\" + $parentDataProperty + \"] = \" + $coerced + \"; } \";\n      } else {\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = \"\";\n        if (it.createErrors !== false) {\n          out += \" { keyword: '\" + ($errorKeyword || \"type\") + \"' , dataPath: (dataPath || '') + \" + it.errorPath + \" , schemaPath: \" + it.util.toQuotedString($errSchemaPath) + \" , params: { type: '\";\n          if ($typeIsArray) {\n            out += \"\" + $typeSchema.join(\",\");\n          } else {\n            out += \"\" + $typeSchema;\n          }\n          out += \"' } \";\n          if (it.opts.messages !== false) {\n            out += \" , message: 'should be \";\n            if ($typeIsArray) {\n              out += \"\" + $typeSchema.join(\",\");\n            } else {\n              out += \"\" + $typeSchema;\n            }\n            out += \"' \";\n          }\n          if (it.opts.verbose) {\n            out += \" , schema: validate.schema\" + $schemaPath + \" , parentSchema: validate.schema\" + it.schemaPath + \" , data: \" + $data + \" \";\n          }\n          out += \" } \";\n        } else {\n          out += \" {} \";\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) {\n          if (it.async) {\n            out += \" throw new ValidationError([\" + __err + \"]); \";\n          } else {\n            out += \" validate.errors = [\" + __err + \"]; return false; \";\n          }\n        } else {\n          out += \" var err = \" + __err + \";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \";\n        }\n      }\n      out += \" } \";\n    }\n  }\n  if (it.schema.$ref && !$refKeywords) {\n    out += \" \" + it.RULES.all.$ref.code(it, \"$ref\") + \" \";\n    if ($breakOnError) {\n      out += \" } if (errors === \";\n      if ($top) {\n        out += \"0\";\n      } else {\n        out += \"errs_\" + $lvl;\n      }\n      out += \") { \";\n      $closingBraces2 += \"}\";\n    }\n  } else {\n    var arr2 = it.RULES;\n    if (arr2) {\n      var $rulesGroup, i2 = -1, l2 = arr2.length - 1;\n      while (i2 < l2) {\n        $rulesGroup = arr2[i2 += 1];\n        if ($shouldUseGroup($rulesGroup)) {\n          if ($rulesGroup.type) {\n            out += \" if (\" + it.util.checkDataType($rulesGroup.type, $data, it.opts.strictNumbers) + \") { \";\n          }\n          if (it.opts.useDefaults) {\n            if ($rulesGroup.type == \"object\" && it.schema.properties) {\n              var $schema2 = it.schema.properties, $schemaKeys = Object.keys($schema2);\n              var arr3 = $schemaKeys;\n              if (arr3) {\n                var $propertyKey, i3 = -1, l3 = arr3.length - 1;\n                while (i3 < l3) {\n                  $propertyKey = arr3[i3 += 1];\n                  var $sch = $schema2[$propertyKey];\n                  if ($sch.default !== void 0) {\n                    var $passData = $data + it.util.getProperty($propertyKey);\n                    if (it.compositeRule) {\n                      if (it.opts.strictDefaults) {\n                        var $defaultMsg = \"default is ignored for: \" + $passData;\n                        if (it.opts.strictDefaults === \"log\")\n                          it.logger.warn($defaultMsg);\n                        else\n                          throw new Error($defaultMsg);\n                      }\n                    } else {\n                      out += \" if (\" + $passData + \" === undefined \";\n                      if (it.opts.useDefaults == \"empty\") {\n                        out += \" || \" + $passData + \" === null || \" + $passData + \" === '' \";\n                      }\n                      out += \" ) \" + $passData + \" = \";\n                      if (it.opts.useDefaults == \"shared\") {\n                        out += \" \" + it.useDefault($sch.default) + \" \";\n                      } else {\n                        out += \" \" + JSON.stringify($sch.default) + \" \";\n                      }\n                      out += \"; \";\n                    }\n                  }\n                }\n              }\n            } else if ($rulesGroup.type == \"array\" && Array.isArray(it.schema.items)) {\n              var arr4 = it.schema.items;\n              if (arr4) {\n                var $sch, $i = -1, l4 = arr4.length - 1;\n                while ($i < l4) {\n                  $sch = arr4[$i += 1];\n                  if ($sch.default !== void 0) {\n                    var $passData = $data + \"[\" + $i + \"]\";\n                    if (it.compositeRule) {\n                      if (it.opts.strictDefaults) {\n                        var $defaultMsg = \"default is ignored for: \" + $passData;\n                        if (it.opts.strictDefaults === \"log\")\n                          it.logger.warn($defaultMsg);\n                        else\n                          throw new Error($defaultMsg);\n                      }\n                    } else {\n                      out += \" if (\" + $passData + \" === undefined \";\n                      if (it.opts.useDefaults == \"empty\") {\n                        out += \" || \" + $passData + \" === null || \" + $passData + \" === '' \";\n                      }\n                      out += \" ) \" + $passData + \" = \";\n                      if (it.opts.useDefaults == \"shared\") {\n                        out += \" \" + it.useDefault($sch.default) + \" \";\n                      } else {\n                        out += \" \" + JSON.stringify($sch.default) + \" \";\n                      }\n                      out += \"; \";\n                    }\n                  }\n                }\n              }\n            }\n          }\n          var arr5 = $rulesGroup.rules;\n          if (arr5) {\n            var $rule, i5 = -1, l5 = arr5.length - 1;\n            while (i5 < l5) {\n              $rule = arr5[i5 += 1];\n              if ($shouldUseRule($rule)) {\n                var $code = $rule.code(it, $rule.keyword, $rulesGroup.type);\n                if ($code) {\n                  out += \" \" + $code + \" \";\n                  if ($breakOnError) {\n                    $closingBraces1 += \"}\";\n                  }\n                }\n              }\n            }\n          }\n          if ($breakOnError) {\n            out += \" \" + $closingBraces1 + \" \";\n            $closingBraces1 = \"\";\n          }\n          if ($rulesGroup.type) {\n            out += \" } \";\n            if ($typeSchema && $typeSchema === $rulesGroup.type && !$coerceToTypes) {\n              out += \" else { \";\n              var $schemaPath = it.schemaPath + \".type\", $errSchemaPath = it.errSchemaPath + \"/type\";\n              var $$outStack = $$outStack || [];\n              $$outStack.push(out);\n              out = \"\";\n              if (it.createErrors !== false) {\n                out += \" { keyword: '\" + ($errorKeyword || \"type\") + \"' , dataPath: (dataPath || '') + \" + it.errorPath + \" , schemaPath: \" + it.util.toQuotedString($errSchemaPath) + \" , params: { type: '\";\n                if ($typeIsArray) {\n                  out += \"\" + $typeSchema.join(\",\");\n                } else {\n                  out += \"\" + $typeSchema;\n                }\n                out += \"' } \";\n                if (it.opts.messages !== false) {\n                  out += \" , message: 'should be \";\n                  if ($typeIsArray) {\n                    out += \"\" + $typeSchema.join(\",\");\n                  } else {\n                    out += \"\" + $typeSchema;\n                  }\n                  out += \"' \";\n                }\n                if (it.opts.verbose) {\n                  out += \" , schema: validate.schema\" + $schemaPath + \" , parentSchema: validate.schema\" + it.schemaPath + \" , data: \" + $data + \" \";\n                }\n                out += \" } \";\n              } else {\n                out += \" {} \";\n              }\n              var __err = out;\n              out = $$outStack.pop();\n              if (!it.compositeRule && $breakOnError) {\n                if (it.async) {\n                  out += \" throw new ValidationError([\" + __err + \"]); \";\n                } else {\n                  out += \" validate.errors = [\" + __err + \"]; return false; \";\n                }\n              } else {\n                out += \" var err = \" + __err + \";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \";\n              }\n              out += \" } \";\n            }\n          }\n          if ($breakOnError) {\n            out += \" if (errors === \";\n            if ($top) {\n              out += \"0\";\n            } else {\n              out += \"errs_\" + $lvl;\n            }\n            out += \") { \";\n            $closingBraces2 += \"}\";\n          }\n        }\n      }\n    }\n  }\n  if ($breakOnError) {\n    out += \" \" + $closingBraces2 + \" \";\n  }\n  if ($top) {\n    if ($async) {\n      out += \" if (errors === 0) return data;           \";\n      out += \" else throw new ValidationError(vErrors); \";\n    } else {\n      out += \" validate.errors = vErrors; \";\n      out += \" return errors === 0;       \";\n    }\n    out += \" }; return validate;\";\n  } else {\n    out += \" var \" + $valid + \" = errors === errs_\" + $lvl + \";\";\n  }\n  function $shouldUseGroup($rulesGroup2) {\n    var rules3 = $rulesGroup2.rules;\n    for (var i = 0; i < rules3.length; i++)\n      if ($shouldUseRule(rules3[i]))\n        return true;\n  }\n  function $shouldUseRule($rule2) {\n    return it.schema[$rule2.keyword] !== void 0 || $rule2.implements && $ruleImplementsSomeKeyword($rule2);\n  }\n  function $ruleImplementsSomeKeyword($rule2) {\n    var impl = $rule2.implements;\n    for (var i = 0; i < impl.length; i++)\n      if (it.schema[impl[i]] !== void 0)\n        return true;\n  }\n  return out;\n};\nvar resolve$1 = resolve_1, util$2 = util$5, errorClasses$1 = error_classes, stableStringify$1 = fastJsonStableStringify;\nvar validateGenerator = validate$1;\nvar ucs2length2 = util$2.ucs2length;\nvar equal2 = fastDeepEqual;\nvar ValidationError = errorClasses$1.Validation;\nvar compile_1 = compile$2;\nfunction compile$2(schema, root, localRefs, baseId) {\n  var self2 = this, opts = this._opts, refVal = [void 0], refs = {}, patterns = [], patternsHash = {}, defaults = [], defaultsHash = {}, customRules = [];\n  root = root || { schema, refVal, refs };\n  var c = checkCompiling.call(this, schema, root, baseId);\n  var compilation = this._compilations[c.index];\n  if (c.compiling)\n    return compilation.callValidate = callValidate;\n  var formats2 = this._formats;\n  var RULES = this.RULES;\n  try {\n    var v = localCompile(schema, root, localRefs, baseId);\n    compilation.validate = v;\n    var cv = compilation.callValidate;\n    if (cv) {\n      cv.schema = v.schema;\n      cv.errors = null;\n      cv.refs = v.refs;\n      cv.refVal = v.refVal;\n      cv.root = v.root;\n      cv.$async = v.$async;\n      if (opts.sourceCode)\n        cv.source = v.source;\n    }\n    return v;\n  } finally {\n    endCompiling.call(this, schema, root, baseId);\n  }\n  function callValidate() {\n    var validate2 = compilation.validate;\n    var result = validate2.apply(this, arguments);\n    callValidate.errors = validate2.errors;\n    return result;\n  }\n  function localCompile(_schema, _root, localRefs2, baseId2) {\n    var isRoot = !_root || _root && _root.schema == _schema;\n    if (_root.schema != root.schema)\n      return compile$2.call(self2, _schema, _root, localRefs2, baseId2);\n    var $async = _schema.$async === true;\n    var sourceCode = validateGenerator({\n      isTop: true,\n      schema: _schema,\n      isRoot,\n      baseId: baseId2,\n      root: _root,\n      schemaPath: \"\",\n      errSchemaPath: \"#\",\n      errorPath: '\"\"',\n      MissingRefError: errorClasses$1.MissingRef,\n      RULES,\n      validate: validateGenerator,\n      util: util$2,\n      resolve: resolve$1,\n      resolveRef,\n      usePattern,\n      useDefault,\n      useCustomRule,\n      opts,\n      formats: formats2,\n      logger: self2.logger,\n      self: self2\n    });\n    sourceCode = vars(refVal, refValCode) + vars(patterns, patternCode) + vars(defaults, defaultCode) + vars(customRules, customRuleCode$1) + sourceCode;\n    if (opts.processCode)\n      sourceCode = opts.processCode(sourceCode, _schema);\n    var validate2;\n    try {\n      var makeValidate = new Function(\"self\", \"RULES\", \"formats\", \"root\", \"refVal\", \"defaults\", \"customRules\", \"equal\", \"ucs2length\", \"ValidationError\", sourceCode);\n      validate2 = makeValidate(self2, RULES, formats2, root, refVal, defaults, customRules, equal2, ucs2length2, ValidationError);\n      refVal[0] = validate2;\n    } catch (e) {\n      self2.logger.error(\"Error compiling schema, function code:\", sourceCode);\n      throw e;\n    }\n    validate2.schema = _schema;\n    validate2.errors = null;\n    validate2.refs = refs;\n    validate2.refVal = refVal;\n    validate2.root = isRoot ? validate2 : _root;\n    if ($async)\n      validate2.$async = true;\n    if (opts.sourceCode === true) {\n      validate2.source = {\n        code: sourceCode,\n        patterns,\n        defaults\n      };\n    }\n    return validate2;\n  }\n  function resolveRef(baseId2, ref2, isRoot) {\n    ref2 = resolve$1.url(baseId2, ref2);\n    var refIndex = refs[ref2];\n    var _refVal, refCode;\n    if (refIndex !== void 0) {\n      _refVal = refVal[refIndex];\n      refCode = \"refVal[\" + refIndex + \"]\";\n      return resolvedRef(_refVal, refCode);\n    }\n    if (!isRoot && root.refs) {\n      var rootRefId = root.refs[ref2];\n      if (rootRefId !== void 0) {\n        _refVal = root.refVal[rootRefId];\n        refCode = addLocalRef(ref2, _refVal);\n        return resolvedRef(_refVal, refCode);\n      }\n    }\n    refCode = addLocalRef(ref2);\n    var v2 = resolve$1.call(self2, localCompile, root, ref2);\n    if (v2 === void 0) {\n      var localSchema = localRefs && localRefs[ref2];\n      if (localSchema) {\n        v2 = resolve$1.inlineRef(localSchema, opts.inlineRefs) ? localSchema : compile$2.call(self2, localSchema, root, localRefs, baseId2);\n      }\n    }\n    if (v2 === void 0) {\n      removeLocalRef(ref2);\n    } else {\n      replaceLocalRef(ref2, v2);\n      return resolvedRef(v2, refCode);\n    }\n  }\n  function addLocalRef(ref2, v2) {\n    var refId = refVal.length;\n    refVal[refId] = v2;\n    refs[ref2] = refId;\n    return \"refVal\" + refId;\n  }\n  function removeLocalRef(ref2) {\n    delete refs[ref2];\n  }\n  function replaceLocalRef(ref2, v2) {\n    var refId = refs[ref2];\n    refVal[refId] = v2;\n  }\n  function resolvedRef(refVal2, code) {\n    return typeof refVal2 == \"object\" || typeof refVal2 == \"boolean\" ? { code, schema: refVal2, inline: true } : { code, $async: refVal2 && !!refVal2.$async };\n  }\n  function usePattern(regexStr) {\n    var index = patternsHash[regexStr];\n    if (index === void 0) {\n      index = patternsHash[regexStr] = patterns.length;\n      patterns[index] = regexStr;\n    }\n    return \"pattern\" + index;\n  }\n  function useDefault(value) {\n    switch (typeof value) {\n      case \"boolean\":\n      case \"number\":\n        return \"\" + value;\n      case \"string\":\n        return util$2.toQuotedString(value);\n      case \"object\":\n        if (value === null)\n          return \"null\";\n        var valueStr = stableStringify$1(value);\n        var index = defaultsHash[valueStr];\n        if (index === void 0) {\n          index = defaultsHash[valueStr] = defaults.length;\n          defaults[index] = value;\n        }\n        return \"default\" + index;\n    }\n  }\n  function useCustomRule(rule, schema2, parentSchema, it) {\n    if (self2._opts.validateSchema !== false) {\n      var deps = rule.definition.dependencies;\n      if (deps && !deps.every(function(keyword2) {\n        return Object.prototype.hasOwnProperty.call(parentSchema, keyword2);\n      }))\n        throw new Error(\"parent schema must have all required keywords: \" + deps.join(\",\"));\n      var validateSchema2 = rule.definition.validateSchema;\n      if (validateSchema2) {\n        var valid = validateSchema2(schema2);\n        if (!valid) {\n          var message = \"keyword schema is invalid: \" + self2.errorsText(validateSchema2.errors);\n          if (self2._opts.validateSchema == \"log\")\n            self2.logger.error(message);\n          else\n            throw new Error(message);\n        }\n      }\n    }\n    var compile2 = rule.definition.compile, inline = rule.definition.inline, macro = rule.definition.macro;\n    var validate2;\n    if (compile2) {\n      validate2 = compile2.call(self2, schema2, parentSchema, it);\n    } else if (macro) {\n      validate2 = macro.call(self2, schema2, parentSchema, it);\n      if (opts.validateSchema !== false)\n        self2.validateSchema(validate2, true);\n    } else if (inline) {\n      validate2 = inline.call(self2, it, rule.keyword, schema2, parentSchema);\n    } else {\n      validate2 = rule.definition.validate;\n      if (!validate2)\n        return;\n    }\n    if (validate2 === void 0)\n      throw new Error('custom keyword \"' + rule.keyword + '\"failed to compile');\n    var index = customRules.length;\n    customRules[index] = validate2;\n    return {\n      code: \"customRule\" + index,\n      validate: validate2\n    };\n  }\n}\nfunction checkCompiling(schema, root, baseId) {\n  var index = compIndex.call(this, schema, root, baseId);\n  if (index >= 0)\n    return { index, compiling: true };\n  index = this._compilations.length;\n  this._compilations[index] = {\n    schema,\n    root,\n    baseId\n  };\n  return { index, compiling: false };\n}\nfunction endCompiling(schema, root, baseId) {\n  var i = compIndex.call(this, schema, root, baseId);\n  if (i >= 0)\n    this._compilations.splice(i, 1);\n}\nfunction compIndex(schema, root, baseId) {\n  for (var i = 0; i < this._compilations.length; i++) {\n    var c = this._compilations[i];\n    if (c.schema == schema && c.root == root && c.baseId == baseId)\n      return i;\n  }\n  return -1;\n}\nfunction patternCode(i, patterns) {\n  return \"var pattern\" + i + \" = new RegExp(\" + util$2.toQuotedString(patterns[i]) + \");\";\n}\nfunction defaultCode(i) {\n  return \"var default\" + i + \" = defaults[\" + i + \"];\";\n}\nfunction refValCode(i, refVal) {\n  return refVal[i] === void 0 ? \"\" : \"var refVal\" + i + \" = refVal[\" + i + \"];\";\n}\nfunction customRuleCode$1(i) {\n  return \"var customRule\" + i + \" = customRules[\" + i + \"];\";\n}\nfunction vars(arr, statement) {\n  if (!arr.length)\n    return \"\";\n  var code = \"\";\n  for (var i = 0; i < arr.length; i++)\n    code += statement(i, arr);\n  return code;\n}\nvar cache = { exports: {} };\nvar Cache$1 = cache.exports = function Cache() {\n  this._cache = {};\n};\nCache$1.prototype.put = function Cache_put(key, value) {\n  this._cache[key] = value;\n};\nCache$1.prototype.get = function Cache_get(key) {\n  return this._cache[key];\n};\nCache$1.prototype.del = function Cache_del(key) {\n  delete this._cache[key];\n};\nCache$1.prototype.clear = function Cache_clear() {\n  this._cache = {};\n};\nvar util$1 = util$5;\nvar DATE = /^(\\d\\d\\d\\d)-(\\d\\d)-(\\d\\d)$/;\nvar DAYS = [0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\nvar TIME = /^(\\d\\d):(\\d\\d):(\\d\\d)(\\.\\d+)?(z|[+-]\\d\\d(?::?\\d\\d)?)?$/i;\nvar HOSTNAME = /^(?=.{1,253}\\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\\.?$/i;\nvar URI = /^(?:[a-z][a-z0-9+\\-.]*:)(?:\\/?\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\\.[a-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)|(?:[a-z0-9\\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\\d*)?(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\\?(?:[a-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;\nvar URIREF = /^(?:[a-z][a-z0-9+\\-.]*:)?(?:\\/?\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\\.[a-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)|(?:[a-z0-9\\-._~!$&'\"()*+,;=]|%[0-9a-f]{2})*)(?::\\d*)?(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*|\\/(?:(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\\?(?:[a-z0-9\\-._~!$&'\"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\\-._~!$&'\"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;\nvar URITEMPLATE = /^(?:(?:[^\\x00-\\x20\"'<>%\\\\^`{|}]|%[0-9a-f]{2})|\\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\\*)?)*\\})*$/i;\nvar URL$1 = /^(?:(?:http[s\\u017F]?|ftp):\\/\\/)(?:(?:[\\0-\\x08\\x0E-\\x1F!-\\x9F\\xA1-\\u167F\\u1681-\\u1FFF\\u200B-\\u2027\\u202A-\\u202E\\u2030-\\u205E\\u2060-\\u2FFF\\u3001-\\uD7FF\\uE000-\\uFEFE\\uFF00-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+(?::(?:[\\0-\\x08\\x0E-\\x1F!-\\x9F\\xA1-\\u167F\\u1681-\\u1FFF\\u200B-\\u2027\\u202A-\\u202E\\u2030-\\u205E\\u2060-\\u2FFF\\u3001-\\uD7FF\\uE000-\\uFEFE\\uFF00-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])*)?@)?(?:(?!10(?:\\.[0-9]{1,3}){3})(?!127(?:\\.[0-9]{1,3}){3})(?!169\\.254(?:\\.[0-9]{1,3}){2})(?!192\\.168(?:\\.[0-9]{1,3}){2})(?!172\\.(?:1[6-9]|2[0-9]|3[01])(?:\\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+-)*(?:[0-9a-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+)(?:\\.(?:(?:[0-9a-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+-)*(?:[0-9a-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+)*(?:\\.(?:(?:[a-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\\/(?:[\\0-\\x08\\x0E-\\x1F!-\\x9F\\xA1-\\u167F\\u1681-\\u1FFF\\u200B-\\u2027\\u202A-\\u202E\\u2030-\\u205E\\u2060-\\u2FFF\\u3001-\\uD7FF\\uE000-\\uFEFE\\uFF00-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])*)?$/i;\nvar UUID = /^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i;\nvar JSON_POINTER = /^(?:\\/(?:[^~/]|~0|~1)*)*$/;\nvar JSON_POINTER_URI_FRAGMENT = /^#(?:\\/(?:[a-z0-9_\\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i;\nvar RELATIVE_JSON_POINTER = /^(?:0|[1-9][0-9]*)(?:#|(?:\\/(?:[^~/]|~0|~1)*)*)$/;\nvar formats_1 = formats$1;\nfunction formats$1(mode) {\n  mode = mode == \"full\" ? \"full\" : \"fast\";\n  return util$1.copy(formats$1[mode]);\n}\nformats$1.fast = {\n  date: /^\\d\\d\\d\\d-[0-1]\\d-[0-3]\\d$/,\n  time: /^(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)(?:\\.\\d+)?(?:z|[+-]\\d\\d(?::?\\d\\d)?)?$/i,\n  \"date-time\": /^\\d\\d\\d\\d-[0-1]\\d-[0-3]\\d[t\\s](?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)(?:\\.\\d+)?(?:z|[+-]\\d\\d(?::?\\d\\d)?)$/i,\n  uri: /^(?:[a-z][a-z0-9+\\-.]*:)(?:\\/?\\/)?[^\\s]*$/i,\n  \"uri-reference\": /^(?:(?:[a-z][a-z0-9+\\-.]*:)?\\/?\\/)?(?:[^\\\\\\s#][^\\s#]*)?(?:#[^\\\\\\s]*)?$/i,\n  \"uri-template\": URITEMPLATE,\n  url: URL$1,\n  email: /^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,\n  hostname: HOSTNAME,\n  ipv4: /^(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)$/,\n  ipv6: /^\\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(?:%.+)?\\s*$/i,\n  regex,\n  uuid: UUID,\n  \"json-pointer\": JSON_POINTER,\n  \"json-pointer-uri-fragment\": JSON_POINTER_URI_FRAGMENT,\n  \"relative-json-pointer\": RELATIVE_JSON_POINTER\n};\nformats$1.full = {\n  date,\n  time,\n  \"date-time\": date_time,\n  uri,\n  \"uri-reference\": URIREF,\n  \"uri-template\": URITEMPLATE,\n  url: URL$1,\n  email: /^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,\n  hostname: HOSTNAME,\n  ipv4: /^(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)$/,\n  ipv6: /^\\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(?:%.+)?\\s*$/i,\n  regex,\n  uuid: UUID,\n  \"json-pointer\": JSON_POINTER,\n  \"json-pointer-uri-fragment\": JSON_POINTER_URI_FRAGMENT,\n  \"relative-json-pointer\": RELATIVE_JSON_POINTER\n};\nfunction isLeapYear(year) {\n  return year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0);\n}\nfunction date(str) {\n  var matches = str.match(DATE);\n  if (!matches)\n    return false;\n  var year = +matches[1];\n  var month = +matches[2];\n  var day = +matches[3];\n  return month >= 1 && month <= 12 && day >= 1 && day <= (month == 2 && isLeapYear(year) ? 29 : DAYS[month]);\n}\nfunction time(str, full) {\n  var matches = str.match(TIME);\n  if (!matches)\n    return false;\n  var hour = matches[1];\n  var minute = matches[2];\n  var second = matches[3];\n  var timeZone = matches[5];\n  return (hour <= 23 && minute <= 59 && second <= 59 || hour == 23 && minute == 59 && second == 60) && (!full || timeZone);\n}\nvar DATE_TIME_SEPARATOR = /t|\\s/i;\nfunction date_time(str) {\n  var dateTime = str.split(DATE_TIME_SEPARATOR);\n  return dateTime.length == 2 && date(dateTime[0]) && time(dateTime[1], true);\n}\nvar NOT_URI_FRAGMENT = /\\/|:/;\nfunction uri(str) {\n  return NOT_URI_FRAGMENT.test(str) && URI.test(str);\n}\nvar Z_ANCHOR = /[^\\\\]\\\\Z/;\nfunction regex(str) {\n  if (Z_ANCHOR.test(str))\n    return false;\n  try {\n    new RegExp(str);\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nvar ref = function generate_ref(it, $keyword, $ruleType) {\n  var out = \" \";\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema2 = it.schema[$keyword];\n  var $errSchemaPath = it.errSchemaPath + \"/\" + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = \"data\" + ($dataLvl || \"\");\n  var $valid = \"valid\" + $lvl;\n  var $async, $refCode;\n  if ($schema2 == \"#\" || $schema2 == \"#/\") {\n    if (it.isRoot) {\n      $async = it.async;\n      $refCode = \"validate\";\n    } else {\n      $async = it.root.schema.$async === true;\n      $refCode = \"root.refVal[0]\";\n    }\n  } else {\n    var $refVal = it.resolveRef(it.baseId, $schema2, it.isRoot);\n    if ($refVal === void 0) {\n      var $message = it.MissingRefError.message(it.baseId, $schema2);\n      if (it.opts.missingRefs == \"fail\") {\n        it.logger.error($message);\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = \"\";\n        if (it.createErrors !== false) {\n          out += \" { keyword: '$ref' , dataPath: (dataPath || '') + \" + it.errorPath + \" , schemaPath: \" + it.util.toQuotedString($errSchemaPath) + \" , params: { ref: '\" + it.util.escapeQuotes($schema2) + \"' } \";\n          if (it.opts.messages !== false) {\n            out += \" , message: 'can\\\\'t resolve reference \" + it.util.escapeQuotes($schema2) + \"' \";\n          }\n          if (it.opts.verbose) {\n            out += \" , schema: \" + it.util.toQuotedString($schema2) + \" , parentSchema: validate.schema\" + it.schemaPath + \" , data: \" + $data + \" \";\n          }\n          out += \" } \";\n        } else {\n          out += \" {} \";\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) {\n          if (it.async) {\n            out += \" throw new ValidationError([\" + __err + \"]); \";\n          } else {\n            out += \" validate.errors = [\" + __err + \"]; return false; \";\n          }\n        } else {\n          out += \" var err = \" + __err + \";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \";\n        }\n        if ($breakOnError) {\n          out += \" if (false) { \";\n        }\n      } else if (it.opts.missingRefs == \"ignore\") {\n        it.logger.warn($message);\n        if ($breakOnError) {\n          out += \" if (true) { \";\n        }\n      } else {\n        throw new it.MissingRefError(it.baseId, $schema2, $message);\n      }\n    } else if ($refVal.inline) {\n      var $it = it.util.copy(it);\n      $it.level++;\n      var $nextValid = \"valid\" + $it.level;\n      $it.schema = $refVal.schema;\n      $it.schemaPath = \"\";\n      $it.errSchemaPath = $schema2;\n      var $code = it.validate($it).replace(/validate\\.schema/g, $refVal.code);\n      out += \" \" + $code + \" \";\n      if ($breakOnError) {\n        out += \" if (\" + $nextValid + \") { \";\n      }\n    } else {\n      $async = $refVal.$async === true || it.async && $refVal.$async !== false;\n      $refCode = $refVal.code;\n    }\n  }\n  if ($refCode) {\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = \"\";\n    if (it.opts.passContext) {\n      out += \" \" + $refCode + \".call(this, \";\n    } else {\n      out += \" \" + $refCode + \"( \";\n    }\n    out += \" \" + $data + \", (dataPath || '')\";\n    if (it.errorPath != '\"\"') {\n      out += \" + \" + it.errorPath;\n    }\n    var $parentData = $dataLvl ? \"data\" + ($dataLvl - 1 || \"\") : \"parentData\", $parentDataProperty = $dataLvl ? it.dataPathArr[$dataLvl] : \"parentDataProperty\";\n    out += \" , \" + $parentData + \" , \" + $parentDataProperty + \", rootData)  \";\n    var __callValidate = out;\n    out = $$outStack.pop();\n    if ($async) {\n      if (!it.async)\n        throw new Error(\"async schema referenced by sync schema\");\n      if ($breakOnError) {\n        out += \" var \" + $valid + \"; \";\n      }\n      out += \" try { await \" + __callValidate + \"; \";\n      if ($breakOnError) {\n        out += \" \" + $valid + \" = true; \";\n      }\n      out += \" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; \";\n      if ($breakOnError) {\n        out += \" \" + $valid + \" = false; \";\n      }\n      out += \" } \";\n      if ($breakOnError) {\n        out += \" if (\" + $valid + \") { \";\n      }\n    } else {\n      out += \" if (!\" + __callValidate + \") { if (vErrors === null) vErrors = \" + $refCode + \".errors; else vErrors = vErrors.concat(\" + $refCode + \".errors); errors = vErrors.length; } \";\n      if ($breakOnError) {\n        out += \" else { \";\n      }\n    }\n  }\n  return out;\n};\nvar allOf = function generate_allOf(it, $keyword, $ruleType) {\n  var out = \" \";\n  var $schema2 = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + \"/\" + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $it = it.util.copy(it);\n  var $closingBraces = \"\";\n  $it.level++;\n  var $nextValid = \"valid\" + $it.level;\n  var $currentBaseId = $it.baseId, $allSchemasEmpty = true;\n  var arr1 = $schema2;\n  if (arr1) {\n    var $sch, $i = -1, l1 = arr1.length - 1;\n    while ($i < l1) {\n      $sch = arr1[$i += 1];\n      if (it.opts.strictKeywords ? typeof $sch == \"object\" && Object.keys($sch).length > 0 || $sch === false : it.util.schemaHasRules($sch, it.RULES.all)) {\n        $allSchemasEmpty = false;\n        $it.schema = $sch;\n        $it.schemaPath = $schemaPath + \"[\" + $i + \"]\";\n        $it.errSchemaPath = $errSchemaPath + \"/\" + $i;\n        out += \"  \" + it.validate($it) + \" \";\n        $it.baseId = $currentBaseId;\n        if ($breakOnError) {\n          out += \" if (\" + $nextValid + \") { \";\n          $closingBraces += \"}\";\n        }\n      }\n    }\n  }\n  if ($breakOnError) {\n    if ($allSchemasEmpty) {\n      out += \" if (true) { \";\n    } else {\n      out += \" \" + $closingBraces.slice(0, -1) + \" \";\n    }\n  }\n  return out;\n};\nvar anyOf = function generate_anyOf(it, $keyword, $ruleType) {\n  var out = \" \";\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema2 = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + \"/\" + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = \"data\" + ($dataLvl || \"\");\n  var $valid = \"valid\" + $lvl;\n  var $errs = \"errs__\" + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = \"\";\n  $it.level++;\n  var $nextValid = \"valid\" + $it.level;\n  var $noEmptySchema = $schema2.every(function($sch2) {\n    return it.opts.strictKeywords ? typeof $sch2 == \"object\" && Object.keys($sch2).length > 0 || $sch2 === false : it.util.schemaHasRules($sch2, it.RULES.all);\n  });\n  if ($noEmptySchema) {\n    var $currentBaseId = $it.baseId;\n    out += \" var \" + $errs + \" = errors; var \" + $valid + \" = false;  \";\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    var arr1 = $schema2;\n    if (arr1) {\n      var $sch, $i = -1, l1 = arr1.length - 1;\n      while ($i < l1) {\n        $sch = arr1[$i += 1];\n        $it.schema = $sch;\n        $it.schemaPath = $schemaPath + \"[\" + $i + \"]\";\n        $it.errSchemaPath = $errSchemaPath + \"/\" + $i;\n        out += \"  \" + it.validate($it) + \" \";\n        $it.baseId = $currentBaseId;\n        out += \" \" + $valid + \" = \" + $valid + \" || \" + $nextValid + \"; if (!\" + $valid + \") { \";\n        $closingBraces += \"}\";\n      }\n    }\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    out += \" \" + $closingBraces + \" if (!\" + $valid + \") {   var err =   \";\n    if (it.createErrors !== false) {\n      out += \" { keyword: 'anyOf' , dataPath: (dataPath || '') + \" + it.errorPath + \" , schemaPath: \" + it.util.toQuotedString($errSchemaPath) + \" , params: {} \";\n      if (it.opts.messages !== false) {\n        out += \" , message: 'should match some schema in anyOf' \";\n      }\n      if (it.opts.verbose) {\n        out += \" , schema: validate.schema\" + $schemaPath + \" , parentSchema: validate.schema\" + it.schemaPath + \" , data: \" + $data + \" \";\n      }\n      out += \" } \";\n    } else {\n      out += \" {} \";\n    }\n    out += \";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \";\n    if (!it.compositeRule && $breakOnError) {\n      if (it.async) {\n        out += \" throw new ValidationError(vErrors); \";\n      } else {\n        out += \" validate.errors = vErrors; return false; \";\n      }\n    }\n    out += \" } else {  errors = \" + $errs + \"; if (vErrors !== null) { if (\" + $errs + \") vErrors.length = \" + $errs + \"; else vErrors = null; } \";\n    if (it.opts.allErrors) {\n      out += \" } \";\n    }\n  } else {\n    if ($breakOnError) {\n      out += \" if (true) { \";\n    }\n  }\n  return out;\n};\nvar comment = function generate_comment(it, $keyword, $ruleType) {\n  var out = \" \";\n  var $schema2 = it.schema[$keyword];\n  var $errSchemaPath = it.errSchemaPath + \"/\" + $keyword;\n  !it.opts.allErrors;\n  var $comment = it.util.toQuotedString($schema2);\n  if (it.opts.$comment === true) {\n    out += \" console.log(\" + $comment + \");\";\n  } else if (typeof it.opts.$comment == \"function\") {\n    out += \" self._opts.$comment(\" + $comment + \", \" + it.util.toQuotedString($errSchemaPath) + \", validate.root.schema);\";\n  }\n  return out;\n};\nvar _const = function generate_const(it, $keyword, $ruleType) {\n  var out = \" \";\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema2 = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + \"/\" + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = \"data\" + ($dataLvl || \"\");\n  var $valid = \"valid\" + $lvl;\n  var $isData = it.opts.$data && $schema2 && $schema2.$data;\n  if ($isData) {\n    out += \" var schema\" + $lvl + \" = \" + it.util.getData($schema2.$data, $dataLvl, it.dataPathArr) + \"; \";\n  }\n  if (!$isData) {\n    out += \" var schema\" + $lvl + \" = validate.schema\" + $schemaPath + \";\";\n  }\n  out += \"var \" + $valid + \" = equal(\" + $data + \", schema\" + $lvl + \"); if (!\" + $valid + \") {   \";\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = \"\";\n  if (it.createErrors !== false) {\n    out += \" { keyword: 'const' , dataPath: (dataPath || '') + \" + it.errorPath + \" , schemaPath: \" + it.util.toQuotedString($errSchemaPath) + \" , params: { allowedValue: schema\" + $lvl + \" } \";\n    if (it.opts.messages !== false) {\n      out += \" , message: 'should be equal to constant' \";\n    }\n    if (it.opts.verbose) {\n      out += \" , schema: validate.schema\" + $schemaPath + \" , parentSchema: validate.schema\" + it.schemaPath + \" , data: \" + $data + \" \";\n    }\n    out += \" } \";\n  } else {\n    out += \" {} \";\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    if (it.async) {\n      out += \" throw new ValidationError([\" + __err + \"]); \";\n    } else {\n      out += \" validate.errors = [\" + __err + \"]; return false; \";\n    }\n  } else {\n    out += \" var err = \" + __err + \";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \";\n  }\n  out += \" }\";\n  if ($breakOnError) {\n    out += \" else { \";\n  }\n  return out;\n};\nvar contains = function generate_contains(it, $keyword, $ruleType) {\n  var out = \" \";\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema2 = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + \"/\" + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = \"data\" + ($dataLvl || \"\");\n  var $valid = \"valid\" + $lvl;\n  var $errs = \"errs__\" + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = \"\";\n  $it.level++;\n  var $nextValid = \"valid\" + $it.level;\n  var $idx = \"i\" + $lvl, $dataNxt = $it.dataLevel = it.dataLevel + 1, $nextData = \"data\" + $dataNxt, $currentBaseId = it.baseId, $nonEmptySchema = it.opts.strictKeywords ? typeof $schema2 == \"object\" && Object.keys($schema2).length > 0 || $schema2 === false : it.util.schemaHasRules($schema2, it.RULES.all);\n  out += \"var \" + $errs + \" = errors;var \" + $valid + \";\";\n  if ($nonEmptySchema) {\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    $it.schema = $schema2;\n    $it.schemaPath = $schemaPath;\n    $it.errSchemaPath = $errSchemaPath;\n    out += \" var \" + $nextValid + \" = false; for (var \" + $idx + \" = 0; \" + $idx + \" < \" + $data + \".length; \" + $idx + \"++) { \";\n    $it.errorPath = it.util.getPathExpr(it.errorPath, $idx, it.opts.jsonPointers, true);\n    var $passData = $data + \"[\" + $idx + \"]\";\n    $it.dataPathArr[$dataNxt] = $idx;\n    var $code = it.validate($it);\n    $it.baseId = $currentBaseId;\n    if (it.util.varOccurences($code, $nextData) < 2) {\n      out += \" \" + it.util.varReplace($code, $nextData, $passData) + \" \";\n    } else {\n      out += \" var \" + $nextData + \" = \" + $passData + \"; \" + $code + \" \";\n    }\n    out += \" if (\" + $nextValid + \") break; }  \";\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    out += \" \" + $closingBraces + \" if (!\" + $nextValid + \") {\";\n  } else {\n    out += \" if (\" + $data + \".length == 0) {\";\n  }\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = \"\";\n  if (it.createErrors !== false) {\n    out += \" { keyword: 'contains' , dataPath: (dataPath || '') + \" + it.errorPath + \" , schemaPath: \" + it.util.toQuotedString($errSchemaPath) + \" , params: {} \";\n    if (it.opts.messages !== false) {\n      out += \" , message: 'should contain a valid item' \";\n    }\n    if (it.opts.verbose) {\n      out += \" , schema: validate.schema\" + $schemaPath + \" , parentSchema: validate.schema\" + it.schemaPath + \" , data: \" + $data + \" \";\n    }\n    out += \" } \";\n  } else {\n    out += \" {} \";\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    if (it.async) {\n      out += \" throw new ValidationError([\" + __err + \"]); \";\n    } else {\n      out += \" validate.errors = [\" + __err + \"]; return false; \";\n    }\n  } else {\n    out += \" var err = \" + __err + \";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \";\n  }\n  out += \" } else { \";\n  if ($nonEmptySchema) {\n    out += \"  errors = \" + $errs + \"; if (vErrors !== null) { if (\" + $errs + \") vErrors.length = \" + $errs + \"; else vErrors = null; } \";\n  }\n  if (it.opts.allErrors) {\n    out += \" } \";\n  }\n  return out;\n};\nvar dependencies = function generate_dependencies(it, $keyword, $ruleType) {\n  var out = \" \";\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema2 = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + \"/\" + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = \"data\" + ($dataLvl || \"\");\n  var $errs = \"errs__\" + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = \"\";\n  $it.level++;\n  var $nextValid = \"valid\" + $it.level;\n  var $schemaDeps = {}, $propertyDeps = {}, $ownProperties = it.opts.ownProperties;\n  for ($property in $schema2) {\n    if ($property == \"__proto__\")\n      continue;\n    var $sch = $schema2[$property];\n    var $deps = Array.isArray($sch) ? $propertyDeps : $schemaDeps;\n    $deps[$property] = $sch;\n  }\n  out += \"var \" + $errs + \" = errors;\";\n  var $currentErrorPath = it.errorPath;\n  out += \"var missing\" + $lvl + \";\";\n  for (var $property in $propertyDeps) {\n    $deps = $propertyDeps[$property];\n    if ($deps.length) {\n      out += \" if ( \" + $data + it.util.getProperty($property) + \" !== undefined \";\n      if ($ownProperties) {\n        out += \" && Object.prototype.hasOwnProperty.call(\" + $data + \", '\" + it.util.escapeQuotes($property) + \"') \";\n      }\n      if ($breakOnError) {\n        out += \" && ( \";\n        var arr1 = $deps;\n        if (arr1) {\n          var $propertyKey, $i = -1, l1 = arr1.length - 1;\n          while ($i < l1) {\n            $propertyKey = arr1[$i += 1];\n            if ($i) {\n              out += \" || \";\n            }\n            var $prop = it.util.getProperty($propertyKey), $useData = $data + $prop;\n            out += \" ( ( \" + $useData + \" === undefined \";\n            if ($ownProperties) {\n              out += \" || ! Object.prototype.hasOwnProperty.call(\" + $data + \", '\" + it.util.escapeQuotes($propertyKey) + \"') \";\n            }\n            out += \") && (missing\" + $lvl + \" = \" + it.util.toQuotedString(it.opts.jsonPointers ? $propertyKey : $prop) + \") ) \";\n          }\n        }\n        out += \")) {  \";\n        var $propertyPath = \"missing\" + $lvl, $missingProperty = \"' + \" + $propertyPath + \" + '\";\n        if (it.opts._errorDataPathProperty) {\n          it.errorPath = it.opts.jsonPointers ? it.util.getPathExpr($currentErrorPath, $propertyPath, true) : $currentErrorPath + \" + \" + $propertyPath;\n        }\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = \"\";\n        if (it.createErrors !== false) {\n          out += \" { keyword: 'dependencies' , dataPath: (dataPath || '') + \" + it.errorPath + \" , schemaPath: \" + it.util.toQuotedString($errSchemaPath) + \" , params: { property: '\" + it.util.escapeQuotes($property) + \"', missingProperty: '\" + $missingProperty + \"', depsCount: \" + $deps.length + \", deps: '\" + it.util.escapeQuotes($deps.length == 1 ? $deps[0] : $deps.join(\", \")) + \"' } \";\n          if (it.opts.messages !== false) {\n            out += \" , message: 'should have \";\n            if ($deps.length == 1) {\n              out += \"property \" + it.util.escapeQuotes($deps[0]);\n            } else {\n              out += \"properties \" + it.util.escapeQuotes($deps.join(\", \"));\n            }\n            out += \" when property \" + it.util.escapeQuotes($property) + \" is present' \";\n          }\n          if (it.opts.verbose) {\n            out += \" , schema: validate.schema\" + $schemaPath + \" , parentSchema: validate.schema\" + it.schemaPath + \" , data: \" + $data + \" \";\n          }\n          out += \" } \";\n        } else {\n          out += \" {} \";\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) {\n          if (it.async) {\n            out += \" throw new ValidationError([\" + __err + \"]); \";\n          } else {\n            out += \" validate.errors = [\" + __err + \"]; return false; \";\n          }\n        } else {\n          out += \" var err = \" + __err + \";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \";\n        }\n      } else {\n        out += \" ) { \";\n        var arr2 = $deps;\n        if (arr2) {\n          var $propertyKey, i2 = -1, l2 = arr2.length - 1;\n          while (i2 < l2) {\n            $propertyKey = arr2[i2 += 1];\n            var $prop = it.util.getProperty($propertyKey), $missingProperty = it.util.escapeQuotes($propertyKey), $useData = $data + $prop;\n            if (it.opts._errorDataPathProperty) {\n              it.errorPath = it.util.getPath($currentErrorPath, $propertyKey, it.opts.jsonPointers);\n            }\n            out += \" if ( \" + $useData + \" === undefined \";\n            if ($ownProperties) {\n              out += \" || ! Object.prototype.hasOwnProperty.call(\" + $data + \", '\" + it.util.escapeQuotes($propertyKey) + \"') \";\n            }\n            out += \") {  var err =   \";\n            if (it.createErrors !== false) {\n              out += \" { keyword: 'dependencies' , dataPath: (dataPath || '') + \" + it.errorPath + \" , schemaPath: \" + it.util.toQuotedString($errSchemaPath) + \" , params: { property: '\" + it.util.escapeQuotes($property) + \"', missingProperty: '\" + $missingProperty + \"', depsCount: \" + $deps.length + \", deps: '\" + it.util.escapeQuotes($deps.length == 1 ? $deps[0] : $deps.join(\", \")) + \"' } \";\n              if (it.opts.messages !== false) {\n                out += \" , message: 'should have \";\n                if ($deps.length == 1) {\n                  out += \"property \" + it.util.escapeQuotes($deps[0]);\n                } else {\n                  out += \"properties \" + it.util.escapeQuotes($deps.join(\", \"));\n                }\n                out += \" when property \" + it.util.escapeQuotes($property) + \" is present' \";\n              }\n              if (it.opts.verbose) {\n                out += \" , schema: validate.schema\" + $schemaPath + \" , parentSchema: validate.schema\" + it.schemaPath + \" , data: \" + $data + \" \";\n              }\n              out += \" } \";\n            } else {\n              out += \" {} \";\n            }\n            out += \";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } \";\n          }\n        }\n      }\n      out += \" }   \";\n      if ($breakOnError) {\n        $closingBraces += \"}\";\n        out += \" else { \";\n      }\n    }\n  }\n  it.errorPath = $currentErrorPath;\n  var $currentBaseId = $it.baseId;\n  for (var $property in $schemaDeps) {\n    var $sch = $schemaDeps[$property];\n    if (it.opts.strictKeywords ? typeof $sch == \"object\" && Object.keys($sch).length > 0 || $sch === false : it.util.schemaHasRules($sch, it.RULES.all)) {\n      out += \" \" + $nextValid + \" = true; if ( \" + $data + it.util.getProperty($property) + \" !== undefined \";\n      if ($ownProperties) {\n        out += \" && Object.prototype.hasOwnProperty.call(\" + $data + \", '\" + it.util.escapeQuotes($property) + \"') \";\n      }\n      out += \") { \";\n      $it.schema = $sch;\n      $it.schemaPath = $schemaPath + it.util.getProperty($property);\n      $it.errSchemaPath = $errSchemaPath + \"/\" + it.util.escapeFragment($property);\n      out += \"  \" + it.validate($it) + \" \";\n      $it.baseId = $currentBaseId;\n      out += \" }  \";\n      if ($breakOnError) {\n        out += \" if (\" + $nextValid + \") { \";\n        $closingBraces += \"}\";\n      }\n    }\n  }\n  if ($breakOnError) {\n    out += \"   \" + $closingBraces + \" if (\" + $errs + \" == errors) {\";\n  }\n  return out;\n};\nvar _enum = function generate_enum(it, $keyword, $ruleType) {\n  var out = \" \";\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema2 = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + \"/\" + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = \"data\" + ($dataLvl || \"\");\n  var $valid = \"valid\" + $lvl;\n  var $isData = it.opts.$data && $schema2 && $schema2.$data;\n  if ($isData) {\n    out += \" var schema\" + $lvl + \" = \" + it.util.getData($schema2.$data, $dataLvl, it.dataPathArr) + \"; \";\n  }\n  var $i = \"i\" + $lvl, $vSchema = \"schema\" + $lvl;\n  if (!$isData) {\n    out += \" var \" + $vSchema + \" = validate.schema\" + $schemaPath + \";\";\n  }\n  out += \"var \" + $valid + \";\";\n  if ($isData) {\n    out += \" if (schema\" + $lvl + \" === undefined) \" + $valid + \" = true; else if (!Array.isArray(schema\" + $lvl + \")) \" + $valid + \" = false; else {\";\n  }\n  out += \"\" + $valid + \" = false;for (var \" + $i + \"=0; \" + $i + \"<\" + $vSchema + \".length; \" + $i + \"++) if (equal(\" + $data + \", \" + $vSchema + \"[\" + $i + \"])) { \" + $valid + \" = true; break; }\";\n  if ($isData) {\n    out += \"  }  \";\n  }\n  out += \" if (!\" + $valid + \") {   \";\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = \"\";\n  if (it.createErrors !== false) {\n    out += \" { keyword: 'enum' , dataPath: (dataPath || '') + \" + it.errorPath + \" , schemaPath: \" + it.util.toQuotedString($errSchemaPath) + \" , params: { allowedValues: schema\" + $lvl + \" } \";\n    if (it.opts.messages !== false) {\n      out += \" , message: 'should be equal to one of the allowed values' \";\n    }\n    if (it.opts.verbose) {\n      out += \" , schema: validate.schema\" + $schemaPath + \" , parentSchema: validate.schema\" + it.schemaPath + \" , data: \" + $data + \" \";\n    }\n    out += \" } \";\n  } else {\n    out += \" {} \";\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    if (it.async) {\n      out += \" throw new ValidationError([\" + __err + \"]); \";\n    } else {\n      out += \" validate.errors = [\" + __err + \"]; return false; \";\n    }\n  } else {\n    out += \" var err = \" + __err + \";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \";\n  }\n  out += \" }\";\n  if ($breakOnError) {\n    out += \" else { \";\n  }\n  return out;\n};\nvar format = function generate_format(it, $keyword, $ruleType) {\n  var out = \" \";\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema2 = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + \"/\" + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = \"data\" + ($dataLvl || \"\");\n  if (it.opts.format === false) {\n    if ($breakOnError) {\n      out += \" if (true) { \";\n    }\n    return out;\n  }\n  var $isData = it.opts.$data && $schema2 && $schema2.$data, $schemaValue;\n  if ($isData) {\n    out += \" var schema\" + $lvl + \" = \" + it.util.getData($schema2.$data, $dataLvl, it.dataPathArr) + \"; \";\n    $schemaValue = \"schema\" + $lvl;\n  } else {\n    $schemaValue = $schema2;\n  }\n  var $unknownFormats = it.opts.unknownFormats, $allowUnknown = Array.isArray($unknownFormats);\n  if ($isData) {\n    var $format = \"format\" + $lvl, $isObject = \"isObject\" + $lvl, $formatType = \"formatType\" + $lvl;\n    out += \" var \" + $format + \" = formats[\" + $schemaValue + \"]; var \" + $isObject + \" = typeof \" + $format + \" == 'object' && !(\" + $format + \" instanceof RegExp) && \" + $format + \".validate; var \" + $formatType + \" = \" + $isObject + \" && \" + $format + \".type || 'string'; if (\" + $isObject + \") { \";\n    if (it.async) {\n      out += \" var async\" + $lvl + \" = \" + $format + \".async; \";\n    }\n    out += \" \" + $format + \" = \" + $format + \".validate; } if (  \";\n    if ($isData) {\n      out += \" (\" + $schemaValue + \" !== undefined && typeof \" + $schemaValue + \" != 'string') || \";\n    }\n    out += \" (\";\n    if ($unknownFormats != \"ignore\") {\n      out += \" (\" + $schemaValue + \" && !\" + $format + \" \";\n      if ($allowUnknown) {\n        out += \" && self._opts.unknownFormats.indexOf(\" + $schemaValue + \") == -1 \";\n      }\n      out += \") || \";\n    }\n    out += \" (\" + $format + \" && \" + $formatType + \" == '\" + $ruleType + \"' && !(typeof \" + $format + \" == 'function' ? \";\n    if (it.async) {\n      out += \" (async\" + $lvl + \" ? await \" + $format + \"(\" + $data + \") : \" + $format + \"(\" + $data + \")) \";\n    } else {\n      out += \" \" + $format + \"(\" + $data + \") \";\n    }\n    out += \" : \" + $format + \".test(\" + $data + \"))))) {\";\n  } else {\n    var $format = it.formats[$schema2];\n    if (!$format) {\n      if ($unknownFormats == \"ignore\") {\n        it.logger.warn('unknown format \"' + $schema2 + '\" ignored in schema at path \"' + it.errSchemaPath + '\"');\n        if ($breakOnError) {\n          out += \" if (true) { \";\n        }\n        return out;\n      } else if ($allowUnknown && $unknownFormats.indexOf($schema2) >= 0) {\n        if ($breakOnError) {\n          out += \" if (true) { \";\n        }\n        return out;\n      } else {\n        throw new Error('unknown format \"' + $schema2 + '\" is used in schema at path \"' + it.errSchemaPath + '\"');\n      }\n    }\n    var $isObject = typeof $format == \"object\" && !($format instanceof RegExp) && $format.validate;\n    var $formatType = $isObject && $format.type || \"string\";\n    if ($isObject) {\n      var $async = $format.async === true;\n      $format = $format.validate;\n    }\n    if ($formatType != $ruleType) {\n      if ($breakOnError) {\n        out += \" if (true) { \";\n      }\n      return out;\n    }\n    if ($async) {\n      if (!it.async)\n        throw new Error(\"async format in sync schema\");\n      var $formatRef = \"formats\" + it.util.getProperty($schema2) + \".validate\";\n      out += \" if (!(await \" + $formatRef + \"(\" + $data + \"))) { \";\n    } else {\n      out += \" if (! \";\n      var $formatRef = \"formats\" + it.util.getProperty($schema2);\n      if ($isObject)\n        $formatRef += \".validate\";\n      if (typeof $format == \"function\") {\n        out += \" \" + $formatRef + \"(\" + $data + \") \";\n      } else {\n        out += \" \" + $formatRef + \".test(\" + $data + \") \";\n      }\n      out += \") { \";\n    }\n  }\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = \"\";\n  if (it.createErrors !== false) {\n    out += \" { keyword: 'format' , dataPath: (dataPath || '') + \" + it.errorPath + \" , schemaPath: \" + it.util.toQuotedString($errSchemaPath) + \" , params: { format:  \";\n    if ($isData) {\n      out += \"\" + $schemaValue;\n    } else {\n      out += \"\" + it.util.toQuotedString($schema2);\n    }\n    out += \"  } \";\n    if (it.opts.messages !== false) {\n      out += ` , message: 'should match format \"`;\n      if ($isData) {\n        out += \"' + \" + $schemaValue + \" + '\";\n      } else {\n        out += \"\" + it.util.escapeQuotes($schema2);\n      }\n      out += `\"' `;\n    }\n    if (it.opts.verbose) {\n      out += \" , schema:  \";\n      if ($isData) {\n        out += \"validate.schema\" + $schemaPath;\n      } else {\n        out += \"\" + it.util.toQuotedString($schema2);\n      }\n      out += \"         , parentSchema: validate.schema\" + it.schemaPath + \" , data: \" + $data + \" \";\n    }\n    out += \" } \";\n  } else {\n    out += \" {} \";\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    if (it.async) {\n      out += \" throw new ValidationError([\" + __err + \"]); \";\n    } else {\n      out += \" validate.errors = [\" + __err + \"]; return false; \";\n    }\n  } else {\n    out += \" var err = \" + __err + \";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \";\n  }\n  out += \" } \";\n  if ($breakOnError) {\n    out += \" else { \";\n  }\n  return out;\n};\nvar _if = function generate_if(it, $keyword, $ruleType) {\n  var out = \" \";\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema2 = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + \"/\" + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = \"data\" + ($dataLvl || \"\");\n  var $valid = \"valid\" + $lvl;\n  var $errs = \"errs__\" + $lvl;\n  var $it = it.util.copy(it);\n  $it.level++;\n  var $nextValid = \"valid\" + $it.level;\n  var $thenSch = it.schema[\"then\"], $elseSch = it.schema[\"else\"], $thenPresent = $thenSch !== void 0 && (it.opts.strictKeywords ? typeof $thenSch == \"object\" && Object.keys($thenSch).length > 0 || $thenSch === false : it.util.schemaHasRules($thenSch, it.RULES.all)), $elsePresent = $elseSch !== void 0 && (it.opts.strictKeywords ? typeof $elseSch == \"object\" && Object.keys($elseSch).length > 0 || $elseSch === false : it.util.schemaHasRules($elseSch, it.RULES.all)), $currentBaseId = $it.baseId;\n  if ($thenPresent || $elsePresent) {\n    var $ifClause;\n    $it.createErrors = false;\n    $it.schema = $schema2;\n    $it.schemaPath = $schemaPath;\n    $it.errSchemaPath = $errSchemaPath;\n    out += \" var \" + $errs + \" = errors; var \" + $valid + \" = true;  \";\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    out += \"  \" + it.validate($it) + \" \";\n    $it.baseId = $currentBaseId;\n    $it.createErrors = true;\n    out += \"  errors = \" + $errs + \"; if (vErrors !== null) { if (\" + $errs + \") vErrors.length = \" + $errs + \"; else vErrors = null; }  \";\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    if ($thenPresent) {\n      out += \" if (\" + $nextValid + \") {  \";\n      $it.schema = it.schema[\"then\"];\n      $it.schemaPath = it.schemaPath + \".then\";\n      $it.errSchemaPath = it.errSchemaPath + \"/then\";\n      out += \"  \" + it.validate($it) + \" \";\n      $it.baseId = $currentBaseId;\n      out += \" \" + $valid + \" = \" + $nextValid + \"; \";\n      if ($thenPresent && $elsePresent) {\n        $ifClause = \"ifClause\" + $lvl;\n        out += \" var \" + $ifClause + \" = 'then'; \";\n      } else {\n        $ifClause = \"'then'\";\n      }\n      out += \" } \";\n      if ($elsePresent) {\n        out += \" else { \";\n      }\n    } else {\n      out += \" if (!\" + $nextValid + \") { \";\n    }\n    if ($elsePresent) {\n      $it.schema = it.schema[\"else\"];\n      $it.schemaPath = it.schemaPath + \".else\";\n      $it.errSchemaPath = it.errSchemaPath + \"/else\";\n      out += \"  \" + it.validate($it) + \" \";\n      $it.baseId = $currentBaseId;\n      out += \" \" + $valid + \" = \" + $nextValid + \"; \";\n      if ($thenPresent && $elsePresent) {\n        $ifClause = \"ifClause\" + $lvl;\n        out += \" var \" + $ifClause + \" = 'else'; \";\n      } else {\n        $ifClause = \"'else'\";\n      }\n      out += \" } \";\n    }\n    out += \" if (!\" + $valid + \") {   var err =   \";\n    if (it.createErrors !== false) {\n      out += \" { keyword: 'if' , dataPath: (dataPath || '') + \" + it.errorPath + \" , schemaPath: \" + it.util.toQuotedString($errSchemaPath) + \" , params: { failingKeyword: \" + $ifClause + \" } \";\n      if (it.opts.messages !== false) {\n        out += ` , message: 'should match \"' + ` + $ifClause + ` + '\" schema' `;\n      }\n      if (it.opts.verbose) {\n        out += \" , schema: validate.schema\" + $schemaPath + \" , parentSchema: validate.schema\" + it.schemaPath + \" , data: \" + $data + \" \";\n      }\n      out += \" } \";\n    } else {\n      out += \" {} \";\n    }\n    out += \";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \";\n    if (!it.compositeRule && $breakOnError) {\n      if (it.async) {\n        out += \" throw new ValidationError(vErrors); \";\n      } else {\n        out += \" validate.errors = vErrors; return false; \";\n      }\n    }\n    out += \" }   \";\n    if ($breakOnError) {\n      out += \" else { \";\n    }\n  } else {\n    if ($breakOnError) {\n      out += \" if (true) { \";\n    }\n  }\n  return out;\n};\nvar items = function generate_items(it, $keyword, $ruleType) {\n  var out = \" \";\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema2 = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + \"/\" + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = \"data\" + ($dataLvl || \"\");\n  var $valid = \"valid\" + $lvl;\n  var $errs = \"errs__\" + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = \"\";\n  $it.level++;\n  var $nextValid = \"valid\" + $it.level;\n  var $idx = \"i\" + $lvl, $dataNxt = $it.dataLevel = it.dataLevel + 1, $nextData = \"data\" + $dataNxt, $currentBaseId = it.baseId;\n  out += \"var \" + $errs + \" = errors;var \" + $valid + \";\";\n  if (Array.isArray($schema2)) {\n    var $additionalItems = it.schema.additionalItems;\n    if ($additionalItems === false) {\n      out += \" \" + $valid + \" = \" + $data + \".length <= \" + $schema2.length + \"; \";\n      var $currErrSchemaPath = $errSchemaPath;\n      $errSchemaPath = it.errSchemaPath + \"/additionalItems\";\n      out += \"  if (!\" + $valid + \") {   \";\n      var $$outStack = $$outStack || [];\n      $$outStack.push(out);\n      out = \"\";\n      if (it.createErrors !== false) {\n        out += \" { keyword: 'additionalItems' , dataPath: (dataPath || '') + \" + it.errorPath + \" , schemaPath: \" + it.util.toQuotedString($errSchemaPath) + \" , params: { limit: \" + $schema2.length + \" } \";\n        if (it.opts.messages !== false) {\n          out += \" , message: 'should NOT have more than \" + $schema2.length + \" items' \";\n        }\n        if (it.opts.verbose) {\n          out += \" , schema: false , parentSchema: validate.schema\" + it.schemaPath + \" , data: \" + $data + \" \";\n        }\n        out += \" } \";\n      } else {\n        out += \" {} \";\n      }\n      var __err = out;\n      out = $$outStack.pop();\n      if (!it.compositeRule && $breakOnError) {\n        if (it.async) {\n          out += \" throw new ValidationError([\" + __err + \"]); \";\n        } else {\n          out += \" validate.errors = [\" + __err + \"]; return false; \";\n        }\n      } else {\n        out += \" var err = \" + __err + \";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \";\n      }\n      out += \" } \";\n      $errSchemaPath = $currErrSchemaPath;\n      if ($breakOnError) {\n        $closingBraces += \"}\";\n        out += \" else { \";\n      }\n    }\n    var arr1 = $schema2;\n    if (arr1) {\n      var $sch, $i = -1, l1 = arr1.length - 1;\n      while ($i < l1) {\n        $sch = arr1[$i += 1];\n        if (it.opts.strictKeywords ? typeof $sch == \"object\" && Object.keys($sch).length > 0 || $sch === false : it.util.schemaHasRules($sch, it.RULES.all)) {\n          out += \" \" + $nextValid + \" = true; if (\" + $data + \".length > \" + $i + \") { \";\n          var $passData = $data + \"[\" + $i + \"]\";\n          $it.schema = $sch;\n          $it.schemaPath = $schemaPath + \"[\" + $i + \"]\";\n          $it.errSchemaPath = $errSchemaPath + \"/\" + $i;\n          $it.errorPath = it.util.getPathExpr(it.errorPath, $i, it.opts.jsonPointers, true);\n          $it.dataPathArr[$dataNxt] = $i;\n          var $code = it.validate($it);\n          $it.baseId = $currentBaseId;\n          if (it.util.varOccurences($code, $nextData) < 2) {\n            out += \" \" + it.util.varReplace($code, $nextData, $passData) + \" \";\n          } else {\n            out += \" var \" + $nextData + \" = \" + $passData + \"; \" + $code + \" \";\n          }\n          out += \" }  \";\n          if ($breakOnError) {\n            out += \" if (\" + $nextValid + \") { \";\n            $closingBraces += \"}\";\n          }\n        }\n      }\n    }\n    if (typeof $additionalItems == \"object\" && (it.opts.strictKeywords ? typeof $additionalItems == \"object\" && Object.keys($additionalItems).length > 0 || $additionalItems === false : it.util.schemaHasRules($additionalItems, it.RULES.all))) {\n      $it.schema = $additionalItems;\n      $it.schemaPath = it.schemaPath + \".additionalItems\";\n      $it.errSchemaPath = it.errSchemaPath + \"/additionalItems\";\n      out += \" \" + $nextValid + \" = true; if (\" + $data + \".length > \" + $schema2.length + \") {  for (var \" + $idx + \" = \" + $schema2.length + \"; \" + $idx + \" < \" + $data + \".length; \" + $idx + \"++) { \";\n      $it.errorPath = it.util.getPathExpr(it.errorPath, $idx, it.opts.jsonPointers, true);\n      var $passData = $data + \"[\" + $idx + \"]\";\n      $it.dataPathArr[$dataNxt] = $idx;\n      var $code = it.validate($it);\n      $it.baseId = $currentBaseId;\n      if (it.util.varOccurences($code, $nextData) < 2) {\n        out += \" \" + it.util.varReplace($code, $nextData, $passData) + \" \";\n      } else {\n        out += \" var \" + $nextData + \" = \" + $passData + \"; \" + $code + \" \";\n      }\n      if ($breakOnError) {\n        out += \" if (!\" + $nextValid + \") break; \";\n      }\n      out += \" } }  \";\n      if ($breakOnError) {\n        out += \" if (\" + $nextValid + \") { \";\n        $closingBraces += \"}\";\n      }\n    }\n  } else if (it.opts.strictKeywords ? typeof $schema2 == \"object\" && Object.keys($schema2).length > 0 || $schema2 === false : it.util.schemaHasRules($schema2, it.RULES.all)) {\n    $it.schema = $schema2;\n    $it.schemaPath = $schemaPath;\n    $it.errSchemaPath = $errSchemaPath;\n    out += \"  for (var \" + $idx + \" = \" + 0 + \"; \" + $idx + \" < \" + $data + \".length; \" + $idx + \"++) { \";\n    $it.errorPath = it.util.getPathExpr(it.errorPath, $idx, it.opts.jsonPointers, true);\n    var $passData = $data + \"[\" + $idx + \"]\";\n    $it.dataPathArr[$dataNxt] = $idx;\n    var $code = it.validate($it);\n    $it.baseId = $currentBaseId;\n    if (it.util.varOccurences($code, $nextData) < 2) {\n      out += \" \" + it.util.varReplace($code, $nextData, $passData) + \" \";\n    } else {\n      out += \" var \" + $nextData + \" = \" + $passData + \"; \" + $code + \" \";\n    }\n    if ($breakOnError) {\n      out += \" if (!\" + $nextValid + \") break; \";\n    }\n    out += \" }\";\n  }\n  if ($breakOnError) {\n    out += \" \" + $closingBraces + \" if (\" + $errs + \" == errors) {\";\n  }\n  return out;\n};\nvar _limit = function generate__limit(it, $keyword, $ruleType) {\n  var out = \" \";\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema2 = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + \"/\" + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $errorKeyword;\n  var $data = \"data\" + ($dataLvl || \"\");\n  var $isData = it.opts.$data && $schema2 && $schema2.$data, $schemaValue;\n  if ($isData) {\n    out += \" var schema\" + $lvl + \" = \" + it.util.getData($schema2.$data, $dataLvl, it.dataPathArr) + \"; \";\n    $schemaValue = \"schema\" + $lvl;\n  } else {\n    $schemaValue = $schema2;\n  }\n  var $isMax = $keyword == \"maximum\", $exclusiveKeyword = $isMax ? \"exclusiveMaximum\" : \"exclusiveMinimum\", $schemaExcl = it.schema[$exclusiveKeyword], $isDataExcl = it.opts.$data && $schemaExcl && $schemaExcl.$data, $op = $isMax ? \"<\" : \">\", $notOp = $isMax ? \">\" : \"<\", $errorKeyword = void 0;\n  if (!($isData || typeof $schema2 == \"number\" || $schema2 === void 0)) {\n    throw new Error($keyword + \" must be number\");\n  }\n  if (!($isDataExcl || $schemaExcl === void 0 || typeof $schemaExcl == \"number\" || typeof $schemaExcl == \"boolean\")) {\n    throw new Error($exclusiveKeyword + \" must be number or boolean\");\n  }\n  if ($isDataExcl) {\n    var $schemaValueExcl = it.util.getData($schemaExcl.$data, $dataLvl, it.dataPathArr), $exclusive = \"exclusive\" + $lvl, $exclType = \"exclType\" + $lvl, $exclIsNumber = \"exclIsNumber\" + $lvl, $opExpr = \"op\" + $lvl, $opStr = \"' + \" + $opExpr + \" + '\";\n    out += \" var schemaExcl\" + $lvl + \" = \" + $schemaValueExcl + \"; \";\n    $schemaValueExcl = \"schemaExcl\" + $lvl;\n    out += \" var \" + $exclusive + \"; var \" + $exclType + \" = typeof \" + $schemaValueExcl + \"; if (\" + $exclType + \" != 'boolean' && \" + $exclType + \" != 'undefined' && \" + $exclType + \" != 'number') { \";\n    var $errorKeyword = $exclusiveKeyword;\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = \"\";\n    if (it.createErrors !== false) {\n      out += \" { keyword: '\" + ($errorKeyword || \"_exclusiveLimit\") + \"' , dataPath: (dataPath || '') + \" + it.errorPath + \" , schemaPath: \" + it.util.toQuotedString($errSchemaPath) + \" , params: {} \";\n      if (it.opts.messages !== false) {\n        out += \" , message: '\" + $exclusiveKeyword + \" should be boolean' \";\n      }\n      if (it.opts.verbose) {\n        out += \" , schema: validate.schema\" + $schemaPath + \" , parentSchema: validate.schema\" + it.schemaPath + \" , data: \" + $data + \" \";\n      }\n      out += \" } \";\n    } else {\n      out += \" {} \";\n    }\n    var __err = out;\n    out = $$outStack.pop();\n    if (!it.compositeRule && $breakOnError) {\n      if (it.async) {\n        out += \" throw new ValidationError([\" + __err + \"]); \";\n      } else {\n        out += \" validate.errors = [\" + __err + \"]; return false; \";\n      }\n    } else {\n      out += \" var err = \" + __err + \";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \";\n    }\n    out += \" } else if ( \";\n    if ($isData) {\n      out += \" (\" + $schemaValue + \" !== undefined && typeof \" + $schemaValue + \" != 'number') || \";\n    }\n    out += \" \" + $exclType + \" == 'number' ? ( (\" + $exclusive + \" = \" + $schemaValue + \" === undefined || \" + $schemaValueExcl + \" \" + $op + \"= \" + $schemaValue + \") ? \" + $data + \" \" + $notOp + \"= \" + $schemaValueExcl + \" : \" + $data + \" \" + $notOp + \" \" + $schemaValue + \" ) : ( (\" + $exclusive + \" = \" + $schemaValueExcl + \" === true) ? \" + $data + \" \" + $notOp + \"= \" + $schemaValue + \" : \" + $data + \" \" + $notOp + \" \" + $schemaValue + \" ) || \" + $data + \" !== \" + $data + \") { var op\" + $lvl + \" = \" + $exclusive + \" ? '\" + $op + \"' : '\" + $op + \"='; \";\n    if ($schema2 === void 0) {\n      $errorKeyword = $exclusiveKeyword;\n      $errSchemaPath = it.errSchemaPath + \"/\" + $exclusiveKeyword;\n      $schemaValue = $schemaValueExcl;\n      $isData = $isDataExcl;\n    }\n  } else {\n    var $exclIsNumber = typeof $schemaExcl == \"number\", $opStr = $op;\n    if ($exclIsNumber && $isData) {\n      var $opExpr = \"'\" + $opStr + \"'\";\n      out += \" if ( \";\n      if ($isData) {\n        out += \" (\" + $schemaValue + \" !== undefined && typeof \" + $schemaValue + \" != 'number') || \";\n      }\n      out += \" ( \" + $schemaValue + \" === undefined || \" + $schemaExcl + \" \" + $op + \"= \" + $schemaValue + \" ? \" + $data + \" \" + $notOp + \"= \" + $schemaExcl + \" : \" + $data + \" \" + $notOp + \" \" + $schemaValue + \" ) || \" + $data + \" !== \" + $data + \") { \";\n    } else {\n      if ($exclIsNumber && $schema2 === void 0) {\n        $exclusive = true;\n        $errorKeyword = $exclusiveKeyword;\n        $errSchemaPath = it.errSchemaPath + \"/\" + $exclusiveKeyword;\n        $schemaValue = $schemaExcl;\n        $notOp += \"=\";\n      } else {\n        if ($exclIsNumber)\n          $schemaValue = Math[$isMax ? \"min\" : \"max\"]($schemaExcl, $schema2);\n        if ($schemaExcl === ($exclIsNumber ? $schemaValue : true)) {\n          $exclusive = true;\n          $errorKeyword = $exclusiveKeyword;\n          $errSchemaPath = it.errSchemaPath + \"/\" + $exclusiveKeyword;\n          $notOp += \"=\";\n        } else {\n          $exclusive = false;\n          $opStr += \"=\";\n        }\n      }\n      var $opExpr = \"'\" + $opStr + \"'\";\n      out += \" if ( \";\n      if ($isData) {\n        out += \" (\" + $schemaValue + \" !== undefined && typeof \" + $schemaValue + \" != 'number') || \";\n      }\n      out += \" \" + $data + \" \" + $notOp + \" \" + $schemaValue + \" || \" + $data + \" !== \" + $data + \") { \";\n    }\n  }\n  $errorKeyword = $errorKeyword || $keyword;\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = \"\";\n  if (it.createErrors !== false) {\n    out += \" { keyword: '\" + ($errorKeyword || \"_limit\") + \"' , dataPath: (dataPath || '') + \" + it.errorPath + \" , schemaPath: \" + it.util.toQuotedString($errSchemaPath) + \" , params: { comparison: \" + $opExpr + \", limit: \" + $schemaValue + \", exclusive: \" + $exclusive + \" } \";\n    if (it.opts.messages !== false) {\n      out += \" , message: 'should be \" + $opStr + \" \";\n      if ($isData) {\n        out += \"' + \" + $schemaValue;\n      } else {\n        out += \"\" + $schemaValue + \"'\";\n      }\n    }\n    if (it.opts.verbose) {\n      out += \" , schema:  \";\n      if ($isData) {\n        out += \"validate.schema\" + $schemaPath;\n      } else {\n        out += \"\" + $schema2;\n      }\n      out += \"         , parentSchema: validate.schema\" + it.schemaPath + \" , data: \" + $data + \" \";\n    }\n    out += \" } \";\n  } else {\n    out += \" {} \";\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    if (it.async) {\n      out += \" throw new ValidationError([\" + __err + \"]); \";\n    } else {\n      out += \" validate.errors = [\" + __err + \"]; return false; \";\n    }\n  } else {\n    out += \" var err = \" + __err + \";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \";\n  }\n  out += \" } \";\n  if ($breakOnError) {\n    out += \" else { \";\n  }\n  return out;\n};\nvar _limitItems = function generate__limitItems(it, $keyword, $ruleType) {\n  var out = \" \";\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema2 = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + \"/\" + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $errorKeyword;\n  var $data = \"data\" + ($dataLvl || \"\");\n  var $isData = it.opts.$data && $schema2 && $schema2.$data, $schemaValue;\n  if ($isData) {\n    out += \" var schema\" + $lvl + \" = \" + it.util.getData($schema2.$data, $dataLvl, it.dataPathArr) + \"; \";\n    $schemaValue = \"schema\" + $lvl;\n  } else {\n    $schemaValue = $schema2;\n  }\n  if (!($isData || typeof $schema2 == \"number\")) {\n    throw new Error($keyword + \" must be number\");\n  }\n  var $op = $keyword == \"maxItems\" ? \">\" : \"<\";\n  out += \"if ( \";\n  if ($isData) {\n    out += \" (\" + $schemaValue + \" !== undefined && typeof \" + $schemaValue + \" != 'number') || \";\n  }\n  out += \" \" + $data + \".length \" + $op + \" \" + $schemaValue + \") { \";\n  var $errorKeyword = $keyword;\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = \"\";\n  if (it.createErrors !== false) {\n    out += \" { keyword: '\" + ($errorKeyword || \"_limitItems\") + \"' , dataPath: (dataPath || '') + \" + it.errorPath + \" , schemaPath: \" + it.util.toQuotedString($errSchemaPath) + \" , params: { limit: \" + $schemaValue + \" } \";\n    if (it.opts.messages !== false) {\n      out += \" , message: 'should NOT have \";\n      if ($keyword == \"maxItems\") {\n        out += \"more\";\n      } else {\n        out += \"fewer\";\n      }\n      out += \" than \";\n      if ($isData) {\n        out += \"' + \" + $schemaValue + \" + '\";\n      } else {\n        out += \"\" + $schema2;\n      }\n      out += \" items' \";\n    }\n    if (it.opts.verbose) {\n      out += \" , schema:  \";\n      if ($isData) {\n        out += \"validate.schema\" + $schemaPath;\n      } else {\n        out += \"\" + $schema2;\n      }\n      out += \"         , parentSchema: validate.schema\" + it.schemaPath + \" , data: \" + $data + \" \";\n    }\n    out += \" } \";\n  } else {\n    out += \" {} \";\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    if (it.async) {\n      out += \" throw new ValidationError([\" + __err + \"]); \";\n    } else {\n      out += \" validate.errors = [\" + __err + \"]; return false; \";\n    }\n  } else {\n    out += \" var err = \" + __err + \";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \";\n  }\n  out += \"} \";\n  if ($breakOnError) {\n    out += \" else { \";\n  }\n  return out;\n};\nvar _limitLength = function generate__limitLength(it, $keyword, $ruleType) {\n  var out = \" \";\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema2 = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + \"/\" + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $errorKeyword;\n  var $data = \"data\" + ($dataLvl || \"\");\n  var $isData = it.opts.$data && $schema2 && $schema2.$data, $schemaValue;\n  if ($isData) {\n    out += \" var schema\" + $lvl + \" = \" + it.util.getData($schema2.$data, $dataLvl, it.dataPathArr) + \"; \";\n    $schemaValue = \"schema\" + $lvl;\n  } else {\n    $schemaValue = $schema2;\n  }\n  if (!($isData || typeof $schema2 == \"number\")) {\n    throw new Error($keyword + \" must be number\");\n  }\n  var $op = $keyword == \"maxLength\" ? \">\" : \"<\";\n  out += \"if ( \";\n  if ($isData) {\n    out += \" (\" + $schemaValue + \" !== undefined && typeof \" + $schemaValue + \" != 'number') || \";\n  }\n  if (it.opts.unicode === false) {\n    out += \" \" + $data + \".length \";\n  } else {\n    out += \" ucs2length(\" + $data + \") \";\n  }\n  out += \" \" + $op + \" \" + $schemaValue + \") { \";\n  var $errorKeyword = $keyword;\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = \"\";\n  if (it.createErrors !== false) {\n    out += \" { keyword: '\" + ($errorKeyword || \"_limitLength\") + \"' , dataPath: (dataPath || '') + \" + it.errorPath + \" , schemaPath: \" + it.util.toQuotedString($errSchemaPath) + \" , params: { limit: \" + $schemaValue + \" } \";\n    if (it.opts.messages !== false) {\n      out += \" , message: 'should NOT be \";\n      if ($keyword == \"maxLength\") {\n        out += \"longer\";\n      } else {\n        out += \"shorter\";\n      }\n      out += \" than \";\n      if ($isData) {\n        out += \"' + \" + $schemaValue + \" + '\";\n      } else {\n        out += \"\" + $schema2;\n      }\n      out += \" characters' \";\n    }\n    if (it.opts.verbose) {\n      out += \" , schema:  \";\n      if ($isData) {\n        out += \"validate.schema\" + $schemaPath;\n      } else {\n        out += \"\" + $schema2;\n      }\n      out += \"         , parentSchema: validate.schema\" + it.schemaPath + \" , data: \" + $data + \" \";\n    }\n    out += \" } \";\n  } else {\n    out += \" {} \";\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    if (it.async) {\n      out += \" throw new ValidationError([\" + __err + \"]); \";\n    } else {\n      out += \" validate.errors = [\" + __err + \"]; return false; \";\n    }\n  } else {\n    out += \" var err = \" + __err + \";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \";\n  }\n  out += \"} \";\n  if ($breakOnError) {\n    out += \" else { \";\n  }\n  return out;\n};\nvar _limitProperties = function generate__limitProperties(it, $keyword, $ruleType) {\n  var out = \" \";\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema2 = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + \"/\" + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $errorKeyword;\n  var $data = \"data\" + ($dataLvl || \"\");\n  var $isData = it.opts.$data && $schema2 && $schema2.$data, $schemaValue;\n  if ($isData) {\n    out += \" var schema\" + $lvl + \" = \" + it.util.getData($schema2.$data, $dataLvl, it.dataPathArr) + \"; \";\n    $schemaValue = \"schema\" + $lvl;\n  } else {\n    $schemaValue = $schema2;\n  }\n  if (!($isData || typeof $schema2 == \"number\")) {\n    throw new Error($keyword + \" must be number\");\n  }\n  var $op = $keyword == \"maxProperties\" ? \">\" : \"<\";\n  out += \"if ( \";\n  if ($isData) {\n    out += \" (\" + $schemaValue + \" !== undefined && typeof \" + $schemaValue + \" != 'number') || \";\n  }\n  out += \" Object.keys(\" + $data + \").length \" + $op + \" \" + $schemaValue + \") { \";\n  var $errorKeyword = $keyword;\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = \"\";\n  if (it.createErrors !== false) {\n    out += \" { keyword: '\" + ($errorKeyword || \"_limitProperties\") + \"' , dataPath: (dataPath || '') + \" + it.errorPath + \" , schemaPath: \" + it.util.toQuotedString($errSchemaPath) + \" , params: { limit: \" + $schemaValue + \" } \";\n    if (it.opts.messages !== false) {\n      out += \" , message: 'should NOT have \";\n      if ($keyword == \"maxProperties\") {\n        out += \"more\";\n      } else {\n        out += \"fewer\";\n      }\n      out += \" than \";\n      if ($isData) {\n        out += \"' + \" + $schemaValue + \" + '\";\n      } else {\n        out += \"\" + $schema2;\n      }\n      out += \" properties' \";\n    }\n    if (it.opts.verbose) {\n      out += \" , schema:  \";\n      if ($isData) {\n        out += \"validate.schema\" + $schemaPath;\n      } else {\n        out += \"\" + $schema2;\n      }\n      out += \"         , parentSchema: validate.schema\" + it.schemaPath + \" , data: \" + $data + \" \";\n    }\n    out += \" } \";\n  } else {\n    out += \" {} \";\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    if (it.async) {\n      out += \" throw new ValidationError([\" + __err + \"]); \";\n    } else {\n      out += \" validate.errors = [\" + __err + \"]; return false; \";\n    }\n  } else {\n    out += \" var err = \" + __err + \";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \";\n  }\n  out += \"} \";\n  if ($breakOnError) {\n    out += \" else { \";\n  }\n  return out;\n};\nvar multipleOf = function generate_multipleOf(it, $keyword, $ruleType) {\n  var out = \" \";\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema2 = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + \"/\" + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = \"data\" + ($dataLvl || \"\");\n  var $isData = it.opts.$data && $schema2 && $schema2.$data, $schemaValue;\n  if ($isData) {\n    out += \" var schema\" + $lvl + \" = \" + it.util.getData($schema2.$data, $dataLvl, it.dataPathArr) + \"; \";\n    $schemaValue = \"schema\" + $lvl;\n  } else {\n    $schemaValue = $schema2;\n  }\n  if (!($isData || typeof $schema2 == \"number\")) {\n    throw new Error($keyword + \" must be number\");\n  }\n  out += \"var division\" + $lvl + \";if (\";\n  if ($isData) {\n    out += \" \" + $schemaValue + \" !== undefined && ( typeof \" + $schemaValue + \" != 'number' || \";\n  }\n  out += \" (division\" + $lvl + \" = \" + $data + \" / \" + $schemaValue + \", \";\n  if (it.opts.multipleOfPrecision) {\n    out += \" Math.abs(Math.round(division\" + $lvl + \") - division\" + $lvl + \") > 1e-\" + it.opts.multipleOfPrecision + \" \";\n  } else {\n    out += \" division\" + $lvl + \" !== parseInt(division\" + $lvl + \") \";\n  }\n  out += \" ) \";\n  if ($isData) {\n    out += \"  )  \";\n  }\n  out += \" ) {   \";\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = \"\";\n  if (it.createErrors !== false) {\n    out += \" { keyword: 'multipleOf' , dataPath: (dataPath || '') + \" + it.errorPath + \" , schemaPath: \" + it.util.toQuotedString($errSchemaPath) + \" , params: { multipleOf: \" + $schemaValue + \" } \";\n    if (it.opts.messages !== false) {\n      out += \" , message: 'should be multiple of \";\n      if ($isData) {\n        out += \"' + \" + $schemaValue;\n      } else {\n        out += \"\" + $schemaValue + \"'\";\n      }\n    }\n    if (it.opts.verbose) {\n      out += \" , schema:  \";\n      if ($isData) {\n        out += \"validate.schema\" + $schemaPath;\n      } else {\n        out += \"\" + $schema2;\n      }\n      out += \"         , parentSchema: validate.schema\" + it.schemaPath + \" , data: \" + $data + \" \";\n    }\n    out += \" } \";\n  } else {\n    out += \" {} \";\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    if (it.async) {\n      out += \" throw new ValidationError([\" + __err + \"]); \";\n    } else {\n      out += \" validate.errors = [\" + __err + \"]; return false; \";\n    }\n  } else {\n    out += \" var err = \" + __err + \";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \";\n  }\n  out += \"} \";\n  if ($breakOnError) {\n    out += \" else { \";\n  }\n  return out;\n};\nvar not2 = function generate_not(it, $keyword, $ruleType) {\n  var out = \" \";\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema2 = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + \"/\" + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = \"data\" + ($dataLvl || \"\");\n  var $errs = \"errs__\" + $lvl;\n  var $it = it.util.copy(it);\n  $it.level++;\n  var $nextValid = \"valid\" + $it.level;\n  if (it.opts.strictKeywords ? typeof $schema2 == \"object\" && Object.keys($schema2).length > 0 || $schema2 === false : it.util.schemaHasRules($schema2, it.RULES.all)) {\n    $it.schema = $schema2;\n    $it.schemaPath = $schemaPath;\n    $it.errSchemaPath = $errSchemaPath;\n    out += \" var \" + $errs + \" = errors;  \";\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    $it.createErrors = false;\n    var $allErrorsOption;\n    if ($it.opts.allErrors) {\n      $allErrorsOption = $it.opts.allErrors;\n      $it.opts.allErrors = false;\n    }\n    out += \" \" + it.validate($it) + \" \";\n    $it.createErrors = true;\n    if ($allErrorsOption)\n      $it.opts.allErrors = $allErrorsOption;\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    out += \" if (\" + $nextValid + \") {   \";\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = \"\";\n    if (it.createErrors !== false) {\n      out += \" { keyword: 'not' , dataPath: (dataPath || '') + \" + it.errorPath + \" , schemaPath: \" + it.util.toQuotedString($errSchemaPath) + \" , params: {} \";\n      if (it.opts.messages !== false) {\n        out += \" , message: 'should NOT be valid' \";\n      }\n      if (it.opts.verbose) {\n        out += \" , schema: validate.schema\" + $schemaPath + \" , parentSchema: validate.schema\" + it.schemaPath + \" , data: \" + $data + \" \";\n      }\n      out += \" } \";\n    } else {\n      out += \" {} \";\n    }\n    var __err = out;\n    out = $$outStack.pop();\n    if (!it.compositeRule && $breakOnError) {\n      if (it.async) {\n        out += \" throw new ValidationError([\" + __err + \"]); \";\n      } else {\n        out += \" validate.errors = [\" + __err + \"]; return false; \";\n      }\n    } else {\n      out += \" var err = \" + __err + \";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \";\n    }\n    out += \" } else {  errors = \" + $errs + \"; if (vErrors !== null) { if (\" + $errs + \") vErrors.length = \" + $errs + \"; else vErrors = null; } \";\n    if (it.opts.allErrors) {\n      out += \" } \";\n    }\n  } else {\n    out += \"  var err =   \";\n    if (it.createErrors !== false) {\n      out += \" { keyword: 'not' , dataPath: (dataPath || '') + \" + it.errorPath + \" , schemaPath: \" + it.util.toQuotedString($errSchemaPath) + \" , params: {} \";\n      if (it.opts.messages !== false) {\n        out += \" , message: 'should NOT be valid' \";\n      }\n      if (it.opts.verbose) {\n        out += \" , schema: validate.schema\" + $schemaPath + \" , parentSchema: validate.schema\" + it.schemaPath + \" , data: \" + $data + \" \";\n      }\n      out += \" } \";\n    } else {\n      out += \" {} \";\n    }\n    out += \";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \";\n    if ($breakOnError) {\n      out += \" if (false) { \";\n    }\n  }\n  return out;\n};\nvar oneOf = function generate_oneOf(it, $keyword, $ruleType) {\n  var out = \" \";\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema2 = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + \"/\" + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = \"data\" + ($dataLvl || \"\");\n  var $valid = \"valid\" + $lvl;\n  var $errs = \"errs__\" + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = \"\";\n  $it.level++;\n  var $nextValid = \"valid\" + $it.level;\n  var $currentBaseId = $it.baseId, $prevValid = \"prevValid\" + $lvl, $passingSchemas = \"passingSchemas\" + $lvl;\n  out += \"var \" + $errs + \" = errors , \" + $prevValid + \" = false , \" + $valid + \" = false , \" + $passingSchemas + \" = null; \";\n  var $wasComposite = it.compositeRule;\n  it.compositeRule = $it.compositeRule = true;\n  var arr1 = $schema2;\n  if (arr1) {\n    var $sch, $i = -1, l1 = arr1.length - 1;\n    while ($i < l1) {\n      $sch = arr1[$i += 1];\n      if (it.opts.strictKeywords ? typeof $sch == \"object\" && Object.keys($sch).length > 0 || $sch === false : it.util.schemaHasRules($sch, it.RULES.all)) {\n        $it.schema = $sch;\n        $it.schemaPath = $schemaPath + \"[\" + $i + \"]\";\n        $it.errSchemaPath = $errSchemaPath + \"/\" + $i;\n        out += \"  \" + it.validate($it) + \" \";\n        $it.baseId = $currentBaseId;\n      } else {\n        out += \" var \" + $nextValid + \" = true; \";\n      }\n      if ($i) {\n        out += \" if (\" + $nextValid + \" && \" + $prevValid + \") { \" + $valid + \" = false; \" + $passingSchemas + \" = [\" + $passingSchemas + \", \" + $i + \"]; } else { \";\n        $closingBraces += \"}\";\n      }\n      out += \" if (\" + $nextValid + \") { \" + $valid + \" = \" + $prevValid + \" = true; \" + $passingSchemas + \" = \" + $i + \"; }\";\n    }\n  }\n  it.compositeRule = $it.compositeRule = $wasComposite;\n  out += \"\" + $closingBraces + \"if (!\" + $valid + \") {   var err =   \";\n  if (it.createErrors !== false) {\n    out += \" { keyword: 'oneOf' , dataPath: (dataPath || '') + \" + it.errorPath + \" , schemaPath: \" + it.util.toQuotedString($errSchemaPath) + \" , params: { passingSchemas: \" + $passingSchemas + \" } \";\n    if (it.opts.messages !== false) {\n      out += \" , message: 'should match exactly one schema in oneOf' \";\n    }\n    if (it.opts.verbose) {\n      out += \" , schema: validate.schema\" + $schemaPath + \" , parentSchema: validate.schema\" + it.schemaPath + \" , data: \" + $data + \" \";\n    }\n    out += \" } \";\n  } else {\n    out += \" {} \";\n  }\n  out += \";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \";\n  if (!it.compositeRule && $breakOnError) {\n    if (it.async) {\n      out += \" throw new ValidationError(vErrors); \";\n    } else {\n      out += \" validate.errors = vErrors; return false; \";\n    }\n  }\n  out += \"} else {  errors = \" + $errs + \"; if (vErrors !== null) { if (\" + $errs + \") vErrors.length = \" + $errs + \"; else vErrors = null; }\";\n  if (it.opts.allErrors) {\n    out += \" } \";\n  }\n  return out;\n};\nvar pattern = function generate_pattern(it, $keyword, $ruleType) {\n  var out = \" \";\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema2 = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + \"/\" + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = \"data\" + ($dataLvl || \"\");\n  var $isData = it.opts.$data && $schema2 && $schema2.$data, $schemaValue;\n  if ($isData) {\n    out += \" var schema\" + $lvl + \" = \" + it.util.getData($schema2.$data, $dataLvl, it.dataPathArr) + \"; \";\n    $schemaValue = \"schema\" + $lvl;\n  } else {\n    $schemaValue = $schema2;\n  }\n  var $regexp = $isData ? \"(new RegExp(\" + $schemaValue + \"))\" : it.usePattern($schema2);\n  out += \"if ( \";\n  if ($isData) {\n    out += \" (\" + $schemaValue + \" !== undefined && typeof \" + $schemaValue + \" != 'string') || \";\n  }\n  out += \" !\" + $regexp + \".test(\" + $data + \") ) {   \";\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = \"\";\n  if (it.createErrors !== false) {\n    out += \" { keyword: 'pattern' , dataPath: (dataPath || '') + \" + it.errorPath + \" , schemaPath: \" + it.util.toQuotedString($errSchemaPath) + \" , params: { pattern:  \";\n    if ($isData) {\n      out += \"\" + $schemaValue;\n    } else {\n      out += \"\" + it.util.toQuotedString($schema2);\n    }\n    out += \"  } \";\n    if (it.opts.messages !== false) {\n      out += ` , message: 'should match pattern \"`;\n      if ($isData) {\n        out += \"' + \" + $schemaValue + \" + '\";\n      } else {\n        out += \"\" + it.util.escapeQuotes($schema2);\n      }\n      out += `\"' `;\n    }\n    if (it.opts.verbose) {\n      out += \" , schema:  \";\n      if ($isData) {\n        out += \"validate.schema\" + $schemaPath;\n      } else {\n        out += \"\" + it.util.toQuotedString($schema2);\n      }\n      out += \"         , parentSchema: validate.schema\" + it.schemaPath + \" , data: \" + $data + \" \";\n    }\n    out += \" } \";\n  } else {\n    out += \" {} \";\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    if (it.async) {\n      out += \" throw new ValidationError([\" + __err + \"]); \";\n    } else {\n      out += \" validate.errors = [\" + __err + \"]; return false; \";\n    }\n  } else {\n    out += \" var err = \" + __err + \";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \";\n  }\n  out += \"} \";\n  if ($breakOnError) {\n    out += \" else { \";\n  }\n  return out;\n};\nvar properties$2 = function generate_properties(it, $keyword, $ruleType) {\n  var out = \" \";\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema2 = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + \"/\" + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = \"data\" + ($dataLvl || \"\");\n  var $errs = \"errs__\" + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = \"\";\n  $it.level++;\n  var $nextValid = \"valid\" + $it.level;\n  var $key = \"key\" + $lvl, $idx = \"idx\" + $lvl, $dataNxt = $it.dataLevel = it.dataLevel + 1, $nextData = \"data\" + $dataNxt, $dataProperties = \"dataProperties\" + $lvl;\n  var $schemaKeys = Object.keys($schema2 || {}).filter(notProto), $pProperties = it.schema.patternProperties || {}, $pPropertyKeys = Object.keys($pProperties).filter(notProto), $aProperties = it.schema.additionalProperties, $someProperties = $schemaKeys.length || $pPropertyKeys.length, $noAdditional = $aProperties === false, $additionalIsSchema = typeof $aProperties == \"object\" && Object.keys($aProperties).length, $removeAdditional = it.opts.removeAdditional, $checkAdditional = $noAdditional || $additionalIsSchema || $removeAdditional, $ownProperties = it.opts.ownProperties, $currentBaseId = it.baseId;\n  var $required = it.schema.required;\n  if ($required && !(it.opts.$data && $required.$data) && $required.length < it.opts.loopRequired) {\n    var $requiredHash = it.util.toHash($required);\n  }\n  function notProto(p) {\n    return p !== \"__proto__\";\n  }\n  out += \"var \" + $errs + \" = errors;var \" + $nextValid + \" = true;\";\n  if ($ownProperties) {\n    out += \" var \" + $dataProperties + \" = undefined;\";\n  }\n  if ($checkAdditional) {\n    if ($ownProperties) {\n      out += \" \" + $dataProperties + \" = \" + $dataProperties + \" || Object.keys(\" + $data + \"); for (var \" + $idx + \"=0; \" + $idx + \"<\" + $dataProperties + \".length; \" + $idx + \"++) { var \" + $key + \" = \" + $dataProperties + \"[\" + $idx + \"]; \";\n    } else {\n      out += \" for (var \" + $key + \" in \" + $data + \") { \";\n    }\n    if ($someProperties) {\n      out += \" var isAdditional\" + $lvl + \" = !(false \";\n      if ($schemaKeys.length) {\n        if ($schemaKeys.length > 8) {\n          out += \" || validate.schema\" + $schemaPath + \".hasOwnProperty(\" + $key + \") \";\n        } else {\n          var arr1 = $schemaKeys;\n          if (arr1) {\n            var $propertyKey, i1 = -1, l1 = arr1.length - 1;\n            while (i1 < l1) {\n              $propertyKey = arr1[i1 += 1];\n              out += \" || \" + $key + \" == \" + it.util.toQuotedString($propertyKey) + \" \";\n            }\n          }\n        }\n      }\n      if ($pPropertyKeys.length) {\n        var arr2 = $pPropertyKeys;\n        if (arr2) {\n          var $pProperty, $i = -1, l2 = arr2.length - 1;\n          while ($i < l2) {\n            $pProperty = arr2[$i += 1];\n            out += \" || \" + it.usePattern($pProperty) + \".test(\" + $key + \") \";\n          }\n        }\n      }\n      out += \" ); if (isAdditional\" + $lvl + \") { \";\n    }\n    if ($removeAdditional == \"all\") {\n      out += \" delete \" + $data + \"[\" + $key + \"]; \";\n    } else {\n      var $currentErrorPath = it.errorPath;\n      var $additionalProperty = \"' + \" + $key + \" + '\";\n      if (it.opts._errorDataPathProperty) {\n        it.errorPath = it.util.getPathExpr(it.errorPath, $key, it.opts.jsonPointers);\n      }\n      if ($noAdditional) {\n        if ($removeAdditional) {\n          out += \" delete \" + $data + \"[\" + $key + \"]; \";\n        } else {\n          out += \" \" + $nextValid + \" = false; \";\n          var $currErrSchemaPath = $errSchemaPath;\n          $errSchemaPath = it.errSchemaPath + \"/additionalProperties\";\n          var $$outStack = $$outStack || [];\n          $$outStack.push(out);\n          out = \"\";\n          if (it.createErrors !== false) {\n            out += \" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + \" + it.errorPath + \" , schemaPath: \" + it.util.toQuotedString($errSchemaPath) + \" , params: { additionalProperty: '\" + $additionalProperty + \"' } \";\n            if (it.opts.messages !== false) {\n              out += \" , message: '\";\n              if (it.opts._errorDataPathProperty) {\n                out += \"is an invalid additional property\";\n              } else {\n                out += \"should NOT have additional properties\";\n              }\n              out += \"' \";\n            }\n            if (it.opts.verbose) {\n              out += \" , schema: false , parentSchema: validate.schema\" + it.schemaPath + \" , data: \" + $data + \" \";\n            }\n            out += \" } \";\n          } else {\n            out += \" {} \";\n          }\n          var __err = out;\n          out = $$outStack.pop();\n          if (!it.compositeRule && $breakOnError) {\n            if (it.async) {\n              out += \" throw new ValidationError([\" + __err + \"]); \";\n            } else {\n              out += \" validate.errors = [\" + __err + \"]; return false; \";\n            }\n          } else {\n            out += \" var err = \" + __err + \";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \";\n          }\n          $errSchemaPath = $currErrSchemaPath;\n          if ($breakOnError) {\n            out += \" break; \";\n          }\n        }\n      } else if ($additionalIsSchema) {\n        if ($removeAdditional == \"failing\") {\n          out += \" var \" + $errs + \" = errors;  \";\n          var $wasComposite = it.compositeRule;\n          it.compositeRule = $it.compositeRule = true;\n          $it.schema = $aProperties;\n          $it.schemaPath = it.schemaPath + \".additionalProperties\";\n          $it.errSchemaPath = it.errSchemaPath + \"/additionalProperties\";\n          $it.errorPath = it.opts._errorDataPathProperty ? it.errorPath : it.util.getPathExpr(it.errorPath, $key, it.opts.jsonPointers);\n          var $passData = $data + \"[\" + $key + \"]\";\n          $it.dataPathArr[$dataNxt] = $key;\n          var $code = it.validate($it);\n          $it.baseId = $currentBaseId;\n          if (it.util.varOccurences($code, $nextData) < 2) {\n            out += \" \" + it.util.varReplace($code, $nextData, $passData) + \" \";\n          } else {\n            out += \" var \" + $nextData + \" = \" + $passData + \"; \" + $code + \" \";\n          }\n          out += \" if (!\" + $nextValid + \") { errors = \" + $errs + \"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete \" + $data + \"[\" + $key + \"]; }  \";\n          it.compositeRule = $it.compositeRule = $wasComposite;\n        } else {\n          $it.schema = $aProperties;\n          $it.schemaPath = it.schemaPath + \".additionalProperties\";\n          $it.errSchemaPath = it.errSchemaPath + \"/additionalProperties\";\n          $it.errorPath = it.opts._errorDataPathProperty ? it.errorPath : it.util.getPathExpr(it.errorPath, $key, it.opts.jsonPointers);\n          var $passData = $data + \"[\" + $key + \"]\";\n          $it.dataPathArr[$dataNxt] = $key;\n          var $code = it.validate($it);\n          $it.baseId = $currentBaseId;\n          if (it.util.varOccurences($code, $nextData) < 2) {\n            out += \" \" + it.util.varReplace($code, $nextData, $passData) + \" \";\n          } else {\n            out += \" var \" + $nextData + \" = \" + $passData + \"; \" + $code + \" \";\n          }\n          if ($breakOnError) {\n            out += \" if (!\" + $nextValid + \") break; \";\n          }\n        }\n      }\n      it.errorPath = $currentErrorPath;\n    }\n    if ($someProperties) {\n      out += \" } \";\n    }\n    out += \" }  \";\n    if ($breakOnError) {\n      out += \" if (\" + $nextValid + \") { \";\n      $closingBraces += \"}\";\n    }\n  }\n  var $useDefaults = it.opts.useDefaults && !it.compositeRule;\n  if ($schemaKeys.length) {\n    var arr3 = $schemaKeys;\n    if (arr3) {\n      var $propertyKey, i3 = -1, l3 = arr3.length - 1;\n      while (i3 < l3) {\n        $propertyKey = arr3[i3 += 1];\n        var $sch = $schema2[$propertyKey];\n        if (it.opts.strictKeywords ? typeof $sch == \"object\" && Object.keys($sch).length > 0 || $sch === false : it.util.schemaHasRules($sch, it.RULES.all)) {\n          var $prop = it.util.getProperty($propertyKey), $passData = $data + $prop, $hasDefault = $useDefaults && $sch.default !== void 0;\n          $it.schema = $sch;\n          $it.schemaPath = $schemaPath + $prop;\n          $it.errSchemaPath = $errSchemaPath + \"/\" + it.util.escapeFragment($propertyKey);\n          $it.errorPath = it.util.getPath(it.errorPath, $propertyKey, it.opts.jsonPointers);\n          $it.dataPathArr[$dataNxt] = it.util.toQuotedString($propertyKey);\n          var $code = it.validate($it);\n          $it.baseId = $currentBaseId;\n          if (it.util.varOccurences($code, $nextData) < 2) {\n            $code = it.util.varReplace($code, $nextData, $passData);\n            var $useData = $passData;\n          } else {\n            var $useData = $nextData;\n            out += \" var \" + $nextData + \" = \" + $passData + \"; \";\n          }\n          if ($hasDefault) {\n            out += \" \" + $code + \" \";\n          } else {\n            if ($requiredHash && $requiredHash[$propertyKey]) {\n              out += \" if ( \" + $useData + \" === undefined \";\n              if ($ownProperties) {\n                out += \" || ! Object.prototype.hasOwnProperty.call(\" + $data + \", '\" + it.util.escapeQuotes($propertyKey) + \"') \";\n              }\n              out += \") { \" + $nextValid + \" = false; \";\n              var $currentErrorPath = it.errorPath, $currErrSchemaPath = $errSchemaPath, $missingProperty = it.util.escapeQuotes($propertyKey);\n              if (it.opts._errorDataPathProperty) {\n                it.errorPath = it.util.getPath($currentErrorPath, $propertyKey, it.opts.jsonPointers);\n              }\n              $errSchemaPath = it.errSchemaPath + \"/required\";\n              var $$outStack = $$outStack || [];\n              $$outStack.push(out);\n              out = \"\";\n              if (it.createErrors !== false) {\n                out += \" { keyword: 'required' , dataPath: (dataPath || '') + \" + it.errorPath + \" , schemaPath: \" + it.util.toQuotedString($errSchemaPath) + \" , params: { missingProperty: '\" + $missingProperty + \"' } \";\n                if (it.opts.messages !== false) {\n                  out += \" , message: '\";\n                  if (it.opts._errorDataPathProperty) {\n                    out += \"is a required property\";\n                  } else {\n                    out += \"should have required property \\\\'\" + $missingProperty + \"\\\\'\";\n                  }\n                  out += \"' \";\n                }\n                if (it.opts.verbose) {\n                  out += \" , schema: validate.schema\" + $schemaPath + \" , parentSchema: validate.schema\" + it.schemaPath + \" , data: \" + $data + \" \";\n                }\n                out += \" } \";\n              } else {\n                out += \" {} \";\n              }\n              var __err = out;\n              out = $$outStack.pop();\n              if (!it.compositeRule && $breakOnError) {\n                if (it.async) {\n                  out += \" throw new ValidationError([\" + __err + \"]); \";\n                } else {\n                  out += \" validate.errors = [\" + __err + \"]; return false; \";\n                }\n              } else {\n                out += \" var err = \" + __err + \";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \";\n              }\n              $errSchemaPath = $currErrSchemaPath;\n              it.errorPath = $currentErrorPath;\n              out += \" } else { \";\n            } else {\n              if ($breakOnError) {\n                out += \" if ( \" + $useData + \" === undefined \";\n                if ($ownProperties) {\n                  out += \" || ! Object.prototype.hasOwnProperty.call(\" + $data + \", '\" + it.util.escapeQuotes($propertyKey) + \"') \";\n                }\n                out += \") { \" + $nextValid + \" = true; } else { \";\n              } else {\n                out += \" if (\" + $useData + \" !== undefined \";\n                if ($ownProperties) {\n                  out += \" &&   Object.prototype.hasOwnProperty.call(\" + $data + \", '\" + it.util.escapeQuotes($propertyKey) + \"') \";\n                }\n                out += \" ) { \";\n              }\n            }\n            out += \" \" + $code + \" } \";\n          }\n        }\n        if ($breakOnError) {\n          out += \" if (\" + $nextValid + \") { \";\n          $closingBraces += \"}\";\n        }\n      }\n    }\n  }\n  if ($pPropertyKeys.length) {\n    var arr4 = $pPropertyKeys;\n    if (arr4) {\n      var $pProperty, i4 = -1, l4 = arr4.length - 1;\n      while (i4 < l4) {\n        $pProperty = arr4[i4 += 1];\n        var $sch = $pProperties[$pProperty];\n        if (it.opts.strictKeywords ? typeof $sch == \"object\" && Object.keys($sch).length > 0 || $sch === false : it.util.schemaHasRules($sch, it.RULES.all)) {\n          $it.schema = $sch;\n          $it.schemaPath = it.schemaPath + \".patternProperties\" + it.util.getProperty($pProperty);\n          $it.errSchemaPath = it.errSchemaPath + \"/patternProperties/\" + it.util.escapeFragment($pProperty);\n          if ($ownProperties) {\n            out += \" \" + $dataProperties + \" = \" + $dataProperties + \" || Object.keys(\" + $data + \"); for (var \" + $idx + \"=0; \" + $idx + \"<\" + $dataProperties + \".length; \" + $idx + \"++) { var \" + $key + \" = \" + $dataProperties + \"[\" + $idx + \"]; \";\n          } else {\n            out += \" for (var \" + $key + \" in \" + $data + \") { \";\n          }\n          out += \" if (\" + it.usePattern($pProperty) + \".test(\" + $key + \")) { \";\n          $it.errorPath = it.util.getPathExpr(it.errorPath, $key, it.opts.jsonPointers);\n          var $passData = $data + \"[\" + $key + \"]\";\n          $it.dataPathArr[$dataNxt] = $key;\n          var $code = it.validate($it);\n          $it.baseId = $currentBaseId;\n          if (it.util.varOccurences($code, $nextData) < 2) {\n            out += \" \" + it.util.varReplace($code, $nextData, $passData) + \" \";\n          } else {\n            out += \" var \" + $nextData + \" = \" + $passData + \"; \" + $code + \" \";\n          }\n          if ($breakOnError) {\n            out += \" if (!\" + $nextValid + \") break; \";\n          }\n          out += \" } \";\n          if ($breakOnError) {\n            out += \" else \" + $nextValid + \" = true; \";\n          }\n          out += \" }  \";\n          if ($breakOnError) {\n            out += \" if (\" + $nextValid + \") { \";\n            $closingBraces += \"}\";\n          }\n        }\n      }\n    }\n  }\n  if ($breakOnError) {\n    out += \" \" + $closingBraces + \" if (\" + $errs + \" == errors) {\";\n  }\n  return out;\n};\nvar propertyNames = function generate_propertyNames(it, $keyword, $ruleType) {\n  var out = \" \";\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema2 = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + \"/\" + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = \"data\" + ($dataLvl || \"\");\n  var $errs = \"errs__\" + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = \"\";\n  $it.level++;\n  var $nextValid = \"valid\" + $it.level;\n  out += \"var \" + $errs + \" = errors;\";\n  if (it.opts.strictKeywords ? typeof $schema2 == \"object\" && Object.keys($schema2).length > 0 || $schema2 === false : it.util.schemaHasRules($schema2, it.RULES.all)) {\n    $it.schema = $schema2;\n    $it.schemaPath = $schemaPath;\n    $it.errSchemaPath = $errSchemaPath;\n    var $key = \"key\" + $lvl, $idx = \"idx\" + $lvl, $i = \"i\" + $lvl, $invalidName = \"' + \" + $key + \" + '\", $dataNxt = $it.dataLevel = it.dataLevel + 1, $nextData = \"data\" + $dataNxt, $dataProperties = \"dataProperties\" + $lvl, $ownProperties = it.opts.ownProperties, $currentBaseId = it.baseId;\n    if ($ownProperties) {\n      out += \" var \" + $dataProperties + \" = undefined; \";\n    }\n    if ($ownProperties) {\n      out += \" \" + $dataProperties + \" = \" + $dataProperties + \" || Object.keys(\" + $data + \"); for (var \" + $idx + \"=0; \" + $idx + \"<\" + $dataProperties + \".length; \" + $idx + \"++) { var \" + $key + \" = \" + $dataProperties + \"[\" + $idx + \"]; \";\n    } else {\n      out += \" for (var \" + $key + \" in \" + $data + \") { \";\n    }\n    out += \" var startErrs\" + $lvl + \" = errors; \";\n    var $passData = $key;\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    var $code = it.validate($it);\n    $it.baseId = $currentBaseId;\n    if (it.util.varOccurences($code, $nextData) < 2) {\n      out += \" \" + it.util.varReplace($code, $nextData, $passData) + \" \";\n    } else {\n      out += \" var \" + $nextData + \" = \" + $passData + \"; \" + $code + \" \";\n    }\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    out += \" if (!\" + $nextValid + \") { for (var \" + $i + \"=startErrs\" + $lvl + \"; \" + $i + \"<errors; \" + $i + \"++) { vErrors[\" + $i + \"].propertyName = \" + $key + \"; }   var err =   \";\n    if (it.createErrors !== false) {\n      out += \" { keyword: 'propertyNames' , dataPath: (dataPath || '') + \" + it.errorPath + \" , schemaPath: \" + it.util.toQuotedString($errSchemaPath) + \" , params: { propertyName: '\" + $invalidName + \"' } \";\n      if (it.opts.messages !== false) {\n        out += \" , message: 'property name \\\\'\" + $invalidName + \"\\\\' is invalid' \";\n      }\n      if (it.opts.verbose) {\n        out += \" , schema: validate.schema\" + $schemaPath + \" , parentSchema: validate.schema\" + it.schemaPath + \" , data: \" + $data + \" \";\n      }\n      out += \" } \";\n    } else {\n      out += \" {} \";\n    }\n    out += \";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \";\n    if (!it.compositeRule && $breakOnError) {\n      if (it.async) {\n        out += \" throw new ValidationError(vErrors); \";\n      } else {\n        out += \" validate.errors = vErrors; return false; \";\n      }\n    }\n    if ($breakOnError) {\n      out += \" break; \";\n    }\n    out += \" } }\";\n  }\n  if ($breakOnError) {\n    out += \" \" + $closingBraces + \" if (\" + $errs + \" == errors) {\";\n  }\n  return out;\n};\nvar required$1 = function generate_required(it, $keyword, $ruleType) {\n  var out = \" \";\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema2 = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + \"/\" + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = \"data\" + ($dataLvl || \"\");\n  var $valid = \"valid\" + $lvl;\n  var $isData = it.opts.$data && $schema2 && $schema2.$data;\n  if ($isData) {\n    out += \" var schema\" + $lvl + \" = \" + it.util.getData($schema2.$data, $dataLvl, it.dataPathArr) + \"; \";\n  }\n  var $vSchema = \"schema\" + $lvl;\n  if (!$isData) {\n    if ($schema2.length < it.opts.loopRequired && it.schema.properties && Object.keys(it.schema.properties).length) {\n      var $required = [];\n      var arr1 = $schema2;\n      if (arr1) {\n        var $property, i1 = -1, l1 = arr1.length - 1;\n        while (i1 < l1) {\n          $property = arr1[i1 += 1];\n          var $propertySch = it.schema.properties[$property];\n          if (!($propertySch && (it.opts.strictKeywords ? typeof $propertySch == \"object\" && Object.keys($propertySch).length > 0 || $propertySch === false : it.util.schemaHasRules($propertySch, it.RULES.all)))) {\n            $required[$required.length] = $property;\n          }\n        }\n      }\n    } else {\n      var $required = $schema2;\n    }\n  }\n  if ($isData || $required.length) {\n    var $currentErrorPath = it.errorPath, $loopRequired = $isData || $required.length >= it.opts.loopRequired, $ownProperties = it.opts.ownProperties;\n    if ($breakOnError) {\n      out += \" var missing\" + $lvl + \"; \";\n      if ($loopRequired) {\n        if (!$isData) {\n          out += \" var \" + $vSchema + \" = validate.schema\" + $schemaPath + \"; \";\n        }\n        var $i = \"i\" + $lvl, $propertyPath = \"schema\" + $lvl + \"[\" + $i + \"]\", $missingProperty = \"' + \" + $propertyPath + \" + '\";\n        if (it.opts._errorDataPathProperty) {\n          it.errorPath = it.util.getPathExpr($currentErrorPath, $propertyPath, it.opts.jsonPointers);\n        }\n        out += \" var \" + $valid + \" = true; \";\n        if ($isData) {\n          out += \" if (schema\" + $lvl + \" === undefined) \" + $valid + \" = true; else if (!Array.isArray(schema\" + $lvl + \")) \" + $valid + \" = false; else {\";\n        }\n        out += \" for (var \" + $i + \" = 0; \" + $i + \" < \" + $vSchema + \".length; \" + $i + \"++) { \" + $valid + \" = \" + $data + \"[\" + $vSchema + \"[\" + $i + \"]] !== undefined \";\n        if ($ownProperties) {\n          out += \" &&   Object.prototype.hasOwnProperty.call(\" + $data + \", \" + $vSchema + \"[\" + $i + \"]) \";\n        }\n        out += \"; if (!\" + $valid + \") break; } \";\n        if ($isData) {\n          out += \"  }  \";\n        }\n        out += \"  if (!\" + $valid + \") {   \";\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = \"\";\n        if (it.createErrors !== false) {\n          out += \" { keyword: 'required' , dataPath: (dataPath || '') + \" + it.errorPath + \" , schemaPath: \" + it.util.toQuotedString($errSchemaPath) + \" , params: { missingProperty: '\" + $missingProperty + \"' } \";\n          if (it.opts.messages !== false) {\n            out += \" , message: '\";\n            if (it.opts._errorDataPathProperty) {\n              out += \"is a required property\";\n            } else {\n              out += \"should have required property \\\\'\" + $missingProperty + \"\\\\'\";\n            }\n            out += \"' \";\n          }\n          if (it.opts.verbose) {\n            out += \" , schema: validate.schema\" + $schemaPath + \" , parentSchema: validate.schema\" + it.schemaPath + \" , data: \" + $data + \" \";\n          }\n          out += \" } \";\n        } else {\n          out += \" {} \";\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) {\n          if (it.async) {\n            out += \" throw new ValidationError([\" + __err + \"]); \";\n          } else {\n            out += \" validate.errors = [\" + __err + \"]; return false; \";\n          }\n        } else {\n          out += \" var err = \" + __err + \";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \";\n        }\n        out += \" } else { \";\n      } else {\n        out += \" if ( \";\n        var arr2 = $required;\n        if (arr2) {\n          var $propertyKey, $i = -1, l2 = arr2.length - 1;\n          while ($i < l2) {\n            $propertyKey = arr2[$i += 1];\n            if ($i) {\n              out += \" || \";\n            }\n            var $prop = it.util.getProperty($propertyKey), $useData = $data + $prop;\n            out += \" ( ( \" + $useData + \" === undefined \";\n            if ($ownProperties) {\n              out += \" || ! Object.prototype.hasOwnProperty.call(\" + $data + \", '\" + it.util.escapeQuotes($propertyKey) + \"') \";\n            }\n            out += \") && (missing\" + $lvl + \" = \" + it.util.toQuotedString(it.opts.jsonPointers ? $propertyKey : $prop) + \") ) \";\n          }\n        }\n        out += \") {  \";\n        var $propertyPath = \"missing\" + $lvl, $missingProperty = \"' + \" + $propertyPath + \" + '\";\n        if (it.opts._errorDataPathProperty) {\n          it.errorPath = it.opts.jsonPointers ? it.util.getPathExpr($currentErrorPath, $propertyPath, true) : $currentErrorPath + \" + \" + $propertyPath;\n        }\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = \"\";\n        if (it.createErrors !== false) {\n          out += \" { keyword: 'required' , dataPath: (dataPath || '') + \" + it.errorPath + \" , schemaPath: \" + it.util.toQuotedString($errSchemaPath) + \" , params: { missingProperty: '\" + $missingProperty + \"' } \";\n          if (it.opts.messages !== false) {\n            out += \" , message: '\";\n            if (it.opts._errorDataPathProperty) {\n              out += \"is a required property\";\n            } else {\n              out += \"should have required property \\\\'\" + $missingProperty + \"\\\\'\";\n            }\n            out += \"' \";\n          }\n          if (it.opts.verbose) {\n            out += \" , schema: validate.schema\" + $schemaPath + \" , parentSchema: validate.schema\" + it.schemaPath + \" , data: \" + $data + \" \";\n          }\n          out += \" } \";\n        } else {\n          out += \" {} \";\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) {\n          if (it.async) {\n            out += \" throw new ValidationError([\" + __err + \"]); \";\n          } else {\n            out += \" validate.errors = [\" + __err + \"]; return false; \";\n          }\n        } else {\n          out += \" var err = \" + __err + \";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \";\n        }\n        out += \" } else { \";\n      }\n    } else {\n      if ($loopRequired) {\n        if (!$isData) {\n          out += \" var \" + $vSchema + \" = validate.schema\" + $schemaPath + \"; \";\n        }\n        var $i = \"i\" + $lvl, $propertyPath = \"schema\" + $lvl + \"[\" + $i + \"]\", $missingProperty = \"' + \" + $propertyPath + \" + '\";\n        if (it.opts._errorDataPathProperty) {\n          it.errorPath = it.util.getPathExpr($currentErrorPath, $propertyPath, it.opts.jsonPointers);\n        }\n        if ($isData) {\n          out += \" if (\" + $vSchema + \" && !Array.isArray(\" + $vSchema + \")) {  var err =   \";\n          if (it.createErrors !== false) {\n            out += \" { keyword: 'required' , dataPath: (dataPath || '') + \" + it.errorPath + \" , schemaPath: \" + it.util.toQuotedString($errSchemaPath) + \" , params: { missingProperty: '\" + $missingProperty + \"' } \";\n            if (it.opts.messages !== false) {\n              out += \" , message: '\";\n              if (it.opts._errorDataPathProperty) {\n                out += \"is a required property\";\n              } else {\n                out += \"should have required property \\\\'\" + $missingProperty + \"\\\\'\";\n              }\n              out += \"' \";\n            }\n            if (it.opts.verbose) {\n              out += \" , schema: validate.schema\" + $schemaPath + \" , parentSchema: validate.schema\" + it.schemaPath + \" , data: \" + $data + \" \";\n            }\n            out += \" } \";\n          } else {\n            out += \" {} \";\n          }\n          out += \";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if (\" + $vSchema + \" !== undefined) { \";\n        }\n        out += \" for (var \" + $i + \" = 0; \" + $i + \" < \" + $vSchema + \".length; \" + $i + \"++) { if (\" + $data + \"[\" + $vSchema + \"[\" + $i + \"]] === undefined \";\n        if ($ownProperties) {\n          out += \" || ! Object.prototype.hasOwnProperty.call(\" + $data + \", \" + $vSchema + \"[\" + $i + \"]) \";\n        }\n        out += \") {  var err =   \";\n        if (it.createErrors !== false) {\n          out += \" { keyword: 'required' , dataPath: (dataPath || '') + \" + it.errorPath + \" , schemaPath: \" + it.util.toQuotedString($errSchemaPath) + \" , params: { missingProperty: '\" + $missingProperty + \"' } \";\n          if (it.opts.messages !== false) {\n            out += \" , message: '\";\n            if (it.opts._errorDataPathProperty) {\n              out += \"is a required property\";\n            } else {\n              out += \"should have required property \\\\'\" + $missingProperty + \"\\\\'\";\n            }\n            out += \"' \";\n          }\n          if (it.opts.verbose) {\n            out += \" , schema: validate.schema\" + $schemaPath + \" , parentSchema: validate.schema\" + it.schemaPath + \" , data: \" + $data + \" \";\n          }\n          out += \" } \";\n        } else {\n          out += \" {} \";\n        }\n        out += \";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } \";\n        if ($isData) {\n          out += \"  }  \";\n        }\n      } else {\n        var arr3 = $required;\n        if (arr3) {\n          var $propertyKey, i3 = -1, l3 = arr3.length - 1;\n          while (i3 < l3) {\n            $propertyKey = arr3[i3 += 1];\n            var $prop = it.util.getProperty($propertyKey), $missingProperty = it.util.escapeQuotes($propertyKey), $useData = $data + $prop;\n            if (it.opts._errorDataPathProperty) {\n              it.errorPath = it.util.getPath($currentErrorPath, $propertyKey, it.opts.jsonPointers);\n            }\n            out += \" if ( \" + $useData + \" === undefined \";\n            if ($ownProperties) {\n              out += \" || ! Object.prototype.hasOwnProperty.call(\" + $data + \", '\" + it.util.escapeQuotes($propertyKey) + \"') \";\n            }\n            out += \") {  var err =   \";\n            if (it.createErrors !== false) {\n              out += \" { keyword: 'required' , dataPath: (dataPath || '') + \" + it.errorPath + \" , schemaPath: \" + it.util.toQuotedString($errSchemaPath) + \" , params: { missingProperty: '\" + $missingProperty + \"' } \";\n              if (it.opts.messages !== false) {\n                out += \" , message: '\";\n                if (it.opts._errorDataPathProperty) {\n                  out += \"is a required property\";\n                } else {\n                  out += \"should have required property \\\\'\" + $missingProperty + \"\\\\'\";\n                }\n                out += \"' \";\n              }\n              if (it.opts.verbose) {\n                out += \" , schema: validate.schema\" + $schemaPath + \" , parentSchema: validate.schema\" + it.schemaPath + \" , data: \" + $data + \" \";\n              }\n              out += \" } \";\n            } else {\n              out += \" {} \";\n            }\n            out += \";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } \";\n          }\n        }\n      }\n    }\n    it.errorPath = $currentErrorPath;\n  } else if ($breakOnError) {\n    out += \" if (true) {\";\n  }\n  return out;\n};\nvar uniqueItems = function generate_uniqueItems(it, $keyword, $ruleType) {\n  var out = \" \";\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema2 = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + \"/\" + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = \"data\" + ($dataLvl || \"\");\n  var $valid = \"valid\" + $lvl;\n  var $isData = it.opts.$data && $schema2 && $schema2.$data, $schemaValue;\n  if ($isData) {\n    out += \" var schema\" + $lvl + \" = \" + it.util.getData($schema2.$data, $dataLvl, it.dataPathArr) + \"; \";\n    $schemaValue = \"schema\" + $lvl;\n  } else {\n    $schemaValue = $schema2;\n  }\n  if (($schema2 || $isData) && it.opts.uniqueItems !== false) {\n    if ($isData) {\n      out += \" var \" + $valid + \"; if (\" + $schemaValue + \" === false || \" + $schemaValue + \" === undefined) \" + $valid + \" = true; else if (typeof \" + $schemaValue + \" != 'boolean') \" + $valid + \" = false; else { \";\n    }\n    out += \" var i = \" + $data + \".length , \" + $valid + \" = true , j; if (i > 1) { \";\n    var $itemType = it.schema.items && it.schema.items.type, $typeIsArray = Array.isArray($itemType);\n    if (!$itemType || $itemType == \"object\" || $itemType == \"array\" || $typeIsArray && ($itemType.indexOf(\"object\") >= 0 || $itemType.indexOf(\"array\") >= 0)) {\n      out += \" outer: for (;i--;) { for (j = i; j--;) { if (equal(\" + $data + \"[i], \" + $data + \"[j])) { \" + $valid + \" = false; break outer; } } } \";\n    } else {\n      out += \" var itemIndices = {}, item; for (;i--;) { var item = \" + $data + \"[i]; \";\n      var $method = \"checkDataType\" + ($typeIsArray ? \"s\" : \"\");\n      out += \" if (\" + it.util[$method]($itemType, \"item\", it.opts.strictNumbers, true) + \") continue; \";\n      if ($typeIsArray) {\n        out += ` if (typeof item == 'string') item = '\"' + item; `;\n      }\n      out += \" if (typeof itemIndices[item] == 'number') { \" + $valid + \" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } \";\n    }\n    out += \" } \";\n    if ($isData) {\n      out += \"  }  \";\n    }\n    out += \" if (!\" + $valid + \") {   \";\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = \"\";\n    if (it.createErrors !== false) {\n      out += \" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + \" + it.errorPath + \" , schemaPath: \" + it.util.toQuotedString($errSchemaPath) + \" , params: { i: i, j: j } \";\n      if (it.opts.messages !== false) {\n        out += \" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' \";\n      }\n      if (it.opts.verbose) {\n        out += \" , schema:  \";\n        if ($isData) {\n          out += \"validate.schema\" + $schemaPath;\n        } else {\n          out += \"\" + $schema2;\n        }\n        out += \"         , parentSchema: validate.schema\" + it.schemaPath + \" , data: \" + $data + \" \";\n      }\n      out += \" } \";\n    } else {\n      out += \" {} \";\n    }\n    var __err = out;\n    out = $$outStack.pop();\n    if (!it.compositeRule && $breakOnError) {\n      if (it.async) {\n        out += \" throw new ValidationError([\" + __err + \"]); \";\n      } else {\n        out += \" validate.errors = [\" + __err + \"]; return false; \";\n      }\n    } else {\n      out += \" var err = \" + __err + \";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \";\n    }\n    out += \" } \";\n    if ($breakOnError) {\n      out += \" else { \";\n    }\n  } else {\n    if ($breakOnError) {\n      out += \" if (true) { \";\n    }\n  }\n  return out;\n};\nvar dotjs = {\n  \"$ref\": ref,\n  allOf,\n  anyOf,\n  \"$comment\": comment,\n  const: _const,\n  contains,\n  dependencies,\n  \"enum\": _enum,\n  format,\n  \"if\": _if,\n  items,\n  maximum: _limit,\n  minimum: _limit,\n  maxItems: _limitItems,\n  minItems: _limitItems,\n  maxLength: _limitLength,\n  minLength: _limitLength,\n  maxProperties: _limitProperties,\n  minProperties: _limitProperties,\n  multipleOf,\n  not: not2,\n  oneOf,\n  pattern,\n  properties: properties$2,\n  propertyNames,\n  required: required$1,\n  uniqueItems,\n  validate: validate$1\n};\nvar ruleModules = dotjs, toHash = util$5.toHash;\nvar rules$1 = function rules() {\n  var RULES = [\n    {\n      type: \"number\",\n      rules: [\n        { \"maximum\": [\"exclusiveMaximum\"] },\n        { \"minimum\": [\"exclusiveMinimum\"] },\n        \"multipleOf\",\n        \"format\"\n      ]\n    },\n    {\n      type: \"string\",\n      rules: [\"maxLength\", \"minLength\", \"pattern\", \"format\"]\n    },\n    {\n      type: \"array\",\n      rules: [\"maxItems\", \"minItems\", \"items\", \"contains\", \"uniqueItems\"]\n    },\n    {\n      type: \"object\",\n      rules: [\n        \"maxProperties\",\n        \"minProperties\",\n        \"required\",\n        \"dependencies\",\n        \"propertyNames\",\n        { \"properties\": [\"additionalProperties\", \"patternProperties\"] }\n      ]\n    },\n    { rules: [\"$ref\", \"const\", \"enum\", \"not\", \"anyOf\", \"oneOf\", \"allOf\", \"if\"] }\n  ];\n  var ALL = [\"type\", \"$comment\"];\n  var KEYWORDS2 = [\n    \"$schema\",\n    \"$id\",\n    \"id\",\n    \"$data\",\n    \"$async\",\n    \"title\",\n    \"description\",\n    \"default\",\n    \"definitions\",\n    \"examples\",\n    \"readOnly\",\n    \"writeOnly\",\n    \"contentMediaType\",\n    \"contentEncoding\",\n    \"additionalItems\",\n    \"then\",\n    \"else\"\n  ];\n  var TYPES = [\"number\", \"integer\", \"string\", \"array\", \"object\", \"boolean\", \"null\"];\n  RULES.all = toHash(ALL);\n  RULES.types = toHash(TYPES);\n  RULES.forEach(function(group2) {\n    group2.rules = group2.rules.map(function(keyword2) {\n      var implKeywords;\n      if (typeof keyword2 == \"object\") {\n        var key = Object.keys(keyword2)[0];\n        implKeywords = keyword2[key];\n        keyword2 = key;\n        implKeywords.forEach(function(k) {\n          ALL.push(k);\n          RULES.all[k] = true;\n        });\n      }\n      ALL.push(keyword2);\n      var rule = RULES.all[keyword2] = {\n        keyword: keyword2,\n        code: ruleModules[keyword2],\n        implements: implKeywords\n      };\n      return rule;\n    });\n    RULES.all.$comment = {\n      keyword: \"$comment\",\n      code: ruleModules.$comment\n    };\n    if (group2.type)\n      RULES.types[group2.type] = group2;\n  });\n  RULES.keywords = toHash(ALL.concat(KEYWORDS2));\n  RULES.custom = {};\n  return RULES;\n};\nvar KEYWORDS = [\n  \"multipleOf\",\n  \"maximum\",\n  \"exclusiveMaximum\",\n  \"minimum\",\n  \"exclusiveMinimum\",\n  \"maxLength\",\n  \"minLength\",\n  \"pattern\",\n  \"additionalItems\",\n  \"maxItems\",\n  \"minItems\",\n  \"uniqueItems\",\n  \"maxProperties\",\n  \"minProperties\",\n  \"required\",\n  \"additionalProperties\",\n  \"enum\",\n  \"format\",\n  \"const\"\n];\nvar data = function(metaSchema2, keywordsJsonPointers) {\n  for (var i = 0; i < keywordsJsonPointers.length; i++) {\n    metaSchema2 = JSON.parse(JSON.stringify(metaSchema2));\n    var segments = keywordsJsonPointers[i].split(\"/\");\n    var keywords = metaSchema2;\n    var j;\n    for (j = 1; j < segments.length; j++)\n      keywords = keywords[segments[j]];\n    for (j = 0; j < KEYWORDS.length; j++) {\n      var key = KEYWORDS[j];\n      var schema = keywords[key];\n      if (schema) {\n        keywords[key] = {\n          anyOf: [\n            schema,\n            { $ref: \"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#\" }\n          ]\n        };\n      }\n    }\n  }\n  return metaSchema2;\n};\nvar MissingRefError = error_classes.MissingRef;\nvar async = compileAsync;\nfunction compileAsync(schema, meta, callback) {\n  var self2 = this;\n  if (typeof this._opts.loadSchema != \"function\")\n    throw new Error(\"options.loadSchema should be a function\");\n  if (typeof meta == \"function\") {\n    callback = meta;\n    meta = void 0;\n  }\n  var p = loadMetaSchemaOf(schema).then(function() {\n    var schemaObj = self2._addSchema(schema, void 0, meta);\n    return schemaObj.validate || _compileAsync(schemaObj);\n  });\n  if (callback) {\n    p.then(function(v) {\n      callback(null, v);\n    }, callback);\n  }\n  return p;\n  function loadMetaSchemaOf(sch) {\n    var $schema2 = sch.$schema;\n    return $schema2 && !self2.getSchema($schema2) ? compileAsync.call(self2, { $ref: $schema2 }, true) : Promise.resolve();\n  }\n  function _compileAsync(schemaObj) {\n    try {\n      return self2._compile(schemaObj);\n    } catch (e) {\n      if (e instanceof MissingRefError)\n        return loadMissingSchema(e);\n      throw e;\n    }\n    function loadMissingSchema(e) {\n      var ref2 = e.missingSchema;\n      if (added(ref2))\n        throw new Error(\"Schema \" + ref2 + \" is loaded but \" + e.missingRef + \" cannot be resolved\");\n      var schemaPromise = self2._loadingSchemas[ref2];\n      if (!schemaPromise) {\n        schemaPromise = self2._loadingSchemas[ref2] = self2._opts.loadSchema(ref2);\n        schemaPromise.then(removePromise, removePromise);\n      }\n      return schemaPromise.then(function(sch) {\n        if (!added(ref2)) {\n          return loadMetaSchemaOf(sch).then(function() {\n            if (!added(ref2))\n              self2.addSchema(sch, ref2, void 0, meta);\n          });\n        }\n      }).then(function() {\n        return _compileAsync(schemaObj);\n      });\n      function removePromise() {\n        delete self2._loadingSchemas[ref2];\n      }\n      function added(ref3) {\n        return self2._refs[ref3] || self2._schemas[ref3];\n      }\n    }\n  }\n}\nvar custom = function generate_custom(it, $keyword, $ruleType) {\n  var out = \" \";\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema2 = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + \"/\" + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $errorKeyword;\n  var $data = \"data\" + ($dataLvl || \"\");\n  var $valid = \"valid\" + $lvl;\n  var $errs = \"errs__\" + $lvl;\n  var $isData = it.opts.$data && $schema2 && $schema2.$data, $schemaValue;\n  if ($isData) {\n    out += \" var schema\" + $lvl + \" = \" + it.util.getData($schema2.$data, $dataLvl, it.dataPathArr) + \"; \";\n    $schemaValue = \"schema\" + $lvl;\n  } else {\n    $schemaValue = $schema2;\n  }\n  var $rule = this, $definition = \"definition\" + $lvl, $rDef = $rule.definition, $closingBraces = \"\";\n  var $compile, $inline, $macro, $ruleValidate, $validateCode;\n  if ($isData && $rDef.$data) {\n    $validateCode = \"keywordValidate\" + $lvl;\n    var $validateSchema = $rDef.validateSchema;\n    out += \" var \" + $definition + \" = RULES.custom['\" + $keyword + \"'].definition; var \" + $validateCode + \" = \" + $definition + \".validate;\";\n  } else {\n    $ruleValidate = it.useCustomRule($rule, $schema2, it.schema, it);\n    if (!$ruleValidate)\n      return;\n    $schemaValue = \"validate.schema\" + $schemaPath;\n    $validateCode = $ruleValidate.code;\n    $compile = $rDef.compile;\n    $inline = $rDef.inline;\n    $macro = $rDef.macro;\n  }\n  var $ruleErrs = $validateCode + \".errors\", $i = \"i\" + $lvl, $ruleErr = \"ruleErr\" + $lvl, $asyncKeyword = $rDef.async;\n  if ($asyncKeyword && !it.async)\n    throw new Error(\"async keyword in sync schema\");\n  if (!($inline || $macro)) {\n    out += \"\" + $ruleErrs + \" = null;\";\n  }\n  out += \"var \" + $errs + \" = errors;var \" + $valid + \";\";\n  if ($isData && $rDef.$data) {\n    $closingBraces += \"}\";\n    out += \" if (\" + $schemaValue + \" === undefined) { \" + $valid + \" = true; } else { \";\n    if ($validateSchema) {\n      $closingBraces += \"}\";\n      out += \" \" + $valid + \" = \" + $definition + \".validateSchema(\" + $schemaValue + \"); if (\" + $valid + \") { \";\n    }\n  }\n  if ($inline) {\n    if ($rDef.statements) {\n      out += \" \" + $ruleValidate.validate + \" \";\n    } else {\n      out += \" \" + $valid + \" = \" + $ruleValidate.validate + \"; \";\n    }\n  } else if ($macro) {\n    var $it = it.util.copy(it);\n    var $closingBraces = \"\";\n    $it.level++;\n    var $nextValid = \"valid\" + $it.level;\n    $it.schema = $ruleValidate.validate;\n    $it.schemaPath = \"\";\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    var $code = it.validate($it).replace(/validate\\.schema/g, $validateCode);\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    out += \" \" + $code;\n  } else {\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = \"\";\n    out += \"  \" + $validateCode + \".call( \";\n    if (it.opts.passContext) {\n      out += \"this\";\n    } else {\n      out += \"self\";\n    }\n    if ($compile || $rDef.schema === false) {\n      out += \" , \" + $data + \" \";\n    } else {\n      out += \" , \" + $schemaValue + \" , \" + $data + \" , validate.schema\" + it.schemaPath + \" \";\n    }\n    out += \" , (dataPath || '')\";\n    if (it.errorPath != '\"\"') {\n      out += \" + \" + it.errorPath;\n    }\n    var $parentData = $dataLvl ? \"data\" + ($dataLvl - 1 || \"\") : \"parentData\", $parentDataProperty = $dataLvl ? it.dataPathArr[$dataLvl] : \"parentDataProperty\";\n    out += \" , \" + $parentData + \" , \" + $parentDataProperty + \" , rootData )  \";\n    var def_callRuleValidate = out;\n    out = $$outStack.pop();\n    if ($rDef.errors === false) {\n      out += \" \" + $valid + \" = \";\n      if ($asyncKeyword) {\n        out += \"await \";\n      }\n      out += \"\" + def_callRuleValidate + \"; \";\n    } else {\n      if ($asyncKeyword) {\n        $ruleErrs = \"customErrors\" + $lvl;\n        out += \" var \" + $ruleErrs + \" = null; try { \" + $valid + \" = await \" + def_callRuleValidate + \"; } catch (e) { \" + $valid + \" = false; if (e instanceof ValidationError) \" + $ruleErrs + \" = e.errors; else throw e; } \";\n      } else {\n        out += \" \" + $ruleErrs + \" = null; \" + $valid + \" = \" + def_callRuleValidate + \"; \";\n      }\n    }\n  }\n  if ($rDef.modifying) {\n    out += \" if (\" + $parentData + \") \" + $data + \" = \" + $parentData + \"[\" + $parentDataProperty + \"];\";\n  }\n  out += \"\" + $closingBraces;\n  if ($rDef.valid) {\n    if ($breakOnError) {\n      out += \" if (true) { \";\n    }\n  } else {\n    out += \" if ( \";\n    if ($rDef.valid === void 0) {\n      out += \" !\";\n      if ($macro) {\n        out += \"\" + $nextValid;\n      } else {\n        out += \"\" + $valid;\n      }\n    } else {\n      out += \" \" + !$rDef.valid + \" \";\n    }\n    out += \") { \";\n    $errorKeyword = $rule.keyword;\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = \"\";\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = \"\";\n    if (it.createErrors !== false) {\n      out += \" { keyword: '\" + ($errorKeyword || \"custom\") + \"' , dataPath: (dataPath || '') + \" + it.errorPath + \" , schemaPath: \" + it.util.toQuotedString($errSchemaPath) + \" , params: { keyword: '\" + $rule.keyword + \"' } \";\n      if (it.opts.messages !== false) {\n        out += ` , message: 'should pass \"` + $rule.keyword + `\" keyword validation' `;\n      }\n      if (it.opts.verbose) {\n        out += \" , schema: validate.schema\" + $schemaPath + \" , parentSchema: validate.schema\" + it.schemaPath + \" , data: \" + $data + \" \";\n      }\n      out += \" } \";\n    } else {\n      out += \" {} \";\n    }\n    var __err = out;\n    out = $$outStack.pop();\n    if (!it.compositeRule && $breakOnError) {\n      if (it.async) {\n        out += \" throw new ValidationError([\" + __err + \"]); \";\n      } else {\n        out += \" validate.errors = [\" + __err + \"]; return false; \";\n      }\n    } else {\n      out += \" var err = \" + __err + \";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \";\n    }\n    var def_customError = out;\n    out = $$outStack.pop();\n    if ($inline) {\n      if ($rDef.errors) {\n        if ($rDef.errors != \"full\") {\n          out += \"  for (var \" + $i + \"=\" + $errs + \"; \" + $i + \"<errors; \" + $i + \"++) { var \" + $ruleErr + \" = vErrors[\" + $i + \"]; if (\" + $ruleErr + \".dataPath === undefined) \" + $ruleErr + \".dataPath = (dataPath || '') + \" + it.errorPath + \"; if (\" + $ruleErr + \".schemaPath === undefined) { \" + $ruleErr + '.schemaPath = \"' + $errSchemaPath + '\"; } ';\n          if (it.opts.verbose) {\n            out += \" \" + $ruleErr + \".schema = \" + $schemaValue + \"; \" + $ruleErr + \".data = \" + $data + \"; \";\n          }\n          out += \" } \";\n        }\n      } else {\n        if ($rDef.errors === false) {\n          out += \" \" + def_customError + \" \";\n        } else {\n          out += \" if (\" + $errs + \" == errors) { \" + def_customError + \" } else {  for (var \" + $i + \"=\" + $errs + \"; \" + $i + \"<errors; \" + $i + \"++) { var \" + $ruleErr + \" = vErrors[\" + $i + \"]; if (\" + $ruleErr + \".dataPath === undefined) \" + $ruleErr + \".dataPath = (dataPath || '') + \" + it.errorPath + \"; if (\" + $ruleErr + \".schemaPath === undefined) { \" + $ruleErr + '.schemaPath = \"' + $errSchemaPath + '\"; } ';\n          if (it.opts.verbose) {\n            out += \" \" + $ruleErr + \".schema = \" + $schemaValue + \"; \" + $ruleErr + \".data = \" + $data + \"; \";\n          }\n          out += \" } } \";\n        }\n      }\n    } else if ($macro) {\n      out += \"   var err =   \";\n      if (it.createErrors !== false) {\n        out += \" { keyword: '\" + ($errorKeyword || \"custom\") + \"' , dataPath: (dataPath || '') + \" + it.errorPath + \" , schemaPath: \" + it.util.toQuotedString($errSchemaPath) + \" , params: { keyword: '\" + $rule.keyword + \"' } \";\n        if (it.opts.messages !== false) {\n          out += ` , message: 'should pass \"` + $rule.keyword + `\" keyword validation' `;\n        }\n        if (it.opts.verbose) {\n          out += \" , schema: validate.schema\" + $schemaPath + \" , parentSchema: validate.schema\" + it.schemaPath + \" , data: \" + $data + \" \";\n        }\n        out += \" } \";\n      } else {\n        out += \" {} \";\n      }\n      out += \";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \";\n      if (!it.compositeRule && $breakOnError) {\n        if (it.async) {\n          out += \" throw new ValidationError(vErrors); \";\n        } else {\n          out += \" validate.errors = vErrors; return false; \";\n        }\n      }\n    } else {\n      if ($rDef.errors === false) {\n        out += \" \" + def_customError + \" \";\n      } else {\n        out += \" if (Array.isArray(\" + $ruleErrs + \")) { if (vErrors === null) vErrors = \" + $ruleErrs + \"; else vErrors = vErrors.concat(\" + $ruleErrs + \"); errors = vErrors.length;  for (var \" + $i + \"=\" + $errs + \"; \" + $i + \"<errors; \" + $i + \"++) { var \" + $ruleErr + \" = vErrors[\" + $i + \"]; if (\" + $ruleErr + \".dataPath === undefined) \" + $ruleErr + \".dataPath = (dataPath || '') + \" + it.errorPath + \";  \" + $ruleErr + '.schemaPath = \"' + $errSchemaPath + '\";  ';\n        if (it.opts.verbose) {\n          out += \" \" + $ruleErr + \".schema = \" + $schemaValue + \"; \" + $ruleErr + \".data = \" + $data + \"; \";\n        }\n        out += \" } } else { \" + def_customError + \" } \";\n      }\n    }\n    out += \" } \";\n    if ($breakOnError) {\n      out += \" else { \";\n    }\n  }\n  return out;\n};\nconst $schema$2 = \"http://json-schema.org/draft-07/schema#\";\nconst $id$1 = \"http://json-schema.org/draft-07/schema#\";\nconst title = \"Core schema meta-schema\";\nconst definitions$1 = {\n  schemaArray: {\n    type: \"array\",\n    minItems: 1,\n    items: {\n      $ref: \"#\"\n    }\n  },\n  nonNegativeInteger: {\n    type: \"integer\",\n    minimum: 0\n  },\n  nonNegativeIntegerDefault0: {\n    allOf: [\n      {\n        $ref: \"#/definitions/nonNegativeInteger\"\n      },\n      {\n        \"default\": 0\n      }\n    ]\n  },\n  simpleTypes: {\n    \"enum\": [\n      \"array\",\n      \"boolean\",\n      \"integer\",\n      \"null\",\n      \"number\",\n      \"object\",\n      \"string\"\n    ]\n  },\n  stringArray: {\n    type: \"array\",\n    items: {\n      type: \"string\"\n    },\n    uniqueItems: true,\n    \"default\": []\n  }\n};\nconst type$1 = [\n  \"object\",\n  \"boolean\"\n];\nconst properties$1 = {\n  $id: {\n    type: \"string\",\n    format: \"uri-reference\"\n  },\n  $schema: {\n    type: \"string\",\n    format: \"uri\"\n  },\n  $ref: {\n    type: \"string\",\n    format: \"uri-reference\"\n  },\n  $comment: {\n    type: \"string\"\n  },\n  title: {\n    type: \"string\"\n  },\n  description: {\n    type: \"string\"\n  },\n  \"default\": true,\n  readOnly: {\n    type: \"boolean\",\n    \"default\": false\n  },\n  examples: {\n    type: \"array\",\n    items: true\n  },\n  multipleOf: {\n    type: \"number\",\n    exclusiveMinimum: 0\n  },\n  maximum: {\n    type: \"number\"\n  },\n  exclusiveMaximum: {\n    type: \"number\"\n  },\n  minimum: {\n    type: \"number\"\n  },\n  exclusiveMinimum: {\n    type: \"number\"\n  },\n  maxLength: {\n    $ref: \"#/definitions/nonNegativeInteger\"\n  },\n  minLength: {\n    $ref: \"#/definitions/nonNegativeIntegerDefault0\"\n  },\n  pattern: {\n    type: \"string\",\n    format: \"regex\"\n  },\n  additionalItems: {\n    $ref: \"#\"\n  },\n  items: {\n    anyOf: [\n      {\n        $ref: \"#\"\n      },\n      {\n        $ref: \"#/definitions/schemaArray\"\n      }\n    ],\n    \"default\": true\n  },\n  maxItems: {\n    $ref: \"#/definitions/nonNegativeInteger\"\n  },\n  minItems: {\n    $ref: \"#/definitions/nonNegativeIntegerDefault0\"\n  },\n  uniqueItems: {\n    type: \"boolean\",\n    \"default\": false\n  },\n  contains: {\n    $ref: \"#\"\n  },\n  maxProperties: {\n    $ref: \"#/definitions/nonNegativeInteger\"\n  },\n  minProperties: {\n    $ref: \"#/definitions/nonNegativeIntegerDefault0\"\n  },\n  required: {\n    $ref: \"#/definitions/stringArray\"\n  },\n  additionalProperties: {\n    $ref: \"#\"\n  },\n  definitions: {\n    type: \"object\",\n    additionalProperties: {\n      $ref: \"#\"\n    },\n    \"default\": {}\n  },\n  properties: {\n    type: \"object\",\n    additionalProperties: {\n      $ref: \"#\"\n    },\n    \"default\": {}\n  },\n  patternProperties: {\n    type: \"object\",\n    additionalProperties: {\n      $ref: \"#\"\n    },\n    propertyNames: {\n      format: \"regex\"\n    },\n    \"default\": {}\n  },\n  dependencies: {\n    type: \"object\",\n    additionalProperties: {\n      anyOf: [\n        {\n          $ref: \"#\"\n        },\n        {\n          $ref: \"#/definitions/stringArray\"\n        }\n      ]\n    }\n  },\n  propertyNames: {\n    $ref: \"#\"\n  },\n  \"const\": true,\n  \"enum\": {\n    type: \"array\",\n    items: true,\n    minItems: 1,\n    uniqueItems: true\n  },\n  type: {\n    anyOf: [\n      {\n        $ref: \"#/definitions/simpleTypes\"\n      },\n      {\n        type: \"array\",\n        items: {\n          $ref: \"#/definitions/simpleTypes\"\n        },\n        minItems: 1,\n        uniqueItems: true\n      }\n    ]\n  },\n  format: {\n    type: \"string\"\n  },\n  contentMediaType: {\n    type: \"string\"\n  },\n  contentEncoding: {\n    type: \"string\"\n  },\n  \"if\": {\n    $ref: \"#\"\n  },\n  then: {\n    $ref: \"#\"\n  },\n  \"else\": {\n    $ref: \"#\"\n  },\n  allOf: {\n    $ref: \"#/definitions/schemaArray\"\n  },\n  anyOf: {\n    $ref: \"#/definitions/schemaArray\"\n  },\n  oneOf: {\n    $ref: \"#/definitions/schemaArray\"\n  },\n  not: {\n    $ref: \"#\"\n  }\n};\nvar require$$13 = {\n  $schema: $schema$2,\n  $id: $id$1,\n  title,\n  definitions: definitions$1,\n  type: type$1,\n  properties: properties$1,\n  \"default\": true\n};\nvar metaSchema = require$$13;\nvar definition_schema = {\n  $id: \"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js\",\n  definitions: {\n    simpleTypes: metaSchema.definitions.simpleTypes\n  },\n  type: \"object\",\n  dependencies: {\n    schema: [\"validate\"],\n    $data: [\"validate\"],\n    statements: [\"inline\"],\n    valid: { not: { required: [\"macro\"] } }\n  },\n  properties: {\n    type: metaSchema.properties.type,\n    schema: { type: \"boolean\" },\n    statements: { type: \"boolean\" },\n    dependencies: {\n      type: \"array\",\n      items: { type: \"string\" }\n    },\n    metaSchema: { type: \"object\" },\n    modifying: { type: \"boolean\" },\n    valid: { type: \"boolean\" },\n    $data: { type: \"boolean\" },\n    async: { type: \"boolean\" },\n    errors: {\n      anyOf: [\n        { type: \"boolean\" },\n        { const: \"full\" }\n      ]\n    }\n  }\n};\nvar IDENTIFIER = /^[a-z_$][a-z0-9_$-]*$/i;\nvar customRuleCode = custom;\nvar definitionSchema = definition_schema;\nvar keyword = {\n  add: addKeyword,\n  get: getKeyword,\n  remove: removeKeyword,\n  validate: validateKeyword\n};\nfunction addKeyword(keyword2, definition) {\n  var RULES = this.RULES;\n  if (RULES.keywords[keyword2])\n    throw new Error(\"Keyword \" + keyword2 + \" is already defined\");\n  if (!IDENTIFIER.test(keyword2))\n    throw new Error(\"Keyword \" + keyword2 + \" is not a valid identifier\");\n  if (definition) {\n    this.validateKeyword(definition, true);\n    var dataType = definition.type;\n    if (Array.isArray(dataType)) {\n      for (var i = 0; i < dataType.length; i++)\n        _addRule(keyword2, dataType[i], definition);\n    } else {\n      _addRule(keyword2, dataType, definition);\n    }\n    var metaSchema2 = definition.metaSchema;\n    if (metaSchema2) {\n      if (definition.$data && this._opts.$data) {\n        metaSchema2 = {\n          anyOf: [\n            metaSchema2,\n            { \"$ref\": \"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#\" }\n          ]\n        };\n      }\n      definition.validateSchema = this.compile(metaSchema2, true);\n    }\n  }\n  RULES.keywords[keyword2] = RULES.all[keyword2] = true;\n  function _addRule(keyword3, dataType2, definition2) {\n    var ruleGroup;\n    for (var i2 = 0; i2 < RULES.length; i2++) {\n      var rg = RULES[i2];\n      if (rg.type == dataType2) {\n        ruleGroup = rg;\n        break;\n      }\n    }\n    if (!ruleGroup) {\n      ruleGroup = { type: dataType2, rules: [] };\n      RULES.push(ruleGroup);\n    }\n    var rule = {\n      keyword: keyword3,\n      definition: definition2,\n      custom: true,\n      code: customRuleCode,\n      implements: definition2.implements\n    };\n    ruleGroup.rules.push(rule);\n    RULES.custom[keyword3] = rule;\n  }\n  return this;\n}\nfunction getKeyword(keyword2) {\n  var rule = this.RULES.custom[keyword2];\n  return rule ? rule.definition : this.RULES.keywords[keyword2] || false;\n}\nfunction removeKeyword(keyword2) {\n  var RULES = this.RULES;\n  delete RULES.keywords[keyword2];\n  delete RULES.all[keyword2];\n  delete RULES.custom[keyword2];\n  for (var i = 0; i < RULES.length; i++) {\n    var rules3 = RULES[i].rules;\n    for (var j = 0; j < rules3.length; j++) {\n      if (rules3[j].keyword == keyword2) {\n        rules3.splice(j, 1);\n        break;\n      }\n    }\n  }\n  return this;\n}\nfunction validateKeyword(definition, throwError2) {\n  validateKeyword.errors = null;\n  var v = this._validateKeyword = this._validateKeyword || this.compile(definitionSchema, true);\n  if (v(definition))\n    return true;\n  validateKeyword.errors = v.errors;\n  if (throwError2)\n    throw new Error(\"custom keyword definition is invalid: \" + this.errorsText(v.errors));\n  else\n    return false;\n}\nconst $schema$1 = \"http://json-schema.org/draft-07/schema#\";\nconst $id = \"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#\";\nconst description = \"Meta-schema for $data reference (JSON Schema extension proposal)\";\nconst type = \"object\";\nconst required = [\n  \"$data\"\n];\nconst properties = {\n  $data: {\n    type: \"string\",\n    anyOf: [\n      {\n        format: \"relative-json-pointer\"\n      },\n      {\n        format: \"json-pointer\"\n      }\n    ]\n  }\n};\nconst additionalProperties = false;\nvar require$$12 = {\n  $schema: $schema$1,\n  $id,\n  description,\n  type,\n  required,\n  properties,\n  additionalProperties\n};\nvar compileSchema = compile_1, resolve = resolve_1, Cache2 = cache.exports, SchemaObject = schema_obj, stableStringify = fastJsonStableStringify, formats = formats_1, rules2 = rules$1, $dataMetaSchema = data, util = util$5;\nvar ajv = Ajv;\nAjv.prototype.validate = validate;\nAjv.prototype.compile = compile$1;\nAjv.prototype.addSchema = addSchema;\nAjv.prototype.addMetaSchema = addMetaSchema;\nAjv.prototype.validateSchema = validateSchema;\nAjv.prototype.getSchema = getSchema;\nAjv.prototype.removeSchema = removeSchema;\nAjv.prototype.addFormat = addFormat;\nAjv.prototype.errorsText = errorsText;\nAjv.prototype._addSchema = _addSchema;\nAjv.prototype._compile = _compile;\nAjv.prototype.compileAsync = async;\nvar customKeyword = keyword;\nAjv.prototype.addKeyword = customKeyword.add;\nAjv.prototype.getKeyword = customKeyword.get;\nAjv.prototype.removeKeyword = customKeyword.remove;\nAjv.prototype.validateKeyword = customKeyword.validate;\nvar errorClasses = error_classes;\nAjv.ValidationError = errorClasses.Validation;\nAjv.MissingRefError = errorClasses.MissingRef;\nAjv.$dataMetaSchema = $dataMetaSchema;\nvar META_SCHEMA_ID = \"http://json-schema.org/draft-07/schema\";\nvar META_IGNORE_OPTIONS = [\"removeAdditional\", \"useDefaults\", \"coerceTypes\", \"strictDefaults\"];\nvar META_SUPPORT_DATA = [\"/properties\"];\nfunction Ajv(opts) {\n  if (!(this instanceof Ajv))\n    return new Ajv(opts);\n  opts = this._opts = util.copy(opts) || {};\n  setLogger(this);\n  this._schemas = {};\n  this._refs = {};\n  this._fragments = {};\n  this._formats = formats(opts.format);\n  this._cache = opts.cache || new Cache2();\n  this._loadingSchemas = {};\n  this._compilations = [];\n  this.RULES = rules2();\n  this._getId = chooseGetId(opts);\n  opts.loopRequired = opts.loopRequired || Infinity;\n  if (opts.errorDataPath == \"property\")\n    opts._errorDataPathProperty = true;\n  if (opts.serialize === void 0)\n    opts.serialize = stableStringify;\n  this._metaOpts = getMetaSchemaOptions(this);\n  if (opts.formats)\n    addInitialFormats(this);\n  if (opts.keywords)\n    addInitialKeywords(this);\n  addDefaultMetaSchema(this);\n  if (typeof opts.meta == \"object\")\n    this.addMetaSchema(opts.meta);\n  if (opts.nullable)\n    this.addKeyword(\"nullable\", { metaSchema: { type: \"boolean\" } });\n  addInitialSchemas(this);\n}\nfunction validate(schemaKeyRef, data2) {\n  var v;\n  if (typeof schemaKeyRef == \"string\") {\n    v = this.getSchema(schemaKeyRef);\n    if (!v)\n      throw new Error('no schema with key or ref \"' + schemaKeyRef + '\"');\n  } else {\n    var schemaObj = this._addSchema(schemaKeyRef);\n    v = schemaObj.validate || this._compile(schemaObj);\n  }\n  var valid = v(data2);\n  if (v.$async !== true)\n    this.errors = v.errors;\n  return valid;\n}\nfunction compile$1(schema, _meta) {\n  var schemaObj = this._addSchema(schema, void 0, _meta);\n  return schemaObj.validate || this._compile(schemaObj);\n}\nfunction addSchema(schema, key, _skipValidation, _meta) {\n  if (Array.isArray(schema)) {\n    for (var i = 0; i < schema.length; i++)\n      this.addSchema(schema[i], void 0, _skipValidation, _meta);\n    return this;\n  }\n  var id = this._getId(schema);\n  if (id !== void 0 && typeof id != \"string\")\n    throw new Error(\"schema id must be string\");\n  key = resolve.normalizeId(key || id);\n  checkUnique(this, key);\n  this._schemas[key] = this._addSchema(schema, _skipValidation, _meta, true);\n  return this;\n}\nfunction addMetaSchema(schema, key, skipValidation) {\n  this.addSchema(schema, key, skipValidation, true);\n  return this;\n}\nfunction validateSchema(schema, throwOrLogError) {\n  var $schema2 = schema.$schema;\n  if ($schema2 !== void 0 && typeof $schema2 != \"string\")\n    throw new Error(\"$schema must be a string\");\n  $schema2 = $schema2 || this._opts.defaultMeta || defaultMeta(this);\n  if (!$schema2) {\n    this.logger.warn(\"meta-schema not available\");\n    this.errors = null;\n    return true;\n  }\n  var valid = this.validate($schema2, schema);\n  if (!valid && throwOrLogError) {\n    var message = \"schema is invalid: \" + this.errorsText();\n    if (this._opts.validateSchema == \"log\")\n      this.logger.error(message);\n    else\n      throw new Error(message);\n  }\n  return valid;\n}\nfunction defaultMeta(self2) {\n  var meta = self2._opts.meta;\n  self2._opts.defaultMeta = typeof meta == \"object\" ? self2._getId(meta) || meta : self2.getSchema(META_SCHEMA_ID) ? META_SCHEMA_ID : void 0;\n  return self2._opts.defaultMeta;\n}\nfunction getSchema(keyRef) {\n  var schemaObj = _getSchemaObj(this, keyRef);\n  switch (typeof schemaObj) {\n    case \"object\":\n      return schemaObj.validate || this._compile(schemaObj);\n    case \"string\":\n      return this.getSchema(schemaObj);\n    case \"undefined\":\n      return _getSchemaFragment(this, keyRef);\n  }\n}\nfunction _getSchemaFragment(self2, ref2) {\n  var res = resolve.schema.call(self2, { schema: {} }, ref2);\n  if (res) {\n    var schema = res.schema, root = res.root, baseId = res.baseId;\n    var v = compileSchema.call(self2, schema, root, void 0, baseId);\n    self2._fragments[ref2] = new SchemaObject({\n      ref: ref2,\n      fragment: true,\n      schema,\n      root,\n      baseId,\n      validate: v\n    });\n    return v;\n  }\n}\nfunction _getSchemaObj(self2, keyRef) {\n  keyRef = resolve.normalizeId(keyRef);\n  return self2._schemas[keyRef] || self2._refs[keyRef] || self2._fragments[keyRef];\n}\nfunction removeSchema(schemaKeyRef) {\n  if (schemaKeyRef instanceof RegExp) {\n    _removeAllSchemas(this, this._schemas, schemaKeyRef);\n    _removeAllSchemas(this, this._refs, schemaKeyRef);\n    return this;\n  }\n  switch (typeof schemaKeyRef) {\n    case \"undefined\":\n      _removeAllSchemas(this, this._schemas);\n      _removeAllSchemas(this, this._refs);\n      this._cache.clear();\n      return this;\n    case \"string\":\n      var schemaObj = _getSchemaObj(this, schemaKeyRef);\n      if (schemaObj)\n        this._cache.del(schemaObj.cacheKey);\n      delete this._schemas[schemaKeyRef];\n      delete this._refs[schemaKeyRef];\n      return this;\n    case \"object\":\n      var serialize = this._opts.serialize;\n      var cacheKey = serialize ? serialize(schemaKeyRef) : schemaKeyRef;\n      this._cache.del(cacheKey);\n      var id = this._getId(schemaKeyRef);\n      if (id) {\n        id = resolve.normalizeId(id);\n        delete this._schemas[id];\n        delete this._refs[id];\n      }\n  }\n  return this;\n}\nfunction _removeAllSchemas(self2, schemas, regex2) {\n  for (var keyRef in schemas) {\n    var schemaObj = schemas[keyRef];\n    if (!schemaObj.meta && (!regex2 || regex2.test(keyRef))) {\n      self2._cache.del(schemaObj.cacheKey);\n      delete schemas[keyRef];\n    }\n  }\n}\nfunction _addSchema(schema, skipValidation, meta, shouldAddSchema) {\n  if (typeof schema != \"object\" && typeof schema != \"boolean\")\n    throw new Error(\"schema should be object or boolean\");\n  var serialize = this._opts.serialize;\n  var cacheKey = serialize ? serialize(schema) : schema;\n  var cached = this._cache.get(cacheKey);\n  if (cached)\n    return cached;\n  shouldAddSchema = shouldAddSchema || this._opts.addUsedSchema !== false;\n  var id = resolve.normalizeId(this._getId(schema));\n  if (id && shouldAddSchema)\n    checkUnique(this, id);\n  var willValidate = this._opts.validateSchema !== false && !skipValidation;\n  var recursiveMeta;\n  if (willValidate && !(recursiveMeta = id && id == resolve.normalizeId(schema.$schema)))\n    this.validateSchema(schema, true);\n  var localRefs = resolve.ids.call(this, schema);\n  var schemaObj = new SchemaObject({\n    id,\n    schema,\n    localRefs,\n    cacheKey,\n    meta\n  });\n  if (id[0] != \"#\" && shouldAddSchema)\n    this._refs[id] = schemaObj;\n  this._cache.put(cacheKey, schemaObj);\n  if (willValidate && recursiveMeta)\n    this.validateSchema(schema, true);\n  return schemaObj;\n}\nfunction _compile(schemaObj, root) {\n  if (schemaObj.compiling) {\n    schemaObj.validate = callValidate;\n    callValidate.schema = schemaObj.schema;\n    callValidate.errors = null;\n    callValidate.root = root ? root : callValidate;\n    if (schemaObj.schema.$async === true)\n      callValidate.$async = true;\n    return callValidate;\n  }\n  schemaObj.compiling = true;\n  var currentOpts;\n  if (schemaObj.meta) {\n    currentOpts = this._opts;\n    this._opts = this._metaOpts;\n  }\n  var v;\n  try {\n    v = compileSchema.call(this, schemaObj.schema, root, schemaObj.localRefs);\n  } catch (e) {\n    delete schemaObj.validate;\n    throw e;\n  } finally {\n    schemaObj.compiling = false;\n    if (schemaObj.meta)\n      this._opts = currentOpts;\n  }\n  schemaObj.validate = v;\n  schemaObj.refs = v.refs;\n  schemaObj.refVal = v.refVal;\n  schemaObj.root = v.root;\n  return v;\n  function callValidate() {\n    var _validate = schemaObj.validate;\n    var result = _validate.apply(this, arguments);\n    callValidate.errors = _validate.errors;\n    return result;\n  }\n}\nfunction chooseGetId(opts) {\n  switch (opts.schemaId) {\n    case \"auto\":\n      return _get$IdOrId;\n    case \"id\":\n      return _getId;\n    default:\n      return _get$Id;\n  }\n}\nfunction _getId(schema) {\n  if (schema.$id)\n    this.logger.warn(\"schema $id ignored\", schema.$id);\n  return schema.id;\n}\nfunction _get$Id(schema) {\n  if (schema.id)\n    this.logger.warn(\"schema id ignored\", schema.id);\n  return schema.$id;\n}\nfunction _get$IdOrId(schema) {\n  if (schema.$id && schema.id && schema.$id != schema.id)\n    throw new Error(\"schema $id is different from id\");\n  return schema.$id || schema.id;\n}\nfunction errorsText(errors, options) {\n  errors = errors || this.errors;\n  if (!errors)\n    return \"No errors\";\n  options = options || {};\n  var separator = options.separator === void 0 ? \", \" : options.separator;\n  var dataVar = options.dataVar === void 0 ? \"data\" : options.dataVar;\n  var text = \"\";\n  for (var i = 0; i < errors.length; i++) {\n    var e = errors[i];\n    if (e)\n      text += dataVar + e.dataPath + \" \" + e.message + separator;\n  }\n  return text.slice(0, -separator.length);\n}\nfunction addFormat(name2, format2) {\n  if (typeof format2 == \"string\")\n    format2 = new RegExp(format2);\n  this._formats[name2] = format2;\n  return this;\n}\nfunction addDefaultMetaSchema(self2) {\n  var $dataSchema;\n  if (self2._opts.$data) {\n    $dataSchema = require$$12;\n    self2.addMetaSchema($dataSchema, $dataSchema.$id, true);\n  }\n  if (self2._opts.meta === false)\n    return;\n  var metaSchema2 = require$$13;\n  if (self2._opts.$data)\n    metaSchema2 = $dataMetaSchema(metaSchema2, META_SUPPORT_DATA);\n  self2.addMetaSchema(metaSchema2, META_SCHEMA_ID, true);\n  self2._refs[\"http://json-schema.org/schema\"] = META_SCHEMA_ID;\n}\nfunction addInitialSchemas(self2) {\n  var optsSchemas = self2._opts.schemas;\n  if (!optsSchemas)\n    return;\n  if (Array.isArray(optsSchemas))\n    self2.addSchema(optsSchemas);\n  else\n    for (var key in optsSchemas)\n      self2.addSchema(optsSchemas[key], key);\n}\nfunction addInitialFormats(self2) {\n  for (var name2 in self2._opts.formats) {\n    var format2 = self2._opts.formats[name2];\n    self2.addFormat(name2, format2);\n  }\n}\nfunction addInitialKeywords(self2) {\n  for (var name2 in self2._opts.keywords) {\n    var keyword2 = self2._opts.keywords[name2];\n    self2.addKeyword(name2, keyword2);\n  }\n}\nfunction checkUnique(self2, id) {\n  if (self2._schemas[id] || self2._refs[id])\n    throw new Error('schema with key or id \"' + id + '\" already exists');\n}\nfunction getMetaSchemaOptions(self2) {\n  var metaOpts = util.copy(self2._opts);\n  for (var i = 0; i < META_IGNORE_OPTIONS.length; i++)\n    delete metaOpts[META_IGNORE_OPTIONS[i]];\n  return metaOpts;\n}\nfunction setLogger(self2) {\n  var logger = self2._opts.logger;\n  if (logger === false) {\n    self2.logger = { log: noop, warn: noop, error: noop };\n  } else {\n    if (logger === void 0)\n      logger = console;\n    if (!(typeof logger == \"object\" && logger.log && logger.warn && logger.error))\n      throw new Error(\"logger must implement log, warn and error methods\");\n    self2.logger = logger;\n  }\n}\nfunction noop() {\n}\nfunction validateGoslingSpec(spec) {\n  return validateSpec(GoslingSchema, spec);\n}\nfunction validateSpec(schema, spec, silence = false) {\n  const validate2 = new ajv({ extendRefs: true }).compile(schema);\n  const valid = validate2(spec);\n  let message = \"\";\n  let details = \"\";\n  if (validate2.errors) {\n    details = JSON.stringify(validate2.errors, null, 2);\n    if (!silence) {\n      console.warn(details);\n    }\n    message = \"\\u26A0\\uFE0F Some properties are incorrectly used.\";\n  }\n  return { state: valid ? \"success\" : \"warn\", message, details };\n}\nfunction validateTrack(track) {\n  let valid = true;\n  const errorMessages = [];\n  const resolvedTrack = resolveSuperposedTracks(track);\n  resolvedTrack.forEach((spec) => {\n    if (!getGenomicChannelFromTrack(spec) && spec.mark !== \"brush\" && spec.mark !== \"rule\") {\n      errorMessages.push(\"genomic type is not encoded to either a x- or y- axis\");\n      valid = false;\n    }\n    const color2 = spec.color;\n    if (spec.mark === \"line\" && IsChannelDeep(color2) && color2.type === \"quantitative\") {\n      errorMessages.push(\"`line` mark cannot be used with `quantitative` value\");\n      valid = false;\n    }\n  });\n  return { valid, errorMessages };\n}\nfunction getGenomicChannelFromTrack(track) {\n  let genomicChannel = void 0;\n  [\"x\", \"y\", \"xe\", \"ye\", \"x1\", \"y1\", \"x1e\", \"y1e\"].reverse().forEach((channelType) => {\n    const channel = track[channelType];\n    if (IsChannelDeep(channel) && channel.type === \"genomic\") {\n      genomicChannel = channel;\n    }\n  });\n  return genomicChannel;\n}\nfunction getGenomicChannelKeyFromTrack(track) {\n  let genomicChannelKey = void 0;\n  [\"x\", \"xe\", \"y\", \"ye\", \"x1\", \"y1\", \"x1e\", \"y1e\"].reverse().forEach((channelKey) => {\n    const channel = track[channelKey];\n    if (IsChannelDeep(channel) && channel.type === \"genomic\") {\n      genomicChannelKey = channelKey;\n    }\n  });\n  return genomicChannelKey;\n}\nconst $ref = \"#/definitions/HiGlassSpec\";\nconst $schema = \"http://json-schema.org/draft-07/schema#\";\nconst definitions = {\n  Assembly: {\n    \"enum\": [\n      \"hg38\",\n      \"hg19\",\n      \"hg18\",\n      \"hg17\",\n      \"hg16\",\n      \"mm10\",\n      \"mm9\",\n      \"unknown\"\n    ],\n    type: \"string\"\n  },\n  CombinedTrack: {\n    additionalProperties: false,\n    properties: {\n      contents: {\n        items: {\n          $ref: \"#/definitions/Track\"\n        },\n        type: \"array\"\n      },\n      height: {\n        type: \"number\"\n      },\n      options: {},\n      position: {\n        type: \"string\"\n      },\n      type: {\n        \"const\": \"combined\",\n        type: \"string\"\n      },\n      uid: {\n        type: \"string\"\n      },\n      width: {\n        type: \"number\"\n      }\n    },\n    required: [\n      \"type\",\n      \"contents\"\n    ],\n    type: \"object\"\n  },\n  Data: {\n    additionalProperties: false,\n    properties: {\n      assembly: {\n        $ref: \"#/definitions/Assembly\"\n      },\n      children: {\n        items: {},\n        type: \"array\"\n      },\n      filter: {\n        items: {\n          $ref: \"#/definitions/FilterTransform\"\n        },\n        type: \"array\"\n      },\n      tiles: {},\n      tilesetInfo: {},\n      type: {\n        type: \"string\"\n      },\n      url: {\n        type: \"string\"\n      }\n    },\n    type: \"object\"\n  },\n  EnumTrack: {\n    additionalProperties: false,\n    properties: {\n      chromInfoPath: {\n        type: \"string\"\n      },\n      data: {\n        $ref: \"#/definitions/Data\"\n      },\n      fromViewUid: {\n        type: [\n          \"null\",\n          \"string\"\n        ]\n      },\n      height: {\n        type: \"number\"\n      },\n      options: {},\n      server: {\n        type: \"string\"\n      },\n      tilesetUid: {\n        type: \"string\"\n      },\n      type: {\n        $ref: \"#/definitions/EnumTrackType\"\n      },\n      uid: {\n        type: \"string\"\n      },\n      width: {\n        type: \"number\"\n      },\n      x: {\n        type: \"number\"\n      },\n      y: {\n        type: \"number\"\n      }\n    },\n    required: [\n      \"type\"\n    ],\n    type: \"object\"\n  },\n  EnumTrackType: {\n    \"enum\": [\n      \"heatmap\",\n      \"2d-annotations\",\n      \"2d-chromosome-annotations\",\n      \"2d-chromosome-grid\",\n      \"2d-chromosome-labels\",\n      \"2d-rectangle-domains\",\n      \"2d-tiles\",\n      \"arrowhead-domains\",\n      \"bedlike\",\n      \"cross-rule\",\n      \"dummy\",\n      \"horizontal-1d-annotations\",\n      \"horizontal-1d-heatmap\",\n      \"horizontal-1d-tiles\",\n      \"horizontal-1d-value-interval\",\n      \"horizontal-2d-rectangle-domains\",\n      \"horizontal-bar\",\n      \"horizontal-chromosome-grid\",\n      \"horizontal-chromosome-labels\",\n      \"horizontal-divergent-bar\",\n      \"horizontal-gene-annotations\",\n      \"horizontal-heatmap\",\n      \"horizontal-line\",\n      \"horizontal-multivec\",\n      \"horizontal-point\",\n      \"horizontal-rule\",\n      \"horizontal-vector-heatmap\",\n      \"image-tiles\",\n      \"left-axis\",\n      \"left-stacked-interval\",\n      \"mapbox-tiles\",\n      \"osm-2d-tile-ids\",\n      \"osm-tiles\",\n      \"raster-tiles\",\n      \"simple-svg\",\n      \"square-markers\",\n      \"top-axis\",\n      \"top-stacked-interval\",\n      \"vertical-1d-annotations\",\n      \"vertical-1d-heatmap\",\n      \"vertical-1d-tiles\",\n      \"vertical-1d-value-interval\",\n      \"vertical-2d-rectangle-domains\",\n      \"vertical-bar\",\n      \"vertical-bedlike\",\n      \"vertical-chromosome-grid\",\n      \"vertical-chromosome-labels\",\n      \"vertical-gene-annotations\",\n      \"vertical-heatmap\",\n      \"vertical-line\",\n      \"vertical-multivec\",\n      \"vertical-point\",\n      \"vertical-rule\",\n      \"vertical-vector-heatmap\",\n      \"viewport-projection-center\",\n      \"viewport-projection-horizontal\",\n      \"viewport-projection-vertical\",\n      \"gosling-track\",\n      \"gosling-2d-track\",\n      \"axis-track\",\n      \"text\"\n    ],\n    type: \"string\"\n  },\n  FilterTransform: {\n    anyOf: [\n      {\n        $ref: \"#/definitions/OneOfFilter\"\n      },\n      {\n        $ref: \"#/definitions/RangeFilter\"\n      },\n      {\n        $ref: \"#/definitions/IncludeFilter\"\n      }\n    ]\n  },\n  GenericLocks: {\n    additionalProperties: false,\n    properties: {\n      locksByViewUid: {\n        $ref: \"#/definitions/LocksByViewUid\"\n      },\n      locksDict: {}\n    },\n    required: [\n      \"locksByViewUid\",\n      \"locksDict\"\n    ],\n    type: \"object\"\n  },\n  GenomePositionSearchBox: {\n    additionalProperties: false,\n    properties: {\n      autocompleteId: {\n        type: \"string\"\n      },\n      autocompleteServer: {\n        type: \"string\"\n      },\n      chromInfoId: {\n        type: \"string\"\n      },\n      chromInfoServer: {\n        type: \"string\"\n      },\n      visible: {\n        type: \"boolean\"\n      }\n    },\n    required: [\n      \"chromInfoId\",\n      \"chromInfoServer\"\n    ],\n    type: \"object\"\n  },\n  HeatmapTrack: {\n    additionalProperties: false,\n    properties: {\n      data: {\n        $ref: \"#/definitions/Data\"\n      },\n      height: {\n        type: \"number\"\n      },\n      options: {},\n      position: {\n        type: \"string\"\n      },\n      server: {\n        type: \"string\"\n      },\n      tilesetUid: {\n        type: \"string\"\n      },\n      type: {\n        \"const\": \"heatmap\",\n        type: \"string\"\n      },\n      uid: {\n        type: \"string\"\n      },\n      width: {\n        type: \"number\"\n      }\n    },\n    required: [\n      \"type\"\n    ],\n    type: \"object\"\n  },\n  HiGlassSpec: {\n    additionalProperties: false,\n    properties: {\n      chromInfoPath: {\n        type: \"string\"\n      },\n      compactLayout: {\n        type: \"boolean\"\n      },\n      editable: {\n        type: \"boolean\"\n      },\n      exportViewUrl: {\n        type: \"string\"\n      },\n      locationLocks: {\n        $ref: \"#/definitions/GenericLocks\"\n      },\n      trackSourceServers: {\n        items: {\n          type: \"string\"\n        },\n        type: \"array\"\n      },\n      tracksEditable: {\n        type: \"boolean\"\n      },\n      valueScaleLocks: {\n        $ref: \"#/definitions/ValueScaleLocks\"\n      },\n      viewEditable: {\n        type: \"boolean\"\n      },\n      views: {\n        items: {\n          $ref: \"#/definitions/View\"\n        },\n        type: \"array\"\n      },\n      zoomFixed: {\n        type: \"boolean\"\n      },\n      zoomLocks: {\n        $ref: \"#/definitions/GenericLocks\"\n      }\n    },\n    required: [\n      \"views\",\n      \"zoomLocks\",\n      \"locationLocks\"\n    ],\n    type: \"object\"\n  },\n  IncludeFilter: {\n    additionalProperties: false,\n    properties: {\n      field: {\n        description: \"A filter is applied based on the values of the specified data field\",\n        type: \"string\"\n      },\n      include: {\n        description: \"Check whether the value includes a substring.\",\n        type: \"string\"\n      },\n      not: {\n        description: 'when `{\"not\": true}`, apply a NOT logical operation to the filter.\\n\\n__Default:__ `false`',\n        type: \"boolean\"\n      },\n      type: {\n        \"const\": \"filter\",\n        type: \"string\"\n      }\n    },\n    required: [\n      \"field\",\n      \"include\",\n      \"type\"\n    ],\n    type: \"object\"\n  },\n  IndependentViewportProjectionTrack: {\n    additionalProperties: false,\n    properties: {\n      fromViewUid: {\n        type: \"null\"\n      },\n      options: {},\n      projectionXDomain: {\n        items: {\n          type: \"number\"\n        },\n        type: \"array\"\n      },\n      projectionYDomain: {\n        items: {\n          type: \"number\"\n        },\n        type: \"array\"\n      },\n      transforms: {\n        items: {},\n        type: \"array\"\n      },\n      type: {\n        \"enum\": [\n          \"viewport-projection-horizontal\",\n          \"viewport-projection-vertical\",\n          \"viewport-projection-center\"\n        ],\n        type: \"string\"\n      },\n      uid: {\n        type: \"string\"\n      },\n      width: {\n        type: \"number\"\n      },\n      x: {\n        type: \"number\"\n      },\n      y: {\n        type: \"number\"\n      }\n    },\n    required: [\n      \"type\"\n    ],\n    type: \"object\"\n  },\n  Layout: {\n    additionalProperties: false,\n    properties: {\n      h: {\n        type: \"number\"\n      },\n      w: {\n        type: \"number\"\n      },\n      x: {\n        type: \"number\"\n      },\n      y: {\n        type: \"number\"\n      }\n    },\n    required: [\n      \"h\",\n      \"w\",\n      \"x\",\n      \"y\"\n    ],\n    type: \"object\"\n  },\n  LocksByViewUid: {\n    additionalProperties: {\n      type: \"string\"\n    },\n    type: \"object\"\n  },\n  OneOfFilter: {\n    additionalProperties: false,\n    properties: {\n      field: {\n        description: \"A filter is applied based on the values of the specified data field\",\n        type: \"string\"\n      },\n      not: {\n        description: 'when `{\"not\": true}`, apply a NOT logical operation to the filter.\\n\\n__Default:__ `false`',\n        type: \"boolean\"\n      },\n      oneOf: {\n        anyOf: [\n          {\n            items: {\n              type: \"string\"\n            },\n            type: \"array\"\n          },\n          {\n            items: {\n              type: \"number\"\n            },\n            type: \"array\"\n          }\n        ],\n        description: \"Check whether the value is an element in the provided list.\"\n      },\n      type: {\n        \"const\": \"filter\",\n        type: \"string\"\n      }\n    },\n    required: [\n      \"field\",\n      \"oneOf\",\n      \"type\"\n    ],\n    type: \"object\"\n  },\n  Overlay: {\n    additionalProperties: false,\n    properties: {\n      chromInfoPath: {\n        type: \"string\"\n      },\n      includes: {\n        items: {},\n        type: \"array\"\n      },\n      options: {\n        $ref: \"#/definitions/OverlayOptions\"\n      },\n      type: {\n        type: \"string\"\n      },\n      uid: {\n        type: \"string\"\n      }\n    },\n    type: \"object\"\n  },\n  OverlayOptions: {\n    additionalProperties: false,\n    properties: {\n      extent: {\n        items: {},\n        type: \"array\"\n      },\n      fill: {\n        type: \"string\"\n      },\n      fillOpacity: {\n        type: \"number\"\n      },\n      minWidth: {\n        type: \"number\"\n      },\n      outline: {\n        type: \"string\"\n      },\n      outlineOpacity: {\n        type: \"number\"\n      },\n      outlinePos: {\n        anyOf: [\n          {\n            items: {},\n            type: \"array\"\n          },\n          {\n            type: \"string\"\n          }\n        ]\n      },\n      outlineWidth: {\n        type: \"number\"\n      },\n      stroke: {\n        type: \"string\"\n      },\n      strokeOpacity: {\n        type: \"number\"\n      },\n      strokePos: {\n        anyOf: [\n          {\n            items: {},\n            type: \"array\"\n          },\n          {\n            type: \"string\"\n          }\n        ]\n      },\n      strokeWidth: {\n        type: \"number\"\n      }\n    },\n    type: \"object\"\n  },\n  RangeFilter: {\n    additionalProperties: false,\n    properties: {\n      field: {\n        description: \"A filter is applied based on the values of the specified data field\",\n        type: \"string\"\n      },\n      inRange: {\n        description: \"Check whether the value is in a number range.\",\n        items: {\n          type: \"number\"\n        },\n        type: \"array\"\n      },\n      not: {\n        description: 'when `{\"not\": true}`, apply a NOT logical operation to the filter.\\n\\n__Default:__ `false`',\n        type: \"boolean\"\n      },\n      type: {\n        \"const\": \"filter\",\n        type: \"string\"\n      }\n    },\n    required: [\n      \"field\",\n      \"inRange\",\n      \"type\"\n    ],\n    type: \"object\"\n  },\n  Track: {\n    anyOf: [\n      {\n        $ref: \"#/definitions/HeatmapTrack\"\n      },\n      {\n        $ref: \"#/definitions/CombinedTrack\"\n      },\n      {\n        $ref: \"#/definitions/IndependentViewportProjectionTrack\"\n      },\n      {\n        $ref: \"#/definitions/EnumTrack\"\n      }\n    ]\n  },\n  Tracks: {\n    additionalProperties: false,\n    properties: {\n      bottom: {\n        items: {\n          $ref: \"#/definitions/Track\"\n        },\n        type: \"array\"\n      },\n      center: {\n        items: {\n          $ref: \"#/definitions/Track\"\n        },\n        type: \"array\"\n      },\n      gallery: {\n        items: {\n          $ref: \"#/definitions/Track\"\n        },\n        type: \"array\"\n      },\n      left: {\n        items: {\n          $ref: \"#/definitions/Track\"\n        },\n        type: \"array\"\n      },\n      right: {\n        items: {\n          $ref: \"#/definitions/Track\"\n        },\n        type: \"array\"\n      },\n      top: {\n        items: {\n          $ref: \"#/definitions/Track\"\n        },\n        type: \"array\"\n      },\n      whole: {\n        items: {\n          $ref: \"#/definitions/Track\"\n        },\n        type: \"array\"\n      }\n    },\n    required: [\n      \"top\",\n      \"left\",\n      \"center\",\n      \"right\",\n      \"bottom\",\n      \"gallery\",\n      \"whole\"\n    ],\n    type: \"object\"\n  },\n  ValueScaleLocks: {\n    additionalProperties: false,\n    properties: {\n      locksByViewUid: {\n        $ref: \"#/definitions/LocksByViewUid\"\n      },\n      locksDict: {}\n    },\n    required: [\n      \"locksByViewUid\"\n    ],\n    type: \"object\"\n  },\n  View: {\n    additionalProperties: false,\n    properties: {\n      autocompleteSource: {\n        type: \"string\"\n      },\n      chromInfoPath: {\n        type: \"string\"\n      },\n      genomePositionSearchBox: {\n        $ref: \"#/definitions/GenomePositionSearchBox\"\n      },\n      genomePositionSearchBoxVisible: {\n        type: \"boolean\"\n      },\n      initialXDomain: {\n        items: {\n          type: \"number\"\n        },\n        type: \"array\"\n      },\n      initialYDomain: {\n        items: {\n          type: \"number\"\n        },\n        type: \"array\"\n      },\n      layout: {\n        $ref: \"#/definitions/Layout\"\n      },\n      overlays: {\n        items: {\n          $ref: \"#/definitions/Overlay\"\n        },\n        type: \"array\"\n      },\n      selectionView: {\n        type: \"boolean\"\n      },\n      tracks: {\n        $ref: \"#/definitions/Tracks\"\n      },\n      uid: {\n        type: \"string\"\n      },\n      zoomFixed: {\n        type: \"boolean\"\n      },\n      zoomLimits: {\n        items: [\n          {\n            type: [\n              \"number\",\n              \"null\"\n            ]\n          },\n          {\n            type: [\n              \"number\",\n              \"null\"\n            ]\n          }\n        ],\n        maxItems: 2,\n        minItems: 2,\n        type: \"array\"\n      }\n    },\n    required: [\n      \"tracks\",\n      \"layout\"\n    ],\n    type: \"object\"\n  }\n};\nvar HiGlassSchema = {\n  $ref,\n  $schema,\n  definitions\n};\nfunction getNumericDomain(domain, assembly) {\n  if (\"chromosome\" in domain) {\n    if (domain.chromosome.includes(\"chr\")) {\n      domain.chromosome = domain.chromosome.replace(\"chr\", \"\");\n    }\n    if (!Object.keys(GET_CHROM_SIZES().interval).find((chr) => chr === `chr${domain.chromosome}`)) {\n      domain.chromosome = \"1\";\n    }\n  }\n  if (IsDomainChr(domain)) {\n    return [\n      GET_CHROM_SIZES(assembly).interval[`chr${domain.chromosome}`][0] + 1,\n      GET_CHROM_SIZES(assembly).interval[`chr${domain.chromosome}`][1]\n    ];\n  } else if (IsDomainInterval(domain)) {\n    return domain.interval;\n  } else if (IsDomainChrInterval(domain)) {\n    const chrStart = GET_CHROM_SIZES(assembly).interval[`chr${domain.chromosome}`][0];\n    const [start, end] = domain.interval;\n    return [chrStart + start, chrStart + end];\n  } else\n    ;\n}\nfunction shareScaleAcrossTracks(trackModels, force) {\n  const globalDomain = {};\n  const channelKeys = SUPPORTED_CHANNELS;\n  trackModels.forEach((model) => {\n    channelKeys.forEach((channelKey) => {\n      const channel = model.spec()[channelKey];\n      if (!IsChannelDeep(channel) || channel.domain === void 0) {\n        return;\n      }\n      const { domain, type: type2 } = channel;\n      if (type2 === \"quantitative\") {\n        const numericDomain = Array.from(domain);\n        if (!globalDomain[channelKey]) {\n          globalDomain[channelKey] = numericDomain;\n        } else {\n          if (globalDomain[channelKey][0] > numericDomain[0]) {\n            globalDomain[channelKey][0] = numericDomain[0];\n          }\n          if (globalDomain[channelKey][1] < numericDomain[1]) {\n            globalDomain[channelKey][1] = numericDomain[1];\n          }\n        }\n      } else if (type2 === \"nominal\") {\n        const nominalDomain = Array.from(domain);\n        if (!globalDomain[channelKey]) {\n          globalDomain[channelKey] = nominalDomain;\n        } else {\n          globalDomain[channelKey] = Array.from(/* @__PURE__ */ new Set([...globalDomain[channelKey], ...nominalDomain]));\n        }\n      }\n    });\n  });\n  trackModels.forEach((model) => {\n    channelKeys.forEach((channelKey) => {\n      const channel = model.spec()[channelKey];\n      if (IsChannelDeep(channel) && channel.type === \"genomic\")\n        return;\n      model.setChannelDomain(channelKey, globalDomain[channelKey], force);\n      model.generateScales();\n    });\n    model.updateChannelValue();\n  });\n}\nconst example = {\n  compactLayout: false,\n  trackSourceServers: [\"https://server.gosling-lang.org/api/v1/\"],\n  views: [\n    {\n      genomePositionSearchBoxVisible: false,\n      genomePositionSearchBox: {\n        autocompleteServer: \"https://higlass.io/api/v1\",\n        autocompleteId: \"P0PLbQMwTYGy-5uPIQid7A\",\n        chromInfoServer: \"https://higlass.io/api/v1\",\n        chromInfoId: \"hg38\"\n      },\n      layout: { x: 0, y: 0, w: 6.4, h: 600 },\n      tracks: {\n        top: [],\n        left: [\n          {\n            type: \"combined\",\n            width: 130,\n            height: 600,\n            contents: [\n              {\n                type: \"gosling-track\",\n                server: \"https://server.gosling-lang.org/api/v1/\",\n                tilesetUid: \"cistrome-multivec\",\n                width: 130,\n                height: 600,\n                options: {\n                  showMousePosition: true,\n                  mousePositionColor: \"#000000\",\n                  fontSize: 24,\n                  labelPosition: \"none\",\n                  labelShowResolution: false,\n                  labelColor: \"black\",\n                  labelBackgroundColor: \"white\",\n                  labelTextOpacity: 1,\n                  labelLeftMargin: 1,\n                  labelTopMargin: 1,\n                  labelRightMargin: 0,\n                  labelBottomMargin: 0,\n                  backgroundColor: \"transparent\",\n                  spec: {\n                    spacing: 10,\n                    orientation: \"vertical\",\n                    assembly: \"hg38\",\n                    layout: \"linear\",\n                    static: false,\n                    xDomain: { interval: [0, 1e9] },\n                    centerRadius: 0.3,\n                    xOffset: 0,\n                    yOffset: 0,\n                    style: { outlineWidth: 0.5 },\n                    data: {\n                      url: \"https://server.gosling-lang.org/api/v1/tileset_info/?d=cistrome-multivec\",\n                      type: \"multivec\",\n                      row: \"sample\",\n                      column: \"position\",\n                      value: \"peak\",\n                      categories: [\"sample 1\", \"sample 2\", \"sample 3\", \"sample 4\"],\n                      binSize: 4\n                    },\n                    mark: \"rect\",\n                    x: {\n                      field: \"start\",\n                      type: \"genomic\",\n                      axis: \"left\",\n                      domain: { interval: [0, 1e9] },\n                      linkingId: \"7f94b74e-25ec-4e67-8c75-3dc0f1b0d6bd\"\n                    },\n                    xe: { field: \"end\", type: \"genomic\" },\n                    row: {\n                      field: \"sample\",\n                      type: \"nominal\",\n                      legend: true\n                    },\n                    color: {\n                      field: \"peak\",\n                      type: \"quantitative\",\n                      legend: true\n                    },\n                    tooltip: [\n                      {\n                        field: \"start\",\n                        type: \"genomic\",\n                        alt: \"Start Position\"\n                      },\n                      {\n                        field: \"end\",\n                        type: \"genomic\",\n                        alt: \"End Position\"\n                      },\n                      {\n                        field: \"peak\",\n                        type: \"quantitative\",\n                        alt: \"Value\",\n                        format: \".2\"\n                      },\n                      { field: \"sample\", type: \"nominal\", alt: \"Sample\" }\n                    ],\n                    width: 160,\n                    height: 600,\n                    overlayOnPreviousTrack: false\n                  },\n                  theme: {\n                    base: \"light\",\n                    root: {\n                      background: \"white\",\n                      titleColor: \"black\",\n                      titleBackgroundColor: \"transparent\",\n                      titleFontSize: 18,\n                      titleFontFamily: \"Arial\",\n                      titleAlign: \"left\",\n                      titleFontWeight: \"bold\",\n                      subtitleColor: \"gray\",\n                      subtitleBackgroundColor: \"transparent\",\n                      subtitleFontSize: 16,\n                      subtitleFontFamily: \"Arial\",\n                      subtitleFontWeight: \"normal\",\n                      subtitleAlign: \"left\",\n                      mousePositionColor: \"#000000\"\n                    },\n                    track: {\n                      background: \"transparent\",\n                      alternatingBackground: \"transparent\",\n                      titleColor: \"black\",\n                      titleBackground: \"white\",\n                      titleFontSize: 24,\n                      titleAlign: \"left\",\n                      outline: \"black\",\n                      outlineWidth: 1\n                    },\n                    legend: {\n                      position: \"top\",\n                      background: \"white\",\n                      backgroundOpacity: 0.7,\n                      labelColor: \"black\",\n                      labelFontSize: 12,\n                      labelFontWeight: \"normal\",\n                      labelFontFamily: \"Arial\",\n                      backgroundStroke: \"#DBDBDB\",\n                      tickColor: \"black\"\n                    },\n                    axis: {\n                      tickColor: \"black\",\n                      labelColor: \"black\",\n                      labelFontSize: 12,\n                      labelFontWeight: \"normal\",\n                      labelFontFamily: \"Arial\",\n                      baselineColor: \"black\",\n                      gridColor: \"#E3E3E3\",\n                      gridStrokeWidth: 1,\n                      gridStrokeType: \"solid\",\n                      gridStrokeDash: [4, 4]\n                    },\n                    markCommon: {\n                      color: \"#E79F00\",\n                      size: 1,\n                      stroke: \"black\",\n                      strokeWidth: 0,\n                      opacity: 1,\n                      nominalColorRange: [\n                        \"#E79F00\",\n                        \"#029F73\",\n                        \"#0072B2\",\n                        \"#CB7AA7\",\n                        \"#D45E00\",\n                        \"#57B4E9\",\n                        \"#EFE441\"\n                      ],\n                      quantitativeSizeRange: [2, 6]\n                    },\n                    point: {\n                      color: \"#E79F00\",\n                      size: 3,\n                      stroke: \"black\",\n                      strokeWidth: 0,\n                      opacity: 1,\n                      nominalColorRange: [\n                        \"#E79F00\",\n                        \"#029F73\",\n                        \"#0072B2\",\n                        \"#CB7AA7\",\n                        \"#D45E00\",\n                        \"#57B4E9\",\n                        \"#EFE441\"\n                      ],\n                      quantitativeSizeRange: [2, 6]\n                    },\n                    rect: {\n                      color: \"#E79F00\",\n                      size: 1,\n                      stroke: \"black\",\n                      strokeWidth: 0,\n                      opacity: 1,\n                      nominalColorRange: [\n                        \"#E79F00\",\n                        \"#029F73\",\n                        \"#0072B2\",\n                        \"#CB7AA7\",\n                        \"#D45E00\",\n                        \"#57B4E9\",\n                        \"#EFE441\"\n                      ],\n                      quantitativeSizeRange: [2, 6]\n                    },\n                    triangle: {\n                      color: \"#E79F00\",\n                      size: 1,\n                      stroke: \"black\",\n                      strokeWidth: 0,\n                      opacity: 1,\n                      nominalColorRange: [\n                        \"#E79F00\",\n                        \"#029F73\",\n                        \"#0072B2\",\n                        \"#CB7AA7\",\n                        \"#D45E00\",\n                        \"#57B4E9\",\n                        \"#EFE441\"\n                      ],\n                      quantitativeSizeRange: [2, 6]\n                    },\n                    area: {\n                      color: \"#E79F00\",\n                      size: 1,\n                      stroke: \"black\",\n                      strokeWidth: 0,\n                      opacity: 1,\n                      nominalColorRange: [\n                        \"#E79F00\",\n                        \"#029F73\",\n                        \"#0072B2\",\n                        \"#CB7AA7\",\n                        \"#D45E00\",\n                        \"#57B4E9\",\n                        \"#EFE441\"\n                      ],\n                      quantitativeSizeRange: [2, 6]\n                    },\n                    line: {\n                      color: \"#E79F00\",\n                      size: 1,\n                      stroke: \"black\",\n                      strokeWidth: 0,\n                      opacity: 1,\n                      nominalColorRange: [\n                        \"#E79F00\",\n                        \"#029F73\",\n                        \"#0072B2\",\n                        \"#CB7AA7\",\n                        \"#D45E00\",\n                        \"#57B4E9\",\n                        \"#EFE441\"\n                      ],\n                      quantitativeSizeRange: [2, 6]\n                    },\n                    bar: {\n                      color: \"#E79F00\",\n                      size: 1,\n                      stroke: \"black\",\n                      strokeWidth: 0,\n                      opacity: 1,\n                      nominalColorRange: [\n                        \"#E79F00\",\n                        \"#029F73\",\n                        \"#0072B2\",\n                        \"#CB7AA7\",\n                        \"#D45E00\",\n                        \"#57B4E9\",\n                        \"#EFE441\"\n                      ],\n                      quantitativeSizeRange: [2, 6]\n                    },\n                    rule: {\n                      color: \"#E79F00\",\n                      size: 1,\n                      stroke: \"black\",\n                      strokeWidth: 1,\n                      opacity: 1,\n                      nominalColorRange: [\n                        \"#E79F00\",\n                        \"#029F73\",\n                        \"#0072B2\",\n                        \"#CB7AA7\",\n                        \"#D45E00\",\n                        \"#57B4E9\",\n                        \"#EFE441\"\n                      ],\n                      quantitativeSizeRange: [2, 6]\n                    },\n                    link: {\n                      color: \"#E79F00\",\n                      size: 1,\n                      stroke: \"black\",\n                      strokeWidth: 1,\n                      opacity: 1,\n                      nominalColorRange: [\n                        \"#E79F00\",\n                        \"#029F73\",\n                        \"#0072B2\",\n                        \"#CB7AA7\",\n                        \"#D45E00\",\n                        \"#57B4E9\",\n                        \"#EFE441\"\n                      ],\n                      quantitativeSizeRange: [2, 6]\n                    },\n                    text: {\n                      color: \"#E79F00\",\n                      size: 1,\n                      stroke: \"black\",\n                      strokeWidth: 0,\n                      opacity: 1,\n                      nominalColorRange: [\n                        \"#E79F00\",\n                        \"#029F73\",\n                        \"#0072B2\",\n                        \"#CB7AA7\",\n                        \"#D45E00\",\n                        \"#57B4E9\",\n                        \"#EFE441\"\n                      ],\n                      quantitativeSizeRange: [2, 6],\n                      textAnchor: \"middle\",\n                      textFontWeight: \"normal\"\n                    },\n                    brush: {\n                      color: \"gray\",\n                      size: 1,\n                      stroke: \"black\",\n                      strokeWidth: 1,\n                      opacity: 0.3,\n                      nominalColorRange: [\n                        \"#E79F00\",\n                        \"#029F73\",\n                        \"#0072B2\",\n                        \"#CB7AA7\",\n                        \"#D45E00\",\n                        \"#57B4E9\",\n                        \"#EFE441\"\n                      ],\n                      quantitativeSizeRange: [2, 6]\n                    }\n                  }\n                }\n              }\n            ]\n          },\n          {\n            uid: \"15483511-f6fb-11eb-914b-976b6ecda162\",\n            type: \"axis-track\",\n            chromInfoPath: \"https://s3.amazonaws.com/gosling-lang.org/data/hg38.chrom.sizes\",\n            options: {\n              layout: \"linear\",\n              outerRadius: null,\n              width: 160,\n              height: 600,\n              theme: {\n                base: \"light\",\n                root: {\n                  background: \"white\",\n                  titleColor: \"black\",\n                  titleBackgroundColor: \"transparent\",\n                  titleFontSize: 18,\n                  titleFontFamily: \"Arial\",\n                  titleAlign: \"left\",\n                  titleFontWeight: \"bold\",\n                  subtitleColor: \"gray\",\n                  subtitleBackgroundColor: \"transparent\",\n                  subtitleFontSize: 16,\n                  subtitleFontFamily: \"Arial\",\n                  subtitleFontWeight: \"normal\",\n                  subtitleAlign: \"left\",\n                  mousePositionColor: \"#000000\"\n                },\n                track: {\n                  background: \"transparent\",\n                  alternatingBackground: \"transparent\",\n                  titleColor: \"black\",\n                  titleBackground: \"white\",\n                  titleFontSize: 24,\n                  titleAlign: \"left\",\n                  outline: \"black\",\n                  outlineWidth: 1\n                },\n                legend: {\n                  position: \"top\",\n                  background: \"white\",\n                  backgroundOpacity: 0.7,\n                  labelColor: \"black\",\n                  labelFontSize: 12,\n                  labelFontWeight: \"normal\",\n                  labelFontFamily: \"Arial\",\n                  backgroundStroke: \"#DBDBDB\",\n                  tickColor: \"black\"\n                },\n                axis: {\n                  tickColor: \"black\",\n                  labelColor: \"black\",\n                  labelFontSize: 12,\n                  labelFontWeight: \"normal\",\n                  labelFontFamily: \"Arial\",\n                  baselineColor: \"black\",\n                  gridColor: \"#E3E3E3\",\n                  gridStrokeWidth: 1,\n                  gridStrokeType: \"solid\",\n                  gridStrokeDash: [4, 4]\n                },\n                markCommon: {\n                  color: \"#E79F00\",\n                  size: 1,\n                  stroke: \"black\",\n                  strokeWidth: 0,\n                  opacity: 1,\n                  nominalColorRange: [\n                    \"#E79F00\",\n                    \"#029F73\",\n                    \"#0072B2\",\n                    \"#CB7AA7\",\n                    \"#D45E00\",\n                    \"#57B4E9\",\n                    \"#EFE441\"\n                  ],\n                  quantitativeSizeRange: [2, 6]\n                },\n                point: {\n                  color: \"#E79F00\",\n                  size: 3,\n                  stroke: \"black\",\n                  strokeWidth: 0,\n                  opacity: 1,\n                  nominalColorRange: [\n                    \"#E79F00\",\n                    \"#029F73\",\n                    \"#0072B2\",\n                    \"#CB7AA7\",\n                    \"#D45E00\",\n                    \"#57B4E9\",\n                    \"#EFE441\"\n                  ],\n                  quantitativeSizeRange: [2, 6]\n                },\n                rect: {\n                  color: \"#E79F00\",\n                  size: 1,\n                  stroke: \"black\",\n                  strokeWidth: 0,\n                  opacity: 1,\n                  nominalColorRange: [\n                    \"#E79F00\",\n                    \"#029F73\",\n                    \"#0072B2\",\n                    \"#CB7AA7\",\n                    \"#D45E00\",\n                    \"#57B4E9\",\n                    \"#EFE441\"\n                  ],\n                  quantitativeSizeRange: [2, 6]\n                },\n                triangle: {\n                  color: \"#E79F00\",\n                  size: 1,\n                  stroke: \"black\",\n                  strokeWidth: 0,\n                  opacity: 1,\n                  nominalColorRange: [\n                    \"#E79F00\",\n                    \"#029F73\",\n                    \"#0072B2\",\n                    \"#CB7AA7\",\n                    \"#D45E00\",\n                    \"#57B4E9\",\n                    \"#EFE441\"\n                  ],\n                  quantitativeSizeRange: [2, 6]\n                },\n                area: {\n                  color: \"#E79F00\",\n                  size: 1,\n                  stroke: \"black\",\n                  strokeWidth: 0,\n                  opacity: 1,\n                  nominalColorRange: [\n                    \"#E79F00\",\n                    \"#029F73\",\n                    \"#0072B2\",\n                    \"#CB7AA7\",\n                    \"#D45E00\",\n                    \"#57B4E9\",\n                    \"#EFE441\"\n                  ],\n                  quantitativeSizeRange: [2, 6]\n                },\n                line: {\n                  color: \"#E79F00\",\n                  size: 1,\n                  stroke: \"black\",\n                  strokeWidth: 0,\n                  opacity: 1,\n                  nominalColorRange: [\n                    \"#E79F00\",\n                    \"#029F73\",\n                    \"#0072B2\",\n                    \"#CB7AA7\",\n                    \"#D45E00\",\n                    \"#57B4E9\",\n                    \"#EFE441\"\n                  ],\n                  quantitativeSizeRange: [2, 6]\n                },\n                bar: {\n                  color: \"#E79F00\",\n                  size: 1,\n                  stroke: \"black\",\n                  strokeWidth: 0,\n                  opacity: 1,\n                  nominalColorRange: [\n                    \"#E79F00\",\n                    \"#029F73\",\n                    \"#0072B2\",\n                    \"#CB7AA7\",\n                    \"#D45E00\",\n                    \"#57B4E9\",\n                    \"#EFE441\"\n                  ],\n                  quantitativeSizeRange: [2, 6]\n                },\n                rule: {\n                  color: \"#E79F00\",\n                  size: 1,\n                  stroke: \"black\",\n                  strokeWidth: 1,\n                  opacity: 1,\n                  nominalColorRange: [\n                    \"#E79F00\",\n                    \"#029F73\",\n                    \"#0072B2\",\n                    \"#CB7AA7\",\n                    \"#D45E00\",\n                    \"#57B4E9\",\n                    \"#EFE441\"\n                  ],\n                  quantitativeSizeRange: [2, 6]\n                },\n                link: {\n                  color: \"#E79F00\",\n                  size: 1,\n                  stroke: \"black\",\n                  strokeWidth: 1,\n                  opacity: 1,\n                  nominalColorRange: [\n                    \"#E79F00\",\n                    \"#029F73\",\n                    \"#0072B2\",\n                    \"#CB7AA7\",\n                    \"#D45E00\",\n                    \"#57B4E9\",\n                    \"#EFE441\"\n                  ],\n                  quantitativeSizeRange: [2, 6]\n                },\n                text: {\n                  color: \"#E79F00\",\n                  size: 1,\n                  stroke: \"black\",\n                  strokeWidth: 0,\n                  opacity: 1,\n                  nominalColorRange: [\n                    \"#E79F00\",\n                    \"#029F73\",\n                    \"#0072B2\",\n                    \"#CB7AA7\",\n                    \"#D45E00\",\n                    \"#57B4E9\",\n                    \"#EFE441\"\n                  ],\n                  quantitativeSizeRange: [2, 6],\n                  textAnchor: \"middle\",\n                  textFontWeight: \"normal\"\n                },\n                brush: {\n                  color: \"gray\",\n                  size: 1,\n                  stroke: \"black\",\n                  strokeWidth: 1,\n                  opacity: 0.3,\n                  nominalColorRange: [\n                    \"#E79F00\",\n                    \"#029F73\",\n                    \"#0072B2\",\n                    \"#CB7AA7\",\n                    \"#D45E00\",\n                    \"#57B4E9\",\n                    \"#EFE441\"\n                  ],\n                  quantitativeSizeRange: [2, 6]\n                }\n              },\n              assembly: \"hg38\",\n              stroke: \"transparent\",\n              color: \"black\",\n              fontSize: 12,\n              fontFamily: \"Arial\",\n              fontWeight: \"normal\",\n              tickColor: \"black\",\n              tickFormat: \"plain\",\n              tickPositions: \"even\",\n              reverseOrientation: false\n            },\n            width: 30\n          }\n        ],\n        center: [],\n        right: [],\n        bottom: [],\n        gallery: [],\n        whole: []\n      },\n      initialXDomain: [0, 1e9],\n      initialYDomain: [0, 1e9],\n      zoomFixed: false,\n      zoomLimits: [1, null],\n      uid: \"15483510-f6fb-11eb-914b-976b6ecda162\",\n      chromInfoPath: \"https://s3.amazonaws.com/gosling-lang.org/data/hg38.chrom.sizes\"\n    },\n    {\n      genomePositionSearchBoxVisible: false,\n      genomePositionSearchBox: {\n        autocompleteServer: \"https://higlass.io/api/v1\",\n        autocompleteId: \"P0PLbQMwTYGy-5uPIQid7A\",\n        chromInfoServer: \"https://higlass.io/api/v1\",\n        chromInfoId: \"hg38\"\n      },\n      layout: { x: 6.8, y: 0, w: 5.2, h: 600 },\n      tracks: {\n        top: [],\n        left: [\n          {\n            type: \"combined\",\n            width: 130,\n            height: 600,\n            contents: [\n              {\n                type: \"gosling-track\",\n                server: \"https://server.gosling-lang.org/api/v1/\",\n                tilesetUid: \"cistrome-multivec\",\n                width: 130,\n                height: 600,\n                options: {\n                  showMousePosition: true,\n                  mousePositionColor: \"#000000\",\n                  fontSize: 24,\n                  labelPosition: \"none\",\n                  labelShowResolution: false,\n                  labelColor: \"black\",\n                  labelBackgroundColor: \"white\",\n                  labelTextOpacity: 1,\n                  labelLeftMargin: 1,\n                  labelTopMargin: 1,\n                  labelRightMargin: 0,\n                  labelBottomMargin: 0,\n                  backgroundColor: \"transparent\",\n                  spec: {\n                    spacing: 10,\n                    orientation: \"vertical\",\n                    assembly: \"hg38\",\n                    layout: \"linear\",\n                    static: false,\n                    xDomain: { interval: [0, 1e9] },\n                    centerRadius: 0.3,\n                    xOffset: 0,\n                    yOffset: 0,\n                    style: { outlineWidth: 0.5 },\n                    data: {\n                      url: \"https://server.gosling-lang.org/api/v1/tileset_info/?d=cistrome-multivec\",\n                      type: \"multivec\",\n                      row: \"sample\",\n                      column: \"position\",\n                      value: \"peak\",\n                      categories: [\"sample 1\", \"sample 2\", \"sample 3\", \"sample 4\"],\n                      binSize: 4\n                    },\n                    mark: \"rect\",\n                    x: {\n                      field: \"start\",\n                      type: \"genomic\",\n                      domain: { interval: [0, 1e9] },\n                      linkingId: \"7f94b74e-25ec-4e67-8c75-3dc0f1b0d6bd\"\n                    },\n                    xe: { field: \"end\", type: \"genomic\" },\n                    row: {\n                      field: \"sample\",\n                      type: \"nominal\",\n                      legend: true\n                    },\n                    color: {\n                      field: \"peak\",\n                      type: \"quantitative\",\n                      legend: true\n                    },\n                    tooltip: [\n                      {\n                        field: \"start\",\n                        type: \"genomic\",\n                        alt: \"Start Position\"\n                      },\n                      {\n                        field: \"end\",\n                        type: \"genomic\",\n                        alt: \"End Position\"\n                      },\n                      {\n                        field: \"peak\",\n                        type: \"quantitative\",\n                        alt: \"Value\",\n                        format: \".2\"\n                      },\n                      { field: \"sample\", type: \"nominal\", alt: \"Sample\" }\n                    ],\n                    width: 130,\n                    height: 600\n                  },\n                  theme: {\n                    base: \"light\",\n                    root: {\n                      background: \"white\",\n                      titleColor: \"black\",\n                      titleBackgroundColor: \"transparent\",\n                      titleFontSize: 18,\n                      titleFontFamily: \"Arial\",\n                      titleAlign: \"left\",\n                      titleFontWeight: \"bold\",\n                      subtitleColor: \"gray\",\n                      subtitleBackgroundColor: \"transparent\",\n                      subtitleFontSize: 16,\n                      subtitleFontFamily: \"Arial\",\n                      subtitleFontWeight: \"normal\",\n                      subtitleAlign: \"left\",\n                      mousePositionColor: \"#000000\"\n                    },\n                    track: {\n                      background: \"transparent\",\n                      alternatingBackground: \"transparent\",\n                      titleColor: \"black\",\n                      titleBackground: \"white\",\n                      titleFontSize: 24,\n                      titleAlign: \"left\",\n                      outline: \"black\",\n                      outlineWidth: 1\n                    },\n                    legend: {\n                      position: \"top\",\n                      background: \"white\",\n                      backgroundOpacity: 0.7,\n                      labelColor: \"black\",\n                      labelFontSize: 12,\n                      labelFontWeight: \"normal\",\n                      labelFontFamily: \"Arial\",\n                      backgroundStroke: \"#DBDBDB\",\n                      tickColor: \"black\"\n                    },\n                    axis: {\n                      tickColor: \"black\",\n                      labelColor: \"black\",\n                      labelFontSize: 12,\n                      labelFontWeight: \"normal\",\n                      labelFontFamily: \"Arial\",\n                      baselineColor: \"black\",\n                      gridColor: \"#E3E3E3\",\n                      gridStrokeWidth: 1,\n                      gridStrokeType: \"solid\",\n                      gridStrokeDash: [4, 4]\n                    },\n                    markCommon: {\n                      color: \"#E79F00\",\n                      size: 1,\n                      stroke: \"black\",\n                      strokeWidth: 0,\n                      opacity: 1,\n                      nominalColorRange: [\n                        \"#E79F00\",\n                        \"#029F73\",\n                        \"#0072B2\",\n                        \"#CB7AA7\",\n                        \"#D45E00\",\n                        \"#57B4E9\",\n                        \"#EFE441\"\n                      ],\n                      quantitativeSizeRange: [2, 6]\n                    },\n                    point: {\n                      color: \"#E79F00\",\n                      size: 3,\n                      stroke: \"black\",\n                      strokeWidth: 0,\n                      opacity: 1,\n                      nominalColorRange: [\n                        \"#E79F00\",\n                        \"#029F73\",\n                        \"#0072B2\",\n                        \"#CB7AA7\",\n                        \"#D45E00\",\n                        \"#57B4E9\",\n                        \"#EFE441\"\n                      ],\n                      quantitativeSizeRange: [2, 6]\n                    },\n                    rect: {\n                      color: \"#E79F00\",\n                      size: 1,\n                      stroke: \"black\",\n                      strokeWidth: 0,\n                      opacity: 1,\n                      nominalColorRange: [\n                        \"#E79F00\",\n                        \"#029F73\",\n                        \"#0072B2\",\n                        \"#CB7AA7\",\n                        \"#D45E00\",\n                        \"#57B4E9\",\n                        \"#EFE441\"\n                      ],\n                      quantitativeSizeRange: [2, 6]\n                    },\n                    triangle: {\n                      color: \"#E79F00\",\n                      size: 1,\n                      stroke: \"black\",\n                      strokeWidth: 0,\n                      opacity: 1,\n                      nominalColorRange: [\n                        \"#E79F00\",\n                        \"#029F73\",\n                        \"#0072B2\",\n                        \"#CB7AA7\",\n                        \"#D45E00\",\n                        \"#57B4E9\",\n                        \"#EFE441\"\n                      ],\n                      quantitativeSizeRange: [2, 6]\n                    },\n                    area: {\n                      color: \"#E79F00\",\n                      size: 1,\n                      stroke: \"black\",\n                      strokeWidth: 0,\n                      opacity: 1,\n                      nominalColorRange: [\n                        \"#E79F00\",\n                        \"#029F73\",\n                        \"#0072B2\",\n                        \"#CB7AA7\",\n                        \"#D45E00\",\n                        \"#57B4E9\",\n                        \"#EFE441\"\n                      ],\n                      quantitativeSizeRange: [2, 6]\n                    },\n                    line: {\n                      color: \"#E79F00\",\n                      size: 1,\n                      stroke: \"black\",\n                      strokeWidth: 0,\n                      opacity: 1,\n                      nominalColorRange: [\n                        \"#E79F00\",\n                        \"#029F73\",\n                        \"#0072B2\",\n                        \"#CB7AA7\",\n                        \"#D45E00\",\n                        \"#57B4E9\",\n                        \"#EFE441\"\n                      ],\n                      quantitativeSizeRange: [2, 6]\n                    },\n                    bar: {\n                      color: \"#E79F00\",\n                      size: 1,\n                      stroke: \"black\",\n                      strokeWidth: 0,\n                      opacity: 1,\n                      nominalColorRange: [\n                        \"#E79F00\",\n                        \"#029F73\",\n                        \"#0072B2\",\n                        \"#CB7AA7\",\n                        \"#D45E00\",\n                        \"#57B4E9\",\n                        \"#EFE441\"\n                      ],\n                      quantitativeSizeRange: [2, 6]\n                    },\n                    rule: {\n                      color: \"#E79F00\",\n                      size: 1,\n                      stroke: \"black\",\n                      strokeWidth: 1,\n                      opacity: 1,\n                      nominalColorRange: [\n                        \"#E79F00\",\n                        \"#029F73\",\n                        \"#0072B2\",\n                        \"#CB7AA7\",\n                        \"#D45E00\",\n                        \"#57B4E9\",\n                        \"#EFE441\"\n                      ],\n                      quantitativeSizeRange: [2, 6]\n                    },\n                    link: {\n                      color: \"#E79F00\",\n                      size: 1,\n                      stroke: \"black\",\n                      strokeWidth: 1,\n                      opacity: 1,\n                      nominalColorRange: [\n                        \"#E79F00\",\n                        \"#029F73\",\n                        \"#0072B2\",\n                        \"#CB7AA7\",\n                        \"#D45E00\",\n                        \"#57B4E9\",\n                        \"#EFE441\"\n                      ],\n                      quantitativeSizeRange: [2, 6]\n                    },\n                    text: {\n                      color: \"#E79F00\",\n                      size: 1,\n                      stroke: \"black\",\n                      strokeWidth: 0,\n                      opacity: 1,\n                      nominalColorRange: [\n                        \"#E79F00\",\n                        \"#029F73\",\n                        \"#0072B2\",\n                        \"#CB7AA7\",\n                        \"#D45E00\",\n                        \"#57B4E9\",\n                        \"#EFE441\"\n                      ],\n                      quantitativeSizeRange: [2, 6],\n                      textAnchor: \"middle\",\n                      textFontWeight: \"normal\"\n                    },\n                    brush: {\n                      color: \"gray\",\n                      size: 1,\n                      stroke: \"black\",\n                      strokeWidth: 1,\n                      opacity: 0.3,\n                      nominalColorRange: [\n                        \"#E79F00\",\n                        \"#029F73\",\n                        \"#0072B2\",\n                        \"#CB7AA7\",\n                        \"#D45E00\",\n                        \"#57B4E9\",\n                        \"#EFE441\"\n                      ],\n                      quantitativeSizeRange: [2, 6]\n                    }\n                  }\n                }\n              }\n            ]\n          }\n        ],\n        center: [],\n        right: [],\n        bottom: [],\n        gallery: [],\n        whole: []\n      },\n      initialXDomain: [0, 1e9],\n      initialYDomain: [0, 1e9],\n      zoomFixed: false,\n      zoomLimits: [1, null],\n      uid: \"154b1b40-f6fb-11eb-914b-976b6ecda162\"\n    }\n  ],\n  zoomLocks: { locksByViewUid: {}, locksDict: {} },\n  locationLocks: { locksByViewUid: {}, locksDict: {} },\n  editable: false,\n  chromInfoPath: \"https://s3.amazonaws.com/gosling-lang.org/data/hg38.chrom.sizes\"\n};\nfunction insertItemToArray(array, index, item) {\n  return [...array.slice(0, index), item, ...array.slice(index)];\n}\nfunction flatArrayToPairArray(array) {\n  const output = [];\n  for (let i = 0; i < array.length; i += 2) {\n    output.push([array[i], array[i + 1]]);\n  }\n  return output;\n}\nconst HIGLASS_AXIS_SIZE = 30;\nconst getViewTemplate = (assembly) => {\n  return {\n    genomePositionSearchBoxVisible: false,\n    genomePositionSearchBox: {\n      autocompleteServer: \"https://higlass.io/api/v1\",\n      autocompleteId: \"P0PLbQMwTYGy-5uPIQid7A\",\n      chromInfoServer: \"https://higlass.io/api/v1\",\n      chromInfoId: assembly != null ? assembly : \"hg38\"\n    },\n    layout: { w: 12, h: 12, x: 0, y: 0 },\n    tracks: {\n      top: [],\n      left: [],\n      center: [],\n      right: [],\n      bottom: [],\n      gallery: [],\n      whole: []\n    },\n    initialXDomain: [0, GET_CHROM_SIZES(assembly).total],\n    initialYDomain: [0, GET_CHROM_SIZES(assembly).total],\n    zoomFixed: false\n  };\n};\nclass HiGlassModel {\n  constructor() {\n    this.assembly = \"hg38\";\n    this.hg = {\n      compactLayout: false,\n      trackSourceServers: [],\n      views: [],\n      zoomLocks: {\n        locksByViewUid: {},\n        locksDict: {}\n      },\n      locationLocks: {\n        locksByViewUid: {},\n        locksDict: {}\n      }\n    };\n    this.setEditable(false);\n  }\n  spec() {\n    return this.hg;\n  }\n  setViewOrientation(orientation) {\n    this.orientation = orientation;\n    return this;\n  }\n  addDefaultView(uid, assembly) {\n    this.hg.views.push(JSON.parse(JSON.stringify({ ...getViewTemplate(assembly), uid })));\n    return this;\n  }\n  setAssembly(assembly) {\n    this.assembly = assembly;\n    this.setChromInfoPath(GET_CHROM_SIZES(this.assembly).path);\n    return this;\n  }\n  getAssembly() {\n    return this.assembly;\n  }\n  setTextTrack(width, height, text, textColor = \"black\", fontSize = 14, fontWeight = \"normal\", align = \"left\", backgroundColor = \"transparent\", fontFamily = \"Arial\") {\n    var _a;\n    if (this.getLastView()) {\n      (_a = this.getLastView().tracks.top) == null ? void 0 : _a.push({\n        type: \"text\",\n        width,\n        height,\n        options: {\n          backgroundColor,\n          textColor,\n          fontSize,\n          fontWeight,\n          fontFamily,\n          offsetY: 0,\n          align,\n          text\n        }\n      });\n    }\n    return this;\n  }\n  addBrush(layout, viewId, theme, fromViewUid, style) {\n    var _a, _b, _c, _d, _e, _f;\n    if (!fromViewUid)\n      return;\n    (_f = this.getView(viewId)) == null ? void 0 : _f.tracks.whole.push({\n      type: layout === \"circular\" ? \"brush-track\" : \"viewport-projection-horizontal\",\n      uid: v4(),\n      fromViewUid,\n      options: {\n        projectionFillColor: (_a = style == null ? void 0 : style.color) != null ? _a : theme.brush.color,\n        projectionStrokeColor: (_b = style == null ? void 0 : style.stroke) != null ? _b : theme.brush.stroke,\n        projectionFillOpacity: (_c = style == null ? void 0 : style.opacity) != null ? _c : theme.brush.opacity,\n        projectionStrokeOpacity: (_d = style == null ? void 0 : style.opacity) != null ? _d : theme.brush.opacity,\n        strokeWidth: (_e = style == null ? void 0 : style.strokeWidth) != null ? _e : theme.brush.strokeWidth,\n        startAngle: style == null ? void 0 : style.startAngle,\n        endAngle: style == null ? void 0 : style.endAngle,\n        innerRadius: style == null ? void 0 : style.innerRadius,\n        outerRadius: style == null ? void 0 : style.outerRadius\n      }\n    });\n    return this;\n  }\n  getLastView() {\n    return this.hg.views[this.hg.views.length - 1];\n  }\n  getMainTrackPosition() {\n    return this.orientation === \"vertical\" ? \"left\" : \"center\";\n  }\n  getLastVisView() {\n    const vs = this.hg.views.filter((v) => {\n      var _a, _b;\n      return ((_b = (_a = v.tracks[this.getMainTrackPosition()]) == null ? void 0 : _a[0]) == null ? void 0 : _b.type) === \"combined\";\n    });\n    return vs[vs.length - 1];\n  }\n  getView(viewId) {\n    return this.hg.views.find((d) => d.uid === viewId);\n  }\n  validateSpec(silence = false) {\n    return validateSpec(HiGlassSchema, this.spec(), silence).state === \"success\";\n  }\n  setDomain(xDomain, yDomain) {\n    if (xDomain) {\n      this.getLastView().initialXDomain = getNumericDomain(xDomain, this.getAssembly());\n    }\n    if (yDomain) {\n      this.getLastView().initialYDomain = getNumericDomain(yDomain, this.getAssembly());\n    }\n    return this;\n  }\n  adjustDomain(orientation = \"horizontal\", width, height) {\n    if (orientation !== \"vertical\") {\n      return this;\n    }\n    const domain = this.getLastView().initialXDomain;\n    if (!domain) {\n      return this;\n    }\n    const [start, end] = domain;\n    const size = end - start;\n    const center = (start + end) / 2;\n    this.getLastView().initialXDomain = [\n      center - size / width / 2 / height * width,\n      center + size / width / 2 / height * width\n    ];\n    return this;\n  }\n  setZoomFixed(zoomFixed) {\n    this.getLastView().zoomFixed = zoomFixed;\n    return this;\n  }\n  setZoomLimits(zoomLimits) {\n    this.getLastView().zoomLimits = zoomLimits;\n    return this;\n  }\n  setLayout(layout) {\n    this.getLastView().layout = layout;\n    return this;\n  }\n  setEditable(editable) {\n    this.hg.editable = editable;\n    return this;\n  }\n  setChromInfoPath(chromInfoPath) {\n    if (this.getLastView()) {\n      this.getLastView().chromInfoPath = chromInfoPath;\n    }\n    this.hg.chromInfoPath = chromInfoPath;\n    return this;\n  }\n  addTrackSourceServers(trackSourceServers) {\n    var _a, _b;\n    if (trackSourceServers && ((_a = this.hg.trackSourceServers) == null ? void 0 : _a.indexOf(trackSourceServers)) === -1)\n      (_b = this.hg.trackSourceServers) == null ? void 0 : _b.push(trackSourceServers);\n    return this;\n  }\n  setMainTrack(track) {\n    var _a;\n    if (!this.getLastView())\n      return this;\n    this.getLastView().tracks[this.getMainTrackPosition()] = [\n      {\n        type: \"combined\",\n        uid: `${(_a = track.uid) != null ? _a : v4()}-${this.getMainTrackPosition()}-combined`,\n        width: track.width - 1,\n        height: track.height,\n        contents: [track]\n      }\n    ];\n    return this;\n  }\n  addTrackToCombined(track) {\n    var _a;\n    if (!this.getLastVisView())\n      return this;\n    (_a = this.getLastVisView().tracks[this.getMainTrackPosition()][0]) == null ? void 0 : _a.contents.push(track);\n    return this;\n  }\n  setAxisTrack(position, type2 = \"regular\", options) {\n    if (!this.hg.views)\n      return this;\n    const widthOrHeight = position === \"left\" || position === \"right\" ? \"width\" : \"height\";\n    const axisTrackTemplate = {\n      type: \"axis-track\",\n      chromInfoPath: this.hg.chromInfoPath,\n      options: {\n        ...options,\n        assembly: this.getAssembly(),\n        stroke: \"transparent\",\n        color: options.theme.axis.labelColor,\n        fontSize: options.theme.axis.labelFontSize,\n        fontFamily: options.theme.axis.labelFontFamily,\n        fontWeight: options.theme.axis.labelFontWeight,\n        tickColor: options.theme.axis.tickColor,\n        tickFormat: type2 === \"narrower\" ? \"si\" : \"plain\",\n        tickPositions: type2 === \"regular\" ? \"even\" : \"ends\",\n        reverseOrientation: position === \"bottom\" || position === \"right\" ? true : false\n      }\n    };\n    if (options.layout === \"circular\") {\n      this.addTrackToCombined({\n        ...axisTrackTemplate,\n        options: { ...axisTrackTemplate.options, layout: \"circular\" }\n      });\n    } else {\n      const axisTrack = { ...axisTrackTemplate, [widthOrHeight]: HIGLASS_AXIS_SIZE };\n      if (position === \"left\") {\n        if (this.getLastView().tracks.left.filter((d) => d.type === \"axis-track\").length !== 0) {\n          return this;\n        }\n        this.getLastView().tracks.left = insertItemToArray(this.getLastView().tracks.left, 0, axisTrack);\n      } else if (position === \"right\") {\n        if (this.getLastView().tracks.right.filter((d) => d.type === \"axis-track\").length !== 0) {\n          return this;\n        }\n        this.getLastView().tracks.right.push(axisTrack);\n      } else {\n        if (this.getLastView().tracks[position].filter((d) => d.type === \"axis-track\").length !== 0) {\n          return this;\n        }\n        this.getLastView().tracks[position].push(axisTrack);\n      }\n    }\n    return this;\n  }\n  setExampleHiglassViewConfig() {\n    this.hg = example;\n  }\n}\nfunction logicalComparison(value, op, ref2, transitionPadding) {\n  const padding = transitionPadding && transitionPadding !== 0 ? transitionPadding : void 0;\n  let alpha = 0;\n  switch (op) {\n    case \"less-than\":\n    case \"LT\":\n    case \"lt\":\n      alpha = ref2 > value ? padding ? (ref2 - value) / padding : 1 : 0;\n      break;\n    case \"less-than-or-equal-to\":\n    case \"LTET\":\n    case \"ltet\":\n      alpha = ref2 >= value ? padding ? (ref2 - value) / padding : 1 : 0;\n      break;\n    case \"greater-than\":\n    case \"GT\":\n    case \"gt\":\n      alpha = ref2 < value ? padding ? (value - ref2) / padding : 1 : 0;\n      break;\n    case \"greater-than-or-equal-to\":\n    case \"GTET\":\n    case \"gtet\":\n      alpha = ref2 <= value ? padding ? (value - ref2) / padding : 1 : 0;\n      break;\n  }\n  return Math.max(Math.min(1, alpha), 0);\n}\nconst CHANNEL_DEFAULTS = {\n  NOMINAL_COLOR: [\"#E79F00\", \"#029F73\", \"#0072B2\", \"#CB7AA7\", \"#D45E00\", \"#57B4E9\", \"#EFE441\"],\n  NOMINAL_COLOR_EXTENDED: [\n    \"#d60000\",\n    \"#018700\",\n    \"#b500ff\",\n    \"#05acc6\",\n    \"#97ff00\",\n    \"#ffa52f\",\n    \"#ff8ec8\",\n    \"#79525e\",\n    \"#00fdcf\",\n    \"#afa5ff\",\n    \"#93ac83\",\n    \"#9a6900\",\n    \"#366962\",\n    \"#d3008c\",\n    \"#fdf490\",\n    \"#c86e66\",\n    \"#9ee2ff\",\n    \"#00c846\",\n    \"#a877ac\",\n    \"#b8ba01\",\n    \"#f4bfb1\",\n    \"#ff28fd\",\n    \"#f2cdff\",\n    \"#009e7c\",\n    \"#ff6200\",\n    \"#56642a\",\n    \"#953f1f\",\n    \"#90318e\",\n    \"#ff3464\",\n    \"#a0e491\",\n    \"#8c9ab1\",\n    \"#829026\",\n    \"#ae083f\",\n    \"#77c6ba\",\n    \"#bc9157\",\n    \"#e48eff\",\n    \"#72b8ff\",\n    \"#c6a5c1\",\n    \"#ff9070\",\n    \"#d3c37c\",\n    \"#bceddb\",\n    \"#6b8567\",\n    \"#916e56\",\n    \"#f9ff00\",\n    \"#bac1df\",\n    \"#ac567c\",\n    \"#ffcd03\",\n    \"#ff49b1\",\n    \"#c15603\",\n    \"#5d8c90\",\n    \"#c144bc\",\n    \"#00753f\",\n    \"#ba6efd\",\n    \"#00d493\",\n    \"#00ff75\",\n    \"#49a150\",\n    \"#cc9790\",\n    \"#00ebed\",\n    \"#db7e01\",\n    \"#f77589\",\n    \"#b89500\",\n    \"#c84248\",\n    \"#00cff9\",\n    \"#755726\",\n    \"#85d401\",\n    \"#ebffd4\",\n    \"#a77b87\",\n    \"#db72c8\",\n    \"#cae256\",\n    \"#8abf5d\",\n    \"#a1216b\",\n    \"#855b89\",\n    \"#89bacf\",\n    \"#ffbad6\",\n    \"#b6cfaa\",\n    \"#97414d\",\n    \"#67aa00\",\n    \"#fde1b1\",\n    \"#ff3628\",\n    \"#80793d\",\n    \"#d6e8ff\",\n    \"#a795c6\",\n    \"#7ea59a\",\n    \"#d182a3\",\n    \"#54823b\",\n    \"#e6a872\",\n    \"#9cffff\",\n    \"#da5480\",\n    \"#05b3aa\",\n    \"#ffaaf6\",\n    \"#d1afef\",\n    \"#da015d\",\n    \"#ac1a13\",\n    \"#60b385\",\n    \"#d442fd\",\n    \"#acaa59\",\n    \"#fb9ca7\",\n    \"#b3723b\",\n    \"#f26952\",\n    \"#aed1d4\",\n    \"#9affc3\",\n    \"#dbb333\",\n    \"#eb01c3\",\n    \"#9900c4\",\n    \"#cfff9e\",\n    \"#a55949\",\n    \"#3b6d01\",\n    \"#008579\",\n    \"#959167\",\n    \"#89dbb3\",\n    \"#6d7400\",\n    \"#aa5dca\",\n    \"#07ef00\",\n    \"#804f3d\",\n    \"#d88052\",\n    \"#ffc862\",\n    \"#b8009e\",\n    \"#99acdd\",\n    \"#904f00\",\n    \"#8c4470\",\n    \"#4f6e52\",\n    \"#ff8734\",\n    \"#c68ecd\",\n    \"#d4e29e\",\n    \"#b1826d\",\n    \"#9cfb75\",\n    \"#56dd77\",\n    \"#f90087\",\n    \"#a1cdff\",\n    \"#13cad1\",\n    \"#118e54\",\n    \"#d154a5\",\n    \"#00dfc3\",\n    \"#a3832f\",\n    \"#77975b\",\n    \"#baaa80\",\n    \"#70a3af\",\n    \"#d6fbff\",\n    \"#e8013a\",\n    \"#d84621\",\n    \"#ff82ed\",\n    \"#b63862\",\n    \"#b6cd72\",\n    \"#97626b\",\n    \"#897490\",\n    \"#00a316\",\n    \"#00f4a1\",\n    \"#bf90f2\",\n    \"#89e4d8\",\n    \"#a34d95\",\n    \"#6e5d00\",\n    \"#8cc68e\",\n    \"#95aa2a\",\n    \"#c672dd\",\n    \"#b33b01\",\n    \"#d69a36\",\n    \"#dfacb6\",\n    \"#009aa0\",\n    \"#599000\",\n    \"#97bca8\",\n    \"#ac8ca8\",\n    \"#dad4ff\",\n    \"#547c72\",\n    \"#00ba69\",\n    \"#ffc38e\",\n    \"#b800d4\",\n    \"#dfcf5b\",\n    \"#629a7b\",\n    \"#bfedbc\",\n    \"#c1bdfd\",\n    \"#80d3dd\",\n    \"#e2857e\",\n    \"#f9eb4d\",\n    \"#bf6d82\",\n    \"#caff4f\",\n    \"#ef72aa\",\n    \"#ed67ff\",\n    \"#9946ae\",\n    \"#6d6942\",\n    \"#e25660\",\n    \"#dd662d\",\n    \"#9cdb5d\",\n    \"#e29ccf\",\n    \"#b87500\",\n    \"#c6002d\",\n    \"#dfbcda\",\n    \"#59b5df\",\n    \"#ff59da\",\n    \"#38c1a1\",\n    \"#9e698c\",\n    \"#acaac8\",\n    \"#95622f\",\n    \"#b55662\",\n    \"#2b7e60\",\n    \"#b1e400\",\n    \"#eda590\",\n    \"#95fde2\",\n    \"#ff548e\",\n    \"#bd6ea1\",\n    \"#aa3b36\",\n    \"#d8cf00\",\n    \"#aa80cd\",\n    \"#a08052\",\n    \"#e100e8\",\n    \"#c35b3d\",\n    \"#b53a85\",\n    \"#8c7700\",\n    \"#dbbc95\",\n    \"#529e93\",\n    \"#afbc82\",\n    \"#91b5b6\",\n    \"#a75423\",\n    \"#ffd4ef\",\n    \"#79ae6b\",\n    \"#5db54b\",\n    \"#80fb9a\",\n    \"#48ffef\",\n    \"#979548\",\n    \"#9387a7\",\n    \"#31d400\",\n    \"#6ee956\",\n    \"#b6d4eb\",\n    \"#705470\",\n    \"#f2db8a\",\n    \"#aad4c1\",\n    \"#7ecdf2\",\n    \"#89ba00\",\n    \"#64b6ba\",\n    \"#ffb500\",\n    \"#c38285\",\n    \"#caaa5e\",\n    \"#647748\",\n    \"#59e2ff\",\n    \"#df4dcd\",\n    \"#e9ff79\",\n    \"#bc66b8\",\n    \"#c395a5\",\n    \"#64c674\",\n    \"#d19570\",\n    \"#70cf4f\",\n    \"#aa6e66\",\n    \"#9c60a5\",\n    \"#00b800\",\n    \"#e299b3\",\n    \"#bc006b\",\n    \"#b3e8ef\",\n    \"#cdbfe4\",\n    \"#77a342\",\n    \"#856277\",\n    \"#568e5b\",\n    \"#9eafc4\",\n    \"#e82fa0\",\n    \"#247c2a\",\n    \"#826723\",\n    \"#bfbc4d\",\n    \"#ddd3a5\"\n  ],\n  QUANTITATIVE_COLOR: \"viridis\",\n  SIZE: 3,\n  SIZE_RANGE: [2, 6]\n};\nfunction getTheme(theme = \"light\") {\n  if (typeof theme === \"string\") {\n    if (gt.isThereTheme(theme)) {\n      return gt.getTheme(theme);\n    } else if (theme === \"dark\" || theme === \"light\") {\n      return THEMES[theme];\n    } else {\n      return THEMES[\"light\"];\n    }\n  } else {\n    let baseSpec = JSON.parse(JSON.stringify(THEMES[\"light\"]));\n    if (gt.isThereTheme(theme.base)) {\n      baseSpec = gt.getTheme(theme.base);\n    } else if (theme.base === \"light\" || theme.base === \"dark\") {\n      baseSpec = JSON.parse(JSON.stringify(THEMES[theme.base]));\n    }\n    Object.keys(baseSpec).forEach((k) => {\n      if (theme[k] && k !== \"base\") {\n        baseSpec[k] = Object.assign(JSON.parse(JSON.stringify(baseSpec[k])), JSON.parse(JSON.stringify(theme[k])));\n      }\n    });\n    return baseSpec;\n  }\n}\nconst LightThemeMarkCommonStyle = {\n  color: CHANNEL_DEFAULTS.NOMINAL_COLOR[0],\n  size: 1,\n  stroke: \"black\",\n  strokeWidth: 0,\n  opacity: 1,\n  nominalColorRange: CHANNEL_DEFAULTS.NOMINAL_COLOR,\n  quantitativeSizeRange: [2, 6]\n};\nconst DarkThemeMarkCommonStyle = { ...LightThemeMarkCommonStyle, stroke: \"white\" };\nconst THEMES = {\n  light: {\n    base: \"light\",\n    root: {\n      background: \"white\",\n      titleColor: \"black\",\n      titleBackgroundColor: \"transparent\",\n      titleFontSize: 18,\n      titleFontFamily: \"Arial\",\n      titleAlign: \"left\",\n      titleFontWeight: \"bold\",\n      subtitleColor: \"gray\",\n      subtitleBackgroundColor: \"transparent\",\n      subtitleFontSize: 16,\n      subtitleFontFamily: \"Arial\",\n      subtitleFontWeight: \"normal\",\n      subtitleAlign: \"left\",\n      showMousePosition: true,\n      mousePositionColor: \"#000000\"\n    },\n    track: {\n      background: \"transparent\",\n      alternatingBackground: \"transparent\",\n      titleColor: \"black\",\n      titleBackground: \"white\",\n      titleFontSize: 24,\n      titleAlign: \"left\",\n      outline: \"black\",\n      outlineWidth: 1\n    },\n    legend: {\n      position: \"top\",\n      background: \"white\",\n      backgroundOpacity: 0.7,\n      labelColor: \"black\",\n      labelFontSize: 12,\n      labelFontWeight: \"normal\",\n      labelFontFamily: \"Arial\",\n      backgroundStroke: \"#DBDBDB\",\n      tickColor: \"black\"\n    },\n    axis: {\n      tickColor: \"black\",\n      labelColor: \"black\",\n      labelFontSize: 12,\n      labelFontWeight: \"normal\",\n      labelFontFamily: \"Arial\",\n      baselineColor: \"black\",\n      gridColor: \"#E3E3E3\",\n      gridStrokeWidth: 1,\n      gridStrokeType: \"solid\",\n      gridStrokeDash: [4, 4]\n    },\n    markCommon: {\n      ...LightThemeMarkCommonStyle\n    },\n    point: {\n      ...LightThemeMarkCommonStyle,\n      size: 3\n    },\n    rect: {\n      ...LightThemeMarkCommonStyle\n    },\n    triangle: {\n      ...LightThemeMarkCommonStyle\n    },\n    area: {\n      ...LightThemeMarkCommonStyle\n    },\n    line: {\n      ...LightThemeMarkCommonStyle\n    },\n    bar: {\n      ...LightThemeMarkCommonStyle\n    },\n    rule: {\n      ...LightThemeMarkCommonStyle,\n      strokeWidth: 1\n    },\n    link: {\n      ...LightThemeMarkCommonStyle,\n      strokeWidth: 1\n    },\n    text: {\n      ...LightThemeMarkCommonStyle,\n      textAnchor: \"middle\",\n      textFontWeight: \"normal\"\n    },\n    brush: {\n      ...LightThemeMarkCommonStyle,\n      color: \"gray\",\n      opacity: 0.3,\n      stroke: \"black\",\n      strokeWidth: 1\n    }\n  },\n  dark: {\n    base: \"dark\",\n    root: {\n      background: \"black\",\n      titleColor: \"white\",\n      titleBackgroundColor: \"transparent\",\n      titleFontSize: 18,\n      titleFontFamily: \"Arial\",\n      titleAlign: \"middle\",\n      titleFontWeight: \"bold\",\n      subtitleColor: \"lightgray\",\n      subtitleBackgroundColor: \"transparent\",\n      subtitleFontSize: 16,\n      subtitleFontFamily: \"Arial\",\n      subtitleAlign: \"middle\",\n      subtitleFontWeight: \"normal\",\n      showMousePosition: true,\n      mousePositionColor: \"#FFFFFF\"\n    },\n    track: {\n      background: \"transparent\",\n      alternatingBackground: \"transparent\",\n      titleColor: \"white\",\n      titleBackground: \"black\",\n      titleFontSize: 18,\n      titleAlign: \"left\",\n      outline: \"white\",\n      outlineWidth: 1\n    },\n    legend: {\n      position: \"right\",\n      background: \"black\",\n      backgroundOpacity: 0.7,\n      labelColor: \"white\",\n      labelFontSize: 12,\n      labelFontWeight: \"normal\",\n      labelFontFamily: \"Arial\",\n      backgroundStroke: \"#DBDBDB\",\n      tickColor: \"white\"\n    },\n    axis: {\n      tickColor: \"white\",\n      labelColor: \"white\",\n      labelFontSize: 10,\n      labelFontWeight: \"normal\",\n      labelFontFamily: \"Arial\",\n      baselineColor: \"white\",\n      gridColor: \"gray\",\n      gridStrokeWidth: 1,\n      gridStrokeType: \"solid\",\n      gridStrokeDash: [4, 4]\n    },\n    markCommon: {\n      ...DarkThemeMarkCommonStyle\n    },\n    point: {\n      ...DarkThemeMarkCommonStyle,\n      size: 3\n    },\n    rect: {\n      ...DarkThemeMarkCommonStyle\n    },\n    triangle: {\n      ...DarkThemeMarkCommonStyle\n    },\n    area: {\n      ...DarkThemeMarkCommonStyle\n    },\n    line: {\n      ...DarkThemeMarkCommonStyle\n    },\n    bar: {\n      ...DarkThemeMarkCommonStyle\n    },\n    rule: {\n      ...DarkThemeMarkCommonStyle,\n      strokeWidth: 1\n    },\n    link: {\n      ...DarkThemeMarkCommonStyle,\n      strokeWidth: 1\n    },\n    text: {\n      ...DarkThemeMarkCommonStyle,\n      textAnchor: \"middle\",\n      textFontWeight: \"normal\"\n    },\n    brush: {\n      ...DarkThemeMarkCommonStyle,\n      color: \"lightgray\",\n      opacity: 0.3,\n      stroke: \"white\",\n      strokeWidth: 1\n    }\n  }\n};\nconst isPointNearPoint = ([x1, y1], [x2, y2], radius = 5) => {\n  return Math.sqrt((x1 - x2) ** 2 + (y1 - y2) ** 2) < radius;\n};\nconst isPointInsideRange = ([x1, x2], x) => {\n  return x1 <= x && x <= x2;\n};\nconst isCircleWithinRange = (range2, x, radius = 5) => {\n  return isPointInsideRange(range2, x - radius) && isPointInsideRange(range2, x + radius);\n};\nconst isAllPointsWithinRange = (range2, path) => {\n  return path.filter((_, i) => i % 2 === 0).every((x) => isPointInsideRange(range2, x));\n};\nconst isPointNearLine = ([x, y], path, dist2 = 5) => {\n  let x1;\n  let y1;\n  let x2;\n  let y2;\n  let isWithin = false;\n  for (let i = 0; i < path.length - 2; i += 2) {\n    x1 = path[i];\n    y1 = path[i + 1];\n    x2 = path[i + 2];\n    y2 = path[i + 3];\n    const AB = [x2 - x1, y2 - y1];\n    const BE = [x - x2, y - y2];\n    const AE = [x - x1, y - y1];\n    const AB_BE = AB[0] * BE[0] + AB[1] * BE[1];\n    const AB_AE = AB[0] * AE[0] + AB[1] * AE[1];\n    let actDist = 0;\n    if (AB_BE > 0) {\n      actDist = Math.sqrt((y - y2) ** 2 + (x - x2) ** 2);\n    } else if (AB_AE < 0) {\n      actDist = Math.sqrt((y - y1) ** 2 + (x - x1) ** 2);\n    } else {\n      actDist = Math.abs(AB[0] * AE[1] - AB[1] * AE[0]) / Math.sqrt(AB[0] ** 2 + AB[1] ** 2);\n    }\n    if (actDist < dist2) {\n      isWithin = true;\n    }\n  }\n  return isWithin;\n};\nconst isPointInPolygon = ([x, y], polygon) => {\n  let x1;\n  let y1;\n  let x2;\n  let y2;\n  let isWithin = false;\n  for (let i = 0, j = polygon.length - 2; i < polygon.length; i += 2) {\n    x1 = polygon[i];\n    y1 = polygon[i + 1];\n    x2 = polygon[j];\n    y2 = polygon[j + 1];\n    if (y1 > y !== y2 > y && x < (x2 - x1) * (y - y1) / (y2 - y1) + x1) {\n      isWithin = !isWithin;\n    }\n    j = i;\n  }\n  return isWithin;\n};\nclass MouseEventModel {\n  constructor() {\n    this.data = [];\n  }\n  size() {\n    return this.data.length;\n  }\n  addPolygonBasedEvent(value, polygon) {\n    this.data.push({ uid: v4(), type: \"polygon\", value, polygon });\n  }\n  addPointBasedEvent(value, pointAndRadius) {\n    this.data.push({ uid: v4(), type: \"point\", value, polygon: pointAndRadius });\n  }\n  addLineBasedEvent(value, path) {\n    this.data.push({ uid: v4(), type: \"line\", value, polygon: path });\n  }\n  clear() {\n    this.data = [];\n  }\n  find(x, y, reverse = false) {\n    const _ = Array.from(this.data);\n    if (reverse)\n      _.reverse();\n    return _.find((d) => this.isMouseWithin(d, x, y));\n  }\n  findAll(x, y, reverse = false) {\n    const _ = Array.from(this.data);\n    if (reverse)\n      _.reverse();\n    return _.filter((d) => this.isMouseWithin(d, x, y));\n  }\n  getSiblings(source, idField) {\n    const siblings = [];\n    const sourceUids = Array.from(new Set(source.map((d) => d.uid)));\n    source.forEach((s) => {\n      const id = s.value[idField];\n      if (id) {\n        siblings.push(...this.data.filter((_) => _.value[idField] === id && sourceUids.indexOf(_.uid) === -1));\n      }\n    });\n    return siblings;\n  }\n  isMouseWithin(data2, x, y) {\n    switch (data2.type) {\n      case \"point\":\n        return isPointNearPoint([x, y], data2.polygon);\n      case \"line\":\n        return isPointNearLine([x, y], data2.polygon);\n      case \"polygon\":\n      default:\n        return isPointInPolygon([x, y], data2.polygon);\n    }\n  }\n  findAllWithinRange(x1, x2, reverse = false) {\n    const _ = Array.from(this.data);\n    if (reverse)\n      _.reverse();\n    return _.filter((d) => this.isWithinRange(d, x1, x2));\n  }\n  isWithinRange(data2, x1, x2) {\n    switch (data2.type) {\n      case \"point\":\n        return isCircleWithinRange([x1, x2], data2.polygon[0], data2.polygon[2]);\n      case \"line\":\n      case \"polygon\":\n      default:\n        return isAllPointsWithinRange([x1, x2], data2.polygon);\n    }\n  }\n}\nclass GoslingTrackModel {\n  constructor(spec, data2, theme) {\n    this.id = v1();\n    this.theme = theme != null ? theme : getTheme();\n    this.dataOriginal = JSON.parse(JSON.stringify(data2));\n    this.dataAggregated = JSON.parse(JSON.stringify(data2));\n    this.specOriginal = JSON.parse(JSON.stringify(spec));\n    this.specComplete = JSON.parse(JSON.stringify(spec));\n    this.channelScales = {};\n    this.mouseEventModel = new MouseEventModel();\n    const validity = this.validateSpec();\n    if (!validity.valid) {\n      console.warn(\"Gosling specification is not valid!\", validity.errorMessages);\n      return;\n    }\n    this.generateCompleteSpec(this.specComplete);\n    this.flipRanges(this.specComplete);\n    this.generateScales();\n    this.dataAggregated = aggregateData(this.spec(), this.dataAggregated);\n  }\n  getId() {\n    return this.id;\n  }\n  getRenderingId() {\n    var _a;\n    return (_a = this.spec()._renderingId) != null ? _a : this.getId();\n  }\n  originalSpec() {\n    return this.specOriginal;\n  }\n  spec() {\n    return this.specComplete;\n  }\n  data() {\n    return this.dataAggregated;\n  }\n  getMouseEventModel() {\n    return this.mouseEventModel;\n  }\n  generateCompleteSpec(spec) {\n    if (!spec.width || !spec.height) {\n      console.warn(\"Size of track is not determined yet.\");\n      return;\n    }\n    if (spec.orientation === \"vertical\") {\n      const width = spec.width;\n      spec.width = spec.height;\n      spec.height = width;\n    }\n    const xOrY = this.getGenomicChannelKey();\n    let isAxisShown = false;\n    if (xOrY === \"x\") {\n      isAxisShown = IsChannelDeep(spec.x) && spec.x.axis !== void 0 && spec.x.axis !== \"none\";\n    }\n    if (xOrY === \"y\") {\n      isAxisShown = IsChannelDeep(spec.y) && spec.y.axis !== void 0 && spec.y.axis !== \"none\";\n    }\n    if (spec.layout !== \"circular\") {\n      if (IsChannelDeep(spec.x) && spec.x.axis !== void 0 && spec.x.axis !== \"none\") {\n        spec.height -= HIGLASS_AXIS_SIZE;\n      }\n    } else {\n      if (xOrY === \"x\" && isAxisShown && IsChannelDeep(spec.x) && spec.x.axis === \"top\") {\n        spec[\"outerRadius\"] = spec[\"outerRadius\"] - HIGLASS_AXIS_SIZE;\n      } else if (xOrY === \"x\" && isAxisShown && IsChannelDeep(spec.x) && spec.x.axis === \"bottom\") {\n        spec[\"innerRadius\"] = spec[\"innerRadius\"] + HIGLASS_AXIS_SIZE;\n      }\n    }\n    SUPPORTED_CHANNELS.forEach((channelKey) => {\n      const channel = spec[channelKey];\n      if (IsChannelDeep(channel) && !(\"zeroBaseline\" in channel) && channel.type === \"quantitative\") {\n        channel.zeroBaseline = true;\n      }\n    });\n    this.addScaleMaterials(spec);\n  }\n  flipRanges(spec) {\n    if (IsChannelDeep(spec.y) && spec.y.flip && Array.isArray(spec.y.range)) {\n      spec.y.range = spec.y.range.reverse();\n    }\n  }\n  getGenomicChannelKey() {\n    return getGenomicChannelKeyFromTrack(this.spec());\n  }\n  getGenomicChannel() {\n    return getGenomicChannelFromTrack(this.spec());\n  }\n  setChannelDomain(channelKey, domain, force) {\n    const channelRaw = this.originalSpec()[channelKey];\n    if (!force && IsChannelDeep(channelRaw) && channelRaw.domain !== void 0) {\n      return;\n    }\n    const channel = this.specComplete[channelKey];\n    if (IsChannelDeep(channel)) {\n      channel.domain = domain;\n    }\n  }\n  setChannelRange(channelKey, range2) {\n    const channel = this.specComplete[channelKey];\n    if (IsChannelDeep(channel)) {\n      channel.range = range2;\n    }\n  }\n  updateChannelValue() {\n    if (this.originalSpec().y === void 0) {\n      const y = this.spec().y;\n      const rowCategories = this.getChannelDomainArray(\"row\");\n      if (y && IsChannelValue(y) && rowCategories && this.spec().mark !== \"withinLink\") {\n        y.value = this.spec().height / rowCategories.length / 2;\n      }\n    }\n  }\n  encodedValue(channelKey, value) {\n    var _a;\n    if (channelKey === \"text\" && value !== void 0) {\n      return `${+value ? ~~value : value}`;\n    }\n    const channel = this.spec()[channelKey];\n    const channelFieldType = IsChannelDeep(channel) ? channel.type : IsChannelValue(channel) ? \"constant\" : void 0;\n    if (!channelFieldType) {\n      return void 0;\n    }\n    if (channelFieldType === \"constant\") {\n      return this.channelScales[channelKey]();\n    }\n    if (value === void 0) {\n      return void 0;\n    }\n    if (typeof this.channelScales[channelKey] !== \"function\") {\n      return void 0;\n    }\n    switch (channelKey) {\n      case \"x\":\n      case \"y\":\n      case \"x1\":\n      case \"y1\":\n      case \"xe\":\n      case \"ye\":\n      case \"x1e\":\n        if (channelFieldType === \"quantitative\" || channelFieldType === \"genomic\") {\n          return this.channelScales[channelKey](value);\n        }\n        if (channelFieldType === \"nominal\") {\n          return this.channelScales[channelKey](value);\n        }\n        break;\n      case \"stroke\":\n      case \"color\":\n        if (channelFieldType === \"quantitative\") {\n          const s = this.channelScales[channelKey].copy();\n          const d = s.domain();\n          const e = d[1] - d[0];\n          const so = Array.from((_a = channel.scaleOffset) != null ? _a : [0, 1]);\n          return s.domain([d[0] + e * so.sort()[0], d[0] + e * so.sort()[1]])(value);\n        }\n        if (channelFieldType === \"nominal\") {\n          return this.channelScales[channelKey](value);\n        }\n        break;\n      case \"size\":\n        if (channelFieldType === \"quantitative\") {\n          return this.channelScales[channelKey](value);\n        }\n        if (channelFieldType === \"nominal\") {\n          return this.channelScales[channelKey](value);\n        }\n        break;\n      case \"row\":\n        if (channelFieldType === \"nominal\") {\n          return this.channelScales[channelKey](value);\n        }\n        break;\n      case \"strokeWidth\":\n      case \"opacity\":\n        if (channelFieldType === \"quantitative\") {\n          return this.channelScales[channelKey](value);\n        }\n        break;\n      default:\n        console.warn(`${channelKey} is not supported for encoding values, so returning a undefined value`);\n        return void 0;\n    }\n  }\n  trackVisibility(currentStage) {\n    const spec = this.spec();\n    if (!spec.visibility || spec.visibility.length === 0 || spec.visibility.filter((d) => d.target === \"track\").length === 0) {\n      return true;\n    }\n    let visibility = true;\n    spec.visibility.filter((d) => d.target === \"track\").forEach((d) => {\n      const { operation, measure, threshold } = d;\n      let compareValue;\n      if (measure === \"zoomLevel\") {\n        compareValue = currentStage[measure];\n      } else {\n        compareValue = spec[measure];\n      }\n      if (compareValue !== void 0) {\n        visibility = visibility && logicalComparison(compareValue, operation, threshold) === 1;\n      }\n    });\n    return visibility;\n  }\n  markVisibility(datum, metrics) {\n    const spec = this.spec();\n    if (!spec.visibility || spec.visibility.length === 0 || spec.visibility.filter((d) => d.target === \"mark\").length === 0) {\n      return 1;\n    }\n    let visibility = 1;\n    spec.visibility.filter((d) => d.target === \"mark\").forEach((d) => {\n      const { operation, threshold, conditionPadding, transitionPadding, measure } = d;\n      const padding = conditionPadding != null ? conditionPadding : 0;\n      const mark = spec.mark;\n      let newVisibility = 1;\n      if (mark === \"text\" && threshold === \"|xe-x|\" && measure === \"width\") {\n        const xe = this.encodedPIXIProperty(\"xe\", datum);\n        const x = this.encodedPIXIProperty(\"x\", datum);\n        if (xe !== void 0 && (metrics == null ? void 0 : metrics.width)) {\n          newVisibility = logicalComparison(metrics.width + padding, operation, Math.abs(xe - x), transitionPadding);\n        }\n      } else if (measure === \"width\" && typeof threshold === \"number\" && (metrics == null ? void 0 : metrics.width)) {\n        newVisibility = logicalComparison(metrics.width + padding, operation, threshold, transitionPadding);\n      } else if (measure === \"zoomLevel\" && typeof threshold === \"number\" && (metrics == null ? void 0 : metrics.zoomLevel)) {\n        newVisibility = logicalComparison(metrics.zoomLevel, operation, threshold, transitionPadding);\n      }\n      if (visibility > newVisibility) {\n        visibility = newVisibility;\n      }\n    });\n    return visibility;\n  }\n  visualPropertyByChannel(channelKey, datum) {\n    const value = datum !== void 0 ? getValueUsingChannel(datum, this.spec()[channelKey]) : void 0;\n    return this.encodedValue(channelKey, value);\n  }\n  encodedPIXIProperty(propertyKey, datum, additionalInfo) {\n    const mark = this.spec().mark;\n    if ([\n      \"text\",\n      \"color\",\n      \"row\",\n      \"stroke\",\n      \"opacity\",\n      \"strokeWidth\",\n      \"x\",\n      \"y\",\n      \"xe\",\n      \"x1\",\n      \"x1e\",\n      \"ye\",\n      \"size\"\n    ].includes(propertyKey)) {\n      return this.visualPropertyByChannel(propertyKey, datum);\n    }\n    switch (mark) {\n      case \"bar\":\n        return barProperty(this, propertyKey, datum, additionalInfo);\n      case \"point\":\n      case \"text\":\n        return pointProperty(this, propertyKey, datum);\n      case \"rect\":\n        return rectProperty(this, propertyKey, datum, additionalInfo);\n      default:\n        return void 0;\n    }\n  }\n  addScaleMaterials(spec) {\n    const data2 = this.data();\n    const genomicChannel = this.getGenomicChannel();\n    if (!genomicChannel || !genomicChannel.field) {\n      console.warn(\"Genomic field is not provided in the specification\");\n      return;\n    }\n    if (typeof spec.width === \"undefined\" || typeof spec.height === \"undefined\") {\n      console.warn(\"Track size is not determined yet\");\n      return;\n    }\n    SUPPORTED_CHANNELS.forEach((channelKey) => {\n      var _a, _b, _c, _d;\n      const channel = spec[channelKey];\n      if (IsStackedChannel(spec, channelKey) && IsChannelDeep(channel)) {\n        const pivotedData = group(data2, (d) => d[genomicChannel.field]);\n        const xKeys = [...pivotedData.keys()];\n        if (!channel.domain) {\n          const min2 = \"zeroBaseline\" in channel && channel.zeroBaseline ? 0 : min$1(xKeys.map((d) => sum(pivotedData.get(d).map((_d2) => channel.field ? _d2[channel.field] : void 0))));\n          const max2 = max$1(xKeys.map((d) => sum(pivotedData.get(d).map((_d2) => channel.field ? _d2[channel.field] : void 0))));\n          channel.domain = [min2, max2];\n        }\n        if (!channel.range) {\n          const rowChannel = spec.row;\n          const rowField = IsChannelDeep(rowChannel) ? rowChannel.field : void 0;\n          const rowCategories = (_a = this.getChannelDomainArray(\"row\")) != null ? _a : rowField ? Array.from(new Set(data2.map((d) => d[rowField]))) : [1];\n          const rowHeight = spec.height / rowCategories.length;\n          switch (channelKey) {\n            case \"x\":\n              channel.range = [0, spec.width];\n              break;\n            case \"y\":\n              channel.range = [0, rowHeight];\n              break;\n          }\n        }\n      } else {\n        const rowChannel = spec.row;\n        const rowField = IsChannelDeep(rowChannel) ? rowChannel.field : void 0;\n        const rowCategories = (_b = this.getChannelDomainArray(\"row\")) != null ? _b : rowField ? Array.from(new Set(data2.map((d) => d[rowField]))) : [1];\n        const rowHeight = spec.height / rowCategories.length;\n        if (!channel) {\n          let value;\n          switch (channelKey) {\n            case \"x\":\n              value = spec.width / 2;\n              break;\n            case \"y\":\n              if (spec.mark === \"withinLink\")\n                value = rowHeight;\n              else\n                value = rowHeight / 2;\n              break;\n            case \"size\":\n              if (spec.mark === \"line\")\n                value = this.theme.line.size;\n              else if (spec.mark === \"bar\")\n                value = void 0;\n              else if (spec.mark === \"rect\")\n                value = void 0;\n              else if (spec.mark === \"triangleRight\")\n                value = void 0;\n              else if (spec.mark === \"triangleLeft\")\n                value = void 0;\n              else if (spec.mark === \"triangleBottom\")\n                value = void 0;\n              else if (spec.stretch && spec.mark === \"point\" && IsChannelDeep(spec.x) && IsChannelDeep(spec.xe))\n                value = void 0;\n              else if (spec.mark === \"text\")\n                value = 12;\n              else\n                value = this.theme.point.size;\n              break;\n            case \"color\":\n              value = this.theme.markCommon.color;\n              break;\n            case \"row\":\n              value = 0;\n              break;\n            case \"stroke\":\n              if (spec.mark === \"text\")\n                value = this.theme.text.stroke;\n              else\n                value = this.theme.markCommon.stroke;\n              break;\n            case \"strokeWidth\":\n              if (spec.mark === \"rule\")\n                value = this.theme.rule.strokeWidth;\n              else if (spec.mark === \"withinLink\" || spec.mark === \"betweenLink\")\n                value = this.theme.link.strokeWidth;\n              else if (spec.mark === \"text\")\n                value = this.theme.text.strokeWidth;\n              else\n                value = this.theme.markCommon.strokeWidth;\n              break;\n            case \"opacity\":\n              value = this.theme.markCommon.opacity;\n              break;\n            case \"text\":\n              value = \"\";\n              break;\n          }\n          if (typeof value !== \"undefined\") {\n            spec[channelKey] = { value };\n          }\n        } else if (IsChannelDeep(channel) && (channel.type === \"quantitative\" || channel.type === \"genomic\")) {\n          if (channel.domain === void 0) {\n            const min2 = \"zeroBaseline\" in channel && channel.zeroBaseline ? 0 : (_c = min$1(data2.map((d) => +d[channel.field]))) != null ? _c : 0;\n            const max2 = (_d = max$1(data2.map((d) => +d[channel.field]))) != null ? _d : 0;\n            channel.domain = [min2, max2];\n          } else if (channel.type === \"genomic\" && !IsDomainArray(channel.domain)) {\n            channel.domain = getNumericDomain(channel.domain);\n          }\n          if ((channelKey === \"color\" || channelKey === \"stroke\") && channel.type === \"quantitative\" && !channel.scaleOffset) {\n            channel.scaleOffset = [0, 1];\n          }\n          if (!channel.range) {\n            let range2;\n            switch (channelKey) {\n              case \"x\":\n              case \"xe\":\n              case \"x1\":\n              case \"x1e\":\n                range2 = [0, spec.width];\n                break;\n              case \"y\":\n              case \"ye\":\n                range2 = [0, rowHeight];\n                break;\n              case \"color\":\n              case \"stroke\":\n                range2 = CHANNEL_DEFAULTS.QUANTITATIVE_COLOR;\n                break;\n              case \"size\":\n                range2 = this.theme.markCommon.quantitativeSizeRange;\n                break;\n              case \"strokeWidth\":\n                range2 = [1, 3];\n                break;\n              case \"opacity\":\n                range2 = [0, 1];\n                break;\n            }\n            if (range2) {\n              channel.range = range2;\n            }\n          }\n        } else if (IsChannelDeep(channel) && channel.type === \"nominal\") {\n          if (channel.domain === void 0) {\n            channel.domain = Array.from(new Set(data2.map((d) => d[channel.field])));\n          }\n          if (!channel.range) {\n            let startSize = 2;\n            let range2;\n            switch (channelKey) {\n              case \"x\":\n              case \"xe\":\n                range2 = [0, spec.width];\n                break;\n              case \"y\":\n              case \"ye\":\n                range2 = [rowHeight, 0];\n                break;\n              case \"color\":\n              case \"stroke\":\n                range2 = this.theme.markCommon.nominalColorRange;\n                break;\n              case \"row\":\n                range2 = [0, spec.height];\n                break;\n              case \"size\":\n                range2 = channel.domain.map(() => startSize++);\n                break;\n            }\n            if (range2) {\n              channel.range = range2;\n            }\n          }\n        }\n      }\n    });\n    [\n      [\"x\", \"xe\"],\n      [\"y\", \"ye\"]\n    ].forEach((pair) => {\n      const [k1, k2] = pair;\n      const c1 = spec[k1], c2 = spec[k2];\n      if (IsChannelDeep(c1) && IsChannelDeep(c2) && c1.type === c2.type && c1.domain && c2.domain && Array.isArray(c1.domain) && Array.isArray(c2.domain)) {\n        if (c1.type === \"genomic\" || c1.type === \"quantitative\") {\n          const min2 = min$1([c1.domain[0], c2.domain[0]]);\n          const max2 = max$1([c1.domain[1], c2.domain[1]]);\n          c1.domain = c2.domain = [min2, max2];\n        } else if (c1.type === \"nominal\") {\n          const range2 = Array.from(/* @__PURE__ */ new Set([...c1.domain, ...c2.domain]));\n          c1.range = c2.range = range2;\n        }\n      }\n    });\n  }\n  generateScales() {\n    const spec = this.spec();\n    SUPPORTED_CHANNELS.forEach((channelKey) => {\n      const channel = spec[channelKey];\n      if (IsChannelValue(channel)) {\n        this.channelScales[channelKey] = () => channel.value;\n      } else if (IsChannelDeep(channel)) {\n        if (channelKey === \"text\") {\n          return;\n        }\n        const domain = channel.domain;\n        const range2 = channel.range;\n        if (domain === void 0 || range2 === void 0) {\n          return;\n        }\n        if (channel.type === \"quantitative\" || channel.type === \"genomic\") {\n          switch (channelKey) {\n            case \"x\":\n            case \"x1\":\n            case \"xe\":\n            case \"x1e\":\n            case \"y\":\n            case \"ye\":\n            case \"size\":\n            case \"opacity\":\n            case \"strokeWidth\":\n              this.channelScales[channelKey] = scaleLinear().domain(domain).range(range2);\n              break;\n            case \"color\":\n            case \"stroke\":\n              let interpolate = interpolateViridis;\n              if (Object.keys(PREDEFINED_COLOR_STR_MAP).includes(range2)) {\n                interpolate = PREDEFINED_COLOR_STR_MAP[range2];\n              }\n              this.channelScales[channelKey] = scaleSequential(interpolate).domain(domain);\n              break;\n          }\n        } else if (channel.type === \"nominal\") {\n          switch (channelKey) {\n            case \"x\":\n            case \"xe\":\n            case \"y\":\n            case \"ye\":\n            case \"row\":\n              this.channelScales[channelKey] = scaleBand().domain(domain).range(range2);\n              break;\n            case \"size\":\n              this.channelScales[channelKey] = scaleOrdinal().domain(domain).range(range2);\n              break;\n            case \"color\":\n            case \"stroke\":\n              this.channelScales[channelKey] = scaleOrdinal(range2).domain(domain);\n              break;\n          }\n        }\n      }\n    });\n  }\n  getChannelScale(channelKey) {\n    return this.channelScales[channelKey];\n  }\n  setChannelScale(channelKey, scale) {\n    this.channelScales[channelKey] = scale;\n  }\n  addDataRows(_) {\n    this.dataAggregated = [...this.dataAggregated, ..._];\n  }\n  isShowYAxis() {\n    const spec = this.spec();\n    const yDomain = this.getChannelDomainArray(\"y\");\n    const yRange = this.getChannelRangeArray(\"y\");\n    return IsChannelDeep(spec.y) && spec.y.axis !== \"none\" && spec.y.type === \"quantitative\" && !!yDomain && !!yRange;\n  }\n  getChannelDomainArray(channelKey) {\n    const c = this.spec()[channelKey];\n    return IsChannelDeep(c) && IsDomainArray(c.domain) ? c.domain : void 0;\n  }\n  getChannelRangeArray(channelKey) {\n    const c = this.spec()[channelKey];\n    return IsChannelDeep(c) && IsRangeArray(c.range) ? c.range : void 0;\n  }\n  validateSpec() {\n    return validateTrack(this.originalSpec());\n  }\n}\nconst GOSLING_DATA_ROW_UID_FIELD = \"gosling-data-row-uid\";\nfunction getTabularData(spec, data2) {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k;\n  const tabularData = [];\n  if (!IsDataDeepTileset(spec.data)) {\n    console.warn(\"No data is specified\");\n    return;\n  }\n  if (spec.data.type === \"vector\" || spec.data.type === \"bigwig\") {\n    if (!spec.data.column || !spec.data.value) {\n      console.warn(\"Proper data configuration is not provided. Please specify the name of data fields.\");\n      return;\n    }\n    if (!data2.dense) {\n      return;\n    }\n    const bin = (_a = spec.data.binSize) != null ? _a : 1;\n    const numericValues = data2.dense;\n    const numOfGenomicPositions = data2.tileSize;\n    const tileUnitSize = data2.tileWidth / data2.tileSize;\n    const valueName = spec.data.value;\n    const columnName = spec.data.column;\n    const startName = (_b = spec.data.start) != null ? _b : \"start\";\n    const endName = (_c = spec.data.end) != null ? _c : \"end\";\n    const minValueName = `${valueName}_min`;\n    const maxValueName = `${valueName}_max`;\n    const agg = (_d = spec.data.aggregation) != null ? _d : \"mean\";\n    let cumVal = 0;\n    let minVal = Number.MAX_SAFE_INTEGER;\n    let maxVal = Number.MIN_SAFE_INTEGER;\n    let binStart = Number.MIN_SAFE_INTEGER;\n    let binEnd = Number.MAX_SAFE_INTEGER;\n    Array.from(Array(numOfGenomicPositions).keys()).forEach((g, j) => {\n      if (bin === 1) {\n        const value = numericValues[j] / (agg === \"mean\" ? tileUnitSize : 1);\n        tabularData.push({\n          [valueName]: value,\n          [columnName]: data2.tileX + (j + 0.5) * tileUnitSize,\n          [startName]: data2.tileX + j * tileUnitSize,\n          [endName]: data2.tileX + (j + 1) * tileUnitSize,\n          [minValueName]: value,\n          [maxValueName]: value\n        });\n      } else {\n        if (j % bin === 0) {\n          cumVal = minVal = maxVal = numericValues[j];\n          binStart = j;\n          binEnd = j + bin;\n        } else if (j % bin === bin - 1) {\n          tabularData.push({\n            [valueName]: cumVal / bin / (agg === \"mean\" ? tileUnitSize : 1),\n            [columnName]: data2.tileX + (binStart + bin / 2) * tileUnitSize,\n            [startName]: data2.tileX + binStart * tileUnitSize,\n            [endName]: data2.tileX + binEnd * tileUnitSize,\n            [minValueName]: minVal,\n            [maxValueName]: maxVal\n          });\n        } else if (j === numOfGenomicPositions - 1) {\n          const smallBin = numOfGenomicPositions % bin;\n          const correctedBinEnd = binStart + smallBin;\n          tabularData.push({\n            [valueName]: cumVal / smallBin / (agg === \"mean\" ? tileUnitSize : 1),\n            [columnName]: data2.tileX + (binStart + smallBin / 2) * tileUnitSize,\n            [startName]: data2.tileX + binStart * tileUnitSize,\n            [endName]: data2.tileX + correctedBinEnd * tileUnitSize,\n            [minValueName]: minVal,\n            [maxValueName]: maxVal\n          });\n        } else {\n          cumVal += numericValues[j];\n          if (minVal > numericValues[j])\n            minVal = numericValues[j];\n          if (maxVal < numericValues[j])\n            maxVal = numericValues[j];\n        }\n      }\n    });\n  } else if (spec.data.type === \"multivec\") {\n    if (!spec.data.row || !spec.data.column || !spec.data.value) {\n      console.warn(\"Proper data configuration is not provided. Please specify the name of data fields.\");\n      return;\n    }\n    if (!data2.dense || data2.shape === void 0) {\n      return;\n    }\n    const bin = (_e = spec.data.binSize) != null ? _e : 1;\n    const numOfTotalCategories = data2.shape[0];\n    const categories = (_f = spec.data.categories) != null ? _f : [...Array(numOfTotalCategories).keys()];\n    const numericValues = data2.dense;\n    const numOfGenomicPositions = data2.shape[1];\n    const tileUnitSize = data2.tileWidth / data2.tileSize;\n    const rowName = spec.data.row;\n    const valueName = spec.data.value;\n    const columnName = spec.data.column;\n    const startName = (_g = spec.data.start) != null ? _g : \"start\";\n    const endName = (_h = spec.data.end) != null ? _h : \"end\";\n    const minValueName = `${valueName}_min`;\n    const maxValueName = `${valueName}_max`;\n    const agg = (_i = spec.data.aggregation) != null ? _i : \"mean\";\n    categories.forEach((c, i) => {\n      let cumVal = 0;\n      let binStart = Number.MIN_SAFE_INTEGER;\n      let binEnd = Number.MAX_SAFE_INTEGER;\n      let minVal = Number.MAX_SAFE_INTEGER;\n      let maxVal = Number.MIN_SAFE_INTEGER;\n      Array.from(Array(numOfGenomicPositions).keys()).forEach((g, j) => {\n        if (bin === 1) {\n          const value = numericValues[numOfGenomicPositions * i + j] / (agg === \"mean\" ? tileUnitSize : 1);\n          tabularData.push({\n            [rowName]: c,\n            [valueName]: value,\n            [columnName]: data2.tileX + (j + 0.5) * tileUnitSize,\n            [startName]: data2.tileX + j * tileUnitSize,\n            [endName]: data2.tileX + (j + 1) * tileUnitSize,\n            [minValueName]: value,\n            [maxValueName]: value\n          });\n        } else {\n          if (j % bin === 0) {\n            cumVal = minVal = maxVal = numericValues[numOfGenomicPositions * i + j];\n            binStart = j;\n            binEnd = j + bin;\n          } else if (j % bin === bin - 1) {\n            tabularData.push({\n              [rowName]: c,\n              [valueName]: agg === \"mean\" ? cumVal / bin / tileUnitSize : cumVal,\n              [columnName]: data2.tileX + (binStart + bin / 2) * tileUnitSize,\n              [startName]: data2.tileX + binStart * tileUnitSize,\n              [endName]: data2.tileX + binEnd * tileUnitSize,\n              [minValueName]: minVal,\n              [maxValueName]: maxVal\n            });\n          } else if (j === numOfGenomicPositions - 1) {\n            const smallBin = numOfGenomicPositions % bin;\n            const correctedBinEnd = binStart + smallBin;\n            tabularData.push({\n              [rowName]: c,\n              [valueName]: agg === \"mean\" ? cumVal / smallBin / tileUnitSize : cumVal,\n              [columnName]: data2.tileX + (binStart + smallBin / 2) * tileUnitSize,\n              [startName]: data2.tileX + binStart * tileUnitSize,\n              [endName]: data2.tileX + correctedBinEnd * tileUnitSize,\n              [minValueName]: minVal,\n              [maxValueName]: maxVal\n            });\n          } else {\n            const value = numericValues[numOfGenomicPositions * i + j];\n            cumVal += value;\n            if (minVal > value)\n              minVal = value;\n            if (maxVal < value)\n              maxVal = value;\n          }\n        }\n      });\n    });\n  } else if (spec.data.type === \"matrix\") {\n    if (!data2.dense || typeof data2.tileY === \"undefined\" || typeof data2.tileHeight === \"undefined\") {\n      return;\n    }\n    const numBins = Math.sqrt(data2.dense.length);\n    const { tileX, tileY, tileWidth, tileHeight } = data2;\n    const numericValues = data2.dense;\n    const tileXUnitSize = tileWidth / numBins;\n    const tileYUnitSize = tileHeight / numBins;\n    const columnField = (_j = spec.data.column) != null ? _j : \"x\";\n    const rowField = (_k = spec.data.row) != null ? _k : \"y\";\n    const aggSize = 16;\n    for (let i = 0; i < numericValues.length / aggSize; i++) {\n      const aggLen = Math.sqrt(aggSize);\n      const xIndex = i * aggLen % numBins;\n      const yIndex = Math.floor(i * aggLen / numBins) * aggLen;\n      let value = NaN;\n      for (let c = 0; c < aggLen; c++) {\n        for (let r = 0; r < aggLen; r++) {\n          const curVal = numericValues[(yIndex + r) * numBins + (xIndex + c)];\n          if (!isNaN(+curVal)) {\n            if (isNaN(value)) {\n              value = 0;\n            }\n            value += curVal;\n          }\n        }\n      }\n      if (isNaN(value)) {\n        continue;\n      }\n      const xs = tileX + xIndex * tileXUnitSize;\n      const xe = tileX + (xIndex + aggLen) * tileXUnitSize;\n      const ys = tileY + yIndex * tileYUnitSize;\n      const ye = tileY + (yIndex + aggLen) * tileYUnitSize;\n      const x = (xs + xe) / 2;\n      const y = (ys + ye) / 2;\n      tabularData.push({\n        value,\n        [columnField]: x,\n        [`${columnField}s`]: xs,\n        [`${columnField}e`]: xe,\n        [rowField]: y,\n        [`${rowField}s`]: ys,\n        [`${rowField}e`]: ye\n      });\n    }\n  } else if (spec.data.type === \"beddb\") {\n    if (!data2.raw) {\n      return;\n    }\n    const { genomicFields, exonIntervalFields, valueFields } = spec.data;\n    data2.raw.forEach((d, i) => {\n      const { chrOffset, fields } = d;\n      const datum = {};\n      datum[GOSLING_DATA_ROW_UID_FIELD] = `${i}`;\n      genomicFields.forEach((g) => {\n        datum[g.name] = +fields[g.index] + chrOffset;\n      });\n      valueFields == null ? void 0 : valueFields.forEach((v) => {\n        datum[v.name] = v.type === \"quantitative\" ? +fields[v.index] : fields[v.index];\n      });\n      tabularData.push({\n        ...datum,\n        type: \"gene\"\n      });\n      if (exonIntervalFields) {\n        const [exonStartField, exonEndField] = exonIntervalFields;\n        const exonStartStrs = fields[exonStartField.index].split(\",\");\n        const exonEndStrs = fields[exonEndField.index].split(\",\");\n        exonStartStrs.forEach((es, i2) => {\n          const ee = exonEndStrs[i2];\n          tabularData.push({\n            ...datum,\n            [exonStartField.name]: +es + chrOffset,\n            [exonEndField.name]: +ee + chrOffset,\n            type: \"exon\"\n          });\n          if (i2 + 1 < exonStartStrs.length) {\n            const nextEs = exonStartStrs[i2 + 1];\n            tabularData.push({\n              ...datum,\n              [exonStartField.name]: +ee + chrOffset,\n              [exonEndField.name]: +nextEs + chrOffset,\n              type: \"intron\"\n            });\n          }\n        });\n      }\n    });\n  }\n  return tabularData;\n}\nfunction publish(name2, data2) {\n  PubSub.publish(name2, data2);\n}\nfunction subscribe(name2, callback) {\n  PubSub.subscribe(name2, callback);\n}\nfunction unsubscribe(name2) {\n  PubSub.unsubscribe(name2);\n}\nconst encodedJs$1 = \"KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY29tbW9uanNHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gInVuZGVmaW5lZCIgPyBnbG9iYWxUaGlzIDogdHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSAidW5kZWZpbmVkIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIiA/IHNlbGYgOiB7fTsKICBmdW5jdGlvbiBnZXREZWZhdWx0RXhwb3J0RnJvbUNqcyh4KSB7CiAgICByZXR1cm4geCAmJiB4Ll9fZXNNb2R1bGUgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHgsICJkZWZhdWx0IikgPyB4WyJkZWZhdWx0Il0gOiB4OwogIH0KICBmdW5jdGlvbiBnZXRBdWdtZW50ZWROYW1lc3BhY2UobikgewogICAgaWYgKG4uX19lc01vZHVsZSkKICAgICAgcmV0dXJuIG47CiAgICB2YXIgYSA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwogICAgT2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbihrKSB7CiAgICAgIHZhciBkID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLCBrKTsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsIGssIGQuZ2V0ID8gZCA6IHsKICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICAgIGdldDogZnVuY3Rpb24oKSB7CiAgICAgICAgICByZXR1cm4gbltrXTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSk7CiAgICByZXR1cm4gYTsKICB9CiAgdmFyIHdvcmtlciA9IHt9OwogIHZhciBpc09ic2VydmFibGUgPSAodmFsdWUpID0+IHsKICAgIGlmICghdmFsdWUpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgaWYgKHR5cGVvZiBTeW1ib2wub2JzZXJ2YWJsZSA9PT0gInN5bWJvbCIgJiYgdHlwZW9mIHZhbHVlW1N5bWJvbC5vYnNlcnZhYmxlXSA9PT0gImZ1bmN0aW9uIikgewogICAgICByZXR1cm4gdmFsdWUgPT09IHZhbHVlW1N5bWJvbC5vYnNlcnZhYmxlXSgpOwogICAgfQogICAgaWYgKHR5cGVvZiB2YWx1ZVsiQEBvYnNlcnZhYmxlIl0gPT09ICJmdW5jdGlvbiIpIHsKICAgICAgcmV0dXJuIHZhbHVlID09PSB2YWx1ZVsiQEBvYnNlcnZhYmxlIl0oKTsKICAgIH0KICAgIHJldHVybiBmYWxzZTsKICB9OwogIHZhciBjb21tb24kMSA9IHt9OwogIHZhciBzZXJpYWxpemVycyA9IHt9OwogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZXJpYWxpemVycywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwogIHNlcmlhbGl6ZXJzLkRlZmF1bHRTZXJpYWxpemVyID0gc2VyaWFsaXplcnMuZXh0ZW5kU2VyaWFsaXplciA9IHZvaWQgMDsKICBmdW5jdGlvbiBleHRlbmRTZXJpYWxpemVyKGV4dGVuZCwgaW1wbGVtZW50YXRpb24pIHsKICAgIGNvbnN0IGZhbGxiYWNrRGVzZXJpYWxpemVyID0gZXh0ZW5kLmRlc2VyaWFsaXplLmJpbmQoZXh0ZW5kKTsKICAgIGNvbnN0IGZhbGxiYWNrU2VyaWFsaXplciA9IGV4dGVuZC5zZXJpYWxpemUuYmluZChleHRlbmQpOwogICAgcmV0dXJuIHsKICAgICAgZGVzZXJpYWxpemUobWVzc2FnZSkgewogICAgICAgIHJldHVybiBpbXBsZW1lbnRhdGlvbi5kZXNlcmlhbGl6ZShtZXNzYWdlLCBmYWxsYmFja0Rlc2VyaWFsaXplcik7CiAgICAgIH0sCiAgICAgIHNlcmlhbGl6ZShpbnB1dCkgewogICAgICAgIHJldHVybiBpbXBsZW1lbnRhdGlvbi5zZXJpYWxpemUoaW5wdXQsIGZhbGxiYWNrU2VyaWFsaXplcik7CiAgICAgIH0KICAgIH07CiAgfQogIHNlcmlhbGl6ZXJzLmV4dGVuZFNlcmlhbGl6ZXIgPSBleHRlbmRTZXJpYWxpemVyOwogIGNvbnN0IERlZmF1bHRFcnJvclNlcmlhbGl6ZXIgPSB7CiAgICBkZXNlcmlhbGl6ZShtZXNzYWdlKSB7CiAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKEVycm9yKG1lc3NhZ2UubWVzc2FnZSksIHsKICAgICAgICBuYW1lOiBtZXNzYWdlLm5hbWUsCiAgICAgICAgc3RhY2s6IG1lc3NhZ2Uuc3RhY2sKICAgICAgfSk7CiAgICB9LAogICAgc2VyaWFsaXplKGVycm9yKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgX19lcnJvcl9tYXJrZXI6ICIkJGVycm9yIiwKICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLAogICAgICAgIG5hbWU6IGVycm9yLm5hbWUsCiAgICAgICAgc3RhY2s6IGVycm9yLnN0YWNrCiAgICAgIH07CiAgICB9CiAgfTsKICBjb25zdCBpc1NlcmlhbGl6ZWRFcnJvciA9ICh0aGluZykgPT4gdGhpbmcgJiYgdHlwZW9mIHRoaW5nID09PSAib2JqZWN0IiAmJiAiX19lcnJvcl9tYXJrZXIiIGluIHRoaW5nICYmIHRoaW5nLl9fZXJyb3JfbWFya2VyID09PSAiJCRlcnJvciI7CiAgc2VyaWFsaXplcnMuRGVmYXVsdFNlcmlhbGl6ZXIgPSB7CiAgICBkZXNlcmlhbGl6ZShtZXNzYWdlKSB7CiAgICAgIGlmIChpc1NlcmlhbGl6ZWRFcnJvcihtZXNzYWdlKSkgewogICAgICAgIHJldHVybiBEZWZhdWx0RXJyb3JTZXJpYWxpemVyLmRlc2VyaWFsaXplKG1lc3NhZ2UpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBtZXNzYWdlOwogICAgICB9CiAgICB9LAogICAgc2VyaWFsaXplKGlucHV0KSB7CiAgICAgIGlmIChpbnB1dCBpbnN0YW5jZW9mIEVycm9yKSB7CiAgICAgICAgcmV0dXJuIERlZmF1bHRFcnJvclNlcmlhbGl6ZXIuc2VyaWFsaXplKGlucHV0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gaW5wdXQ7CiAgICAgIH0KICAgIH0KICB9OwogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb21tb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwogIGNvbW1vbiQxLnNlcmlhbGl6ZSA9IGNvbW1vbiQxLmRlc2VyaWFsaXplID0gY29tbW9uJDEucmVnaXN0ZXJTZXJpYWxpemVyID0gdm9pZCAwOwogIGNvbnN0IHNlcmlhbGl6ZXJzXzEgPSBzZXJpYWxpemVyczsKICBsZXQgcmVnaXN0ZXJlZFNlcmlhbGl6ZXIgPSBzZXJpYWxpemVyc18xLkRlZmF1bHRTZXJpYWxpemVyOwogIGZ1bmN0aW9uIHJlZ2lzdGVyU2VyaWFsaXplcihzZXJpYWxpemVyKSB7CiAgICByZWdpc3RlcmVkU2VyaWFsaXplciA9IHNlcmlhbGl6ZXJzXzEuZXh0ZW5kU2VyaWFsaXplcihyZWdpc3RlcmVkU2VyaWFsaXplciwgc2VyaWFsaXplcik7CiAgfQogIGNvbW1vbiQxLnJlZ2lzdGVyU2VyaWFsaXplciA9IHJlZ2lzdGVyU2VyaWFsaXplcjsKICBmdW5jdGlvbiBkZXNlcmlhbGl6ZShtZXNzYWdlKSB7CiAgICByZXR1cm4gcmVnaXN0ZXJlZFNlcmlhbGl6ZXIuZGVzZXJpYWxpemUobWVzc2FnZSk7CiAgfQogIGNvbW1vbiQxLmRlc2VyaWFsaXplID0gZGVzZXJpYWxpemU7CiAgZnVuY3Rpb24gc2VyaWFsaXplKGlucHV0KSB7CiAgICByZXR1cm4gcmVnaXN0ZXJlZFNlcmlhbGl6ZXIuc2VyaWFsaXplKGlucHV0KTsKICB9CiAgY29tbW9uJDEuc2VyaWFsaXplID0gc2VyaWFsaXplOwogIHZhciB0cmFuc2ZlcmFibGUgPSB7fTsKICB2YXIgc3ltYm9scyA9IHt9OwogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzeW1ib2xzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CiAgc3ltYm9scy4kd29ya2VyID0gc3ltYm9scy4kdHJhbnNmZXJhYmxlID0gc3ltYm9scy4kdGVybWluYXRlID0gc3ltYm9scy4kZXZlbnRzID0gc3ltYm9scy4kZXJyb3JzID0gdm9pZCAwOwogIHN5bWJvbHMuJGVycm9ycyA9IFN5bWJvbCgidGhyZWFkLmVycm9ycyIpOwogIHN5bWJvbHMuJGV2ZW50cyA9IFN5bWJvbCgidGhyZWFkLmV2ZW50cyIpOwogIHN5bWJvbHMuJHRlcm1pbmF0ZSA9IFN5bWJvbCgidGhyZWFkLnRlcm1pbmF0ZSIpOwogIHN5bWJvbHMuJHRyYW5zZmVyYWJsZSA9IFN5bWJvbCgidGhyZWFkLnRyYW5zZmVyYWJsZSIpOwogIHN5bWJvbHMuJHdvcmtlciA9IFN5bWJvbCgidGhyZWFkLndvcmtlciIpOwogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0cmFuc2ZlcmFibGUsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKICB0cmFuc2ZlcmFibGUuVHJhbnNmZXIgPSB0cmFuc2ZlcmFibGUuaXNUcmFuc2ZlckRlc2NyaXB0b3IgPSB2b2lkIDA7CiAgY29uc3Qgc3ltYm9sc18xID0gc3ltYm9sczsKICBmdW5jdGlvbiBpc1RyYW5zZmVyYWJsZSh0aGluZykgewogICAgaWYgKCF0aGluZyB8fCB0eXBlb2YgdGhpbmcgIT09ICJvYmplY3QiKQogICAgICByZXR1cm4gZmFsc2U7CiAgICByZXR1cm4gdHJ1ZTsKICB9CiAgZnVuY3Rpb24gaXNUcmFuc2ZlckRlc2NyaXB0b3IodGhpbmcpIHsKICAgIHJldHVybiB0aGluZyAmJiB0eXBlb2YgdGhpbmcgPT09ICJvYmplY3QiICYmIHRoaW5nW3N5bWJvbHNfMS4kdHJhbnNmZXJhYmxlXTsKICB9CiAgdHJhbnNmZXJhYmxlLmlzVHJhbnNmZXJEZXNjcmlwdG9yID0gaXNUcmFuc2ZlckRlc2NyaXB0b3I7CiAgZnVuY3Rpb24gVHJhbnNmZXIkMShwYXlsb2FkLCB0cmFuc2ZlcmFibGVzKSB7CiAgICBpZiAoIXRyYW5zZmVyYWJsZXMpIHsKICAgICAgaWYgKCFpc1RyYW5zZmVyYWJsZShwYXlsb2FkKSkKICAgICAgICB0aHJvdyBFcnJvcigpOwogICAgICB0cmFuc2ZlcmFibGVzID0gW3BheWxvYWRdOwogICAgfQogICAgcmV0dXJuIHsKICAgICAgW3N5bWJvbHNfMS4kdHJhbnNmZXJhYmxlXTogdHJ1ZSwKICAgICAgc2VuZDogcGF5bG9hZCwKICAgICAgdHJhbnNmZXJhYmxlcwogICAgfTsKICB9CiAgdHJhbnNmZXJhYmxlLlRyYW5zZmVyID0gVHJhbnNmZXIkMTsKICB2YXIgbWVzc2FnZXMkMSA9IHt9OwogIChmdW5jdGlvbihleHBvcnRzKSB7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwogICAgZXhwb3J0cy5Xb3JrZXJNZXNzYWdlVHlwZSA9IGV4cG9ydHMuTWFzdGVyTWVzc2FnZVR5cGUgPSB2b2lkIDA7CiAgICAoZnVuY3Rpb24oTWFzdGVyTWVzc2FnZVR5cGUpIHsKICAgICAgTWFzdGVyTWVzc2FnZVR5cGVbImNhbmNlbCJdID0gImNhbmNlbCI7CiAgICAgIE1hc3Rlck1lc3NhZ2VUeXBlWyJydW4iXSA9ICJydW4iOwogICAgfSkoZXhwb3J0cy5NYXN0ZXJNZXNzYWdlVHlwZSB8fCAoZXhwb3J0cy5NYXN0ZXJNZXNzYWdlVHlwZSA9IHt9KSk7CiAgICAoZnVuY3Rpb24oV29ya2VyTWVzc2FnZVR5cGUpIHsKICAgICAgV29ya2VyTWVzc2FnZVR5cGVbImVycm9yIl0gPSAiZXJyb3IiOwogICAgICBXb3JrZXJNZXNzYWdlVHlwZVsiaW5pdCJdID0gImluaXQiOwogICAgICBXb3JrZXJNZXNzYWdlVHlwZVsicmVzdWx0Il0gPSAicmVzdWx0IjsKICAgICAgV29ya2VyTWVzc2FnZVR5cGVbInJ1bm5pbmciXSA9ICJydW5uaW5nIjsKICAgICAgV29ya2VyTWVzc2FnZVR5cGVbInVuY2F1Z2h0RXJyb3IiXSA9ICJ1bmNhdWdodEVycm9yIjsKICAgIH0pKGV4cG9ydHMuV29ya2VyTWVzc2FnZVR5cGUgfHwgKGV4cG9ydHMuV29ya2VyTWVzc2FnZVR5cGUgPSB7fSkpOwogIH0pKG1lc3NhZ2VzJDEpOwogIHZhciBpbXBsZW1lbnRhdGlvbl9icm93c2VyID0ge307CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGltcGxlbWVudGF0aW9uX2Jyb3dzZXIsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKICBjb25zdCBpc1dvcmtlclJ1bnRpbWUgPSBmdW5jdGlvbiBpc1dvcmtlclJ1bnRpbWUyKCkgewogICAgY29uc3QgaXNXaW5kb3dDb250ZXh0ID0gdHlwZW9mIHNlbGYgIT09ICJ1bmRlZmluZWQiICYmIHR5cGVvZiBXaW5kb3cgIT09ICJ1bmRlZmluZWQiICYmIHNlbGYgaW5zdGFuY2VvZiBXaW5kb3c7CiAgICByZXR1cm4gdHlwZW9mIHNlbGYgIT09ICJ1bmRlZmluZWQiICYmIHNlbGYucG9zdE1lc3NhZ2UgJiYgIWlzV2luZG93Q29udGV4dCA/IHRydWUgOiBmYWxzZTsKICB9OwogIGNvbnN0IHBvc3RNZXNzYWdlVG9NYXN0ZXIgPSBmdW5jdGlvbiBwb3N0TWVzc2FnZVRvTWFzdGVyMihkYXRhMiwgdHJhbnNmZXJMaXN0KSB7CiAgICBzZWxmLnBvc3RNZXNzYWdlKGRhdGEyLCB0cmFuc2Zlckxpc3QpOwogIH07CiAgY29uc3Qgc3Vic2NyaWJlVG9NYXN0ZXJNZXNzYWdlcyA9IGZ1bmN0aW9uIHN1YnNjcmliZVRvTWFzdGVyTWVzc2FnZXMyKG9uTWVzc2FnZSkgewogICAgY29uc3QgbWVzc2FnZUhhbmRsZXIgPSAobWVzc2FnZUV2ZW50KSA9PiB7CiAgICAgIG9uTWVzc2FnZShtZXNzYWdlRXZlbnQuZGF0YSk7CiAgICB9OwogICAgY29uc3QgdW5zdWJzY3JpYmUgPSAoKSA9PiB7CiAgICAgIHNlbGYucmVtb3ZlRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsIG1lc3NhZ2VIYW5kbGVyKTsKICAgIH07CiAgICBzZWxmLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLCBtZXNzYWdlSGFuZGxlcik7CiAgICByZXR1cm4gdW5zdWJzY3JpYmU7CiAgfTsKICBpbXBsZW1lbnRhdGlvbl9icm93c2VyLmRlZmF1bHQgPSB7CiAgICBpc1dvcmtlclJ1bnRpbWUsCiAgICBwb3N0TWVzc2FnZVRvTWFzdGVyLAogICAgc3Vic2NyaWJlVG9NYXN0ZXJNZXNzYWdlcwogIH07CiAgKGZ1bmN0aW9uKGV4cG9ydHMpIHsKICAgIHZhciBfX2F3YWl0ZXIgPSBjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2F3YWl0ZXIgfHwgZnVuY3Rpb24odGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7CiAgICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7CiAgICAgICAgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24ocmVzb2x2ZSkgewogICAgICAgICAgcmVzb2x2ZSh2YWx1ZSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsKICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgcmVqZWN0KGUpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgc3RlcChnZW5lcmF0b3JbInRocm93Il0odmFsdWUpKTsKICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgcmVqZWN0KGUpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgewogICAgICAgICAgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7CiAgICAgICAgfQogICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTsKICAgICAgfSk7CiAgICB9OwogICAgdmFyIF9faW1wb3J0RGVmYXVsdCA9IGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9faW1wb3J0RGVmYXVsdCB8fCBmdW5jdGlvbihtb2QpIHsKICAgICAgcmV0dXJuIG1vZCAmJiBtb2QuX19lc01vZHVsZSA/IG1vZCA6IHsgImRlZmF1bHQiOiBtb2QgfTsKICAgIH07CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwogICAgZXhwb3J0cy5leHBvc2UgPSBleHBvcnRzLmlzV29ya2VyUnVudGltZSA9IGV4cG9ydHMuVHJhbnNmZXIgPSBleHBvcnRzLnJlZ2lzdGVyU2VyaWFsaXplciA9IHZvaWQgMDsKICAgIGNvbnN0IGlzX29ic2VydmFibGVfMSA9IF9faW1wb3J0RGVmYXVsdChpc09ic2VydmFibGUpOwogICAgY29uc3QgY29tbW9uXzEgPSBjb21tb24kMTsKICAgIGNvbnN0IHRyYW5zZmVyYWJsZV8xID0gdHJhbnNmZXJhYmxlOwogICAgY29uc3QgbWVzc2FnZXNfMSA9IG1lc3NhZ2VzJDE7CiAgICBjb25zdCBpbXBsZW1lbnRhdGlvbl8xID0gX19pbXBvcnREZWZhdWx0KGltcGxlbWVudGF0aW9uX2Jyb3dzZXIpOwogICAgdmFyIGNvbW1vbl8yID0gY29tbW9uJDE7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgInJlZ2lzdGVyU2VyaWFsaXplciIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIGNvbW1vbl8yLnJlZ2lzdGVyU2VyaWFsaXplcjsKICAgIH0gfSk7CiAgICB2YXIgdHJhbnNmZXJhYmxlXzIgPSB0cmFuc2ZlcmFibGU7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIlRyYW5zZmVyIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gdHJhbnNmZXJhYmxlXzIuVHJhbnNmZXI7CiAgICB9IH0pOwogICAgZXhwb3J0cy5pc1dvcmtlclJ1bnRpbWUgPSBpbXBsZW1lbnRhdGlvbl8xLmRlZmF1bHQuaXNXb3JrZXJSdW50aW1lOwogICAgbGV0IGV4cG9zZUNhbGxlZCA9IGZhbHNlOwogICAgY29uc3QgYWN0aXZlU3Vic2NyaXB0aW9ucyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgICBjb25zdCBpc01hc3RlckpvYkNhbmNlbE1lc3NhZ2UgPSAodGhpbmcpID0+IHRoaW5nICYmIHRoaW5nLnR5cGUgPT09IG1lc3NhZ2VzXzEuTWFzdGVyTWVzc2FnZVR5cGUuY2FuY2VsOwogICAgY29uc3QgaXNNYXN0ZXJKb2JSdW5NZXNzYWdlID0gKHRoaW5nKSA9PiB0aGluZyAmJiB0aGluZy50eXBlID09PSBtZXNzYWdlc18xLk1hc3Rlck1lc3NhZ2VUeXBlLnJ1bjsKICAgIGNvbnN0IGlzT2JzZXJ2YWJsZSQxID0gKHRoaW5nKSA9PiBpc19vYnNlcnZhYmxlXzEuZGVmYXVsdCh0aGluZykgfHwgaXNaZW5PYnNlcnZhYmxlKHRoaW5nKTsKICAgIGZ1bmN0aW9uIGlzWmVuT2JzZXJ2YWJsZSh0aGluZykgewogICAgICByZXR1cm4gdGhpbmcgJiYgdHlwZW9mIHRoaW5nID09PSAib2JqZWN0IiAmJiB0eXBlb2YgdGhpbmcuc3Vic2NyaWJlID09PSAiZnVuY3Rpb24iOwogICAgfQogICAgZnVuY3Rpb24gZGVjb25zdHJ1Y3RUcmFuc2Zlcih0aGluZykgewogICAgICByZXR1cm4gdHJhbnNmZXJhYmxlXzEuaXNUcmFuc2ZlckRlc2NyaXB0b3IodGhpbmcpID8geyBwYXlsb2FkOiB0aGluZy5zZW5kLCB0cmFuc2ZlcmFibGVzOiB0aGluZy50cmFuc2ZlcmFibGVzIH0gOiB7IHBheWxvYWQ6IHRoaW5nLCB0cmFuc2ZlcmFibGVzOiB2b2lkIDAgfTsKICAgIH0KICAgIGZ1bmN0aW9uIHBvc3RGdW5jdGlvbkluaXRNZXNzYWdlKCkgewogICAgICBjb25zdCBpbml0TWVzc2FnZSA9IHsKICAgICAgICB0eXBlOiBtZXNzYWdlc18xLldvcmtlck1lc3NhZ2VUeXBlLmluaXQsCiAgICAgICAgZXhwb3NlZDogewogICAgICAgICAgdHlwZTogImZ1bmN0aW9uIgogICAgICAgIH0KICAgICAgfTsKICAgICAgaW1wbGVtZW50YXRpb25fMS5kZWZhdWx0LnBvc3RNZXNzYWdlVG9NYXN0ZXIoaW5pdE1lc3NhZ2UpOwogICAgfQogICAgZnVuY3Rpb24gcG9zdE1vZHVsZUluaXRNZXNzYWdlKG1ldGhvZE5hbWVzKSB7CiAgICAgIGNvbnN0IGluaXRNZXNzYWdlID0gewogICAgICAgIHR5cGU6IG1lc3NhZ2VzXzEuV29ya2VyTWVzc2FnZVR5cGUuaW5pdCwKICAgICAgICBleHBvc2VkOiB7CiAgICAgICAgICB0eXBlOiAibW9kdWxlIiwKICAgICAgICAgIG1ldGhvZHM6IG1ldGhvZE5hbWVzCiAgICAgICAgfQogICAgICB9OwogICAgICBpbXBsZW1lbnRhdGlvbl8xLmRlZmF1bHQucG9zdE1lc3NhZ2VUb01hc3Rlcihpbml0TWVzc2FnZSk7CiAgICB9CiAgICBmdW5jdGlvbiBwb3N0Sm9iRXJyb3JNZXNzYWdlKHVpZDIsIHJhd0Vycm9yKSB7CiAgICAgIGNvbnN0IHsgcGF5bG9hZDogZXJyb3IsIHRyYW5zZmVyYWJsZXMgfSA9IGRlY29uc3RydWN0VHJhbnNmZXIocmF3RXJyb3IpOwogICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSB7CiAgICAgICAgdHlwZTogbWVzc2FnZXNfMS5Xb3JrZXJNZXNzYWdlVHlwZS5lcnJvciwKICAgICAgICB1aWQ6IHVpZDIsCiAgICAgICAgZXJyb3I6IGNvbW1vbl8xLnNlcmlhbGl6ZShlcnJvcikKICAgICAgfTsKICAgICAgaW1wbGVtZW50YXRpb25fMS5kZWZhdWx0LnBvc3RNZXNzYWdlVG9NYXN0ZXIoZXJyb3JNZXNzYWdlLCB0cmFuc2ZlcmFibGVzKTsKICAgIH0KICAgIGZ1bmN0aW9uIHBvc3RKb2JSZXN1bHRNZXNzYWdlKHVpZDIsIGNvbXBsZXRlZCwgcmVzdWx0VmFsdWUpIHsKICAgICAgY29uc3QgeyBwYXlsb2FkLCB0cmFuc2ZlcmFibGVzIH0gPSBkZWNvbnN0cnVjdFRyYW5zZmVyKHJlc3VsdFZhbHVlKTsKICAgICAgY29uc3QgcmVzdWx0TWVzc2FnZSA9IHsKICAgICAgICB0eXBlOiBtZXNzYWdlc18xLldvcmtlck1lc3NhZ2VUeXBlLnJlc3VsdCwKICAgICAgICB1aWQ6IHVpZDIsCiAgICAgICAgY29tcGxldGU6IGNvbXBsZXRlZCA/IHRydWUgOiB2b2lkIDAsCiAgICAgICAgcGF5bG9hZAogICAgICB9OwogICAgICBpbXBsZW1lbnRhdGlvbl8xLmRlZmF1bHQucG9zdE1lc3NhZ2VUb01hc3RlcihyZXN1bHRNZXNzYWdlLCB0cmFuc2ZlcmFibGVzKTsKICAgIH0KICAgIGZ1bmN0aW9uIHBvc3RKb2JTdGFydE1lc3NhZ2UodWlkMiwgcmVzdWx0VHlwZSkgewogICAgICBjb25zdCBzdGFydE1lc3NhZ2UgPSB7CiAgICAgICAgdHlwZTogbWVzc2FnZXNfMS5Xb3JrZXJNZXNzYWdlVHlwZS5ydW5uaW5nLAogICAgICAgIHVpZDogdWlkMiwKICAgICAgICByZXN1bHRUeXBlCiAgICAgIH07CiAgICAgIGltcGxlbWVudGF0aW9uXzEuZGVmYXVsdC5wb3N0TWVzc2FnZVRvTWFzdGVyKHN0YXJ0TWVzc2FnZSk7CiAgICB9CiAgICBmdW5jdGlvbiBwb3N0VW5jYXVnaHRFcnJvck1lc3NhZ2UoZXJyb3IpIHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSB7CiAgICAgICAgICB0eXBlOiBtZXNzYWdlc18xLldvcmtlck1lc3NhZ2VUeXBlLnVuY2F1Z2h0RXJyb3IsCiAgICAgICAgICBlcnJvcjogY29tbW9uXzEuc2VyaWFsaXplKGVycm9yKQogICAgICAgIH07CiAgICAgICAgaW1wbGVtZW50YXRpb25fMS5kZWZhdWx0LnBvc3RNZXNzYWdlVG9NYXN0ZXIoZXJyb3JNZXNzYWdlKTsKICAgICAgfSBjYXRjaCAoc3ViRXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCJOb3QgcmVwb3J0aW5nIHVuY2F1Z2h0IGVycm9yIGJhY2sgdG8gbWFzdGVyIHRocmVhZCBhcyBpdCBvY2N1cmVkIHdoaWxlIHJlcG9ydGluZyBhbiB1bmNhdWdodCBlcnJvciBhbHJlYWR5LlxuTGF0ZXN0IGVycm9yOiIsIHN1YkVycm9yLCAiXG5PcmlnaW5hbCBlcnJvcjoiLCBlcnJvcik7CiAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIHJ1bkZ1bmN0aW9uKGpvYlVJRCwgZm4sIGFyZ3MpIHsKICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsKICAgICAgICBsZXQgc3luY1Jlc3VsdDsKICAgICAgICB0cnkgewogICAgICAgICAgc3luY1Jlc3VsdCA9IGZuKC4uLmFyZ3MpOwogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICByZXR1cm4gcG9zdEpvYkVycm9yTWVzc2FnZShqb2JVSUQsIGVycm9yKTsKICAgICAgICB9CiAgICAgICAgY29uc3QgcmVzdWx0VHlwZSA9IGlzT2JzZXJ2YWJsZSQxKHN5bmNSZXN1bHQpID8gIm9ic2VydmFibGUiIDogInByb21pc2UiOwogICAgICAgIHBvc3RKb2JTdGFydE1lc3NhZ2Uoam9iVUlELCByZXN1bHRUeXBlKTsKICAgICAgICBpZiAoaXNPYnNlcnZhYmxlJDEoc3luY1Jlc3VsdCkpIHsKICAgICAgICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IHN5bmNSZXN1bHQuc3Vic2NyaWJlKCh2YWx1ZSkgPT4gcG9zdEpvYlJlc3VsdE1lc3NhZ2Uoam9iVUlELCBmYWxzZSwgY29tbW9uXzEuc2VyaWFsaXplKHZhbHVlKSksIChlcnJvcikgPT4gewogICAgICAgICAgICBwb3N0Sm9iRXJyb3JNZXNzYWdlKGpvYlVJRCwgY29tbW9uXzEuc2VyaWFsaXplKGVycm9yKSk7CiAgICAgICAgICAgIGFjdGl2ZVN1YnNjcmlwdGlvbnMuZGVsZXRlKGpvYlVJRCk7CiAgICAgICAgICB9LCAoKSA9PiB7CiAgICAgICAgICAgIHBvc3RKb2JSZXN1bHRNZXNzYWdlKGpvYlVJRCwgdHJ1ZSk7CiAgICAgICAgICAgIGFjdGl2ZVN1YnNjcmlwdGlvbnMuZGVsZXRlKGpvYlVJRCk7CiAgICAgICAgICB9KTsKICAgICAgICAgIGFjdGl2ZVN1YnNjcmlwdGlvbnMuc2V0KGpvYlVJRCwgc3Vic2NyaXB0aW9uKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0geWllbGQgc3luY1Jlc3VsdDsKICAgICAgICAgICAgcG9zdEpvYlJlc3VsdE1lc3NhZ2Uoam9iVUlELCB0cnVlLCBjb21tb25fMS5zZXJpYWxpemUocmVzdWx0KSk7CiAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICBwb3N0Sm9iRXJyb3JNZXNzYWdlKGpvYlVJRCwgY29tbW9uXzEuc2VyaWFsaXplKGVycm9yKSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICAgIGZ1bmN0aW9uIGV4cG9zZTIoZXhwb3NlZCkgewogICAgICBpZiAoIWltcGxlbWVudGF0aW9uXzEuZGVmYXVsdC5pc1dvcmtlclJ1bnRpbWUoKSkgewogICAgICAgIHRocm93IEVycm9yKCJleHBvc2UoKSBjYWxsZWQgaW4gdGhlIG1hc3RlciB0aHJlYWQuIik7CiAgICAgIH0KICAgICAgaWYgKGV4cG9zZUNhbGxlZCkgewogICAgICAgIHRocm93IEVycm9yKCJleHBvc2UoKSBjYWxsZWQgbW9yZSB0aGFuIG9uY2UuIFRoaXMgaXMgbm90IHBvc3NpYmxlLiBQYXNzIGFuIG9iamVjdCB0byBleHBvc2UoKSBpZiB5b3Ugd2FudCB0byBleHBvc2UgbXVsdGlwbGUgZnVuY3Rpb25zLiIpOwogICAgICB9CiAgICAgIGV4cG9zZUNhbGxlZCA9IHRydWU7CiAgICAgIGlmICh0eXBlb2YgZXhwb3NlZCA9PT0gImZ1bmN0aW9uIikgewogICAgICAgIGltcGxlbWVudGF0aW9uXzEuZGVmYXVsdC5zdWJzY3JpYmVUb01hc3Rlck1lc3NhZ2VzKChtZXNzYWdlRGF0YSkgPT4gewogICAgICAgICAgaWYgKGlzTWFzdGVySm9iUnVuTWVzc2FnZShtZXNzYWdlRGF0YSkgJiYgIW1lc3NhZ2VEYXRhLm1ldGhvZCkgewogICAgICAgICAgICBydW5GdW5jdGlvbihtZXNzYWdlRGF0YS51aWQsIGV4cG9zZWQsIG1lc3NhZ2VEYXRhLmFyZ3MubWFwKGNvbW1vbl8xLmRlc2VyaWFsaXplKSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgcG9zdEZ1bmN0aW9uSW5pdE1lc3NhZ2UoKTsKICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3NlZCA9PT0gIm9iamVjdCIgJiYgZXhwb3NlZCkgewogICAgICAgIGltcGxlbWVudGF0aW9uXzEuZGVmYXVsdC5zdWJzY3JpYmVUb01hc3Rlck1lc3NhZ2VzKChtZXNzYWdlRGF0YSkgPT4gewogICAgICAgICAgaWYgKGlzTWFzdGVySm9iUnVuTWVzc2FnZShtZXNzYWdlRGF0YSkgJiYgbWVzc2FnZURhdGEubWV0aG9kKSB7CiAgICAgICAgICAgIHJ1bkZ1bmN0aW9uKG1lc3NhZ2VEYXRhLnVpZCwgZXhwb3NlZFttZXNzYWdlRGF0YS5tZXRob2RdLCBtZXNzYWdlRGF0YS5hcmdzLm1hcChjb21tb25fMS5kZXNlcmlhbGl6ZSkpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGNvbnN0IG1ldGhvZE5hbWVzID0gT2JqZWN0LmtleXMoZXhwb3NlZCkuZmlsdGVyKChrZXkpID0+IHR5cGVvZiBleHBvc2VkW2tleV0gPT09ICJmdW5jdGlvbiIpOwogICAgICAgIHBvc3RNb2R1bGVJbml0TWVzc2FnZShtZXRob2ROYW1lcyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhyb3cgRXJyb3IoYEludmFsaWQgYXJndW1lbnQgcGFzc2VkIHRvIGV4cG9zZSgpLiBFeHBlY3RlZCBhIGZ1bmN0aW9uIG9yIGFuIG9iamVjdCwgZ290OiAke2V4cG9zZWR9YCk7CiAgICAgIH0KICAgICAgaW1wbGVtZW50YXRpb25fMS5kZWZhdWx0LnN1YnNjcmliZVRvTWFzdGVyTWVzc2FnZXMoKG1lc3NhZ2VEYXRhKSA9PiB7CiAgICAgICAgaWYgKGlzTWFzdGVySm9iQ2FuY2VsTWVzc2FnZShtZXNzYWdlRGF0YSkpIHsKICAgICAgICAgIGNvbnN0IGpvYlVJRCA9IG1lc3NhZ2VEYXRhLnVpZDsKICAgICAgICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IGFjdGl2ZVN1YnNjcmlwdGlvbnMuZ2V0KGpvYlVJRCk7CiAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uKSB7CiAgICAgICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpOwogICAgICAgICAgICBhY3RpdmVTdWJzY3JpcHRpb25zLmRlbGV0ZShqb2JVSUQpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgICBleHBvcnRzLmV4cG9zZSA9IGV4cG9zZTI7CiAgICBpZiAodHlwZW9mIHNlbGYgIT09ICJ1bmRlZmluZWQiICYmIHR5cGVvZiBzZWxmLmFkZEV2ZW50TGlzdGVuZXIgPT09ICJmdW5jdGlvbiIgJiYgaW1wbGVtZW50YXRpb25fMS5kZWZhdWx0LmlzV29ya2VyUnVudGltZSgpKSB7CiAgICAgIHNlbGYuYWRkRXZlbnRMaXN0ZW5lcigiZXJyb3IiLCAoZXZlbnQpID0+IHsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHBvc3RVbmNhdWdodEVycm9yTWVzc2FnZShldmVudC5lcnJvciB8fCBldmVudCksIDI1MCk7CiAgICAgIH0pOwogICAgICBzZWxmLmFkZEV2ZW50TGlzdGVuZXIoInVuaGFuZGxlZHJlamVjdGlvbiIsIChldmVudCkgPT4gewogICAgICAgIGNvbnN0IGVycm9yID0gZXZlbnQucmVhc29uOwogICAgICAgIGlmIChlcnJvciAmJiB0eXBlb2YgZXJyb3IubWVzc2FnZSA9PT0gInN0cmluZyIpIHsKICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gcG9zdFVuY2F1Z2h0RXJyb3JNZXNzYWdlKGVycm9yKSwgMjUwKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogICAgaWYgKHR5cGVvZiBwcm9jZXNzICE9PSAidW5kZWZpbmVkIiAmJiB0eXBlb2YgcHJvY2Vzcy5vbiA9PT0gImZ1bmN0aW9uIiAmJiBpbXBsZW1lbnRhdGlvbl8xLmRlZmF1bHQuaXNXb3JrZXJSdW50aW1lKCkpIHsKICAgICAgcHJvY2Vzcy5vbigidW5jYXVnaHRFeGNlcHRpb24iLCAoZXJyb3IpID0+IHsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHBvc3RVbmNhdWdodEVycm9yTWVzc2FnZShlcnJvciksIDI1MCk7CiAgICAgIH0pOwogICAgICBwcm9jZXNzLm9uKCJ1bmhhbmRsZWRSZWplY3Rpb24iLCAoZXJyb3IpID0+IHsKICAgICAgICBpZiAoZXJyb3IgJiYgdHlwZW9mIGVycm9yLm1lc3NhZ2UgPT09ICJzdHJpbmciKSB7CiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHBvc3RVbmNhdWdodEVycm9yTWVzc2FnZShlcnJvciksIDI1MCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9KSh3b3JrZXIpOwogIHZhciBXb3JrZXJDb250ZXh0ID0gLyogQF9fUFVSRV9fICovIGdldERlZmF1bHRFeHBvcnRGcm9tQ2pzKHdvcmtlcik7CiAgY29uc3QgZXhwb3NlID0gV29ya2VyQ29udGV4dC5leHBvc2U7CiAgV29ya2VyQ29udGV4dC5yZWdpc3RlclNlcmlhbGl6ZXI7CiAgY29uc3QgVHJhbnNmZXIgPSBXb3JrZXJDb250ZXh0LlRyYW5zZmVyOwogIHZhciBkaXN0JDMgPSB7fTsKICB2YXIgaW50ZXJvcFJlcXVpcmVEZWZhdWx0JDEgPSB7IGV4cG9ydHM6IHt9IH07CiAgKGZ1bmN0aW9uKG1vZHVsZSkgewogICAgZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIob2JqKSB7CiAgICAgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7CiAgICAgICAgImRlZmF1bHQiOiBvYmoKICAgICAgfTsKICAgIH0KICAgIG1vZHVsZS5leHBvcnRzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDI7CiAgICBtb2R1bGUuZXhwb3J0c1siZGVmYXVsdCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwogIH0pKGludGVyb3BSZXF1aXJlRGVmYXVsdCQxKTsKICB2YXIgZGVmaW5lUHJvcGVydHkkYyA9IHsgZXhwb3J0czoge30gfTsKICB2YXIgY2hlY2sgPSBmdW5jdGlvbihpdCkgewogICAgcmV0dXJuIGl0ICYmIGl0Lk1hdGggPT0gTWF0aCAmJiBpdDsKICB9OwogIHZhciBnbG9iYWwkbyA9IGNoZWNrKHR5cGVvZiBnbG9iYWxUaGlzID09ICJvYmplY3QiICYmIGdsb2JhbFRoaXMpIHx8IGNoZWNrKHR5cGVvZiB3aW5kb3cgPT0gIm9iamVjdCIgJiYgd2luZG93KSB8fCBjaGVjayh0eXBlb2Ygc2VsZiA9PSAib2JqZWN0IiAmJiBzZWxmKSB8fCBjaGVjayh0eXBlb2YgY29tbW9uanNHbG9iYWwgPT0gIm9iamVjdCIgJiYgY29tbW9uanNHbG9iYWwpIHx8IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXM7CiAgfSgpIHx8IEZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCk7CiAgdmFyIGlzQ2FsbGFibGUkbCA9IGZ1bmN0aW9uKGFyZ3VtZW50KSB7CiAgICByZXR1cm4gdHlwZW9mIGFyZ3VtZW50ID09PSAiZnVuY3Rpb24iOwogIH07CiAgdmFyIG9iamVjdEdldE93blByb3BlcnR5RGVzY3JpcHRvciA9IHt9OwogIHZhciBmYWlscyRuID0gZnVuY3Rpb24oZXhlYzIpIHsKICAgIHRyeSB7CiAgICAgIHJldHVybiAhIWV4ZWMyKCk7CiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICB9OwogIHZhciBmYWlscyRtID0gZmFpbHMkbjsKICB2YXIgZGVzY3JpcHRvcnMgPSAhZmFpbHMkbShmdW5jdGlvbigpIHsKICAgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sIDEsIHsgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIDc7CiAgICB9IH0pWzFdICE9IDc7CiAgfSk7CiAgdmFyIG9iamVjdFByb3BlcnR5SXNFbnVtZXJhYmxlID0ge307CiAgdmFyICRwcm9wZXJ0eUlzRW51bWVyYWJsZSQxID0ge30ucHJvcGVydHlJc0VudW1lcmFibGU7CiAgdmFyIGdldE93blByb3BlcnR5RGVzY3JpcHRvciQ4ID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjsKICB2YXIgTkFTSE9STl9CVUcgPSBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IkOCAmJiAhJHByb3BlcnR5SXNFbnVtZXJhYmxlJDEuY2FsbCh7IDE6IDIgfSwgMSk7CiAgb2JqZWN0UHJvcGVydHlJc0VudW1lcmFibGUuZiA9IE5BU0hPUk5fQlVHID8gZnVuY3Rpb24gcHJvcGVydHlJc0VudW1lcmFibGUoVikgewogICAgdmFyIGRlc2NyaXB0b3IgPSBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IkOCh0aGlzLCBWKTsKICAgIHJldHVybiAhIWRlc2NyaXB0b3IgJiYgZGVzY3JpcHRvci5lbnVtZXJhYmxlOwogIH0gOiAkcHJvcGVydHlJc0VudW1lcmFibGUkMTsKICB2YXIgY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yJDYgPSBmdW5jdGlvbihiaXRtYXAsIHZhbHVlKSB7CiAgICByZXR1cm4gewogICAgICBlbnVtZXJhYmxlOiAhKGJpdG1hcCAmIDEpLAogICAgICBjb25maWd1cmFibGU6ICEoYml0bWFwICYgMiksCiAgICAgIHdyaXRhYmxlOiAhKGJpdG1hcCAmIDQpLAogICAgICB2YWx1ZQogICAgfTsKICB9OwogIHZhciB0b1N0cmluZyRjID0ge30udG9TdHJpbmc7CiAgdmFyIGNsYXNzb2ZSYXckMSA9IGZ1bmN0aW9uKGl0KSB7CiAgICByZXR1cm4gdG9TdHJpbmckYy5jYWxsKGl0KS5zbGljZSg4LCAtMSk7CiAgfTsKICB2YXIgZmFpbHMkbCA9IGZhaWxzJG47CiAgdmFyIGNsYXNzb2YkYSA9IGNsYXNzb2ZSYXckMTsKICB2YXIgc3BsaXQgPSAiIi5zcGxpdDsKICB2YXIgaW5kZXhlZE9iamVjdCA9IGZhaWxzJGwoZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gIU9iamVjdCgieiIpLnByb3BlcnR5SXNFbnVtZXJhYmxlKDApOwogIH0pID8gZnVuY3Rpb24oaXQpIHsKICAgIHJldHVybiBjbGFzc29mJGEoaXQpID09ICJTdHJpbmciID8gc3BsaXQuY2FsbChpdCwgIiIpIDogT2JqZWN0KGl0KTsKICB9IDogT2JqZWN0OwogIHZhciByZXF1aXJlT2JqZWN0Q29lcmNpYmxlJDUgPSBmdW5jdGlvbihpdCkgewogICAgaWYgKGl0ID09IHZvaWQgMCkKICAgICAgdGhyb3cgVHlwZUVycm9yKCJDYW4ndCBjYWxsIG1ldGhvZCBvbiAiICsgaXQpOwogICAgcmV0dXJuIGl0OwogIH07CiAgdmFyIEluZGV4ZWRPYmplY3QkMyA9IGluZGV4ZWRPYmplY3Q7CiAgdmFyIHJlcXVpcmVPYmplY3RDb2VyY2libGUkNCA9IHJlcXVpcmVPYmplY3RDb2VyY2libGUkNTsKICB2YXIgdG9JbmRleGVkT2JqZWN0JDkgPSBmdW5jdGlvbihpdCkgewogICAgcmV0dXJuIEluZGV4ZWRPYmplY3QkMyhyZXF1aXJlT2JqZWN0Q29lcmNpYmxlJDQoaXQpKTsKICB9OwogIHZhciBpc0NhbGxhYmxlJGsgPSBpc0NhbGxhYmxlJGw7CiAgdmFyIGlzT2JqZWN0JGkgPSBmdW5jdGlvbihpdCkgewogICAgcmV0dXJuIHR5cGVvZiBpdCA9PT0gIm9iamVjdCIgPyBpdCAhPT0gbnVsbCA6IGlzQ2FsbGFibGUkayhpdCk7CiAgfTsKICB2YXIgcGF0aCRuID0ge307CiAgdmFyIHBhdGgkbSA9IHBhdGgkbjsKICB2YXIgZ2xvYmFsJG4gPSBnbG9iYWwkbzsKICB2YXIgaXNDYWxsYWJsZSRqID0gaXNDYWxsYWJsZSRsOwogIHZhciBhRnVuY3Rpb24gPSBmdW5jdGlvbih2YXJpYWJsZSkgewogICAgcmV0dXJuIGlzQ2FsbGFibGUkaih2YXJpYWJsZSkgPyB2YXJpYWJsZSA6IHZvaWQgMDsKICB9OwogIHZhciBnZXRCdWlsdEluJGIgPSBmdW5jdGlvbihuYW1lc3BhY2UsIG1ldGhvZCkgewogICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPCAyID8gYUZ1bmN0aW9uKHBhdGgkbVtuYW1lc3BhY2VdKSB8fCBhRnVuY3Rpb24oZ2xvYmFsJG5bbmFtZXNwYWNlXSkgOiBwYXRoJG1bbmFtZXNwYWNlXSAmJiBwYXRoJG1bbmFtZXNwYWNlXVttZXRob2RdIHx8IGdsb2JhbCRuW25hbWVzcGFjZV0gJiYgZ2xvYmFsJG5bbmFtZXNwYWNlXVttZXRob2RdOwogIH07CiAgdmFyIGdldEJ1aWx0SW4kYSA9IGdldEJ1aWx0SW4kYjsKICB2YXIgZW5naW5lVXNlckFnZW50ID0gZ2V0QnVpbHRJbiRhKCJuYXZpZ2F0b3IiLCAidXNlckFnZW50IikgfHwgIiI7CiAgdmFyIGdsb2JhbCRtID0gZ2xvYmFsJG87CiAgdmFyIHVzZXJBZ2VudCQ2ID0gZW5naW5lVXNlckFnZW50OwogIHZhciBwcm9jZXNzJDQgPSBnbG9iYWwkbS5wcm9jZXNzOwogIHZhciBEZW5vID0gZ2xvYmFsJG0uRGVubzsKICB2YXIgdmVyc2lvbnMgPSBwcm9jZXNzJDQgJiYgcHJvY2VzcyQ0LnZlcnNpb25zIHx8IERlbm8gJiYgRGVuby52ZXJzaW9uOwogIHZhciB2OCA9IHZlcnNpb25zICYmIHZlcnNpb25zLnY4OwogIHZhciBtYXRjaCwgdmVyc2lvbjsKICBpZiAodjgpIHsKICAgIG1hdGNoID0gdjguc3BsaXQoIi4iKTsKICAgIHZlcnNpb24gPSBtYXRjaFswXSA8IDQgPyAxIDogbWF0Y2hbMF0gKyBtYXRjaFsxXTsKICB9IGVsc2UgaWYgKHVzZXJBZ2VudCQ2KSB7CiAgICBtYXRjaCA9IHVzZXJBZ2VudCQ2Lm1hdGNoKC9FZGdlXC8oXGQrKS8pOwogICAgaWYgKCFtYXRjaCB8fCBtYXRjaFsxXSA+PSA3NCkgewogICAgICBtYXRjaCA9IHVzZXJBZ2VudCQ2Lm1hdGNoKC9DaHJvbWVcLyhcZCspLyk7CiAgICAgIGlmIChtYXRjaCkKICAgICAgICB2ZXJzaW9uID0gbWF0Y2hbMV07CiAgICB9CiAgfQogIHZhciBlbmdpbmVWOFZlcnNpb24gPSB2ZXJzaW9uICYmICt2ZXJzaW9uOwogIHZhciBWOF9WRVJTSU9OJDMgPSBlbmdpbmVWOFZlcnNpb247CiAgdmFyIGZhaWxzJGsgPSBmYWlscyRuOwogIHZhciBuYXRpdmVTeW1ib2wgPSAhIU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgJiYgIWZhaWxzJGsoZnVuY3Rpb24oKSB7CiAgICB2YXIgc3ltYm9sMiA9IFN5bWJvbCgpOwogICAgcmV0dXJuICFTdHJpbmcoc3ltYm9sMikgfHwgIShPYmplY3Qoc3ltYm9sMikgaW5zdGFuY2VvZiBTeW1ib2wpIHx8ICFTeW1ib2wuc2hhbSAmJiBWOF9WRVJTSU9OJDMgJiYgVjhfVkVSU0lPTiQzIDwgNDE7CiAgfSk7CiAgdmFyIE5BVElWRV9TWU1CT0wkMiA9IG5hdGl2ZVN5bWJvbDsKICB2YXIgdXNlU3ltYm9sQXNVaWQgPSBOQVRJVkVfU1lNQk9MJDIgJiYgIVN5bWJvbC5zaGFtICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT0gInN5bWJvbCI7CiAgdmFyIGlzQ2FsbGFibGUkaSA9IGlzQ2FsbGFibGUkbDsKICB2YXIgZ2V0QnVpbHRJbiQ5ID0gZ2V0QnVpbHRJbiRiOwogIHZhciBVU0VfU1lNQk9MX0FTX1VJRCQxID0gdXNlU3ltYm9sQXNVaWQ7CiAgdmFyIGlzU3ltYm9sJDMgPSBVU0VfU1lNQk9MX0FTX1VJRCQxID8gZnVuY3Rpb24oaXQpIHsKICAgIHJldHVybiB0eXBlb2YgaXQgPT0gInN5bWJvbCI7CiAgfSA6IGZ1bmN0aW9uKGl0KSB7CiAgICB2YXIgJFN5bWJvbDIgPSBnZXRCdWlsdEluJDkoIlN5bWJvbCIpOwogICAgcmV0dXJuIGlzQ2FsbGFibGUkaSgkU3ltYm9sMikgJiYgT2JqZWN0KGl0KSBpbnN0YW5jZW9mICRTeW1ib2wyOwogIH07CiAgdmFyIHRyeVRvU3RyaW5nJDIgPSBmdW5jdGlvbihhcmd1bWVudCkgewogICAgdHJ5IHsKICAgICAgcmV0dXJuIFN0cmluZyhhcmd1bWVudCk7CiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICByZXR1cm4gIk9iamVjdCI7CiAgICB9CiAgfTsKICB2YXIgaXNDYWxsYWJsZSRoID0gaXNDYWxsYWJsZSRsOwogIHZhciB0cnlUb1N0cmluZyQxID0gdHJ5VG9TdHJpbmckMjsKICB2YXIgYUNhbGxhYmxlJGMgPSBmdW5jdGlvbihhcmd1bWVudCkgewogICAgaWYgKGlzQ2FsbGFibGUkaChhcmd1bWVudCkpCiAgICAgIHJldHVybiBhcmd1bWVudDsKICAgIHRocm93IFR5cGVFcnJvcih0cnlUb1N0cmluZyQxKGFyZ3VtZW50KSArICIgaXMgbm90IGEgZnVuY3Rpb24iKTsKICB9OwogIHZhciBhQ2FsbGFibGUkYiA9IGFDYWxsYWJsZSRjOwogIHZhciBnZXRNZXRob2QkMyA9IGZ1bmN0aW9uKFYsIFApIHsKICAgIHZhciBmdW5jID0gVltQXTsKICAgIHJldHVybiBmdW5jID09IG51bGwgPyB2b2lkIDAgOiBhQ2FsbGFibGUkYihmdW5jKTsKICB9OwogIHZhciBpc0NhbGxhYmxlJGcgPSBpc0NhbGxhYmxlJGw7CiAgdmFyIGlzT2JqZWN0JGggPSBpc09iamVjdCRpOwogIHZhciBvcmRpbmFyeVRvUHJpbWl0aXZlJDEgPSBmdW5jdGlvbihpbnB1dCwgcHJlZikgewogICAgdmFyIGZuLCB2YWw7CiAgICBpZiAocHJlZiA9PT0gInN0cmluZyIgJiYgaXNDYWxsYWJsZSRnKGZuID0gaW5wdXQudG9TdHJpbmcpICYmICFpc09iamVjdCRoKHZhbCA9IGZuLmNhbGwoaW5wdXQpKSkKICAgICAgcmV0dXJuIHZhbDsKICAgIGlmIChpc0NhbGxhYmxlJGcoZm4gPSBpbnB1dC52YWx1ZU9mKSAmJiAhaXNPYmplY3QkaCh2YWwgPSBmbi5jYWxsKGlucHV0KSkpCiAgICAgIHJldHVybiB2YWw7CiAgICBpZiAocHJlZiAhPT0gInN0cmluZyIgJiYgaXNDYWxsYWJsZSRnKGZuID0gaW5wdXQudG9TdHJpbmcpICYmICFpc09iamVjdCRoKHZhbCA9IGZuLmNhbGwoaW5wdXQpKSkKICAgICAgcmV0dXJuIHZhbDsKICAgIHRocm93IFR5cGVFcnJvcigiQ2FuJ3QgY29udmVydCBvYmplY3QgdG8gcHJpbWl0aXZlIHZhbHVlIik7CiAgfTsKICB2YXIgc2hhcmVkJDQgPSB7IGV4cG9ydHM6IHt9IH07CiAgdmFyIGlzUHVyZSA9IHRydWU7CiAgdmFyIGdsb2JhbCRsID0gZ2xvYmFsJG87CiAgdmFyIHNldEdsb2JhbCQxID0gZnVuY3Rpb24oa2V5LCB2YWx1ZSkgewogICAgdHJ5IHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGdsb2JhbCRsLCBrZXksIHsgdmFsdWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7CiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICBnbG9iYWwkbFtrZXldID0gdmFsdWU7CiAgICB9CiAgICByZXR1cm4gdmFsdWU7CiAgfTsKICB2YXIgZ2xvYmFsJGsgPSBnbG9iYWwkbzsKICB2YXIgc2V0R2xvYmFsID0gc2V0R2xvYmFsJDE7CiAgdmFyIFNIQVJFRCA9ICJfX2NvcmUtanNfc2hhcmVkX18iOwogIHZhciBzdG9yZSQzID0gZ2xvYmFsJGtbU0hBUkVEXSB8fCBzZXRHbG9iYWwoU0hBUkVELCB7fSk7CiAgdmFyIHNoYXJlZFN0b3JlID0gc3RvcmUkMzsKICB2YXIgc3RvcmUkMiA9IHNoYXJlZFN0b3JlOwogIChzaGFyZWQkNC5leHBvcnRzID0gZnVuY3Rpb24oa2V5LCB2YWx1ZSkgewogICAgcmV0dXJuIHN0b3JlJDJba2V5XSB8fCAoc3RvcmUkMltrZXldID0gdmFsdWUgIT09IHZvaWQgMCA/IHZhbHVlIDoge30pOwogIH0pKCJ2ZXJzaW9ucyIsIFtdKS5wdXNoKHsKICAgIHZlcnNpb246ICIzLjE4LjAiLAogICAgbW9kZTogInB1cmUiLAogICAgY29weXJpZ2h0OiAiXHhBOSAyMDIxIERlbmlzIFB1c2hrYXJldiAoemxvaXJvY2sucnUpIgogIH0pOwogIHZhciByZXF1aXJlT2JqZWN0Q29lcmNpYmxlJDMgPSByZXF1aXJlT2JqZWN0Q29lcmNpYmxlJDU7CiAgdmFyIHRvT2JqZWN0JGIgPSBmdW5jdGlvbihhcmd1bWVudCkgewogICAgcmV0dXJuIE9iamVjdChyZXF1aXJlT2JqZWN0Q29lcmNpYmxlJDMoYXJndW1lbnQpKTsKICB9OwogIHZhciB0b09iamVjdCRhID0gdG9PYmplY3QkYjsKICB2YXIgaGFzT3duUHJvcGVydHkgPSB7fS5oYXNPd25Qcm9wZXJ0eTsKICB2YXIgaGFzJGMgPSBPYmplY3QuaGFzT3duIHx8IGZ1bmN0aW9uIGhhc093bihpdCwga2V5KSB7CiAgICByZXR1cm4gaGFzT3duUHJvcGVydHkuY2FsbCh0b09iamVjdCRhKGl0KSwga2V5KTsKICB9OwogIHZhciBpZCQyID0gMDsKICB2YXIgcG9zdGZpeCA9IE1hdGgucmFuZG9tKCk7CiAgdmFyIHVpZCQ0ID0gZnVuY3Rpb24oa2V5KSB7CiAgICByZXR1cm4gIlN5bWJvbCgiICsgU3RyaW5nKGtleSA9PT0gdm9pZCAwID8gIiIgOiBrZXkpICsgIilfIiArICgrK2lkJDIgKyBwb3N0Zml4KS50b1N0cmluZygzNik7CiAgfTsKICB2YXIgZ2xvYmFsJGogPSBnbG9iYWwkbzsKICB2YXIgc2hhcmVkJDMgPSBzaGFyZWQkNC5leHBvcnRzOwogIHZhciBoYXMkYiA9IGhhcyRjOwogIHZhciB1aWQkMyA9IHVpZCQ0OwogIHZhciBOQVRJVkVfU1lNQk9MJDEgPSBuYXRpdmVTeW1ib2w7CiAgdmFyIFVTRV9TWU1CT0xfQVNfVUlEID0gdXNlU3ltYm9sQXNVaWQ7CiAgdmFyIFdlbGxLbm93blN5bWJvbHNTdG9yZSQxID0gc2hhcmVkJDMoIndrcyIpOwogIHZhciBTeW1ib2wkMiA9IGdsb2JhbCRqLlN5bWJvbDsKICB2YXIgY3JlYXRlV2VsbEtub3duU3ltYm9sID0gVVNFX1NZTUJPTF9BU19VSUQgPyBTeW1ib2wkMiA6IFN5bWJvbCQyICYmIFN5bWJvbCQyLndpdGhvdXRTZXR0ZXIgfHwgdWlkJDM7CiAgdmFyIHdlbGxLbm93blN5bWJvbCRsID0gZnVuY3Rpb24obmFtZSkgewogICAgaWYgKCFoYXMkYihXZWxsS25vd25TeW1ib2xzU3RvcmUkMSwgbmFtZSkgfHwgIShOQVRJVkVfU1lNQk9MJDEgfHwgdHlwZW9mIFdlbGxLbm93blN5bWJvbHNTdG9yZSQxW25hbWVdID09ICJzdHJpbmciKSkgewogICAgICBpZiAoTkFUSVZFX1NZTUJPTCQxICYmIGhhcyRiKFN5bWJvbCQyLCBuYW1lKSkgewogICAgICAgIFdlbGxLbm93blN5bWJvbHNTdG9yZSQxW25hbWVdID0gU3ltYm9sJDJbbmFtZV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgV2VsbEtub3duU3ltYm9sc1N0b3JlJDFbbmFtZV0gPSBjcmVhdGVXZWxsS25vd25TeW1ib2woIlN5bWJvbC4iICsgbmFtZSk7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBXZWxsS25vd25TeW1ib2xzU3RvcmUkMVtuYW1lXTsKICB9OwogIHZhciBpc09iamVjdCRnID0gaXNPYmplY3QkaTsKICB2YXIgaXNTeW1ib2wkMiA9IGlzU3ltYm9sJDM7CiAgdmFyIGdldE1ldGhvZCQyID0gZ2V0TWV0aG9kJDM7CiAgdmFyIG9yZGluYXJ5VG9QcmltaXRpdmUgPSBvcmRpbmFyeVRvUHJpbWl0aXZlJDE7CiAgdmFyIHdlbGxLbm93blN5bWJvbCRrID0gd2VsbEtub3duU3ltYm9sJGw7CiAgdmFyIFRPX1BSSU1JVElWRSQxID0gd2VsbEtub3duU3ltYm9sJGsoInRvUHJpbWl0aXZlIik7CiAgdmFyIHRvUHJpbWl0aXZlJDEgPSBmdW5jdGlvbihpbnB1dCwgcHJlZikgewogICAgaWYgKCFpc09iamVjdCRnKGlucHV0KSB8fCBpc1N5bWJvbCQyKGlucHV0KSkKICAgICAgcmV0dXJuIGlucHV0OwogICAgdmFyIGV4b3RpY1RvUHJpbSA9IGdldE1ldGhvZCQyKGlucHV0LCBUT19QUklNSVRJVkUkMSk7CiAgICB2YXIgcmVzdWx0OwogICAgaWYgKGV4b3RpY1RvUHJpbSkgewogICAgICBpZiAocHJlZiA9PT0gdm9pZCAwKQogICAgICAgIHByZWYgPSAiZGVmYXVsdCI7CiAgICAgIHJlc3VsdCA9IGV4b3RpY1RvUHJpbS5jYWxsKGlucHV0LCBwcmVmKTsKICAgICAgaWYgKCFpc09iamVjdCRnKHJlc3VsdCkgfHwgaXNTeW1ib2wkMihyZXN1bHQpKQogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgIHRocm93IFR5cGVFcnJvcigiQ2FuJ3QgY29udmVydCBvYmplY3QgdG8gcHJpbWl0aXZlIHZhbHVlIik7CiAgICB9CiAgICBpZiAocHJlZiA9PT0gdm9pZCAwKQogICAgICBwcmVmID0gIm51bWJlciI7CiAgICByZXR1cm4gb3JkaW5hcnlUb1ByaW1pdGl2ZShpbnB1dCwgcHJlZik7CiAgfTsKICB2YXIgdG9QcmltaXRpdmUgPSB0b1ByaW1pdGl2ZSQxOwogIHZhciBpc1N5bWJvbCQxID0gaXNTeW1ib2wkMzsKICB2YXIgdG9Qcm9wZXJ0eUtleSQ0ID0gZnVuY3Rpb24oYXJndW1lbnQpIHsKICAgIHZhciBrZXkgPSB0b1ByaW1pdGl2ZShhcmd1bWVudCwgInN0cmluZyIpOwogICAgcmV0dXJuIGlzU3ltYm9sJDEoa2V5KSA/IGtleSA6IFN0cmluZyhrZXkpOwogIH07CiAgdmFyIGdsb2JhbCRpID0gZ2xvYmFsJG87CiAgdmFyIGlzT2JqZWN0JGYgPSBpc09iamVjdCRpOwogIHZhciBkb2N1bWVudCQzID0gZ2xvYmFsJGkuZG9jdW1lbnQ7CiAgdmFyIEVYSVNUUyQxID0gaXNPYmplY3QkZihkb2N1bWVudCQzKSAmJiBpc09iamVjdCRmKGRvY3VtZW50JDMuY3JlYXRlRWxlbWVudCk7CiAgdmFyIGRvY3VtZW50Q3JlYXRlRWxlbWVudCQxID0gZnVuY3Rpb24oaXQpIHsKICAgIHJldHVybiBFWElTVFMkMSA/IGRvY3VtZW50JDMuY3JlYXRlRWxlbWVudChpdCkgOiB7fTsKICB9OwogIHZhciBERVNDUklQVE9SUyRlID0gZGVzY3JpcHRvcnM7CiAgdmFyIGZhaWxzJGogPSBmYWlscyRuOwogIHZhciBjcmVhdGVFbGVtZW50JDEgPSBkb2N1bWVudENyZWF0ZUVsZW1lbnQkMTsKICB2YXIgaWU4RG9tRGVmaW5lID0gIURFU0NSSVBUT1JTJGUgJiYgIWZhaWxzJGooZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGNyZWF0ZUVsZW1lbnQkMSgiZGl2IiksICJhIiwgewogICAgICBnZXQ6IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiA3OwogICAgICB9CiAgICB9KS5hICE9IDc7CiAgfSk7CiAgdmFyIERFU0NSSVBUT1JTJGQgPSBkZXNjcmlwdG9yczsKICB2YXIgcHJvcGVydHlJc0VudW1lcmFibGVNb2R1bGUkMiA9IG9iamVjdFByb3BlcnR5SXNFbnVtZXJhYmxlOwogIHZhciBjcmVhdGVQcm9wZXJ0eURlc2NyaXB0b3IkNSA9IGNyZWF0ZVByb3BlcnR5RGVzY3JpcHRvciQ2OwogIHZhciB0b0luZGV4ZWRPYmplY3QkOCA9IHRvSW5kZXhlZE9iamVjdCQ5OwogIHZhciB0b1Byb3BlcnR5S2V5JDMgPSB0b1Byb3BlcnR5S2V5JDQ7CiAgdmFyIGhhcyRhID0gaGFzJGM7CiAgdmFyIElFOF9ET01fREVGSU5FJDEgPSBpZThEb21EZWZpbmU7CiAgdmFyICRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IkMSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7CiAgb2JqZWN0R2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLmYgPSBERVNDUklQVE9SUyRkID8gJGdldE93blByb3BlcnR5RGVzY3JpcHRvciQxIDogZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yMihPLCBQKSB7CiAgICBPID0gdG9JbmRleGVkT2JqZWN0JDgoTyk7CiAgICBQID0gdG9Qcm9wZXJ0eUtleSQzKFApOwogICAgaWYgKElFOF9ET01fREVGSU5FJDEpCiAgICAgIHRyeSB7CiAgICAgICAgcmV0dXJuICRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IkMShPLCBQKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgfQogICAgaWYgKGhhcyRhKE8sIFApKQogICAgICByZXR1cm4gY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yJDUoIXByb3BlcnR5SXNFbnVtZXJhYmxlTW9kdWxlJDIuZi5jYWxsKE8sIFApLCBPW1BdKTsKICB9OwogIHZhciBmYWlscyRpID0gZmFpbHMkbjsKICB2YXIgaXNDYWxsYWJsZSRmID0gaXNDYWxsYWJsZSRsOwogIHZhciByZXBsYWNlbWVudCA9IC8jfFwucHJvdG90eXBlXC4vOwogIHZhciBpc0ZvcmNlZCQyID0gZnVuY3Rpb24oZmVhdHVyZSwgZGV0ZWN0aW9uKSB7CiAgICB2YXIgdmFsdWUgPSBkYXRhW25vcm1hbGl6ZShmZWF0dXJlKV07CiAgICByZXR1cm4gdmFsdWUgPT0gUE9MWUZJTEwgPyB0cnVlIDogdmFsdWUgPT0gTkFUSVZFID8gZmFsc2UgOiBpc0NhbGxhYmxlJGYoZGV0ZWN0aW9uKSA/IGZhaWxzJGkoZGV0ZWN0aW9uKSA6ICEhZGV0ZWN0aW9uOwogIH07CiAgdmFyIG5vcm1hbGl6ZSA9IGlzRm9yY2VkJDIubm9ybWFsaXplID0gZnVuY3Rpb24oc3RyaW5nKSB7CiAgICByZXR1cm4gU3RyaW5nKHN0cmluZykucmVwbGFjZShyZXBsYWNlbWVudCwgIi4iKS50b0xvd2VyQ2FzZSgpOwogIH07CiAgdmFyIGRhdGEgPSBpc0ZvcmNlZCQyLmRhdGEgPSB7fTsKICB2YXIgTkFUSVZFID0gaXNGb3JjZWQkMi5OQVRJVkUgPSAiTiI7CiAgdmFyIFBPTFlGSUxMID0gaXNGb3JjZWQkMi5QT0xZRklMTCA9ICJQIjsKICB2YXIgaXNGb3JjZWRfMSA9IGlzRm9yY2VkJDI7CiAgdmFyIGFDYWxsYWJsZSRhID0gYUNhbGxhYmxlJGM7CiAgdmFyIGZ1bmN0aW9uQmluZENvbnRleHQgPSBmdW5jdGlvbihmbiwgdGhhdCwgbGVuZ3RoKSB7CiAgICBhQ2FsbGFibGUkYShmbik7CiAgICBpZiAodGhhdCA9PT0gdm9pZCAwKQogICAgICByZXR1cm4gZm47CiAgICBzd2l0Y2ggKGxlbmd0aCkgewogICAgICBjYXNlIDA6CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCk7CiAgICAgICAgfTsKICAgICAgY2FzZSAxOgogICAgICAgIHJldHVybiBmdW5jdGlvbihhKSB7CiAgICAgICAgICByZXR1cm4gZm4uY2FsbCh0aGF0LCBhKTsKICAgICAgICB9OwogICAgICBjYXNlIDI6CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGEsIGIpIHsKICAgICAgICAgIHJldHVybiBmbi5jYWxsKHRoYXQsIGEsIGIpOwogICAgICAgIH07CiAgICAgIGNhc2UgMzoKICAgICAgICByZXR1cm4gZnVuY3Rpb24oYSwgYiwgYzIpIHsKICAgICAgICAgIHJldHVybiBmbi5jYWxsKHRoYXQsIGEsIGIsIGMyKTsKICAgICAgICB9OwogICAgfQogICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gZm4uYXBwbHkodGhhdCwgYXJndW1lbnRzKTsKICAgIH07CiAgfTsKICB2YXIgb2JqZWN0RGVmaW5lUHJvcGVydHkgPSB7fTsKICB2YXIgaXNPYmplY3QkZSA9IGlzT2JqZWN0JGk7CiAgdmFyIGFuT2JqZWN0JGkgPSBmdW5jdGlvbihhcmd1bWVudCkgewogICAgaWYgKGlzT2JqZWN0JGUoYXJndW1lbnQpKQogICAgICByZXR1cm4gYXJndW1lbnQ7CiAgICB0aHJvdyBUeXBlRXJyb3IoU3RyaW5nKGFyZ3VtZW50KSArICIgaXMgbm90IGFuIG9iamVjdCIpOwogIH07CiAgdmFyIERFU0NSSVBUT1JTJGMgPSBkZXNjcmlwdG9yczsKICB2YXIgSUU4X0RPTV9ERUZJTkUgPSBpZThEb21EZWZpbmU7CiAgdmFyIGFuT2JqZWN0JGggPSBhbk9iamVjdCRpOwogIHZhciB0b1Byb3BlcnR5S2V5JDIgPSB0b1Byb3BlcnR5S2V5JDQ7CiAgdmFyICRkZWZpbmVQcm9wZXJ0eSQxID0gT2JqZWN0LmRlZmluZVByb3BlcnR5OwogIG9iamVjdERlZmluZVByb3BlcnR5LmYgPSBERVNDUklQVE9SUyRjID8gJGRlZmluZVByb3BlcnR5JDEgOiBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0eTIoTywgUCwgQXR0cmlidXRlcykgewogICAgYW5PYmplY3QkaChPKTsKICAgIFAgPSB0b1Byb3BlcnR5S2V5JDIoUCk7CiAgICBhbk9iamVjdCRoKEF0dHJpYnV0ZXMpOwogICAgaWYgKElFOF9ET01fREVGSU5FKQogICAgICB0cnkgewogICAgICAgIHJldHVybiAkZGVmaW5lUHJvcGVydHkkMShPLCBQLCBBdHRyaWJ1dGVzKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgfQogICAgaWYgKCJnZXQiIGluIEF0dHJpYnV0ZXMgfHwgInNldCIgaW4gQXR0cmlidXRlcykKICAgICAgdGhyb3cgVHlwZUVycm9yKCJBY2Nlc3NvcnMgbm90IHN1cHBvcnRlZCIpOwogICAgaWYgKCJ2YWx1ZSIgaW4gQXR0cmlidXRlcykKICAgICAgT1tQXSA9IEF0dHJpYnV0ZXMudmFsdWU7CiAgICByZXR1cm4gTzsKICB9OwogIHZhciBERVNDUklQVE9SUyRiID0gZGVzY3JpcHRvcnM7CiAgdmFyIGRlZmluZVByb3BlcnR5TW9kdWxlJDQgPSBvYmplY3REZWZpbmVQcm9wZXJ0eTsKICB2YXIgY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yJDQgPSBjcmVhdGVQcm9wZXJ0eURlc2NyaXB0b3IkNjsKICB2YXIgY3JlYXRlTm9uRW51bWVyYWJsZVByb3BlcnR5JDcgPSBERVNDUklQVE9SUyRiID8gZnVuY3Rpb24ob2JqZWN0LCBrZXksIHZhbHVlKSB7CiAgICByZXR1cm4gZGVmaW5lUHJvcGVydHlNb2R1bGUkNC5mKG9iamVjdCwga2V5LCBjcmVhdGVQcm9wZXJ0eURlc2NyaXB0b3IkNCgxLCB2YWx1ZSkpOwogIH0gOiBmdW5jdGlvbihvYmplY3QsIGtleSwgdmFsdWUpIHsKICAgIG9iamVjdFtrZXldID0gdmFsdWU7CiAgICByZXR1cm4gb2JqZWN0OwogIH07CiAgdmFyIGdsb2JhbCRoID0gZ2xvYmFsJG87CiAgdmFyIGlzQ2FsbGFibGUkZSA9IGlzQ2FsbGFibGUkbDsKICB2YXIgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yJDcgPSBvYmplY3RHZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IuZjsKICB2YXIgaXNGb3JjZWQkMSA9IGlzRm9yY2VkXzE7CiAgdmFyIHBhdGgkbCA9IHBhdGgkbjsKICB2YXIgYmluZCRjID0gZnVuY3Rpb25CaW5kQ29udGV4dDsKICB2YXIgY3JlYXRlTm9uRW51bWVyYWJsZVByb3BlcnR5JDYgPSBjcmVhdGVOb25FbnVtZXJhYmxlUHJvcGVydHkkNzsKICB2YXIgaGFzJDkgPSBoYXMkYzsKICB2YXIgd3JhcENvbnN0cnVjdG9yID0gZnVuY3Rpb24oTmF0aXZlQ29uc3RydWN0b3IpIHsKICAgIHZhciBXcmFwcGVyID0gZnVuY3Rpb24oYSwgYiwgYzIpIHsKICAgICAgaWYgKHRoaXMgaW5zdGFuY2VvZiBOYXRpdmVDb25zdHJ1Y3RvcikgewogICAgICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICByZXR1cm4gbmV3IE5hdGl2ZUNvbnN0cnVjdG9yKCk7CiAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIHJldHVybiBuZXcgTmF0aXZlQ29uc3RydWN0b3IoYSk7CiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJldHVybiBuZXcgTmF0aXZlQ29uc3RydWN0b3IoYSwgYik7CiAgICAgICAgfQogICAgICAgIHJldHVybiBuZXcgTmF0aXZlQ29uc3RydWN0b3IoYSwgYiwgYzIpOwogICAgICB9CiAgICAgIHJldHVybiBOYXRpdmVDb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICAgIFdyYXBwZXIucHJvdG90eXBlID0gTmF0aXZlQ29uc3RydWN0b3IucHJvdG90eXBlOwogICAgcmV0dXJuIFdyYXBwZXI7CiAgfTsKICB2YXIgX2V4cG9ydCA9IGZ1bmN0aW9uKG9wdGlvbnMsIHNvdXJjZSkgewogICAgdmFyIFRBUkdFVCA9IG9wdGlvbnMudGFyZ2V0OwogICAgdmFyIEdMT0JBTCA9IG9wdGlvbnMuZ2xvYmFsOwogICAgdmFyIFNUQVRJQyA9IG9wdGlvbnMuc3RhdDsKICAgIHZhciBQUk9UTyA9IG9wdGlvbnMucHJvdG87CiAgICB2YXIgbmF0aXZlU291cmNlID0gR0xPQkFMID8gZ2xvYmFsJGggOiBTVEFUSUMgPyBnbG9iYWwkaFtUQVJHRVRdIDogKGdsb2JhbCRoW1RBUkdFVF0gfHwge30pLnByb3RvdHlwZTsKICAgIHZhciB0YXJnZXQgPSBHTE9CQUwgPyBwYXRoJGwgOiBwYXRoJGxbVEFSR0VUXSB8fCBjcmVhdGVOb25FbnVtZXJhYmxlUHJvcGVydHkkNihwYXRoJGwsIFRBUkdFVCwge30pW1RBUkdFVF07CiAgICB2YXIgdGFyZ2V0UHJvdG90eXBlID0gdGFyZ2V0LnByb3RvdHlwZTsKICAgIHZhciBGT1JDRUQyLCBVU0VfTkFUSVZFLCBWSVJUVUFMX1BST1RPVFlQRTsKICAgIHZhciBrZXksIHNvdXJjZVByb3BlcnR5LCB0YXJnZXRQcm9wZXJ0eSwgbmF0aXZlUHJvcGVydHksIHJlc3VsdFByb3BlcnR5LCBkZXNjcmlwdG9yOwogICAgZm9yIChrZXkgaW4gc291cmNlKSB7CiAgICAgIEZPUkNFRDIgPSBpc0ZvcmNlZCQxKEdMT0JBTCA/IGtleSA6IFRBUkdFVCArIChTVEFUSUMgPyAiLiIgOiAiIyIpICsga2V5LCBvcHRpb25zLmZvcmNlZCk7CiAgICAgIFVTRV9OQVRJVkUgPSAhRk9SQ0VEMiAmJiBuYXRpdmVTb3VyY2UgJiYgaGFzJDkobmF0aXZlU291cmNlLCBrZXkpOwogICAgICB0YXJnZXRQcm9wZXJ0eSA9IHRhcmdldFtrZXldOwogICAgICBpZiAoVVNFX05BVElWRSkKICAgICAgICBpZiAob3B0aW9ucy5ub1RhcmdldEdldCkgewogICAgICAgICAgZGVzY3JpcHRvciA9IGdldE93blByb3BlcnR5RGVzY3JpcHRvciQ3KG5hdGl2ZVNvdXJjZSwga2V5KTsKICAgICAgICAgIG5hdGl2ZVByb3BlcnR5ID0gZGVzY3JpcHRvciAmJiBkZXNjcmlwdG9yLnZhbHVlOwogICAgICAgIH0gZWxzZQogICAgICAgICAgbmF0aXZlUHJvcGVydHkgPSBuYXRpdmVTb3VyY2Vba2V5XTsKICAgICAgc291cmNlUHJvcGVydHkgPSBVU0VfTkFUSVZFICYmIG5hdGl2ZVByb3BlcnR5ID8gbmF0aXZlUHJvcGVydHkgOiBzb3VyY2Vba2V5XTsKICAgICAgaWYgKFVTRV9OQVRJVkUgJiYgdHlwZW9mIHRhcmdldFByb3BlcnR5ID09PSB0eXBlb2Ygc291cmNlUHJvcGVydHkpCiAgICAgICAgY29udGludWU7CiAgICAgIGlmIChvcHRpb25zLmJpbmQgJiYgVVNFX05BVElWRSkKICAgICAgICByZXN1bHRQcm9wZXJ0eSA9IGJpbmQkYyhzb3VyY2VQcm9wZXJ0eSwgZ2xvYmFsJGgpOwogICAgICBlbHNlIGlmIChvcHRpb25zLndyYXAgJiYgVVNFX05BVElWRSkKICAgICAgICByZXN1bHRQcm9wZXJ0eSA9IHdyYXBDb25zdHJ1Y3Rvcihzb3VyY2VQcm9wZXJ0eSk7CiAgICAgIGVsc2UgaWYgKFBST1RPICYmIGlzQ2FsbGFibGUkZShzb3VyY2VQcm9wZXJ0eSkpCiAgICAgICAgcmVzdWx0UHJvcGVydHkgPSBiaW5kJGMoRnVuY3Rpb24uY2FsbCwgc291cmNlUHJvcGVydHkpOwogICAgICBlbHNlCiAgICAgICAgcmVzdWx0UHJvcGVydHkgPSBzb3VyY2VQcm9wZXJ0eTsKICAgICAgaWYgKG9wdGlvbnMuc2hhbSB8fCBzb3VyY2VQcm9wZXJ0eSAmJiBzb3VyY2VQcm9wZXJ0eS5zaGFtIHx8IHRhcmdldFByb3BlcnR5ICYmIHRhcmdldFByb3BlcnR5LnNoYW0pIHsKICAgICAgICBjcmVhdGVOb25FbnVtZXJhYmxlUHJvcGVydHkkNihyZXN1bHRQcm9wZXJ0eSwgInNoYW0iLCB0cnVlKTsKICAgICAgfQogICAgICBjcmVhdGVOb25FbnVtZXJhYmxlUHJvcGVydHkkNih0YXJnZXQsIGtleSwgcmVzdWx0UHJvcGVydHkpOwogICAgICBpZiAoUFJPVE8pIHsKICAgICAgICBWSVJUVUFMX1BST1RPVFlQRSA9IFRBUkdFVCArICJQcm90b3R5cGUiOwogICAgICAgIGlmICghaGFzJDkocGF0aCRsLCBWSVJUVUFMX1BST1RPVFlQRSkpIHsKICAgICAgICAgIGNyZWF0ZU5vbkVudW1lcmFibGVQcm9wZXJ0eSQ2KHBhdGgkbCwgVklSVFVBTF9QUk9UT1RZUEUsIHt9KTsKICAgICAgICB9CiAgICAgICAgY3JlYXRlTm9uRW51bWVyYWJsZVByb3BlcnR5JDYocGF0aCRsW1ZJUlRVQUxfUFJPVE9UWVBFXSwga2V5LCBzb3VyY2VQcm9wZXJ0eSk7CiAgICAgICAgaWYgKG9wdGlvbnMucmVhbCAmJiB0YXJnZXRQcm90b3R5cGUgJiYgIXRhcmdldFByb3RvdHlwZVtrZXldKSB7CiAgICAgICAgICBjcmVhdGVOb25FbnVtZXJhYmxlUHJvcGVydHkkNih0YXJnZXRQcm90b3R5cGUsIGtleSwgc291cmNlUHJvcGVydHkpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH07CiAgdmFyICQkRiA9IF9leHBvcnQ7CiAgdmFyIERFU0NSSVBUT1JTJGEgPSBkZXNjcmlwdG9yczsKICB2YXIgb2JqZWN0RGVmaW5lUHJvcGVydHlNb2RpbGUgPSBvYmplY3REZWZpbmVQcm9wZXJ0eTsKICAkJEYoeyB0YXJnZXQ6ICJPYmplY3QiLCBzdGF0OiB0cnVlLCBmb3JjZWQ6ICFERVNDUklQVE9SUyRhLCBzaGFtOiAhREVTQ1JJUFRPUlMkYSB9LCB7CiAgICBkZWZpbmVQcm9wZXJ0eTogb2JqZWN0RGVmaW5lUHJvcGVydHlNb2RpbGUuZgogIH0pOwogIHZhciBwYXRoJGsgPSBwYXRoJG47CiAgdmFyIE9iamVjdCQ0ID0gcGF0aCRrLk9iamVjdDsKICB2YXIgZGVmaW5lUHJvcGVydHkkYiA9IGRlZmluZVByb3BlcnR5JGMuZXhwb3J0cyA9IGZ1bmN0aW9uIGRlZmluZVByb3BlcnR5MihpdCwga2V5LCBkZXNjKSB7CiAgICByZXR1cm4gT2JqZWN0JDQuZGVmaW5lUHJvcGVydHkoaXQsIGtleSwgZGVzYyk7CiAgfTsKICBpZiAoT2JqZWN0JDQuZGVmaW5lUHJvcGVydHkuc2hhbSkKICAgIGRlZmluZVByb3BlcnR5JGIuc2hhbSA9IHRydWU7CiAgdmFyIHBhcmVudCRRID0gZGVmaW5lUHJvcGVydHkkYy5leHBvcnRzOwogIHZhciBkZWZpbmVQcm9wZXJ0eSRhID0gcGFyZW50JFE7CiAgdmFyIGRlZmluZVByb3BlcnR5JDkgPSBkZWZpbmVQcm9wZXJ0eSRhOwogIHZhciBiYWkgPSB7fTsKICB2YXIgaXRlcmF0b3JzID0ge307CiAgdmFyIGlzQ2FsbGFibGUkZCA9IGlzQ2FsbGFibGUkbDsKICB2YXIgc3RvcmUkMSA9IHNoYXJlZFN0b3JlOwogIHZhciBmdW5jdGlvblRvU3RyaW5nID0gRnVuY3Rpb24udG9TdHJpbmc7CiAgaWYgKCFpc0NhbGxhYmxlJGQoc3RvcmUkMS5pbnNwZWN0U291cmNlKSkgewogICAgc3RvcmUkMS5pbnNwZWN0U291cmNlID0gZnVuY3Rpb24oaXQpIHsKICAgICAgcmV0dXJuIGZ1bmN0aW9uVG9TdHJpbmcuY2FsbChpdCk7CiAgICB9OwogIH0KICB2YXIgaW5zcGVjdFNvdXJjZSQzID0gc3RvcmUkMS5pbnNwZWN0U291cmNlOwogIHZhciBnbG9iYWwkZyA9IGdsb2JhbCRvOwogIHZhciBpc0NhbGxhYmxlJGMgPSBpc0NhbGxhYmxlJGw7CiAgdmFyIGluc3BlY3RTb3VyY2UkMiA9IGluc3BlY3RTb3VyY2UkMzsKICB2YXIgV2Vha01hcCQxID0gZ2xvYmFsJGcuV2Vha01hcDsKICB2YXIgbmF0aXZlV2Vha01hcCA9IGlzQ2FsbGFibGUkYyhXZWFrTWFwJDEpICYmIC9uYXRpdmUgY29kZS8udGVzdChpbnNwZWN0U291cmNlJDIoV2Vha01hcCQxKSk7CiAgdmFyIHNoYXJlZCQyID0gc2hhcmVkJDQuZXhwb3J0czsKICB2YXIgdWlkJDIgPSB1aWQkNDsKICB2YXIga2V5cyQ1ID0gc2hhcmVkJDIoImtleXMiKTsKICB2YXIgc2hhcmVkS2V5JDQgPSBmdW5jdGlvbihrZXkpIHsKICAgIHJldHVybiBrZXlzJDVba2V5XSB8fCAoa2V5cyQ1W2tleV0gPSB1aWQkMihrZXkpKTsKICB9OwogIHZhciBoaWRkZW5LZXlzJDYgPSB7fTsKICB2YXIgTkFUSVZFX1dFQUtfTUFQJDEgPSBuYXRpdmVXZWFrTWFwOwogIHZhciBnbG9iYWwkZiA9IGdsb2JhbCRvOwogIHZhciBpc09iamVjdCRkID0gaXNPYmplY3QkaTsKICB2YXIgY3JlYXRlTm9uRW51bWVyYWJsZVByb3BlcnR5JDUgPSBjcmVhdGVOb25FbnVtZXJhYmxlUHJvcGVydHkkNzsKICB2YXIgb2JqZWN0SGFzID0gaGFzJGM7CiAgdmFyIHNoYXJlZCQxID0gc2hhcmVkU3RvcmU7CiAgdmFyIHNoYXJlZEtleSQzID0gc2hhcmVkS2V5JDQ7CiAgdmFyIGhpZGRlbktleXMkNSA9IGhpZGRlbktleXMkNjsKICB2YXIgT0JKRUNUX0FMUkVBRFlfSU5JVElBTElaRUQgPSAiT2JqZWN0IGFscmVhZHkgaW5pdGlhbGl6ZWQiOwogIHZhciBXZWFrTWFwID0gZ2xvYmFsJGYuV2Vha01hcDsKICB2YXIgc2V0JDEsIGdldCwgaGFzJDg7CiAgdmFyIGVuZm9yY2UgPSBmdW5jdGlvbihpdCkgewogICAgcmV0dXJuIGhhcyQ4KGl0KSA/IGdldChpdCkgOiBzZXQkMShpdCwge30pOwogIH07CiAgdmFyIGdldHRlckZvciA9IGZ1bmN0aW9uKFRZUEUyKSB7CiAgICByZXR1cm4gZnVuY3Rpb24oaXQpIHsKICAgICAgdmFyIHN0YXRlOwogICAgICBpZiAoIWlzT2JqZWN0JGQoaXQpIHx8IChzdGF0ZSA9IGdldChpdCkpLnR5cGUgIT09IFRZUEUyKSB7CiAgICAgICAgdGhyb3cgVHlwZUVycm9yKCJJbmNvbXBhdGlibGUgcmVjZWl2ZXIsICIgKyBUWVBFMiArICIgcmVxdWlyZWQiKTsKICAgICAgfQogICAgICByZXR1cm4gc3RhdGU7CiAgICB9OwogIH07CiAgaWYgKE5BVElWRV9XRUFLX01BUCQxIHx8IHNoYXJlZCQxLnN0YXRlKSB7CiAgICB2YXIgc3RvcmUgPSBzaGFyZWQkMS5zdGF0ZSB8fCAoc2hhcmVkJDEuc3RhdGUgPSBuZXcgV2Vha01hcCgpKTsKICAgIHZhciB3bWdldCA9IHN0b3JlLmdldDsKICAgIHZhciB3bWhhcyA9IHN0b3JlLmhhczsKICAgIHZhciB3bXNldCA9IHN0b3JlLnNldDsKICAgIHNldCQxID0gZnVuY3Rpb24oaXQsIG1ldGFkYXRhKSB7CiAgICAgIGlmICh3bWhhcy5jYWxsKHN0b3JlLCBpdCkpCiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihPQkpFQ1RfQUxSRUFEWV9JTklUSUFMSVpFRCk7CiAgICAgIG1ldGFkYXRhLmZhY2FkZSA9IGl0OwogICAgICB3bXNldC5jYWxsKHN0b3JlLCBpdCwgbWV0YWRhdGEpOwogICAgICByZXR1cm4gbWV0YWRhdGE7CiAgICB9OwogICAgZ2V0ID0gZnVuY3Rpb24oaXQpIHsKICAgICAgcmV0dXJuIHdtZ2V0LmNhbGwoc3RvcmUsIGl0KSB8fCB7fTsKICAgIH07CiAgICBoYXMkOCA9IGZ1bmN0aW9uKGl0KSB7CiAgICAgIHJldHVybiB3bWhhcy5jYWxsKHN0b3JlLCBpdCk7CiAgICB9OwogIH0gZWxzZSB7CiAgICB2YXIgU1RBVEUgPSBzaGFyZWRLZXkkMygic3RhdGUiKTsKICAgIGhpZGRlbktleXMkNVtTVEFURV0gPSB0cnVlOwogICAgc2V0JDEgPSBmdW5jdGlvbihpdCwgbWV0YWRhdGEpIHsKICAgICAgaWYgKG9iamVjdEhhcyhpdCwgU1RBVEUpKQogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoT0JKRUNUX0FMUkVBRFlfSU5JVElBTElaRUQpOwogICAgICBtZXRhZGF0YS5mYWNhZGUgPSBpdDsKICAgICAgY3JlYXRlTm9uRW51bWVyYWJsZVByb3BlcnR5JDUoaXQsIFNUQVRFLCBtZXRhZGF0YSk7CiAgICAgIHJldHVybiBtZXRhZGF0YTsKICAgIH07CiAgICBnZXQgPSBmdW5jdGlvbihpdCkgewogICAgICByZXR1cm4gb2JqZWN0SGFzKGl0LCBTVEFURSkgPyBpdFtTVEFURV0gOiB7fTsKICAgIH07CiAgICBoYXMkOCA9IGZ1bmN0aW9uKGl0KSB7CiAgICAgIHJldHVybiBvYmplY3RIYXMoaXQsIFNUQVRFKTsKICAgIH07CiAgfQogIHZhciBpbnRlcm5hbFN0YXRlID0gewogICAgc2V0OiBzZXQkMSwKICAgIGdldCwKICAgIGhhczogaGFzJDgsCiAgICBlbmZvcmNlLAogICAgZ2V0dGVyRm9yCiAgfTsKICB2YXIgREVTQ1JJUFRPUlMkOSA9IGRlc2NyaXB0b3JzOwogIHZhciBoYXMkNyA9IGhhcyRjOwogIHZhciBGdW5jdGlvblByb3RvdHlwZSQxID0gRnVuY3Rpb24ucHJvdG90eXBlOwogIHZhciBnZXREZXNjcmlwdG9yID0gREVTQ1JJUFRPUlMkOSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOwogIHZhciBFWElTVFMgPSBoYXMkNyhGdW5jdGlvblByb3RvdHlwZSQxLCAibmFtZSIpOwogIHZhciBQUk9QRVIgPSBFWElTVFMgJiYgZnVuY3Rpb24gc29tZXRoaW5nKCkgewogIH0ubmFtZSA9PT0gInNvbWV0aGluZyI7CiAgdmFyIENPTkZJR1VSQUJMRSA9IEVYSVNUUyAmJiAoIURFU0NSSVBUT1JTJDkgfHwgREVTQ1JJUFRPUlMkOSAmJiBnZXREZXNjcmlwdG9yKEZ1bmN0aW9uUHJvdG90eXBlJDEsICJuYW1lIikuY29uZmlndXJhYmxlKTsKICB2YXIgZnVuY3Rpb25OYW1lID0gewogICAgRVhJU1RTLAogICAgUFJPUEVSLAogICAgQ09ORklHVVJBQkxFCiAgfTsKICB2YXIgY2VpbCA9IE1hdGguY2VpbDsKICB2YXIgZmxvb3IkMSA9IE1hdGguZmxvb3I7CiAgdmFyIHRvSW50ZWdlciQzID0gZnVuY3Rpb24oYXJndW1lbnQpIHsKICAgIHJldHVybiBpc05hTihhcmd1bWVudCA9ICthcmd1bWVudCkgPyAwIDogKGFyZ3VtZW50ID4gMCA/IGZsb29yJDEgOiBjZWlsKShhcmd1bWVudCk7CiAgfTsKICB2YXIgdG9JbnRlZ2VyJDIgPSB0b0ludGVnZXIkMzsKICB2YXIgbWluJDIgPSBNYXRoLm1pbjsKICB2YXIgdG9MZW5ndGgkOSA9IGZ1bmN0aW9uKGFyZ3VtZW50KSB7CiAgICByZXR1cm4gYXJndW1lbnQgPiAwID8gbWluJDIodG9JbnRlZ2VyJDIoYXJndW1lbnQpLCA5MDA3MTk5MjU0NzQwOTkxKSA6IDA7CiAgfTsKICB2YXIgdG9JbnRlZ2VyJDEgPSB0b0ludGVnZXIkMzsKICB2YXIgbWF4JDEgPSBNYXRoLm1heDsKICB2YXIgbWluJDEgPSBNYXRoLm1pbjsKICB2YXIgdG9BYnNvbHV0ZUluZGV4JDIgPSBmdW5jdGlvbihpbmRleCwgbGVuZ3RoKSB7CiAgICB2YXIgaW50ZWdlciA9IHRvSW50ZWdlciQxKGluZGV4KTsKICAgIHJldHVybiBpbnRlZ2VyIDwgMCA/IG1heCQxKGludGVnZXIgKyBsZW5ndGgsIDApIDogbWluJDEoaW50ZWdlciwgbGVuZ3RoKTsKICB9OwogIHZhciB0b0luZGV4ZWRPYmplY3QkNyA9IHRvSW5kZXhlZE9iamVjdCQ5OwogIHZhciB0b0xlbmd0aCQ4ID0gdG9MZW5ndGgkOTsKICB2YXIgdG9BYnNvbHV0ZUluZGV4JDEgPSB0b0Fic29sdXRlSW5kZXgkMjsKICB2YXIgY3JlYXRlTWV0aG9kJDQgPSBmdW5jdGlvbihJU19JTkNMVURFUykgewogICAgcmV0dXJuIGZ1bmN0aW9uKCR0aGlzLCBlbCwgZnJvbUluZGV4KSB7CiAgICAgIHZhciBPID0gdG9JbmRleGVkT2JqZWN0JDcoJHRoaXMpOwogICAgICB2YXIgbGVuZ3RoID0gdG9MZW5ndGgkOChPLmxlbmd0aCk7CiAgICAgIHZhciBpbmRleCA9IHRvQWJzb2x1dGVJbmRleCQxKGZyb21JbmRleCwgbGVuZ3RoKTsKICAgICAgdmFyIHZhbHVlOwogICAgICBpZiAoSVNfSU5DTFVERVMgJiYgZWwgIT0gZWwpCiAgICAgICAgd2hpbGUgKGxlbmd0aCA+IGluZGV4KSB7CiAgICAgICAgICB2YWx1ZSA9IE9baW5kZXgrK107CiAgICAgICAgICBpZiAodmFsdWUgIT0gdmFsdWUpCiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgZWxzZQogICAgICAgIGZvciAoOyBsZW5ndGggPiBpbmRleDsgaW5kZXgrKykgewogICAgICAgICAgaWYgKChJU19JTkNMVURFUyB8fCBpbmRleCBpbiBPKSAmJiBPW2luZGV4XSA9PT0gZWwpCiAgICAgICAgICAgIHJldHVybiBJU19JTkNMVURFUyB8fCBpbmRleCB8fCAwOwogICAgICAgIH0KICAgICAgcmV0dXJuICFJU19JTkNMVURFUyAmJiAtMTsKICAgIH07CiAgfTsKICB2YXIgYXJyYXlJbmNsdWRlcyA9IHsKICAgIGluY2x1ZGVzOiBjcmVhdGVNZXRob2QkNCh0cnVlKSwKICAgIGluZGV4T2Y6IGNyZWF0ZU1ldGhvZCQ0KGZhbHNlKQogIH07CiAgdmFyIGhhcyQ2ID0gaGFzJGM7CiAgdmFyIHRvSW5kZXhlZE9iamVjdCQ2ID0gdG9JbmRleGVkT2JqZWN0JDk7CiAgdmFyIGluZGV4T2YkNSA9IGFycmF5SW5jbHVkZXMuaW5kZXhPZjsKICB2YXIgaGlkZGVuS2V5cyQ0ID0gaGlkZGVuS2V5cyQ2OwogIHZhciBvYmplY3RLZXlzSW50ZXJuYWwgPSBmdW5jdGlvbihvYmplY3QsIG5hbWVzKSB7CiAgICB2YXIgTyA9IHRvSW5kZXhlZE9iamVjdCQ2KG9iamVjdCk7CiAgICB2YXIgaTIgPSAwOwogICAgdmFyIHJlc3VsdCA9IFtdOwogICAgdmFyIGtleTsKICAgIGZvciAoa2V5IGluIE8pCiAgICAgICFoYXMkNihoaWRkZW5LZXlzJDQsIGtleSkgJiYgaGFzJDYoTywga2V5KSAmJiByZXN1bHQucHVzaChrZXkpOwogICAgd2hpbGUgKG5hbWVzLmxlbmd0aCA+IGkyKQogICAgICBpZiAoaGFzJDYoTywga2V5ID0gbmFtZXNbaTIrK10pKSB7CiAgICAgICAgfmluZGV4T2YkNShyZXN1bHQsIGtleSkgfHwgcmVzdWx0LnB1c2goa2V5KTsKICAgICAgfQogICAgcmV0dXJuIHJlc3VsdDsKICB9OwogIHZhciBlbnVtQnVnS2V5cyQzID0gWwogICAgImNvbnN0cnVjdG9yIiwKICAgICJoYXNPd25Qcm9wZXJ0eSIsCiAgICAiaXNQcm90b3R5cGVPZiIsCiAgICAicHJvcGVydHlJc0VudW1lcmFibGUiLAogICAgInRvTG9jYWxlU3RyaW5nIiwKICAgICJ0b1N0cmluZyIsCiAgICAidmFsdWVPZiIKICBdOwogIHZhciBpbnRlcm5hbE9iamVjdEtleXMkMSA9IG9iamVjdEtleXNJbnRlcm5hbDsKICB2YXIgZW51bUJ1Z0tleXMkMiA9IGVudW1CdWdLZXlzJDM7CiAgdmFyIG9iamVjdEtleXMkMyA9IE9iamVjdC5rZXlzIHx8IGZ1bmN0aW9uIGtleXMyKE8pIHsKICAgIHJldHVybiBpbnRlcm5hbE9iamVjdEtleXMkMShPLCBlbnVtQnVnS2V5cyQyKTsKICB9OwogIHZhciBERVNDUklQVE9SUyQ4ID0gZGVzY3JpcHRvcnM7CiAgdmFyIGRlZmluZVByb3BlcnR5TW9kdWxlJDMgPSBvYmplY3REZWZpbmVQcm9wZXJ0eTsKICB2YXIgYW5PYmplY3QkZyA9IGFuT2JqZWN0JGk7CiAgdmFyIG9iamVjdEtleXMkMiA9IG9iamVjdEtleXMkMzsKICB2YXIgb2JqZWN0RGVmaW5lUHJvcGVydGllcyA9IERFU0NSSVBUT1JTJDggPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyA6IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXMyKE8sIFByb3BlcnRpZXMpIHsKICAgIGFuT2JqZWN0JGcoTyk7CiAgICB2YXIga2V5czIgPSBvYmplY3RLZXlzJDIoUHJvcGVydGllcyk7CiAgICB2YXIgbGVuZ3RoID0ga2V5czIubGVuZ3RoOwogICAgdmFyIGluZGV4ID0gMDsKICAgIHZhciBrZXk7CiAgICB3aGlsZSAobGVuZ3RoID4gaW5kZXgpCiAgICAgIGRlZmluZVByb3BlcnR5TW9kdWxlJDMuZihPLCBrZXkgPSBrZXlzMltpbmRleCsrXSwgUHJvcGVydGllc1trZXldKTsKICAgIHJldHVybiBPOwogIH07CiAgdmFyIGdldEJ1aWx0SW4kOCA9IGdldEJ1aWx0SW4kYjsKICB2YXIgaHRtbCQyID0gZ2V0QnVpbHRJbiQ4KCJkb2N1bWVudCIsICJkb2N1bWVudEVsZW1lbnQiKTsKICB2YXIgYW5PYmplY3QkZiA9IGFuT2JqZWN0JGk7CiAgdmFyIGRlZmluZVByb3BlcnRpZXMkNSA9IG9iamVjdERlZmluZVByb3BlcnRpZXM7CiAgdmFyIGVudW1CdWdLZXlzJDEgPSBlbnVtQnVnS2V5cyQzOwogIHZhciBoaWRkZW5LZXlzJDMgPSBoaWRkZW5LZXlzJDY7CiAgdmFyIGh0bWwkMSA9IGh0bWwkMjsKICB2YXIgZG9jdW1lbnRDcmVhdGVFbGVtZW50ID0gZG9jdW1lbnRDcmVhdGVFbGVtZW50JDE7CiAgdmFyIHNoYXJlZEtleSQyID0gc2hhcmVkS2V5JDQ7CiAgdmFyIEdUID0gIj4iOwogIHZhciBMVCA9ICI8IjsKICB2YXIgUFJPVE9UWVBFJDEgPSAicHJvdG90eXBlIjsKICB2YXIgU0NSSVBUID0gInNjcmlwdCI7CiAgdmFyIElFX1BST1RPJDEgPSBzaGFyZWRLZXkkMigiSUVfUFJPVE8iKTsKICB2YXIgRW1wdHlDb25zdHJ1Y3RvciA9IGZ1bmN0aW9uKCkgewogIH07CiAgdmFyIHNjcmlwdFRhZyA9IGZ1bmN0aW9uKGNvbnRlbnQpIHsKICAgIHJldHVybiBMVCArIFNDUklQVCArIEdUICsgY29udGVudCArIExUICsgIi8iICsgU0NSSVBUICsgR1Q7CiAgfTsKICB2YXIgTnVsbFByb3RvT2JqZWN0VmlhQWN0aXZlWCA9IGZ1bmN0aW9uKGFjdGl2ZVhEb2N1bWVudDIpIHsKICAgIGFjdGl2ZVhEb2N1bWVudDIud3JpdGUoc2NyaXB0VGFnKCIiKSk7CiAgICBhY3RpdmVYRG9jdW1lbnQyLmNsb3NlKCk7CiAgICB2YXIgdGVtcCA9IGFjdGl2ZVhEb2N1bWVudDIucGFyZW50V2luZG93Lk9iamVjdDsKICAgIGFjdGl2ZVhEb2N1bWVudDIgPSBudWxsOwogICAgcmV0dXJuIHRlbXA7CiAgfTsKICB2YXIgTnVsbFByb3RvT2JqZWN0VmlhSUZyYW1lID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgaWZyYW1lID0gZG9jdW1lbnRDcmVhdGVFbGVtZW50KCJpZnJhbWUiKTsKICAgIHZhciBKUyA9ICJqYXZhIiArIFNDUklQVCArICI6IjsKICAgIHZhciBpZnJhbWVEb2N1bWVudDsKICAgIGlmcmFtZS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgaHRtbCQxLmFwcGVuZENoaWxkKGlmcmFtZSk7CiAgICBpZnJhbWUuc3JjID0gU3RyaW5nKEpTKTsKICAgIGlmcmFtZURvY3VtZW50ID0gaWZyYW1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ7CiAgICBpZnJhbWVEb2N1bWVudC5vcGVuKCk7CiAgICBpZnJhbWVEb2N1bWVudC53cml0ZShzY3JpcHRUYWcoImRvY3VtZW50LkY9T2JqZWN0IikpOwogICAgaWZyYW1lRG9jdW1lbnQuY2xvc2UoKTsKICAgIHJldHVybiBpZnJhbWVEb2N1bWVudC5GOwogIH07CiAgdmFyIGFjdGl2ZVhEb2N1bWVudDsKICB2YXIgTnVsbFByb3RvT2JqZWN0ID0gZnVuY3Rpb24oKSB7CiAgICB0cnkgewogICAgICBhY3RpdmVYRG9jdW1lbnQgPSBuZXcgQWN0aXZlWE9iamVjdCgiaHRtbGZpbGUiKTsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICB9CiAgICBOdWxsUHJvdG9PYmplY3QgPSB0eXBlb2YgZG9jdW1lbnQgIT0gInVuZGVmaW5lZCIgPyBkb2N1bWVudC5kb21haW4gJiYgYWN0aXZlWERvY3VtZW50ID8gTnVsbFByb3RvT2JqZWN0VmlhQWN0aXZlWChhY3RpdmVYRG9jdW1lbnQpIDogTnVsbFByb3RvT2JqZWN0VmlhSUZyYW1lKCkgOiBOdWxsUHJvdG9PYmplY3RWaWFBY3RpdmVYKGFjdGl2ZVhEb2N1bWVudCk7CiAgICB2YXIgbGVuZ3RoID0gZW51bUJ1Z0tleXMkMS5sZW5ndGg7CiAgICB3aGlsZSAobGVuZ3RoLS0pCiAgICAgIGRlbGV0ZSBOdWxsUHJvdG9PYmplY3RbUFJPVE9UWVBFJDFdW2VudW1CdWdLZXlzJDFbbGVuZ3RoXV07CiAgICByZXR1cm4gTnVsbFByb3RvT2JqZWN0KCk7CiAgfTsKICBoaWRkZW5LZXlzJDNbSUVfUFJPVE8kMV0gPSB0cnVlOwogIHZhciBvYmplY3RDcmVhdGUgPSBPYmplY3QuY3JlYXRlIHx8IGZ1bmN0aW9uIGNyZWF0ZTIoTywgUHJvcGVydGllcykgewogICAgdmFyIHJlc3VsdDsKICAgIGlmIChPICE9PSBudWxsKSB7CiAgICAgIEVtcHR5Q29uc3RydWN0b3JbUFJPVE9UWVBFJDFdID0gYW5PYmplY3QkZihPKTsKICAgICAgcmVzdWx0ID0gbmV3IEVtcHR5Q29uc3RydWN0b3IoKTsKICAgICAgRW1wdHlDb25zdHJ1Y3RvcltQUk9UT1RZUEUkMV0gPSBudWxsOwogICAgICByZXN1bHRbSUVfUFJPVE8kMV0gPSBPOwogICAgfSBlbHNlCiAgICAgIHJlc3VsdCA9IE51bGxQcm90b09iamVjdCgpOwogICAgcmV0dXJuIFByb3BlcnRpZXMgPT09IHZvaWQgMCA/IHJlc3VsdCA6IGRlZmluZVByb3BlcnRpZXMkNShyZXN1bHQsIFByb3BlcnRpZXMpOwogIH07CiAgdmFyIGZhaWxzJGggPSBmYWlscyRuOwogIHZhciBjb3JyZWN0UHJvdG90eXBlR2V0dGVyID0gIWZhaWxzJGgoZnVuY3Rpb24oKSB7CiAgICBmdW5jdGlvbiBGKCkgewogICAgfQogICAgRi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBudWxsOwogICAgcmV0dXJuIE9iamVjdC5nZXRQcm90b3R5cGVPZihuZXcgRigpKSAhPT0gRi5wcm90b3R5cGU7CiAgfSk7CiAgdmFyIGhhcyQ1ID0gaGFzJGM7CiAgdmFyIGlzQ2FsbGFibGUkYiA9IGlzQ2FsbGFibGUkbDsKICB2YXIgdG9PYmplY3QkOSA9IHRvT2JqZWN0JGI7CiAgdmFyIHNoYXJlZEtleSQxID0gc2hhcmVkS2V5JDQ7CiAgdmFyIENPUlJFQ1RfUFJPVE9UWVBFX0dFVFRFUiQxID0gY29ycmVjdFByb3RvdHlwZUdldHRlcjsKICB2YXIgSUVfUFJPVE8gPSBzaGFyZWRLZXkkMSgiSUVfUFJPVE8iKTsKICB2YXIgT2JqZWN0UHJvdG90eXBlJDEgPSBPYmplY3QucHJvdG90eXBlOwogIHZhciBvYmplY3RHZXRQcm90b3R5cGVPZiA9IENPUlJFQ1RfUFJPVE9UWVBFX0dFVFRFUiQxID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24oTykgewogICAgdmFyIG9iamVjdCA9IHRvT2JqZWN0JDkoTyk7CiAgICBpZiAoaGFzJDUob2JqZWN0LCBJRV9QUk9UTykpCiAgICAgIHJldHVybiBvYmplY3RbSUVfUFJPVE9dOwogICAgdmFyIGNvbnN0cnVjdG9yID0gb2JqZWN0LmNvbnN0cnVjdG9yOwogICAgaWYgKGlzQ2FsbGFibGUkYihjb25zdHJ1Y3RvcikgJiYgb2JqZWN0IGluc3RhbmNlb2YgY29uc3RydWN0b3IpIHsKICAgICAgcmV0dXJuIGNvbnN0cnVjdG9yLnByb3RvdHlwZTsKICAgIH0KICAgIHJldHVybiBvYmplY3QgaW5zdGFuY2VvZiBPYmplY3QgPyBPYmplY3RQcm90b3R5cGUkMSA6IG51bGw7CiAgfTsKICB2YXIgY3JlYXRlTm9uRW51bWVyYWJsZVByb3BlcnR5JDQgPSBjcmVhdGVOb25FbnVtZXJhYmxlUHJvcGVydHkkNzsKICB2YXIgcmVkZWZpbmUkNCA9IGZ1bmN0aW9uKHRhcmdldCwga2V5LCB2YWx1ZSwgb3B0aW9ucykgewogICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5lbnVtZXJhYmxlKQogICAgICB0YXJnZXRba2V5XSA9IHZhbHVlOwogICAgZWxzZQogICAgICBjcmVhdGVOb25FbnVtZXJhYmxlUHJvcGVydHkkNCh0YXJnZXQsIGtleSwgdmFsdWUpOwogIH07CiAgdmFyIGZhaWxzJGcgPSBmYWlscyRuOwogIHZhciBpc0NhbGxhYmxlJGEgPSBpc0NhbGxhYmxlJGw7CiAgdmFyIGNyZWF0ZSQ4ID0gb2JqZWN0Q3JlYXRlOwogIHZhciBnZXRQcm90b3R5cGVPZiQ3ID0gb2JqZWN0R2V0UHJvdG90eXBlT2Y7CiAgdmFyIHJlZGVmaW5lJDMgPSByZWRlZmluZSQ0OwogIHZhciB3ZWxsS25vd25TeW1ib2wkaiA9IHdlbGxLbm93blN5bWJvbCRsOwogIHZhciBJVEVSQVRPUiQ1ID0gd2VsbEtub3duU3ltYm9sJGooIml0ZXJhdG9yIik7CiAgdmFyIEJVR0dZX1NBRkFSSV9JVEVSQVRPUlMkMSA9IGZhbHNlOwogIHZhciBJdGVyYXRvclByb3RvdHlwZSQxLCBQcm90b3R5cGVPZkFycmF5SXRlcmF0b3JQcm90b3R5cGUsIGFycmF5SXRlcmF0b3I7CiAgaWYgKFtdLmtleXMpIHsKICAgIGFycmF5SXRlcmF0b3IgPSBbXS5rZXlzKCk7CiAgICBpZiAoISgibmV4dCIgaW4gYXJyYXlJdGVyYXRvcikpCiAgICAgIEJVR0dZX1NBRkFSSV9JVEVSQVRPUlMkMSA9IHRydWU7CiAgICBlbHNlIHsKICAgICAgUHJvdG90eXBlT2ZBcnJheUl0ZXJhdG9yUHJvdG90eXBlID0gZ2V0UHJvdG90eXBlT2YkNyhnZXRQcm90b3R5cGVPZiQ3KGFycmF5SXRlcmF0b3IpKTsKICAgICAgaWYgKFByb3RvdHlwZU9mQXJyYXlJdGVyYXRvclByb3RvdHlwZSAhPT0gT2JqZWN0LnByb3RvdHlwZSkKICAgICAgICBJdGVyYXRvclByb3RvdHlwZSQxID0gUHJvdG90eXBlT2ZBcnJheUl0ZXJhdG9yUHJvdG90eXBlOwogICAgfQogIH0KICB2YXIgTkVXX0lURVJBVE9SX1BST1RPVFlQRSA9IEl0ZXJhdG9yUHJvdG90eXBlJDEgPT0gdm9pZCAwIHx8IGZhaWxzJGcoZnVuY3Rpb24oKSB7CiAgICB2YXIgdGVzdDIgPSB7fTsKICAgIHJldHVybiBJdGVyYXRvclByb3RvdHlwZSQxW0lURVJBVE9SJDVdLmNhbGwodGVzdDIpICE9PSB0ZXN0MjsKICB9KTsKICBpZiAoTkVXX0lURVJBVE9SX1BST1RPVFlQRSkKICAgIEl0ZXJhdG9yUHJvdG90eXBlJDEgPSB7fTsKICBlbHNlCiAgICBJdGVyYXRvclByb3RvdHlwZSQxID0gY3JlYXRlJDgoSXRlcmF0b3JQcm90b3R5cGUkMSk7CiAgaWYgKCFpc0NhbGxhYmxlJGEoSXRlcmF0b3JQcm90b3R5cGUkMVtJVEVSQVRPUiQ1XSkpIHsKICAgIHJlZGVmaW5lJDMoSXRlcmF0b3JQcm90b3R5cGUkMSwgSVRFUkFUT1IkNSwgZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiB0aGlzOwogICAgfSk7CiAgfQogIHZhciBpdGVyYXRvcnNDb3JlID0gewogICAgSXRlcmF0b3JQcm90b3R5cGU6IEl0ZXJhdG9yUHJvdG90eXBlJDEsCiAgICBCVUdHWV9TQUZBUklfSVRFUkFUT1JTOiBCVUdHWV9TQUZBUklfSVRFUkFUT1JTJDEKICB9OwogIHZhciB3ZWxsS25vd25TeW1ib2wkaSA9IHdlbGxLbm93blN5bWJvbCRsOwogIHZhciBUT19TVFJJTkdfVEFHJDMgPSB3ZWxsS25vd25TeW1ib2wkaSgidG9TdHJpbmdUYWciKTsKICB2YXIgdGVzdCQxID0ge307CiAgdGVzdCQxW1RPX1NUUklOR19UQUckM10gPSAieiI7CiAgdmFyIHRvU3RyaW5nVGFnU3VwcG9ydCA9IFN0cmluZyh0ZXN0JDEpID09PSAiW29iamVjdCB6XSI7CiAgdmFyIFRPX1NUUklOR19UQUdfU1VQUE9SVCQyID0gdG9TdHJpbmdUYWdTdXBwb3J0OwogIHZhciBpc0NhbGxhYmxlJDkgPSBpc0NhbGxhYmxlJGw7CiAgdmFyIGNsYXNzb2ZSYXcgPSBjbGFzc29mUmF3JDE7CiAgdmFyIHdlbGxLbm93blN5bWJvbCRoID0gd2VsbEtub3duU3ltYm9sJGw7CiAgdmFyIFRPX1NUUklOR19UQUckMiA9IHdlbGxLbm93blN5bWJvbCRoKCJ0b1N0cmluZ1RhZyIpOwogIHZhciBDT1JSRUNUX0FSR1VNRU5UUyA9IGNsYXNzb2ZSYXcoZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gYXJndW1lbnRzOwogIH0oKSkgPT0gIkFyZ3VtZW50cyI7CiAgdmFyIHRyeUdldCA9IGZ1bmN0aW9uKGl0LCBrZXkpIHsKICAgIHRyeSB7CiAgICAgIHJldHVybiBpdFtrZXldOwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIH0KICB9OwogIHZhciBjbGFzc29mJDkgPSBUT19TVFJJTkdfVEFHX1NVUFBPUlQkMiA/IGNsYXNzb2ZSYXcgOiBmdW5jdGlvbihpdCkgewogICAgdmFyIE8sIHRhZywgcmVzdWx0OwogICAgcmV0dXJuIGl0ID09PSB2b2lkIDAgPyAiVW5kZWZpbmVkIiA6IGl0ID09PSBudWxsID8gIk51bGwiIDogdHlwZW9mICh0YWcgPSB0cnlHZXQoTyA9IE9iamVjdChpdCksIFRPX1NUUklOR19UQUckMikpID09ICJzdHJpbmciID8gdGFnIDogQ09SUkVDVF9BUkdVTUVOVFMgPyBjbGFzc29mUmF3KE8pIDogKHJlc3VsdCA9IGNsYXNzb2ZSYXcoTykpID09ICJPYmplY3QiICYmIGlzQ2FsbGFibGUkOShPLmNhbGxlZSkgPyAiQXJndW1lbnRzIiA6IHJlc3VsdDsKICB9OwogIHZhciBUT19TVFJJTkdfVEFHX1NVUFBPUlQkMSA9IHRvU3RyaW5nVGFnU3VwcG9ydDsKICB2YXIgY2xhc3NvZiQ4ID0gY2xhc3NvZiQ5OwogIHZhciBvYmplY3RUb1N0cmluZyA9IFRPX1NUUklOR19UQUdfU1VQUE9SVCQxID8ge30udG9TdHJpbmcgOiBmdW5jdGlvbiB0b1N0cmluZzIoKSB7CiAgICByZXR1cm4gIltvYmplY3QgIiArIGNsYXNzb2YkOCh0aGlzKSArICJdIjsKICB9OwogIHZhciBUT19TVFJJTkdfVEFHX1NVUFBPUlQgPSB0b1N0cmluZ1RhZ1N1cHBvcnQ7CiAgdmFyIGRlZmluZVByb3BlcnR5JDggPSBvYmplY3REZWZpbmVQcm9wZXJ0eS5mOwogIHZhciBjcmVhdGVOb25FbnVtZXJhYmxlUHJvcGVydHkkMyA9IGNyZWF0ZU5vbkVudW1lcmFibGVQcm9wZXJ0eSQ3OwogIHZhciBoYXMkNCA9IGhhcyRjOwogIHZhciB0b1N0cmluZyRiID0gb2JqZWN0VG9TdHJpbmc7CiAgdmFyIHdlbGxLbm93blN5bWJvbCRnID0gd2VsbEtub3duU3ltYm9sJGw7CiAgdmFyIFRPX1NUUklOR19UQUckMSA9IHdlbGxLbm93blN5bWJvbCRnKCJ0b1N0cmluZ1RhZyIpOwogIHZhciBzZXRUb1N0cmluZ1RhZyQ2ID0gZnVuY3Rpb24oaXQsIFRBRywgU1RBVElDLCBTRVRfTUVUSE9EKSB7CiAgICBpZiAoaXQpIHsKICAgICAgdmFyIHRhcmdldCA9IFNUQVRJQyA/IGl0IDogaXQucHJvdG90eXBlOwogICAgICBpZiAoIWhhcyQ0KHRhcmdldCwgVE9fU1RSSU5HX1RBRyQxKSkgewogICAgICAgIGRlZmluZVByb3BlcnR5JDgodGFyZ2V0LCBUT19TVFJJTkdfVEFHJDEsIHsgY29uZmlndXJhYmxlOiB0cnVlLCB2YWx1ZTogVEFHIH0pOwogICAgICB9CiAgICAgIGlmIChTRVRfTUVUSE9EICYmICFUT19TVFJJTkdfVEFHX1NVUFBPUlQpIHsKICAgICAgICBjcmVhdGVOb25FbnVtZXJhYmxlUHJvcGVydHkkMyh0YXJnZXQsICJ0b1N0cmluZyIsIHRvU3RyaW5nJGIpOwogICAgICB9CiAgICB9CiAgfTsKICB2YXIgSXRlcmF0b3JQcm90b3R5cGUgPSBpdGVyYXRvcnNDb3JlLkl0ZXJhdG9yUHJvdG90eXBlOwogIHZhciBjcmVhdGUkNyA9IG9iamVjdENyZWF0ZTsKICB2YXIgY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yJDMgPSBjcmVhdGVQcm9wZXJ0eURlc2NyaXB0b3IkNjsKICB2YXIgc2V0VG9TdHJpbmdUYWckNSA9IHNldFRvU3RyaW5nVGFnJDY7CiAgdmFyIEl0ZXJhdG9ycyQ1ID0gaXRlcmF0b3JzOwogIHZhciByZXR1cm5UaGlzJDEgPSBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzOwogIH07CiAgdmFyIGNyZWF0ZUl0ZXJhdG9yQ29uc3RydWN0b3IkMSA9IGZ1bmN0aW9uKEl0ZXJhdG9yQ29uc3RydWN0b3IsIE5BTUUyLCBuZXh0KSB7CiAgICB2YXIgVE9fU1RSSU5HX1RBRzIgPSBOQU1FMiArICIgSXRlcmF0b3IiOwogICAgSXRlcmF0b3JDb25zdHJ1Y3Rvci5wcm90b3R5cGUgPSBjcmVhdGUkNyhJdGVyYXRvclByb3RvdHlwZSwgeyBuZXh0OiBjcmVhdGVQcm9wZXJ0eURlc2NyaXB0b3IkMygxLCBuZXh0KSB9KTsKICAgIHNldFRvU3RyaW5nVGFnJDUoSXRlcmF0b3JDb25zdHJ1Y3RvciwgVE9fU1RSSU5HX1RBRzIsIGZhbHNlLCB0cnVlKTsKICAgIEl0ZXJhdG9ycyQ1W1RPX1NUUklOR19UQUcyXSA9IHJldHVyblRoaXMkMTsKICAgIHJldHVybiBJdGVyYXRvckNvbnN0cnVjdG9yOwogIH07CiAgdmFyIGlzQ2FsbGFibGUkOCA9IGlzQ2FsbGFibGUkbDsKICB2YXIgYVBvc3NpYmxlUHJvdG90eXBlJDEgPSBmdW5jdGlvbihhcmd1bWVudCkgewogICAgaWYgKHR5cGVvZiBhcmd1bWVudCA9PT0gIm9iamVjdCIgfHwgaXNDYWxsYWJsZSQ4KGFyZ3VtZW50KSkKICAgICAgcmV0dXJuIGFyZ3VtZW50OwogICAgdGhyb3cgVHlwZUVycm9yKCJDYW4ndCBzZXQgIiArIFN0cmluZyhhcmd1bWVudCkgKyAiIGFzIGEgcHJvdG90eXBlIik7CiAgfTsKICB2YXIgYW5PYmplY3QkZSA9IGFuT2JqZWN0JGk7CiAgdmFyIGFQb3NzaWJsZVByb3RvdHlwZSA9IGFQb3NzaWJsZVByb3RvdHlwZSQxOwogIHZhciBvYmplY3RTZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCAoIl9fcHJvdG9fXyIgaW4ge30gPyBmdW5jdGlvbigpIHsKICAgIHZhciBDT1JSRUNUX1NFVFRFUiA9IGZhbHNlOwogICAgdmFyIHRlc3QyID0ge307CiAgICB2YXIgc2V0dGVyOwogICAgdHJ5IHsKICAgICAgc2V0dGVyID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihPYmplY3QucHJvdG90eXBlLCAiX19wcm90b19fIikuc2V0OwogICAgICBzZXR0ZXIuY2FsbCh0ZXN0MiwgW10pOwogICAgICBDT1JSRUNUX1NFVFRFUiA9IHRlc3QyIGluc3RhbmNlb2YgQXJyYXk7CiAgICB9IGNhdGNoIChlcnJvcikgewogICAgfQogICAgcmV0dXJuIGZ1bmN0aW9uIHNldFByb3RvdHlwZU9mMihPLCBwcm90bykgewogICAgICBhbk9iamVjdCRlKE8pOwogICAgICBhUG9zc2libGVQcm90b3R5cGUocHJvdG8pOwogICAgICBpZiAoQ09SUkVDVF9TRVRURVIpCiAgICAgICAgc2V0dGVyLmNhbGwoTywgcHJvdG8pOwogICAgICBlbHNlCiAgICAgICAgTy5fX3Byb3RvX18gPSBwcm90bzsKICAgICAgcmV0dXJuIE87CiAgICB9OwogIH0oKSA6IHZvaWQgMCk7CiAgdmFyICQkRSA9IF9leHBvcnQ7CiAgdmFyIEZ1bmN0aW9uTmFtZSA9IGZ1bmN0aW9uTmFtZTsKICB2YXIgY3JlYXRlSXRlcmF0b3JDb25zdHJ1Y3RvciA9IGNyZWF0ZUl0ZXJhdG9yQ29uc3RydWN0b3IkMTsKICB2YXIgZ2V0UHJvdG90eXBlT2YkNiA9IG9iamVjdEdldFByb3RvdHlwZU9mOwogIHZhciBzZXRUb1N0cmluZ1RhZyQ0ID0gc2V0VG9TdHJpbmdUYWckNjsKICB2YXIgcmVkZWZpbmUkMiA9IHJlZGVmaW5lJDQ7CiAgdmFyIHdlbGxLbm93blN5bWJvbCRmID0gd2VsbEtub3duU3ltYm9sJGw7CiAgdmFyIEl0ZXJhdG9ycyQ0ID0gaXRlcmF0b3JzOwogIHZhciBJdGVyYXRvcnNDb3JlID0gaXRlcmF0b3JzQ29yZTsKICB2YXIgUFJPUEVSX0ZVTkNUSU9OX05BTUUgPSBGdW5jdGlvbk5hbWUuUFJPUEVSOwogIHZhciBCVUdHWV9TQUZBUklfSVRFUkFUT1JTID0gSXRlcmF0b3JzQ29yZS5CVUdHWV9TQUZBUklfSVRFUkFUT1JTOwogIHZhciBJVEVSQVRPUiQ0ID0gd2VsbEtub3duU3ltYm9sJGYoIml0ZXJhdG9yIik7CiAgdmFyIEtFWVMgPSAia2V5cyI7CiAgdmFyIFZBTFVFUyA9ICJ2YWx1ZXMiOwogIHZhciBFTlRSSUVTID0gImVudHJpZXMiOwogIHZhciByZXR1cm5UaGlzID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdGhpczsKICB9OwogIHZhciBkZWZpbmVJdGVyYXRvciQyID0gZnVuY3Rpb24oSXRlcmFibGUsIE5BTUUyLCBJdGVyYXRvckNvbnN0cnVjdG9yLCBuZXh0LCBERUZBVUxULCBJU19TRVQsIEZPUkNFRDIpIHsKICAgIGNyZWF0ZUl0ZXJhdG9yQ29uc3RydWN0b3IoSXRlcmF0b3JDb25zdHJ1Y3RvciwgTkFNRTIsIG5leHQpOwogICAgdmFyIGdldEl0ZXJhdGlvbk1ldGhvZCA9IGZ1bmN0aW9uKEtJTkQpIHsKICAgICAgaWYgKEtJTkQgPT09IERFRkFVTFQgJiYgZGVmYXVsdEl0ZXJhdG9yKQogICAgICAgIHJldHVybiBkZWZhdWx0SXRlcmF0b3I7CiAgICAgIGlmICghQlVHR1lfU0FGQVJJX0lURVJBVE9SUyAmJiBLSU5EIGluIEl0ZXJhYmxlUHJvdG90eXBlKQogICAgICAgIHJldHVybiBJdGVyYWJsZVByb3RvdHlwZVtLSU5EXTsKICAgICAgc3dpdGNoIChLSU5EKSB7CiAgICAgICAgY2FzZSBLRVlTOgogICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGtleXMyKCkgewogICAgICAgICAgICByZXR1cm4gbmV3IEl0ZXJhdG9yQ29uc3RydWN0b3IodGhpcywgS0lORCk7CiAgICAgICAgICB9OwogICAgICAgIGNhc2UgVkFMVUVTOgogICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHZhbHVlcygpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBJdGVyYXRvckNvbnN0cnVjdG9yKHRoaXMsIEtJTkQpOwogICAgICAgICAgfTsKICAgICAgICBjYXNlIEVOVFJJRVM6CiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gZW50cmllczIoKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgSXRlcmF0b3JDb25zdHJ1Y3Rvcih0aGlzLCBLSU5EKTsKICAgICAgICAgIH07CiAgICAgIH0KICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBuZXcgSXRlcmF0b3JDb25zdHJ1Y3Rvcih0aGlzKTsKICAgICAgfTsKICAgIH07CiAgICB2YXIgVE9fU1RSSU5HX1RBRzIgPSBOQU1FMiArICIgSXRlcmF0b3IiOwogICAgdmFyIElOQ09SUkVDVF9WQUxVRVNfTkFNRSA9IGZhbHNlOwogICAgdmFyIEl0ZXJhYmxlUHJvdG90eXBlID0gSXRlcmFibGUucHJvdG90eXBlOwogICAgdmFyIG5hdGl2ZUl0ZXJhdG9yID0gSXRlcmFibGVQcm90b3R5cGVbSVRFUkFUT1IkNF0gfHwgSXRlcmFibGVQcm90b3R5cGVbIkBAaXRlcmF0b3IiXSB8fCBERUZBVUxUICYmIEl0ZXJhYmxlUHJvdG90eXBlW0RFRkFVTFRdOwogICAgdmFyIGRlZmF1bHRJdGVyYXRvciA9ICFCVUdHWV9TQUZBUklfSVRFUkFUT1JTICYmIG5hdGl2ZUl0ZXJhdG9yIHx8IGdldEl0ZXJhdGlvbk1ldGhvZChERUZBVUxUKTsKICAgIHZhciBhbnlOYXRpdmVJdGVyYXRvciA9IE5BTUUyID09ICJBcnJheSIgPyBJdGVyYWJsZVByb3RvdHlwZS5lbnRyaWVzIHx8IG5hdGl2ZUl0ZXJhdG9yIDogbmF0aXZlSXRlcmF0b3I7CiAgICB2YXIgQ3VycmVudEl0ZXJhdG9yUHJvdG90eXBlLCBtZXRob2RzLCBLRVk7CiAgICBpZiAoYW55TmF0aXZlSXRlcmF0b3IpIHsKICAgICAgQ3VycmVudEl0ZXJhdG9yUHJvdG90eXBlID0gZ2V0UHJvdG90eXBlT2YkNihhbnlOYXRpdmVJdGVyYXRvci5jYWxsKG5ldyBJdGVyYWJsZSgpKSk7CiAgICAgIGlmIChDdXJyZW50SXRlcmF0b3JQcm90b3R5cGUgIT09IE9iamVjdC5wcm90b3R5cGUgJiYgQ3VycmVudEl0ZXJhdG9yUHJvdG90eXBlLm5leHQpIHsKICAgICAgICBzZXRUb1N0cmluZ1RhZyQ0KEN1cnJlbnRJdGVyYXRvclByb3RvdHlwZSwgVE9fU1RSSU5HX1RBRzIsIHRydWUsIHRydWUpOwogICAgICAgIEl0ZXJhdG9ycyQ0W1RPX1NUUklOR19UQUcyXSA9IHJldHVyblRoaXM7CiAgICAgIH0KICAgIH0KICAgIGlmIChQUk9QRVJfRlVOQ1RJT05fTkFNRSAmJiBERUZBVUxUID09IFZBTFVFUyAmJiBuYXRpdmVJdGVyYXRvciAmJiBuYXRpdmVJdGVyYXRvci5uYW1lICE9PSBWQUxVRVMpIHsKICAgICAgewogICAgICAgIElOQ09SUkVDVF9WQUxVRVNfTkFNRSA9IHRydWU7CiAgICAgICAgZGVmYXVsdEl0ZXJhdG9yID0gZnVuY3Rpb24gdmFsdWVzKCkgewogICAgICAgICAgcmV0dXJuIG5hdGl2ZUl0ZXJhdG9yLmNhbGwodGhpcyk7CiAgICAgICAgfTsKICAgICAgfQogICAgfQogICAgaWYgKERFRkFVTFQpIHsKICAgICAgbWV0aG9kcyA9IHsKICAgICAgICB2YWx1ZXM6IGdldEl0ZXJhdGlvbk1ldGhvZChWQUxVRVMpLAogICAgICAgIGtleXM6IElTX1NFVCA/IGRlZmF1bHRJdGVyYXRvciA6IGdldEl0ZXJhdGlvbk1ldGhvZChLRVlTKSwKICAgICAgICBlbnRyaWVzOiBnZXRJdGVyYXRpb25NZXRob2QoRU5UUklFUykKICAgICAgfTsKICAgICAgaWYgKEZPUkNFRDIpCiAgICAgICAgZm9yIChLRVkgaW4gbWV0aG9kcykgewogICAgICAgICAgaWYgKEJVR0dZX1NBRkFSSV9JVEVSQVRPUlMgfHwgSU5DT1JSRUNUX1ZBTFVFU19OQU1FIHx8ICEoS0VZIGluIEl0ZXJhYmxlUHJvdG90eXBlKSkgewogICAgICAgICAgICByZWRlZmluZSQyKEl0ZXJhYmxlUHJvdG90eXBlLCBLRVksIG1ldGhvZHNbS0VZXSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICBlbHNlCiAgICAgICAgJCRFKHsgdGFyZ2V0OiBOQU1FMiwgcHJvdG86IHRydWUsIGZvcmNlZDogQlVHR1lfU0FGQVJJX0lURVJBVE9SUyB8fCBJTkNPUlJFQ1RfVkFMVUVTX05BTUUgfSwgbWV0aG9kcyk7CiAgICB9CiAgICBpZiAoRk9SQ0VEMiAmJiBJdGVyYWJsZVByb3RvdHlwZVtJVEVSQVRPUiQ0XSAhPT0gZGVmYXVsdEl0ZXJhdG9yKSB7CiAgICAgIHJlZGVmaW5lJDIoSXRlcmFibGVQcm90b3R5cGUsIElURVJBVE9SJDQsIGRlZmF1bHRJdGVyYXRvciwgeyBuYW1lOiBERUZBVUxUIH0pOwogICAgfQogICAgSXRlcmF0b3JzJDRbTkFNRTJdID0gZGVmYXVsdEl0ZXJhdG9yOwogICAgcmV0dXJuIG1ldGhvZHM7CiAgfTsKICB2YXIgdG9JbmRleGVkT2JqZWN0JDUgPSB0b0luZGV4ZWRPYmplY3QkOTsKICB2YXIgSXRlcmF0b3JzJDMgPSBpdGVyYXRvcnM7CiAgdmFyIEludGVybmFsU3RhdGVNb2R1bGUkNSA9IGludGVybmFsU3RhdGU7CiAgdmFyIGRlZmluZUl0ZXJhdG9yJDEgPSBkZWZpbmVJdGVyYXRvciQyOwogIHZhciBBUlJBWV9JVEVSQVRPUiA9ICJBcnJheSBJdGVyYXRvciI7CiAgdmFyIHNldEludGVybmFsU3RhdGUkNSA9IEludGVybmFsU3RhdGVNb2R1bGUkNS5zZXQ7CiAgdmFyIGdldEludGVybmFsU3RhdGUkMyA9IEludGVybmFsU3RhdGVNb2R1bGUkNS5nZXR0ZXJGb3IoQVJSQVlfSVRFUkFUT1IpOwogIGRlZmluZUl0ZXJhdG9yJDEoQXJyYXksICJBcnJheSIsIGZ1bmN0aW9uKGl0ZXJhdGVkLCBraW5kKSB7CiAgICBzZXRJbnRlcm5hbFN0YXRlJDUodGhpcywgewogICAgICB0eXBlOiBBUlJBWV9JVEVSQVRPUiwKICAgICAgdGFyZ2V0OiB0b0luZGV4ZWRPYmplY3QkNShpdGVyYXRlZCksCiAgICAgIGluZGV4OiAwLAogICAgICBraW5kCiAgICB9KTsKICB9LCBmdW5jdGlvbigpIHsKICAgIHZhciBzdGF0ZSA9IGdldEludGVybmFsU3RhdGUkMyh0aGlzKTsKICAgIHZhciB0YXJnZXQgPSBzdGF0ZS50YXJnZXQ7CiAgICB2YXIga2luZCA9IHN0YXRlLmtpbmQ7CiAgICB2YXIgaW5kZXggPSBzdGF0ZS5pbmRleCsrOwogICAgaWYgKCF0YXJnZXQgfHwgaW5kZXggPj0gdGFyZ2V0Lmxlbmd0aCkgewogICAgICBzdGF0ZS50YXJnZXQgPSB2b2lkIDA7CiAgICAgIHJldHVybiB7IHZhbHVlOiB2b2lkIDAsIGRvbmU6IHRydWUgfTsKICAgIH0KICAgIGlmIChraW5kID09ICJrZXlzIikKICAgICAgcmV0dXJuIHsgdmFsdWU6IGluZGV4LCBkb25lOiBmYWxzZSB9OwogICAgaWYgKGtpbmQgPT0gInZhbHVlcyIpCiAgICAgIHJldHVybiB7IHZhbHVlOiB0YXJnZXRbaW5kZXhdLCBkb25lOiBmYWxzZSB9OwogICAgcmV0dXJuIHsgdmFsdWU6IFtpbmRleCwgdGFyZ2V0W2luZGV4XV0sIGRvbmU6IGZhbHNlIH07CiAgfSwgInZhbHVlcyIpOwogIEl0ZXJhdG9ycyQzLkFyZ3VtZW50cyA9IEl0ZXJhdG9ycyQzLkFycmF5OwogIHZhciBjbGFzc29mJDcgPSBjbGFzc29mJDk7CiAgdmFyIHRvU3RyaW5nJGEgPSBmdW5jdGlvbihhcmd1bWVudCkgewogICAgaWYgKGNsYXNzb2YkNyhhcmd1bWVudCkgPT09ICJTeW1ib2wiKQogICAgICB0aHJvdyBUeXBlRXJyb3IoIkNhbm5vdCBjb252ZXJ0IGEgU3ltYm9sIHZhbHVlIHRvIGEgc3RyaW5nIik7CiAgICByZXR1cm4gU3RyaW5nKGFyZ3VtZW50KTsKICB9OwogIHZhciB0b0ludGVnZXIgPSB0b0ludGVnZXIkMzsKICB2YXIgdG9TdHJpbmckOSA9IHRvU3RyaW5nJGE7CiAgdmFyIHJlcXVpcmVPYmplY3RDb2VyY2libGUkMiA9IHJlcXVpcmVPYmplY3RDb2VyY2libGUkNTsKICB2YXIgY3JlYXRlTWV0aG9kJDMgPSBmdW5jdGlvbihDT05WRVJUX1RPX1NUUklORykgewogICAgcmV0dXJuIGZ1bmN0aW9uKCR0aGlzLCBwb3MpIHsKICAgICAgdmFyIFMgPSB0b1N0cmluZyQ5KHJlcXVpcmVPYmplY3RDb2VyY2libGUkMigkdGhpcykpOwogICAgICB2YXIgcG9zaXRpb24gPSB0b0ludGVnZXIocG9zKTsKICAgICAgdmFyIHNpemUgPSBTLmxlbmd0aDsKICAgICAgdmFyIGZpcnN0LCBzZWNvbmQ7CiAgICAgIGlmIChwb3NpdGlvbiA8IDAgfHwgcG9zaXRpb24gPj0gc2l6ZSkKICAgICAgICByZXR1cm4gQ09OVkVSVF9UT19TVFJJTkcgPyAiIiA6IHZvaWQgMDsKICAgICAgZmlyc3QgPSBTLmNoYXJDb2RlQXQocG9zaXRpb24pOwogICAgICByZXR1cm4gZmlyc3QgPCA1NTI5NiB8fCBmaXJzdCA+IDU2MzE5IHx8IHBvc2l0aW9uICsgMSA9PT0gc2l6ZSB8fCAoc2Vjb25kID0gUy5jaGFyQ29kZUF0KHBvc2l0aW9uICsgMSkpIDwgNTYzMjAgfHwgc2Vjb25kID4gNTczNDMgPyBDT05WRVJUX1RPX1NUUklORyA/IFMuY2hhckF0KHBvc2l0aW9uKSA6IGZpcnN0IDogQ09OVkVSVF9UT19TVFJJTkcgPyBTLnNsaWNlKHBvc2l0aW9uLCBwb3NpdGlvbiArIDIpIDogKGZpcnN0IC0gNTUyOTYgPDwgMTApICsgKHNlY29uZCAtIDU2MzIwKSArIDY1NTM2OwogICAgfTsKICB9OwogIHZhciBzdHJpbmdNdWx0aWJ5dGUgPSB7CiAgICBjb2RlQXQ6IGNyZWF0ZU1ldGhvZCQzKGZhbHNlKSwKICAgIGNoYXJBdDogY3JlYXRlTWV0aG9kJDModHJ1ZSkKICB9OwogIHZhciBjaGFyQXQgPSBzdHJpbmdNdWx0aWJ5dGUuY2hhckF0OwogIHZhciB0b1N0cmluZyQ4ID0gdG9TdHJpbmckYTsKICB2YXIgSW50ZXJuYWxTdGF0ZU1vZHVsZSQ0ID0gaW50ZXJuYWxTdGF0ZTsKICB2YXIgZGVmaW5lSXRlcmF0b3IgPSBkZWZpbmVJdGVyYXRvciQyOwogIHZhciBTVFJJTkdfSVRFUkFUT1IgPSAiU3RyaW5nIEl0ZXJhdG9yIjsKICB2YXIgc2V0SW50ZXJuYWxTdGF0ZSQ0ID0gSW50ZXJuYWxTdGF0ZU1vZHVsZSQ0LnNldDsKICB2YXIgZ2V0SW50ZXJuYWxTdGF0ZSQyID0gSW50ZXJuYWxTdGF0ZU1vZHVsZSQ0LmdldHRlckZvcihTVFJJTkdfSVRFUkFUT1IpOwogIGRlZmluZUl0ZXJhdG9yKFN0cmluZywgIlN0cmluZyIsIGZ1bmN0aW9uKGl0ZXJhdGVkKSB7CiAgICBzZXRJbnRlcm5hbFN0YXRlJDQodGhpcywgewogICAgICB0eXBlOiBTVFJJTkdfSVRFUkFUT1IsCiAgICAgIHN0cmluZzogdG9TdHJpbmckOChpdGVyYXRlZCksCiAgICAgIGluZGV4OiAwCiAgICB9KTsKICB9LCBmdW5jdGlvbiBuZXh0KCkgewogICAgdmFyIHN0YXRlID0gZ2V0SW50ZXJuYWxTdGF0ZSQyKHRoaXMpOwogICAgdmFyIHN0cmluZyA9IHN0YXRlLnN0cmluZzsKICAgIHZhciBpbmRleCA9IHN0YXRlLmluZGV4OwogICAgdmFyIHBvaW50OwogICAgaWYgKGluZGV4ID49IHN0cmluZy5sZW5ndGgpCiAgICAgIHJldHVybiB7IHZhbHVlOiB2b2lkIDAsIGRvbmU6IHRydWUgfTsKICAgIHBvaW50ID0gY2hhckF0KHN0cmluZywgaW5kZXgpOwogICAgc3RhdGUuaW5kZXggKz0gcG9pbnQubGVuZ3RoOwogICAgcmV0dXJuIHsgdmFsdWU6IHBvaW50LCBkb25lOiBmYWxzZSB9OwogIH0pOwogIHZhciBjbGFzc29mJDYgPSBjbGFzc29mJDk7CiAgdmFyIGdldE1ldGhvZCQxID0gZ2V0TWV0aG9kJDM7CiAgdmFyIEl0ZXJhdG9ycyQyID0gaXRlcmF0b3JzOwogIHZhciB3ZWxsS25vd25TeW1ib2wkZSA9IHdlbGxLbm93blN5bWJvbCRsOwogIHZhciBJVEVSQVRPUiQzID0gd2VsbEtub3duU3ltYm9sJGUoIml0ZXJhdG9yIik7CiAgdmFyIGdldEl0ZXJhdG9yTWV0aG9kJDcgPSBmdW5jdGlvbihpdCkgewogICAgaWYgKGl0ICE9IHZvaWQgMCkKICAgICAgcmV0dXJuIGdldE1ldGhvZCQxKGl0LCBJVEVSQVRPUiQzKSB8fCBnZXRNZXRob2QkMShpdCwgIkBAaXRlcmF0b3IiKSB8fCBJdGVyYXRvcnMkMltjbGFzc29mJDYoaXQpXTsKICB9OwogIHZhciBhQ2FsbGFibGUkOSA9IGFDYWxsYWJsZSRjOwogIHZhciBhbk9iamVjdCRkID0gYW5PYmplY3QkaTsKICB2YXIgZ2V0SXRlcmF0b3JNZXRob2QkNiA9IGdldEl0ZXJhdG9yTWV0aG9kJDc7CiAgdmFyIGdldEl0ZXJhdG9yJDYgPSBmdW5jdGlvbihhcmd1bWVudCwgdXNpbmdJdGVyYXRvcikgewogICAgdmFyIGl0ZXJhdG9yTWV0aG9kID0gYXJndW1lbnRzLmxlbmd0aCA8IDIgPyBnZXRJdGVyYXRvck1ldGhvZCQ2KGFyZ3VtZW50KSA6IHVzaW5nSXRlcmF0b3I7CiAgICBpZiAoYUNhbGxhYmxlJDkoaXRlcmF0b3JNZXRob2QpKQogICAgICByZXR1cm4gYW5PYmplY3QkZChpdGVyYXRvck1ldGhvZC5jYWxsKGFyZ3VtZW50KSk7CiAgICB0aHJvdyBUeXBlRXJyb3IoU3RyaW5nKGFyZ3VtZW50KSArICIgaXMgbm90IGl0ZXJhYmxlIik7CiAgfTsKICB2YXIgZ2V0SXRlcmF0b3IkNSA9IGdldEl0ZXJhdG9yJDY7CiAgdmFyIGdldEl0ZXJhdG9yXzEgPSBnZXRJdGVyYXRvciQ1OwogIHZhciBkb21JdGVyYWJsZXMgPSB7CiAgICBDU1NSdWxlTGlzdDogMCwKICAgIENTU1N0eWxlRGVjbGFyYXRpb246IDAsCiAgICBDU1NWYWx1ZUxpc3Q6IDAsCiAgICBDbGllbnRSZWN0TGlzdDogMCwKICAgIERPTVJlY3RMaXN0OiAwLAogICAgRE9NU3RyaW5nTGlzdDogMCwKICAgIERPTVRva2VuTGlzdDogMSwKICAgIERhdGFUcmFuc2Zlckl0ZW1MaXN0OiAwLAogICAgRmlsZUxpc3Q6IDAsCiAgICBIVE1MQWxsQ29sbGVjdGlvbjogMCwKICAgIEhUTUxDb2xsZWN0aW9uOiAwLAogICAgSFRNTEZvcm1FbGVtZW50OiAwLAogICAgSFRNTFNlbGVjdEVsZW1lbnQ6IDAsCiAgICBNZWRpYUxpc3Q6IDAsCiAgICBNaW1lVHlwZUFycmF5OiAwLAogICAgTmFtZWROb2RlTWFwOiAwLAogICAgTm9kZUxpc3Q6IDEsCiAgICBQYWludFJlcXVlc3RMaXN0OiAwLAogICAgUGx1Z2luOiAwLAogICAgUGx1Z2luQXJyYXk6IDAsCiAgICBTVkdMZW5ndGhMaXN0OiAwLAogICAgU1ZHTnVtYmVyTGlzdDogMCwKICAgIFNWR1BhdGhTZWdMaXN0OiAwLAogICAgU1ZHUG9pbnRMaXN0OiAwLAogICAgU1ZHU3RyaW5nTGlzdDogMCwKICAgIFNWR1RyYW5zZm9ybUxpc3Q6IDAsCiAgICBTb3VyY2VCdWZmZXJMaXN0OiAwLAogICAgU3R5bGVTaGVldExpc3Q6IDAsCiAgICBUZXh0VHJhY2tDdWVMaXN0OiAwLAogICAgVGV4dFRyYWNrTGlzdDogMCwKICAgIFRvdWNoTGlzdDogMAogIH07CiAgdmFyIERPTUl0ZXJhYmxlcyQxID0gZG9tSXRlcmFibGVzOwogIHZhciBnbG9iYWwkZSA9IGdsb2JhbCRvOwogIHZhciBjbGFzc29mJDUgPSBjbGFzc29mJDk7CiAgdmFyIGNyZWF0ZU5vbkVudW1lcmFibGVQcm9wZXJ0eSQyID0gY3JlYXRlTm9uRW51bWVyYWJsZVByb3BlcnR5JDc7CiAgdmFyIEl0ZXJhdG9ycyQxID0gaXRlcmF0b3JzOwogIHZhciB3ZWxsS25vd25TeW1ib2wkZCA9IHdlbGxLbm93blN5bWJvbCRsOwogIHZhciBUT19TVFJJTkdfVEFHID0gd2VsbEtub3duU3ltYm9sJGQoInRvU3RyaW5nVGFnIik7CiAgZm9yICh2YXIgQ09MTEVDVElPTl9OQU1FIGluIERPTUl0ZXJhYmxlcyQxKSB7CiAgICB2YXIgQ29sbGVjdGlvbiA9IGdsb2JhbCRlW0NPTExFQ1RJT05fTkFNRV07CiAgICB2YXIgQ29sbGVjdGlvblByb3RvdHlwZSA9IENvbGxlY3Rpb24gJiYgQ29sbGVjdGlvbi5wcm90b3R5cGU7CiAgICBpZiAoQ29sbGVjdGlvblByb3RvdHlwZSAmJiBjbGFzc29mJDUoQ29sbGVjdGlvblByb3RvdHlwZSkgIT09IFRPX1NUUklOR19UQUcpIHsKICAgICAgY3JlYXRlTm9uRW51bWVyYWJsZVByb3BlcnR5JDIoQ29sbGVjdGlvblByb3RvdHlwZSwgVE9fU1RSSU5HX1RBRywgQ09MTEVDVElPTl9OQU1FKTsKICAgIH0KICAgIEl0ZXJhdG9ycyQxW0NPTExFQ1RJT05fTkFNRV0gPSBJdGVyYXRvcnMkMS5BcnJheTsKICB9CiAgdmFyIHBhcmVudCRQID0gZ2V0SXRlcmF0b3JfMTsKICB2YXIgZ2V0SXRlcmF0b3IkNCA9IHBhcmVudCRQOwogIHZhciBwYXJlbnQkTyA9IGdldEl0ZXJhdG9yJDQ7CiAgdmFyIGdldEl0ZXJhdG9yJDMgPSBwYXJlbnQkTzsKICB2YXIgZ2V0SXRlcmF0b3IkMiA9IGdldEl0ZXJhdG9yJDM7CiAgdmFyIGNsYXNzb2YkNCA9IGNsYXNzb2ZSYXckMTsKICB2YXIgaXNBcnJheSRhID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiBpc0FycmF5Mihhcmd1bWVudCkgewogICAgcmV0dXJuIGNsYXNzb2YkNChhcmd1bWVudCkgPT0gIkFycmF5IjsKICB9OwogIHZhciAkJEQgPSBfZXhwb3J0OwogIHZhciBpc0FycmF5JDkgPSBpc0FycmF5JGE7CiAgJCREKHsgdGFyZ2V0OiAiQXJyYXkiLCBzdGF0OiB0cnVlIH0sIHsKICAgIGlzQXJyYXk6IGlzQXJyYXkkOQogIH0pOwogIHZhciBwYXRoJGogPSBwYXRoJG47CiAgdmFyIGlzQXJyYXkkOCA9IHBhdGgkai5BcnJheS5pc0FycmF5OwogIHZhciBwYXJlbnQkTiA9IGlzQXJyYXkkODsKICB2YXIgaXNBcnJheSQ3ID0gcGFyZW50JE47CiAgdmFyIGlzQXJyYXkkNiA9IGlzQXJyYXkkNzsKICB2YXIgZ2V0SXRlcmF0b3JNZXRob2QkNSA9IGdldEl0ZXJhdG9yTWV0aG9kJDc7CiAgdmFyIGdldEl0ZXJhdG9yTWV0aG9kXzEgPSBnZXRJdGVyYXRvck1ldGhvZCQ1OwogIHZhciBwYXJlbnQkTSA9IGdldEl0ZXJhdG9yTWV0aG9kXzE7CiAgdmFyIGdldEl0ZXJhdG9yTWV0aG9kJDQgPSBwYXJlbnQkTTsKICB2YXIgcGFyZW50JEwgPSBnZXRJdGVyYXRvck1ldGhvZCQ0OwogIHZhciBnZXRJdGVyYXRvck1ldGhvZCQzID0gcGFyZW50JEw7CiAgdmFyIGdldEl0ZXJhdG9yTWV0aG9kJDIgPSBnZXRJdGVyYXRvck1ldGhvZCQzOwogIHZhciB0b1Byb3BlcnR5S2V5JDEgPSB0b1Byb3BlcnR5S2V5JDQ7CiAgdmFyIGRlZmluZVByb3BlcnR5TW9kdWxlJDIgPSBvYmplY3REZWZpbmVQcm9wZXJ0eTsKICB2YXIgY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yJDIgPSBjcmVhdGVQcm9wZXJ0eURlc2NyaXB0b3IkNjsKICB2YXIgY3JlYXRlUHJvcGVydHkkNCA9IGZ1bmN0aW9uKG9iamVjdCwga2V5LCB2YWx1ZSkgewogICAgdmFyIHByb3BlcnR5S2V5ID0gdG9Qcm9wZXJ0eUtleSQxKGtleSk7CiAgICBpZiAocHJvcGVydHlLZXkgaW4gb2JqZWN0KQogICAgICBkZWZpbmVQcm9wZXJ0eU1vZHVsZSQyLmYob2JqZWN0LCBwcm9wZXJ0eUtleSwgY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yJDIoMCwgdmFsdWUpKTsKICAgIGVsc2UKICAgICAgb2JqZWN0W3Byb3BlcnR5S2V5XSA9IHZhbHVlOwogIH07CiAgdmFyIGZhaWxzJGYgPSBmYWlscyRuOwogIHZhciBpc0NhbGxhYmxlJDcgPSBpc0NhbGxhYmxlJGw7CiAgdmFyIGNsYXNzb2YkMyA9IGNsYXNzb2YkOTsKICB2YXIgZ2V0QnVpbHRJbiQ3ID0gZ2V0QnVpbHRJbiRiOwogIHZhciBpbnNwZWN0U291cmNlJDEgPSBpbnNwZWN0U291cmNlJDM7CiAgdmFyIGVtcHR5ID0gW107CiAgdmFyIGNvbnN0cnVjdCQ0ID0gZ2V0QnVpbHRJbiQ3KCJSZWZsZWN0IiwgImNvbnN0cnVjdCIpOwogIHZhciBjb25zdHJ1Y3RvclJlZ0V4cCA9IC9eXHMqKD86Y2xhc3N8ZnVuY3Rpb24pXGIvOwogIHZhciBleGVjID0gY29uc3RydWN0b3JSZWdFeHAuZXhlYzsKICB2YXIgSU5DT1JSRUNUX1RPX1NUUklORyA9ICFjb25zdHJ1Y3RvclJlZ0V4cC5leGVjKGZ1bmN0aW9uKCkgewogIH0pOwogIHZhciBpc0NvbnN0cnVjdG9yTW9kZXJuID0gZnVuY3Rpb24oYXJndW1lbnQpIHsKICAgIGlmICghaXNDYWxsYWJsZSQ3KGFyZ3VtZW50KSkKICAgICAgcmV0dXJuIGZhbHNlOwogICAgdHJ5IHsKICAgICAgY29uc3RydWN0JDQoT2JqZWN0LCBlbXB0eSwgYXJndW1lbnQpOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9OwogIHZhciBpc0NvbnN0cnVjdG9yTGVnYWN5ID0gZnVuY3Rpb24oYXJndW1lbnQpIHsKICAgIGlmICghaXNDYWxsYWJsZSQ3KGFyZ3VtZW50KSkKICAgICAgcmV0dXJuIGZhbHNlOwogICAgc3dpdGNoIChjbGFzc29mJDMoYXJndW1lbnQpKSB7CiAgICAgIGNhc2UgIkFzeW5jRnVuY3Rpb24iOgogICAgICBjYXNlICJHZW5lcmF0b3JGdW5jdGlvbiI6CiAgICAgIGNhc2UgIkFzeW5jR2VuZXJhdG9yRnVuY3Rpb24iOgogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIHJldHVybiBJTkNPUlJFQ1RfVE9fU1RSSU5HIHx8ICEhZXhlYy5jYWxsKGNvbnN0cnVjdG9yUmVnRXhwLCBpbnNwZWN0U291cmNlJDEoYXJndW1lbnQpKTsKICB9OwogIHZhciBpc0NvbnN0cnVjdG9yJDQgPSAhY29uc3RydWN0JDQgfHwgZmFpbHMkZihmdW5jdGlvbigpIHsKICAgIHZhciBjYWxsZWQyOwogICAgcmV0dXJuIGlzQ29uc3RydWN0b3JNb2Rlcm4oaXNDb25zdHJ1Y3Rvck1vZGVybi5jYWxsKSB8fCAhaXNDb25zdHJ1Y3Rvck1vZGVybihPYmplY3QpIHx8ICFpc0NvbnN0cnVjdG9yTW9kZXJuKGZ1bmN0aW9uKCkgewogICAgICBjYWxsZWQyID0gdHJ1ZTsKICAgIH0pIHx8IGNhbGxlZDI7CiAgfSkgPyBpc0NvbnN0cnVjdG9yTGVnYWN5IDogaXNDb25zdHJ1Y3Rvck1vZGVybjsKICB2YXIgaXNBcnJheSQ1ID0gaXNBcnJheSRhOwogIHZhciBpc0NvbnN0cnVjdG9yJDMgPSBpc0NvbnN0cnVjdG9yJDQ7CiAgdmFyIGlzT2JqZWN0JGMgPSBpc09iamVjdCRpOwogIHZhciB3ZWxsS25vd25TeW1ib2wkYyA9IHdlbGxLbm93blN5bWJvbCRsOwogIHZhciBTUEVDSUVTJDUgPSB3ZWxsS25vd25TeW1ib2wkYygic3BlY2llcyIpOwogIHZhciBhcnJheVNwZWNpZXNDb25zdHJ1Y3RvciQxID0gZnVuY3Rpb24ob3JpZ2luYWxBcnJheSkgewogICAgdmFyIEM7CiAgICBpZiAoaXNBcnJheSQ1KG9yaWdpbmFsQXJyYXkpKSB7CiAgICAgIEMgPSBvcmlnaW5hbEFycmF5LmNvbnN0cnVjdG9yOwogICAgICBpZiAoaXNDb25zdHJ1Y3RvciQzKEMpICYmIChDID09PSBBcnJheSB8fCBpc0FycmF5JDUoQy5wcm90b3R5cGUpKSkKICAgICAgICBDID0gdm9pZCAwOwogICAgICBlbHNlIGlmIChpc09iamVjdCRjKEMpKSB7CiAgICAgICAgQyA9IENbU1BFQ0lFUyQ1XTsKICAgICAgICBpZiAoQyA9PT0gbnVsbCkKICAgICAgICAgIEMgPSB2b2lkIDA7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBDID09PSB2b2lkIDAgPyBBcnJheSA6IEM7CiAgfTsKICB2YXIgYXJyYXlTcGVjaWVzQ29uc3RydWN0b3IgPSBhcnJheVNwZWNpZXNDb25zdHJ1Y3RvciQxOwogIHZhciBhcnJheVNwZWNpZXNDcmVhdGUkMiA9IGZ1bmN0aW9uKG9yaWdpbmFsQXJyYXksIGxlbmd0aCkgewogICAgcmV0dXJuIG5ldyAoYXJyYXlTcGVjaWVzQ29uc3RydWN0b3Iob3JpZ2luYWxBcnJheSkpKGxlbmd0aCA9PT0gMCA/IDAgOiBsZW5ndGgpOwogIH07CiAgdmFyIGZhaWxzJGUgPSBmYWlscyRuOwogIHZhciB3ZWxsS25vd25TeW1ib2wkYiA9IHdlbGxLbm93blN5bWJvbCRsOwogIHZhciBWOF9WRVJTSU9OJDIgPSBlbmdpbmVWOFZlcnNpb247CiAgdmFyIFNQRUNJRVMkNCA9IHdlbGxLbm93blN5bWJvbCRiKCJzcGVjaWVzIik7CiAgdmFyIGFycmF5TWV0aG9kSGFzU3BlY2llc1N1cHBvcnQkNCA9IGZ1bmN0aW9uKE1FVEhPRF9OQU1FKSB7CiAgICByZXR1cm4gVjhfVkVSU0lPTiQyID49IDUxIHx8ICFmYWlscyRlKGZ1bmN0aW9uKCkgewogICAgICB2YXIgYXJyYXkgPSBbXTsKICAgICAgdmFyIGNvbnN0cnVjdG9yID0gYXJyYXkuY29uc3RydWN0b3IgPSB7fTsKICAgICAgY29uc3RydWN0b3JbU1BFQ0lFUyQ0XSA9IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiB7IGZvbzogMSB9OwogICAgICB9OwogICAgICByZXR1cm4gYXJyYXlbTUVUSE9EX05BTUVdKEJvb2xlYW4pLmZvbyAhPT0gMTsKICAgIH0pOwogIH07CiAgdmFyICQkQyA9IF9leHBvcnQ7CiAgdmFyIGZhaWxzJGQgPSBmYWlscyRuOwogIHZhciBpc0FycmF5JDQgPSBpc0FycmF5JGE7CiAgdmFyIGlzT2JqZWN0JGIgPSBpc09iamVjdCRpOwogIHZhciB0b09iamVjdCQ4ID0gdG9PYmplY3QkYjsKICB2YXIgdG9MZW5ndGgkNyA9IHRvTGVuZ3RoJDk7CiAgdmFyIGNyZWF0ZVByb3BlcnR5JDMgPSBjcmVhdGVQcm9wZXJ0eSQ0OwogIHZhciBhcnJheVNwZWNpZXNDcmVhdGUkMSA9IGFycmF5U3BlY2llc0NyZWF0ZSQyOwogIHZhciBhcnJheU1ldGhvZEhhc1NwZWNpZXNTdXBwb3J0JDMgPSBhcnJheU1ldGhvZEhhc1NwZWNpZXNTdXBwb3J0JDQ7CiAgdmFyIHdlbGxLbm93blN5bWJvbCRhID0gd2VsbEtub3duU3ltYm9sJGw7CiAgdmFyIFY4X1ZFUlNJT04kMSA9IGVuZ2luZVY4VmVyc2lvbjsKICB2YXIgSVNfQ09OQ0FUX1NQUkVBREFCTEUgPSB3ZWxsS25vd25TeW1ib2wkYSgiaXNDb25jYXRTcHJlYWRhYmxlIik7CiAgdmFyIE1BWF9TQUZFX0lOVEVHRVIgPSA5MDA3MTk5MjU0NzQwOTkxOwogIHZhciBNQVhJTVVNX0FMTE9XRURfSU5ERVhfRVhDRUVERUQgPSAiTWF4aW11bSBhbGxvd2VkIGluZGV4IGV4Y2VlZGVkIjsKICB2YXIgSVNfQ09OQ0FUX1NQUkVBREFCTEVfU1VQUE9SVCA9IFY4X1ZFUlNJT04kMSA+PSA1MSB8fCAhZmFpbHMkZChmdW5jdGlvbigpIHsKICAgIHZhciBhcnJheSA9IFtdOwogICAgYXJyYXlbSVNfQ09OQ0FUX1NQUkVBREFCTEVdID0gZmFsc2U7CiAgICByZXR1cm4gYXJyYXkuY29uY2F0KClbMF0gIT09IGFycmF5OwogIH0pOwogIHZhciBTUEVDSUVTX1NVUFBPUlQgPSBhcnJheU1ldGhvZEhhc1NwZWNpZXNTdXBwb3J0JDMoImNvbmNhdCIpOwogIHZhciBpc0NvbmNhdFNwcmVhZGFibGUgPSBmdW5jdGlvbihPKSB7CiAgICBpZiAoIWlzT2JqZWN0JGIoTykpCiAgICAgIHJldHVybiBmYWxzZTsKICAgIHZhciBzcHJlYWRhYmxlID0gT1tJU19DT05DQVRfU1BSRUFEQUJMRV07CiAgICByZXR1cm4gc3ByZWFkYWJsZSAhPT0gdm9pZCAwID8gISFzcHJlYWRhYmxlIDogaXNBcnJheSQ0KE8pOwogIH07CiAgdmFyIEZPUkNFRCQ1ID0gIUlTX0NPTkNBVF9TUFJFQURBQkxFX1NVUFBPUlQgfHwgIVNQRUNJRVNfU1VQUE9SVDsKICAkJEMoeyB0YXJnZXQ6ICJBcnJheSIsIHByb3RvOiB0cnVlLCBmb3JjZWQ6IEZPUkNFRCQ1IH0sIHsKICAgIGNvbmNhdDogZnVuY3Rpb24gY29uY2F0MihhcmcpIHsKICAgICAgdmFyIE8gPSB0b09iamVjdCQ4KHRoaXMpOwogICAgICB2YXIgQSA9IGFycmF5U3BlY2llc0NyZWF0ZSQxKE8sIDApOwogICAgICB2YXIgbiA9IDA7CiAgICAgIHZhciBpMiwgaywgbGVuZ3RoLCBsZW4yLCBFOwogICAgICBmb3IgKGkyID0gLTEsIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkyIDwgbGVuZ3RoOyBpMisrKSB7CiAgICAgICAgRSA9IGkyID09PSAtMSA/IE8gOiBhcmd1bWVudHNbaTJdOwogICAgICAgIGlmIChpc0NvbmNhdFNwcmVhZGFibGUoRSkpIHsKICAgICAgICAgIGxlbjIgPSB0b0xlbmd0aCQ3KEUubGVuZ3RoKTsKICAgICAgICAgIGlmIChuICsgbGVuMiA+IE1BWF9TQUZFX0lOVEVHRVIpCiAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihNQVhJTVVNX0FMTE9XRURfSU5ERVhfRVhDRUVERUQpOwogICAgICAgICAgZm9yIChrID0gMDsgayA8IGxlbjI7IGsrKywgbisrKQogICAgICAgICAgICBpZiAoayBpbiBFKQogICAgICAgICAgICAgIGNyZWF0ZVByb3BlcnR5JDMoQSwgbiwgRVtrXSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChuID49IE1BWF9TQUZFX0lOVEVHRVIpCiAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihNQVhJTVVNX0FMTE9XRURfSU5ERVhfRVhDRUVERUQpOwogICAgICAgICAgY3JlYXRlUHJvcGVydHkkMyhBLCBuKyssIEUpOwogICAgICAgIH0KICAgICAgfQogICAgICBBLmxlbmd0aCA9IG47CiAgICAgIHJldHVybiBBOwogICAgfQogIH0pOwogIHZhciBvYmplY3RHZXRPd25Qcm9wZXJ0eU5hbWVzID0ge307CiAgdmFyIGludGVybmFsT2JqZWN0S2V5cyA9IG9iamVjdEtleXNJbnRlcm5hbDsKICB2YXIgZW51bUJ1Z0tleXMgPSBlbnVtQnVnS2V5cyQzOwogIHZhciBoaWRkZW5LZXlzJDIgPSBlbnVtQnVnS2V5cy5jb25jYXQoImxlbmd0aCIsICJwcm90b3R5cGUiKTsKICBvYmplY3RHZXRPd25Qcm9wZXJ0eU5hbWVzLmYgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyB8fCBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eU5hbWVzKE8pIHsKICAgIHJldHVybiBpbnRlcm5hbE9iamVjdEtleXMoTywgaGlkZGVuS2V5cyQyKTsKICB9OwogIHZhciBvYmplY3RHZXRPd25Qcm9wZXJ0eU5hbWVzRXh0ZXJuYWwgPSB7fTsKICB2YXIgdG9JbmRleGVkT2JqZWN0JDQgPSB0b0luZGV4ZWRPYmplY3QkOTsKICB2YXIgJGdldE93blByb3BlcnR5TmFtZXMkMSA9IG9iamVjdEdldE93blByb3BlcnR5TmFtZXMuZjsKICB2YXIgdG9TdHJpbmckNyA9IHt9LnRvU3RyaW5nOwogIHZhciB3aW5kb3dOYW1lcyA9IHR5cGVvZiB3aW5kb3cgPT0gIm9iamVjdCIgJiYgd2luZG93ICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzID8gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMod2luZG93KSA6IFtdOwogIHZhciBnZXRXaW5kb3dOYW1lcyA9IGZ1bmN0aW9uKGl0KSB7CiAgICB0cnkgewogICAgICByZXR1cm4gJGdldE93blByb3BlcnR5TmFtZXMkMShpdCk7CiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICByZXR1cm4gd2luZG93TmFtZXMuc2xpY2UoKTsKICAgIH0KICB9OwogIG9iamVjdEdldE93blByb3BlcnR5TmFtZXNFeHRlcm5hbC5mID0gZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlOYW1lcyhpdCkgewogICAgcmV0dXJuIHdpbmRvd05hbWVzICYmIHRvU3RyaW5nJDcuY2FsbChpdCkgPT0gIltvYmplY3QgV2luZG93XSIgPyBnZXRXaW5kb3dOYW1lcyhpdCkgOiAkZ2V0T3duUHJvcGVydHlOYW1lcyQxKHRvSW5kZXhlZE9iamVjdCQ0KGl0KSk7CiAgfTsKICB2YXIgb2JqZWN0R2V0T3duUHJvcGVydHlTeW1ib2xzID0ge307CiAgb2JqZWN0R2V0T3duUHJvcGVydHlTeW1ib2xzLmYgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzOwogIHZhciB3ZWxsS25vd25TeW1ib2xXcmFwcGVkID0ge307CiAgdmFyIHdlbGxLbm93blN5bWJvbCQ5ID0gd2VsbEtub3duU3ltYm9sJGw7CiAgd2VsbEtub3duU3ltYm9sV3JhcHBlZC5mID0gd2VsbEtub3duU3ltYm9sJDk7CiAgdmFyIHBhdGgkaSA9IHBhdGgkbjsKICB2YXIgaGFzJDMgPSBoYXMkYzsKICB2YXIgd3JhcHBlZFdlbGxLbm93blN5bWJvbE1vZHVsZSQxID0gd2VsbEtub3duU3ltYm9sV3JhcHBlZDsKICB2YXIgZGVmaW5lUHJvcGVydHkkNyA9IG9iamVjdERlZmluZVByb3BlcnR5LmY7CiAgdmFyIGRlZmluZVdlbGxLbm93blN5bWJvbCRsID0gZnVuY3Rpb24oTkFNRTIpIHsKICAgIHZhciBTeW1ib2wyID0gcGF0aCRpLlN5bWJvbCB8fCAocGF0aCRpLlN5bWJvbCA9IHt9KTsKICAgIGlmICghaGFzJDMoU3ltYm9sMiwgTkFNRTIpKQogICAgICBkZWZpbmVQcm9wZXJ0eSQ3KFN5bWJvbDIsIE5BTUUyLCB7CiAgICAgICAgdmFsdWU6IHdyYXBwZWRXZWxsS25vd25TeW1ib2xNb2R1bGUkMS5mKE5BTUUyKQogICAgICB9KTsKICB9OwogIHZhciBiaW5kJGIgPSBmdW5jdGlvbkJpbmRDb250ZXh0OwogIHZhciBJbmRleGVkT2JqZWN0JDIgPSBpbmRleGVkT2JqZWN0OwogIHZhciB0b09iamVjdCQ3ID0gdG9PYmplY3QkYjsKICB2YXIgdG9MZW5ndGgkNiA9IHRvTGVuZ3RoJDk7CiAgdmFyIGFycmF5U3BlY2llc0NyZWF0ZSA9IGFycmF5U3BlY2llc0NyZWF0ZSQyOwogIHZhciBwdXNoID0gW10ucHVzaDsKICB2YXIgY3JlYXRlTWV0aG9kJDIgPSBmdW5jdGlvbihUWVBFMikgewogICAgdmFyIElTX01BUCA9IFRZUEUyID09IDE7CiAgICB2YXIgSVNfRklMVEVSID0gVFlQRTIgPT0gMjsKICAgIHZhciBJU19TT01FID0gVFlQRTIgPT0gMzsKICAgIHZhciBJU19FVkVSWSA9IFRZUEUyID09IDQ7CiAgICB2YXIgSVNfRklORF9JTkRFWCA9IFRZUEUyID09IDY7CiAgICB2YXIgSVNfRklMVEVSX1JFSkVDVCA9IFRZUEUyID09IDc7CiAgICB2YXIgTk9fSE9MRVMgPSBUWVBFMiA9PSA1IHx8IElTX0ZJTkRfSU5ERVg7CiAgICByZXR1cm4gZnVuY3Rpb24oJHRoaXMsIGNhbGxiYWNrZm4sIHRoYXQsIHNwZWNpZmljQ3JlYXRlKSB7CiAgICAgIHZhciBPID0gdG9PYmplY3QkNygkdGhpcyk7CiAgICAgIHZhciBzZWxmMiA9IEluZGV4ZWRPYmplY3QkMihPKTsKICAgICAgdmFyIGJvdW5kRnVuY3Rpb24gPSBiaW5kJGIoY2FsbGJhY2tmbiwgdGhhdCwgMyk7CiAgICAgIHZhciBsZW5ndGggPSB0b0xlbmd0aCQ2KHNlbGYyLmxlbmd0aCk7CiAgICAgIHZhciBpbmRleCA9IDA7CiAgICAgIHZhciBjcmVhdGUyID0gc3BlY2lmaWNDcmVhdGUgfHwgYXJyYXlTcGVjaWVzQ3JlYXRlOwogICAgICB2YXIgdGFyZ2V0ID0gSVNfTUFQID8gY3JlYXRlMigkdGhpcywgbGVuZ3RoKSA6IElTX0ZJTFRFUiB8fCBJU19GSUxURVJfUkVKRUNUID8gY3JlYXRlMigkdGhpcywgMCkgOiB2b2lkIDA7CiAgICAgIHZhciB2YWx1ZSwgcmVzdWx0OwogICAgICBmb3IgKDsgbGVuZ3RoID4gaW5kZXg7IGluZGV4KyspCiAgICAgICAgaWYgKE5PX0hPTEVTIHx8IGluZGV4IGluIHNlbGYyKSB7CiAgICAgICAgICB2YWx1ZSA9IHNlbGYyW2luZGV4XTsKICAgICAgICAgIHJlc3VsdCA9IGJvdW5kRnVuY3Rpb24odmFsdWUsIGluZGV4LCBPKTsKICAgICAgICAgIGlmIChUWVBFMikgewogICAgICAgICAgICBpZiAoSVNfTUFQKQogICAgICAgICAgICAgIHRhcmdldFtpbmRleF0gPSByZXN1bHQ7CiAgICAgICAgICAgIGVsc2UgaWYgKHJlc3VsdCkKICAgICAgICAgICAgICBzd2l0Y2ggKFRZUEUyKSB7CiAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgIHJldHVybiBpbmRleDsKICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgcHVzaC5jYWxsKHRhcmdldCwgdmFsdWUpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgIHN3aXRjaCAoVFlQRTIpIHsKICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICBwdXNoLmNhbGwodGFyZ2V0LCB2YWx1ZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgcmV0dXJuIElTX0ZJTkRfSU5ERVggPyAtMSA6IElTX1NPTUUgfHwgSVNfRVZFUlkgPyBJU19FVkVSWSA6IHRhcmdldDsKICAgIH07CiAgfTsKICB2YXIgYXJyYXlJdGVyYXRpb24gPSB7CiAgICBmb3JFYWNoOiBjcmVhdGVNZXRob2QkMigwKSwKICAgIG1hcDogY3JlYXRlTWV0aG9kJDIoMSksCiAgICBmaWx0ZXI6IGNyZWF0ZU1ldGhvZCQyKDIpLAogICAgc29tZTogY3JlYXRlTWV0aG9kJDIoMyksCiAgICBldmVyeTogY3JlYXRlTWV0aG9kJDIoNCksCiAgICBmaW5kOiBjcmVhdGVNZXRob2QkMig1KSwKICAgIGZpbmRJbmRleDogY3JlYXRlTWV0aG9kJDIoNiksCiAgICBmaWx0ZXJSZWplY3Q6IGNyZWF0ZU1ldGhvZCQyKDcpCiAgfTsKICB2YXIgJCRCID0gX2V4cG9ydDsKICB2YXIgZ2xvYmFsJGQgPSBnbG9iYWwkbzsKICB2YXIgZ2V0QnVpbHRJbiQ2ID0gZ2V0QnVpbHRJbiRiOwogIHZhciBERVNDUklQVE9SUyQ3ID0gZGVzY3JpcHRvcnM7CiAgdmFyIE5BVElWRV9TWU1CT0wgPSBuYXRpdmVTeW1ib2w7CiAgdmFyIGZhaWxzJGMgPSBmYWlscyRuOwogIHZhciBoYXMkMiA9IGhhcyRjOwogIHZhciBpc0FycmF5JDMgPSBpc0FycmF5JGE7CiAgdmFyIGlzQ2FsbGFibGUkNiA9IGlzQ2FsbGFibGUkbDsKICB2YXIgaXNPYmplY3QkYSA9IGlzT2JqZWN0JGk7CiAgdmFyIGlzU3ltYm9sID0gaXNTeW1ib2wkMzsKICB2YXIgYW5PYmplY3QkYyA9IGFuT2JqZWN0JGk7CiAgdmFyIHRvT2JqZWN0JDYgPSB0b09iamVjdCRiOwogIHZhciB0b0luZGV4ZWRPYmplY3QkMyA9IHRvSW5kZXhlZE9iamVjdCQ5OwogIHZhciB0b1Byb3BlcnR5S2V5ID0gdG9Qcm9wZXJ0eUtleSQ0OwogIHZhciAkdG9TdHJpbmcgPSB0b1N0cmluZyRhOwogIHZhciBjcmVhdGVQcm9wZXJ0eURlc2NyaXB0b3IkMSA9IGNyZWF0ZVByb3BlcnR5RGVzY3JpcHRvciQ2OwogIHZhciBuYXRpdmVPYmplY3RDcmVhdGUgPSBvYmplY3RDcmVhdGU7CiAgdmFyIG9iamVjdEtleXMkMSA9IG9iamVjdEtleXMkMzsKICB2YXIgZ2V0T3duUHJvcGVydHlOYW1lc01vZHVsZSQyID0gb2JqZWN0R2V0T3duUHJvcGVydHlOYW1lczsKICB2YXIgZ2V0T3duUHJvcGVydHlOYW1lc0V4dGVybmFsID0gb2JqZWN0R2V0T3duUHJvcGVydHlOYW1lc0V4dGVybmFsOwogIHZhciBnZXRPd25Qcm9wZXJ0eVN5bWJvbHNNb2R1bGUkMiA9IG9iamVjdEdldE93blByb3BlcnR5U3ltYm9sczsKICB2YXIgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yTW9kdWxlJDEgPSBvYmplY3RHZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7CiAgdmFyIGRlZmluZVByb3BlcnR5TW9kdWxlJDEgPSBvYmplY3REZWZpbmVQcm9wZXJ0eTsKICB2YXIgcHJvcGVydHlJc0VudW1lcmFibGVNb2R1bGUkMSA9IG9iamVjdFByb3BlcnR5SXNFbnVtZXJhYmxlOwogIHZhciByZWRlZmluZSQxID0gcmVkZWZpbmUkNDsKICB2YXIgc2hhcmVkID0gc2hhcmVkJDQuZXhwb3J0czsKICB2YXIgc2hhcmVkS2V5ID0gc2hhcmVkS2V5JDQ7CiAgdmFyIGhpZGRlbktleXMkMSA9IGhpZGRlbktleXMkNjsKICB2YXIgdWlkJDEgPSB1aWQkNDsKICB2YXIgd2VsbEtub3duU3ltYm9sJDggPSB3ZWxsS25vd25TeW1ib2wkbDsKICB2YXIgd3JhcHBlZFdlbGxLbm93blN5bWJvbE1vZHVsZSA9IHdlbGxLbm93blN5bWJvbFdyYXBwZWQ7CiAgdmFyIGRlZmluZVdlbGxLbm93blN5bWJvbCRrID0gZGVmaW5lV2VsbEtub3duU3ltYm9sJGw7CiAgdmFyIHNldFRvU3RyaW5nVGFnJDMgPSBzZXRUb1N0cmluZ1RhZyQ2OwogIHZhciBJbnRlcm5hbFN0YXRlTW9kdWxlJDMgPSBpbnRlcm5hbFN0YXRlOwogIHZhciAkZm9yRWFjaCQxID0gYXJyYXlJdGVyYXRpb24uZm9yRWFjaDsKICB2YXIgSElEREVOID0gc2hhcmVkS2V5KCJoaWRkZW4iKTsKICB2YXIgU1lNQk9MID0gIlN5bWJvbCI7CiAgdmFyIFBST1RPVFlQRSA9ICJwcm90b3R5cGUiOwogIHZhciBUT19QUklNSVRJVkUgPSB3ZWxsS25vd25TeW1ib2wkOCgidG9QcmltaXRpdmUiKTsKICB2YXIgc2V0SW50ZXJuYWxTdGF0ZSQzID0gSW50ZXJuYWxTdGF0ZU1vZHVsZSQzLnNldDsKICB2YXIgZ2V0SW50ZXJuYWxTdGF0ZSQxID0gSW50ZXJuYWxTdGF0ZU1vZHVsZSQzLmdldHRlckZvcihTWU1CT0wpOwogIHZhciBPYmplY3RQcm90b3R5cGUgPSBPYmplY3RbUFJPVE9UWVBFXTsKICB2YXIgJFN5bWJvbCA9IGdsb2JhbCRkLlN5bWJvbDsKICB2YXIgJHN0cmluZ2lmeSA9IGdldEJ1aWx0SW4kNigiSlNPTiIsICJzdHJpbmdpZnkiKTsKICB2YXIgbmF0aXZlR2V0T3duUHJvcGVydHlEZXNjcmlwdG9yJDEgPSBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JNb2R1bGUkMS5mOwogIHZhciBuYXRpdmVEZWZpbmVQcm9wZXJ0eSA9IGRlZmluZVByb3BlcnR5TW9kdWxlJDEuZjsKICB2YXIgbmF0aXZlR2V0T3duUHJvcGVydHlOYW1lcyA9IGdldE93blByb3BlcnR5TmFtZXNFeHRlcm5hbC5mOwogIHZhciBuYXRpdmVQcm9wZXJ0eUlzRW51bWVyYWJsZSA9IHByb3BlcnR5SXNFbnVtZXJhYmxlTW9kdWxlJDEuZjsKICB2YXIgQWxsU3ltYm9scyA9IHNoYXJlZCgic3ltYm9scyIpOwogIHZhciBPYmplY3RQcm90b3R5cGVTeW1ib2xzID0gc2hhcmVkKCJvcC1zeW1ib2xzIik7CiAgdmFyIFN0cmluZ1RvU3ltYm9sUmVnaXN0cnkgPSBzaGFyZWQoInN0cmluZy10by1zeW1ib2wtcmVnaXN0cnkiKTsKICB2YXIgU3ltYm9sVG9TdHJpbmdSZWdpc3RyeSA9IHNoYXJlZCgic3ltYm9sLXRvLXN0cmluZy1yZWdpc3RyeSIpOwogIHZhciBXZWxsS25vd25TeW1ib2xzU3RvcmUgPSBzaGFyZWQoIndrcyIpOwogIHZhciBRT2JqZWN0ID0gZ2xvYmFsJGQuUU9iamVjdDsKICB2YXIgVVNFX1NFVFRFUiA9ICFRT2JqZWN0IHx8ICFRT2JqZWN0W1BST1RPVFlQRV0gfHwgIVFPYmplY3RbUFJPVE9UWVBFXS5maW5kQ2hpbGQ7CiAgdmFyIHNldFN5bWJvbERlc2NyaXB0b3IgPSBERVNDUklQVE9SUyQ3ICYmIGZhaWxzJGMoZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gbmF0aXZlT2JqZWN0Q3JlYXRlKG5hdGl2ZURlZmluZVByb3BlcnR5KHt9LCAiYSIsIHsKICAgICAgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gbmF0aXZlRGVmaW5lUHJvcGVydHkodGhpcywgImEiLCB7IHZhbHVlOiA3IH0pLmE7CiAgICAgIH0KICAgIH0pKS5hICE9IDc7CiAgfSkgPyBmdW5jdGlvbihPLCBQLCBBdHRyaWJ1dGVzKSB7CiAgICB2YXIgT2JqZWN0UHJvdG90eXBlRGVzY3JpcHRvciA9IG5hdGl2ZUdldE93blByb3BlcnR5RGVzY3JpcHRvciQxKE9iamVjdFByb3RvdHlwZSwgUCk7CiAgICBpZiAoT2JqZWN0UHJvdG90eXBlRGVzY3JpcHRvcikKICAgICAgZGVsZXRlIE9iamVjdFByb3RvdHlwZVtQXTsKICAgIG5hdGl2ZURlZmluZVByb3BlcnR5KE8sIFAsIEF0dHJpYnV0ZXMpOwogICAgaWYgKE9iamVjdFByb3RvdHlwZURlc2NyaXB0b3IgJiYgTyAhPT0gT2JqZWN0UHJvdG90eXBlKSB7CiAgICAgIG5hdGl2ZURlZmluZVByb3BlcnR5KE9iamVjdFByb3RvdHlwZSwgUCwgT2JqZWN0UHJvdG90eXBlRGVzY3JpcHRvcik7CiAgICB9CiAgfSA6IG5hdGl2ZURlZmluZVByb3BlcnR5OwogIHZhciB3cmFwJDEgPSBmdW5jdGlvbih0YWcsIGRlc2NyaXB0aW9uKSB7CiAgICB2YXIgc3ltYm9sMiA9IEFsbFN5bWJvbHNbdGFnXSA9IG5hdGl2ZU9iamVjdENyZWF0ZSgkU3ltYm9sW1BST1RPVFlQRV0pOwogICAgc2V0SW50ZXJuYWxTdGF0ZSQzKHN5bWJvbDIsIHsKICAgICAgdHlwZTogU1lNQk9MLAogICAgICB0YWcsCiAgICAgIGRlc2NyaXB0aW9uCiAgICB9KTsKICAgIGlmICghREVTQ1JJUFRPUlMkNykKICAgICAgc3ltYm9sMi5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uOwogICAgcmV0dXJuIHN5bWJvbDI7CiAgfTsKICB2YXIgJGRlZmluZVByb3BlcnR5ID0gZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkyKE8sIFAsIEF0dHJpYnV0ZXMpIHsKICAgIGlmIChPID09PSBPYmplY3RQcm90b3R5cGUpCiAgICAgICRkZWZpbmVQcm9wZXJ0eShPYmplY3RQcm90b3R5cGVTeW1ib2xzLCBQLCBBdHRyaWJ1dGVzKTsKICAgIGFuT2JqZWN0JGMoTyk7CiAgICB2YXIga2V5ID0gdG9Qcm9wZXJ0eUtleShQKTsKICAgIGFuT2JqZWN0JGMoQXR0cmlidXRlcyk7CiAgICBpZiAoaGFzJDIoQWxsU3ltYm9scywga2V5KSkgewogICAgICBpZiAoIUF0dHJpYnV0ZXMuZW51bWVyYWJsZSkgewogICAgICAgIGlmICghaGFzJDIoTywgSElEREVOKSkKICAgICAgICAgIG5hdGl2ZURlZmluZVByb3BlcnR5KE8sIEhJRERFTiwgY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yJDEoMSwge30pKTsKICAgICAgICBPW0hJRERFTl1ba2V5XSA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKGhhcyQyKE8sIEhJRERFTikgJiYgT1tISURERU5dW2tleV0pCiAgICAgICAgICBPW0hJRERFTl1ba2V5XSA9IGZhbHNlOwogICAgICAgIEF0dHJpYnV0ZXMgPSBuYXRpdmVPYmplY3RDcmVhdGUoQXR0cmlidXRlcywgeyBlbnVtZXJhYmxlOiBjcmVhdGVQcm9wZXJ0eURlc2NyaXB0b3IkMSgwLCBmYWxzZSkgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHNldFN5bWJvbERlc2NyaXB0b3IoTywga2V5LCBBdHRyaWJ1dGVzKTsKICAgIH0KICAgIHJldHVybiBuYXRpdmVEZWZpbmVQcm9wZXJ0eShPLCBrZXksIEF0dHJpYnV0ZXMpOwogIH07CiAgdmFyICRkZWZpbmVQcm9wZXJ0aWVzID0gZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllczIoTywgUHJvcGVydGllcykgewogICAgYW5PYmplY3QkYyhPKTsKICAgIHZhciBwcm9wZXJ0aWVzID0gdG9JbmRleGVkT2JqZWN0JDMoUHJvcGVydGllcyk7CiAgICB2YXIga2V5czIgPSBvYmplY3RLZXlzJDEocHJvcGVydGllcykuY29uY2F0KCRnZXRPd25Qcm9wZXJ0eVN5bWJvbHMocHJvcGVydGllcykpOwogICAgJGZvckVhY2gkMShrZXlzMiwgZnVuY3Rpb24oa2V5KSB7CiAgICAgIGlmICghREVTQ1JJUFRPUlMkNyB8fCAkcHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChwcm9wZXJ0aWVzLCBrZXkpKQogICAgICAgICRkZWZpbmVQcm9wZXJ0eShPLCBrZXksIHByb3BlcnRpZXNba2V5XSk7CiAgICB9KTsKICAgIHJldHVybiBPOwogIH07CiAgdmFyICRjcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUyKE8sIFByb3BlcnRpZXMpIHsKICAgIHJldHVybiBQcm9wZXJ0aWVzID09PSB2b2lkIDAgPyBuYXRpdmVPYmplY3RDcmVhdGUoTykgOiAkZGVmaW5lUHJvcGVydGllcyhuYXRpdmVPYmplY3RDcmVhdGUoTyksIFByb3BlcnRpZXMpOwogIH07CiAgdmFyICRwcm9wZXJ0eUlzRW51bWVyYWJsZSA9IGZ1bmN0aW9uIHByb3BlcnR5SXNFbnVtZXJhYmxlKFYpIHsKICAgIHZhciBQID0gdG9Qcm9wZXJ0eUtleShWKTsKICAgIHZhciBlbnVtZXJhYmxlID0gbmF0aXZlUHJvcGVydHlJc0VudW1lcmFibGUuY2FsbCh0aGlzLCBQKTsKICAgIGlmICh0aGlzID09PSBPYmplY3RQcm90b3R5cGUgJiYgaGFzJDIoQWxsU3ltYm9scywgUCkgJiYgIWhhcyQyKE9iamVjdFByb3RvdHlwZVN5bWJvbHMsIFApKQogICAgICByZXR1cm4gZmFsc2U7CiAgICByZXR1cm4gZW51bWVyYWJsZSB8fCAhaGFzJDIodGhpcywgUCkgfHwgIWhhcyQyKEFsbFN5bWJvbHMsIFApIHx8IGhhcyQyKHRoaXMsIEhJRERFTikgJiYgdGhpc1tISURERU5dW1BdID8gZW51bWVyYWJsZSA6IHRydWU7CiAgfTsKICB2YXIgJGdldE93blByb3BlcnR5RGVzY3JpcHRvciA9IGZ1bmN0aW9uIGdldE93blByb3BlcnR5RGVzY3JpcHRvcjIoTywgUCkgewogICAgdmFyIGl0ID0gdG9JbmRleGVkT2JqZWN0JDMoTyk7CiAgICB2YXIga2V5ID0gdG9Qcm9wZXJ0eUtleShQKTsKICAgIGlmIChpdCA9PT0gT2JqZWN0UHJvdG90eXBlICYmIGhhcyQyKEFsbFN5bWJvbHMsIGtleSkgJiYgIWhhcyQyKE9iamVjdFByb3RvdHlwZVN5bWJvbHMsIGtleSkpCiAgICAgIHJldHVybjsKICAgIHZhciBkZXNjcmlwdG9yID0gbmF0aXZlR2V0T3duUHJvcGVydHlEZXNjcmlwdG9yJDEoaXQsIGtleSk7CiAgICBpZiAoZGVzY3JpcHRvciAmJiBoYXMkMihBbGxTeW1ib2xzLCBrZXkpICYmICEoaGFzJDIoaXQsIEhJRERFTikgJiYgaXRbSElEREVOXVtrZXldKSkgewogICAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSB0cnVlOwogICAgfQogICAgcmV0dXJuIGRlc2NyaXB0b3I7CiAgfTsKICB2YXIgJGdldE93blByb3BlcnR5TmFtZXMgPSBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eU5hbWVzKE8pIHsKICAgIHZhciBuYW1lcyA9IG5hdGl2ZUdldE93blByb3BlcnR5TmFtZXModG9JbmRleGVkT2JqZWN0JDMoTykpOwogICAgdmFyIHJlc3VsdCA9IFtdOwogICAgJGZvckVhY2gkMShuYW1lcywgZnVuY3Rpb24oa2V5KSB7CiAgICAgIGlmICghaGFzJDIoQWxsU3ltYm9scywga2V5KSAmJiAhaGFzJDIoaGlkZGVuS2V5cyQxLCBrZXkpKQogICAgICAgIHJlc3VsdC5wdXNoKGtleSk7CiAgICB9KTsKICAgIHJldHVybiByZXN1bHQ7CiAgfTsKICB2YXIgJGdldE93blByb3BlcnR5U3ltYm9scyA9IGZ1bmN0aW9uIGdldE93blByb3BlcnR5U3ltYm9sczIoTykgewogICAgdmFyIElTX09CSkVDVF9QUk9UT1RZUEUgPSBPID09PSBPYmplY3RQcm90b3R5cGU7CiAgICB2YXIgbmFtZXMgPSBuYXRpdmVHZXRPd25Qcm9wZXJ0eU5hbWVzKElTX09CSkVDVF9QUk9UT1RZUEUgPyBPYmplY3RQcm90b3R5cGVTeW1ib2xzIDogdG9JbmRleGVkT2JqZWN0JDMoTykpOwogICAgdmFyIHJlc3VsdCA9IFtdOwogICAgJGZvckVhY2gkMShuYW1lcywgZnVuY3Rpb24oa2V5KSB7CiAgICAgIGlmIChoYXMkMihBbGxTeW1ib2xzLCBrZXkpICYmICghSVNfT0JKRUNUX1BST1RPVFlQRSB8fCBoYXMkMihPYmplY3RQcm90b3R5cGUsIGtleSkpKSB7CiAgICAgICAgcmVzdWx0LnB1c2goQWxsU3ltYm9sc1trZXldKTsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gcmVzdWx0OwogIH07CiAgaWYgKCFOQVRJVkVfU1lNQk9MKSB7CiAgICAkU3ltYm9sID0gZnVuY3Rpb24gU3ltYm9sMigpIHsKICAgICAgaWYgKHRoaXMgaW5zdGFuY2VvZiAkU3ltYm9sKQogICAgICAgIHRocm93IFR5cGVFcnJvcigiU3ltYm9sIGlzIG5vdCBhIGNvbnN0cnVjdG9yIik7CiAgICAgIHZhciBkZXNjcmlwdGlvbiA9ICFhcmd1bWVudHMubGVuZ3RoIHx8IGFyZ3VtZW50c1swXSA9PT0gdm9pZCAwID8gdm9pZCAwIDogJHRvU3RyaW5nKGFyZ3VtZW50c1swXSk7CiAgICAgIHZhciB0YWcgPSB1aWQkMShkZXNjcmlwdGlvbik7CiAgICAgIHZhciBzZXR0ZXIgPSBmdW5jdGlvbih2YWx1ZSkgewogICAgICAgIGlmICh0aGlzID09PSBPYmplY3RQcm90b3R5cGUpCiAgICAgICAgICBzZXR0ZXIuY2FsbChPYmplY3RQcm90b3R5cGVTeW1ib2xzLCB2YWx1ZSk7CiAgICAgICAgaWYgKGhhcyQyKHRoaXMsIEhJRERFTikgJiYgaGFzJDIodGhpc1tISURERU5dLCB0YWcpKQogICAgICAgICAgdGhpc1tISURERU5dW3RhZ10gPSBmYWxzZTsKICAgICAgICBzZXRTeW1ib2xEZXNjcmlwdG9yKHRoaXMsIHRhZywgY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yJDEoMSwgdmFsdWUpKTsKICAgICAgfTsKICAgICAgaWYgKERFU0NSSVBUT1JTJDcgJiYgVVNFX1NFVFRFUikKICAgICAgICBzZXRTeW1ib2xEZXNjcmlwdG9yKE9iamVjdFByb3RvdHlwZSwgdGFnLCB7IGNvbmZpZ3VyYWJsZTogdHJ1ZSwgc2V0OiBzZXR0ZXIgfSk7CiAgICAgIHJldHVybiB3cmFwJDEodGFnLCBkZXNjcmlwdGlvbik7CiAgICB9OwogICAgcmVkZWZpbmUkMSgkU3ltYm9sW1BST1RPVFlQRV0sICJ0b1N0cmluZyIsIGZ1bmN0aW9uIHRvU3RyaW5nMigpIHsKICAgICAgcmV0dXJuIGdldEludGVybmFsU3RhdGUkMSh0aGlzKS50YWc7CiAgICB9KTsKICAgIHJlZGVmaW5lJDEoJFN5bWJvbCwgIndpdGhvdXRTZXR0ZXIiLCBmdW5jdGlvbihkZXNjcmlwdGlvbikgewogICAgICByZXR1cm4gd3JhcCQxKHVpZCQxKGRlc2NyaXB0aW9uKSwgZGVzY3JpcHRpb24pOwogICAgfSk7CiAgICBwcm9wZXJ0eUlzRW51bWVyYWJsZU1vZHVsZSQxLmYgPSAkcHJvcGVydHlJc0VudW1lcmFibGU7CiAgICBkZWZpbmVQcm9wZXJ0eU1vZHVsZSQxLmYgPSAkZGVmaW5lUHJvcGVydHk7CiAgICBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JNb2R1bGUkMS5mID0gJGdldE93blByb3BlcnR5RGVzY3JpcHRvcjsKICAgIGdldE93blByb3BlcnR5TmFtZXNNb2R1bGUkMi5mID0gZ2V0T3duUHJvcGVydHlOYW1lc0V4dGVybmFsLmYgPSAkZ2V0T3duUHJvcGVydHlOYW1lczsKICAgIGdldE93blByb3BlcnR5U3ltYm9sc01vZHVsZSQyLmYgPSAkZ2V0T3duUHJvcGVydHlTeW1ib2xzOwogICAgd3JhcHBlZFdlbGxLbm93blN5bWJvbE1vZHVsZS5mID0gZnVuY3Rpb24obmFtZSkgewogICAgICByZXR1cm4gd3JhcCQxKHdlbGxLbm93blN5bWJvbCQ4KG5hbWUpLCBuYW1lKTsKICAgIH07CiAgICBpZiAoREVTQ1JJUFRPUlMkNykgewogICAgICBuYXRpdmVEZWZpbmVQcm9wZXJ0eSgkU3ltYm9sW1BST1RPVFlQRV0sICJkZXNjcmlwdGlvbiIsIHsKICAgICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgICAgZ2V0OiBmdW5jdGlvbiBkZXNjcmlwdGlvbigpIHsKICAgICAgICAgIHJldHVybiBnZXRJbnRlcm5hbFN0YXRlJDEodGhpcykuZGVzY3JpcHRpb247CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9CiAgJCRCKHsgZ2xvYmFsOiB0cnVlLCB3cmFwOiB0cnVlLCBmb3JjZWQ6ICFOQVRJVkVfU1lNQk9MLCBzaGFtOiAhTkFUSVZFX1NZTUJPTCB9LCB7CiAgICBTeW1ib2w6ICRTeW1ib2wKICB9KTsKICAkZm9yRWFjaCQxKG9iamVjdEtleXMkMShXZWxsS25vd25TeW1ib2xzU3RvcmUpLCBmdW5jdGlvbihuYW1lKSB7CiAgICBkZWZpbmVXZWxsS25vd25TeW1ib2wkayhuYW1lKTsKICB9KTsKICAkJEIoeyB0YXJnZXQ6IFNZTUJPTCwgc3RhdDogdHJ1ZSwgZm9yY2VkOiAhTkFUSVZFX1NZTUJPTCB9LCB7CiAgICAiZm9yIjogZnVuY3Rpb24oa2V5KSB7CiAgICAgIHZhciBzdHJpbmcgPSAkdG9TdHJpbmcoa2V5KTsKICAgICAgaWYgKGhhcyQyKFN0cmluZ1RvU3ltYm9sUmVnaXN0cnksIHN0cmluZykpCiAgICAgICAgcmV0dXJuIFN0cmluZ1RvU3ltYm9sUmVnaXN0cnlbc3RyaW5nXTsKICAgICAgdmFyIHN5bWJvbDIgPSAkU3ltYm9sKHN0cmluZyk7CiAgICAgIFN0cmluZ1RvU3ltYm9sUmVnaXN0cnlbc3RyaW5nXSA9IHN5bWJvbDI7CiAgICAgIFN5bWJvbFRvU3RyaW5nUmVnaXN0cnlbc3ltYm9sMl0gPSBzdHJpbmc7CiAgICAgIHJldHVybiBzeW1ib2wyOwogICAgfSwKICAgIGtleUZvcjogZnVuY3Rpb24ga2V5Rm9yKHN5bSkgewogICAgICBpZiAoIWlzU3ltYm9sKHN5bSkpCiAgICAgICAgdGhyb3cgVHlwZUVycm9yKHN5bSArICIgaXMgbm90IGEgc3ltYm9sIik7CiAgICAgIGlmIChoYXMkMihTeW1ib2xUb1N0cmluZ1JlZ2lzdHJ5LCBzeW0pKQogICAgICAgIHJldHVybiBTeW1ib2xUb1N0cmluZ1JlZ2lzdHJ5W3N5bV07CiAgICB9LAogICAgdXNlU2V0dGVyOiBmdW5jdGlvbigpIHsKICAgICAgVVNFX1NFVFRFUiA9IHRydWU7CiAgICB9LAogICAgdXNlU2ltcGxlOiBmdW5jdGlvbigpIHsKICAgICAgVVNFX1NFVFRFUiA9IGZhbHNlOwogICAgfQogIH0pOwogICQkQih7IHRhcmdldDogIk9iamVjdCIsIHN0YXQ6IHRydWUsIGZvcmNlZDogIU5BVElWRV9TWU1CT0wsIHNoYW06ICFERVNDUklQVE9SUyQ3IH0sIHsKICAgIGNyZWF0ZTogJGNyZWF0ZSwKICAgIGRlZmluZVByb3BlcnR5OiAkZGVmaW5lUHJvcGVydHksCiAgICBkZWZpbmVQcm9wZXJ0aWVzOiAkZGVmaW5lUHJvcGVydGllcywKICAgIGdldE93blByb3BlcnR5RGVzY3JpcHRvcjogJGdldE93blByb3BlcnR5RGVzY3JpcHRvcgogIH0pOwogICQkQih7IHRhcmdldDogIk9iamVjdCIsIHN0YXQ6IHRydWUsIGZvcmNlZDogIU5BVElWRV9TWU1CT0wgfSwgewogICAgZ2V0T3duUHJvcGVydHlOYW1lczogJGdldE93blByb3BlcnR5TmFtZXMsCiAgICBnZXRPd25Qcm9wZXJ0eVN5bWJvbHM6ICRnZXRPd25Qcm9wZXJ0eVN5bWJvbHMKICB9KTsKICAkJEIoeyB0YXJnZXQ6ICJPYmplY3QiLCBzdGF0OiB0cnVlLCBmb3JjZWQ6IGZhaWxzJGMoZnVuY3Rpb24oKSB7CiAgICBnZXRPd25Qcm9wZXJ0eVN5bWJvbHNNb2R1bGUkMi5mKDEpOwogIH0pIH0sIHsKICAgIGdldE93blByb3BlcnR5U3ltYm9sczogZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlTeW1ib2xzMihpdCkgewogICAgICByZXR1cm4gZ2V0T3duUHJvcGVydHlTeW1ib2xzTW9kdWxlJDIuZih0b09iamVjdCQ2KGl0KSk7CiAgICB9CiAgfSk7CiAgaWYgKCRzdHJpbmdpZnkpIHsKICAgIHZhciBGT1JDRURfSlNPTl9TVFJJTkdJRlkgPSAhTkFUSVZFX1NZTUJPTCB8fCBmYWlscyRjKGZ1bmN0aW9uKCkgewogICAgICB2YXIgc3ltYm9sMiA9ICRTeW1ib2woKTsKICAgICAgcmV0dXJuICRzdHJpbmdpZnkoW3N5bWJvbDJdKSAhPSAiW251bGxdIiB8fCAkc3RyaW5naWZ5KHsgYTogc3ltYm9sMiB9KSAhPSAie30iIHx8ICRzdHJpbmdpZnkoT2JqZWN0KHN5bWJvbDIpKSAhPSAie30iOwogICAgfSk7CiAgICAkJEIoeyB0YXJnZXQ6ICJKU09OIiwgc3RhdDogdHJ1ZSwgZm9yY2VkOiBGT1JDRURfSlNPTl9TVFJJTkdJRlkgfSwgewogICAgICBzdHJpbmdpZnk6IGZ1bmN0aW9uIHN0cmluZ2lmeShpdCwgcmVwbGFjZXIsIHNwYWNlKSB7CiAgICAgICAgdmFyIGFyZ3MgPSBbaXRdOwogICAgICAgIHZhciBpbmRleCA9IDE7CiAgICAgICAgdmFyICRyZXBsYWNlcjsKICAgICAgICB3aGlsZSAoYXJndW1lbnRzLmxlbmd0aCA+IGluZGV4KQogICAgICAgICAgYXJncy5wdXNoKGFyZ3VtZW50c1tpbmRleCsrXSk7CiAgICAgICAgJHJlcGxhY2VyID0gcmVwbGFjZXI7CiAgICAgICAgaWYgKCFpc09iamVjdCRhKHJlcGxhY2VyKSAmJiBpdCA9PT0gdm9pZCAwIHx8IGlzU3ltYm9sKGl0KSkKICAgICAgICAgIHJldHVybjsKICAgICAgICBpZiAoIWlzQXJyYXkkMyhyZXBsYWNlcikpCiAgICAgICAgICByZXBsYWNlciA9IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKICAgICAgICAgICAgaWYgKGlzQ2FsbGFibGUkNigkcmVwbGFjZXIpKQogICAgICAgICAgICAgIHZhbHVlID0gJHJlcGxhY2VyLmNhbGwodGhpcywga2V5LCB2YWx1ZSk7CiAgICAgICAgICAgIGlmICghaXNTeW1ib2wodmFsdWUpKQogICAgICAgICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgICAgIH07CiAgICAgICAgYXJnc1sxXSA9IHJlcGxhY2VyOwogICAgICAgIHJldHVybiAkc3RyaW5naWZ5LmFwcGx5KG51bGwsIGFyZ3MpOwogICAgICB9CiAgICB9KTsKICB9CiAgaWYgKCEkU3ltYm9sW1BST1RPVFlQRV1bVE9fUFJJTUlUSVZFXSkgewogICAgdmFyIHZhbHVlT2YgPSAkU3ltYm9sW1BST1RPVFlQRV0udmFsdWVPZjsKICAgIHJlZGVmaW5lJDEoJFN5bWJvbFtQUk9UT1RZUEVdLCBUT19QUklNSVRJVkUsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gdmFsdWVPZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfSk7CiAgfQogIHNldFRvU3RyaW5nVGFnJDMoJFN5bWJvbCwgU1lNQk9MKTsKICBoaWRkZW5LZXlzJDFbSElEREVOXSA9IHRydWU7CiAgdmFyIGRlZmluZVdlbGxLbm93blN5bWJvbCRqID0gZGVmaW5lV2VsbEtub3duU3ltYm9sJGw7CiAgZGVmaW5lV2VsbEtub3duU3ltYm9sJGooImFzeW5jSXRlcmF0b3IiKTsKICB2YXIgZGVmaW5lV2VsbEtub3duU3ltYm9sJGkgPSBkZWZpbmVXZWxsS25vd25TeW1ib2wkbDsKICBkZWZpbmVXZWxsS25vd25TeW1ib2wkaSgiaGFzSW5zdGFuY2UiKTsKICB2YXIgZGVmaW5lV2VsbEtub3duU3ltYm9sJGggPSBkZWZpbmVXZWxsS25vd25TeW1ib2wkbDsKICBkZWZpbmVXZWxsS25vd25TeW1ib2wkaCgiaXNDb25jYXRTcHJlYWRhYmxlIik7CiAgdmFyIGRlZmluZVdlbGxLbm93blN5bWJvbCRnID0gZGVmaW5lV2VsbEtub3duU3ltYm9sJGw7CiAgZGVmaW5lV2VsbEtub3duU3ltYm9sJGcoIml0ZXJhdG9yIik7CiAgdmFyIGRlZmluZVdlbGxLbm93blN5bWJvbCRmID0gZGVmaW5lV2VsbEtub3duU3ltYm9sJGw7CiAgZGVmaW5lV2VsbEtub3duU3ltYm9sJGYoIm1hdGNoIik7CiAgdmFyIGRlZmluZVdlbGxLbm93blN5bWJvbCRlID0gZGVmaW5lV2VsbEtub3duU3ltYm9sJGw7CiAgZGVmaW5lV2VsbEtub3duU3ltYm9sJGUoIm1hdGNoQWxsIik7CiAgdmFyIGRlZmluZVdlbGxLbm93blN5bWJvbCRkID0gZGVmaW5lV2VsbEtub3duU3ltYm9sJGw7CiAgZGVmaW5lV2VsbEtub3duU3ltYm9sJGQoInJlcGxhY2UiKTsKICB2YXIgZGVmaW5lV2VsbEtub3duU3ltYm9sJGMgPSBkZWZpbmVXZWxsS25vd25TeW1ib2wkbDsKICBkZWZpbmVXZWxsS25vd25TeW1ib2wkYygic2VhcmNoIik7CiAgdmFyIGRlZmluZVdlbGxLbm93blN5bWJvbCRiID0gZGVmaW5lV2VsbEtub3duU3ltYm9sJGw7CiAgZGVmaW5lV2VsbEtub3duU3ltYm9sJGIoInNwZWNpZXMiKTsKICB2YXIgZGVmaW5lV2VsbEtub3duU3ltYm9sJGEgPSBkZWZpbmVXZWxsS25vd25TeW1ib2wkbDsKICBkZWZpbmVXZWxsS25vd25TeW1ib2wkYSgic3BsaXQiKTsKICB2YXIgZGVmaW5lV2VsbEtub3duU3ltYm9sJDkgPSBkZWZpbmVXZWxsS25vd25TeW1ib2wkbDsKICBkZWZpbmVXZWxsS25vd25TeW1ib2wkOSgidG9QcmltaXRpdmUiKTsKICB2YXIgZGVmaW5lV2VsbEtub3duU3ltYm9sJDggPSBkZWZpbmVXZWxsS25vd25TeW1ib2wkbDsKICBkZWZpbmVXZWxsS25vd25TeW1ib2wkOCgidG9TdHJpbmdUYWciKTsKICB2YXIgZGVmaW5lV2VsbEtub3duU3ltYm9sJDcgPSBkZWZpbmVXZWxsS25vd25TeW1ib2wkbDsKICBkZWZpbmVXZWxsS25vd25TeW1ib2wkNygidW5zY29wYWJsZXMiKTsKICB2YXIgZ2xvYmFsJGMgPSBnbG9iYWwkbzsKICB2YXIgc2V0VG9TdHJpbmdUYWckMiA9IHNldFRvU3RyaW5nVGFnJDY7CiAgc2V0VG9TdHJpbmdUYWckMihnbG9iYWwkYy5KU09OLCAiSlNPTiIsIHRydWUpOwogIHZhciBwYXRoJGggPSBwYXRoJG47CiAgdmFyIHN5bWJvbCQ0ID0gcGF0aCRoLlN5bWJvbDsKICB2YXIgcGFyZW50JEsgPSBzeW1ib2wkNDsKICB2YXIgc3ltYm9sJDMgPSBwYXJlbnQkSzsKICB2YXIgc3ltYm9sJDIgPSBzeW1ib2wkMzsKICB2YXIgYW5PYmplY3QkYiA9IGFuT2JqZWN0JGk7CiAgdmFyIGdldE1ldGhvZCA9IGdldE1ldGhvZCQzOwogIHZhciBpdGVyYXRvckNsb3NlJDIgPSBmdW5jdGlvbihpdGVyYXRvcjIsIGtpbmQsIHZhbHVlKSB7CiAgICB2YXIgaW5uZXJSZXN1bHQsIGlubmVyRXJyb3I7CiAgICBhbk9iamVjdCRiKGl0ZXJhdG9yMik7CiAgICB0cnkgewogICAgICBpbm5lclJlc3VsdCA9IGdldE1ldGhvZChpdGVyYXRvcjIsICJyZXR1cm4iKTsKICAgICAgaWYgKCFpbm5lclJlc3VsdCkgewogICAgICAgIGlmIChraW5kID09PSAidGhyb3ciKQogICAgICAgICAgdGhyb3cgdmFsdWU7CiAgICAgICAgcmV0dXJuIHZhbHVlOwogICAgICB9CiAgICAgIGlubmVyUmVzdWx0ID0gaW5uZXJSZXN1bHQuY2FsbChpdGVyYXRvcjIpOwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgaW5uZXJFcnJvciA9IHRydWU7CiAgICAgIGlubmVyUmVzdWx0ID0gZXJyb3I7CiAgICB9CiAgICBpZiAoa2luZCA9PT0gInRocm93IikKICAgICAgdGhyb3cgdmFsdWU7CiAgICBpZiAoaW5uZXJFcnJvcikKICAgICAgdGhyb3cgaW5uZXJSZXN1bHQ7CiAgICBhbk9iamVjdCRiKGlubmVyUmVzdWx0KTsKICAgIHJldHVybiB2YWx1ZTsKICB9OwogIHZhciBhbk9iamVjdCRhID0gYW5PYmplY3QkaTsKICB2YXIgaXRlcmF0b3JDbG9zZSQxID0gaXRlcmF0b3JDbG9zZSQyOwogIHZhciBjYWxsV2l0aFNhZmVJdGVyYXRpb25DbG9zaW5nJDEgPSBmdW5jdGlvbihpdGVyYXRvcjIsIGZuLCB2YWx1ZSwgRU5UUklFUzIpIHsKICAgIHRyeSB7CiAgICAgIHJldHVybiBFTlRSSUVTMiA/IGZuKGFuT2JqZWN0JGEodmFsdWUpWzBdLCB2YWx1ZVsxXSkgOiBmbih2YWx1ZSk7CiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICBpdGVyYXRvckNsb3NlJDEoaXRlcmF0b3IyLCAidGhyb3ciLCBlcnJvcik7CiAgICB9CiAgfTsKICB2YXIgd2VsbEtub3duU3ltYm9sJDcgPSB3ZWxsS25vd25TeW1ib2wkbDsKICB2YXIgSXRlcmF0b3JzID0gaXRlcmF0b3JzOwogIHZhciBJVEVSQVRPUiQyID0gd2VsbEtub3duU3ltYm9sJDcoIml0ZXJhdG9yIik7CiAgdmFyIEFycmF5UHJvdG90eXBlJDggPSBBcnJheS5wcm90b3R5cGU7CiAgdmFyIGlzQXJyYXlJdGVyYXRvck1ldGhvZCQyID0gZnVuY3Rpb24oaXQpIHsKICAgIHJldHVybiBpdCAhPT0gdm9pZCAwICYmIChJdGVyYXRvcnMuQXJyYXkgPT09IGl0IHx8IEFycmF5UHJvdG90eXBlJDhbSVRFUkFUT1IkMl0gPT09IGl0KTsKICB9OwogIHZhciBiaW5kJGEgPSBmdW5jdGlvbkJpbmRDb250ZXh0OwogIHZhciB0b09iamVjdCQ1ID0gdG9PYmplY3QkYjsKICB2YXIgY2FsbFdpdGhTYWZlSXRlcmF0aW9uQ2xvc2luZyA9IGNhbGxXaXRoU2FmZUl0ZXJhdGlvbkNsb3NpbmckMTsKICB2YXIgaXNBcnJheUl0ZXJhdG9yTWV0aG9kJDEgPSBpc0FycmF5SXRlcmF0b3JNZXRob2QkMjsKICB2YXIgaXNDb25zdHJ1Y3RvciQyID0gaXNDb25zdHJ1Y3RvciQ0OwogIHZhciB0b0xlbmd0aCQ1ID0gdG9MZW5ndGgkOTsKICB2YXIgY3JlYXRlUHJvcGVydHkkMiA9IGNyZWF0ZVByb3BlcnR5JDQ7CiAgdmFyIGdldEl0ZXJhdG9yJDEgPSBnZXRJdGVyYXRvciQ2OwogIHZhciBnZXRJdGVyYXRvck1ldGhvZCQxID0gZ2V0SXRlcmF0b3JNZXRob2QkNzsKICB2YXIgYXJyYXlGcm9tID0gZnVuY3Rpb24gZnJvbTIoYXJyYXlMaWtlKSB7CiAgICB2YXIgTyA9IHRvT2JqZWN0JDUoYXJyYXlMaWtlKTsKICAgIHZhciBJU19DT05TVFJVQ1RPUiA9IGlzQ29uc3RydWN0b3IkMih0aGlzKTsKICAgIHZhciBhcmd1bWVudHNMZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoOwogICAgdmFyIG1hcGZuID0gYXJndW1lbnRzTGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHZvaWQgMDsKICAgIHZhciBtYXBwaW5nID0gbWFwZm4gIT09IHZvaWQgMDsKICAgIGlmIChtYXBwaW5nKQogICAgICBtYXBmbiA9IGJpbmQkYShtYXBmbiwgYXJndW1lbnRzTGVuZ3RoID4gMiA/IGFyZ3VtZW50c1syXSA6IHZvaWQgMCwgMik7CiAgICB2YXIgaXRlcmF0b3JNZXRob2QgPSBnZXRJdGVyYXRvck1ldGhvZCQxKE8pOwogICAgdmFyIGluZGV4ID0gMDsKICAgIHZhciBsZW5ndGgsIHJlc3VsdCwgc3RlcCwgaXRlcmF0b3IyLCBuZXh0LCB2YWx1ZTsKICAgIGlmIChpdGVyYXRvck1ldGhvZCAmJiAhKHRoaXMgPT0gQXJyYXkgJiYgaXNBcnJheUl0ZXJhdG9yTWV0aG9kJDEoaXRlcmF0b3JNZXRob2QpKSkgewogICAgICBpdGVyYXRvcjIgPSBnZXRJdGVyYXRvciQxKE8sIGl0ZXJhdG9yTWV0aG9kKTsKICAgICAgbmV4dCA9IGl0ZXJhdG9yMi5uZXh0OwogICAgICByZXN1bHQgPSBJU19DT05TVFJVQ1RPUiA/IG5ldyB0aGlzKCkgOiBbXTsKICAgICAgZm9yICg7ICEoc3RlcCA9IG5leHQuY2FsbChpdGVyYXRvcjIpKS5kb25lOyBpbmRleCsrKSB7CiAgICAgICAgdmFsdWUgPSBtYXBwaW5nID8gY2FsbFdpdGhTYWZlSXRlcmF0aW9uQ2xvc2luZyhpdGVyYXRvcjIsIG1hcGZuLCBbc3RlcC52YWx1ZSwgaW5kZXhdLCB0cnVlKSA6IHN0ZXAudmFsdWU7CiAgICAgICAgY3JlYXRlUHJvcGVydHkkMihyZXN1bHQsIGluZGV4LCB2YWx1ZSk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGxlbmd0aCA9IHRvTGVuZ3RoJDUoTy5sZW5ndGgpOwogICAgICByZXN1bHQgPSBJU19DT05TVFJVQ1RPUiA/IG5ldyB0aGlzKGxlbmd0aCkgOiBBcnJheShsZW5ndGgpOwogICAgICBmb3IgKDsgbGVuZ3RoID4gaW5kZXg7IGluZGV4KyspIHsKICAgICAgICB2YWx1ZSA9IG1hcHBpbmcgPyBtYXBmbihPW2luZGV4XSwgaW5kZXgpIDogT1tpbmRleF07CiAgICAgICAgY3JlYXRlUHJvcGVydHkkMihyZXN1bHQsIGluZGV4LCB2YWx1ZSk7CiAgICAgIH0KICAgIH0KICAgIHJlc3VsdC5sZW5ndGggPSBpbmRleDsKICAgIHJldHVybiByZXN1bHQ7CiAgfTsKICB2YXIgd2VsbEtub3duU3ltYm9sJDYgPSB3ZWxsS25vd25TeW1ib2wkbDsKICB2YXIgSVRFUkFUT1IkMSA9IHdlbGxLbm93blN5bWJvbCQ2KCJpdGVyYXRvciIpOwogIHZhciBTQUZFX0NMT1NJTkcgPSBmYWxzZTsKICB0cnkgewogICAgdmFyIGNhbGxlZCA9IDA7CiAgICB2YXIgaXRlcmF0b3JXaXRoUmV0dXJuID0gewogICAgICBuZXh0OiBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4geyBkb25lOiAhIWNhbGxlZCsrIH07CiAgICAgIH0sCiAgICAgICJyZXR1cm4iOiBmdW5jdGlvbigpIHsKICAgICAgICBTQUZFX0NMT1NJTkcgPSB0cnVlOwogICAgICB9CiAgICB9OwogICAgaXRlcmF0b3JXaXRoUmV0dXJuW0lURVJBVE9SJDFdID0gZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiB0aGlzOwogICAgfTsKICAgIEFycmF5LmZyb20oaXRlcmF0b3JXaXRoUmV0dXJuLCBmdW5jdGlvbigpIHsKICAgICAgdGhyb3cgMjsKICAgIH0pOwogIH0gY2F0Y2ggKGVycm9yKSB7CiAgfQogIHZhciBjaGVja0NvcnJlY3RuZXNzT2ZJdGVyYXRpb24kMiA9IGZ1bmN0aW9uKGV4ZWMyLCBTS0lQX0NMT1NJTkcpIHsKICAgIGlmICghU0tJUF9DTE9TSU5HICYmICFTQUZFX0NMT1NJTkcpCiAgICAgIHJldHVybiBmYWxzZTsKICAgIHZhciBJVEVSQVRJT05fU1VQUE9SVCA9IGZhbHNlOwogICAgdHJ5IHsKICAgICAgdmFyIG9iamVjdCA9IHt9OwogICAgICBvYmplY3RbSVRFUkFUT1IkMV0gPSBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgbmV4dDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHVybiB7IGRvbmU6IElURVJBVElPTl9TVVBQT1JUID0gdHJ1ZSB9OwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH07CiAgICAgIGV4ZWMyKG9iamVjdCk7CiAgICB9IGNhdGNoIChlcnJvcikgewogICAgfQogICAgcmV0dXJuIElURVJBVElPTl9TVVBQT1JUOwogIH07CiAgdmFyICQkQSA9IF9leHBvcnQ7CiAgdmFyIGZyb20kNiA9IGFycmF5RnJvbTsKICB2YXIgY2hlY2tDb3JyZWN0bmVzc09mSXRlcmF0aW9uJDEgPSBjaGVja0NvcnJlY3RuZXNzT2ZJdGVyYXRpb24kMjsKICB2YXIgSU5DT1JSRUNUX0lURVJBVElPTiQxID0gIWNoZWNrQ29ycmVjdG5lc3NPZkl0ZXJhdGlvbiQxKGZ1bmN0aW9uKGl0ZXJhYmxlKSB7CiAgICBBcnJheS5mcm9tKGl0ZXJhYmxlKTsKICB9KTsKICAkJEEoeyB0YXJnZXQ6ICJBcnJheSIsIHN0YXQ6IHRydWUsIGZvcmNlZDogSU5DT1JSRUNUX0lURVJBVElPTiQxIH0sIHsKICAgIGZyb206IGZyb20kNgogIH0pOwogIHZhciBwYXRoJGcgPSBwYXRoJG47CiAgdmFyIGZyb20kNSA9IHBhdGgkZy5BcnJheS5mcm9tOwogIHZhciBwYXJlbnQkSiA9IGZyb20kNTsKICB2YXIgZnJvbSQ0ID0gcGFyZW50JEo7CiAgdmFyIGZyb20kMyA9IGZyb20kNDsKICB2YXIgZGVmaW5lUHJvcGVydGllcyQ0ID0geyBleHBvcnRzOiB7fSB9OwogIHZhciAkJHogPSBfZXhwb3J0OwogIHZhciBERVNDUklQVE9SUyQ2ID0gZGVzY3JpcHRvcnM7CiAgdmFyIGRlZmluZVByb3BlcnRpZXMkMyA9IG9iamVjdERlZmluZVByb3BlcnRpZXM7CiAgJCR6KHsgdGFyZ2V0OiAiT2JqZWN0Iiwgc3RhdDogdHJ1ZSwgZm9yY2VkOiAhREVTQ1JJUFRPUlMkNiwgc2hhbTogIURFU0NSSVBUT1JTJDYgfSwgewogICAgZGVmaW5lUHJvcGVydGllczogZGVmaW5lUHJvcGVydGllcyQzCiAgfSk7CiAgdmFyIHBhdGgkZiA9IHBhdGgkbjsKICB2YXIgT2JqZWN0JDMgPSBwYXRoJGYuT2JqZWN0OwogIHZhciBkZWZpbmVQcm9wZXJ0aWVzJDIgPSBkZWZpbmVQcm9wZXJ0aWVzJDQuZXhwb3J0cyA9IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXMyKFQsIEQpIHsKICAgIHJldHVybiBPYmplY3QkMy5kZWZpbmVQcm9wZXJ0aWVzKFQsIEQpOwogIH07CiAgaWYgKE9iamVjdCQzLmRlZmluZVByb3BlcnRpZXMuc2hhbSkKICAgIGRlZmluZVByb3BlcnRpZXMkMi5zaGFtID0gdHJ1ZTsKICB2YXIgcGFyZW50JEkgPSBkZWZpbmVQcm9wZXJ0aWVzJDQuZXhwb3J0czsKICB2YXIgZGVmaW5lUHJvcGVydGllcyQxID0gcGFyZW50JEk7CiAgdmFyIGRlZmluZVByb3BlcnRpZXMgPSBkZWZpbmVQcm9wZXJ0aWVzJDE7CiAgdmFyIGdldEJ1aWx0SW4kNSA9IGdldEJ1aWx0SW4kYjsKICB2YXIgZ2V0T3duUHJvcGVydHlOYW1lc01vZHVsZSQxID0gb2JqZWN0R2V0T3duUHJvcGVydHlOYW1lczsKICB2YXIgZ2V0T3duUHJvcGVydHlTeW1ib2xzTW9kdWxlJDEgPSBvYmplY3RHZXRPd25Qcm9wZXJ0eVN5bWJvbHM7CiAgdmFyIGFuT2JqZWN0JDkgPSBhbk9iamVjdCRpOwogIHZhciBvd25LZXlzJDIgPSBnZXRCdWlsdEluJDUoIlJlZmxlY3QiLCAib3duS2V5cyIpIHx8IGZ1bmN0aW9uIG93bktleXMyKGl0KSB7CiAgICB2YXIga2V5czIgPSBnZXRPd25Qcm9wZXJ0eU5hbWVzTW9kdWxlJDEuZihhbk9iamVjdCQ5KGl0KSk7CiAgICB2YXIgZ2V0T3duUHJvcGVydHlTeW1ib2xzMiA9IGdldE93blByb3BlcnR5U3ltYm9sc01vZHVsZSQxLmY7CiAgICByZXR1cm4gZ2V0T3duUHJvcGVydHlTeW1ib2xzMiA/IGtleXMyLmNvbmNhdChnZXRPd25Qcm9wZXJ0eVN5bWJvbHMyKGl0KSkgOiBrZXlzMjsKICB9OwogIHZhciAkJHkgPSBfZXhwb3J0OwogIHZhciBERVNDUklQVE9SUyQ1ID0gZGVzY3JpcHRvcnM7CiAgdmFyIG93bktleXMkMSA9IG93bktleXMkMjsKICB2YXIgdG9JbmRleGVkT2JqZWN0JDIgPSB0b0luZGV4ZWRPYmplY3QkOTsKICB2YXIgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yTW9kdWxlID0gb2JqZWN0R2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOwogIHZhciBjcmVhdGVQcm9wZXJ0eSQxID0gY3JlYXRlUHJvcGVydHkkNDsKICAkJHkoeyB0YXJnZXQ6ICJPYmplY3QiLCBzdGF0OiB0cnVlLCBzaGFtOiAhREVTQ1JJUFRPUlMkNSB9LCB7CiAgICBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzOiBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzMihvYmplY3QpIHsKICAgICAgdmFyIE8gPSB0b0luZGV4ZWRPYmplY3QkMihvYmplY3QpOwogICAgICB2YXIgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yMiA9IGdldE93blByb3BlcnR5RGVzY3JpcHRvck1vZHVsZS5mOwogICAgICB2YXIga2V5czIgPSBvd25LZXlzJDEoTyk7CiAgICAgIHZhciByZXN1bHQgPSB7fTsKICAgICAgdmFyIGluZGV4ID0gMDsKICAgICAgdmFyIGtleSwgZGVzY3JpcHRvcjsKICAgICAgd2hpbGUgKGtleXMyLmxlbmd0aCA+IGluZGV4KSB7CiAgICAgICAgZGVzY3JpcHRvciA9IGdldE93blByb3BlcnR5RGVzY3JpcHRvcjIoTywga2V5ID0ga2V5czJbaW5kZXgrK10pOwogICAgICAgIGlmIChkZXNjcmlwdG9yICE9PSB2b2lkIDApCiAgICAgICAgICBjcmVhdGVQcm9wZXJ0eSQxKHJlc3VsdCwga2V5LCBkZXNjcmlwdG9yKTsKICAgICAgfQogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogIH0pOwogIHZhciBwYXRoJGUgPSBwYXRoJG47CiAgdmFyIGdldE93blByb3BlcnR5RGVzY3JpcHRvcnMkMiA9IHBhdGgkZS5PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yczsKICB2YXIgcGFyZW50JEggPSBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzJDI7CiAgdmFyIGdldE93blByb3BlcnR5RGVzY3JpcHRvcnMkMSA9IHBhcmVudCRIOwogIHZhciBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID0gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyQxOwogIHZhciBmYWlscyRiID0gZmFpbHMkbjsKICB2YXIgYXJyYXlNZXRob2RJc1N0cmljdCQ0ID0gZnVuY3Rpb24oTUVUSE9EX05BTUUsIGFyZ3VtZW50KSB7CiAgICB2YXIgbWV0aG9kID0gW11bTUVUSE9EX05BTUVdOwogICAgcmV0dXJuICEhbWV0aG9kICYmIGZhaWxzJGIoZnVuY3Rpb24oKSB7CiAgICAgIG1ldGhvZC5jYWxsKG51bGwsIGFyZ3VtZW50IHx8IGZ1bmN0aW9uKCkgewogICAgICAgIHRocm93IDE7CiAgICAgIH0sIDEpOwogICAgfSk7CiAgfTsKICB2YXIgJGZvckVhY2ggPSBhcnJheUl0ZXJhdGlvbi5mb3JFYWNoOwogIHZhciBhcnJheU1ldGhvZElzU3RyaWN0JDMgPSBhcnJheU1ldGhvZElzU3RyaWN0JDQ7CiAgdmFyIFNUUklDVF9NRVRIT0QkMyA9IGFycmF5TWV0aG9kSXNTdHJpY3QkMygiZm9yRWFjaCIpOwogIHZhciBhcnJheUZvckVhY2ggPSAhU1RSSUNUX01FVEhPRCQzID8gZnVuY3Rpb24gZm9yRWFjaDIoY2FsbGJhY2tmbikgewogICAgcmV0dXJuICRmb3JFYWNoKHRoaXMsIGNhbGxiYWNrZm4sIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdm9pZCAwKTsKICB9IDogW10uZm9yRWFjaDsKICB2YXIgJCR4ID0gX2V4cG9ydDsKICB2YXIgZm9yRWFjaCQ1ID0gYXJyYXlGb3JFYWNoOwogICQkeCh7IHRhcmdldDogIkFycmF5IiwgcHJvdG86IHRydWUsIGZvcmNlZDogW10uZm9yRWFjaCAhPSBmb3JFYWNoJDUgfSwgewogICAgZm9yRWFjaDogZm9yRWFjaCQ1CiAgfSk7CiAgdmFyIHBhdGgkZCA9IHBhdGgkbjsKICB2YXIgZW50cnlWaXJ0dWFsJGEgPSBmdW5jdGlvbihDT05TVFJVQ1RPUikgewogICAgcmV0dXJuIHBhdGgkZFtDT05TVFJVQ1RPUiArICJQcm90b3R5cGUiXTsKICB9OwogIHZhciBlbnRyeVZpcnR1YWwkOSA9IGVudHJ5VmlydHVhbCRhOwogIHZhciBmb3JFYWNoJDQgPSBlbnRyeVZpcnR1YWwkOSgiQXJyYXkiKS5mb3JFYWNoOwogIHZhciBwYXJlbnQkRyA9IGZvckVhY2gkNDsKICB2YXIgZm9yRWFjaCQzID0gcGFyZW50JEc7CiAgdmFyIGZvckVhY2gkMiA9IGZvckVhY2gkMzsKICB2YXIgY2xhc3NvZiQyID0gY2xhc3NvZiQ5OwogIHZhciBBcnJheVByb3RvdHlwZSQ3ID0gQXJyYXkucHJvdG90eXBlOwogIHZhciBET01JdGVyYWJsZXMgPSB7CiAgICBET01Ub2tlbkxpc3Q6IHRydWUsCiAgICBOb2RlTGlzdDogdHJ1ZQogIH07CiAgdmFyIGZvckVhY2hfMSA9IGZ1bmN0aW9uKGl0KSB7CiAgICB2YXIgb3duID0gaXQuZm9yRWFjaDsKICAgIHJldHVybiBpdCA9PT0gQXJyYXlQcm90b3R5cGUkNyB8fCBpdCBpbnN0YW5jZW9mIEFycmF5ICYmIG93biA9PT0gQXJyYXlQcm90b3R5cGUkNy5mb3JFYWNoIHx8IERPTUl0ZXJhYmxlcy5oYXNPd25Qcm9wZXJ0eShjbGFzc29mJDIoaXQpKSA/IGZvckVhY2gkMiA6IG93bjsKICB9OwogIHZhciBmb3JFYWNoJDEgPSBmb3JFYWNoXzE7CiAgdmFyIGdldE93blByb3BlcnR5RGVzY3JpcHRvciQ2ID0geyBleHBvcnRzOiB7fSB9OwogIHZhciAkJHcgPSBfZXhwb3J0OwogIHZhciBmYWlscyRhID0gZmFpbHMkbjsKICB2YXIgdG9JbmRleGVkT2JqZWN0JDEgPSB0b0luZGV4ZWRPYmplY3QkOTsKICB2YXIgbmF0aXZlR2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gb2JqZWN0R2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLmY7CiAgdmFyIERFU0NSSVBUT1JTJDQgPSBkZXNjcmlwdG9yczsKICB2YXIgRkFJTFNfT05fUFJJTUlUSVZFUyQyID0gZmFpbHMkYShmdW5jdGlvbigpIHsKICAgIG5hdGl2ZUdldE93blByb3BlcnR5RGVzY3JpcHRvcigxKTsKICB9KTsKICB2YXIgRk9SQ0VEJDQgPSAhREVTQ1JJUFRPUlMkNCB8fCBGQUlMU19PTl9QUklNSVRJVkVTJDI7CiAgJCR3KHsgdGFyZ2V0OiAiT2JqZWN0Iiwgc3RhdDogdHJ1ZSwgZm9yY2VkOiBGT1JDRUQkNCwgc2hhbTogIURFU0NSSVBUT1JTJDQgfSwgewogICAgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOiBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IyKGl0LCBrZXkpIHsKICAgICAgcmV0dXJuIG5hdGl2ZUdldE93blByb3BlcnR5RGVzY3JpcHRvcih0b0luZGV4ZWRPYmplY3QkMShpdCksIGtleSk7CiAgICB9CiAgfSk7CiAgdmFyIHBhdGgkYyA9IHBhdGgkbjsKICB2YXIgT2JqZWN0JDIgPSBwYXRoJGMuT2JqZWN0OwogIHZhciBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IkNSA9IGdldE93blByb3BlcnR5RGVzY3JpcHRvciQ2LmV4cG9ydHMgPSBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IyKGl0LCBrZXkpIHsKICAgIHJldHVybiBPYmplY3QkMi5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoaXQsIGtleSk7CiAgfTsKICBpZiAoT2JqZWN0JDIuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLnNoYW0pCiAgICBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IkNS5zaGFtID0gdHJ1ZTsKICB2YXIgcGFyZW50JEYgPSBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IkNi5leHBvcnRzOwogIHZhciBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IkNCA9IHBhcmVudCRGOwogIHZhciBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IkMyA9IGdldE93blByb3BlcnR5RGVzY3JpcHRvciQ0OwogIHZhciAkJHYgPSBfZXhwb3J0OwogIHZhciAkZmlsdGVyID0gYXJyYXlJdGVyYXRpb24uZmlsdGVyOwogIHZhciBhcnJheU1ldGhvZEhhc1NwZWNpZXNTdXBwb3J0JDIgPSBhcnJheU1ldGhvZEhhc1NwZWNpZXNTdXBwb3J0JDQ7CiAgdmFyIEhBU19TUEVDSUVTX1NVUFBPUlQkMiA9IGFycmF5TWV0aG9kSGFzU3BlY2llc1N1cHBvcnQkMigiZmlsdGVyIik7CiAgJCR2KHsgdGFyZ2V0OiAiQXJyYXkiLCBwcm90bzogdHJ1ZSwgZm9yY2VkOiAhSEFTX1NQRUNJRVNfU1VQUE9SVCQyIH0sIHsKICAgIGZpbHRlcjogZnVuY3Rpb24gZmlsdGVyMihjYWxsYmFja2ZuKSB7CiAgICAgIHJldHVybiAkZmlsdGVyKHRoaXMsIGNhbGxiYWNrZm4sIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdm9pZCAwKTsKICAgIH0KICB9KTsKICB2YXIgZW50cnlWaXJ0dWFsJDggPSBlbnRyeVZpcnR1YWwkYTsKICB2YXIgZmlsdGVyJDMgPSBlbnRyeVZpcnR1YWwkOCgiQXJyYXkiKS5maWx0ZXI7CiAgdmFyIGZpbHRlciQyID0gZmlsdGVyJDM7CiAgdmFyIEFycmF5UHJvdG90eXBlJDYgPSBBcnJheS5wcm90b3R5cGU7CiAgdmFyIGZpbHRlcl8xID0gZnVuY3Rpb24oaXQpIHsKICAgIHZhciBvd24gPSBpdC5maWx0ZXI7CiAgICByZXR1cm4gaXQgPT09IEFycmF5UHJvdG90eXBlJDYgfHwgaXQgaW5zdGFuY2VvZiBBcnJheSAmJiBvd24gPT09IEFycmF5UHJvdG90eXBlJDYuZmlsdGVyID8gZmlsdGVyJDIgOiBvd247CiAgfTsKICB2YXIgcGFyZW50JEUgPSBmaWx0ZXJfMTsKICB2YXIgZmlsdGVyJDEgPSBwYXJlbnQkRTsKICB2YXIgZmlsdGVyID0gZmlsdGVyJDE7CiAgdmFyIHBhdGgkYiA9IHBhdGgkbjsKICB2YXIgZ2V0T3duUHJvcGVydHlTeW1ib2xzJDQgPSBwYXRoJGIuT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9sczsKICB2YXIgcGFyZW50JEQgPSBnZXRPd25Qcm9wZXJ0eVN5bWJvbHMkNDsKICB2YXIgZ2V0T3duUHJvcGVydHlTeW1ib2xzJDMgPSBwYXJlbnQkRDsKICB2YXIgZ2V0T3duUHJvcGVydHlTeW1ib2xzJDIgPSBnZXRPd25Qcm9wZXJ0eVN5bWJvbHMkMzsKICB2YXIgJCR1ID0gX2V4cG9ydDsKICB2YXIgdG9PYmplY3QkNCA9IHRvT2JqZWN0JGI7CiAgdmFyIG5hdGl2ZUtleXMgPSBvYmplY3RLZXlzJDM7CiAgdmFyIGZhaWxzJDkgPSBmYWlscyRuOwogIHZhciBGQUlMU19PTl9QUklNSVRJVkVTJDEgPSBmYWlscyQ5KGZ1bmN0aW9uKCkgewogICAgbmF0aXZlS2V5cygxKTsKICB9KTsKICAkJHUoeyB0YXJnZXQ6ICJPYmplY3QiLCBzdGF0OiB0cnVlLCBmb3JjZWQ6IEZBSUxTX09OX1BSSU1JVElWRVMkMSB9LCB7CiAgICBrZXlzOiBmdW5jdGlvbiBrZXlzMihpdCkgewogICAgICByZXR1cm4gbmF0aXZlS2V5cyh0b09iamVjdCQ0KGl0KSk7CiAgICB9CiAgfSk7CiAgdmFyIHBhdGgkYSA9IHBhdGgkbjsKICB2YXIga2V5cyQ0ID0gcGF0aCRhLk9iamVjdC5rZXlzOwogIHZhciBwYXJlbnQkQyA9IGtleXMkNDsKICB2YXIga2V5cyQzID0gcGFyZW50JEM7CiAgdmFyIGtleXMkMiA9IGtleXMkMzsKICB2YXIgaXNDb25zdHJ1Y3RvciQxID0gaXNDb25zdHJ1Y3RvciQ0OwogIHZhciB0cnlUb1N0cmluZyA9IHRyeVRvU3RyaW5nJDI7CiAgdmFyIGFDb25zdHJ1Y3RvciQzID0gZnVuY3Rpb24oYXJndW1lbnQpIHsKICAgIGlmIChpc0NvbnN0cnVjdG9yJDEoYXJndW1lbnQpKQogICAgICByZXR1cm4gYXJndW1lbnQ7CiAgICB0aHJvdyBUeXBlRXJyb3IodHJ5VG9TdHJpbmcoYXJndW1lbnQpICsgIiBpcyBub3QgYSBjb25zdHJ1Y3RvciIpOwogIH07CiAgdmFyIGFDYWxsYWJsZSQ4ID0gYUNhbGxhYmxlJGM7CiAgdmFyIGlzT2JqZWN0JDkgPSBpc09iamVjdCRpOwogIHZhciBzbGljZSQ3ID0gW10uc2xpY2U7CiAgdmFyIGZhY3RvcmllcyA9IHt9OwogIHZhciBjb25zdHJ1Y3QkMyA9IGZ1bmN0aW9uKEMsIGFyZ3NMZW5ndGgsIGFyZ3MpIHsKICAgIGlmICghKGFyZ3NMZW5ndGggaW4gZmFjdG9yaWVzKSkgewogICAgICBmb3IgKHZhciBsaXN0ID0gW10sIGkyID0gMDsgaTIgPCBhcmdzTGVuZ3RoOyBpMisrKQogICAgICAgIGxpc3RbaTJdID0gImFbIiArIGkyICsgIl0iOwogICAgICBmYWN0b3JpZXNbYXJnc0xlbmd0aF0gPSBGdW5jdGlvbigiQyxhIiwgInJldHVybiBuZXcgQygiICsgbGlzdC5qb2luKCIsIikgKyAiKSIpOwogICAgfQogICAgcmV0dXJuIGZhY3Rvcmllc1thcmdzTGVuZ3RoXShDLCBhcmdzKTsKICB9OwogIHZhciBmdW5jdGlvbkJpbmQgPSBGdW5jdGlvbi5iaW5kIHx8IGZ1bmN0aW9uIGJpbmQyKHRoYXQpIHsKICAgIHZhciBmbiA9IGFDYWxsYWJsZSQ4KHRoaXMpOwogICAgdmFyIHBhcnRBcmdzID0gc2xpY2UkNy5jYWxsKGFyZ3VtZW50cywgMSk7CiAgICB2YXIgYm91bmRGdW5jdGlvbiA9IGZ1bmN0aW9uIGJvdW5kKCkgewogICAgICB2YXIgYXJncyA9IHBhcnRBcmdzLmNvbmNhdChzbGljZSQ3LmNhbGwoYXJndW1lbnRzKSk7CiAgICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgYm91bmRGdW5jdGlvbiA/IGNvbnN0cnVjdCQzKGZuLCBhcmdzLmxlbmd0aCwgYXJncykgOiBmbi5hcHBseSh0aGF0LCBhcmdzKTsKICAgIH07CiAgICBpZiAoaXNPYmplY3QkOShmbi5wcm90b3R5cGUpKQogICAgICBib3VuZEZ1bmN0aW9uLnByb3RvdHlwZSA9IGZuLnByb3RvdHlwZTsKICAgIHJldHVybiBib3VuZEZ1bmN0aW9uOwogIH07CiAgdmFyICQkdCA9IF9leHBvcnQ7CiAgdmFyIGdldEJ1aWx0SW4kNCA9IGdldEJ1aWx0SW4kYjsKICB2YXIgYUNvbnN0cnVjdG9yJDIgPSBhQ29uc3RydWN0b3IkMzsKICB2YXIgYW5PYmplY3QkOCA9IGFuT2JqZWN0JGk7CiAgdmFyIGlzT2JqZWN0JDggPSBpc09iamVjdCRpOwogIHZhciBjcmVhdGUkNiA9IG9iamVjdENyZWF0ZTsKICB2YXIgYmluZCQ5ID0gZnVuY3Rpb25CaW5kOwogIHZhciBmYWlscyQ4ID0gZmFpbHMkbjsKICB2YXIgbmF0aXZlQ29uc3RydWN0ID0gZ2V0QnVpbHRJbiQ0KCJSZWZsZWN0IiwgImNvbnN0cnVjdCIpOwogIHZhciBORVdfVEFSR0VUX0JVRyA9IGZhaWxzJDgoZnVuY3Rpb24oKSB7CiAgICBmdW5jdGlvbiBGKCkgewogICAgfQogICAgcmV0dXJuICEobmF0aXZlQ29uc3RydWN0KGZ1bmN0aW9uKCkgewogICAgfSwgW10sIEYpIGluc3RhbmNlb2YgRik7CiAgfSk7CiAgdmFyIEFSR1NfQlVHID0gIWZhaWxzJDgoZnVuY3Rpb24oKSB7CiAgICBuYXRpdmVDb25zdHJ1Y3QoZnVuY3Rpb24oKSB7CiAgICB9KTsKICB9KTsKICB2YXIgRk9SQ0VEJDMgPSBORVdfVEFSR0VUX0JVRyB8fCBBUkdTX0JVRzsKICAkJHQoeyB0YXJnZXQ6ICJSZWZsZWN0Iiwgc3RhdDogdHJ1ZSwgZm9yY2VkOiBGT1JDRUQkMywgc2hhbTogRk9SQ0VEJDMgfSwgewogICAgY29uc3RydWN0OiBmdW5jdGlvbiBjb25zdHJ1Y3QyKFRhcmdldCwgYXJncykgewogICAgICBhQ29uc3RydWN0b3IkMihUYXJnZXQpOwogICAgICBhbk9iamVjdCQ4KGFyZ3MpOwogICAgICB2YXIgbmV3VGFyZ2V0ID0gYXJndW1lbnRzLmxlbmd0aCA8IDMgPyBUYXJnZXQgOiBhQ29uc3RydWN0b3IkMihhcmd1bWVudHNbMl0pOwogICAgICBpZiAoQVJHU19CVUcgJiYgIU5FV19UQVJHRVRfQlVHKQogICAgICAgIHJldHVybiBuYXRpdmVDb25zdHJ1Y3QoVGFyZ2V0LCBhcmdzLCBuZXdUYXJnZXQpOwogICAgICBpZiAoVGFyZ2V0ID09IG5ld1RhcmdldCkgewogICAgICAgIHN3aXRjaCAoYXJncy5sZW5ndGgpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgcmV0dXJuIG5ldyBUYXJnZXQoKTsKICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgcmV0dXJuIG5ldyBUYXJnZXQoYXJnc1swXSk7CiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJldHVybiBuZXcgVGFyZ2V0KGFyZ3NbMF0sIGFyZ3NbMV0pOwogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICByZXR1cm4gbmV3IFRhcmdldChhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTsKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgcmV0dXJuIG5ldyBUYXJnZXQoYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSwgYXJnc1szXSk7CiAgICAgICAgfQogICAgICAgIHZhciAkYXJncyA9IFtudWxsXTsKICAgICAgICAkYXJncy5wdXNoLmFwcGx5KCRhcmdzLCBhcmdzKTsKICAgICAgICByZXR1cm4gbmV3IChiaW5kJDkuYXBwbHkoVGFyZ2V0LCAkYXJncykpKCk7CiAgICAgIH0KICAgICAgdmFyIHByb3RvID0gbmV3VGFyZ2V0LnByb3RvdHlwZTsKICAgICAgdmFyIGluc3RhbmNlID0gY3JlYXRlJDYoaXNPYmplY3QkOChwcm90bykgPyBwcm90byA6IE9iamVjdC5wcm90b3R5cGUpOwogICAgICB2YXIgcmVzdWx0ID0gRnVuY3Rpb24uYXBwbHkuY2FsbChUYXJnZXQsIGluc3RhbmNlLCBhcmdzKTsKICAgICAgcmV0dXJuIGlzT2JqZWN0JDgocmVzdWx0KSA/IHJlc3VsdCA6IGluc3RhbmNlOwogICAgfQogIH0pOwogIHZhciBwYXRoJDkgPSBwYXRoJG47CiAgdmFyIGNvbnN0cnVjdCQyID0gcGF0aCQ5LlJlZmxlY3QuY29uc3RydWN0OwogIHZhciBwYXJlbnQkQiA9IGNvbnN0cnVjdCQyOwogIHZhciBjb25zdHJ1Y3QkMSA9IHBhcmVudCRCOwogIHZhciBjb25zdHJ1Y3QgPSBjb25zdHJ1Y3QkMTsKICB2YXIgc2xpY2VkVG9BcnJheSQxID0geyBleHBvcnRzOiB7fSB9OwogIHZhciBhcnJheVdpdGhIb2xlcyQxID0geyBleHBvcnRzOiB7fSB9OwogIHZhciBwYXJlbnQkQSA9IGlzQXJyYXkkNzsKICB2YXIgaXNBcnJheSQyID0gcGFyZW50JEE7CiAgdmFyIGlzQXJyYXkkMSA9IGlzQXJyYXkkMjsKICAoZnVuY3Rpb24obW9kdWxlKSB7CiAgICB2YXIgX0FycmF5JGlzQXJyYXkgPSBpc0FycmF5JDE7CiAgICBmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7CiAgICAgIGlmIChfQXJyYXkkaXNBcnJheShhcnIpKQogICAgICAgIHJldHVybiBhcnI7CiAgICB9CiAgICBtb2R1bGUuZXhwb3J0cyA9IF9hcnJheVdpdGhIb2xlczsKICAgIG1vZHVsZS5leHBvcnRzWyJkZWZhdWx0Il0gPSBtb2R1bGUuZXhwb3J0cywgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7CiAgfSkoYXJyYXlXaXRoSG9sZXMkMSk7CiAgdmFyIGl0ZXJhYmxlVG9BcnJheUxpbWl0JDEgPSB7IGV4cG9ydHM6IHt9IH07CiAgdmFyIGRlZmluZVdlbGxLbm93blN5bWJvbCQ2ID0gZGVmaW5lV2VsbEtub3duU3ltYm9sJGw7CiAgZGVmaW5lV2VsbEtub3duU3ltYm9sJDYoImFzeW5jRGlzcG9zZSIpOwogIHZhciBkZWZpbmVXZWxsS25vd25TeW1ib2wkNSA9IGRlZmluZVdlbGxLbm93blN5bWJvbCRsOwogIGRlZmluZVdlbGxLbm93blN5bWJvbCQ1KCJkaXNwb3NlIik7CiAgdmFyIGRlZmluZVdlbGxLbm93blN5bWJvbCQ0ID0gZGVmaW5lV2VsbEtub3duU3ltYm9sJGw7CiAgZGVmaW5lV2VsbEtub3duU3ltYm9sJDQoIm1hdGNoZXIiKTsKICB2YXIgZGVmaW5lV2VsbEtub3duU3ltYm9sJDMgPSBkZWZpbmVXZWxsS25vd25TeW1ib2wkbDsKICBkZWZpbmVXZWxsS25vd25TeW1ib2wkMygibWV0YWRhdGEiKTsKICB2YXIgZGVmaW5lV2VsbEtub3duU3ltYm9sJDIgPSBkZWZpbmVXZWxsS25vd25TeW1ib2wkbDsKICBkZWZpbmVXZWxsS25vd25TeW1ib2wkMigib2JzZXJ2YWJsZSIpOwogIHZhciBkZWZpbmVXZWxsS25vd25TeW1ib2wkMSA9IGRlZmluZVdlbGxLbm93blN5bWJvbCRsOwogIGRlZmluZVdlbGxLbm93blN5bWJvbCQxKCJwYXR0ZXJuTWF0Y2giKTsKICB2YXIgZGVmaW5lV2VsbEtub3duU3ltYm9sID0gZGVmaW5lV2VsbEtub3duU3ltYm9sJGw7CiAgZGVmaW5lV2VsbEtub3duU3ltYm9sKCJyZXBsYWNlQWxsIik7CiAgdmFyIHBhcmVudCR6ID0gc3ltYm9sJDM7CiAgdmFyIHN5bWJvbCQxID0gcGFyZW50JHo7CiAgdmFyIHN5bWJvbCA9IHN5bWJvbCQxOwogIChmdW5jdGlvbihtb2R1bGUpIHsKICAgIHZhciBfU3ltYm9sID0gc3ltYm9sOwogICAgdmFyIF9nZXRJdGVyYXRvck1ldGhvZCA9IGdldEl0ZXJhdG9yTWV0aG9kJDI7CiAgICBmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpMikgewogICAgICB2YXIgX2kgPSBhcnIgPT0gbnVsbCA/IG51bGwgOiB0eXBlb2YgX1N5bWJvbCAhPT0gInVuZGVmaW5lZCIgJiYgX2dldEl0ZXJhdG9yTWV0aG9kKGFycikgfHwgYXJyWyJAQGl0ZXJhdG9yIl07CiAgICAgIGlmIChfaSA9PSBudWxsKQogICAgICAgIHJldHVybjsKICAgICAgdmFyIF9hcnIgPSBbXTsKICAgICAgdmFyIF9uID0gdHJ1ZTsKICAgICAgdmFyIF9kID0gZmFsc2U7CiAgICAgIHZhciBfcywgX2U7CiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaSA9IF9pLmNhbGwoYXJyKTsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgewogICAgICAgICAgX2Fyci5wdXNoKF9zLnZhbHVlKTsKICAgICAgICAgIGlmIChpMiAmJiBfYXJyLmxlbmd0aCA9PT0gaTIpCiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyMikgewogICAgICAgIF9kID0gdHJ1ZTsKICAgICAgICBfZSA9IGVycjI7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGlmICghX24gJiYgX2lbInJldHVybiJdICE9IG51bGwpCiAgICAgICAgICAgIF9pWyJyZXR1cm4iXSgpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICBpZiAoX2QpCiAgICAgICAgICAgIHRocm93IF9lOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gX2FycjsKICAgIH0KICAgIG1vZHVsZS5leHBvcnRzID0gX2l0ZXJhYmxlVG9BcnJheUxpbWl0OwogICAgbW9kdWxlLmV4cG9ydHNbImRlZmF1bHQiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKICB9KShpdGVyYWJsZVRvQXJyYXlMaW1pdCQxKTsKICB2YXIgdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkkMSA9IHsgZXhwb3J0czoge30gfTsKICB2YXIgJCRzID0gX2V4cG9ydDsKICB2YXIgaXNBcnJheSA9IGlzQXJyYXkkYTsKICB2YXIgaXNDb25zdHJ1Y3RvciA9IGlzQ29uc3RydWN0b3IkNDsKICB2YXIgaXNPYmplY3QkNyA9IGlzT2JqZWN0JGk7CiAgdmFyIHRvQWJzb2x1dGVJbmRleCA9IHRvQWJzb2x1dGVJbmRleCQyOwogIHZhciB0b0xlbmd0aCQ0ID0gdG9MZW5ndGgkOTsKICB2YXIgdG9JbmRleGVkT2JqZWN0ID0gdG9JbmRleGVkT2JqZWN0JDk7CiAgdmFyIGNyZWF0ZVByb3BlcnR5ID0gY3JlYXRlUHJvcGVydHkkNDsKICB2YXIgd2VsbEtub3duU3ltYm9sJDUgPSB3ZWxsS25vd25TeW1ib2wkbDsKICB2YXIgYXJyYXlNZXRob2RIYXNTcGVjaWVzU3VwcG9ydCQxID0gYXJyYXlNZXRob2RIYXNTcGVjaWVzU3VwcG9ydCQ0OwogIHZhciBIQVNfU1BFQ0lFU19TVVBQT1JUJDEgPSBhcnJheU1ldGhvZEhhc1NwZWNpZXNTdXBwb3J0JDEoInNsaWNlIik7CiAgdmFyIFNQRUNJRVMkMyA9IHdlbGxLbm93blN5bWJvbCQ1KCJzcGVjaWVzIik7CiAgdmFyIG5hdGl2ZVNsaWNlID0gW10uc2xpY2U7CiAgdmFyIG1heCA9IE1hdGgubWF4OwogICQkcyh7IHRhcmdldDogIkFycmF5IiwgcHJvdG86IHRydWUsIGZvcmNlZDogIUhBU19TUEVDSUVTX1NVUFBPUlQkMSB9LCB7CiAgICBzbGljZTogZnVuY3Rpb24gc2xpY2UyKHN0YXJ0LCBlbmQpIHsKICAgICAgdmFyIE8gPSB0b0luZGV4ZWRPYmplY3QodGhpcyk7CiAgICAgIHZhciBsZW5ndGggPSB0b0xlbmd0aCQ0KE8ubGVuZ3RoKTsKICAgICAgdmFyIGsgPSB0b0Fic29sdXRlSW5kZXgoc3RhcnQsIGxlbmd0aCk7CiAgICAgIHZhciBmaW4gPSB0b0Fic29sdXRlSW5kZXgoZW5kID09PSB2b2lkIDAgPyBsZW5ndGggOiBlbmQsIGxlbmd0aCk7CiAgICAgIHZhciBDb25zdHJ1Y3RvciwgcmVzdWx0LCBuOwogICAgICBpZiAoaXNBcnJheShPKSkgewogICAgICAgIENvbnN0cnVjdG9yID0gTy5jb25zdHJ1Y3RvcjsKICAgICAgICBpZiAoaXNDb25zdHJ1Y3RvcihDb25zdHJ1Y3RvcikgJiYgKENvbnN0cnVjdG9yID09PSBBcnJheSB8fCBpc0FycmF5KENvbnN0cnVjdG9yLnByb3RvdHlwZSkpKSB7CiAgICAgICAgICBDb25zdHJ1Y3RvciA9IHZvaWQgMDsKICAgICAgICB9IGVsc2UgaWYgKGlzT2JqZWN0JDcoQ29uc3RydWN0b3IpKSB7CiAgICAgICAgICBDb25zdHJ1Y3RvciA9IENvbnN0cnVjdG9yW1NQRUNJRVMkM107CiAgICAgICAgICBpZiAoQ29uc3RydWN0b3IgPT09IG51bGwpCiAgICAgICAgICAgIENvbnN0cnVjdG9yID0gdm9pZCAwOwogICAgICAgIH0KICAgICAgICBpZiAoQ29uc3RydWN0b3IgPT09IEFycmF5IHx8IENvbnN0cnVjdG9yID09PSB2b2lkIDApIHsKICAgICAgICAgIHJldHVybiBuYXRpdmVTbGljZS5jYWxsKE8sIGssIGZpbik7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJlc3VsdCA9IG5ldyAoQ29uc3RydWN0b3IgPT09IHZvaWQgMCA/IEFycmF5IDogQ29uc3RydWN0b3IpKG1heChmaW4gLSBrLCAwKSk7CiAgICAgIGZvciAobiA9IDA7IGsgPCBmaW47IGsrKywgbisrKQogICAgICAgIGlmIChrIGluIE8pCiAgICAgICAgICBjcmVhdGVQcm9wZXJ0eShyZXN1bHQsIG4sIE9ba10pOwogICAgICByZXN1bHQubGVuZ3RoID0gbjsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICB9KTsKICB2YXIgZW50cnlWaXJ0dWFsJDcgPSBlbnRyeVZpcnR1YWwkYTsKICB2YXIgc2xpY2UkNiA9IGVudHJ5VmlydHVhbCQ3KCJBcnJheSIpLnNsaWNlOwogIHZhciBzbGljZSQ1ID0gc2xpY2UkNjsKICB2YXIgQXJyYXlQcm90b3R5cGUkNSA9IEFycmF5LnByb3RvdHlwZTsKICB2YXIgc2xpY2VfMSA9IGZ1bmN0aW9uKGl0KSB7CiAgICB2YXIgb3duID0gaXQuc2xpY2U7CiAgICByZXR1cm4gaXQgPT09IEFycmF5UHJvdG90eXBlJDUgfHwgaXQgaW5zdGFuY2VvZiBBcnJheSAmJiBvd24gPT09IEFycmF5UHJvdG90eXBlJDUuc2xpY2UgPyBzbGljZSQ1IDogb3duOwogIH07CiAgdmFyIHBhcmVudCR5ID0gc2xpY2VfMTsKICB2YXIgc2xpY2UkNCA9IHBhcmVudCR5OwogIHZhciBwYXJlbnQkeCA9IHNsaWNlJDQ7CiAgdmFyIHNsaWNlJDMgPSBwYXJlbnQkeDsKICB2YXIgc2xpY2UkMiA9IHNsaWNlJDM7CiAgdmFyIHBhcmVudCR3ID0gZnJvbSQ0OwogIHZhciBmcm9tJDIgPSBwYXJlbnQkdzsKICB2YXIgZnJvbSQxID0gZnJvbSQyOwogIHZhciBhcnJheUxpa2VUb0FycmF5JDEgPSB7IGV4cG9ydHM6IHt9IH07CiAgKGZ1bmN0aW9uKG1vZHVsZSkgewogICAgZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4yKSB7CiAgICAgIGlmIChsZW4yID09IG51bGwgfHwgbGVuMiA+IGFyci5sZW5ndGgpCiAgICAgICAgbGVuMiA9IGFyci5sZW5ndGg7CiAgICAgIGZvciAodmFyIGkyID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4yKTsgaTIgPCBsZW4yOyBpMisrKSB7CiAgICAgICAgYXJyMltpMl0gPSBhcnJbaTJdOwogICAgICB9CiAgICAgIHJldHVybiBhcnIyOwogICAgfQogICAgbW9kdWxlLmV4cG9ydHMgPSBfYXJyYXlMaWtlVG9BcnJheTsKICAgIG1vZHVsZS5leHBvcnRzWyJkZWZhdWx0Il0gPSBtb2R1bGUuZXhwb3J0cywgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7CiAgfSkoYXJyYXlMaWtlVG9BcnJheSQxKTsKICAoZnVuY3Rpb24obW9kdWxlKSB7CiAgICB2YXIgX3NsaWNlSW5zdGFuY2VQcm9wZXJ0eSA9IHNsaWNlJDI7CiAgICB2YXIgX0FycmF5JGZyb20gPSBmcm9tJDE7CiAgICB2YXIgYXJyYXlMaWtlVG9BcnJheTIgPSBhcnJheUxpa2VUb0FycmF5JDEuZXhwb3J0czsKICAgIGZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsKICAgICAgdmFyIF9jb250ZXh0OwogICAgICBpZiAoIW8pCiAgICAgICAgcmV0dXJuOwogICAgICBpZiAodHlwZW9mIG8gPT09ICJzdHJpbmciKQogICAgICAgIHJldHVybiBhcnJheUxpa2VUb0FycmF5MihvLCBtaW5MZW4pOwogICAgICB2YXIgbiA9IF9zbGljZUluc3RhbmNlUHJvcGVydHkoX2NvbnRleHQgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykpLmNhbGwoX2NvbnRleHQsIDgsIC0xKTsKICAgICAgaWYgKG4gPT09ICJPYmplY3QiICYmIG8uY29uc3RydWN0b3IpCiAgICAgICAgbiA9IG8uY29uc3RydWN0b3IubmFtZTsKICAgICAgaWYgKG4gPT09ICJNYXAiIHx8IG4gPT09ICJTZXQiKQogICAgICAgIHJldHVybiBfQXJyYXkkZnJvbShvKTsKICAgICAgaWYgKG4gPT09ICJBcmd1bWVudHMiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKQogICAgICAgIHJldHVybiBhcnJheUxpa2VUb0FycmF5MihvLCBtaW5MZW4pOwogICAgfQogICAgbW9kdWxlLmV4cG9ydHMgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXk7CiAgICBtb2R1bGUuZXhwb3J0c1siZGVmYXVsdCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwogIH0pKHVuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5JDEpOwogIHZhciBub25JdGVyYWJsZVJlc3QkMSA9IHsgZXhwb3J0czoge30gfTsKICAoZnVuY3Rpb24obW9kdWxlKSB7CiAgICBmdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpOwogICAgfQogICAgbW9kdWxlLmV4cG9ydHMgPSBfbm9uSXRlcmFibGVSZXN0OwogICAgbW9kdWxlLmV4cG9ydHNbImRlZmF1bHQiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKICB9KShub25JdGVyYWJsZVJlc3QkMSk7CiAgKGZ1bmN0aW9uKG1vZHVsZSkgewogICAgdmFyIGFycmF5V2l0aEhvbGVzMiA9IGFycmF5V2l0aEhvbGVzJDEuZXhwb3J0czsKICAgIHZhciBpdGVyYWJsZVRvQXJyYXlMaW1pdDIgPSBpdGVyYWJsZVRvQXJyYXlMaW1pdCQxLmV4cG9ydHM7CiAgICB2YXIgdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkyID0gdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkkMS5leHBvcnRzOwogICAgdmFyIG5vbkl0ZXJhYmxlUmVzdDIgPSBub25JdGVyYWJsZVJlc3QkMS5leHBvcnRzOwogICAgZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpMikgewogICAgICByZXR1cm4gYXJyYXlXaXRoSG9sZXMyKGFycikgfHwgaXRlcmFibGVUb0FycmF5TGltaXQyKGFyciwgaTIpIHx8IHVuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5MihhcnIsIGkyKSB8fCBub25JdGVyYWJsZVJlc3QyKCk7CiAgICB9CiAgICBtb2R1bGUuZXhwb3J0cyA9IF9zbGljZWRUb0FycmF5OwogICAgbW9kdWxlLmV4cG9ydHNbImRlZmF1bHQiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKICB9KShzbGljZWRUb0FycmF5JDEpOwogIHZhciBkZWZpbmVQcm9wZXJ0eSQ2ID0geyBleHBvcnRzOiB7fSB9OwogIHZhciBwYXJlbnQkdiA9IGRlZmluZVByb3BlcnR5JGE7CiAgdmFyIGRlZmluZVByb3BlcnR5JDUgPSBwYXJlbnQkdjsKICB2YXIgZGVmaW5lUHJvcGVydHkkNCA9IGRlZmluZVByb3BlcnR5JDU7CiAgKGZ1bmN0aW9uKG1vZHVsZSkgewogICAgdmFyIF9PYmplY3QkZGVmaW5lUHJvcGVydHkgPSBkZWZpbmVQcm9wZXJ0eSQ0OwogICAgZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgewogICAgICBpZiAoa2V5IGluIG9iaikgewogICAgICAgIF9PYmplY3QkZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsKICAgICAgICAgIHZhbHVlLAogICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgb2JqW2tleV0gPSB2YWx1ZTsKICAgICAgfQogICAgICByZXR1cm4gb2JqOwogICAgfQogICAgbW9kdWxlLmV4cG9ydHMgPSBfZGVmaW5lUHJvcGVydHk7CiAgICBtb2R1bGUuZXhwb3J0c1siZGVmYXVsdCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwogIH0pKGRlZmluZVByb3BlcnR5JDYpOwogIHZhciAkJHIgPSBfZXhwb3J0OwogIHZhciAkbWFwID0gYXJyYXlJdGVyYXRpb24ubWFwOwogIHZhciBhcnJheU1ldGhvZEhhc1NwZWNpZXNTdXBwb3J0ID0gYXJyYXlNZXRob2RIYXNTcGVjaWVzU3VwcG9ydCQ0OwogIHZhciBIQVNfU1BFQ0lFU19TVVBQT1JUID0gYXJyYXlNZXRob2RIYXNTcGVjaWVzU3VwcG9ydCgibWFwIik7CiAgJCRyKHsgdGFyZ2V0OiAiQXJyYXkiLCBwcm90bzogdHJ1ZSwgZm9yY2VkOiAhSEFTX1NQRUNJRVNfU1VQUE9SVCB9LCB7CiAgICBtYXA6IGZ1bmN0aW9uIG1hcDIoY2FsbGJhY2tmbikgewogICAgICByZXR1cm4gJG1hcCh0aGlzLCBjYWxsYmFja2ZuLCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHZvaWQgMCk7CiAgICB9CiAgfSk7CiAgdmFyIGVudHJ5VmlydHVhbCQ2ID0gZW50cnlWaXJ0dWFsJGE7CiAgdmFyIG1hcCQzID0gZW50cnlWaXJ0dWFsJDYoIkFycmF5IikubWFwOwogIHZhciBtYXAkMiA9IG1hcCQzOwogIHZhciBBcnJheVByb3RvdHlwZSQ0ID0gQXJyYXkucHJvdG90eXBlOwogIHZhciBtYXBfMSA9IGZ1bmN0aW9uKGl0KSB7CiAgICB2YXIgb3duID0gaXQubWFwOwogICAgcmV0dXJuIGl0ID09PSBBcnJheVByb3RvdHlwZSQ0IHx8IGl0IGluc3RhbmNlb2YgQXJyYXkgJiYgb3duID09PSBBcnJheVByb3RvdHlwZSQ0Lm1hcCA/IG1hcCQyIDogb3duOwogIH07CiAgdmFyIHBhcmVudCR1ID0gbWFwXzE7CiAgdmFyIG1hcCQxID0gcGFyZW50JHU7CiAgdmFyIG1hcCA9IG1hcCQxOwogIHZhciBydW50aW1lID0geyBleHBvcnRzOiB7fSB9OwogIChmdW5jdGlvbihtb2R1bGUpIHsKICAgIHZhciBydW50aW1lMiA9IGZ1bmN0aW9uKGV4cG9ydHMpIHsKICAgICAgdmFyIE9wID0gT2JqZWN0LnByb3RvdHlwZTsKICAgICAgdmFyIGhhc093biA9IE9wLmhhc093blByb3BlcnR5OwogICAgICB2YXIgdW5kZWZpbmVkJDE7CiAgICAgIHZhciAkU3ltYm9sMiA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgPyBTeW1ib2wgOiB7fTsKICAgICAgdmFyIGl0ZXJhdG9yU3ltYm9sID0gJFN5bWJvbDIuaXRlcmF0b3IgfHwgIkBAaXRlcmF0b3IiOwogICAgICB2YXIgYXN5bmNJdGVyYXRvclN5bWJvbCA9ICRTeW1ib2wyLmFzeW5jSXRlcmF0b3IgfHwgIkBAYXN5bmNJdGVyYXRvciI7CiAgICAgIHZhciB0b1N0cmluZ1RhZ1N5bWJvbCA9ICRTeW1ib2wyLnRvU3RyaW5nVGFnIHx8ICJAQHRvU3RyaW5nVGFnIjsKICAgICAgZnVuY3Rpb24gZGVmaW5lKG9iaiwga2V5LCB2YWx1ZSkgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICAgICAgdmFsdWUsCiAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICAgICAgd3JpdGFibGU6IHRydWUKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gb2JqW2tleV07CiAgICAgIH0KICAgICAgdHJ5IHsKICAgICAgICBkZWZpbmUoe30sICIiKTsKICAgICAgfSBjYXRjaCAoZXJyMikgewogICAgICAgIGRlZmluZSA9IGZ1bmN0aW9uKG9iaiwga2V5LCB2YWx1ZSkgewogICAgICAgICAgcmV0dXJuIG9ialtrZXldID0gdmFsdWU7CiAgICAgICAgfTsKICAgICAgfQogICAgICBmdW5jdGlvbiB3cmFwMihpbm5lckZuLCBvdXRlckZuLCBzZWxmMiwgdHJ5TG9jc0xpc3QpIHsKICAgICAgICB2YXIgcHJvdG9HZW5lcmF0b3IgPSBvdXRlckZuICYmIG91dGVyRm4ucHJvdG90eXBlIGluc3RhbmNlb2YgR2VuZXJhdG9yID8gb3V0ZXJGbiA6IEdlbmVyYXRvcjsKICAgICAgICB2YXIgZ2VuZXJhdG9yID0gT2JqZWN0LmNyZWF0ZShwcm90b0dlbmVyYXRvci5wcm90b3R5cGUpOwogICAgICAgIHZhciBjb250ZXh0ID0gbmV3IENvbnRleHQodHJ5TG9jc0xpc3QgfHwgW10pOwogICAgICAgIGdlbmVyYXRvci5faW52b2tlID0gbWFrZUludm9rZU1ldGhvZChpbm5lckZuLCBzZWxmMiwgY29udGV4dCk7CiAgICAgICAgcmV0dXJuIGdlbmVyYXRvcjsKICAgICAgfQogICAgICBleHBvcnRzLndyYXAgPSB3cmFwMjsKICAgICAgZnVuY3Rpb24gdHJ5Q2F0Y2goZm4sIG9iaiwgYXJnKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHJldHVybiB7IHR5cGU6ICJub3JtYWwiLCBhcmc6IGZuLmNhbGwob2JqLCBhcmcpIH07CiAgICAgICAgfSBjYXRjaCAoZXJyMikgewogICAgICAgICAgcmV0dXJuIHsgdHlwZTogInRocm93IiwgYXJnOiBlcnIyIH07CiAgICAgICAgfQogICAgICB9CiAgICAgIHZhciBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0ID0gInN1c3BlbmRlZFN0YXJ0IjsKICAgICAgdmFyIEdlblN0YXRlU3VzcGVuZGVkWWllbGQgPSAic3VzcGVuZGVkWWllbGQiOwogICAgICB2YXIgR2VuU3RhdGVFeGVjdXRpbmcgPSAiZXhlY3V0aW5nIjsKICAgICAgdmFyIEdlblN0YXRlQ29tcGxldGVkID0gImNvbXBsZXRlZCI7CiAgICAgIHZhciBDb250aW51ZVNlbnRpbmVsID0ge307CiAgICAgIGZ1bmN0aW9uIEdlbmVyYXRvcigpIHsKICAgICAgfQogICAgICBmdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvbigpIHsKICAgICAgfQogICAgICBmdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSgpIHsKICAgICAgfQogICAgICB2YXIgSXRlcmF0b3JQcm90b3R5cGUyID0ge307CiAgICAgIGRlZmluZShJdGVyYXRvclByb3RvdHlwZTIsIGl0ZXJhdG9yU3ltYm9sLCBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfSk7CiAgICAgIHZhciBnZXRQcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjsKICAgICAgdmFyIE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlID0gZ2V0UHJvdG8gJiYgZ2V0UHJvdG8oZ2V0UHJvdG8odmFsdWVzKFtdKSkpOwogICAgICBpZiAoTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgJiYgTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgIT09IE9wICYmIGhhc093bi5jYWxsKE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlLCBpdGVyYXRvclN5bWJvbCkpIHsKICAgICAgICBJdGVyYXRvclByb3RvdHlwZTIgPSBOYXRpdmVJdGVyYXRvclByb3RvdHlwZTsKICAgICAgfQogICAgICB2YXIgR3AgPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZS5wcm90b3R5cGUgPSBHZW5lcmF0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShJdGVyYXRvclByb3RvdHlwZTIpOwogICAgICBHZW5lcmF0b3JGdW5jdGlvbi5wcm90b3R5cGUgPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZTsKICAgICAgZGVmaW5lKEdwLCAiY29uc3RydWN0b3IiLCBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSk7CiAgICAgIGRlZmluZShHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSwgImNvbnN0cnVjdG9yIiwgR2VuZXJhdG9yRnVuY3Rpb24pOwogICAgICBHZW5lcmF0b3JGdW5jdGlvbi5kaXNwbGF5TmFtZSA9IGRlZmluZShHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSwgdG9TdHJpbmdUYWdTeW1ib2wsICJHZW5lcmF0b3JGdW5jdGlvbiIpOwogICAgICBmdW5jdGlvbiBkZWZpbmVJdGVyYXRvck1ldGhvZHMocHJvdG90eXBlKSB7CiAgICAgICAgWyJuZXh0IiwgInRocm93IiwgInJldHVybiJdLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKSB7CiAgICAgICAgICBkZWZpbmUocHJvdG90eXBlLCBtZXRob2QsIGZ1bmN0aW9uKGFyZykgewogICAgICAgICAgICByZXR1cm4gdGhpcy5faW52b2tlKG1ldGhvZCwgYXJnKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIGV4cG9ydHMuaXNHZW5lcmF0b3JGdW5jdGlvbiA9IGZ1bmN0aW9uKGdlbkZ1bikgewogICAgICAgIHZhciBjdG9yID0gdHlwZW9mIGdlbkZ1biA9PT0gImZ1bmN0aW9uIiAmJiBnZW5GdW4uY29uc3RydWN0b3I7CiAgICAgICAgcmV0dXJuIGN0b3IgPyBjdG9yID09PSBHZW5lcmF0b3JGdW5jdGlvbiB8fCAoY3Rvci5kaXNwbGF5TmFtZSB8fCBjdG9yLm5hbWUpID09PSAiR2VuZXJhdG9yRnVuY3Rpb24iIDogZmFsc2U7CiAgICAgIH07CiAgICAgIGV4cG9ydHMubWFyayA9IGZ1bmN0aW9uKGdlbkZ1bikgewogICAgICAgIGlmIChPYmplY3Quc2V0UHJvdG90eXBlT2YpIHsKICAgICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihnZW5GdW4sIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZ2VuRnVuLl9fcHJvdG9fXyA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlOwogICAgICAgICAgZGVmaW5lKGdlbkZ1biwgdG9TdHJpbmdUYWdTeW1ib2wsICJHZW5lcmF0b3JGdW5jdGlvbiIpOwogICAgICAgIH0KICAgICAgICBnZW5GdW4ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShHcCk7CiAgICAgICAgcmV0dXJuIGdlbkZ1bjsKICAgICAgfTsKICAgICAgZXhwb3J0cy5hd3JhcCA9IGZ1bmN0aW9uKGFyZykgewogICAgICAgIHJldHVybiB7IF9fYXdhaXQ6IGFyZyB9OwogICAgICB9OwogICAgICBmdW5jdGlvbiBBc3luY0l0ZXJhdG9yKGdlbmVyYXRvciwgUHJvbWlzZUltcGwpIHsKICAgICAgICBmdW5jdGlvbiBpbnZva2UobWV0aG9kLCBhcmcsIHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgdmFyIHJlY29yZDIgPSB0cnlDYXRjaChnZW5lcmF0b3JbbWV0aG9kXSwgZ2VuZXJhdG9yLCBhcmcpOwogICAgICAgICAgaWYgKHJlY29yZDIudHlwZSA9PT0gInRocm93IikgewogICAgICAgICAgICByZWplY3QocmVjb3JkMi5hcmcpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHJlY29yZDIuYXJnOwogICAgICAgICAgICB2YXIgdmFsdWUgPSByZXN1bHQudmFsdWU7CiAgICAgICAgICAgIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICJvYmplY3QiICYmIGhhc093bi5jYWxsKHZhbHVlLCAiX19hd2FpdCIpKSB7CiAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2VJbXBsLnJlc29sdmUodmFsdWUuX19hd2FpdCkudGhlbihmdW5jdGlvbih2YWx1ZTIpIHsKICAgICAgICAgICAgICAgIGludm9rZSgibmV4dCIsIHZhbHVlMiwgcmVzb2x2ZSwgcmVqZWN0KTsKICAgICAgICAgICAgICB9LCBmdW5jdGlvbihlcnIyKSB7CiAgICAgICAgICAgICAgICBpbnZva2UoInRocm93IiwgZXJyMiwgcmVzb2x2ZSwgcmVqZWN0KTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gUHJvbWlzZUltcGwucmVzb2x2ZSh2YWx1ZSkudGhlbihmdW5jdGlvbih1bndyYXBwZWQpIHsKICAgICAgICAgICAgICByZXN1bHQudmFsdWUgPSB1bndyYXBwZWQ7CiAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQpOwogICAgICAgICAgICB9LCBmdW5jdGlvbihlcnJvcikgewogICAgICAgICAgICAgIHJldHVybiBpbnZva2UoInRocm93IiwgZXJyb3IsIHJlc29sdmUsIHJlamVjdCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB2YXIgcHJldmlvdXNQcm9taXNlOwogICAgICAgIGZ1bmN0aW9uIGVucXVldWUobWV0aG9kLCBhcmcpIHsKICAgICAgICAgIGZ1bmN0aW9uIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKCkgewogICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2VJbXBsKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICAgIGludm9rZShtZXRob2QsIGFyZywgcmVzb2x2ZSwgcmVqZWN0KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gcHJldmlvdXNQcm9taXNlID0gcHJldmlvdXNQcm9taXNlID8gcHJldmlvdXNQcm9taXNlLnRoZW4oY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcsIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKSA6IGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKCk7CiAgICAgICAgfQogICAgICAgIHRoaXMuX2ludm9rZSA9IGVucXVldWU7CiAgICAgIH0KICAgICAgZGVmaW5lSXRlcmF0b3JNZXRob2RzKEFzeW5jSXRlcmF0b3IucHJvdG90eXBlKTsKICAgICAgZGVmaW5lKEFzeW5jSXRlcmF0b3IucHJvdG90eXBlLCBhc3luY0l0ZXJhdG9yU3ltYm9sLCBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfSk7CiAgICAgIGV4cG9ydHMuQXN5bmNJdGVyYXRvciA9IEFzeW5jSXRlcmF0b3I7CiAgICAgIGV4cG9ydHMuYXN5bmMgPSBmdW5jdGlvbihpbm5lckZuLCBvdXRlckZuLCBzZWxmMiwgdHJ5TG9jc0xpc3QsIFByb21pc2VJbXBsKSB7CiAgICAgICAgaWYgKFByb21pc2VJbXBsID09PSB2b2lkIDApCiAgICAgICAgICBQcm9taXNlSW1wbCA9IFByb21pc2U7CiAgICAgICAgdmFyIGl0ZXIgPSBuZXcgQXN5bmNJdGVyYXRvcih3cmFwMihpbm5lckZuLCBvdXRlckZuLCBzZWxmMiwgdHJ5TG9jc0xpc3QpLCBQcm9taXNlSW1wbCk7CiAgICAgICAgcmV0dXJuIGV4cG9ydHMuaXNHZW5lcmF0b3JGdW5jdGlvbihvdXRlckZuKSA/IGl0ZXIgOiBpdGVyLm5leHQoKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCkgewogICAgICAgICAgcmV0dXJuIHJlc3VsdC5kb25lID8gcmVzdWx0LnZhbHVlIDogaXRlci5uZXh0KCk7CiAgICAgICAgfSk7CiAgICAgIH07CiAgICAgIGZ1bmN0aW9uIG1ha2VJbnZva2VNZXRob2QoaW5uZXJGbiwgc2VsZjIsIGNvbnRleHQpIHsKICAgICAgICB2YXIgc3RhdGUgPSBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0OwogICAgICAgIHJldHVybiBmdW5jdGlvbiBpbnZva2UobWV0aG9kLCBhcmcpIHsKICAgICAgICAgIGlmIChzdGF0ZSA9PT0gR2VuU3RhdGVFeGVjdXRpbmcpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBydW5uaW5nIik7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoc3RhdGUgPT09IEdlblN0YXRlQ29tcGxldGVkKSB7CiAgICAgICAgICAgIGlmIChtZXRob2QgPT09ICJ0aHJvdyIpIHsKICAgICAgICAgICAgICB0aHJvdyBhcmc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGRvbmVSZXN1bHQoKTsKICAgICAgICAgIH0KICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gbWV0aG9kOwogICAgICAgICAgY29udGV4dC5hcmcgPSBhcmc7CiAgICAgICAgICB3aGlsZSAodHJ1ZSkgewogICAgICAgICAgICB2YXIgZGVsZWdhdGUgPSBjb250ZXh0LmRlbGVnYXRlOwogICAgICAgICAgICBpZiAoZGVsZWdhdGUpIHsKICAgICAgICAgICAgICB2YXIgZGVsZWdhdGVSZXN1bHQgPSBtYXliZUludm9rZURlbGVnYXRlKGRlbGVnYXRlLCBjb250ZXh0KTsKICAgICAgICAgICAgICBpZiAoZGVsZWdhdGVSZXN1bHQpIHsKICAgICAgICAgICAgICAgIGlmIChkZWxlZ2F0ZVJlc3VsdCA9PT0gQ29udGludWVTZW50aW5lbCkKICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICByZXR1cm4gZGVsZWdhdGVSZXN1bHQ7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gIm5leHQiKSB7CiAgICAgICAgICAgICAgY29udGV4dC5zZW50ID0gY29udGV4dC5fc2VudCA9IGNvbnRleHQuYXJnOwogICAgICAgICAgICB9IGVsc2UgaWYgKGNvbnRleHQubWV0aG9kID09PSAidGhyb3ciKSB7CiAgICAgICAgICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0KSB7CiAgICAgICAgICAgICAgICBzdGF0ZSA9IEdlblN0YXRlQ29tcGxldGVkOwogICAgICAgICAgICAgICAgdGhyb3cgY29udGV4dC5hcmc7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGNvbnRleHQuZGlzcGF0Y2hFeGNlcHRpb24oY29udGV4dC5hcmcpOwogICAgICAgICAgICB9IGVsc2UgaWYgKGNvbnRleHQubWV0aG9kID09PSAicmV0dXJuIikgewogICAgICAgICAgICAgIGNvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBjb250ZXh0LmFyZyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc3RhdGUgPSBHZW5TdGF0ZUV4ZWN1dGluZzsKICAgICAgICAgICAgdmFyIHJlY29yZDIgPSB0cnlDYXRjaChpbm5lckZuLCBzZWxmMiwgY29udGV4dCk7CiAgICAgICAgICAgIGlmIChyZWNvcmQyLnR5cGUgPT09ICJub3JtYWwiKSB7CiAgICAgICAgICAgICAgc3RhdGUgPSBjb250ZXh0LmRvbmUgPyBHZW5TdGF0ZUNvbXBsZXRlZCA6IEdlblN0YXRlU3VzcGVuZGVkWWllbGQ7CiAgICAgICAgICAgICAgaWYgKHJlY29yZDIuYXJnID09PSBDb250aW51ZVNlbnRpbmVsKSB7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIHZhbHVlOiByZWNvcmQyLmFyZywKICAgICAgICAgICAgICAgIGRvbmU6IGNvbnRleHQuZG9uZQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVjb3JkMi50eXBlID09PSAidGhyb3ciKSB7CiAgICAgICAgICAgICAgc3RhdGUgPSBHZW5TdGF0ZUNvbXBsZXRlZDsKICAgICAgICAgICAgICBjb250ZXh0Lm1ldGhvZCA9ICJ0aHJvdyI7CiAgICAgICAgICAgICAgY29udGV4dC5hcmcgPSByZWNvcmQyLmFyZzsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0KICAgICAgZnVuY3Rpb24gbWF5YmVJbnZva2VEZWxlZ2F0ZShkZWxlZ2F0ZSwgY29udGV4dCkgewogICAgICAgIHZhciBtZXRob2QgPSBkZWxlZ2F0ZS5pdGVyYXRvcltjb250ZXh0Lm1ldGhvZF07CiAgICAgICAgaWYgKG1ldGhvZCA9PT0gdW5kZWZpbmVkJDEpIHsKICAgICAgICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsOwogICAgICAgICAgaWYgKGNvbnRleHQubWV0aG9kID09PSAidGhyb3ciKSB7CiAgICAgICAgICAgIGlmIChkZWxlZ2F0ZS5pdGVyYXRvclsicmV0dXJuIl0pIHsKICAgICAgICAgICAgICBjb250ZXh0Lm1ldGhvZCA9ICJyZXR1cm4iOwogICAgICAgICAgICAgIGNvbnRleHQuYXJnID0gdW5kZWZpbmVkJDE7CiAgICAgICAgICAgICAgbWF5YmVJbnZva2VEZWxlZ2F0ZShkZWxlZ2F0ZSwgY29udGV4dCk7CiAgICAgICAgICAgICAgaWYgKGNvbnRleHQubWV0aG9kID09PSAidGhyb3ciKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29udGV4dC5tZXRob2QgPSAidGhyb3ciOwogICAgICAgICAgICBjb250ZXh0LmFyZyA9IG5ldyBUeXBlRXJyb3IoIlRoZSBpdGVyYXRvciBkb2VzIG5vdCBwcm92aWRlIGEgJ3Rocm93JyBtZXRob2QiKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsOwogICAgICAgIH0KICAgICAgICB2YXIgcmVjb3JkMiA9IHRyeUNhdGNoKG1ldGhvZCwgZGVsZWdhdGUuaXRlcmF0b3IsIGNvbnRleHQuYXJnKTsKICAgICAgICBpZiAocmVjb3JkMi50eXBlID09PSAidGhyb3ciKSB7CiAgICAgICAgICBjb250ZXh0Lm1ldGhvZCA9ICJ0aHJvdyI7CiAgICAgICAgICBjb250ZXh0LmFyZyA9IHJlY29yZDIuYXJnOwogICAgICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7CiAgICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDsKICAgICAgICB9CiAgICAgICAgdmFyIGluZm8gPSByZWNvcmQyLmFyZzsKICAgICAgICBpZiAoIWluZm8pIHsKICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gInRocm93IjsKICAgICAgICAgIGNvbnRleHQuYXJnID0gbmV3IFR5cGVFcnJvcigiaXRlcmF0b3IgcmVzdWx0IGlzIG5vdCBhbiBvYmplY3QiKTsKICAgICAgICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsOwogICAgICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7CiAgICAgICAgfQogICAgICAgIGlmIChpbmZvLmRvbmUpIHsKICAgICAgICAgIGNvbnRleHRbZGVsZWdhdGUucmVzdWx0TmFtZV0gPSBpbmZvLnZhbHVlOwogICAgICAgICAgY29udGV4dC5uZXh0ID0gZGVsZWdhdGUubmV4dExvYzsKICAgICAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCAhPT0gInJldHVybiIpIHsKICAgICAgICAgICAgY29udGV4dC5tZXRob2QgPSAibmV4dCI7CiAgICAgICAgICAgIGNvbnRleHQuYXJnID0gdW5kZWZpbmVkJDE7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBpbmZvOwogICAgICAgIH0KICAgICAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDsKICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDsKICAgICAgfQogICAgICBkZWZpbmVJdGVyYXRvck1ldGhvZHMoR3ApOwogICAgICBkZWZpbmUoR3AsIHRvU3RyaW5nVGFnU3ltYm9sLCAiR2VuZXJhdG9yIik7CiAgICAgIGRlZmluZShHcCwgaXRlcmF0b3JTeW1ib2wsIGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9KTsKICAgICAgZGVmaW5lKEdwLCAidG9TdHJpbmciLCBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gIltvYmplY3QgR2VuZXJhdG9yXSI7CiAgICAgIH0pOwogICAgICBmdW5jdGlvbiBwdXNoVHJ5RW50cnkobG9jcykgewogICAgICAgIHZhciBlbnRyeSA9IHsgdHJ5TG9jOiBsb2NzWzBdIH07CiAgICAgICAgaWYgKDEgaW4gbG9jcykgewogICAgICAgICAgZW50cnkuY2F0Y2hMb2MgPSBsb2NzWzFdOwogICAgICAgIH0KICAgICAgICBpZiAoMiBpbiBsb2NzKSB7CiAgICAgICAgICBlbnRyeS5maW5hbGx5TG9jID0gbG9jc1syXTsKICAgICAgICAgIGVudHJ5LmFmdGVyTG9jID0gbG9jc1szXTsKICAgICAgICB9CiAgICAgICAgdGhpcy50cnlFbnRyaWVzLnB1c2goZW50cnkpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHJlc2V0VHJ5RW50cnkoZW50cnkpIHsKICAgICAgICB2YXIgcmVjb3JkMiA9IGVudHJ5LmNvbXBsZXRpb24gfHwge307CiAgICAgICAgcmVjb3JkMi50eXBlID0gIm5vcm1hbCI7CiAgICAgICAgZGVsZXRlIHJlY29yZDIuYXJnOwogICAgICAgIGVudHJ5LmNvbXBsZXRpb24gPSByZWNvcmQyOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIENvbnRleHQodHJ5TG9jc0xpc3QpIHsKICAgICAgICB0aGlzLnRyeUVudHJpZXMgPSBbeyB0cnlMb2M6ICJyb290IiB9XTsKICAgICAgICB0cnlMb2NzTGlzdC5mb3JFYWNoKHB1c2hUcnlFbnRyeSwgdGhpcyk7CiAgICAgICAgdGhpcy5yZXNldCh0cnVlKTsKICAgICAgfQogICAgICBleHBvcnRzLmtleXMgPSBmdW5jdGlvbihvYmplY3QpIHsKICAgICAgICB2YXIga2V5czIgPSBbXTsKICAgICAgICBmb3IgKHZhciBrZXkgaW4gb2JqZWN0KSB7CiAgICAgICAgICBrZXlzMi5wdXNoKGtleSk7CiAgICAgICAgfQogICAgICAgIGtleXMyLnJldmVyc2UoKTsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gbmV4dCgpIHsKICAgICAgICAgIHdoaWxlIChrZXlzMi5sZW5ndGgpIHsKICAgICAgICAgICAgdmFyIGtleTIgPSBrZXlzMi5wb3AoKTsKICAgICAgICAgICAgaWYgKGtleTIgaW4gb2JqZWN0KSB7CiAgICAgICAgICAgICAgbmV4dC52YWx1ZSA9IGtleTI7CiAgICAgICAgICAgICAgbmV4dC5kb25lID0gZmFsc2U7CiAgICAgICAgICAgICAgcmV0dXJuIG5leHQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIG5leHQuZG9uZSA9IHRydWU7CiAgICAgICAgICByZXR1cm4gbmV4dDsKICAgICAgICB9OwogICAgICB9OwogICAgICBmdW5jdGlvbiB2YWx1ZXMoaXRlcmFibGUpIHsKICAgICAgICBpZiAoaXRlcmFibGUpIHsKICAgICAgICAgIHZhciBpdGVyYXRvck1ldGhvZCA9IGl0ZXJhYmxlW2l0ZXJhdG9yU3ltYm9sXTsKICAgICAgICAgIGlmIChpdGVyYXRvck1ldGhvZCkgewogICAgICAgICAgICByZXR1cm4gaXRlcmF0b3JNZXRob2QuY2FsbChpdGVyYWJsZSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodHlwZW9mIGl0ZXJhYmxlLm5leHQgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgICAgcmV0dXJuIGl0ZXJhYmxlOwogICAgICAgICAgfQogICAgICAgICAgaWYgKCFpc05hTihpdGVyYWJsZS5sZW5ndGgpKSB7CiAgICAgICAgICAgIHZhciBpMiA9IC0xLCBuZXh0ID0gZnVuY3Rpb24gbmV4dDIoKSB7CiAgICAgICAgICAgICAgd2hpbGUgKCsraTIgPCBpdGVyYWJsZS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIGlmIChoYXNPd24uY2FsbChpdGVyYWJsZSwgaTIpKSB7CiAgICAgICAgICAgICAgICAgIG5leHQyLnZhbHVlID0gaXRlcmFibGVbaTJdOwogICAgICAgICAgICAgICAgICBuZXh0Mi5kb25lID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgIHJldHVybiBuZXh0MjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgbmV4dDIudmFsdWUgPSB1bmRlZmluZWQkMTsKICAgICAgICAgICAgICBuZXh0Mi5kb25lID0gdHJ1ZTsKICAgICAgICAgICAgICByZXR1cm4gbmV4dDI7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHJldHVybiBuZXh0Lm5leHQgPSBuZXh0OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4geyBuZXh0OiBkb25lUmVzdWx0IH07CiAgICAgIH0KICAgICAgZXhwb3J0cy52YWx1ZXMgPSB2YWx1ZXM7CiAgICAgIGZ1bmN0aW9uIGRvbmVSZXN1bHQoKSB7CiAgICAgICAgcmV0dXJuIHsgdmFsdWU6IHVuZGVmaW5lZCQxLCBkb25lOiB0cnVlIH07CiAgICAgIH0KICAgICAgQ29udGV4dC5wcm90b3R5cGUgPSB7CiAgICAgICAgY29uc3RydWN0b3I6IENvbnRleHQsCiAgICAgICAgcmVzZXQ6IGZ1bmN0aW9uKHNraXBUZW1wUmVzZXQpIHsKICAgICAgICAgIHRoaXMucHJldiA9IDA7CiAgICAgICAgICB0aGlzLm5leHQgPSAwOwogICAgICAgICAgdGhpcy5zZW50ID0gdGhpcy5fc2VudCA9IHVuZGVmaW5lZCQxOwogICAgICAgICAgdGhpcy5kb25lID0gZmFsc2U7CiAgICAgICAgICB0aGlzLmRlbGVnYXRlID0gbnVsbDsKICAgICAgICAgIHRoaXMubWV0aG9kID0gIm5leHQiOwogICAgICAgICAgdGhpcy5hcmcgPSB1bmRlZmluZWQkMTsKICAgICAgICAgIHRoaXMudHJ5RW50cmllcy5mb3JFYWNoKHJlc2V0VHJ5RW50cnkpOwogICAgICAgICAgaWYgKCFza2lwVGVtcFJlc2V0KSB7CiAgICAgICAgICAgIGZvciAodmFyIG5hbWUgaW4gdGhpcykgewogICAgICAgICAgICAgIGlmIChuYW1lLmNoYXJBdCgwKSA9PT0gInQiICYmIGhhc093bi5jYWxsKHRoaXMsIG5hbWUpICYmICFpc05hTigrbmFtZS5zbGljZSgxKSkpIHsKICAgICAgICAgICAgICAgIHRoaXNbbmFtZV0gPSB1bmRlZmluZWQkMTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHN0b3A6IGZ1bmN0aW9uKCkgewogICAgICAgICAgdGhpcy5kb25lID0gdHJ1ZTsKICAgICAgICAgIHZhciByb290RW50cnkgPSB0aGlzLnRyeUVudHJpZXNbMF07CiAgICAgICAgICB2YXIgcm9vdFJlY29yZCA9IHJvb3RFbnRyeS5jb21wbGV0aW9uOwogICAgICAgICAgaWYgKHJvb3RSZWNvcmQudHlwZSA9PT0gInRocm93IikgewogICAgICAgICAgICB0aHJvdyByb290UmVjb3JkLmFyZzsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiB0aGlzLnJ2YWw7CiAgICAgICAgfSwKICAgICAgICBkaXNwYXRjaEV4Y2VwdGlvbjogZnVuY3Rpb24oZXhjZXB0aW9uKSB7CiAgICAgICAgICBpZiAodGhpcy5kb25lKSB7CiAgICAgICAgICAgIHRocm93IGV4Y2VwdGlvbjsKICAgICAgICAgIH0KICAgICAgICAgIHZhciBjb250ZXh0ID0gdGhpczsKICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZShsb2MsIGNhdWdodCkgewogICAgICAgICAgICByZWNvcmQyLnR5cGUgPSAidGhyb3ciOwogICAgICAgICAgICByZWNvcmQyLmFyZyA9IGV4Y2VwdGlvbjsKICAgICAgICAgICAgY29udGV4dC5uZXh0ID0gbG9jOwogICAgICAgICAgICBpZiAoY2F1Z2h0KSB7CiAgICAgICAgICAgICAgY29udGV4dC5tZXRob2QgPSAibmV4dCI7CiAgICAgICAgICAgICAgY29udGV4dC5hcmcgPSB1bmRlZmluZWQkMTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gISFjYXVnaHQ7CiAgICAgICAgICB9CiAgICAgICAgICBmb3IgKHZhciBpMiA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpMiA+PSAwOyAtLWkyKSB7CiAgICAgICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpMl07CiAgICAgICAgICAgIHZhciByZWNvcmQyID0gZW50cnkuY29tcGxldGlvbjsKICAgICAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA9PT0gInJvb3QiKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZSgiZW5kIik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA8PSB0aGlzLnByZXYpIHsKICAgICAgICAgICAgICB2YXIgaGFzQ2F0Y2ggPSBoYXNPd24uY2FsbChlbnRyeSwgImNhdGNoTG9jIik7CiAgICAgICAgICAgICAgdmFyIGhhc0ZpbmFsbHkgPSBoYXNPd24uY2FsbChlbnRyeSwgImZpbmFsbHlMb2MiKTsKICAgICAgICAgICAgICBpZiAoaGFzQ2F0Y2ggJiYgaGFzRmluYWxseSkgewogICAgICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmNhdGNoTG9jKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuY2F0Y2hMb2MsIHRydWUpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByZXYgPCBlbnRyeS5maW5hbGx5TG9jKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuZmluYWxseUxvYyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChoYXNDYXRjaCkgewogICAgICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmNhdGNoTG9jKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuY2F0Y2hMb2MsIHRydWUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gZWxzZSBpZiAoaGFzRmluYWxseSkgewogICAgICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmZpbmFsbHlMb2MpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5maW5hbGx5TG9jKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJ0cnkgc3RhdGVtZW50IHdpdGhvdXQgY2F0Y2ggb3IgZmluYWxseSIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgYWJydXB0OiBmdW5jdGlvbih0eXBlLCBhcmcpIHsKICAgICAgICAgIGZvciAodmFyIGkyID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkyID49IDA7IC0taTIpIHsKICAgICAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2kyXTsKICAgICAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA8PSB0aGlzLnByZXYgJiYgaGFzT3duLmNhbGwoZW50cnksICJmaW5hbGx5TG9jIikgJiYgdGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykgewogICAgICAgICAgICAgIHZhciBmaW5hbGx5RW50cnkgPSBlbnRyeTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgaWYgKGZpbmFsbHlFbnRyeSAmJiAodHlwZSA9PT0gImJyZWFrIiB8fCB0eXBlID09PSAiY29udGludWUiKSAmJiBmaW5hbGx5RW50cnkudHJ5TG9jIDw9IGFyZyAmJiBhcmcgPD0gZmluYWxseUVudHJ5LmZpbmFsbHlMb2MpIHsKICAgICAgICAgICAgZmluYWxseUVudHJ5ID0gbnVsbDsKICAgICAgICAgIH0KICAgICAgICAgIHZhciByZWNvcmQyID0gZmluYWxseUVudHJ5ID8gZmluYWxseUVudHJ5LmNvbXBsZXRpb24gOiB7fTsKICAgICAgICAgIHJlY29yZDIudHlwZSA9IHR5cGU7CiAgICAgICAgICByZWNvcmQyLmFyZyA9IGFyZzsKICAgICAgICAgIGlmIChmaW5hbGx5RW50cnkpIHsKICAgICAgICAgICAgdGhpcy5tZXRob2QgPSAibmV4dCI7CiAgICAgICAgICAgIHRoaXMubmV4dCA9IGZpbmFsbHlFbnRyeS5maW5hbGx5TG9jOwogICAgICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBsZXRlKHJlY29yZDIpOwogICAgICAgIH0sCiAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKHJlY29yZDIsIGFmdGVyTG9jKSB7CiAgICAgICAgICBpZiAocmVjb3JkMi50eXBlID09PSAidGhyb3ciKSB7CiAgICAgICAgICAgIHRocm93IHJlY29yZDIuYXJnOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHJlY29yZDIudHlwZSA9PT0gImJyZWFrIiB8fCByZWNvcmQyLnR5cGUgPT09ICJjb250aW51ZSIpIHsKICAgICAgICAgICAgdGhpcy5uZXh0ID0gcmVjb3JkMi5hcmc7CiAgICAgICAgICB9IGVsc2UgaWYgKHJlY29yZDIudHlwZSA9PT0gInJldHVybiIpIHsKICAgICAgICAgICAgdGhpcy5ydmFsID0gdGhpcy5hcmcgPSByZWNvcmQyLmFyZzsKICAgICAgICAgICAgdGhpcy5tZXRob2QgPSAicmV0dXJuIjsKICAgICAgICAgICAgdGhpcy5uZXh0ID0gImVuZCI7CiAgICAgICAgICB9IGVsc2UgaWYgKHJlY29yZDIudHlwZSA9PT0gIm5vcm1hbCIgJiYgYWZ0ZXJMb2MpIHsKICAgICAgICAgICAgdGhpcy5uZXh0ID0gYWZ0ZXJMb2M7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDsKICAgICAgICB9LAogICAgICAgIGZpbmlzaDogZnVuY3Rpb24oZmluYWxseUxvYykgewogICAgICAgICAgZm9yICh2YXIgaTIgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaTIgPj0gMDsgLS1pMikgewogICAgICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaTJdOwogICAgICAgICAgICBpZiAoZW50cnkuZmluYWxseUxvYyA9PT0gZmluYWxseUxvYykgewogICAgICAgICAgICAgIHRoaXMuY29tcGxldGUoZW50cnkuY29tcGxldGlvbiwgZW50cnkuYWZ0ZXJMb2MpOwogICAgICAgICAgICAgIHJlc2V0VHJ5RW50cnkoZW50cnkpOwogICAgICAgICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICAiY2F0Y2giOiBmdW5jdGlvbih0cnlMb2MpIHsKICAgICAgICAgIGZvciAodmFyIGkyID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkyID49IDA7IC0taTIpIHsKICAgICAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2kyXTsKICAgICAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA9PT0gdHJ5TG9jKSB7CiAgICAgICAgICAgICAgdmFyIHJlY29yZDIgPSBlbnRyeS5jb21wbGV0aW9uOwogICAgICAgICAgICAgIGlmIChyZWNvcmQyLnR5cGUgPT09ICJ0aHJvdyIpIHsKICAgICAgICAgICAgICAgIHZhciB0aHJvd24gPSByZWNvcmQyLmFyZzsKICAgICAgICAgICAgICAgIHJlc2V0VHJ5RW50cnkoZW50cnkpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gdGhyb3duOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoImlsbGVnYWwgY2F0Y2ggYXR0ZW1wdCIpOwogICAgICAgIH0sCiAgICAgICAgZGVsZWdhdGVZaWVsZDogZnVuY3Rpb24oaXRlcmFibGUsIHJlc3VsdE5hbWUsIG5leHRMb2MpIHsKICAgICAgICAgIHRoaXMuZGVsZWdhdGUgPSB7CiAgICAgICAgICAgIGl0ZXJhdG9yOiB2YWx1ZXMoaXRlcmFibGUpLAogICAgICAgICAgICByZXN1bHROYW1lLAogICAgICAgICAgICBuZXh0TG9jCiAgICAgICAgICB9OwogICAgICAgICAgaWYgKHRoaXMubWV0aG9kID09PSAibmV4dCIpIHsKICAgICAgICAgICAgdGhpcy5hcmcgPSB1bmRlZmluZWQkMTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsOwogICAgICAgIH0KICAgICAgfTsKICAgICAgcmV0dXJuIGV4cG9ydHM7CiAgICB9KG1vZHVsZS5leHBvcnRzKTsKICAgIHRyeSB7CiAgICAgIHJlZ2VuZXJhdG9yUnVudGltZSA9IHJ1bnRpbWUyOwogICAgfSBjYXRjaCAoYWNjaWRlbnRhbFN0cmljdE1vZGUpIHsKICAgICAgaWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAib2JqZWN0IikgewogICAgICAgIGdsb2JhbFRoaXMucmVnZW5lcmF0b3JSdW50aW1lID0gcnVudGltZTI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgRnVuY3Rpb24oInIiLCAicmVnZW5lcmF0b3JSdW50aW1lID0gciIpKHJ1bnRpbWUyKTsKICAgICAgfQogICAgfQogIH0pKHJ1bnRpbWUpOwogIHZhciByZWdlbmVyYXRvciQxID0gcnVudGltZS5leHBvcnRzOwogIHZhciBhc3luY1RvR2VuZXJhdG9yJDEgPSB7IGV4cG9ydHM6IHt9IH07CiAgdmFyIGFuT2JqZWN0JDcgPSBhbk9iamVjdCRpOwogIHZhciBpc0FycmF5SXRlcmF0b3JNZXRob2QgPSBpc0FycmF5SXRlcmF0b3JNZXRob2QkMjsKICB2YXIgdG9MZW5ndGgkMyA9IHRvTGVuZ3RoJDk7CiAgdmFyIGJpbmQkOCA9IGZ1bmN0aW9uQmluZENvbnRleHQ7CiAgdmFyIGdldEl0ZXJhdG9yID0gZ2V0SXRlcmF0b3IkNjsKICB2YXIgZ2V0SXRlcmF0b3JNZXRob2QgPSBnZXRJdGVyYXRvck1ldGhvZCQ3OwogIHZhciBpdGVyYXRvckNsb3NlID0gaXRlcmF0b3JDbG9zZSQyOwogIHZhciBSZXN1bHQgPSBmdW5jdGlvbihzdG9wcGVkLCByZXN1bHQpIHsKICAgIHRoaXMuc3RvcHBlZCA9IHN0b3BwZWQ7CiAgICB0aGlzLnJlc3VsdCA9IHJlc3VsdDsKICB9OwogIHZhciBpdGVyYXRlJDcgPSBmdW5jdGlvbihpdGVyYWJsZSwgdW5ib3VuZEZ1bmN0aW9uLCBvcHRpb25zKSB7CiAgICB2YXIgdGhhdCA9IG9wdGlvbnMgJiYgb3B0aW9ucy50aGF0OwogICAgdmFyIEFTX0VOVFJJRVMgPSAhIShvcHRpb25zICYmIG9wdGlvbnMuQVNfRU5UUklFUyk7CiAgICB2YXIgSVNfSVRFUkFUT1IgPSAhIShvcHRpb25zICYmIG9wdGlvbnMuSVNfSVRFUkFUT1IpOwogICAgdmFyIElOVEVSUlVQVEVEID0gISEob3B0aW9ucyAmJiBvcHRpb25zLklOVEVSUlVQVEVEKTsKICAgIHZhciBmbiA9IGJpbmQkOCh1bmJvdW5kRnVuY3Rpb24sIHRoYXQsIDEgKyBBU19FTlRSSUVTICsgSU5URVJSVVBURUQpOwogICAgdmFyIGl0ZXJhdG9yMiwgaXRlckZuLCBpbmRleCwgbGVuZ3RoLCByZXN1bHQsIG5leHQsIHN0ZXA7CiAgICB2YXIgc3RvcCA9IGZ1bmN0aW9uKGNvbmRpdGlvbikgewogICAgICBpZiAoaXRlcmF0b3IyKQogICAgICAgIGl0ZXJhdG9yQ2xvc2UoaXRlcmF0b3IyLCAibm9ybWFsIiwgY29uZGl0aW9uKTsKICAgICAgcmV0dXJuIG5ldyBSZXN1bHQodHJ1ZSwgY29uZGl0aW9uKTsKICAgIH07CiAgICB2YXIgY2FsbEZuID0gZnVuY3Rpb24odmFsdWUpIHsKICAgICAgaWYgKEFTX0VOVFJJRVMpIHsKICAgICAgICBhbk9iamVjdCQ3KHZhbHVlKTsKICAgICAgICByZXR1cm4gSU5URVJSVVBURUQgPyBmbih2YWx1ZVswXSwgdmFsdWVbMV0sIHN0b3ApIDogZm4odmFsdWVbMF0sIHZhbHVlWzFdKTsKICAgICAgfQogICAgICByZXR1cm4gSU5URVJSVVBURUQgPyBmbih2YWx1ZSwgc3RvcCkgOiBmbih2YWx1ZSk7CiAgICB9OwogICAgaWYgKElTX0lURVJBVE9SKSB7CiAgICAgIGl0ZXJhdG9yMiA9IGl0ZXJhYmxlOwogICAgfSBlbHNlIHsKICAgICAgaXRlckZuID0gZ2V0SXRlcmF0b3JNZXRob2QoaXRlcmFibGUpOwogICAgICBpZiAoIWl0ZXJGbikKICAgICAgICB0aHJvdyBUeXBlRXJyb3IoU3RyaW5nKGl0ZXJhYmxlKSArICIgaXMgbm90IGl0ZXJhYmxlIik7CiAgICAgIGlmIChpc0FycmF5SXRlcmF0b3JNZXRob2QoaXRlckZuKSkgewogICAgICAgIGZvciAoaW5kZXggPSAwLCBsZW5ndGggPSB0b0xlbmd0aCQzKGl0ZXJhYmxlLmxlbmd0aCk7IGxlbmd0aCA+IGluZGV4OyBpbmRleCsrKSB7CiAgICAgICAgICByZXN1bHQgPSBjYWxsRm4oaXRlcmFibGVbaW5kZXhdKTsKICAgICAgICAgIGlmIChyZXN1bHQgJiYgcmVzdWx0IGluc3RhbmNlb2YgUmVzdWx0KQogICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgIH0KICAgICAgICByZXR1cm4gbmV3IFJlc3VsdChmYWxzZSk7CiAgICAgIH0KICAgICAgaXRlcmF0b3IyID0gZ2V0SXRlcmF0b3IoaXRlcmFibGUsIGl0ZXJGbik7CiAgICB9CiAgICBuZXh0ID0gaXRlcmF0b3IyLm5leHQ7CiAgICB3aGlsZSAoIShzdGVwID0gbmV4dC5jYWxsKGl0ZXJhdG9yMikpLmRvbmUpIHsKICAgICAgdHJ5IHsKICAgICAgICByZXN1bHQgPSBjYWxsRm4oc3RlcC52YWx1ZSk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgaXRlcmF0b3JDbG9zZShpdGVyYXRvcjIsICJ0aHJvdyIsIGVycm9yKTsKICAgICAgfQogICAgICBpZiAodHlwZW9mIHJlc3VsdCA9PSAib2JqZWN0IiAmJiByZXN1bHQgJiYgcmVzdWx0IGluc3RhbmNlb2YgUmVzdWx0KQogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICByZXR1cm4gbmV3IFJlc3VsdChmYWxzZSk7CiAgfTsKICB2YXIgJCRxID0gX2V4cG9ydDsKICB2YXIgZ2V0UHJvdG90eXBlT2YkNSA9IG9iamVjdEdldFByb3RvdHlwZU9mOwogIHZhciBzZXRQcm90b3R5cGVPZiQ2ID0gb2JqZWN0U2V0UHJvdG90eXBlT2Y7CiAgdmFyIGNyZWF0ZSQ1ID0gb2JqZWN0Q3JlYXRlOwogIHZhciBjcmVhdGVOb25FbnVtZXJhYmxlUHJvcGVydHkkMSA9IGNyZWF0ZU5vbkVudW1lcmFibGVQcm9wZXJ0eSQ3OwogIHZhciBjcmVhdGVQcm9wZXJ0eURlc2NyaXB0b3IgPSBjcmVhdGVQcm9wZXJ0eURlc2NyaXB0b3IkNjsKICB2YXIgaXRlcmF0ZSQ2ID0gaXRlcmF0ZSQ3OwogIHZhciB0b1N0cmluZyQ2ID0gdG9TdHJpbmckYTsKICB2YXIgJEFnZ3JlZ2F0ZUVycm9yID0gZnVuY3Rpb24gQWdncmVnYXRlRXJyb3IoZXJyb3JzLCBtZXNzYWdlKSB7CiAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICBpZiAoISh0aGF0IGluc3RhbmNlb2YgJEFnZ3JlZ2F0ZUVycm9yKSkKICAgICAgcmV0dXJuIG5ldyAkQWdncmVnYXRlRXJyb3IoZXJyb3JzLCBtZXNzYWdlKTsKICAgIGlmIChzZXRQcm90b3R5cGVPZiQ2KSB7CiAgICAgIHRoYXQgPSBzZXRQcm90b3R5cGVPZiQ2KG5ldyBFcnJvcih2b2lkIDApLCBnZXRQcm90b3R5cGVPZiQ1KHRoYXQpKTsKICAgIH0KICAgIGlmIChtZXNzYWdlICE9PSB2b2lkIDApCiAgICAgIGNyZWF0ZU5vbkVudW1lcmFibGVQcm9wZXJ0eSQxKHRoYXQsICJtZXNzYWdlIiwgdG9TdHJpbmckNihtZXNzYWdlKSk7CiAgICB2YXIgZXJyb3JzQXJyYXkgPSBbXTsKICAgIGl0ZXJhdGUkNihlcnJvcnMsIGVycm9yc0FycmF5LnB1c2gsIHsgdGhhdDogZXJyb3JzQXJyYXkgfSk7CiAgICBjcmVhdGVOb25FbnVtZXJhYmxlUHJvcGVydHkkMSh0aGF0LCAiZXJyb3JzIiwgZXJyb3JzQXJyYXkpOwogICAgcmV0dXJuIHRoYXQ7CiAgfTsKICAkQWdncmVnYXRlRXJyb3IucHJvdG90eXBlID0gY3JlYXRlJDUoRXJyb3IucHJvdG90eXBlLCB7CiAgICBjb25zdHJ1Y3RvcjogY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yKDUsICRBZ2dyZWdhdGVFcnJvciksCiAgICBtZXNzYWdlOiBjcmVhdGVQcm9wZXJ0eURlc2NyaXB0b3IoNSwgIiIpLAogICAgbmFtZTogY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yKDUsICJBZ2dyZWdhdGVFcnJvciIpCiAgfSk7CiAgJCRxKHsgZ2xvYmFsOiB0cnVlIH0sIHsKICAgIEFnZ3JlZ2F0ZUVycm9yOiAkQWdncmVnYXRlRXJyb3IKICB9KTsKICB2YXIgZ2xvYmFsJGIgPSBnbG9iYWwkbzsKICB2YXIgbmF0aXZlUHJvbWlzZUNvbnN0cnVjdG9yID0gZ2xvYmFsJGIuUHJvbWlzZTsKICB2YXIgcmVkZWZpbmUgPSByZWRlZmluZSQ0OwogIHZhciByZWRlZmluZUFsbCQzID0gZnVuY3Rpb24odGFyZ2V0LCBzcmMsIG9wdGlvbnMpIHsKICAgIGZvciAodmFyIGtleSBpbiBzcmMpIHsKICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy51bnNhZmUgJiYgdGFyZ2V0W2tleV0pCiAgICAgICAgdGFyZ2V0W2tleV0gPSBzcmNba2V5XTsKICAgICAgZWxzZQogICAgICAgIHJlZGVmaW5lKHRhcmdldCwga2V5LCBzcmNba2V5XSwgb3B0aW9ucyk7CiAgICB9CiAgICByZXR1cm4gdGFyZ2V0OwogIH07CiAgdmFyIGdldEJ1aWx0SW4kMyA9IGdldEJ1aWx0SW4kYjsKICB2YXIgZGVmaW5lUHJvcGVydHlNb2R1bGUgPSBvYmplY3REZWZpbmVQcm9wZXJ0eTsKICB2YXIgd2VsbEtub3duU3ltYm9sJDQgPSB3ZWxsS25vd25TeW1ib2wkbDsKICB2YXIgREVTQ1JJUFRPUlMkMyA9IGRlc2NyaXB0b3JzOwogIHZhciBTUEVDSUVTJDIgPSB3ZWxsS25vd25TeW1ib2wkNCgic3BlY2llcyIpOwogIHZhciBzZXRTcGVjaWVzJDEgPSBmdW5jdGlvbihDT05TVFJVQ1RPUl9OQU1FKSB7CiAgICB2YXIgQ29uc3RydWN0b3IgPSBnZXRCdWlsdEluJDMoQ09OU1RSVUNUT1JfTkFNRSk7CiAgICB2YXIgZGVmaW5lUHJvcGVydHkyID0gZGVmaW5lUHJvcGVydHlNb2R1bGUuZjsKICAgIGlmIChERVNDUklQVE9SUyQzICYmIENvbnN0cnVjdG9yICYmICFDb25zdHJ1Y3RvcltTUEVDSUVTJDJdKSB7CiAgICAgIGRlZmluZVByb3BlcnR5MihDb25zdHJ1Y3RvciwgU1BFQ0lFUyQyLCB7CiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICAgIGdldDogZnVuY3Rpb24oKSB7CiAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH07CiAgdmFyIGFuSW5zdGFuY2UkMyA9IGZ1bmN0aW9uKGl0LCBDb25zdHJ1Y3RvciwgbmFtZSkgewogICAgaWYgKGl0IGluc3RhbmNlb2YgQ29uc3RydWN0b3IpCiAgICAgIHJldHVybiBpdDsKICAgIHRocm93IFR5cGVFcnJvcigiSW5jb3JyZWN0ICIgKyAobmFtZSA/IG5hbWUgKyAiICIgOiAiIikgKyAiaW52b2NhdGlvbiIpOwogIH07CiAgdmFyIGFuT2JqZWN0JDYgPSBhbk9iamVjdCRpOwogIHZhciBhQ29uc3RydWN0b3IkMSA9IGFDb25zdHJ1Y3RvciQzOwogIHZhciB3ZWxsS25vd25TeW1ib2wkMyA9IHdlbGxLbm93blN5bWJvbCRsOwogIHZhciBTUEVDSUVTJDEgPSB3ZWxsS25vd25TeW1ib2wkMygic3BlY2llcyIpOwogIHZhciBzcGVjaWVzQ29uc3RydWN0b3IkMiA9IGZ1bmN0aW9uKE8sIGRlZmF1bHRDb25zdHJ1Y3RvcikgewogICAgdmFyIEMgPSBhbk9iamVjdCQ2KE8pLmNvbnN0cnVjdG9yOwogICAgdmFyIFM7CiAgICByZXR1cm4gQyA9PT0gdm9pZCAwIHx8IChTID0gYW5PYmplY3QkNihDKVtTUEVDSUVTJDFdKSA9PSB2b2lkIDAgPyBkZWZhdWx0Q29uc3RydWN0b3IgOiBhQ29uc3RydWN0b3IkMShTKTsKICB9OwogIHZhciB1c2VyQWdlbnQkNSA9IGVuZ2luZVVzZXJBZ2VudDsKICB2YXIgZW5naW5lSXNJb3MgPSAvKD86aXBhZHxpcGhvbmV8aXBvZCkuKmFwcGxld2Via2l0L2kudGVzdCh1c2VyQWdlbnQkNSk7CiAgdmFyIGNsYXNzb2YkMSA9IGNsYXNzb2ZSYXckMTsKICB2YXIgZ2xvYmFsJGEgPSBnbG9iYWwkbzsKICB2YXIgZW5naW5lSXNOb2RlID0gY2xhc3NvZiQxKGdsb2JhbCRhLnByb2Nlc3MpID09ICJwcm9jZXNzIjsKICB2YXIgZ2xvYmFsJDkgPSBnbG9iYWwkbzsKICB2YXIgaXNDYWxsYWJsZSQ1ID0gaXNDYWxsYWJsZSRsOwogIHZhciBmYWlscyQ3ID0gZmFpbHMkbjsKICB2YXIgYmluZCQ3ID0gZnVuY3Rpb25CaW5kQ29udGV4dDsKICB2YXIgaHRtbCA9IGh0bWwkMjsKICB2YXIgY3JlYXRlRWxlbWVudCA9IGRvY3VtZW50Q3JlYXRlRWxlbWVudCQxOwogIHZhciBJU19JT1MkMSA9IGVuZ2luZUlzSW9zOwogIHZhciBJU19OT0RFJDMgPSBlbmdpbmVJc05vZGU7CiAgdmFyIHNldCA9IGdsb2JhbCQ5LnNldEltbWVkaWF0ZTsKICB2YXIgY2xlYXIgPSBnbG9iYWwkOS5jbGVhckltbWVkaWF0ZTsKICB2YXIgcHJvY2VzcyQzID0gZ2xvYmFsJDkucHJvY2VzczsKICB2YXIgTWVzc2FnZUNoYW5uZWwgPSBnbG9iYWwkOS5NZXNzYWdlQ2hhbm5lbDsKICB2YXIgRGlzcGF0Y2ggPSBnbG9iYWwkOS5EaXNwYXRjaDsKICB2YXIgY291bnRlciA9IDA7CiAgdmFyIHF1ZXVlID0ge307CiAgdmFyIE9OUkVBRFlTVEFURUNIQU5HRSA9ICJvbnJlYWR5c3RhdGVjaGFuZ2UiOwogIHZhciBsb2NhdGlvbiwgZGVmZXIsIGNoYW5uZWwsIHBvcnQ7CiAgdHJ5IHsKICAgIGxvY2F0aW9uID0gZ2xvYmFsJDkubG9jYXRpb247CiAgfSBjYXRjaCAoZXJyb3IpIHsKICB9CiAgdmFyIHJ1biA9IGZ1bmN0aW9uKGlkMikgewogICAgaWYgKHF1ZXVlLmhhc093blByb3BlcnR5KGlkMikpIHsKICAgICAgdmFyIGZuID0gcXVldWVbaWQyXTsKICAgICAgZGVsZXRlIHF1ZXVlW2lkMl07CiAgICAgIGZuKCk7CiAgICB9CiAgfTsKICB2YXIgcnVubmVyID0gZnVuY3Rpb24oaWQyKSB7CiAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgIHJ1bihpZDIpOwogICAgfTsKICB9OwogIHZhciBsaXN0ZW5lciA9IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICBydW4oZXZlbnQuZGF0YSk7CiAgfTsKICB2YXIgcG9zdCA9IGZ1bmN0aW9uKGlkMikgewogICAgZ2xvYmFsJDkucG9zdE1lc3NhZ2UoU3RyaW5nKGlkMiksIGxvY2F0aW9uLnByb3RvY29sICsgIi8vIiArIGxvY2F0aW9uLmhvc3QpOwogIH07CiAgaWYgKCFzZXQgfHwgIWNsZWFyKSB7CiAgICBzZXQgPSBmdW5jdGlvbiBzZXRJbW1lZGlhdGUoZm4pIHsKICAgICAgdmFyIGFyZ3MgPSBbXTsKICAgICAgdmFyIGFyZ3VtZW50c0xlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGg7CiAgICAgIHZhciBpMiA9IDE7CiAgICAgIHdoaWxlIChhcmd1bWVudHNMZW5ndGggPiBpMikKICAgICAgICBhcmdzLnB1c2goYXJndW1lbnRzW2kyKytdKTsKICAgICAgcXVldWVbKytjb3VudGVyXSA9IGZ1bmN0aW9uKCkgewogICAgICAgIChpc0NhbGxhYmxlJDUoZm4pID8gZm4gOiBGdW5jdGlvbihmbikpLmFwcGx5KHZvaWQgMCwgYXJncyk7CiAgICAgIH07CiAgICAgIGRlZmVyKGNvdW50ZXIpOwogICAgICByZXR1cm4gY291bnRlcjsKICAgIH07CiAgICBjbGVhciA9IGZ1bmN0aW9uIGNsZWFySW1tZWRpYXRlKGlkMikgewogICAgICBkZWxldGUgcXVldWVbaWQyXTsKICAgIH07CiAgICBpZiAoSVNfTk9ERSQzKSB7CiAgICAgIGRlZmVyID0gZnVuY3Rpb24oaWQyKSB7CiAgICAgICAgcHJvY2VzcyQzLm5leHRUaWNrKHJ1bm5lcihpZDIpKTsKICAgICAgfTsKICAgIH0gZWxzZSBpZiAoRGlzcGF0Y2ggJiYgRGlzcGF0Y2gubm93KSB7CiAgICAgIGRlZmVyID0gZnVuY3Rpb24oaWQyKSB7CiAgICAgICAgRGlzcGF0Y2gubm93KHJ1bm5lcihpZDIpKTsKICAgICAgfTsKICAgIH0gZWxzZSBpZiAoTWVzc2FnZUNoYW5uZWwgJiYgIUlTX0lPUyQxKSB7CiAgICAgIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTsKICAgICAgcG9ydCA9IGNoYW5uZWwucG9ydDI7CiAgICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gbGlzdGVuZXI7CiAgICAgIGRlZmVyID0gYmluZCQ3KHBvcnQucG9zdE1lc3NhZ2UsIHBvcnQsIDEpOwogICAgfSBlbHNlIGlmIChnbG9iYWwkOS5hZGRFdmVudExpc3RlbmVyICYmIGlzQ2FsbGFibGUkNShnbG9iYWwkOS5wb3N0TWVzc2FnZSkgJiYgIWdsb2JhbCQ5LmltcG9ydFNjcmlwdHMgJiYgbG9jYXRpb24gJiYgbG9jYXRpb24ucHJvdG9jb2wgIT09ICJmaWxlOiIgJiYgIWZhaWxzJDcocG9zdCkpIHsKICAgICAgZGVmZXIgPSBwb3N0OwogICAgICBnbG9iYWwkOS5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwgbGlzdGVuZXIsIGZhbHNlKTsKICAgIH0gZWxzZSBpZiAoT05SRUFEWVNUQVRFQ0hBTkdFIGluIGNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpKSB7CiAgICAgIGRlZmVyID0gZnVuY3Rpb24oaWQyKSB7CiAgICAgICAgaHRtbC5hcHBlbmRDaGlsZChjcmVhdGVFbGVtZW50KCJzY3JpcHQiKSlbT05SRUFEWVNUQVRFQ0hBTkdFXSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgaHRtbC5yZW1vdmVDaGlsZCh0aGlzKTsKICAgICAgICAgIHJ1bihpZDIpOwogICAgICAgIH07CiAgICAgIH07CiAgICB9IGVsc2UgewogICAgICBkZWZlciA9IGZ1bmN0aW9uKGlkMikgewogICAgICAgIHNldFRpbWVvdXQocnVubmVyKGlkMiksIDApOwogICAgICB9OwogICAgfQogIH0KICB2YXIgdGFzayQxID0gewogICAgc2V0LAogICAgY2xlYXIKICB9OwogIHZhciB1c2VyQWdlbnQkNCA9IGVuZ2luZVVzZXJBZ2VudDsKICB2YXIgZ2xvYmFsJDggPSBnbG9iYWwkbzsKICB2YXIgZW5naW5lSXNJb3NQZWJibGUgPSAvaXBhZHxpcGhvbmV8aXBvZC9pLnRlc3QodXNlckFnZW50JDQpICYmIGdsb2JhbCQ4LlBlYmJsZSAhPT0gdm9pZCAwOwogIHZhciB1c2VyQWdlbnQkMyA9IGVuZ2luZVVzZXJBZ2VudDsKICB2YXIgZW5naW5lSXNXZWJvc1dlYmtpdCA9IC93ZWIwcyg/IS4qY2hyb21lKS9pLnRlc3QodXNlckFnZW50JDMpOwogIHZhciBnbG9iYWwkNyA9IGdsb2JhbCRvOwogIHZhciBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IkMiA9IG9iamVjdEdldE93blByb3BlcnR5RGVzY3JpcHRvci5mOwogIHZhciBtYWNyb3Rhc2sgPSB0YXNrJDEuc2V0OwogIHZhciBJU19JT1MgPSBlbmdpbmVJc0lvczsKICB2YXIgSVNfSU9TX1BFQkJMRSA9IGVuZ2luZUlzSW9zUGViYmxlOwogIHZhciBJU19XRUJPU19XRUJLSVQgPSBlbmdpbmVJc1dlYm9zV2Via2l0OwogIHZhciBJU19OT0RFJDIgPSBlbmdpbmVJc05vZGU7CiAgdmFyIE11dGF0aW9uT2JzZXJ2ZXIgPSBnbG9iYWwkNy5NdXRhdGlvbk9ic2VydmVyIHx8IGdsb2JhbCQ3LldlYktpdE11dGF0aW9uT2JzZXJ2ZXI7CiAgdmFyIGRvY3VtZW50JDIgPSBnbG9iYWwkNy5kb2N1bWVudDsKICB2YXIgcHJvY2VzcyQyID0gZ2xvYmFsJDcucHJvY2VzczsKICB2YXIgUHJvbWlzZSQxID0gZ2xvYmFsJDcuUHJvbWlzZTsKICB2YXIgcXVldWVNaWNyb3Rhc2tEZXNjcmlwdG9yID0gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yJDIoZ2xvYmFsJDcsICJxdWV1ZU1pY3JvdGFzayIpOwogIHZhciBxdWV1ZU1pY3JvdGFzayA9IHF1ZXVlTWljcm90YXNrRGVzY3JpcHRvciAmJiBxdWV1ZU1pY3JvdGFza0Rlc2NyaXB0b3IudmFsdWU7CiAgdmFyIGZsdXNoLCBoZWFkLCBsYXN0LCBub3RpZnkkMSwgdG9nZ2xlLCBub2RlLCBwcm9taXNlJDUsIHRoZW47CiAgaWYgKCFxdWV1ZU1pY3JvdGFzaykgewogICAgZmx1c2ggPSBmdW5jdGlvbigpIHsKICAgICAgdmFyIHBhcmVudDIsIGZuOwogICAgICBpZiAoSVNfTk9ERSQyICYmIChwYXJlbnQyID0gcHJvY2VzcyQyLmRvbWFpbikpCiAgICAgICAgcGFyZW50Mi5leGl0KCk7CiAgICAgIHdoaWxlIChoZWFkKSB7CiAgICAgICAgZm4gPSBoZWFkLmZuOwogICAgICAgIGhlYWQgPSBoZWFkLm5leHQ7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGZuKCk7CiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgIGlmIChoZWFkKQogICAgICAgICAgICBub3RpZnkkMSgpOwogICAgICAgICAgZWxzZQogICAgICAgICAgICBsYXN0ID0gdm9pZCAwOwogICAgICAgICAgdGhyb3cgZXJyb3I7CiAgICAgICAgfQogICAgICB9CiAgICAgIGxhc3QgPSB2b2lkIDA7CiAgICAgIGlmIChwYXJlbnQyKQogICAgICAgIHBhcmVudDIuZW50ZXIoKTsKICAgIH07CiAgICBpZiAoIUlTX0lPUyAmJiAhSVNfTk9ERSQyICYmICFJU19XRUJPU19XRUJLSVQgJiYgTXV0YXRpb25PYnNlcnZlciAmJiBkb2N1bWVudCQyKSB7CiAgICAgIHRvZ2dsZSA9IHRydWU7CiAgICAgIG5vZGUgPSBkb2N1bWVudCQyLmNyZWF0ZVRleHROb2RlKCIiKTsKICAgICAgbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZmx1c2gpLm9ic2VydmUobm9kZSwgeyBjaGFyYWN0ZXJEYXRhOiB0cnVlIH0pOwogICAgICBub3RpZnkkMSA9IGZ1bmN0aW9uKCkgewogICAgICAgIG5vZGUuZGF0YSA9IHRvZ2dsZSA9ICF0b2dnbGU7CiAgICAgIH07CiAgICB9IGVsc2UgaWYgKCFJU19JT1NfUEVCQkxFICYmIFByb21pc2UkMSAmJiBQcm9taXNlJDEucmVzb2x2ZSkgewogICAgICBwcm9taXNlJDUgPSBQcm9taXNlJDEucmVzb2x2ZSh2b2lkIDApOwogICAgICBwcm9taXNlJDUuY29uc3RydWN0b3IgPSBQcm9taXNlJDE7CiAgICAgIHRoZW4gPSBwcm9taXNlJDUudGhlbjsKICAgICAgbm90aWZ5JDEgPSBmdW5jdGlvbigpIHsKICAgICAgICB0aGVuLmNhbGwocHJvbWlzZSQ1LCBmbHVzaCk7CiAgICAgIH07CiAgICB9IGVsc2UgaWYgKElTX05PREUkMikgewogICAgICBub3RpZnkkMSA9IGZ1bmN0aW9uKCkgewogICAgICAgIHByb2Nlc3MkMi5uZXh0VGljayhmbHVzaCk7CiAgICAgIH07CiAgICB9IGVsc2UgewogICAgICBub3RpZnkkMSA9IGZ1bmN0aW9uKCkgewogICAgICAgIG1hY3JvdGFzay5jYWxsKGdsb2JhbCQ3LCBmbHVzaCk7CiAgICAgIH07CiAgICB9CiAgfQogIHZhciBtaWNyb3Rhc2skMSA9IHF1ZXVlTWljcm90YXNrIHx8IGZ1bmN0aW9uKGZuKSB7CiAgICB2YXIgdGFzazIgPSB7IGZuLCBuZXh0OiB2b2lkIDAgfTsKICAgIGlmIChsYXN0KQogICAgICBsYXN0Lm5leHQgPSB0YXNrMjsKICAgIGlmICghaGVhZCkgewogICAgICBoZWFkID0gdGFzazI7CiAgICAgIG5vdGlmeSQxKCk7CiAgICB9CiAgICBsYXN0ID0gdGFzazI7CiAgfTsKICB2YXIgbmV3UHJvbWlzZUNhcGFiaWxpdHkkMiA9IHt9OwogIHZhciBhQ2FsbGFibGUkNyA9IGFDYWxsYWJsZSRjOwogIHZhciBQcm9taXNlQ2FwYWJpbGl0eSA9IGZ1bmN0aW9uKEMpIHsKICAgIHZhciByZXNvbHZlLCByZWplY3Q7CiAgICB0aGlzLnByb21pc2UgPSBuZXcgQyhmdW5jdGlvbigkJHJlc29sdmUsICQkcmVqZWN0KSB7CiAgICAgIGlmIChyZXNvbHZlICE9PSB2b2lkIDAgfHwgcmVqZWN0ICE9PSB2b2lkIDApCiAgICAgICAgdGhyb3cgVHlwZUVycm9yKCJCYWQgUHJvbWlzZSBjb25zdHJ1Y3RvciIpOwogICAgICByZXNvbHZlID0gJCRyZXNvbHZlOwogICAgICByZWplY3QgPSAkJHJlamVjdDsKICAgIH0pOwogICAgdGhpcy5yZXNvbHZlID0gYUNhbGxhYmxlJDcocmVzb2x2ZSk7CiAgICB0aGlzLnJlamVjdCA9IGFDYWxsYWJsZSQ3KHJlamVjdCk7CiAgfTsKICBuZXdQcm9taXNlQ2FwYWJpbGl0eSQyLmYgPSBmdW5jdGlvbihDKSB7CiAgICByZXR1cm4gbmV3IFByb21pc2VDYXBhYmlsaXR5KEMpOwogIH07CiAgdmFyIGFuT2JqZWN0JDUgPSBhbk9iamVjdCRpOwogIHZhciBpc09iamVjdCQ2ID0gaXNPYmplY3QkaTsKICB2YXIgbmV3UHJvbWlzZUNhcGFiaWxpdHkkMSA9IG5ld1Byb21pc2VDYXBhYmlsaXR5JDI7CiAgdmFyIHByb21pc2VSZXNvbHZlJDIgPSBmdW5jdGlvbihDLCB4KSB7CiAgICBhbk9iamVjdCQ1KEMpOwogICAgaWYgKGlzT2JqZWN0JDYoeCkgJiYgeC5jb25zdHJ1Y3RvciA9PT0gQykKICAgICAgcmV0dXJuIHg7CiAgICB2YXIgcHJvbWlzZUNhcGFiaWxpdHkgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eSQxLmYoQyk7CiAgICB2YXIgcmVzb2x2ZSA9IHByb21pc2VDYXBhYmlsaXR5LnJlc29sdmU7CiAgICByZXNvbHZlKHgpOwogICAgcmV0dXJuIHByb21pc2VDYXBhYmlsaXR5LnByb21pc2U7CiAgfTsKICB2YXIgZ2xvYmFsJDYgPSBnbG9iYWwkbzsKICB2YXIgaG9zdFJlcG9ydEVycm9ycyQxID0gZnVuY3Rpb24oYSwgYikgewogICAgdmFyIGNvbnNvbGUyID0gZ2xvYmFsJDYuY29uc29sZTsKICAgIGlmIChjb25zb2xlMiAmJiBjb25zb2xlMi5lcnJvcikgewogICAgICBhcmd1bWVudHMubGVuZ3RoID09PSAxID8gY29uc29sZTIuZXJyb3IoYSkgOiBjb25zb2xlMi5lcnJvcihhLCBiKTsKICAgIH0KICB9OwogIHZhciBwZXJmb3JtJDQgPSBmdW5jdGlvbihleGVjMikgewogICAgdHJ5IHsKICAgICAgcmV0dXJuIHsgZXJyb3I6IGZhbHNlLCB2YWx1ZTogZXhlYzIoKSB9OwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgcmV0dXJuIHsgZXJyb3I6IHRydWUsIHZhbHVlOiBlcnJvciB9OwogICAgfQogIH07CiAgdmFyIGVuZ2luZUlzQnJvd3NlciA9IHR5cGVvZiB3aW5kb3cgPT0gIm9iamVjdCI7CiAgdmFyICQkcCA9IF9leHBvcnQ7CiAgdmFyIElTX1BVUkUkMyA9IGlzUHVyZTsKICB2YXIgZ2xvYmFsJDUgPSBnbG9iYWwkbzsKICB2YXIgZ2V0QnVpbHRJbiQyID0gZ2V0QnVpbHRJbiRiOwogIHZhciBOYXRpdmVQcm9taXNlJDEgPSBuYXRpdmVQcm9taXNlQ29uc3RydWN0b3I7CiAgdmFyIHJlZGVmaW5lQWxsJDIgPSByZWRlZmluZUFsbCQzOwogIHZhciBzZXRUb1N0cmluZ1RhZyQxID0gc2V0VG9TdHJpbmdUYWckNjsKICB2YXIgc2V0U3BlY2llcyA9IHNldFNwZWNpZXMkMTsKICB2YXIgYUNhbGxhYmxlJDYgPSBhQ2FsbGFibGUkYzsKICB2YXIgaXNDYWxsYWJsZSQ0ID0gaXNDYWxsYWJsZSRsOwogIHZhciBpc09iamVjdCQ1ID0gaXNPYmplY3QkaTsKICB2YXIgYW5JbnN0YW5jZSQyID0gYW5JbnN0YW5jZSQzOwogIHZhciBpbnNwZWN0U291cmNlID0gaW5zcGVjdFNvdXJjZSQzOwogIHZhciBpdGVyYXRlJDUgPSBpdGVyYXRlJDc7CiAgdmFyIGNoZWNrQ29ycmVjdG5lc3NPZkl0ZXJhdGlvbiA9IGNoZWNrQ29ycmVjdG5lc3NPZkl0ZXJhdGlvbiQyOwogIHZhciBzcGVjaWVzQ29uc3RydWN0b3IkMSA9IHNwZWNpZXNDb25zdHJ1Y3RvciQyOwogIHZhciB0YXNrID0gdGFzayQxLnNldDsKICB2YXIgbWljcm90YXNrID0gbWljcm90YXNrJDE7CiAgdmFyIHByb21pc2VSZXNvbHZlJDEgPSBwcm9taXNlUmVzb2x2ZSQyOwogIHZhciBob3N0UmVwb3J0RXJyb3JzID0gaG9zdFJlcG9ydEVycm9ycyQxOwogIHZhciBuZXdQcm9taXNlQ2FwYWJpbGl0eU1vZHVsZSQzID0gbmV3UHJvbWlzZUNhcGFiaWxpdHkkMjsKICB2YXIgcGVyZm9ybSQzID0gcGVyZm9ybSQ0OwogIHZhciBJbnRlcm5hbFN0YXRlTW9kdWxlJDIgPSBpbnRlcm5hbFN0YXRlOwogIHZhciBpc0ZvcmNlZCA9IGlzRm9yY2VkXzE7CiAgdmFyIHdlbGxLbm93blN5bWJvbCQyID0gd2VsbEtub3duU3ltYm9sJGw7CiAgdmFyIElTX0JST1dTRVIgPSBlbmdpbmVJc0Jyb3dzZXI7CiAgdmFyIElTX05PREUkMSA9IGVuZ2luZUlzTm9kZTsKICB2YXIgVjhfVkVSU0lPTiA9IGVuZ2luZVY4VmVyc2lvbjsKICB2YXIgU1BFQ0lFUyA9IHdlbGxLbm93blN5bWJvbCQyKCJzcGVjaWVzIik7CiAgdmFyIFBST01JU0UgPSAiUHJvbWlzZSI7CiAgdmFyIGdldEludGVybmFsU3RhdGUgPSBJbnRlcm5hbFN0YXRlTW9kdWxlJDIuZ2V0OwogIHZhciBzZXRJbnRlcm5hbFN0YXRlJDIgPSBJbnRlcm5hbFN0YXRlTW9kdWxlJDIuc2V0OwogIHZhciBnZXRJbnRlcm5hbFByb21pc2VTdGF0ZSA9IEludGVybmFsU3RhdGVNb2R1bGUkMi5nZXR0ZXJGb3IoUFJPTUlTRSk7CiAgdmFyIE5hdGl2ZVByb21pc2VQcm90b3R5cGUgPSBOYXRpdmVQcm9taXNlJDEgJiYgTmF0aXZlUHJvbWlzZSQxLnByb3RvdHlwZTsKICB2YXIgUHJvbWlzZUNvbnN0cnVjdG9yID0gTmF0aXZlUHJvbWlzZSQxOwogIHZhciBQcm9taXNlQ29uc3RydWN0b3JQcm90b3R5cGUgPSBOYXRpdmVQcm9taXNlUHJvdG90eXBlOwogIHZhciBUeXBlRXJyb3IkMSA9IGdsb2JhbCQ1LlR5cGVFcnJvcjsKICB2YXIgZG9jdW1lbnQkMSA9IGdsb2JhbCQ1LmRvY3VtZW50OwogIHZhciBwcm9jZXNzJDEgPSBnbG9iYWwkNS5wcm9jZXNzOwogIHZhciBuZXdQcm9taXNlQ2FwYWJpbGl0eSA9IG5ld1Byb21pc2VDYXBhYmlsaXR5TW9kdWxlJDMuZjsKICB2YXIgbmV3R2VuZXJpY1Byb21pc2VDYXBhYmlsaXR5ID0gbmV3UHJvbWlzZUNhcGFiaWxpdHk7CiAgdmFyIERJU1BBVENIX0VWRU5UID0gISEoZG9jdW1lbnQkMSAmJiBkb2N1bWVudCQxLmNyZWF0ZUV2ZW50ICYmIGdsb2JhbCQ1LmRpc3BhdGNoRXZlbnQpOwogIHZhciBOQVRJVkVfUkVKRUNUSU9OX0VWRU5UID0gaXNDYWxsYWJsZSQ0KGdsb2JhbCQ1LlByb21pc2VSZWplY3Rpb25FdmVudCk7CiAgdmFyIFVOSEFORExFRF9SRUpFQ1RJT04gPSAidW5oYW5kbGVkcmVqZWN0aW9uIjsKICB2YXIgUkVKRUNUSU9OX0hBTkRMRUQgPSAicmVqZWN0aW9uaGFuZGxlZCI7CiAgdmFyIFBFTkRJTkcgPSAwOwogIHZhciBGVUxGSUxMRUQgPSAxOwogIHZhciBSRUpFQ1RFRCA9IDI7CiAgdmFyIEhBTkRMRUQgPSAxOwogIHZhciBVTkhBTkRMRUQgPSAyOwogIHZhciBTVUJDTEFTU0lORyA9IGZhbHNlOwogIHZhciBJbnRlcm5hbCwgT3duUHJvbWlzZUNhcGFiaWxpdHksIFByb21pc2VXcmFwcGVyOwogIHZhciBGT1JDRUQkMiA9IGlzRm9yY2VkKFBST01JU0UsIGZ1bmN0aW9uKCkgewogICAgdmFyIFBST01JU0VfQ09OU1RSVUNUT1JfU09VUkNFID0gaW5zcGVjdFNvdXJjZShQcm9taXNlQ29uc3RydWN0b3IpOwogICAgdmFyIEdMT0JBTF9DT1JFX0pTX1BST01JU0UgPSBQUk9NSVNFX0NPTlNUUlVDVE9SX1NPVVJDRSAhPT0gU3RyaW5nKFByb21pc2VDb25zdHJ1Y3Rvcik7CiAgICBpZiAoIUdMT0JBTF9DT1JFX0pTX1BST01JU0UgJiYgVjhfVkVSU0lPTiA9PT0gNjYpCiAgICAgIHJldHVybiB0cnVlOwogICAgaWYgKCFQcm9taXNlQ29uc3RydWN0b3JQcm90b3R5cGVbImZpbmFsbHkiXSkKICAgICAgcmV0dXJuIHRydWU7CiAgICBpZiAoVjhfVkVSU0lPTiA+PSA1MSAmJiAvbmF0aXZlIGNvZGUvLnRlc3QoUFJPTUlTRV9DT05TVFJVQ1RPUl9TT1VSQ0UpKQogICAgICByZXR1cm4gZmFsc2U7CiAgICB2YXIgcHJvbWlzZTIgPSBuZXcgUHJvbWlzZUNvbnN0cnVjdG9yKGZ1bmN0aW9uKHJlc29sdmUpIHsKICAgICAgcmVzb2x2ZSgxKTsKICAgIH0pOwogICAgdmFyIEZha2VQcm9taXNlID0gZnVuY3Rpb24oZXhlYzIpIHsKICAgICAgZXhlYzIoZnVuY3Rpb24oKSB7CiAgICAgIH0sIGZ1bmN0aW9uKCkgewogICAgICB9KTsKICAgIH07CiAgICB2YXIgY29uc3RydWN0b3IgPSBwcm9taXNlMi5jb25zdHJ1Y3RvciA9IHt9OwogICAgY29uc3RydWN0b3JbU1BFQ0lFU10gPSBGYWtlUHJvbWlzZTsKICAgIFNVQkNMQVNTSU5HID0gcHJvbWlzZTIudGhlbihmdW5jdGlvbigpIHsKICAgIH0pIGluc3RhbmNlb2YgRmFrZVByb21pc2U7CiAgICBpZiAoIVNVQkNMQVNTSU5HKQogICAgICByZXR1cm4gdHJ1ZTsKICAgIHJldHVybiAhR0xPQkFMX0NPUkVfSlNfUFJPTUlTRSAmJiBJU19CUk9XU0VSICYmICFOQVRJVkVfUkVKRUNUSU9OX0VWRU5UOwogIH0pOwogIHZhciBJTkNPUlJFQ1RfSVRFUkFUSU9OID0gRk9SQ0VEJDIgfHwgIWNoZWNrQ29ycmVjdG5lc3NPZkl0ZXJhdGlvbihmdW5jdGlvbihpdGVyYWJsZSkgewogICAgUHJvbWlzZUNvbnN0cnVjdG9yLmFsbChpdGVyYWJsZSlbImNhdGNoIl0oZnVuY3Rpb24oKSB7CiAgICB9KTsKICB9KTsKICB2YXIgaXNUaGVuYWJsZSA9IGZ1bmN0aW9uKGl0KSB7CiAgICB2YXIgdGhlbjI7CiAgICByZXR1cm4gaXNPYmplY3QkNShpdCkgJiYgaXNDYWxsYWJsZSQ0KHRoZW4yID0gaXQudGhlbikgPyB0aGVuMiA6IGZhbHNlOwogIH07CiAgdmFyIG5vdGlmeSA9IGZ1bmN0aW9uKHN0YXRlLCBpc1JlamVjdCkgewogICAgaWYgKHN0YXRlLm5vdGlmaWVkKQogICAgICByZXR1cm47CiAgICBzdGF0ZS5ub3RpZmllZCA9IHRydWU7CiAgICB2YXIgY2hhaW4gPSBzdGF0ZS5yZWFjdGlvbnM7CiAgICBtaWNyb3Rhc2soZnVuY3Rpb24oKSB7CiAgICAgIHZhciB2YWx1ZSA9IHN0YXRlLnZhbHVlOwogICAgICB2YXIgb2sgPSBzdGF0ZS5zdGF0ZSA9PSBGVUxGSUxMRUQ7CiAgICAgIHZhciBpbmRleCA9IDA7CiAgICAgIHdoaWxlIChjaGFpbi5sZW5ndGggPiBpbmRleCkgewogICAgICAgIHZhciByZWFjdGlvbiA9IGNoYWluW2luZGV4KytdOwogICAgICAgIHZhciBoYW5kbGVyID0gb2sgPyByZWFjdGlvbi5vayA6IHJlYWN0aW9uLmZhaWw7CiAgICAgICAgdmFyIHJlc29sdmUgPSByZWFjdGlvbi5yZXNvbHZlOwogICAgICAgIHZhciByZWplY3QgPSByZWFjdGlvbi5yZWplY3Q7CiAgICAgICAgdmFyIGRvbWFpbiA9IHJlYWN0aW9uLmRvbWFpbjsKICAgICAgICB2YXIgcmVzdWx0LCB0aGVuMiwgZXhpdGVkOwogICAgICAgIHRyeSB7CiAgICAgICAgICBpZiAoaGFuZGxlcikgewogICAgICAgICAgICBpZiAoIW9rKSB7CiAgICAgICAgICAgICAgaWYgKHN0YXRlLnJlamVjdGlvbiA9PT0gVU5IQU5ETEVEKQogICAgICAgICAgICAgICAgb25IYW5kbGVVbmhhbmRsZWQoc3RhdGUpOwogICAgICAgICAgICAgIHN0YXRlLnJlamVjdGlvbiA9IEhBTkRMRUQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGhhbmRsZXIgPT09IHRydWUpCiAgICAgICAgICAgICAgcmVzdWx0ID0gdmFsdWU7CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgIGlmIChkb21haW4pCiAgICAgICAgICAgICAgICBkb21haW4uZW50ZXIoKTsKICAgICAgICAgICAgICByZXN1bHQgPSBoYW5kbGVyKHZhbHVlKTsKICAgICAgICAgICAgICBpZiAoZG9tYWluKSB7CiAgICAgICAgICAgICAgICBkb21haW4uZXhpdCgpOwogICAgICAgICAgICAgICAgZXhpdGVkID0gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gcmVhY3Rpb24ucHJvbWlzZSkgewogICAgICAgICAgICAgIHJlamVjdChUeXBlRXJyb3IkMSgiUHJvbWlzZS1jaGFpbiBjeWNsZSIpKTsKICAgICAgICAgICAgfSBlbHNlIGlmICh0aGVuMiA9IGlzVGhlbmFibGUocmVzdWx0KSkgewogICAgICAgICAgICAgIHRoZW4yLmNhbGwocmVzdWx0LCByZXNvbHZlLCByZWplY3QpOwogICAgICAgICAgICB9IGVsc2UKICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7CiAgICAgICAgICB9IGVsc2UKICAgICAgICAgICAgcmVqZWN0KHZhbHVlKTsKICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgaWYgKGRvbWFpbiAmJiAhZXhpdGVkKQogICAgICAgICAgICBkb21haW4uZXhpdCgpOwogICAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgc3RhdGUucmVhY3Rpb25zID0gW107CiAgICAgIHN0YXRlLm5vdGlmaWVkID0gZmFsc2U7CiAgICAgIGlmIChpc1JlamVjdCAmJiAhc3RhdGUucmVqZWN0aW9uKQogICAgICAgIG9uVW5oYW5kbGVkKHN0YXRlKTsKICAgIH0pOwogIH07CiAgdmFyIGRpc3BhdGNoRXZlbnQgPSBmdW5jdGlvbihuYW1lLCBwcm9taXNlMiwgcmVhc29uKSB7CiAgICB2YXIgZXZlbnQsIGhhbmRsZXI7CiAgICBpZiAoRElTUEFUQ0hfRVZFTlQpIHsKICAgICAgZXZlbnQgPSBkb2N1bWVudCQxLmNyZWF0ZUV2ZW50KCJFdmVudCIpOwogICAgICBldmVudC5wcm9taXNlID0gcHJvbWlzZTI7CiAgICAgIGV2ZW50LnJlYXNvbiA9IHJlYXNvbjsKICAgICAgZXZlbnQuaW5pdEV2ZW50KG5hbWUsIGZhbHNlLCB0cnVlKTsKICAgICAgZ2xvYmFsJDUuZGlzcGF0Y2hFdmVudChldmVudCk7CiAgICB9IGVsc2UKICAgICAgZXZlbnQgPSB7IHByb21pc2U6IHByb21pc2UyLCByZWFzb24gfTsKICAgIGlmICghTkFUSVZFX1JFSkVDVElPTl9FVkVOVCAmJiAoaGFuZGxlciA9IGdsb2JhbCQ1WyJvbiIgKyBuYW1lXSkpCiAgICAgIGhhbmRsZXIoZXZlbnQpOwogICAgZWxzZSBpZiAobmFtZSA9PT0gVU5IQU5ETEVEX1JFSkVDVElPTikKICAgICAgaG9zdFJlcG9ydEVycm9ycygiVW5oYW5kbGVkIHByb21pc2UgcmVqZWN0aW9uIiwgcmVhc29uKTsKICB9OwogIHZhciBvblVuaGFuZGxlZCA9IGZ1bmN0aW9uKHN0YXRlKSB7CiAgICB0YXNrLmNhbGwoZ2xvYmFsJDUsIGZ1bmN0aW9uKCkgewogICAgICB2YXIgcHJvbWlzZTIgPSBzdGF0ZS5mYWNhZGU7CiAgICAgIHZhciB2YWx1ZSA9IHN0YXRlLnZhbHVlOwogICAgICB2YXIgSVNfVU5IQU5ETEVEID0gaXNVbmhhbmRsZWQoc3RhdGUpOwogICAgICB2YXIgcmVzdWx0OwogICAgICBpZiAoSVNfVU5IQU5ETEVEKSB7CiAgICAgICAgcmVzdWx0ID0gcGVyZm9ybSQzKGZ1bmN0aW9uKCkgewogICAgICAgICAgaWYgKElTX05PREUkMSkgewogICAgICAgICAgICBwcm9jZXNzJDEuZW1pdCgidW5oYW5kbGVkUmVqZWN0aW9uIiwgdmFsdWUsIHByb21pc2UyKTsKICAgICAgICAgIH0gZWxzZQogICAgICAgICAgICBkaXNwYXRjaEV2ZW50KFVOSEFORExFRF9SRUpFQ1RJT04sIHByb21pc2UyLCB2YWx1ZSk7CiAgICAgICAgfSk7CiAgICAgICAgc3RhdGUucmVqZWN0aW9uID0gSVNfTk9ERSQxIHx8IGlzVW5oYW5kbGVkKHN0YXRlKSA/IFVOSEFORExFRCA6IEhBTkRMRUQ7CiAgICAgICAgaWYgKHJlc3VsdC5lcnJvcikKICAgICAgICAgIHRocm93IHJlc3VsdC52YWx1ZTsKICAgICAgfQogICAgfSk7CiAgfTsKICB2YXIgaXNVbmhhbmRsZWQgPSBmdW5jdGlvbihzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLnJlamVjdGlvbiAhPT0gSEFORExFRCAmJiAhc3RhdGUucGFyZW50OwogIH07CiAgdmFyIG9uSGFuZGxlVW5oYW5kbGVkID0gZnVuY3Rpb24oc3RhdGUpIHsKICAgIHRhc2suY2FsbChnbG9iYWwkNSwgZnVuY3Rpb24oKSB7CiAgICAgIHZhciBwcm9taXNlMiA9IHN0YXRlLmZhY2FkZTsKICAgICAgaWYgKElTX05PREUkMSkgewogICAgICAgIHByb2Nlc3MkMS5lbWl0KCJyZWplY3Rpb25IYW5kbGVkIiwgcHJvbWlzZTIpOwogICAgICB9IGVsc2UKICAgICAgICBkaXNwYXRjaEV2ZW50KFJFSkVDVElPTl9IQU5ETEVELCBwcm9taXNlMiwgc3RhdGUudmFsdWUpOwogICAgfSk7CiAgfTsKICB2YXIgYmluZCQ2ID0gZnVuY3Rpb24oZm4sIHN0YXRlLCB1bndyYXApIHsKICAgIHJldHVybiBmdW5jdGlvbih2YWx1ZSkgewogICAgICBmbihzdGF0ZSwgdmFsdWUsIHVud3JhcCk7CiAgICB9OwogIH07CiAgdmFyIGludGVybmFsUmVqZWN0ID0gZnVuY3Rpb24oc3RhdGUsIHZhbHVlLCB1bndyYXApIHsKICAgIGlmIChzdGF0ZS5kb25lKQogICAgICByZXR1cm47CiAgICBzdGF0ZS5kb25lID0gdHJ1ZTsKICAgIGlmICh1bndyYXApCiAgICAgIHN0YXRlID0gdW53cmFwOwogICAgc3RhdGUudmFsdWUgPSB2YWx1ZTsKICAgIHN0YXRlLnN0YXRlID0gUkVKRUNURUQ7CiAgICBub3RpZnkoc3RhdGUsIHRydWUpOwogIH07CiAgdmFyIGludGVybmFsUmVzb2x2ZSA9IGZ1bmN0aW9uKHN0YXRlLCB2YWx1ZSwgdW53cmFwKSB7CiAgICBpZiAoc3RhdGUuZG9uZSkKICAgICAgcmV0dXJuOwogICAgc3RhdGUuZG9uZSA9IHRydWU7CiAgICBpZiAodW53cmFwKQogICAgICBzdGF0ZSA9IHVud3JhcDsKICAgIHRyeSB7CiAgICAgIGlmIChzdGF0ZS5mYWNhZGUgPT09IHZhbHVlKQogICAgICAgIHRocm93IFR5cGVFcnJvciQxKCJQcm9taXNlIGNhbid0IGJlIHJlc29sdmVkIGl0c2VsZiIpOwogICAgICB2YXIgdGhlbjIgPSBpc1RoZW5hYmxlKHZhbHVlKTsKICAgICAgaWYgKHRoZW4yKSB7CiAgICAgICAgbWljcm90YXNrKGZ1bmN0aW9uKCkgewogICAgICAgICAgdmFyIHdyYXBwZXIyID0geyBkb25lOiBmYWxzZSB9OwogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgdGhlbjIuY2FsbCh2YWx1ZSwgYmluZCQ2KGludGVybmFsUmVzb2x2ZSwgd3JhcHBlcjIsIHN0YXRlKSwgYmluZCQ2KGludGVybmFsUmVqZWN0LCB3cmFwcGVyMiwgc3RhdGUpKTsKICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgIGludGVybmFsUmVqZWN0KHdyYXBwZXIyLCBlcnJvciwgc3RhdGUpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHN0YXRlLnZhbHVlID0gdmFsdWU7CiAgICAgICAgc3RhdGUuc3RhdGUgPSBGVUxGSUxMRUQ7CiAgICAgICAgbm90aWZ5KHN0YXRlLCBmYWxzZSk7CiAgICAgIH0KICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgIGludGVybmFsUmVqZWN0KHsgZG9uZTogZmFsc2UgfSwgZXJyb3IsIHN0YXRlKTsKICAgIH0KICB9OwogIGlmIChGT1JDRUQkMikgewogICAgUHJvbWlzZUNvbnN0cnVjdG9yID0gZnVuY3Rpb24gUHJvbWlzZTIoZXhlY3V0b3IpIHsKICAgICAgYW5JbnN0YW5jZSQyKHRoaXMsIFByb21pc2VDb25zdHJ1Y3RvciwgUFJPTUlTRSk7CiAgICAgIGFDYWxsYWJsZSQ2KGV4ZWN1dG9yKTsKICAgICAgSW50ZXJuYWwuY2FsbCh0aGlzKTsKICAgICAgdmFyIHN0YXRlID0gZ2V0SW50ZXJuYWxTdGF0ZSh0aGlzKTsKICAgICAgdHJ5IHsKICAgICAgICBleGVjdXRvcihiaW5kJDYoaW50ZXJuYWxSZXNvbHZlLCBzdGF0ZSksIGJpbmQkNihpbnRlcm5hbFJlamVjdCwgc3RhdGUpKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBpbnRlcm5hbFJlamVjdChzdGF0ZSwgZXJyb3IpOwogICAgICB9CiAgICB9OwogICAgUHJvbWlzZUNvbnN0cnVjdG9yUHJvdG90eXBlID0gUHJvbWlzZUNvbnN0cnVjdG9yLnByb3RvdHlwZTsKICAgIEludGVybmFsID0gZnVuY3Rpb24gUHJvbWlzZTIoZXhlY3V0b3IpIHsKICAgICAgc2V0SW50ZXJuYWxTdGF0ZSQyKHRoaXMsIHsKICAgICAgICB0eXBlOiBQUk9NSVNFLAogICAgICAgIGRvbmU6IGZhbHNlLAogICAgICAgIG5vdGlmaWVkOiBmYWxzZSwKICAgICAgICBwYXJlbnQ6IGZhbHNlLAogICAgICAgIHJlYWN0aW9uczogW10sCiAgICAgICAgcmVqZWN0aW9uOiBmYWxzZSwKICAgICAgICBzdGF0ZTogUEVORElORywKICAgICAgICB2YWx1ZTogdm9pZCAwCiAgICAgIH0pOwogICAgfTsKICAgIEludGVybmFsLnByb3RvdHlwZSA9IHJlZGVmaW5lQWxsJDIoUHJvbWlzZUNvbnN0cnVjdG9yUHJvdG90eXBlLCB7CiAgICAgIHRoZW46IGZ1bmN0aW9uIHRoZW4yKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKSB7CiAgICAgICAgdmFyIHN0YXRlID0gZ2V0SW50ZXJuYWxQcm9taXNlU3RhdGUodGhpcyk7CiAgICAgICAgdmFyIHJlYWN0aW9uID0gbmV3UHJvbWlzZUNhcGFiaWxpdHkoc3BlY2llc0NvbnN0cnVjdG9yJDEodGhpcywgUHJvbWlzZUNvbnN0cnVjdG9yKSk7CiAgICAgICAgcmVhY3Rpb24ub2sgPSBpc0NhbGxhYmxlJDQob25GdWxmaWxsZWQpID8gb25GdWxmaWxsZWQgOiB0cnVlOwogICAgICAgIHJlYWN0aW9uLmZhaWwgPSBpc0NhbGxhYmxlJDQob25SZWplY3RlZCkgJiYgb25SZWplY3RlZDsKICAgICAgICByZWFjdGlvbi5kb21haW4gPSBJU19OT0RFJDEgPyBwcm9jZXNzJDEuZG9tYWluIDogdm9pZCAwOwogICAgICAgIHN0YXRlLnBhcmVudCA9IHRydWU7CiAgICAgICAgc3RhdGUucmVhY3Rpb25zLnB1c2gocmVhY3Rpb24pOwogICAgICAgIGlmIChzdGF0ZS5zdGF0ZSAhPSBQRU5ESU5HKQogICAgICAgICAgbm90aWZ5KHN0YXRlLCBmYWxzZSk7CiAgICAgICAgcmV0dXJuIHJlYWN0aW9uLnByb21pc2U7CiAgICAgIH0sCiAgICAgICJjYXRjaCI6IGZ1bmN0aW9uKG9uUmVqZWN0ZWQpIHsKICAgICAgICByZXR1cm4gdGhpcy50aGVuKHZvaWQgMCwgb25SZWplY3RlZCk7CiAgICAgIH0KICAgIH0pOwogICAgT3duUHJvbWlzZUNhcGFiaWxpdHkgPSBmdW5jdGlvbigpIHsKICAgICAgdmFyIHByb21pc2UyID0gbmV3IEludGVybmFsKCk7CiAgICAgIHZhciBzdGF0ZSA9IGdldEludGVybmFsU3RhdGUocHJvbWlzZTIpOwogICAgICB0aGlzLnByb21pc2UgPSBwcm9taXNlMjsKICAgICAgdGhpcy5yZXNvbHZlID0gYmluZCQ2KGludGVybmFsUmVzb2x2ZSwgc3RhdGUpOwogICAgICB0aGlzLnJlamVjdCA9IGJpbmQkNihpbnRlcm5hbFJlamVjdCwgc3RhdGUpOwogICAgfTsKICAgIG5ld1Byb21pc2VDYXBhYmlsaXR5TW9kdWxlJDMuZiA9IG5ld1Byb21pc2VDYXBhYmlsaXR5ID0gZnVuY3Rpb24oQykgewogICAgICByZXR1cm4gQyA9PT0gUHJvbWlzZUNvbnN0cnVjdG9yIHx8IEMgPT09IFByb21pc2VXcmFwcGVyID8gbmV3IE93blByb21pc2VDYXBhYmlsaXR5KEMpIDogbmV3R2VuZXJpY1Byb21pc2VDYXBhYmlsaXR5KEMpOwogICAgfTsKICB9CiAgJCRwKHsgZ2xvYmFsOiB0cnVlLCB3cmFwOiB0cnVlLCBmb3JjZWQ6IEZPUkNFRCQyIH0sIHsKICAgIFByb21pc2U6IFByb21pc2VDb25zdHJ1Y3RvcgogIH0pOwogIHNldFRvU3RyaW5nVGFnJDEoUHJvbWlzZUNvbnN0cnVjdG9yLCBQUk9NSVNFLCBmYWxzZSwgdHJ1ZSk7CiAgc2V0U3BlY2llcyhQUk9NSVNFKTsKICBQcm9taXNlV3JhcHBlciA9IGdldEJ1aWx0SW4kMihQUk9NSVNFKTsKICAkJHAoeyB0YXJnZXQ6IFBST01JU0UsIHN0YXQ6IHRydWUsIGZvcmNlZDogRk9SQ0VEJDIgfSwgewogICAgcmVqZWN0OiBmdW5jdGlvbiByZWplY3QocikgewogICAgICB2YXIgY2FwYWJpbGl0eSA9IG5ld1Byb21pc2VDYXBhYmlsaXR5KHRoaXMpOwogICAgICBjYXBhYmlsaXR5LnJlamVjdC5jYWxsKHZvaWQgMCwgcik7CiAgICAgIHJldHVybiBjYXBhYmlsaXR5LnByb21pc2U7CiAgICB9CiAgfSk7CiAgJCRwKHsgdGFyZ2V0OiBQUk9NSVNFLCBzdGF0OiB0cnVlLCBmb3JjZWQ6IElTX1BVUkUkMyB9LCB7CiAgICByZXNvbHZlOiBmdW5jdGlvbiByZXNvbHZlKHgpIHsKICAgICAgcmV0dXJuIHByb21pc2VSZXNvbHZlJDEodGhpcyA9PT0gUHJvbWlzZVdyYXBwZXIgPyBQcm9taXNlQ29uc3RydWN0b3IgOiB0aGlzLCB4KTsKICAgIH0KICB9KTsKICAkJHAoeyB0YXJnZXQ6IFBST01JU0UsIHN0YXQ6IHRydWUsIGZvcmNlZDogSU5DT1JSRUNUX0lURVJBVElPTiB9LCB7CiAgICBhbGw6IGZ1bmN0aW9uIGFsbChpdGVyYWJsZSkgewogICAgICB2YXIgQyA9IHRoaXM7CiAgICAgIHZhciBjYXBhYmlsaXR5ID0gbmV3UHJvbWlzZUNhcGFiaWxpdHkoQyk7CiAgICAgIHZhciByZXNvbHZlID0gY2FwYWJpbGl0eS5yZXNvbHZlOwogICAgICB2YXIgcmVqZWN0ID0gY2FwYWJpbGl0eS5yZWplY3Q7CiAgICAgIHZhciByZXN1bHQgPSBwZXJmb3JtJDMoZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyICRwcm9taXNlUmVzb2x2ZSA9IGFDYWxsYWJsZSQ2KEMucmVzb2x2ZSk7CiAgICAgICAgdmFyIHZhbHVlcyA9IFtdOwogICAgICAgIHZhciBjb3VudGVyMiA9IDA7CiAgICAgICAgdmFyIHJlbWFpbmluZyA9IDE7CiAgICAgICAgaXRlcmF0ZSQ1KGl0ZXJhYmxlLCBmdW5jdGlvbihwcm9taXNlMikgewogICAgICAgICAgdmFyIGluZGV4ID0gY291bnRlcjIrKzsKICAgICAgICAgIHZhciBhbHJlYWR5Q2FsbGVkID0gZmFsc2U7CiAgICAgICAgICB2YWx1ZXMucHVzaCh2b2lkIDApOwogICAgICAgICAgcmVtYWluaW5nKys7CiAgICAgICAgICAkcHJvbWlzZVJlc29sdmUuY2FsbChDLCBwcm9taXNlMikudGhlbihmdW5jdGlvbih2YWx1ZSkgewogICAgICAgICAgICBpZiAoYWxyZWFkeUNhbGxlZCkKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIGFscmVhZHlDYWxsZWQgPSB0cnVlOwogICAgICAgICAgICB2YWx1ZXNbaW5kZXhdID0gdmFsdWU7CiAgICAgICAgICAgIC0tcmVtYWluaW5nIHx8IHJlc29sdmUodmFsdWVzKTsKICAgICAgICAgIH0sIHJlamVjdCk7CiAgICAgICAgfSk7CiAgICAgICAgLS1yZW1haW5pbmcgfHwgcmVzb2x2ZSh2YWx1ZXMpOwogICAgICB9KTsKICAgICAgaWYgKHJlc3VsdC5lcnJvcikKICAgICAgICByZWplY3QocmVzdWx0LnZhbHVlKTsKICAgICAgcmV0dXJuIGNhcGFiaWxpdHkucHJvbWlzZTsKICAgIH0sCiAgICByYWNlOiBmdW5jdGlvbiByYWNlKGl0ZXJhYmxlKSB7CiAgICAgIHZhciBDID0gdGhpczsKICAgICAgdmFyIGNhcGFiaWxpdHkgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eShDKTsKICAgICAgdmFyIHJlamVjdCA9IGNhcGFiaWxpdHkucmVqZWN0OwogICAgICB2YXIgcmVzdWx0ID0gcGVyZm9ybSQzKGZ1bmN0aW9uKCkgewogICAgICAgIHZhciAkcHJvbWlzZVJlc29sdmUgPSBhQ2FsbGFibGUkNihDLnJlc29sdmUpOwogICAgICAgIGl0ZXJhdGUkNShpdGVyYWJsZSwgZnVuY3Rpb24ocHJvbWlzZTIpIHsKICAgICAgICAgICRwcm9taXNlUmVzb2x2ZS5jYWxsKEMsIHByb21pc2UyKS50aGVuKGNhcGFiaWxpdHkucmVzb2x2ZSwgcmVqZWN0KTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICAgIGlmIChyZXN1bHQuZXJyb3IpCiAgICAgICAgcmVqZWN0KHJlc3VsdC52YWx1ZSk7CiAgICAgIHJldHVybiBjYXBhYmlsaXR5LnByb21pc2U7CiAgICB9CiAgfSk7CiAgdmFyICQkbyA9IF9leHBvcnQ7CiAgdmFyIGFDYWxsYWJsZSQ1ID0gYUNhbGxhYmxlJGM7CiAgdmFyIG5ld1Byb21pc2VDYXBhYmlsaXR5TW9kdWxlJDIgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eSQyOwogIHZhciBwZXJmb3JtJDIgPSBwZXJmb3JtJDQ7CiAgdmFyIGl0ZXJhdGUkNCA9IGl0ZXJhdGUkNzsKICAkJG8oeyB0YXJnZXQ6ICJQcm9taXNlIiwgc3RhdDogdHJ1ZSB9LCB7CiAgICBhbGxTZXR0bGVkOiBmdW5jdGlvbiBhbGxTZXR0bGVkKGl0ZXJhYmxlKSB7CiAgICAgIHZhciBDID0gdGhpczsKICAgICAgdmFyIGNhcGFiaWxpdHkgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eU1vZHVsZSQyLmYoQyk7CiAgICAgIHZhciByZXNvbHZlID0gY2FwYWJpbGl0eS5yZXNvbHZlOwogICAgICB2YXIgcmVqZWN0ID0gY2FwYWJpbGl0eS5yZWplY3Q7CiAgICAgIHZhciByZXN1bHQgPSBwZXJmb3JtJDIoZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIHByb21pc2VSZXNvbHZlMiA9IGFDYWxsYWJsZSQ1KEMucmVzb2x2ZSk7CiAgICAgICAgdmFyIHZhbHVlcyA9IFtdOwogICAgICAgIHZhciBjb3VudGVyMiA9IDA7CiAgICAgICAgdmFyIHJlbWFpbmluZyA9IDE7CiAgICAgICAgaXRlcmF0ZSQ0KGl0ZXJhYmxlLCBmdW5jdGlvbihwcm9taXNlMikgewogICAgICAgICAgdmFyIGluZGV4ID0gY291bnRlcjIrKzsKICAgICAgICAgIHZhciBhbHJlYWR5Q2FsbGVkID0gZmFsc2U7CiAgICAgICAgICB2YWx1ZXMucHVzaCh2b2lkIDApOwogICAgICAgICAgcmVtYWluaW5nKys7CiAgICAgICAgICBwcm9taXNlUmVzb2x2ZTIuY2FsbChDLCBwcm9taXNlMikudGhlbihmdW5jdGlvbih2YWx1ZSkgewogICAgICAgICAgICBpZiAoYWxyZWFkeUNhbGxlZCkKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIGFscmVhZHlDYWxsZWQgPSB0cnVlOwogICAgICAgICAgICB2YWx1ZXNbaW5kZXhdID0geyBzdGF0dXM6ICJmdWxmaWxsZWQiLCB2YWx1ZSB9OwogICAgICAgICAgICAtLXJlbWFpbmluZyB8fCByZXNvbHZlKHZhbHVlcyk7CiAgICAgICAgICB9LCBmdW5jdGlvbihlcnJvcikgewogICAgICAgICAgICBpZiAoYWxyZWFkeUNhbGxlZCkKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIGFscmVhZHlDYWxsZWQgPSB0cnVlOwogICAgICAgICAgICB2YWx1ZXNbaW5kZXhdID0geyBzdGF0dXM6ICJyZWplY3RlZCIsIHJlYXNvbjogZXJyb3IgfTsKICAgICAgICAgICAgLS1yZW1haW5pbmcgfHwgcmVzb2x2ZSh2YWx1ZXMpOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgLS1yZW1haW5pbmcgfHwgcmVzb2x2ZSh2YWx1ZXMpOwogICAgICB9KTsKICAgICAgaWYgKHJlc3VsdC5lcnJvcikKICAgICAgICByZWplY3QocmVzdWx0LnZhbHVlKTsKICAgICAgcmV0dXJuIGNhcGFiaWxpdHkucHJvbWlzZTsKICAgIH0KICB9KTsKICB2YXIgJCRuID0gX2V4cG9ydDsKICB2YXIgYUNhbGxhYmxlJDQgPSBhQ2FsbGFibGUkYzsKICB2YXIgZ2V0QnVpbHRJbiQxID0gZ2V0QnVpbHRJbiRiOwogIHZhciBuZXdQcm9taXNlQ2FwYWJpbGl0eU1vZHVsZSQxID0gbmV3UHJvbWlzZUNhcGFiaWxpdHkkMjsKICB2YXIgcGVyZm9ybSQxID0gcGVyZm9ybSQ0OwogIHZhciBpdGVyYXRlJDMgPSBpdGVyYXRlJDc7CiAgdmFyIFBST01JU0VfQU5ZX0VSUk9SID0gIk5vIG9uZSBwcm9taXNlIHJlc29sdmVkIjsKICAkJG4oeyB0YXJnZXQ6ICJQcm9taXNlIiwgc3RhdDogdHJ1ZSB9LCB7CiAgICBhbnk6IGZ1bmN0aW9uIGFueShpdGVyYWJsZSkgewogICAgICB2YXIgQyA9IHRoaXM7CiAgICAgIHZhciBjYXBhYmlsaXR5ID0gbmV3UHJvbWlzZUNhcGFiaWxpdHlNb2R1bGUkMS5mKEMpOwogICAgICB2YXIgcmVzb2x2ZSA9IGNhcGFiaWxpdHkucmVzb2x2ZTsKICAgICAgdmFyIHJlamVjdCA9IGNhcGFiaWxpdHkucmVqZWN0OwogICAgICB2YXIgcmVzdWx0ID0gcGVyZm9ybSQxKGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBwcm9taXNlUmVzb2x2ZTIgPSBhQ2FsbGFibGUkNChDLnJlc29sdmUpOwogICAgICAgIHZhciBlcnJvcnMgPSBbXTsKICAgICAgICB2YXIgY291bnRlcjIgPSAwOwogICAgICAgIHZhciByZW1haW5pbmcgPSAxOwogICAgICAgIHZhciBhbHJlYWR5UmVzb2x2ZWQgPSBmYWxzZTsKICAgICAgICBpdGVyYXRlJDMoaXRlcmFibGUsIGZ1bmN0aW9uKHByb21pc2UyKSB7CiAgICAgICAgICB2YXIgaW5kZXggPSBjb3VudGVyMisrOwogICAgICAgICAgdmFyIGFscmVhZHlSZWplY3RlZCA9IGZhbHNlOwogICAgICAgICAgZXJyb3JzLnB1c2godm9pZCAwKTsKICAgICAgICAgIHJlbWFpbmluZysrOwogICAgICAgICAgcHJvbWlzZVJlc29sdmUyLmNhbGwoQywgcHJvbWlzZTIpLnRoZW4oZnVuY3Rpb24odmFsdWUpIHsKICAgICAgICAgICAgaWYgKGFscmVhZHlSZWplY3RlZCB8fCBhbHJlYWR5UmVzb2x2ZWQpCiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICBhbHJlYWR5UmVzb2x2ZWQgPSB0cnVlOwogICAgICAgICAgICByZXNvbHZlKHZhbHVlKTsKICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKSB7CiAgICAgICAgICAgIGlmIChhbHJlYWR5UmVqZWN0ZWQgfHwgYWxyZWFkeVJlc29sdmVkKQogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgYWxyZWFkeVJlamVjdGVkID0gdHJ1ZTsKICAgICAgICAgICAgZXJyb3JzW2luZGV4XSA9IGVycm9yOwogICAgICAgICAgICAtLXJlbWFpbmluZyB8fCByZWplY3QobmV3IChnZXRCdWlsdEluJDEoIkFnZ3JlZ2F0ZUVycm9yIikpKGVycm9ycywgUFJPTUlTRV9BTllfRVJST1IpKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgIC0tcmVtYWluaW5nIHx8IHJlamVjdChuZXcgKGdldEJ1aWx0SW4kMSgiQWdncmVnYXRlRXJyb3IiKSkoZXJyb3JzLCBQUk9NSVNFX0FOWV9FUlJPUikpOwogICAgICB9KTsKICAgICAgaWYgKHJlc3VsdC5lcnJvcikKICAgICAgICByZWplY3QocmVzdWx0LnZhbHVlKTsKICAgICAgcmV0dXJuIGNhcGFiaWxpdHkucHJvbWlzZTsKICAgIH0KICB9KTsKICB2YXIgJCRtID0gX2V4cG9ydDsKICB2YXIgTmF0aXZlUHJvbWlzZSA9IG5hdGl2ZVByb21pc2VDb25zdHJ1Y3RvcjsKICB2YXIgZmFpbHMkNiA9IGZhaWxzJG47CiAgdmFyIGdldEJ1aWx0SW4gPSBnZXRCdWlsdEluJGI7CiAgdmFyIGlzQ2FsbGFibGUkMyA9IGlzQ2FsbGFibGUkbDsKICB2YXIgc3BlY2llc0NvbnN0cnVjdG9yID0gc3BlY2llc0NvbnN0cnVjdG9yJDI7CiAgdmFyIHByb21pc2VSZXNvbHZlID0gcHJvbWlzZVJlc29sdmUkMjsKICB2YXIgTk9OX0dFTkVSSUMgPSAhIU5hdGl2ZVByb21pc2UgJiYgZmFpbHMkNihmdW5jdGlvbigpIHsKICAgIE5hdGl2ZVByb21pc2UucHJvdG90eXBlWyJmaW5hbGx5Il0uY2FsbCh7IHRoZW46IGZ1bmN0aW9uKCkgewogICAgfSB9LCBmdW5jdGlvbigpIHsKICAgIH0pOwogIH0pOwogICQkbSh7IHRhcmdldDogIlByb21pc2UiLCBwcm90bzogdHJ1ZSwgcmVhbDogdHJ1ZSwgZm9yY2VkOiBOT05fR0VORVJJQyB9LCB7CiAgICAiZmluYWxseSI6IGZ1bmN0aW9uKG9uRmluYWxseSkgewogICAgICB2YXIgQyA9IHNwZWNpZXNDb25zdHJ1Y3Rvcih0aGlzLCBnZXRCdWlsdEluKCJQcm9taXNlIikpOwogICAgICB2YXIgaXNGdW5jdGlvbiA9IGlzQ2FsbGFibGUkMyhvbkZpbmFsbHkpOwogICAgICByZXR1cm4gdGhpcy50aGVuKGlzRnVuY3Rpb24gPyBmdW5jdGlvbih4KSB7CiAgICAgICAgcmV0dXJuIHByb21pc2VSZXNvbHZlKEMsIG9uRmluYWxseSgpKS50aGVuKGZ1bmN0aW9uKCkgewogICAgICAgICAgcmV0dXJuIHg7CiAgICAgICAgfSk7CiAgICAgIH0gOiBvbkZpbmFsbHksIGlzRnVuY3Rpb24gPyBmdW5jdGlvbihlKSB7CiAgICAgICAgcmV0dXJuIHByb21pc2VSZXNvbHZlKEMsIG9uRmluYWxseSgpKS50aGVuKGZ1bmN0aW9uKCkgewogICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9KTsKICAgICAgfSA6IG9uRmluYWxseSk7CiAgICB9CiAgfSk7CiAgdmFyIHBhdGgkOCA9IHBhdGgkbjsKICB2YXIgcHJvbWlzZSQ0ID0gcGF0aCQ4LlByb21pc2U7CiAgdmFyIHBhcmVudCR0ID0gcHJvbWlzZSQ0OwogIHZhciBwcm9taXNlJDMgPSBwYXJlbnQkdDsKICB2YXIgJCRsID0gX2V4cG9ydDsKICB2YXIgbmV3UHJvbWlzZUNhcGFiaWxpdHlNb2R1bGUgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eSQyOwogIHZhciBwZXJmb3JtID0gcGVyZm9ybSQ0OwogICQkbCh7IHRhcmdldDogIlByb21pc2UiLCBzdGF0OiB0cnVlIH0sIHsKICAgICJ0cnkiOiBmdW5jdGlvbihjYWxsYmFja2ZuKSB7CiAgICAgIHZhciBwcm9taXNlQ2FwYWJpbGl0eSA9IG5ld1Byb21pc2VDYXBhYmlsaXR5TW9kdWxlLmYodGhpcyk7CiAgICAgIHZhciByZXN1bHQgPSBwZXJmb3JtKGNhbGxiYWNrZm4pOwogICAgICAocmVzdWx0LmVycm9yID8gcHJvbWlzZUNhcGFiaWxpdHkucmVqZWN0IDogcHJvbWlzZUNhcGFiaWxpdHkucmVzb2x2ZSkocmVzdWx0LnZhbHVlKTsKICAgICAgcmV0dXJuIHByb21pc2VDYXBhYmlsaXR5LnByb21pc2U7CiAgICB9CiAgfSk7CiAgdmFyIHBhcmVudCRzID0gcHJvbWlzZSQzOwogIHZhciBwcm9taXNlJDIgPSBwYXJlbnQkczsKICB2YXIgcHJvbWlzZSQxID0gcHJvbWlzZSQyOwogIChmdW5jdGlvbihtb2R1bGUpIHsKICAgIHZhciBfUHJvbWlzZSA9IHByb21pc2UkMTsKICAgIGZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHsKICAgICAgdHJ5IHsKICAgICAgICB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7CiAgICAgICAgdmFyIHZhbHVlID0gaW5mby52YWx1ZTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAoaW5mby5kb25lKSB7CiAgICAgICAgcmVzb2x2ZSh2YWx1ZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgX1Byb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihfbmV4dCwgX3Rocm93KTsKICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHsKICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBzZWxmMiA9IHRoaXMsIGFyZ3MgPSBhcmd1bWVudHM7CiAgICAgICAgcmV0dXJuIG5ldyBfUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAgIHZhciBnZW4gPSBmbi5hcHBseShzZWxmMiwgYXJncyk7CiAgICAgICAgICBmdW5jdGlvbiBfbmV4dCh2YWx1ZSkgewogICAgICAgICAgICBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJuZXh0IiwgdmFsdWUpOwogICAgICAgICAgfQogICAgICAgICAgZnVuY3Rpb24gX3Rocm93KGVycjIpIHsKICAgICAgICAgICAgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAidGhyb3ciLCBlcnIyKTsKICAgICAgICAgIH0KICAgICAgICAgIF9uZXh0KHZvaWQgMCk7CiAgICAgICAgfSk7CiAgICAgIH07CiAgICB9CiAgICBtb2R1bGUuZXhwb3J0cyA9IF9hc3luY1RvR2VuZXJhdG9yOwogICAgbW9kdWxlLmV4cG9ydHNbImRlZmF1bHQiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKICB9KShhc3luY1RvR2VuZXJhdG9yJDEpOwogIHZhciBzbGljZSQxID0gc2xpY2UkNDsKICB2YXIgY2xhc3NDYWxsQ2hlY2skMSA9IHsgZXhwb3J0czoge30gfTsKICAoZnVuY3Rpb24obW9kdWxlKSB7CiAgICBmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2szKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgewogICAgICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOwogICAgICB9CiAgICB9CiAgICBtb2R1bGUuZXhwb3J0cyA9IF9jbGFzc0NhbGxDaGVjazM7CiAgICBtb2R1bGUuZXhwb3J0c1siZGVmYXVsdCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwogIH0pKGNsYXNzQ2FsbENoZWNrJDEpOwogIHZhciBjcmVhdGVDbGFzcyQxID0geyBleHBvcnRzOiB7fSB9OwogIChmdW5jdGlvbihtb2R1bGUpIHsKICAgIHZhciBfT2JqZWN0JGRlZmluZVByb3BlcnR5ID0gZGVmaW5lUHJvcGVydHkkNDsKICAgIGZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzMih0YXJnZXQsIHByb3BzKSB7CiAgICAgIGZvciAodmFyIGkyID0gMDsgaTIgPCBwcm9wcy5sZW5ndGg7IGkyKyspIHsKICAgICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2kyXTsKICAgICAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7CiAgICAgICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOwogICAgICAgIGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpCiAgICAgICAgICBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsKICAgICAgICBfT2JqZWN0JGRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOwogICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBfY3JlYXRlQ2xhc3MzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgewogICAgICBpZiAocHJvdG9Qcm9wcykKICAgICAgICBfZGVmaW5lUHJvcGVydGllczIoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsKICAgICAgaWYgKHN0YXRpY1Byb3BzKQogICAgICAgIF9kZWZpbmVQcm9wZXJ0aWVzMihDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOwogICAgICByZXR1cm4gQ29uc3RydWN0b3I7CiAgICB9CiAgICBtb2R1bGUuZXhwb3J0cyA9IF9jcmVhdGVDbGFzczM7CiAgICBtb2R1bGUuZXhwb3J0c1siZGVmYXVsdCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwogIH0pKGNyZWF0ZUNsYXNzJDEpOwogIHZhciBpbmhlcml0cyA9IHsgZXhwb3J0czoge30gfTsKICB2YXIgJCRrID0gX2V4cG9ydDsKICB2YXIgREVTQ1JJUFRPUlMkMiA9IGRlc2NyaXB0b3JzOwogIHZhciBjcmVhdGUkNCA9IG9iamVjdENyZWF0ZTsKICAkJGsoeyB0YXJnZXQ6ICJPYmplY3QiLCBzdGF0OiB0cnVlLCBzaGFtOiAhREVTQ1JJUFRPUlMkMiB9LCB7CiAgICBjcmVhdGU6IGNyZWF0ZSQ0CiAgfSk7CiAgdmFyIHBhdGgkNyA9IHBhdGgkbjsKICB2YXIgT2JqZWN0JDEgPSBwYXRoJDcuT2JqZWN0OwogIHZhciBjcmVhdGUkMyA9IGZ1bmN0aW9uIGNyZWF0ZTIoUCwgRCkgewogICAgcmV0dXJuIE9iamVjdCQxLmNyZWF0ZShQLCBEKTsKICB9OwogIHZhciBwYXJlbnQkciA9IGNyZWF0ZSQzOwogIHZhciBjcmVhdGUkMiA9IHBhcmVudCRyOwogIHZhciBwYXJlbnQkcSA9IGNyZWF0ZSQyOwogIHZhciBjcmVhdGUkMSA9IHBhcmVudCRxOwogIHZhciBjcmVhdGUgPSBjcmVhdGUkMTsKICB2YXIgc2V0UHJvdG90eXBlT2YkNSA9IHsgZXhwb3J0czoge30gfTsKICB2YXIgJCRqID0gX2V4cG9ydDsKICB2YXIgc2V0UHJvdG90eXBlT2YkNCA9IG9iamVjdFNldFByb3RvdHlwZU9mOwogICQkaih7IHRhcmdldDogIk9iamVjdCIsIHN0YXQ6IHRydWUgfSwgewogICAgc2V0UHJvdG90eXBlT2Y6IHNldFByb3RvdHlwZU9mJDQKICB9KTsKICB2YXIgcGF0aCQ2ID0gcGF0aCRuOwogIHZhciBzZXRQcm90b3R5cGVPZiQzID0gcGF0aCQ2Lk9iamVjdC5zZXRQcm90b3R5cGVPZjsKICB2YXIgcGFyZW50JHAgPSBzZXRQcm90b3R5cGVPZiQzOwogIHZhciBzZXRQcm90b3R5cGVPZiQyID0gcGFyZW50JHA7CiAgdmFyIHBhcmVudCRvID0gc2V0UHJvdG90eXBlT2YkMjsKICB2YXIgc2V0UHJvdG90eXBlT2YkMSA9IHBhcmVudCRvOwogIHZhciBzZXRQcm90b3R5cGVPZiA9IHNldFByb3RvdHlwZU9mJDE7CiAgKGZ1bmN0aW9uKG1vZHVsZSkgewogICAgdmFyIF9PYmplY3Qkc2V0UHJvdG90eXBlT2YgPSBzZXRQcm90b3R5cGVPZjsKICAgIGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZjIobywgcCkgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IF9zZXRQcm90b3R5cGVPZjIgPSBfT2JqZWN0JHNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZjMobzIsIHAyKSB7CiAgICAgICAgbzIuX19wcm90b19fID0gcDI7CiAgICAgICAgcmV0dXJuIG8yOwogICAgICB9OwogICAgICBtb2R1bGUuZXhwb3J0c1siZGVmYXVsdCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwogICAgICByZXR1cm4gX3NldFByb3RvdHlwZU9mMihvLCBwKTsKICAgIH0KICAgIG1vZHVsZS5leHBvcnRzID0gX3NldFByb3RvdHlwZU9mMjsKICAgIG1vZHVsZS5leHBvcnRzWyJkZWZhdWx0Il0gPSBtb2R1bGUuZXhwb3J0cywgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7CiAgfSkoc2V0UHJvdG90eXBlT2YkNSk7CiAgKGZ1bmN0aW9uKG1vZHVsZSkgewogICAgdmFyIF9PYmplY3QkY3JlYXRlID0gY3JlYXRlOwogICAgdmFyIHNldFByb3RvdHlwZU9mMiA9IHNldFByb3RvdHlwZU9mJDUuZXhwb3J0czsKICAgIGZ1bmN0aW9uIF9pbmhlcml0czIoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsKICAgICAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOwogICAgICB9CiAgICAgIHN1YkNsYXNzLnByb3RvdHlwZSA9IF9PYmplY3QkY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsKICAgICAgICBjb25zdHJ1Y3RvcjogewogICAgICAgICAgdmFsdWU6IHN1YkNsYXNzLAogICAgICAgICAgd3JpdGFibGU6IHRydWUsCiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKICAgICAgICB9CiAgICAgIH0pOwogICAgICBpZiAoc3VwZXJDbGFzcykKICAgICAgICBzZXRQcm90b3R5cGVPZjIoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOwogICAgfQogICAgbW9kdWxlLmV4cG9ydHMgPSBfaW5oZXJpdHMyOwogICAgbW9kdWxlLmV4cG9ydHNbImRlZmF1bHQiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKICB9KShpbmhlcml0cyk7CiAgdmFyIHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4gPSB7IGV4cG9ydHM6IHt9IH07CiAgdmFyIF90eXBlb2YkMSA9IHsgZXhwb3J0czoge30gfTsKICB2YXIgV3JhcHBlZFdlbGxLbm93blN5bWJvbE1vZHVsZSQxID0gd2VsbEtub3duU3ltYm9sV3JhcHBlZDsKICB2YXIgaXRlcmF0b3IkMyA9IFdyYXBwZWRXZWxsS25vd25TeW1ib2xNb2R1bGUkMS5mKCJpdGVyYXRvciIpOwogIHZhciBwYXJlbnQkbiA9IGl0ZXJhdG9yJDM7CiAgdmFyIGl0ZXJhdG9yJDIgPSBwYXJlbnQkbjsKICB2YXIgcGFyZW50JG0gPSBpdGVyYXRvciQyOwogIHZhciBpdGVyYXRvciQxID0gcGFyZW50JG07CiAgdmFyIGl0ZXJhdG9yID0gaXRlcmF0b3IkMTsKICAoZnVuY3Rpb24obW9kdWxlKSB7CiAgICB2YXIgX1N5bWJvbCA9IHN5bWJvbDsKICAgIHZhciBfU3ltYm9sJGl0ZXJhdG9yID0gaXRlcmF0b3I7CiAgICBmdW5jdGlvbiBfdHlwZW9mMyhvYmopIHsKICAgICAgIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mIjsKICAgICAgaWYgKHR5cGVvZiBfU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBfU3ltYm9sJGl0ZXJhdG9yID09PSAic3ltYm9sIikgewogICAgICAgIG1vZHVsZS5leHBvcnRzID0gX3R5cGVvZjMgPSBmdW5jdGlvbiBfdHlwZW9mNChvYmoyKSB7CiAgICAgICAgICByZXR1cm4gdHlwZW9mIG9iajI7CiAgICAgICAgfTsKICAgICAgICBtb2R1bGUuZXhwb3J0c1siZGVmYXVsdCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIG1vZHVsZS5leHBvcnRzID0gX3R5cGVvZjMgPSBmdW5jdGlvbiBfdHlwZW9mNChvYmoyKSB7CiAgICAgICAgICByZXR1cm4gb2JqMiAmJiB0eXBlb2YgX1N5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvYmoyLmNvbnN0cnVjdG9yID09PSBfU3ltYm9sICYmIG9iajIgIT09IF9TeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqMjsKICAgICAgICB9OwogICAgICAgIG1vZHVsZS5leHBvcnRzWyJkZWZhdWx0Il0gPSBtb2R1bGUuZXhwb3J0cywgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7CiAgICAgIH0KICAgICAgcmV0dXJuIF90eXBlb2YzKG9iaik7CiAgICB9CiAgICBtb2R1bGUuZXhwb3J0cyA9IF90eXBlb2YzOwogICAgbW9kdWxlLmV4cG9ydHNbImRlZmF1bHQiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKICB9KShfdHlwZW9mJDEpOwogIHZhciBhc3NlcnRUaGlzSW5pdGlhbGl6ZWQgPSB7IGV4cG9ydHM6IHt9IH07CiAgKGZ1bmN0aW9uKG1vZHVsZSkgewogICAgZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZDIoc2VsZjIpIHsKICAgICAgaWYgKHNlbGYyID09PSB2b2lkIDApIHsKICAgICAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOwogICAgICB9CiAgICAgIHJldHVybiBzZWxmMjsKICAgIH0KICAgIG1vZHVsZS5leHBvcnRzID0gX2Fzc2VydFRoaXNJbml0aWFsaXplZDI7CiAgICBtb2R1bGUuZXhwb3J0c1siZGVmYXVsdCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwogIH0pKGFzc2VydFRoaXNJbml0aWFsaXplZCk7CiAgKGZ1bmN0aW9uKG1vZHVsZSkgewogICAgdmFyIF90eXBlb2YzID0gX3R5cGVvZiQxLmV4cG9ydHNbImRlZmF1bHQiXTsKICAgIHZhciBhc3NlcnRUaGlzSW5pdGlhbGl6ZWQkMSA9IGFzc2VydFRoaXNJbml0aWFsaXplZC5leHBvcnRzOwogICAgZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yKHNlbGYyLCBjYWxsKSB7CiAgICAgIGlmIChjYWxsICYmIChfdHlwZW9mMyhjYWxsKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpKSB7CiAgICAgICAgcmV0dXJuIGNhbGw7CiAgICAgIH0gZWxzZSBpZiAoY2FsbCAhPT0gdm9pZCAwKSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiRGVyaXZlZCBjb25zdHJ1Y3RvcnMgbWF5IG9ubHkgcmV0dXJuIG9iamVjdCBvciB1bmRlZmluZWQiKTsKICAgICAgfQogICAgICByZXR1cm4gYXNzZXJ0VGhpc0luaXRpYWxpemVkJDEoc2VsZjIpOwogICAgfQogICAgbW9kdWxlLmV4cG9ydHMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjI7CiAgICBtb2R1bGUuZXhwb3J0c1siZGVmYXVsdCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwogIH0pKHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4pOwogIHZhciBnZXRQcm90b3R5cGVPZiQ0ID0geyBleHBvcnRzOiB7fSB9OwogIHZhciAkJGkgPSBfZXhwb3J0OwogIHZhciBmYWlscyQ1ID0gZmFpbHMkbjsKICB2YXIgdG9PYmplY3QkMyA9IHRvT2JqZWN0JGI7CiAgdmFyIG5hdGl2ZUdldFByb3RvdHlwZU9mID0gb2JqZWN0R2V0UHJvdG90eXBlT2Y7CiAgdmFyIENPUlJFQ1RfUFJPVE9UWVBFX0dFVFRFUiA9IGNvcnJlY3RQcm90b3R5cGVHZXR0ZXI7CiAgdmFyIEZBSUxTX09OX1BSSU1JVElWRVMgPSBmYWlscyQ1KGZ1bmN0aW9uKCkgewogICAgbmF0aXZlR2V0UHJvdG90eXBlT2YoMSk7CiAgfSk7CiAgJCRpKHsgdGFyZ2V0OiAiT2JqZWN0Iiwgc3RhdDogdHJ1ZSwgZm9yY2VkOiBGQUlMU19PTl9QUklNSVRJVkVTLCBzaGFtOiAhQ09SUkVDVF9QUk9UT1RZUEVfR0VUVEVSIH0sIHsKICAgIGdldFByb3RvdHlwZU9mOiBmdW5jdGlvbiBnZXRQcm90b3R5cGVPZjIoaXQpIHsKICAgICAgcmV0dXJuIG5hdGl2ZUdldFByb3RvdHlwZU9mKHRvT2JqZWN0JDMoaXQpKTsKICAgIH0KICB9KTsKICB2YXIgcGF0aCQ1ID0gcGF0aCRuOwogIHZhciBnZXRQcm90b3R5cGVPZiQzID0gcGF0aCQ1Lk9iamVjdC5nZXRQcm90b3R5cGVPZjsKICB2YXIgcGFyZW50JGwgPSBnZXRQcm90b3R5cGVPZiQzOwogIHZhciBnZXRQcm90b3R5cGVPZiQyID0gcGFyZW50JGw7CiAgdmFyIHBhcmVudCRrID0gZ2V0UHJvdG90eXBlT2YkMjsKICB2YXIgZ2V0UHJvdG90eXBlT2YkMSA9IHBhcmVudCRrOwogIHZhciBnZXRQcm90b3R5cGVPZiA9IGdldFByb3RvdHlwZU9mJDE7CiAgKGZ1bmN0aW9uKG1vZHVsZSkgewogICAgdmFyIF9PYmplY3Qkc2V0UHJvdG90eXBlT2YgPSBzZXRQcm90b3R5cGVPZjsKICAgIHZhciBfT2JqZWN0JGdldFByb3RvdHlwZU9mID0gZ2V0UHJvdG90eXBlT2Y7CiAgICBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YyKG8pIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBfZ2V0UHJvdG90eXBlT2YyID0gX09iamVjdCRzZXRQcm90b3R5cGVPZiA/IF9PYmplY3QkZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YzKG8yKSB7CiAgICAgICAgcmV0dXJuIG8yLl9fcHJvdG9fXyB8fCBfT2JqZWN0JGdldFByb3RvdHlwZU9mKG8yKTsKICAgICAgfTsKICAgICAgbW9kdWxlLmV4cG9ydHNbImRlZmF1bHQiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKICAgICAgcmV0dXJuIF9nZXRQcm90b3R5cGVPZjIobyk7CiAgICB9CiAgICBtb2R1bGUuZXhwb3J0cyA9IF9nZXRQcm90b3R5cGVPZjI7CiAgICBtb2R1bGUuZXhwb3J0c1siZGVmYXVsdCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwogIH0pKGdldFByb3RvdHlwZU9mJDQpOwogIHZhciBsb25nID0gTG9uZyQxOwogIHZhciB3YXNtID0gbnVsbDsKICB0cnkgewogICAgd2FzbSA9IG5ldyBXZWJBc3NlbWJseS5JbnN0YW5jZShuZXcgV2ViQXNzZW1ibHkuTW9kdWxlKG5ldyBVaW50OEFycmF5KFsKICAgICAgMCwKICAgICAgOTcsCiAgICAgIDExNSwKICAgICAgMTA5LAogICAgICAxLAogICAgICAwLAogICAgICAwLAogICAgICAwLAogICAgICAxLAogICAgICAxMywKICAgICAgMiwKICAgICAgOTYsCiAgICAgIDAsCiAgICAgIDEsCiAgICAgIDEyNywKICAgICAgOTYsCiAgICAgIDQsCiAgICAgIDEyNywKICAgICAgMTI3LAogICAgICAxMjcsCiAgICAgIDEyNywKICAgICAgMSwKICAgICAgMTI3LAogICAgICAzLAogICAgICA3LAogICAgICA2LAogICAgICAwLAogICAgICAxLAogICAgICAxLAogICAgICAxLAogICAgICAxLAogICAgICAxLAogICAgICA2LAogICAgICA2LAogICAgICAxLAogICAgICAxMjcsCiAgICAgIDEsCiAgICAgIDY1LAogICAgICAwLAogICAgICAxMSwKICAgICAgNywKICAgICAgNTAsCiAgICAgIDYsCiAgICAgIDMsCiAgICAgIDEwOSwKICAgICAgMTE3LAogICAgICAxMDgsCiAgICAgIDAsCiAgICAgIDEsCiAgICAgIDUsCiAgICAgIDEwMCwKICAgICAgMTA1LAogICAgICAxMTgsCiAgICAgIDk1LAogICAgICAxMTUsCiAgICAgIDAsCiAgICAgIDIsCiAgICAgIDUsCiAgICAgIDEwMCwKICAgICAgMTA1LAogICAgICAxMTgsCiAgICAgIDk1LAogICAgICAxMTcsCiAgICAgIDAsCiAgICAgIDMsCiAgICAgIDUsCiAgICAgIDExNCwKICAgICAgMTAxLAogICAgICAxMDksCiAgICAgIDk1LAogICAgICAxMTUsCiAgICAgIDAsCiAgICAgIDQsCiAgICAgIDUsCiAgICAgIDExNCwKICAgICAgMTAxLAogICAgICAxMDksCiAgICAgIDk1LAogICAgICAxMTcsCiAgICAgIDAsCiAgICAgIDUsCiAgICAgIDgsCiAgICAgIDEwMywKICAgICAgMTAxLAogICAgICAxMTYsCiAgICAgIDk1LAogICAgICAxMDQsCiAgICAgIDEwNSwKICAgICAgMTAzLAogICAgICAxMDQsCiAgICAgIDAsCiAgICAgIDAsCiAgICAgIDEwLAogICAgICAxOTEsCiAgICAgIDEsCiAgICAgIDYsCiAgICAgIDQsCiAgICAgIDAsCiAgICAgIDM1LAogICAgICAwLAogICAgICAxMSwKICAgICAgMzYsCiAgICAgIDEsCiAgICAgIDEsCiAgICAgIDEyNiwKICAgICAgMzIsCiAgICAgIDAsCiAgICAgIDE3MywKICAgICAgMzIsCiAgICAgIDEsCiAgICAgIDE3MywKICAgICAgNjYsCiAgICAgIDMyLAogICAgICAxMzQsCiAgICAgIDEzMiwKICAgICAgMzIsCiAgICAgIDIsCiAgICAgIDE3MywKICAgICAgMzIsCiAgICAgIDMsCiAgICAgIDE3MywKICAgICAgNjYsCiAgICAgIDMyLAogICAgICAxMzQsCiAgICAgIDEzMiwKICAgICAgMTI2LAogICAgICAzNCwKICAgICAgNCwKICAgICAgNjYsCiAgICAgIDMyLAogICAgICAxMzUsCiAgICAgIDE2NywKICAgICAgMzYsCiAgICAgIDAsCiAgICAgIDMyLAogICAgICA0LAogICAgICAxNjcsCiAgICAgIDExLAogICAgICAzNiwKICAgICAgMSwKICAgICAgMSwKICAgICAgMTI2LAogICAgICAzMiwKICAgICAgMCwKICAgICAgMTczLAogICAgICAzMiwKICAgICAgMSwKICAgICAgMTczLAogICAgICA2NiwKICAgICAgMzIsCiAgICAgIDEzNCwKICAgICAgMTMyLAogICAgICAzMiwKICAgICAgMiwKICAgICAgMTczLAogICAgICAzMiwKICAgICAgMywKICAgICAgMTczLAogICAgICA2NiwKICAgICAgMzIsCiAgICAgIDEzNCwKICAgICAgMTMyLAogICAgICAxMjcsCiAgICAgIDM0LAogICAgICA0LAogICAgICA2NiwKICAgICAgMzIsCiAgICAgIDEzNSwKICAgICAgMTY3LAogICAgICAzNiwKICAgICAgMCwKICAgICAgMzIsCiAgICAgIDQsCiAgICAgIDE2NywKICAgICAgMTEsCiAgICAgIDM2LAogICAgICAxLAogICAgICAxLAogICAgICAxMjYsCiAgICAgIDMyLAogICAgICAwLAogICAgICAxNzMsCiAgICAgIDMyLAogICAgICAxLAogICAgICAxNzMsCiAgICAgIDY2LAogICAgICAzMiwKICAgICAgMTM0LAogICAgICAxMzIsCiAgICAgIDMyLAogICAgICAyLAogICAgICAxNzMsCiAgICAgIDMyLAogICAgICAzLAogICAgICAxNzMsCiAgICAgIDY2LAogICAgICAzMiwKICAgICAgMTM0LAogICAgICAxMzIsCiAgICAgIDEyOCwKICAgICAgMzQsCiAgICAgIDQsCiAgICAgIDY2LAogICAgICAzMiwKICAgICAgMTM1LAogICAgICAxNjcsCiAgICAgIDM2LAogICAgICAwLAogICAgICAzMiwKICAgICAgNCwKICAgICAgMTY3LAogICAgICAxMSwKICAgICAgMzYsCiAgICAgIDEsCiAgICAgIDEsCiAgICAgIDEyNiwKICAgICAgMzIsCiAgICAgIDAsCiAgICAgIDE3MywKICAgICAgMzIsCiAgICAgIDEsCiAgICAgIDE3MywKICAgICAgNjYsCiAgICAgIDMyLAogICAgICAxMzQsCiAgICAgIDEzMiwKICAgICAgMzIsCiAgICAgIDIsCiAgICAgIDE3MywKICAgICAgMzIsCiAgICAgIDMsCiAgICAgIDE3MywKICAgICAgNjYsCiAgICAgIDMyLAogICAgICAxMzQsCiAgICAgIDEzMiwKICAgICAgMTI5LAogICAgICAzNCwKICAgICAgNCwKICAgICAgNjYsCiAgICAgIDMyLAogICAgICAxMzUsCiAgICAgIDE2NywKICAgICAgMzYsCiAgICAgIDAsCiAgICAgIDMyLAogICAgICA0LAogICAgICAxNjcsCiAgICAgIDExLAogICAgICAzNiwKICAgICAgMSwKICAgICAgMSwKICAgICAgMTI2LAogICAgICAzMiwKICAgICAgMCwKICAgICAgMTczLAogICAgICAzMiwKICAgICAgMSwKICAgICAgMTczLAogICAgICA2NiwKICAgICAgMzIsCiAgICAgIDEzNCwKICAgICAgMTMyLAogICAgICAzMiwKICAgICAgMiwKICAgICAgMTczLAogICAgICAzMiwKICAgICAgMywKICAgICAgMTczLAogICAgICA2NiwKICAgICAgMzIsCiAgICAgIDEzNCwKICAgICAgMTMyLAogICAgICAxMzAsCiAgICAgIDM0LAogICAgICA0LAogICAgICA2NiwKICAgICAgMzIsCiAgICAgIDEzNSwKICAgICAgMTY3LAogICAgICAzNiwKICAgICAgMCwKICAgICAgMzIsCiAgICAgIDQsCiAgICAgIDE2NywKICAgICAgMTEKICAgIF0pKSwge30pLmV4cG9ydHM7CiAgfSBjYXRjaCAoZSkgewogIH0KICBmdW5jdGlvbiBMb25nJDEobG93LCBoaWdoLCB1bnNpZ25lZCkgewogICAgdGhpcy5sb3cgPSBsb3cgfCAwOwogICAgdGhpcy5oaWdoID0gaGlnaCB8IDA7CiAgICB0aGlzLnVuc2lnbmVkID0gISF1bnNpZ25lZDsKICB9CiAgTG9uZyQxLnByb3RvdHlwZS5fX2lzTG9uZ19fOwogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShMb25nJDEucHJvdG90eXBlLCAiX19pc0xvbmdfXyIsIHsgdmFsdWU6IHRydWUgfSk7CiAgZnVuY3Rpb24gaXNMb25nKG9iaikgewogICAgcmV0dXJuIChvYmogJiYgb2JqWyJfX2lzTG9uZ19fIl0pID09PSB0cnVlOwogIH0KICBMb25nJDEuaXNMb25nID0gaXNMb25nOwogIHZhciBJTlRfQ0FDSEUgPSB7fTsKICB2YXIgVUlOVF9DQUNIRSA9IHt9OwogIGZ1bmN0aW9uIGZyb21JbnQodmFsdWUsIHVuc2lnbmVkKSB7CiAgICB2YXIgb2JqLCBjYWNoZWRPYmosIGNhY2hlOwogICAgaWYgKHVuc2lnbmVkKSB7CiAgICAgIHZhbHVlID4+Pj0gMDsKICAgICAgaWYgKGNhY2hlID0gMCA8PSB2YWx1ZSAmJiB2YWx1ZSA8IDI1NikgewogICAgICAgIGNhY2hlZE9iaiA9IFVJTlRfQ0FDSEVbdmFsdWVdOwogICAgICAgIGlmIChjYWNoZWRPYmopCiAgICAgICAgICByZXR1cm4gY2FjaGVkT2JqOwogICAgICB9CiAgICAgIG9iaiA9IGZyb21CaXRzKHZhbHVlLCAodmFsdWUgfCAwKSA8IDAgPyAtMSA6IDAsIHRydWUpOwogICAgICBpZiAoY2FjaGUpCiAgICAgICAgVUlOVF9DQUNIRVt2YWx1ZV0gPSBvYmo7CiAgICAgIHJldHVybiBvYmo7CiAgICB9IGVsc2UgewogICAgICB2YWx1ZSB8PSAwOwogICAgICBpZiAoY2FjaGUgPSAtMTI4IDw9IHZhbHVlICYmIHZhbHVlIDwgMTI4KSB7CiAgICAgICAgY2FjaGVkT2JqID0gSU5UX0NBQ0hFW3ZhbHVlXTsKICAgICAgICBpZiAoY2FjaGVkT2JqKQogICAgICAgICAgcmV0dXJuIGNhY2hlZE9iajsKICAgICAgfQogICAgICBvYmogPSBmcm9tQml0cyh2YWx1ZSwgdmFsdWUgPCAwID8gLTEgOiAwLCBmYWxzZSk7CiAgICAgIGlmIChjYWNoZSkKICAgICAgICBJTlRfQ0FDSEVbdmFsdWVdID0gb2JqOwogICAgICByZXR1cm4gb2JqOwogICAgfQogIH0KICBMb25nJDEuZnJvbUludCA9IGZyb21JbnQ7CiAgZnVuY3Rpb24gZnJvbU51bWJlcih2YWx1ZSwgdW5zaWduZWQpIHsKICAgIGlmIChpc05hTih2YWx1ZSkpCiAgICAgIHJldHVybiB1bnNpZ25lZCA/IFVaRVJPIDogWkVSTzsKICAgIGlmICh1bnNpZ25lZCkgewogICAgICBpZiAodmFsdWUgPCAwKQogICAgICAgIHJldHVybiBVWkVSTzsKICAgICAgaWYgKHZhbHVlID49IFRXT19QV1JfNjRfREJMKQogICAgICAgIHJldHVybiBNQVhfVU5TSUdORURfVkFMVUU7CiAgICB9IGVsc2UgewogICAgICBpZiAodmFsdWUgPD0gLVRXT19QV1JfNjNfREJMKQogICAgICAgIHJldHVybiBNSU5fVkFMVUU7CiAgICAgIGlmICh2YWx1ZSArIDEgPj0gVFdPX1BXUl82M19EQkwpCiAgICAgICAgcmV0dXJuIE1BWF9WQUxVRTsKICAgIH0KICAgIGlmICh2YWx1ZSA8IDApCiAgICAgIHJldHVybiBmcm9tTnVtYmVyKC12YWx1ZSwgdW5zaWduZWQpLm5lZygpOwogICAgcmV0dXJuIGZyb21CaXRzKHZhbHVlICUgVFdPX1BXUl8zMl9EQkwgfCAwLCB2YWx1ZSAvIFRXT19QV1JfMzJfREJMIHwgMCwgdW5zaWduZWQpOwogIH0KICBMb25nJDEuZnJvbU51bWJlciA9IGZyb21OdW1iZXI7CiAgZnVuY3Rpb24gZnJvbUJpdHMobG93Qml0cywgaGlnaEJpdHMsIHVuc2lnbmVkKSB7CiAgICByZXR1cm4gbmV3IExvbmckMShsb3dCaXRzLCBoaWdoQml0cywgdW5zaWduZWQpOwogIH0KICBMb25nJDEuZnJvbUJpdHMgPSBmcm9tQml0czsKICB2YXIgcG93X2RibCA9IE1hdGgucG93OwogIGZ1bmN0aW9uIGZyb21TdHJpbmcoc3RyLCB1bnNpZ25lZCwgcmFkaXgpIHsKICAgIGlmIChzdHIubGVuZ3RoID09PSAwKQogICAgICB0aHJvdyBFcnJvcigiZW1wdHkgc3RyaW5nIik7CiAgICBpZiAoc3RyID09PSAiTmFOIiB8fCBzdHIgPT09ICJJbmZpbml0eSIgfHwgc3RyID09PSAiK0luZmluaXR5IiB8fCBzdHIgPT09ICItSW5maW5pdHkiKQogICAgICByZXR1cm4gWkVSTzsKICAgIGlmICh0eXBlb2YgdW5zaWduZWQgPT09ICJudW1iZXIiKSB7CiAgICAgIHJhZGl4ID0gdW5zaWduZWQsIHVuc2lnbmVkID0gZmFsc2U7CiAgICB9IGVsc2UgewogICAgICB1bnNpZ25lZCA9ICEhdW5zaWduZWQ7CiAgICB9CiAgICByYWRpeCA9IHJhZGl4IHx8IDEwOwogICAgaWYgKHJhZGl4IDwgMiB8fCAzNiA8IHJhZGl4KQogICAgICB0aHJvdyBSYW5nZUVycm9yKCJyYWRpeCIpOwogICAgdmFyIHA7CiAgICBpZiAoKHAgPSBzdHIuaW5kZXhPZigiLSIpKSA+IDApCiAgICAgIHRocm93IEVycm9yKCJpbnRlcmlvciBoeXBoZW4iKTsKICAgIGVsc2UgaWYgKHAgPT09IDApIHsKICAgICAgcmV0dXJuIGZyb21TdHJpbmcoc3RyLnN1YnN0cmluZygxKSwgdW5zaWduZWQsIHJhZGl4KS5uZWcoKTsKICAgIH0KICAgIHZhciByYWRpeFRvUG93ZXIgPSBmcm9tTnVtYmVyKHBvd19kYmwocmFkaXgsIDgpKTsKICAgIHZhciByZXN1bHQgPSBaRVJPOwogICAgZm9yICh2YXIgaTIgPSAwOyBpMiA8IHN0ci5sZW5ndGg7IGkyICs9IDgpIHsKICAgICAgdmFyIHNpemUgPSBNYXRoLm1pbig4LCBzdHIubGVuZ3RoIC0gaTIpLCB2YWx1ZSA9IHBhcnNlSW50KHN0ci5zdWJzdHJpbmcoaTIsIGkyICsgc2l6ZSksIHJhZGl4KTsKICAgICAgaWYgKHNpemUgPCA4KSB7CiAgICAgICAgdmFyIHBvd2VyID0gZnJvbU51bWJlcihwb3dfZGJsKHJhZGl4LCBzaXplKSk7CiAgICAgICAgcmVzdWx0ID0gcmVzdWx0Lm11bChwb3dlcikuYWRkKGZyb21OdW1iZXIodmFsdWUpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXN1bHQgPSByZXN1bHQubXVsKHJhZGl4VG9Qb3dlcik7CiAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmFkZChmcm9tTnVtYmVyKHZhbHVlKSk7CiAgICAgIH0KICAgIH0KICAgIHJlc3VsdC51bnNpZ25lZCA9IHVuc2lnbmVkOwogICAgcmV0dXJuIHJlc3VsdDsKICB9CiAgTG9uZyQxLmZyb21TdHJpbmcgPSBmcm9tU3RyaW5nOwogIGZ1bmN0aW9uIGZyb21WYWx1ZSh2YWwsIHVuc2lnbmVkKSB7CiAgICBpZiAodHlwZW9mIHZhbCA9PT0gIm51bWJlciIpCiAgICAgIHJldHVybiBmcm9tTnVtYmVyKHZhbCwgdW5zaWduZWQpOwogICAgaWYgKHR5cGVvZiB2YWwgPT09ICJzdHJpbmciKQogICAgICByZXR1cm4gZnJvbVN0cmluZyh2YWwsIHVuc2lnbmVkKTsKICAgIHJldHVybiBmcm9tQml0cyh2YWwubG93LCB2YWwuaGlnaCwgdHlwZW9mIHVuc2lnbmVkID09PSAiYm9vbGVhbiIgPyB1bnNpZ25lZCA6IHZhbC51bnNpZ25lZCk7CiAgfQogIExvbmckMS5mcm9tVmFsdWUgPSBmcm9tVmFsdWU7CiAgdmFyIFRXT19QV1JfMTZfREJMID0gMSA8PCAxNjsKICB2YXIgVFdPX1BXUl8yNF9EQkwgPSAxIDw8IDI0OwogIHZhciBUV09fUFdSXzMyX0RCTCA9IFRXT19QV1JfMTZfREJMICogVFdPX1BXUl8xNl9EQkw7CiAgdmFyIFRXT19QV1JfNjRfREJMID0gVFdPX1BXUl8zMl9EQkwgKiBUV09fUFdSXzMyX0RCTDsKICB2YXIgVFdPX1BXUl82M19EQkwgPSBUV09fUFdSXzY0X0RCTCAvIDI7CiAgdmFyIFRXT19QV1JfMjQgPSBmcm9tSW50KFRXT19QV1JfMjRfREJMKTsKICB2YXIgWkVSTyA9IGZyb21JbnQoMCk7CiAgTG9uZyQxLlpFUk8gPSBaRVJPOwogIHZhciBVWkVSTyA9IGZyb21JbnQoMCwgdHJ1ZSk7CiAgTG9uZyQxLlVaRVJPID0gVVpFUk87CiAgdmFyIE9ORSA9IGZyb21JbnQoMSk7CiAgTG9uZyQxLk9ORSA9IE9ORTsKICB2YXIgVU9ORSA9IGZyb21JbnQoMSwgdHJ1ZSk7CiAgTG9uZyQxLlVPTkUgPSBVT05FOwogIHZhciBORUdfT05FID0gZnJvbUludCgtMSk7CiAgTG9uZyQxLk5FR19PTkUgPSBORUdfT05FOwogIHZhciBNQVhfVkFMVUUgPSBmcm9tQml0cyg0Mjk0OTY3Mjk1IHwgMCwgMjE0NzQ4MzY0NyB8IDAsIGZhbHNlKTsKICBMb25nJDEuTUFYX1ZBTFVFID0gTUFYX1ZBTFVFOwogIHZhciBNQVhfVU5TSUdORURfVkFMVUUgPSBmcm9tQml0cyg0Mjk0OTY3Mjk1IHwgMCwgNDI5NDk2NzI5NSB8IDAsIHRydWUpOwogIExvbmckMS5NQVhfVU5TSUdORURfVkFMVUUgPSBNQVhfVU5TSUdORURfVkFMVUU7CiAgdmFyIE1JTl9WQUxVRSA9IGZyb21CaXRzKDAsIDIxNDc0ODM2NDggfCAwLCBmYWxzZSk7CiAgTG9uZyQxLk1JTl9WQUxVRSA9IE1JTl9WQUxVRTsKICB2YXIgTG9uZ1Byb3RvdHlwZSA9IExvbmckMS5wcm90b3R5cGU7CiAgTG9uZ1Byb3RvdHlwZS50b0ludCA9IGZ1bmN0aW9uIHRvSW50KCkgewogICAgcmV0dXJuIHRoaXMudW5zaWduZWQgPyB0aGlzLmxvdyA+Pj4gMCA6IHRoaXMubG93OwogIH07CiAgTG9uZ1Byb3RvdHlwZS50b051bWJlciA9IGZ1bmN0aW9uIHRvTnVtYmVyKCkgewogICAgaWYgKHRoaXMudW5zaWduZWQpCiAgICAgIHJldHVybiAodGhpcy5oaWdoID4+PiAwKSAqIFRXT19QV1JfMzJfREJMICsgKHRoaXMubG93ID4+PiAwKTsKICAgIHJldHVybiB0aGlzLmhpZ2ggKiBUV09fUFdSXzMyX0RCTCArICh0aGlzLmxvdyA+Pj4gMCk7CiAgfTsKICBMb25nUHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcyKHJhZGl4KSB7CiAgICByYWRpeCA9IHJhZGl4IHx8IDEwOwogICAgaWYgKHJhZGl4IDwgMiB8fCAzNiA8IHJhZGl4KQogICAgICB0aHJvdyBSYW5nZUVycm9yKCJyYWRpeCIpOwogICAgaWYgKHRoaXMuaXNaZXJvKCkpCiAgICAgIHJldHVybiAiMCI7CiAgICBpZiAodGhpcy5pc05lZ2F0aXZlKCkpIHsKICAgICAgaWYgKHRoaXMuZXEoTUlOX1ZBTFVFKSkgewogICAgICAgIHZhciByYWRpeExvbmcgPSBmcm9tTnVtYmVyKHJhZGl4KSwgZGl2ID0gdGhpcy5kaXYocmFkaXhMb25nKSwgcmVtMSA9IGRpdi5tdWwocmFkaXhMb25nKS5zdWIodGhpcyk7CiAgICAgICAgcmV0dXJuIGRpdi50b1N0cmluZyhyYWRpeCkgKyByZW0xLnRvSW50KCkudG9TdHJpbmcocmFkaXgpOwogICAgICB9IGVsc2UKICAgICAgICByZXR1cm4gIi0iICsgdGhpcy5uZWcoKS50b1N0cmluZyhyYWRpeCk7CiAgICB9CiAgICB2YXIgcmFkaXhUb1Bvd2VyID0gZnJvbU51bWJlcihwb3dfZGJsKHJhZGl4LCA2KSwgdGhpcy51bnNpZ25lZCksIHJlbSA9IHRoaXM7CiAgICB2YXIgcmVzdWx0ID0gIiI7CiAgICB3aGlsZSAodHJ1ZSkgewogICAgICB2YXIgcmVtRGl2ID0gcmVtLmRpdihyYWRpeFRvUG93ZXIpLCBpbnR2YWwgPSByZW0uc3ViKHJlbURpdi5tdWwocmFkaXhUb1Bvd2VyKSkudG9JbnQoKSA+Pj4gMCwgZGlnaXRzID0gaW50dmFsLnRvU3RyaW5nKHJhZGl4KTsKICAgICAgcmVtID0gcmVtRGl2OwogICAgICBpZiAocmVtLmlzWmVybygpKQogICAgICAgIHJldHVybiBkaWdpdHMgKyByZXN1bHQ7CiAgICAgIGVsc2UgewogICAgICAgIHdoaWxlIChkaWdpdHMubGVuZ3RoIDwgNikKICAgICAgICAgIGRpZ2l0cyA9ICIwIiArIGRpZ2l0czsKICAgICAgICByZXN1bHQgPSAiIiArIGRpZ2l0cyArIHJlc3VsdDsKICAgICAgfQogICAgfQogIH07CiAgTG9uZ1Byb3RvdHlwZS5nZXRIaWdoQml0cyA9IGZ1bmN0aW9uIGdldEhpZ2hCaXRzKCkgewogICAgcmV0dXJuIHRoaXMuaGlnaDsKICB9OwogIExvbmdQcm90b3R5cGUuZ2V0SGlnaEJpdHNVbnNpZ25lZCA9IGZ1bmN0aW9uIGdldEhpZ2hCaXRzVW5zaWduZWQoKSB7CiAgICByZXR1cm4gdGhpcy5oaWdoID4+PiAwOwogIH07CiAgTG9uZ1Byb3RvdHlwZS5nZXRMb3dCaXRzID0gZnVuY3Rpb24gZ2V0TG93Qml0cygpIHsKICAgIHJldHVybiB0aGlzLmxvdzsKICB9OwogIExvbmdQcm90b3R5cGUuZ2V0TG93Qml0c1Vuc2lnbmVkID0gZnVuY3Rpb24gZ2V0TG93Qml0c1Vuc2lnbmVkKCkgewogICAgcmV0dXJuIHRoaXMubG93ID4+PiAwOwogIH07CiAgTG9uZ1Byb3RvdHlwZS5nZXROdW1CaXRzQWJzID0gZnVuY3Rpb24gZ2V0TnVtQml0c0FicygpIHsKICAgIGlmICh0aGlzLmlzTmVnYXRpdmUoKSkKICAgICAgcmV0dXJuIHRoaXMuZXEoTUlOX1ZBTFVFKSA/IDY0IDogdGhpcy5uZWcoKS5nZXROdW1CaXRzQWJzKCk7CiAgICB2YXIgdmFsID0gdGhpcy5oaWdoICE9IDAgPyB0aGlzLmhpZ2ggOiB0aGlzLmxvdzsKICAgIGZvciAodmFyIGJpdCA9IDMxOyBiaXQgPiAwOyBiaXQtLSkKICAgICAgaWYgKCh2YWwgJiAxIDw8IGJpdCkgIT0gMCkKICAgICAgICBicmVhazsKICAgIHJldHVybiB0aGlzLmhpZ2ggIT0gMCA/IGJpdCArIDMzIDogYml0ICsgMTsKICB9OwogIExvbmdQcm90b3R5cGUuaXNaZXJvID0gZnVuY3Rpb24gaXNaZXJvKCkgewogICAgcmV0dXJuIHRoaXMuaGlnaCA9PT0gMCAmJiB0aGlzLmxvdyA9PT0gMDsKICB9OwogIExvbmdQcm90b3R5cGUuZXF6ID0gTG9uZ1Byb3RvdHlwZS5pc1plcm87CiAgTG9uZ1Byb3RvdHlwZS5pc05lZ2F0aXZlID0gZnVuY3Rpb24gaXNOZWdhdGl2ZSgpIHsKICAgIHJldHVybiAhdGhpcy51bnNpZ25lZCAmJiB0aGlzLmhpZ2ggPCAwOwogIH07CiAgTG9uZ1Byb3RvdHlwZS5pc1Bvc2l0aXZlID0gZnVuY3Rpb24gaXNQb3NpdGl2ZSgpIHsKICAgIHJldHVybiB0aGlzLnVuc2lnbmVkIHx8IHRoaXMuaGlnaCA+PSAwOwogIH07CiAgTG9uZ1Byb3RvdHlwZS5pc09kZCA9IGZ1bmN0aW9uIGlzT2RkKCkgewogICAgcmV0dXJuICh0aGlzLmxvdyAmIDEpID09PSAxOwogIH07CiAgTG9uZ1Byb3RvdHlwZS5pc0V2ZW4gPSBmdW5jdGlvbiBpc0V2ZW4oKSB7CiAgICByZXR1cm4gKHRoaXMubG93ICYgMSkgPT09IDA7CiAgfTsKICBMb25nUHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIGVxdWFscyhvdGhlcikgewogICAgaWYgKCFpc0xvbmcob3RoZXIpKQogICAgICBvdGhlciA9IGZyb21WYWx1ZShvdGhlcik7CiAgICBpZiAodGhpcy51bnNpZ25lZCAhPT0gb3RoZXIudW5zaWduZWQgJiYgdGhpcy5oaWdoID4+PiAzMSA9PT0gMSAmJiBvdGhlci5oaWdoID4+PiAzMSA9PT0gMSkKICAgICAgcmV0dXJuIGZhbHNlOwogICAgcmV0dXJuIHRoaXMuaGlnaCA9PT0gb3RoZXIuaGlnaCAmJiB0aGlzLmxvdyA9PT0gb3RoZXIubG93OwogIH07CiAgTG9uZ1Byb3RvdHlwZS5lcSA9IExvbmdQcm90b3R5cGUuZXF1YWxzOwogIExvbmdQcm90b3R5cGUubm90RXF1YWxzID0gZnVuY3Rpb24gbm90RXF1YWxzKG90aGVyKSB7CiAgICByZXR1cm4gIXRoaXMuZXEob3RoZXIpOwogIH07CiAgTG9uZ1Byb3RvdHlwZS5uZXEgPSBMb25nUHJvdG90eXBlLm5vdEVxdWFsczsKICBMb25nUHJvdG90eXBlLm5lID0gTG9uZ1Byb3RvdHlwZS5ub3RFcXVhbHM7CiAgTG9uZ1Byb3RvdHlwZS5sZXNzVGhhbiA9IGZ1bmN0aW9uIGxlc3NUaGFuKG90aGVyKSB7CiAgICByZXR1cm4gdGhpcy5jb21wKG90aGVyKSA8IDA7CiAgfTsKICBMb25nUHJvdG90eXBlLmx0ID0gTG9uZ1Byb3RvdHlwZS5sZXNzVGhhbjsKICBMb25nUHJvdG90eXBlLmxlc3NUaGFuT3JFcXVhbCA9IGZ1bmN0aW9uIGxlc3NUaGFuT3JFcXVhbChvdGhlcikgewogICAgcmV0dXJuIHRoaXMuY29tcChvdGhlcikgPD0gMDsKICB9OwogIExvbmdQcm90b3R5cGUubHRlID0gTG9uZ1Byb3RvdHlwZS5sZXNzVGhhbk9yRXF1YWw7CiAgTG9uZ1Byb3RvdHlwZS5sZSA9IExvbmdQcm90b3R5cGUubGVzc1RoYW5PckVxdWFsOwogIExvbmdQcm90b3R5cGUuZ3JlYXRlclRoYW4gPSBmdW5jdGlvbiBncmVhdGVyVGhhbihvdGhlcikgewogICAgcmV0dXJuIHRoaXMuY29tcChvdGhlcikgPiAwOwogIH07CiAgTG9uZ1Byb3RvdHlwZS5ndCA9IExvbmdQcm90b3R5cGUuZ3JlYXRlclRoYW47CiAgTG9uZ1Byb3RvdHlwZS5ncmVhdGVyVGhhbk9yRXF1YWwgPSBmdW5jdGlvbiBncmVhdGVyVGhhbk9yRXF1YWwob3RoZXIpIHsKICAgIHJldHVybiB0aGlzLmNvbXAob3RoZXIpID49IDA7CiAgfTsKICBMb25nUHJvdG90eXBlLmd0ZSA9IExvbmdQcm90b3R5cGUuZ3JlYXRlclRoYW5PckVxdWFsOwogIExvbmdQcm90b3R5cGUuZ2UgPSBMb25nUHJvdG90eXBlLmdyZWF0ZXJUaGFuT3JFcXVhbDsKICBMb25nUHJvdG90eXBlLmNvbXBhcmUgPSBmdW5jdGlvbiBjb21wYXJlKG90aGVyKSB7CiAgICBpZiAoIWlzTG9uZyhvdGhlcikpCiAgICAgIG90aGVyID0gZnJvbVZhbHVlKG90aGVyKTsKICAgIGlmICh0aGlzLmVxKG90aGVyKSkKICAgICAgcmV0dXJuIDA7CiAgICB2YXIgdGhpc05lZyA9IHRoaXMuaXNOZWdhdGl2ZSgpLCBvdGhlck5lZyA9IG90aGVyLmlzTmVnYXRpdmUoKTsKICAgIGlmICh0aGlzTmVnICYmICFvdGhlck5lZykKICAgICAgcmV0dXJuIC0xOwogICAgaWYgKCF0aGlzTmVnICYmIG90aGVyTmVnKQogICAgICByZXR1cm4gMTsKICAgIGlmICghdGhpcy51bnNpZ25lZCkKICAgICAgcmV0dXJuIHRoaXMuc3ViKG90aGVyKS5pc05lZ2F0aXZlKCkgPyAtMSA6IDE7CiAgICByZXR1cm4gb3RoZXIuaGlnaCA+Pj4gMCA+IHRoaXMuaGlnaCA+Pj4gMCB8fCBvdGhlci5oaWdoID09PSB0aGlzLmhpZ2ggJiYgb3RoZXIubG93ID4+PiAwID4gdGhpcy5sb3cgPj4+IDAgPyAtMSA6IDE7CiAgfTsKICBMb25nUHJvdG90eXBlLmNvbXAgPSBMb25nUHJvdG90eXBlLmNvbXBhcmU7CiAgTG9uZ1Byb3RvdHlwZS5uZWdhdGUgPSBmdW5jdGlvbiBuZWdhdGUoKSB7CiAgICBpZiAoIXRoaXMudW5zaWduZWQgJiYgdGhpcy5lcShNSU5fVkFMVUUpKQogICAgICByZXR1cm4gTUlOX1ZBTFVFOwogICAgcmV0dXJuIHRoaXMubm90KCkuYWRkKE9ORSk7CiAgfTsKICBMb25nUHJvdG90eXBlLm5lZyA9IExvbmdQcm90b3R5cGUubmVnYXRlOwogIExvbmdQcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gYWRkKGFkZGVuZCkgewogICAgaWYgKCFpc0xvbmcoYWRkZW5kKSkKICAgICAgYWRkZW5kID0gZnJvbVZhbHVlKGFkZGVuZCk7CiAgICB2YXIgYTQ4ID0gdGhpcy5oaWdoID4+PiAxNjsKICAgIHZhciBhMzIgPSB0aGlzLmhpZ2ggJiA2NTUzNTsKICAgIHZhciBhMTYgPSB0aGlzLmxvdyA+Pj4gMTY7CiAgICB2YXIgYTAwID0gdGhpcy5sb3cgJiA2NTUzNTsKICAgIHZhciBiNDggPSBhZGRlbmQuaGlnaCA+Pj4gMTY7CiAgICB2YXIgYjMyID0gYWRkZW5kLmhpZ2ggJiA2NTUzNTsKICAgIHZhciBiMTYgPSBhZGRlbmQubG93ID4+PiAxNjsKICAgIHZhciBiMDAgPSBhZGRlbmQubG93ICYgNjU1MzU7CiAgICB2YXIgYzQ4ID0gMCwgYzMyID0gMCwgYzE2ID0gMCwgYzAwID0gMDsKICAgIGMwMCArPSBhMDAgKyBiMDA7CiAgICBjMTYgKz0gYzAwID4+PiAxNjsKICAgIGMwMCAmPSA2NTUzNTsKICAgIGMxNiArPSBhMTYgKyBiMTY7CiAgICBjMzIgKz0gYzE2ID4+PiAxNjsKICAgIGMxNiAmPSA2NTUzNTsKICAgIGMzMiArPSBhMzIgKyBiMzI7CiAgICBjNDggKz0gYzMyID4+PiAxNjsKICAgIGMzMiAmPSA2NTUzNTsKICAgIGM0OCArPSBhNDggKyBiNDg7CiAgICBjNDggJj0gNjU1MzU7CiAgICByZXR1cm4gZnJvbUJpdHMoYzE2IDw8IDE2IHwgYzAwLCBjNDggPDwgMTYgfCBjMzIsIHRoaXMudW5zaWduZWQpOwogIH07CiAgTG9uZ1Byb3RvdHlwZS5zdWJ0cmFjdCA9IGZ1bmN0aW9uIHN1YnRyYWN0KHN1YnRyYWhlbmQpIHsKICAgIGlmICghaXNMb25nKHN1YnRyYWhlbmQpKQogICAgICBzdWJ0cmFoZW5kID0gZnJvbVZhbHVlKHN1YnRyYWhlbmQpOwogICAgcmV0dXJuIHRoaXMuYWRkKHN1YnRyYWhlbmQubmVnKCkpOwogIH07CiAgTG9uZ1Byb3RvdHlwZS5zdWIgPSBMb25nUHJvdG90eXBlLnN1YnRyYWN0OwogIExvbmdQcm90b3R5cGUubXVsdGlwbHkgPSBmdW5jdGlvbiBtdWx0aXBseShtdWx0aXBsaWVyKSB7CiAgICBpZiAodGhpcy5pc1plcm8oKSkKICAgICAgcmV0dXJuIFpFUk87CiAgICBpZiAoIWlzTG9uZyhtdWx0aXBsaWVyKSkKICAgICAgbXVsdGlwbGllciA9IGZyb21WYWx1ZShtdWx0aXBsaWVyKTsKICAgIGlmICh3YXNtKSB7CiAgICAgIHZhciBsb3cgPSB3YXNtLm11bCh0aGlzLmxvdywgdGhpcy5oaWdoLCBtdWx0aXBsaWVyLmxvdywgbXVsdGlwbGllci5oaWdoKTsKICAgICAgcmV0dXJuIGZyb21CaXRzKGxvdywgd2FzbS5nZXRfaGlnaCgpLCB0aGlzLnVuc2lnbmVkKTsKICAgIH0KICAgIGlmIChtdWx0aXBsaWVyLmlzWmVybygpKQogICAgICByZXR1cm4gWkVSTzsKICAgIGlmICh0aGlzLmVxKE1JTl9WQUxVRSkpCiAgICAgIHJldHVybiBtdWx0aXBsaWVyLmlzT2RkKCkgPyBNSU5fVkFMVUUgOiBaRVJPOwogICAgaWYgKG11bHRpcGxpZXIuZXEoTUlOX1ZBTFVFKSkKICAgICAgcmV0dXJuIHRoaXMuaXNPZGQoKSA/IE1JTl9WQUxVRSA6IFpFUk87CiAgICBpZiAodGhpcy5pc05lZ2F0aXZlKCkpIHsKICAgICAgaWYgKG11bHRpcGxpZXIuaXNOZWdhdGl2ZSgpKQogICAgICAgIHJldHVybiB0aGlzLm5lZygpLm11bChtdWx0aXBsaWVyLm5lZygpKTsKICAgICAgZWxzZQogICAgICAgIHJldHVybiB0aGlzLm5lZygpLm11bChtdWx0aXBsaWVyKS5uZWcoKTsKICAgIH0gZWxzZSBpZiAobXVsdGlwbGllci5pc05lZ2F0aXZlKCkpCiAgICAgIHJldHVybiB0aGlzLm11bChtdWx0aXBsaWVyLm5lZygpKS5uZWcoKTsKICAgIGlmICh0aGlzLmx0KFRXT19QV1JfMjQpICYmIG11bHRpcGxpZXIubHQoVFdPX1BXUl8yNCkpCiAgICAgIHJldHVybiBmcm9tTnVtYmVyKHRoaXMudG9OdW1iZXIoKSAqIG11bHRpcGxpZXIudG9OdW1iZXIoKSwgdGhpcy51bnNpZ25lZCk7CiAgICB2YXIgYTQ4ID0gdGhpcy5oaWdoID4+PiAxNjsKICAgIHZhciBhMzIgPSB0aGlzLmhpZ2ggJiA2NTUzNTsKICAgIHZhciBhMTYgPSB0aGlzLmxvdyA+Pj4gMTY7CiAgICB2YXIgYTAwID0gdGhpcy5sb3cgJiA2NTUzNTsKICAgIHZhciBiNDggPSBtdWx0aXBsaWVyLmhpZ2ggPj4+IDE2OwogICAgdmFyIGIzMiA9IG11bHRpcGxpZXIuaGlnaCAmIDY1NTM1OwogICAgdmFyIGIxNiA9IG11bHRpcGxpZXIubG93ID4+PiAxNjsKICAgIHZhciBiMDAgPSBtdWx0aXBsaWVyLmxvdyAmIDY1NTM1OwogICAgdmFyIGM0OCA9IDAsIGMzMiA9IDAsIGMxNiA9IDAsIGMwMCA9IDA7CiAgICBjMDAgKz0gYTAwICogYjAwOwogICAgYzE2ICs9IGMwMCA+Pj4gMTY7CiAgICBjMDAgJj0gNjU1MzU7CiAgICBjMTYgKz0gYTE2ICogYjAwOwogICAgYzMyICs9IGMxNiA+Pj4gMTY7CiAgICBjMTYgJj0gNjU1MzU7CiAgICBjMTYgKz0gYTAwICogYjE2OwogICAgYzMyICs9IGMxNiA+Pj4gMTY7CiAgICBjMTYgJj0gNjU1MzU7CiAgICBjMzIgKz0gYTMyICogYjAwOwogICAgYzQ4ICs9IGMzMiA+Pj4gMTY7CiAgICBjMzIgJj0gNjU1MzU7CiAgICBjMzIgKz0gYTE2ICogYjE2OwogICAgYzQ4ICs9IGMzMiA+Pj4gMTY7CiAgICBjMzIgJj0gNjU1MzU7CiAgICBjMzIgKz0gYTAwICogYjMyOwogICAgYzQ4ICs9IGMzMiA+Pj4gMTY7CiAgICBjMzIgJj0gNjU1MzU7CiAgICBjNDggKz0gYTQ4ICogYjAwICsgYTMyICogYjE2ICsgYTE2ICogYjMyICsgYTAwICogYjQ4OwogICAgYzQ4ICY9IDY1NTM1OwogICAgcmV0dXJuIGZyb21CaXRzKGMxNiA8PCAxNiB8IGMwMCwgYzQ4IDw8IDE2IHwgYzMyLCB0aGlzLnVuc2lnbmVkKTsKICB9OwogIExvbmdQcm90b3R5cGUubXVsID0gTG9uZ1Byb3RvdHlwZS5tdWx0aXBseTsKICBMb25nUHJvdG90eXBlLmRpdmlkZSA9IGZ1bmN0aW9uIGRpdmlkZShkaXZpc29yKSB7CiAgICBpZiAoIWlzTG9uZyhkaXZpc29yKSkKICAgICAgZGl2aXNvciA9IGZyb21WYWx1ZShkaXZpc29yKTsKICAgIGlmIChkaXZpc29yLmlzWmVybygpKQogICAgICB0aHJvdyBFcnJvcigiZGl2aXNpb24gYnkgemVybyIpOwogICAgaWYgKHdhc20pIHsKICAgICAgaWYgKCF0aGlzLnVuc2lnbmVkICYmIHRoaXMuaGlnaCA9PT0gLTIxNDc0ODM2NDggJiYgZGl2aXNvci5sb3cgPT09IC0xICYmIGRpdmlzb3IuaGlnaCA9PT0gLTEpIHsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQogICAgICB2YXIgbG93ID0gKHRoaXMudW5zaWduZWQgPyB3YXNtLmRpdl91IDogd2FzbS5kaXZfcykodGhpcy5sb3csIHRoaXMuaGlnaCwgZGl2aXNvci5sb3csIGRpdmlzb3IuaGlnaCk7CiAgICAgIHJldHVybiBmcm9tQml0cyhsb3csIHdhc20uZ2V0X2hpZ2goKSwgdGhpcy51bnNpZ25lZCk7CiAgICB9CiAgICBpZiAodGhpcy5pc1plcm8oKSkKICAgICAgcmV0dXJuIHRoaXMudW5zaWduZWQgPyBVWkVSTyA6IFpFUk87CiAgICB2YXIgYXBwcm94LCByZW0sIHJlczsKICAgIGlmICghdGhpcy51bnNpZ25lZCkgewogICAgICBpZiAodGhpcy5lcShNSU5fVkFMVUUpKSB7CiAgICAgICAgaWYgKGRpdmlzb3IuZXEoT05FKSB8fCBkaXZpc29yLmVxKE5FR19PTkUpKQogICAgICAgICAgcmV0dXJuIE1JTl9WQUxVRTsKICAgICAgICBlbHNlIGlmIChkaXZpc29yLmVxKE1JTl9WQUxVRSkpCiAgICAgICAgICByZXR1cm4gT05FOwogICAgICAgIGVsc2UgewogICAgICAgICAgdmFyIGhhbGZUaGlzID0gdGhpcy5zaHIoMSk7CiAgICAgICAgICBhcHByb3ggPSBoYWxmVGhpcy5kaXYoZGl2aXNvcikuc2hsKDEpOwogICAgICAgICAgaWYgKGFwcHJveC5lcShaRVJPKSkgewogICAgICAgICAgICByZXR1cm4gZGl2aXNvci5pc05lZ2F0aXZlKCkgPyBPTkUgOiBORUdfT05FOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVtID0gdGhpcy5zdWIoZGl2aXNvci5tdWwoYXBwcm94KSk7CiAgICAgICAgICAgIHJlcyA9IGFwcHJveC5hZGQocmVtLmRpdihkaXZpc29yKSk7CiAgICAgICAgICAgIHJldHVybiByZXM7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKGRpdmlzb3IuZXEoTUlOX1ZBTFVFKSkKICAgICAgICByZXR1cm4gdGhpcy51bnNpZ25lZCA/IFVaRVJPIDogWkVSTzsKICAgICAgaWYgKHRoaXMuaXNOZWdhdGl2ZSgpKSB7CiAgICAgICAgaWYgKGRpdmlzb3IuaXNOZWdhdGl2ZSgpKQogICAgICAgICAgcmV0dXJuIHRoaXMubmVnKCkuZGl2KGRpdmlzb3IubmVnKCkpOwogICAgICAgIHJldHVybiB0aGlzLm5lZygpLmRpdihkaXZpc29yKS5uZWcoKTsKICAgICAgfSBlbHNlIGlmIChkaXZpc29yLmlzTmVnYXRpdmUoKSkKICAgICAgICByZXR1cm4gdGhpcy5kaXYoZGl2aXNvci5uZWcoKSkubmVnKCk7CiAgICAgIHJlcyA9IFpFUk87CiAgICB9IGVsc2UgewogICAgICBpZiAoIWRpdmlzb3IudW5zaWduZWQpCiAgICAgICAgZGl2aXNvciA9IGRpdmlzb3IudG9VbnNpZ25lZCgpOwogICAgICBpZiAoZGl2aXNvci5ndCh0aGlzKSkKICAgICAgICByZXR1cm4gVVpFUk87CiAgICAgIGlmIChkaXZpc29yLmd0KHRoaXMuc2hydSgxKSkpCiAgICAgICAgcmV0dXJuIFVPTkU7CiAgICAgIHJlcyA9IFVaRVJPOwogICAgfQogICAgcmVtID0gdGhpczsKICAgIHdoaWxlIChyZW0uZ3RlKGRpdmlzb3IpKSB7CiAgICAgIGFwcHJveCA9IE1hdGgubWF4KDEsIE1hdGguZmxvb3IocmVtLnRvTnVtYmVyKCkgLyBkaXZpc29yLnRvTnVtYmVyKCkpKTsKICAgICAgdmFyIGxvZzIgPSBNYXRoLmNlaWwoTWF0aC5sb2coYXBwcm94KSAvIE1hdGguTE4yKSwgZGVsdGEgPSBsb2cyIDw9IDQ4ID8gMSA6IHBvd19kYmwoMiwgbG9nMiAtIDQ4KSwgYXBwcm94UmVzID0gZnJvbU51bWJlcihhcHByb3gpLCBhcHByb3hSZW0gPSBhcHByb3hSZXMubXVsKGRpdmlzb3IpOwogICAgICB3aGlsZSAoYXBwcm94UmVtLmlzTmVnYXRpdmUoKSB8fCBhcHByb3hSZW0uZ3QocmVtKSkgewogICAgICAgIGFwcHJveCAtPSBkZWx0YTsKICAgICAgICBhcHByb3hSZXMgPSBmcm9tTnVtYmVyKGFwcHJveCwgdGhpcy51bnNpZ25lZCk7CiAgICAgICAgYXBwcm94UmVtID0gYXBwcm94UmVzLm11bChkaXZpc29yKTsKICAgICAgfQogICAgICBpZiAoYXBwcm94UmVzLmlzWmVybygpKQogICAgICAgIGFwcHJveFJlcyA9IE9ORTsKICAgICAgcmVzID0gcmVzLmFkZChhcHByb3hSZXMpOwogICAgICByZW0gPSByZW0uc3ViKGFwcHJveFJlbSk7CiAgICB9CiAgICByZXR1cm4gcmVzOwogIH07CiAgTG9uZ1Byb3RvdHlwZS5kaXYgPSBMb25nUHJvdG90eXBlLmRpdmlkZTsKICBMb25nUHJvdG90eXBlLm1vZHVsbyA9IGZ1bmN0aW9uIG1vZHVsbyhkaXZpc29yKSB7CiAgICBpZiAoIWlzTG9uZyhkaXZpc29yKSkKICAgICAgZGl2aXNvciA9IGZyb21WYWx1ZShkaXZpc29yKTsKICAgIGlmICh3YXNtKSB7CiAgICAgIHZhciBsb3cgPSAodGhpcy51bnNpZ25lZCA/IHdhc20ucmVtX3UgOiB3YXNtLnJlbV9zKSh0aGlzLmxvdywgdGhpcy5oaWdoLCBkaXZpc29yLmxvdywgZGl2aXNvci5oaWdoKTsKICAgICAgcmV0dXJuIGZyb21CaXRzKGxvdywgd2FzbS5nZXRfaGlnaCgpLCB0aGlzLnVuc2lnbmVkKTsKICAgIH0KICAgIHJldHVybiB0aGlzLnN1Yih0aGlzLmRpdihkaXZpc29yKS5tdWwoZGl2aXNvcikpOwogIH07CiAgTG9uZ1Byb3RvdHlwZS5tb2QgPSBMb25nUHJvdG90eXBlLm1vZHVsbzsKICBMb25nUHJvdG90eXBlLnJlbSA9IExvbmdQcm90b3R5cGUubW9kdWxvOwogIExvbmdQcm90b3R5cGUubm90ID0gZnVuY3Rpb24gbm90KCkgewogICAgcmV0dXJuIGZyb21CaXRzKH50aGlzLmxvdywgfnRoaXMuaGlnaCwgdGhpcy51bnNpZ25lZCk7CiAgfTsKICBMb25nUHJvdG90eXBlLmFuZCA9IGZ1bmN0aW9uIGFuZChvdGhlcikgewogICAgaWYgKCFpc0xvbmcob3RoZXIpKQogICAgICBvdGhlciA9IGZyb21WYWx1ZShvdGhlcik7CiAgICByZXR1cm4gZnJvbUJpdHModGhpcy5sb3cgJiBvdGhlci5sb3csIHRoaXMuaGlnaCAmIG90aGVyLmhpZ2gsIHRoaXMudW5zaWduZWQpOwogIH07CiAgTG9uZ1Byb3RvdHlwZS5vciA9IGZ1bmN0aW9uIG9yKG90aGVyKSB7CiAgICBpZiAoIWlzTG9uZyhvdGhlcikpCiAgICAgIG90aGVyID0gZnJvbVZhbHVlKG90aGVyKTsKICAgIHJldHVybiBmcm9tQml0cyh0aGlzLmxvdyB8IG90aGVyLmxvdywgdGhpcy5oaWdoIHwgb3RoZXIuaGlnaCwgdGhpcy51bnNpZ25lZCk7CiAgfTsKICBMb25nUHJvdG90eXBlLnhvciA9IGZ1bmN0aW9uIHhvcihvdGhlcikgewogICAgaWYgKCFpc0xvbmcob3RoZXIpKQogICAgICBvdGhlciA9IGZyb21WYWx1ZShvdGhlcik7CiAgICByZXR1cm4gZnJvbUJpdHModGhpcy5sb3cgXiBvdGhlci5sb3csIHRoaXMuaGlnaCBeIG90aGVyLmhpZ2gsIHRoaXMudW5zaWduZWQpOwogIH07CiAgTG9uZ1Byb3RvdHlwZS5zaGlmdExlZnQgPSBmdW5jdGlvbiBzaGlmdExlZnQobnVtQml0cykgewogICAgaWYgKGlzTG9uZyhudW1CaXRzKSkKICAgICAgbnVtQml0cyA9IG51bUJpdHMudG9JbnQoKTsKICAgIGlmICgobnVtQml0cyAmPSA2MykgPT09IDApCiAgICAgIHJldHVybiB0aGlzOwogICAgZWxzZSBpZiAobnVtQml0cyA8IDMyKQogICAgICByZXR1cm4gZnJvbUJpdHModGhpcy5sb3cgPDwgbnVtQml0cywgdGhpcy5oaWdoIDw8IG51bUJpdHMgfCB0aGlzLmxvdyA+Pj4gMzIgLSBudW1CaXRzLCB0aGlzLnVuc2lnbmVkKTsKICAgIGVsc2UKICAgICAgcmV0dXJuIGZyb21CaXRzKDAsIHRoaXMubG93IDw8IG51bUJpdHMgLSAzMiwgdGhpcy51bnNpZ25lZCk7CiAgfTsKICBMb25nUHJvdG90eXBlLnNobCA9IExvbmdQcm90b3R5cGUuc2hpZnRMZWZ0OwogIExvbmdQcm90b3R5cGUuc2hpZnRSaWdodCA9IGZ1bmN0aW9uIHNoaWZ0UmlnaHQobnVtQml0cykgewogICAgaWYgKGlzTG9uZyhudW1CaXRzKSkKICAgICAgbnVtQml0cyA9IG51bUJpdHMudG9JbnQoKTsKICAgIGlmICgobnVtQml0cyAmPSA2MykgPT09IDApCiAgICAgIHJldHVybiB0aGlzOwogICAgZWxzZSBpZiAobnVtQml0cyA8IDMyKQogICAgICByZXR1cm4gZnJvbUJpdHModGhpcy5sb3cgPj4+IG51bUJpdHMgfCB0aGlzLmhpZ2ggPDwgMzIgLSBudW1CaXRzLCB0aGlzLmhpZ2ggPj4gbnVtQml0cywgdGhpcy51bnNpZ25lZCk7CiAgICBlbHNlCiAgICAgIHJldHVybiBmcm9tQml0cyh0aGlzLmhpZ2ggPj4gbnVtQml0cyAtIDMyLCB0aGlzLmhpZ2ggPj0gMCA/IDAgOiAtMSwgdGhpcy51bnNpZ25lZCk7CiAgfTsKICBMb25nUHJvdG90eXBlLnNociA9IExvbmdQcm90b3R5cGUuc2hpZnRSaWdodDsKICBMb25nUHJvdG90eXBlLnNoaWZ0UmlnaHRVbnNpZ25lZCA9IGZ1bmN0aW9uIHNoaWZ0UmlnaHRVbnNpZ25lZChudW1CaXRzKSB7CiAgICBpZiAoaXNMb25nKG51bUJpdHMpKQogICAgICBudW1CaXRzID0gbnVtQml0cy50b0ludCgpOwogICAgbnVtQml0cyAmPSA2MzsKICAgIGlmIChudW1CaXRzID09PSAwKQogICAgICByZXR1cm4gdGhpczsKICAgIGVsc2UgewogICAgICB2YXIgaGlnaCA9IHRoaXMuaGlnaDsKICAgICAgaWYgKG51bUJpdHMgPCAzMikgewogICAgICAgIHZhciBsb3cgPSB0aGlzLmxvdzsKICAgICAgICByZXR1cm4gZnJvbUJpdHMobG93ID4+PiBudW1CaXRzIHwgaGlnaCA8PCAzMiAtIG51bUJpdHMsIGhpZ2ggPj4+IG51bUJpdHMsIHRoaXMudW5zaWduZWQpOwogICAgICB9IGVsc2UgaWYgKG51bUJpdHMgPT09IDMyKQogICAgICAgIHJldHVybiBmcm9tQml0cyhoaWdoLCAwLCB0aGlzLnVuc2lnbmVkKTsKICAgICAgZWxzZQogICAgICAgIHJldHVybiBmcm9tQml0cyhoaWdoID4+PiBudW1CaXRzIC0gMzIsIDAsIHRoaXMudW5zaWduZWQpOwogICAgfQogIH07CiAgTG9uZ1Byb3RvdHlwZS5zaHJ1ID0gTG9uZ1Byb3RvdHlwZS5zaGlmdFJpZ2h0VW5zaWduZWQ7CiAgTG9uZ1Byb3RvdHlwZS5zaHJfdSA9IExvbmdQcm90b3R5cGUuc2hpZnRSaWdodFVuc2lnbmVkOwogIExvbmdQcm90b3R5cGUudG9TaWduZWQgPSBmdW5jdGlvbiB0b1NpZ25lZCgpIHsKICAgIGlmICghdGhpcy51bnNpZ25lZCkKICAgICAgcmV0dXJuIHRoaXM7CiAgICByZXR1cm4gZnJvbUJpdHModGhpcy5sb3csIHRoaXMuaGlnaCwgZmFsc2UpOwogIH07CiAgTG9uZ1Byb3RvdHlwZS50b1Vuc2lnbmVkID0gZnVuY3Rpb24gdG9VbnNpZ25lZCgpIHsKICAgIGlmICh0aGlzLnVuc2lnbmVkKQogICAgICByZXR1cm4gdGhpczsKICAgIHJldHVybiBmcm9tQml0cyh0aGlzLmxvdywgdGhpcy5oaWdoLCB0cnVlKTsKICB9OwogIExvbmdQcm90b3R5cGUudG9CeXRlcyA9IGZ1bmN0aW9uIHRvQnl0ZXMobGUpIHsKICAgIHJldHVybiBsZSA/IHRoaXMudG9CeXRlc0xFKCkgOiB0aGlzLnRvQnl0ZXNCRSgpOwogIH07CiAgTG9uZ1Byb3RvdHlwZS50b0J5dGVzTEUgPSBmdW5jdGlvbiB0b0J5dGVzTEUoKSB7CiAgICB2YXIgaGkgPSB0aGlzLmhpZ2gsIGxvID0gdGhpcy5sb3c7CiAgICByZXR1cm4gWwogICAgICBsbyAmIDI1NSwKICAgICAgbG8gPj4+IDggJiAyNTUsCiAgICAgIGxvID4+PiAxNiAmIDI1NSwKICAgICAgbG8gPj4+IDI0LAogICAgICBoaSAmIDI1NSwKICAgICAgaGkgPj4+IDggJiAyNTUsCiAgICAgIGhpID4+PiAxNiAmIDI1NSwKICAgICAgaGkgPj4+IDI0CiAgICBdOwogIH07CiAgTG9uZ1Byb3RvdHlwZS50b0J5dGVzQkUgPSBmdW5jdGlvbiB0b0J5dGVzQkUoKSB7CiAgICB2YXIgaGkgPSB0aGlzLmhpZ2gsIGxvID0gdGhpcy5sb3c7CiAgICByZXR1cm4gWwogICAgICBoaSA+Pj4gMjQsCiAgICAgIGhpID4+PiAxNiAmIDI1NSwKICAgICAgaGkgPj4+IDggJiAyNTUsCiAgICAgIGhpICYgMjU1LAogICAgICBsbyA+Pj4gMjQsCiAgICAgIGxvID4+PiAxNiAmIDI1NSwKICAgICAgbG8gPj4+IDggJiAyNTUsCiAgICAgIGxvICYgMjU1CiAgICBdOwogIH07CiAgTG9uZyQxLmZyb21CeXRlcyA9IGZ1bmN0aW9uIGZyb21CeXRlcyhieXRlcywgdW5zaWduZWQsIGxlKSB7CiAgICByZXR1cm4gbGUgPyBMb25nJDEuZnJvbUJ5dGVzTEUoYnl0ZXMsIHVuc2lnbmVkKSA6IExvbmckMS5mcm9tQnl0ZXNCRShieXRlcywgdW5zaWduZWQpOwogIH07CiAgTG9uZyQxLmZyb21CeXRlc0xFID0gZnVuY3Rpb24gZnJvbUJ5dGVzTEUoYnl0ZXMsIHVuc2lnbmVkKSB7CiAgICByZXR1cm4gbmV3IExvbmckMShieXRlc1swXSB8IGJ5dGVzWzFdIDw8IDggfCBieXRlc1syXSA8PCAxNiB8IGJ5dGVzWzNdIDw8IDI0LCBieXRlc1s0XSB8IGJ5dGVzWzVdIDw8IDggfCBieXRlc1s2XSA8PCAxNiB8IGJ5dGVzWzddIDw8IDI0LCB1bnNpZ25lZCk7CiAgfTsKICBMb25nJDEuZnJvbUJ5dGVzQkUgPSBmdW5jdGlvbiBmcm9tQnl0ZXNCRShieXRlcywgdW5zaWduZWQpIHsKICAgIHJldHVybiBuZXcgTG9uZyQxKGJ5dGVzWzRdIDw8IDI0IHwgYnl0ZXNbNV0gPDwgMTYgfCBieXRlc1s2XSA8PCA4IHwgYnl0ZXNbN10sIGJ5dGVzWzBdIDw8IDI0IHwgYnl0ZXNbMV0gPDwgMTYgfCBieXRlc1syXSA8PCA4IHwgYnl0ZXNbM10sIHVuc2lnbmVkKTsKICB9OwogIHZhciB2aXJ0dWFsT2Zmc2V0ID0ge307CiAgdmFyIGVudHJ5VmlydHVhbCQ1ID0gZW50cnlWaXJ0dWFsJGE7CiAgdmFyIGNvbmNhdCQzID0gZW50cnlWaXJ0dWFsJDUoIkFycmF5IikuY29uY2F0OwogIHZhciBjb25jYXQkMiA9IGNvbmNhdCQzOwogIHZhciBBcnJheVByb3RvdHlwZSQzID0gQXJyYXkucHJvdG90eXBlOwogIHZhciBjb25jYXRfMSA9IGZ1bmN0aW9uKGl0KSB7CiAgICB2YXIgb3duID0gaXQuY29uY2F0OwogICAgcmV0dXJuIGl0ID09PSBBcnJheVByb3RvdHlwZSQzIHx8IGl0IGluc3RhbmNlb2YgQXJyYXkgJiYgb3duID09PSBBcnJheVByb3RvdHlwZSQzLmNvbmNhdCA/IGNvbmNhdCQyIDogb3duOwogIH07CiAgdmFyIHBhcmVudCRqID0gY29uY2F0XzE7CiAgdmFyIGNvbmNhdCQxID0gcGFyZW50JGo7CiAgdmFyIGNvbmNhdCA9IGNvbmNhdCQxOwogIChmdW5jdGlvbihleHBvcnRzKSB7CiAgICB2YXIgX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIgPSBpbnRlcm9wUmVxdWlyZURlZmF1bHQkMS5leHBvcnRzOwogICAgdmFyIF9PYmplY3QkZGVmaW5lUHJvcGVydHkgPSBkZWZpbmVQcm9wZXJ0eSQ5OwogICAgX09iamVjdCRkZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICAgICAgdmFsdWU6IHRydWUKICAgIH0pOwogICAgZXhwb3J0cy5mcm9tQnl0ZXMgPSBmcm9tQnl0ZXM7CiAgICBleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CiAgICB2YXIgX2NvbmNhdCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKGNvbmNhdCk7CiAgICB2YXIgX2NsYXNzQ2FsbENoZWNrMjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0MihjbGFzc0NhbGxDaGVjayQxLmV4cG9ydHMpOwogICAgdmFyIF9jcmVhdGVDbGFzczIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoY3JlYXRlQ2xhc3MkMS5leHBvcnRzKTsKICAgIHZhciBfZGVmaW5lUHJvcGVydHkyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKGRlZmluZVByb3BlcnR5JDYuZXhwb3J0cyk7CiAgICB2YXIgVmlydHVhbE9mZnNldCA9IC8qIEBfX1BVUkVfXyAqLyBmdW5jdGlvbigpIHsKICAgICAgZnVuY3Rpb24gVmlydHVhbE9mZnNldDIoYmxvY2tQb3NpdGlvbiwgZGF0YVBvc2l0aW9uKSB7CiAgICAgICAgKDAsIF9jbGFzc0NhbGxDaGVjazIyLmRlZmF1bHQpKHRoaXMsIFZpcnR1YWxPZmZzZXQyKTsKICAgICAgICAoMCwgX2RlZmluZVByb3BlcnR5MjIuZGVmYXVsdCkodGhpcywgImJsb2NrUG9zaXRpb24iLCB2b2lkIDApOwogICAgICAgICgwLCBfZGVmaW5lUHJvcGVydHkyMi5kZWZhdWx0KSh0aGlzLCAiZGF0YVBvc2l0aW9uIiwgdm9pZCAwKTsKICAgICAgICB0aGlzLmJsb2NrUG9zaXRpb24gPSBibG9ja1Bvc2l0aW9uOwogICAgICAgIHRoaXMuZGF0YVBvc2l0aW9uID0gZGF0YVBvc2l0aW9uOwogICAgICB9CiAgICAgICgwLCBfY3JlYXRlQ2xhc3MyMi5kZWZhdWx0KShWaXJ0dWFsT2Zmc2V0MiwgW3sKICAgICAgICBrZXk6ICJ0b1N0cmluZyIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHRvU3RyaW5nMigpIHsKICAgICAgICAgIHZhciBfY29udGV4dDsKICAgICAgICAgIHJldHVybiAoMCwgX2NvbmNhdC5kZWZhdWx0KShfY29udGV4dCA9ICIiLmNvbmNhdCh0aGlzLmJsb2NrUG9zaXRpb24sICI6IikpLmNhbGwoX2NvbnRleHQsIHRoaXMuZGF0YVBvc2l0aW9uKTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJjb21wYXJlVG8iLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wYXJlVG8oYikgewogICAgICAgICAgcmV0dXJuIHRoaXMuYmxvY2tQb3NpdGlvbiAtIGIuYmxvY2tQb3NpdGlvbiB8fCB0aGlzLmRhdGFQb3NpdGlvbiAtIGIuZGF0YVBvc2l0aW9uOwogICAgICAgIH0KICAgICAgfV0sIFt7CiAgICAgICAga2V5OiAibWluIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbWluMigpIHsKICAgICAgICAgIHZhciBtaW4zOwogICAgICAgICAgdmFyIGkyID0gMDsKICAgICAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykgewogICAgICAgICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldOwogICAgICAgICAgfQogICAgICAgICAgZm9yICg7ICFtaW4zOyBpMiArPSAxKSB7CiAgICAgICAgICAgIG1pbjMgPSBhcmdzW2kyXTsKICAgICAgICAgIH0KICAgICAgICAgIGZvciAoOyBpMiA8IGFyZ3MubGVuZ3RoOyBpMiArPSAxKSB7CiAgICAgICAgICAgIGlmIChtaW4zLmNvbXBhcmVUbyhhcmdzW2kyXSkgPiAwKSB7CiAgICAgICAgICAgICAgbWluMyA9IGFyZ3NbaTJdOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gbWluMzsKICAgICAgICB9CiAgICAgIH1dKTsKICAgICAgcmV0dXJuIFZpcnR1YWxPZmZzZXQyOwogICAgfSgpOwogICAgZXhwb3J0cy5kZWZhdWx0ID0gVmlydHVhbE9mZnNldDsKICAgIGZ1bmN0aW9uIGZyb21CeXRlcyhieXRlcykgewogICAgICB2YXIgb2Zmc2V0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB2b2lkIDAgPyBhcmd1bWVudHNbMV0gOiAwOwogICAgICB2YXIgYmlnZW5kaWFuID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB2b2lkIDAgPyBhcmd1bWVudHNbMl0gOiBmYWxzZTsKICAgICAgaWYgKGJpZ2VuZGlhbikgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiYmlnLWVuZGlhbiB2aXJ0dWFsIGZpbGUgb2Zmc2V0cyBub3QgaW1wbGVtZW50ZWQiKTsKICAgICAgfQogICAgICByZXR1cm4gbmV3IFZpcnR1YWxPZmZzZXQoYnl0ZXNbb2Zmc2V0ICsgN10gKiAxMDk5NTExNjI3Nzc2ICsgYnl0ZXNbb2Zmc2V0ICsgNl0gKiA0Mjk0OTY3Mjk2ICsgYnl0ZXNbb2Zmc2V0ICsgNV0gKiAxNjc3NzIxNiArIGJ5dGVzW29mZnNldCArIDRdICogNjU1MzYgKyBieXRlc1tvZmZzZXQgKyAzXSAqIDI1NiArIGJ5dGVzW29mZnNldCArIDJdLCBieXRlc1tvZmZzZXQgKyAxXSA8PCA4IHwgYnl0ZXNbb2Zmc2V0XSk7CiAgICB9CiAgfSkodmlydHVhbE9mZnNldCk7CiAgdmFyIGNodW5rID0ge307CiAgKGZ1bmN0aW9uKGV4cG9ydHMpIHsKICAgIHZhciBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0MiA9IGludGVyb3BSZXF1aXJlRGVmYXVsdCQxLmV4cG9ydHM7CiAgICB2YXIgX09iamVjdCRkZWZpbmVQcm9wZXJ0eSA9IGRlZmluZVByb3BlcnR5JDk7CiAgICBfT2JqZWN0JGRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogICAgICB2YWx1ZTogdHJ1ZQogICAgfSk7CiAgICBleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CiAgICB2YXIgX2NvbmNhdCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKGNvbmNhdCk7CiAgICB2YXIgX2NsYXNzQ2FsbENoZWNrMjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0MihjbGFzc0NhbGxDaGVjayQxLmV4cG9ydHMpOwogICAgdmFyIF9jcmVhdGVDbGFzczIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoY3JlYXRlQ2xhc3MkMS5leHBvcnRzKTsKICAgIHZhciBfZGVmaW5lUHJvcGVydHkyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKGRlZmluZVByb3BlcnR5JDYuZXhwb3J0cyk7CiAgICB2YXIgQ2h1bmsgPSAvKiBAX19QVVJFX18gKi8gZnVuY3Rpb24oKSB7CiAgICAgIGZ1bmN0aW9uIENodW5rMihtaW52LCBtYXh2LCBiaW4pIHsKICAgICAgICB2YXIgZmV0Y2hlZFNpemUgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHZvaWQgMCA/IGFyZ3VtZW50c1szXSA6IHZvaWQgMDsKICAgICAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMjIuZGVmYXVsdCkodGhpcywgQ2h1bmsyKTsKICAgICAgICAoMCwgX2RlZmluZVByb3BlcnR5MjIuZGVmYXVsdCkodGhpcywgIm1pbnYiLCB2b2lkIDApOwogICAgICAgICgwLCBfZGVmaW5lUHJvcGVydHkyMi5kZWZhdWx0KSh0aGlzLCAibWF4diIsIHZvaWQgMCk7CiAgICAgICAgKDAsIF9kZWZpbmVQcm9wZXJ0eTIyLmRlZmF1bHQpKHRoaXMsICJiaW4iLCB2b2lkIDApOwogICAgICAgICgwLCBfZGVmaW5lUHJvcGVydHkyMi5kZWZhdWx0KSh0aGlzLCAiX2ZldGNoZWRTaXplIiwgdm9pZCAwKTsKICAgICAgICB0aGlzLm1pbnYgPSBtaW52OwogICAgICAgIHRoaXMubWF4diA9IG1heHY7CiAgICAgICAgdGhpcy5iaW4gPSBiaW47CiAgICAgICAgdGhpcy5fZmV0Y2hlZFNpemUgPSBmZXRjaGVkU2l6ZTsKICAgICAgfQogICAgICAoMCwgX2NyZWF0ZUNsYXNzMjIuZGVmYXVsdCkoQ2h1bmsyLCBbewogICAgICAgIGtleTogInRvVW5pcXVlU3RyaW5nIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdG9VbmlxdWVTdHJpbmcoKSB7CiAgICAgICAgICB2YXIgX2NvbnRleHQsIF9jb250ZXh0MiwgX2NvbnRleHQzOwogICAgICAgICAgcmV0dXJuICgwLCBfY29uY2F0LmRlZmF1bHQpKF9jb250ZXh0ID0gKDAsIF9jb25jYXQuZGVmYXVsdCkoX2NvbnRleHQyID0gKDAsIF9jb25jYXQuZGVmYXVsdCkoX2NvbnRleHQzID0gIiIuY29uY2F0KHRoaXMubWludiwgIi4uIikpLmNhbGwoX2NvbnRleHQzLCB0aGlzLm1heHYsICIgKGJpbiAiKSkuY2FsbChfY29udGV4dDIsIHRoaXMuYmluLCAiLCBmZXRjaGVkU2l6ZSAiKSkuY2FsbChfY29udGV4dCwgdGhpcy5mZXRjaGVkU2l6ZSgpLCAiKSIpOwogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIGtleTogInRvU3RyaW5nIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdG9TdHJpbmcyKCkgewogICAgICAgICAgcmV0dXJuIHRoaXMudG9VbmlxdWVTdHJpbmcoKTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJjb21wYXJlVG8iLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wYXJlVG8oYikgewogICAgICAgICAgcmV0dXJuIHRoaXMubWludi5jb21wYXJlVG8oYi5taW52KSB8fCB0aGlzLm1heHYuY29tcGFyZVRvKGIubWF4dikgfHwgdGhpcy5iaW4gLSBiLmJpbjsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJmZXRjaGVkU2l6ZSIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGZldGNoZWRTaXplKCkgewogICAgICAgICAgaWYgKHRoaXMuX2ZldGNoZWRTaXplICE9PSB2b2lkIDApIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2ZldGNoZWRTaXplOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHRoaXMubWF4di5ibG9ja1Bvc2l0aW9uICsgKDEgPDwgMTYpIC0gdGhpcy5taW52LmJsb2NrUG9zaXRpb247CiAgICAgICAgfQogICAgICB9XSk7CiAgICAgIHJldHVybiBDaHVuazI7CiAgICB9KCk7CiAgICBleHBvcnRzLmRlZmF1bHQgPSBDaHVuazsKICB9KShjaHVuayk7CiAgdmFyIGluZGV4RmlsZSA9IHt9OwogIHZhciBkaXN0JDIgPSB7fTsKICB2YXIgaW50ZXJvcFJlcXVpcmVEZWZhdWx0ID0geyBleHBvcnRzOiB7fSB9OwogIChmdW5jdGlvbihtb2R1bGUpIHsKICAgIGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKG9iaikgewogICAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogewogICAgICAgICJkZWZhdWx0Ijogb2JqCiAgICAgIH07CiAgICB9CiAgICBtb2R1bGUuZXhwb3J0cyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyOwogICAgbW9kdWxlLmV4cG9ydHNbImRlZmF1bHQiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKICB9KShpbnRlcm9wUmVxdWlyZURlZmF1bHQpOwogIHZhciBBYm9ydGFibGVQcm9taXNlQ2FjaGUkMSA9IHt9OwogIHZhciBfdHlwZW9mID0geyBleHBvcnRzOiB7fSB9OwogIChmdW5jdGlvbihtb2R1bGUpIHsKICAgIGZ1bmN0aW9uIF90eXBlb2YzKG9iaikgewogICAgICAiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2YiOwogICAgICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSAic3ltYm9sIikgewogICAgICAgIG1vZHVsZS5leHBvcnRzID0gX3R5cGVvZjMgPSBmdW5jdGlvbiBfdHlwZW9mNChvYmoyKSB7CiAgICAgICAgICByZXR1cm4gdHlwZW9mIG9iajI7CiAgICAgICAgfTsKICAgICAgICBtb2R1bGUuZXhwb3J0c1siZGVmYXVsdCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIG1vZHVsZS5leHBvcnRzID0gX3R5cGVvZjMgPSBmdW5jdGlvbiBfdHlwZW9mNChvYmoyKSB7CiAgICAgICAgICByZXR1cm4gb2JqMiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iajIuY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmoyICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqMjsKICAgICAgICB9OwogICAgICAgIG1vZHVsZS5leHBvcnRzWyJkZWZhdWx0Il0gPSBtb2R1bGUuZXhwb3J0cywgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7CiAgICAgIH0KICAgICAgcmV0dXJuIF90eXBlb2YzKG9iaik7CiAgICB9CiAgICBtb2R1bGUuZXhwb3J0cyA9IF90eXBlb2YzOwogICAgbW9kdWxlLmV4cG9ydHNbImRlZmF1bHQiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKICB9KShfdHlwZW9mKTsKICB2YXIgY2xhc3NDYWxsQ2hlY2sgPSB7IGV4cG9ydHM6IHt9IH07CiAgKGZ1bmN0aW9uKG1vZHVsZSkgewogICAgZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrMyhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsKICAgICAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsKICAgICAgfQogICAgfQogICAgbW9kdWxlLmV4cG9ydHMgPSBfY2xhc3NDYWxsQ2hlY2szOwogICAgbW9kdWxlLmV4cG9ydHNbImRlZmF1bHQiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKICB9KShjbGFzc0NhbGxDaGVjayk7CiAgdmFyIGNyZWF0ZUNsYXNzID0geyBleHBvcnRzOiB7fSB9OwogIChmdW5jdGlvbihtb2R1bGUpIHsKICAgIGZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzMih0YXJnZXQsIHByb3BzKSB7CiAgICAgIGZvciAodmFyIGkyID0gMDsgaTIgPCBwcm9wcy5sZW5ndGg7IGkyKyspIHsKICAgICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2kyXTsKICAgICAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7CiAgICAgICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOwogICAgICAgIGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpCiAgICAgICAgICBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7CiAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIF9jcmVhdGVDbGFzczMoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7CiAgICAgIGlmIChwcm90b1Byb3BzKQogICAgICAgIF9kZWZpbmVQcm9wZXJ0aWVzMihDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOwogICAgICBpZiAoc3RhdGljUHJvcHMpCiAgICAgICAgX2RlZmluZVByb3BlcnRpZXMyKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7CiAgICAgIHJldHVybiBDb25zdHJ1Y3RvcjsKICAgIH0KICAgIG1vZHVsZS5leHBvcnRzID0gX2NyZWF0ZUNsYXNzMzsKICAgIG1vZHVsZS5leHBvcnRzWyJkZWZhdWx0Il0gPSBtb2R1bGUuZXhwb3J0cywgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7CiAgfSkoY3JlYXRlQ2xhc3MpOwogIHZhciBkZWZpbmVQcm9wZXJ0eSQzID0geyBleHBvcnRzOiB7fSB9OwogIChmdW5jdGlvbihtb2R1bGUpIHsKICAgIGZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICAgICAgaWYgKGtleSBpbiBvYmopIHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsKICAgICAgICAgIHZhbHVlLAogICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgb2JqW2tleV0gPSB2YWx1ZTsKICAgICAgfQogICAgICByZXR1cm4gb2JqOwogICAgfQogICAgbW9kdWxlLmV4cG9ydHMgPSBfZGVmaW5lUHJvcGVydHk7CiAgICBtb2R1bGUuZXhwb3J0c1siZGVmYXVsdCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwogIH0pKGRlZmluZVByb3BlcnR5JDMpOwogIHZhciBhYm9ydGNvbnRyb2xsZXJQb255ZmlsbCA9IHt9OwogIHZhciBjanNQb255ZmlsbCA9IHt9OwogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjanNQb255ZmlsbCwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwogIGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsKICAgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOwogICAgfQogIH0KICBmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7CiAgICBmb3IgKHZhciBpMiA9IDA7IGkyIDwgcHJvcHMubGVuZ3RoOyBpMisrKSB7CiAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaTJdOwogICAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7CiAgICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsKICAgICAgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikKICAgICAgICBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOwogICAgfQogIH0KICBmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7CiAgICBpZiAocHJvdG9Qcm9wcykKICAgICAgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsKICAgIGlmIChzdGF0aWNQcm9wcykKICAgICAgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsKICAgIHJldHVybiBDb25zdHJ1Y3RvcjsKICB9CiAgZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7CiAgICBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpOwogICAgfQogICAgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7CiAgICAgIGNvbnN0cnVjdG9yOiB7CiAgICAgICAgdmFsdWU6IHN1YkNsYXNzLAogICAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogICAgICB9CiAgICB9KTsKICAgIGlmIChzdXBlckNsYXNzKQogICAgICBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOwogIH0KICBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgewogICAgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mMihvMikgewogICAgICByZXR1cm4gbzIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvMik7CiAgICB9OwogICAgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsKICB9CiAgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsKICAgIF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YyKG8yLCBwMikgewogICAgICBvMi5fX3Byb3RvX18gPSBwMjsKICAgICAgcmV0dXJuIG8yOwogICAgfTsKICAgIHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7CiAgfQogIGZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7CiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09ICJ1bmRlZmluZWQiIHx8ICFSZWZsZWN0LmNvbnN0cnVjdCkKICAgICAgcmV0dXJuIGZhbHNlOwogICAgaWYgKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pCiAgICAgIHJldHVybiBmYWxzZTsKICAgIGlmICh0eXBlb2YgUHJveHkgPT09ICJmdW5jdGlvbiIpCiAgICAgIHJldHVybiB0cnVlOwogICAgdHJ5IHsKICAgICAgQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sIFtdLCBmdW5jdGlvbigpIHsKICAgICAgfSkpOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0KICBmdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYyKSB7CiAgICBpZiAoc2VsZjIgPT09IHZvaWQgMCkgewogICAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOwogICAgfQogICAgcmV0dXJuIHNlbGYyOwogIH0KICBmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmMiwgY2FsbCkgewogICAgaWYgKGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikpIHsKICAgICAgcmV0dXJuIGNhbGw7CiAgICB9CiAgICByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmMik7CiAgfQogIGZ1bmN0aW9uIF9jcmVhdGVTdXBlcihEZXJpdmVkKSB7CiAgICB2YXIgaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCA9IF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKTsKICAgIHJldHVybiBmdW5jdGlvbiBfY3JlYXRlU3VwZXJJbnRlcm5hbCgpIHsKICAgICAgdmFyIFN1cGVyID0gX2dldFByb3RvdHlwZU9mKERlcml2ZWQpLCByZXN1bHQ7CiAgICAgIGlmIChoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KSB7CiAgICAgICAgdmFyIE5ld1RhcmdldCA9IF9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3RvcjsKICAgICAgICByZXN1bHQgPSBSZWZsZWN0LmNvbnN0cnVjdChTdXBlciwgYXJndW1lbnRzLCBOZXdUYXJnZXQpOwogICAgICB9IGVsc2UgewogICAgICAgIHJlc3VsdCA9IFN1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KICAgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIHJlc3VsdCk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBfc3VwZXJQcm9wQmFzZShvYmplY3QsIHByb3BlcnR5KSB7CiAgICB3aGlsZSAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KSkgewogICAgICBvYmplY3QgPSBfZ2V0UHJvdG90eXBlT2Yob2JqZWN0KTsKICAgICAgaWYgKG9iamVjdCA9PT0gbnVsbCkKICAgICAgICBicmVhazsKICAgIH0KICAgIHJldHVybiBvYmplY3Q7CiAgfQogIGZ1bmN0aW9uIF9nZXQodGFyZ2V0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHsKICAgIGlmICh0eXBlb2YgUmVmbGVjdCAhPT0gInVuZGVmaW5lZCIgJiYgUmVmbGVjdC5nZXQpIHsKICAgICAgX2dldCA9IFJlZmxlY3QuZ2V0OwogICAgfSBlbHNlIHsKICAgICAgX2dldCA9IGZ1bmN0aW9uIF9nZXQyKHRhcmdldDIsIHByb3BlcnR5MiwgcmVjZWl2ZXIyKSB7CiAgICAgICAgdmFyIGJhc2UgPSBfc3VwZXJQcm9wQmFzZSh0YXJnZXQyLCBwcm9wZXJ0eTIpOwogICAgICAgIGlmICghYmFzZSkKICAgICAgICAgIHJldHVybjsKICAgICAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYmFzZSwgcHJvcGVydHkyKTsKICAgICAgICBpZiAoZGVzYy5nZXQpIHsKICAgICAgICAgIHJldHVybiBkZXNjLmdldC5jYWxsKHJlY2VpdmVyMik7CiAgICAgICAgfQogICAgICAgIHJldHVybiBkZXNjLnZhbHVlOwogICAgICB9OwogICAgfQogICAgcmV0dXJuIF9nZXQodGFyZ2V0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIgfHwgdGFyZ2V0KTsKICB9CiAgdmFyIEVtaXR0ZXIgPSAvKiBAX19QVVJFX18gKi8gZnVuY3Rpb24oKSB7CiAgICBmdW5jdGlvbiBFbWl0dGVyMigpIHsKICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEVtaXR0ZXIyKTsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICJsaXN0ZW5lcnMiLCB7CiAgICAgICAgdmFsdWU6IHt9LAogICAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogICAgICB9KTsKICAgIH0KICAgIF9jcmVhdGVDbGFzcyhFbWl0dGVyMiwgW3sKICAgICAga2V5OiAiYWRkRXZlbnRMaXN0ZW5lciIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRFdmVudExpc3RlbmVyKHR5cGUsIGNhbGxiYWNrLCBvcHRpb25zKSB7CiAgICAgICAgaWYgKCEodHlwZSBpbiB0aGlzLmxpc3RlbmVycykpIHsKICAgICAgICAgIHRoaXMubGlzdGVuZXJzW3R5cGVdID0gW107CiAgICAgICAgfQogICAgICAgIHRoaXMubGlzdGVuZXJzW3R5cGVdLnB1c2goewogICAgICAgICAgY2FsbGJhY2ssCiAgICAgICAgICBvcHRpb25zCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sIHsKICAgICAga2V5OiAicmVtb3ZlRXZlbnRMaXN0ZW5lciIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGNhbGxiYWNrKSB7CiAgICAgICAgaWYgKCEodHlwZSBpbiB0aGlzLmxpc3RlbmVycykpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdmFyIHN0YWNrID0gdGhpcy5saXN0ZW5lcnNbdHlwZV07CiAgICAgICAgZm9yICh2YXIgaTIgPSAwLCBsID0gc3RhY2subGVuZ3RoOyBpMiA8IGw7IGkyKyspIHsKICAgICAgICAgIGlmIChzdGFja1tpMl0uY2FsbGJhY2sgPT09IGNhbGxiYWNrKSB7CiAgICAgICAgICAgIHN0YWNrLnNwbGljZShpMiwgMSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0sIHsKICAgICAga2V5OiAiZGlzcGF0Y2hFdmVudCIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNwYXRjaEV2ZW50MihldmVudCkgewogICAgICAgIGlmICghKGV2ZW50LnR5cGUgaW4gdGhpcy5saXN0ZW5lcnMpKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHZhciBzdGFjayA9IHRoaXMubGlzdGVuZXJzW2V2ZW50LnR5cGVdOwogICAgICAgIHZhciBzdGFja1RvQ2FsbCA9IHN0YWNrLnNsaWNlKCk7CiAgICAgICAgZm9yICh2YXIgaTIgPSAwLCBsID0gc3RhY2tUb0NhbGwubGVuZ3RoOyBpMiA8IGw7IGkyKyspIHsKICAgICAgICAgIHZhciBsaXN0ZW5lcjIgPSBzdGFja1RvQ2FsbFtpMl07CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBsaXN0ZW5lcjIuY2FsbGJhY2suY2FsbCh0aGlzLCBldmVudCk7CiAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAobGlzdGVuZXIyLm9wdGlvbnMgJiYgbGlzdGVuZXIyLm9wdGlvbnMub25jZSkgewogICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQudHlwZSwgbGlzdGVuZXIyLmNhbGxiYWNrKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuICFldmVudC5kZWZhdWx0UHJldmVudGVkOwogICAgICB9CiAgICB9XSk7CiAgICByZXR1cm4gRW1pdHRlcjI7CiAgfSgpOwogIHZhciBBYm9ydFNpZ25hbCQxID0gLyogQF9fUFVSRV9fICovIGZ1bmN0aW9uKF9FbWl0dGVyKSB7CiAgICBfaW5oZXJpdHMoQWJvcnRTaWduYWwyLCBfRW1pdHRlcik7CiAgICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKEFib3J0U2lnbmFsMik7CiAgICBmdW5jdGlvbiBBYm9ydFNpZ25hbDIoKSB7CiAgICAgIHZhciBfdGhpczsKICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEFib3J0U2lnbmFsMik7CiAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcyk7CiAgICAgIGlmICghX3RoaXMubGlzdGVuZXJzKSB7CiAgICAgICAgRW1pdHRlci5jYWxsKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTsKICAgICAgfQogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksICJhYm9ydGVkIiwgewogICAgICAgIHZhbHVlOiBmYWxzZSwKICAgICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgICBjb25maWd1cmFibGU6IHRydWUKICAgICAgfSk7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgIm9uYWJvcnQiLCB7CiAgICAgICAgdmFsdWU6IG51bGwsCiAgICAgICAgd3JpdGFibGU6IHRydWUsCiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlCiAgICAgIH0pOwogICAgICByZXR1cm4gX3RoaXM7CiAgICB9CiAgICBfY3JlYXRlQ2xhc3MoQWJvcnRTaWduYWwyLCBbewogICAgICBrZXk6ICJ0b1N0cmluZyIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbiB0b1N0cmluZzIoKSB7CiAgICAgICAgcmV0dXJuICJbb2JqZWN0IEFib3J0U2lnbmFsXSI7CiAgICAgIH0KICAgIH0sIHsKICAgICAga2V5OiAiZGlzcGF0Y2hFdmVudCIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNwYXRjaEV2ZW50MihldmVudCkgewogICAgICAgIGlmIChldmVudC50eXBlID09PSAiYWJvcnQiKSB7CiAgICAgICAgICB0aGlzLmFib3J0ZWQgPSB0cnVlOwogICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9uYWJvcnQgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgICAgdGhpcy5vbmFib3J0LmNhbGwodGhpcywgZXZlbnQpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBfZ2V0KF9nZXRQcm90b3R5cGVPZihBYm9ydFNpZ25hbDIucHJvdG90eXBlKSwgImRpc3BhdGNoRXZlbnQiLCB0aGlzKS5jYWxsKHRoaXMsIGV2ZW50KTsKICAgICAgfQogICAgfV0pOwogICAgcmV0dXJuIEFib3J0U2lnbmFsMjsKICB9KEVtaXR0ZXIpOwogIHZhciBBYm9ydENvbnRyb2xsZXIkMSA9IC8qIEBfX1BVUkVfXyAqLyBmdW5jdGlvbigpIHsKICAgIGZ1bmN0aW9uIEFib3J0Q29udHJvbGxlcjIoKSB7CiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBYm9ydENvbnRyb2xsZXIyKTsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICJzaWduYWwiLCB7CiAgICAgICAgdmFsdWU6IG5ldyBBYm9ydFNpZ25hbCQxKCksCiAgICAgICAgd3JpdGFibGU6IHRydWUsCiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlCiAgICAgIH0pOwogICAgfQogICAgX2NyZWF0ZUNsYXNzKEFib3J0Q29udHJvbGxlcjIsIFt7CiAgICAgIGtleTogImFib3J0IiwKICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFib3J0KCkgewogICAgICAgIHZhciBldmVudDsKICAgICAgICB0cnkgewogICAgICAgICAgZXZlbnQgPSBuZXcgRXZlbnQoImFib3J0Iik7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgICAgaWYgKCFkb2N1bWVudC5jcmVhdGVFdmVudCkgewogICAgICAgICAgICAgIGV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnRPYmplY3QoKTsKICAgICAgICAgICAgICBldmVudC50eXBlID0gImFib3J0IjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBldmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCJFdmVudCIpOwogICAgICAgICAgICAgIGV2ZW50LmluaXRFdmVudCgiYWJvcnQiLCBmYWxzZSwgZmFsc2UpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBldmVudCA9IHsKICAgICAgICAgICAgICB0eXBlOiAiYWJvcnQiLAogICAgICAgICAgICAgIGJ1YmJsZXM6IGZhbHNlLAogICAgICAgICAgICAgIGNhbmNlbGFibGU6IGZhbHNlCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHRoaXMuc2lnbmFsLmRpc3BhdGNoRXZlbnQoZXZlbnQpOwogICAgICB9CiAgICB9LCB7CiAgICAgIGtleTogInRvU3RyaW5nIiwKICAgICAgdmFsdWU6IGZ1bmN0aW9uIHRvU3RyaW5nMigpIHsKICAgICAgICByZXR1cm4gIltvYmplY3QgQWJvcnRDb250cm9sbGVyXSI7CiAgICAgIH0KICAgIH1dKTsKICAgIHJldHVybiBBYm9ydENvbnRyb2xsZXIyOwogIH0oKTsKICBpZiAodHlwZW9mIFN5bWJvbCAhPT0gInVuZGVmaW5lZCIgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7CiAgICBBYm9ydENvbnRyb2xsZXIkMS5wcm90b3R5cGVbU3ltYm9sLnRvU3RyaW5nVGFnXSA9ICJBYm9ydENvbnRyb2xsZXIiOwogICAgQWJvcnRTaWduYWwkMS5wcm90b3R5cGVbU3ltYm9sLnRvU3RyaW5nVGFnXSA9ICJBYm9ydFNpZ25hbCI7CiAgfQogIGZ1bmN0aW9uIHBvbHlmaWxsTmVlZGVkKHNlbGYyKSB7CiAgICBpZiAoc2VsZjIuX19GT1JDRV9JTlNUQUxMX0FCT1JUQ09OVFJPTExFUl9QT0xZRklMTCkgewogICAgICBjb25zb2xlLmxvZygiX19GT1JDRV9JTlNUQUxMX0FCT1JUQ09OVFJPTExFUl9QT0xZRklMTD10cnVlIGlzIHNldCwgd2lsbCBmb3JjZSBpbnN0YWxsIHBvbHlmaWxsIik7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgcmV0dXJuIHR5cGVvZiBzZWxmMi5SZXF1ZXN0ID09PSAiZnVuY3Rpb24iICYmICFzZWxmMi5SZXF1ZXN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSgic2lnbmFsIikgfHwgIXNlbGYyLkFib3J0Q29udHJvbGxlcjsKICB9CiAgZnVuY3Rpb24gYWJvcnRhYmxlRmV0Y2hEZWNvcmF0b3IocGF0Y2hUYXJnZXRzKSB7CiAgICBpZiAodHlwZW9mIHBhdGNoVGFyZ2V0cyA9PT0gImZ1bmN0aW9uIikgewogICAgICBwYXRjaFRhcmdldHMgPSB7CiAgICAgICAgZmV0Y2g6IHBhdGNoVGFyZ2V0cwogICAgICB9OwogICAgfQogICAgdmFyIF9wYXRjaFRhcmdldHMgPSBwYXRjaFRhcmdldHMsIGZldGNoMiA9IF9wYXRjaFRhcmdldHMuZmV0Y2gsIF9wYXRjaFRhcmdldHMkUmVxdWVzdCA9IF9wYXRjaFRhcmdldHMuUmVxdWVzdCwgTmF0aXZlUmVxdWVzdCA9IF9wYXRjaFRhcmdldHMkUmVxdWVzdCA9PT0gdm9pZCAwID8gZmV0Y2gyLlJlcXVlc3QgOiBfcGF0Y2hUYXJnZXRzJFJlcXVlc3QsIE5hdGl2ZUFib3J0Q29udHJvbGxlciA9IF9wYXRjaFRhcmdldHMuQWJvcnRDb250cm9sbGVyLCBfcGF0Y2hUYXJnZXRzJF9fRk9SQ0UgPSBfcGF0Y2hUYXJnZXRzLl9fRk9SQ0VfSU5TVEFMTF9BQk9SVENPTlRST0xMRVJfUE9MWUZJTEwsIF9fRk9SQ0VfSU5TVEFMTF9BQk9SVENPTlRST0xMRVJfUE9MWUZJTEwgPSBfcGF0Y2hUYXJnZXRzJF9fRk9SQ0UgPT09IHZvaWQgMCA/IGZhbHNlIDogX3BhdGNoVGFyZ2V0cyRfX0ZPUkNFOwogICAgaWYgKCFwb2x5ZmlsbE5lZWRlZCh7CiAgICAgIGZldGNoOiBmZXRjaDIsCiAgICAgIFJlcXVlc3Q6IE5hdGl2ZVJlcXVlc3QsCiAgICAgIEFib3J0Q29udHJvbGxlcjogTmF0aXZlQWJvcnRDb250cm9sbGVyLAogICAgICBfX0ZPUkNFX0lOU1RBTExfQUJPUlRDT05UUk9MTEVSX1BPTFlGSUxMCiAgICB9KSkgewogICAgICByZXR1cm4gewogICAgICAgIGZldGNoOiBmZXRjaDIsCiAgICAgICAgUmVxdWVzdAogICAgICB9OwogICAgfQogICAgdmFyIFJlcXVlc3QgPSBOYXRpdmVSZXF1ZXN0OwogICAgaWYgKFJlcXVlc3QgJiYgIVJlcXVlc3QucHJvdG90eXBlLmhhc093blByb3BlcnR5KCJzaWduYWwiKSB8fCBfX0ZPUkNFX0lOU1RBTExfQUJPUlRDT05UUk9MTEVSX1BPTFlGSUxMKSB7CiAgICAgIFJlcXVlc3QgPSBmdW5jdGlvbiBSZXF1ZXN0MihpbnB1dCwgaW5pdDIpIHsKICAgICAgICB2YXIgc2lnbmFsOwogICAgICAgIGlmIChpbml0MiAmJiBpbml0Mi5zaWduYWwpIHsKICAgICAgICAgIHNpZ25hbCA9IGluaXQyLnNpZ25hbDsKICAgICAgICAgIGRlbGV0ZSBpbml0Mi5zaWduYWw7CiAgICAgICAgfQogICAgICAgIHZhciByZXF1ZXN0ID0gbmV3IE5hdGl2ZVJlcXVlc3QoaW5wdXQsIGluaXQyKTsKICAgICAgICBpZiAoc2lnbmFsKSB7CiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocmVxdWVzdCwgInNpZ25hbCIsIHsKICAgICAgICAgICAgd3JpdGFibGU6IGZhbHNlLAogICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICAgICAgICB2YWx1ZTogc2lnbmFsCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlcXVlc3Q7CiAgICAgIH07CiAgICAgIFJlcXVlc3QucHJvdG90eXBlID0gTmF0aXZlUmVxdWVzdC5wcm90b3R5cGU7CiAgICB9CiAgICB2YXIgcmVhbEZldGNoID0gZmV0Y2gyOwogICAgdmFyIGFib3J0YWJsZUZldGNoID0gZnVuY3Rpb24gYWJvcnRhYmxlRmV0Y2gyKGlucHV0LCBpbml0MikgewogICAgICB2YXIgc2lnbmFsID0gUmVxdWVzdCAmJiBSZXF1ZXN0LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGlucHV0KSA/IGlucHV0LnNpZ25hbCA6IGluaXQyID8gaW5pdDIuc2lnbmFsIDogdm9pZCAwOwogICAgICBpZiAoc2lnbmFsKSB7CiAgICAgICAgdmFyIGFib3J0RXJyb3I7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGFib3J0RXJyb3IgPSBuZXcgRE9NRXhjZXB0aW9uKCJBYm9ydGVkIiwgIkFib3J0RXJyb3IiKTsKICAgICAgICB9IGNhdGNoIChlcnIyKSB7CiAgICAgICAgICBhYm9ydEVycm9yID0gbmV3IEVycm9yKCJBYm9ydGVkIik7CiAgICAgICAgICBhYm9ydEVycm9yLm5hbWUgPSAiQWJvcnRFcnJvciI7CiAgICAgICAgfQogICAgICAgIGlmIChzaWduYWwuYWJvcnRlZCkgewogICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGFib3J0RXJyb3IpOwogICAgICAgIH0KICAgICAgICB2YXIgY2FuY2VsbGF0aW9uID0gbmV3IFByb21pc2UoZnVuY3Rpb24oXzIsIHJlamVjdCkgewogICAgICAgICAgc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoImFib3J0IiwgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHVybiByZWplY3QoYWJvcnRFcnJvcik7CiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIG9uY2U6IHRydWUKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgIGlmIChpbml0MiAmJiBpbml0Mi5zaWduYWwpIHsKICAgICAgICAgIGRlbGV0ZSBpbml0Mi5zaWduYWw7CiAgICAgICAgfQogICAgICAgIHJldHVybiBQcm9taXNlLnJhY2UoW2NhbmNlbGxhdGlvbiwgcmVhbEZldGNoKGlucHV0LCBpbml0MildKTsKICAgICAgfQogICAgICByZXR1cm4gcmVhbEZldGNoKGlucHV0LCBpbml0Mik7CiAgICB9OwogICAgcmV0dXJuIHsKICAgICAgZmV0Y2g6IGFib3J0YWJsZUZldGNoLAogICAgICBSZXF1ZXN0CiAgICB9OwogIH0KICBjanNQb255ZmlsbC5BYm9ydENvbnRyb2xsZXIgPSBBYm9ydENvbnRyb2xsZXIkMTsKICBjanNQb255ZmlsbC5BYm9ydFNpZ25hbCA9IEFib3J0U2lnbmFsJDE7CiAgY2pzUG9ueWZpbGwuYWJvcnRhYmxlRmV0Y2ggPSBhYm9ydGFibGVGZXRjaERlY29yYXRvcjsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoYWJvcnRjb250cm9sbGVyUG9ueWZpbGwsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKICBhYm9ydGNvbnRyb2xsZXJQb255ZmlsbC5BYm9ydFNpZ25hbCA9IGFib3J0Y29udHJvbGxlclBvbnlmaWxsLkFib3J0Q29udHJvbGxlciA9IHZvaWQgMDsKICB2YXIgX2Nqc1BvbnlmaWxsID0gY2pzUG9ueWZpbGw7CiAgdmFyIGdldEdsb2JhbCA9IGZ1bmN0aW9uIGdldEdsb2JhbDIoKSB7CiAgICBpZiAodHlwZW9mIHNlbGYgIT09ICJ1bmRlZmluZWQiKSB7CiAgICAgIHJldHVybiBzZWxmOwogICAgfQogICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiKSB7CiAgICAgIHJldHVybiB3aW5kb3c7CiAgICB9CiAgICBpZiAodHlwZW9mIGNvbW1vbmpzR2xvYmFsICE9PSAidW5kZWZpbmVkIikgewogICAgICByZXR1cm4gY29tbW9uanNHbG9iYWw7CiAgICB9CiAgICB0aHJvdyBuZXcgRXJyb3IoInVuYWJsZSB0byBsb2NhdGUgZ2xvYmFsIG9iamVjdCIpOwogIH07CiAgdmFyIEFib3J0Q29udHJvbGxlciA9IHR5cGVvZiBnZXRHbG9iYWwoKS5BYm9ydENvbnRyb2xsZXIgPT09ICJ1bmRlZmluZWQiID8gX2Nqc1BvbnlmaWxsLkFib3J0Q29udHJvbGxlciA6IGdldEdsb2JhbCgpLkFib3J0Q29udHJvbGxlcjsKICBhYm9ydGNvbnRyb2xsZXJQb255ZmlsbC5BYm9ydENvbnRyb2xsZXIgPSBBYm9ydENvbnRyb2xsZXI7CiAgdmFyIEFib3J0U2lnbmFsID0gdHlwZW9mIGdldEdsb2JhbCgpLkFib3J0Q29udHJvbGxlciA9PT0gInVuZGVmaW5lZCIgPyBfY2pzUG9ueWZpbGwuQWJvcnRTaWduYWwgOiBnZXRHbG9iYWwoKS5BYm9ydFNpZ25hbDsKICBhYm9ydGNvbnRyb2xsZXJQb255ZmlsbC5BYm9ydFNpZ25hbCA9IEFib3J0U2lnbmFsOwogIHZhciBBZ2dyZWdhdGVBYm9ydENvbnRyb2xsZXIkMSA9IHt9OwogIHZhciBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0JDkgPSBpbnRlcm9wUmVxdWlyZURlZmF1bHQuZXhwb3J0czsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQWdncmVnYXRlQWJvcnRDb250cm9sbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKICBBZ2dyZWdhdGVBYm9ydENvbnRyb2xsZXIkMS5kZWZhdWx0ID0gdm9pZCAwOwogIHZhciBfY3JlYXRlQ2xhc3MyJDcgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0JDkoY3JlYXRlQ2xhc3MuZXhwb3J0cyk7CiAgdmFyIF9kZWZpbmVQcm9wZXJ0eTIkNCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQkOShkZWZpbmVQcm9wZXJ0eSQzLmV4cG9ydHMpOwogIHZhciBfY2xhc3NDYWxsQ2hlY2syJDcgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0JDkoY2xhc3NDYWxsQ2hlY2suZXhwb3J0cyk7CiAgdmFyIF9hYm9ydGNvbnRyb2xsZXJQb255ZmlsbCQxID0gYWJvcnRjb250cm9sbGVyUG9ueWZpbGw7CiAgdmFyIE51bGxTaWduYWwgPSBmdW5jdGlvbiBOdWxsU2lnbmFsMigpIHsKICAgICgwLCBfY2xhc3NDYWxsQ2hlY2syJDcuZGVmYXVsdCkodGhpcywgTnVsbFNpZ25hbDIpOwogIH07CiAgdmFyIEFnZ3JlZ2F0ZUFib3J0Q29udHJvbGxlciA9IC8qIEBfX1BVUkVfXyAqLyBmdW5jdGlvbigpIHsKICAgIGZ1bmN0aW9uIEFnZ3JlZ2F0ZUFib3J0Q29udHJvbGxlcjIoKSB7CiAgICAgICgwLCBfY2xhc3NDYWxsQ2hlY2syJDcuZGVmYXVsdCkodGhpcywgQWdncmVnYXRlQWJvcnRDb250cm9sbGVyMik7CiAgICAgICgwLCBfZGVmaW5lUHJvcGVydHkyJDQuZGVmYXVsdCkodGhpcywgInNpZ25hbHMiLCAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpKTsKICAgICAgKDAsIF9kZWZpbmVQcm9wZXJ0eTIkNC5kZWZhdWx0KSh0aGlzLCAiYWJvcnRDb250cm9sbGVyIiwgbmV3IF9hYm9ydGNvbnRyb2xsZXJQb255ZmlsbCQxLkFib3J0Q29udHJvbGxlcigpKTsKICAgIH0KICAgICgwLCBfY3JlYXRlQ2xhc3MyJDcuZGVmYXVsdCkoQWdncmVnYXRlQWJvcnRDb250cm9sbGVyMiwgW3sKICAgICAga2V5OiAiYWRkU2lnbmFsIiwKICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFkZFNpZ25hbCgpIHsKICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICAgIHZhciBzaWduYWwgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHZvaWQgMCA/IGFyZ3VtZW50c1swXSA6IG5ldyBOdWxsU2lnbmFsKCk7CiAgICAgICAgaWYgKHRoaXMuc2lnbmFsLmFib3J0ZWQpIHsKICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiY2Fubm90IGFkZCBhIHNpZ25hbCwgYWxyZWFkeSBhYm9ydGVkISIpOwogICAgICAgIH0KICAgICAgICB0aGlzLnNpZ25hbHMuYWRkKHNpZ25hbCk7CiAgICAgICAgaWYgKHNpZ25hbC5hYm9ydGVkKSB7CiAgICAgICAgICB0aGlzLmhhbmRsZUFib3J0ZWQoc2lnbmFsKTsKICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBzaWduYWwuYWRkRXZlbnRMaXN0ZW5lciA9PT0gImZ1bmN0aW9uIikgewogICAgICAgICAgc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoImFib3J0IiwgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIF90aGlzLmhhbmRsZUFib3J0ZWQoc2lnbmFsKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfSwgeyBrZXk6ICJoYW5kbGVBYm9ydGVkIiwgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUFib3J0ZWQoc2lnbmFsKSB7CiAgICAgIHRoaXMuc2lnbmFscy5kZWxldGUoc2lnbmFsKTsKICAgICAgaWYgKHRoaXMuc2lnbmFscy5zaXplID09PSAwKSB7CiAgICAgICAgdGhpcy5hYm9ydENvbnRyb2xsZXIuYWJvcnQoKTsKICAgICAgfQogICAgfSB9LCB7IGtleTogImFib3J0IiwgdmFsdWU6IGZ1bmN0aW9uIGFib3J0KCkgewogICAgICB0aGlzLmFib3J0Q29udHJvbGxlci5hYm9ydCgpOwogICAgfSB9LCB7IGtleTogInNpZ25hbCIsIGdldDogZnVuY3Rpb24gZ2V0MigpIHsKICAgICAgcmV0dXJuIHRoaXMuYWJvcnRDb250cm9sbGVyLnNpZ25hbDsKICAgIH0gfV0pOwogICAgcmV0dXJuIEFnZ3JlZ2F0ZUFib3J0Q29udHJvbGxlcjI7CiAgfSgpOwogIEFnZ3JlZ2F0ZUFib3J0Q29udHJvbGxlciQxLmRlZmF1bHQgPSBBZ2dyZWdhdGVBYm9ydENvbnRyb2xsZXI7CiAgdmFyIEFnZ3JlZ2F0ZVN0YXR1c1JlcG9ydGVyJDEgPSB7fTsKICB2YXIgX2ludGVyb3BSZXF1aXJlRGVmYXVsdCQ4ID0gaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmV4cG9ydHM7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFnZ3JlZ2F0ZVN0YXR1c1JlcG9ydGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKICBBZ2dyZWdhdGVTdGF0dXNSZXBvcnRlciQxLmRlZmF1bHQgPSB2b2lkIDA7CiAgdmFyIF9jbGFzc0NhbGxDaGVjazIkNiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQkOChjbGFzc0NhbGxDaGVjay5leHBvcnRzKTsKICB2YXIgX2NyZWF0ZUNsYXNzMiQ2ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdCQ4KGNyZWF0ZUNsYXNzLmV4cG9ydHMpOwogIHZhciBfZGVmaW5lUHJvcGVydHkyJDMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0JDgoZGVmaW5lUHJvcGVydHkkMy5leHBvcnRzKTsKICB2YXIgQWdncmVnYXRlU3RhdHVzUmVwb3J0ZXIgPSAvKiBAX19QVVJFX18gKi8gZnVuY3Rpb24oKSB7CiAgICBmdW5jdGlvbiBBZ2dyZWdhdGVTdGF0dXNSZXBvcnRlcjIoKSB7CiAgICAgICgwLCBfY2xhc3NDYWxsQ2hlY2syJDYuZGVmYXVsdCkodGhpcywgQWdncmVnYXRlU3RhdHVzUmVwb3J0ZXIyKTsKICAgICAgKDAsIF9kZWZpbmVQcm9wZXJ0eTIkMy5kZWZhdWx0KSh0aGlzLCAiY2FsbGJhY2tzIiwgLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKSk7CiAgICAgICgwLCBfZGVmaW5lUHJvcGVydHkyJDMuZGVmYXVsdCkodGhpcywgImN1cnJlbnRNZXNzYWdlIiwgdm9pZCAwKTsKICAgIH0KICAgICgwLCBfY3JlYXRlQ2xhc3MyJDYuZGVmYXVsdCkoQWdncmVnYXRlU3RhdHVzUmVwb3J0ZXIyLCBbeyBrZXk6ICJhZGRDYWxsYmFjayIsIHZhbHVlOiBmdW5jdGlvbiBhZGRDYWxsYmFjaygpIHsKICAgICAgdmFyIGNhbGxiYWNrID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB2b2lkIDAgPyBhcmd1bWVudHNbMF0gOiBmdW5jdGlvbigpIHsKICAgICAgfTsKICAgICAgdGhpcy5jYWxsYmFja3MuYWRkKGNhbGxiYWNrKTsKICAgICAgY2FsbGJhY2sodGhpcy5jdXJyZW50TWVzc2FnZSk7CiAgICB9IH0sIHsga2V5OiAiY2FsbGJhY2siLCB2YWx1ZTogZnVuY3Rpb24gY2FsbGJhY2sobWVzc2FnZSkgewogICAgICB0aGlzLmN1cnJlbnRNZXNzYWdlID0gbWVzc2FnZTsKICAgICAgdGhpcy5jYWxsYmFja3MuZm9yRWFjaChmdW5jdGlvbihlbHQpIHsKICAgICAgICBlbHQobWVzc2FnZSk7CiAgICAgIH0pOwogICAgfSB9XSk7CiAgICByZXR1cm4gQWdncmVnYXRlU3RhdHVzUmVwb3J0ZXIyOwogIH0oKTsKICBBZ2dyZWdhdGVTdGF0dXNSZXBvcnRlciQxLmRlZmF1bHQgPSBBZ2dyZWdhdGVTdGF0dXNSZXBvcnRlcjsKICB2YXIgX2ludGVyb3BSZXF1aXJlRGVmYXVsdCQ3ID0gaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmV4cG9ydHM7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFib3J0YWJsZVByb21pc2VDYWNoZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CiAgQWJvcnRhYmxlUHJvbWlzZUNhY2hlJDEuZGVmYXVsdCA9IHZvaWQgMDsKICB2YXIgX3R5cGVvZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0JDcoX3R5cGVvZi5leHBvcnRzKTsKICB2YXIgX2NsYXNzQ2FsbENoZWNrMiQ1ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdCQ3KGNsYXNzQ2FsbENoZWNrLmV4cG9ydHMpOwogIHZhciBfY3JlYXRlQ2xhc3MyJDUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0JDcoY3JlYXRlQ2xhc3MuZXhwb3J0cyk7CiAgdmFyIF9kZWZpbmVQcm9wZXJ0eTIkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQkNyhkZWZpbmVQcm9wZXJ0eSQzLmV4cG9ydHMpOwogIHZhciBfYWJvcnRjb250cm9sbGVyUG9ueWZpbGwgPSBhYm9ydGNvbnRyb2xsZXJQb255ZmlsbDsKICB2YXIgX0FnZ3JlZ2F0ZUFib3J0Q29udHJvbGxlciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQkNyhBZ2dyZWdhdGVBYm9ydENvbnRyb2xsZXIkMSk7CiAgdmFyIF9BZ2dyZWdhdGVTdGF0dXNSZXBvcnRlciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQkNyhBZ2dyZWdhdGVTdGF0dXNSZXBvcnRlciQxKTsKICB2YXIgQWJvcnRhYmxlUHJvbWlzZUNhY2hlID0gLyogQF9fUFVSRV9fICovIGZ1bmN0aW9uKCkgewogICAgZnVuY3Rpb24gQWJvcnRhYmxlUHJvbWlzZUNhY2hlMihfcmVmKSB7CiAgICAgIHZhciBmaWxsID0gX3JlZi5maWxsLCBjYWNoZSA9IF9yZWYuY2FjaGU7CiAgICAgICgwLCBfY2xhc3NDYWxsQ2hlY2syJDUuZGVmYXVsdCkodGhpcywgQWJvcnRhYmxlUHJvbWlzZUNhY2hlMik7CiAgICAgICgwLCBfZGVmaW5lUHJvcGVydHkyJDIuZGVmYXVsdCkodGhpcywgImNhY2hlIiwgdm9pZCAwKTsKICAgICAgKDAsIF9kZWZpbmVQcm9wZXJ0eTIkMi5kZWZhdWx0KSh0aGlzLCAiZmlsbENhbGxiYWNrIiwgdm9pZCAwKTsKICAgICAgaWYgKHR5cGVvZiBmaWxsICE9PSAiZnVuY3Rpb24iKQogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIm11c3QgcGFzcyBhIGZpbGwgZnVuY3Rpb24iKTsKICAgICAgaWYgKCgwLCBfdHlwZW9mMi5kZWZhdWx0KShjYWNoZSkgIT09ICJvYmplY3QiKQogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIm11c3QgcGFzcyBhIGNhY2hlIG9iamVjdCIpOwogICAgICBpZiAodHlwZW9mIGNhY2hlLmdldCAhPT0gImZ1bmN0aW9uIiB8fCB0eXBlb2YgY2FjaGUuc2V0ICE9PSAiZnVuY3Rpb24iIHx8IHR5cGVvZiBjYWNoZS5kZWxldGUgIT09ICJmdW5jdGlvbiIpCiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiY2FjaGUgbXVzdCBpbXBsZW1lbnQgZ2V0KGtleSksIHNldChrZXksIHZhbCksIGFuZCBhbmQgZGVsZXRlKGtleSkiKTsKICAgICAgdGhpcy5jYWNoZSA9IGNhY2hlOwogICAgICB0aGlzLmZpbGxDYWxsYmFjayA9IGZpbGw7CiAgICB9CiAgICAoMCwgX2NyZWF0ZUNsYXNzMiQ1LmRlZmF1bHQpKEFib3J0YWJsZVByb21pc2VDYWNoZTIsIFt7IGtleTogImV2aWN0IiwgdmFsdWU6IGZ1bmN0aW9uIGV2aWN0KGtleSwgZW50cnkpIHsKICAgICAgaWYgKHRoaXMuY2FjaGUuZ2V0KGtleSkgPT09IGVudHJ5KQogICAgICAgIHRoaXMuY2FjaGUuZGVsZXRlKGtleSk7CiAgICB9IH0sIHsga2V5OiAiZmlsbCIsIHZhbHVlOiBmdW5jdGlvbiBmaWxsKGtleSwgZGF0YTIsIHNpZ25hbCwgc3RhdHVzQ2FsbGJhY2spIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIGFib3J0ZXIgPSBuZXcgX0FnZ3JlZ2F0ZUFib3J0Q29udHJvbGxlci5kZWZhdWx0KCk7CiAgICAgIHZhciBzdGF0dXNSZXBvcnRlciA9IG5ldyBfQWdncmVnYXRlU3RhdHVzUmVwb3J0ZXIuZGVmYXVsdCgpOwogICAgICBzdGF0dXNSZXBvcnRlci5hZGRDYWxsYmFjayhzdGF0dXNDYWxsYmFjayk7CiAgICAgIHZhciBuZXdFbnRyeSA9IHsKICAgICAgICBhYm9ydGVyLAogICAgICAgIHByb21pc2U6IHRoaXMuZmlsbENhbGxiYWNrKGRhdGEyLCBhYm9ydGVyLnNpZ25hbCwgZnVuY3Rpb24obWVzc2FnZSkgewogICAgICAgICAgc3RhdHVzUmVwb3J0ZXIuY2FsbGJhY2sobWVzc2FnZSk7CiAgICAgICAgfSksCiAgICAgICAgc2V0dGxlZDogZmFsc2UsCiAgICAgICAgc3RhdHVzUmVwb3J0ZXIsCiAgICAgICAgZ2V0IGFib3J0ZWQoKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5hYm9ydGVyLnNpZ25hbC5hYm9ydGVkOwogICAgICAgIH0KICAgICAgfTsKICAgICAgbmV3RW50cnkuYWJvcnRlci5hZGRTaWduYWwoc2lnbmFsKTsKICAgICAgbmV3RW50cnkuYWJvcnRlci5zaWduYWwuYWRkRXZlbnRMaXN0ZW5lcigiYWJvcnQiLCBmdW5jdGlvbigpIHsKICAgICAgICBpZiAoIW5ld0VudHJ5LnNldHRsZWQpIHsKICAgICAgICAgIF90aGlzLmV2aWN0KGtleSwgbmV3RW50cnkpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIG5ld0VudHJ5LnByb21pc2UudGhlbihmdW5jdGlvbigpIHsKICAgICAgICBuZXdFbnRyeS5zZXR0bGVkID0gdHJ1ZTsKICAgICAgfSwgZnVuY3Rpb24oZXhjZXB0aW9uKSB7CiAgICAgICAgbmV3RW50cnkuc2V0dGxlZCA9IHRydWU7CiAgICAgICAgX3RoaXMuZXZpY3Qoa2V5LCBuZXdFbnRyeSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGUpIHsKICAgICAgICBjb25zb2xlLmVycm9yKGUpOwogICAgICAgIHRocm93IGU7CiAgICAgIH0pOwogICAgICB0aGlzLmNhY2hlLnNldChrZXksIG5ld0VudHJ5KTsKICAgIH0gfSwgewogICAgICBrZXk6ICJoYXMiLAogICAgICB2YWx1ZTogZnVuY3Rpb24gaGFzMihrZXkpIHsKICAgICAgICByZXR1cm4gdGhpcy5jYWNoZS5oYXMoa2V5KTsKICAgICAgfQogICAgfSwgewogICAgICBrZXk6ICJnZXQiLAogICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0MihrZXksIGRhdGEyLCBzaWduYWwsIHN0YXR1c0NhbGxiYWNrKSB7CiAgICAgICAgaWYgKCFzaWduYWwgJiYgZGF0YTIgaW5zdGFuY2VvZiBfYWJvcnRjb250cm9sbGVyUG9ueWZpbGwuQWJvcnRTaWduYWwpCiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJzZWNvbmQgZ2V0IGFyZ3VtZW50IGFwcGVhcnMgdG8gYmUgYW4gQWJvcnRTaWduYWwsIHBlcmhhcHMgeW91IG1lYW50IHRvIHBhc3MgYG51bGxgIGZvciB0aGUgZmlsbCBkYXRhPyIpOwogICAgICAgIHZhciBjYWNoZUVudHJ5ID0gdGhpcy5jYWNoZS5nZXQoa2V5KTsKICAgICAgICBpZiAoY2FjaGVFbnRyeSkgewogICAgICAgICAgaWYgKGNhY2hlRW50cnkuYWJvcnRlZCAmJiAhY2FjaGVFbnRyeS5zZXR0bGVkKSB7CiAgICAgICAgICAgIHRoaXMuZXZpY3Qoa2V5LCBjYWNoZUVudHJ5KTsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KGtleSwgZGF0YTIsIHNpZ25hbCwgc3RhdHVzQ2FsbGJhY2spOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGNhY2hlRW50cnkuc2V0dGxlZCkgewogICAgICAgICAgICByZXR1cm4gY2FjaGVFbnRyeS5wcm9taXNlOwogICAgICAgICAgfQogICAgICAgICAgY2FjaGVFbnRyeS5hYm9ydGVyLmFkZFNpZ25hbChzaWduYWwpOwogICAgICAgICAgY2FjaGVFbnRyeS5zdGF0dXNSZXBvcnRlci5hZGRDYWxsYmFjayhzdGF0dXNDYWxsYmFjayk7CiAgICAgICAgICByZXR1cm4gQWJvcnRhYmxlUHJvbWlzZUNhY2hlMi5jaGVja1NpbmdsZVByb21pc2UoY2FjaGVFbnRyeS5wcm9taXNlLCBzaWduYWwpOwogICAgICAgIH0KICAgICAgICB0aGlzLmZpbGwoa2V5LCBkYXRhMiwgc2lnbmFsLCBzdGF0dXNDYWxsYmFjayk7CiAgICAgICAgcmV0dXJuIEFib3J0YWJsZVByb21pc2VDYWNoZTIuY2hlY2tTaW5nbGVQcm9taXNlKHRoaXMuY2FjaGUuZ2V0KGtleSkucHJvbWlzZSwgc2lnbmFsKTsKICAgICAgfQogICAgfSwgewogICAgICBrZXk6ICJkZWxldGUiLAogICAgICB2YWx1ZTogZnVuY3Rpb24gX2RlbGV0ZShrZXkpIHsKICAgICAgICB2YXIgY2FjaGVkRW50cnkgPSB0aGlzLmNhY2hlLmdldChrZXkpOwogICAgICAgIGlmIChjYWNoZWRFbnRyeSkgewogICAgICAgICAgaWYgKCFjYWNoZWRFbnRyeS5zZXR0bGVkKQogICAgICAgICAgICBjYWNoZWRFbnRyeS5hYm9ydGVyLmFib3J0KCk7CiAgICAgICAgICB0aGlzLmNhY2hlLmRlbGV0ZShrZXkpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgeyBrZXk6ICJjbGVhciIsIHZhbHVlOiBmdW5jdGlvbiBjbGVhcjIoKSB7CiAgICAgIHZhciBrZXlJdGVyID0gdGhpcy5jYWNoZS5rZXlzKCk7CiAgICAgIHZhciBkZWxldGVDb3VudCA9IDA7CiAgICAgIGZvciAodmFyIHJlc3VsdCA9IGtleUl0ZXIubmV4dCgpOyAhcmVzdWx0LmRvbmU7IHJlc3VsdCA9IGtleUl0ZXIubmV4dCgpKSB7CiAgICAgICAgdGhpcy5kZWxldGUocmVzdWx0LnZhbHVlKTsKICAgICAgICBkZWxldGVDb3VudCArPSAxOwogICAgICB9CiAgICAgIHJldHVybiBkZWxldGVDb3VudDsKICAgIH0gfV0sIFt7IGtleTogImlzQWJvcnRFeGNlcHRpb24iLCB2YWx1ZTogZnVuY3Rpb24gaXNBYm9ydEV4Y2VwdGlvbihleGNlcHRpb24pIHsKICAgICAgcmV0dXJuIGV4Y2VwdGlvbi5uYW1lID09PSAiQWJvcnRFcnJvciIgfHwgZXhjZXB0aW9uLmNvZGUgPT09ICJFUlJfQUJPUlRFRCIgfHwgZXhjZXB0aW9uLm1lc3NhZ2UgPT09ICJBYm9ydEVycm9yOiBhYm9ydGVkIiB8fCBleGNlcHRpb24ubWVzc2FnZSA9PT0gIkVycm9yOiBhYm9ydGVkIjsKICAgIH0gfSwgeyBrZXk6ICJjaGVja1NpbmdsZVByb21pc2UiLCB2YWx1ZTogZnVuY3Rpb24gY2hlY2tTaW5nbGVQcm9taXNlKHByb21pc2UyLCBzaWduYWwpIHsKICAgICAgZnVuY3Rpb24gY2hlY2tGb3JTaW5nbGVBYm9ydCgpIHsKICAgICAgICBpZiAoc2lnbmFsICYmIHNpZ25hbC5hYm9ydGVkKQogICAgICAgICAgdGhyb3cgT2JqZWN0LmFzc2lnbihuZXcgRXJyb3IoImFib3J0ZWQiKSwgeyBjb2RlOiAiRVJSX0FCT1JURUQiIH0pOwogICAgICB9CiAgICAgIHJldHVybiBwcm9taXNlMi50aGVuKGZ1bmN0aW9uKHJlc3VsdCkgewogICAgICAgIGNoZWNrRm9yU2luZ2xlQWJvcnQoKTsKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICB9LCBmdW5jdGlvbihlcnJvcikgewogICAgICAgIGNoZWNrRm9yU2luZ2xlQWJvcnQoKTsKICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgfSk7CiAgICB9IH1dKTsKICAgIHJldHVybiBBYm9ydGFibGVQcm9taXNlQ2FjaGUyOwogIH0oKTsKICBBYm9ydGFibGVQcm9taXNlQ2FjaGUkMS5kZWZhdWx0ID0gQWJvcnRhYmxlUHJvbWlzZUNhY2hlOwogIHZhciBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0JDYgPSBpbnRlcm9wUmVxdWlyZURlZmF1bHQuZXhwb3J0czsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZGlzdCQyLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CiAgZGlzdCQyLmRlZmF1bHQgPSB2b2lkIDA7CiAgdmFyIF9BYm9ydGFibGVQcm9taXNlQ2FjaGUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0JDYoQWJvcnRhYmxlUHJvbWlzZUNhY2hlJDEpOwogIHZhciBfZGVmYXVsdCA9IF9BYm9ydGFibGVQcm9taXNlQ2FjaGUuZGVmYXVsdDsKICBkaXN0JDIuZGVmYXVsdCA9IF9kZWZhdWx0OwogIGNsYXNzIFF1aWNrTFJVJDEgewogICAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7CiAgICAgIGlmICghKG9wdGlvbnMubWF4U2l6ZSAmJiBvcHRpb25zLm1heFNpemUgPiAwKSkgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoImBtYXhTaXplYCBtdXN0IGJlIGEgbnVtYmVyIGdyZWF0ZXIgdGhhbiAwIik7CiAgICAgIH0KICAgICAgdGhpcy5tYXhTaXplID0gb3B0aW9ucy5tYXhTaXplOwogICAgICB0aGlzLmNhY2hlID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICAgICAgdGhpcy5vbGRDYWNoZSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgICAgIHRoaXMuX3NpemUgPSAwOwogICAgfQogICAgX3NldChrZXksIHZhbHVlKSB7CiAgICAgIHRoaXMuY2FjaGUuc2V0KGtleSwgdmFsdWUpOwogICAgICB0aGlzLl9zaXplKys7CiAgICAgIGlmICh0aGlzLl9zaXplID49IHRoaXMubWF4U2l6ZSkgewogICAgICAgIHRoaXMuX3NpemUgPSAwOwogICAgICAgIHRoaXMub2xkQ2FjaGUgPSB0aGlzLmNhY2hlOwogICAgICAgIHRoaXMuY2FjaGUgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpOwogICAgICB9CiAgICB9CiAgICBnZXQoa2V5KSB7CiAgICAgIGlmICh0aGlzLmNhY2hlLmhhcyhrZXkpKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGUuZ2V0KGtleSk7CiAgICAgIH0KICAgICAgaWYgKHRoaXMub2xkQ2FjaGUuaGFzKGtleSkpIHsKICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMub2xkQ2FjaGUuZ2V0KGtleSk7CiAgICAgICAgdGhpcy5fc2V0KGtleSwgdmFsdWUpOwogICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgfQogICAgfQogICAgc2V0KGtleSwgdmFsdWUpIHsKICAgICAgaWYgKHRoaXMuY2FjaGUuaGFzKGtleSkpIHsKICAgICAgICB0aGlzLmNhY2hlLnNldChrZXksIHZhbHVlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLl9zZXQoa2V5LCB2YWx1ZSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICBoYXMoa2V5KSB7CiAgICAgIHJldHVybiB0aGlzLmNhY2hlLmhhcyhrZXkpIHx8IHRoaXMub2xkQ2FjaGUuaGFzKGtleSk7CiAgICB9CiAgICBwZWVrKGtleSkgewogICAgICBpZiAodGhpcy5jYWNoZS5oYXMoa2V5KSkgewogICAgICAgIHJldHVybiB0aGlzLmNhY2hlLmdldChrZXkpOwogICAgICB9CiAgICAgIGlmICh0aGlzLm9sZENhY2hlLmhhcyhrZXkpKSB7CiAgICAgICAgcmV0dXJuIHRoaXMub2xkQ2FjaGUuZ2V0KGtleSk7CiAgICAgIH0KICAgIH0KICAgIGRlbGV0ZShrZXkpIHsKICAgICAgY29uc3QgZGVsZXRlZCA9IHRoaXMuY2FjaGUuZGVsZXRlKGtleSk7CiAgICAgIGlmIChkZWxldGVkKSB7CiAgICAgICAgdGhpcy5fc2l6ZS0tOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLm9sZENhY2hlLmRlbGV0ZShrZXkpIHx8IGRlbGV0ZWQ7CiAgICB9CiAgICBjbGVhcigpIHsKICAgICAgdGhpcy5jYWNoZS5jbGVhcigpOwogICAgICB0aGlzLm9sZENhY2hlLmNsZWFyKCk7CiAgICAgIHRoaXMuX3NpemUgPSAwOwogICAgfQogICAgKmtleXMoKSB7CiAgICAgIGZvciAoY29uc3QgW2tleV0gb2YgdGhpcykgewogICAgICAgIHlpZWxkIGtleTsKICAgICAgfQogICAgfQogICAgKnZhbHVlcygpIHsKICAgICAgZm9yIChjb25zdCBbLCB2YWx1ZV0gb2YgdGhpcykgewogICAgICAgIHlpZWxkIHZhbHVlOwogICAgICB9CiAgICB9CiAgICAqW1N5bWJvbC5pdGVyYXRvcl0oKSB7CiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLmNhY2hlKSB7CiAgICAgICAgeWllbGQgaXRlbTsKICAgICAgfQogICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdGhpcy5vbGRDYWNoZSkgewogICAgICAgIGNvbnN0IFtrZXldID0gaXRlbTsKICAgICAgICBpZiAoIXRoaXMuY2FjaGUuaGFzKGtleSkpIHsKICAgICAgICAgIHlpZWxkIGl0ZW07CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBnZXQgc2l6ZSgpIHsKICAgICAgbGV0IG9sZENhY2hlU2l6ZSA9IDA7CiAgICAgIGZvciAoY29uc3Qga2V5IG9mIHRoaXMub2xkQ2FjaGUua2V5cygpKSB7CiAgICAgICAgaWYgKCF0aGlzLmNhY2hlLmhhcyhrZXkpKSB7CiAgICAgICAgICBvbGRDYWNoZVNpemUrKzsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuX3NpemUgKyBvbGRDYWNoZVNpemU7CiAgICB9CiAgfQogIHZhciBxdWlja0xydSA9IFF1aWNrTFJVJDE7CiAgKGZ1bmN0aW9uKGV4cG9ydHMpIHsKICAgIHZhciBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0MiA9IGludGVyb3BSZXF1aXJlRGVmYXVsdCQxLmV4cG9ydHM7CiAgICB2YXIgX09iamVjdCRkZWZpbmVQcm9wZXJ0eTIgPSBkZWZpbmVQcm9wZXJ0eSQ5OwogICAgX09iamVjdCRkZWZpbmVQcm9wZXJ0eTIoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgICAgIHZhbHVlOiB0cnVlCiAgICB9KTsKICAgIGV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDsKICAgIHZhciBfZGVmaW5lUHJvcGVydHkyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKGRlZmluZVByb3BlcnR5JDkpOwogICAgdmFyIF9kZWZpbmVQcm9wZXJ0aWVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKGRlZmluZVByb3BlcnRpZXMpOwogICAgdmFyIF9nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyk7CiAgICB2YXIgX2ZvckVhY2ggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Mihmb3JFYWNoJDEpOwogICAgdmFyIF9nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0MihnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IkMyk7CiAgICB2YXIgX2ZpbHRlciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKGZpbHRlcik7CiAgICB2YXIgX2dldE93blByb3BlcnR5U3ltYm9scyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKGdldE93blByb3BlcnR5U3ltYm9scyQyKTsKICAgIHZhciBfa2V5cyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKGtleXMkMik7CiAgICB2YXIgX3JlZ2VuZXJhdG9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKHJlZ2VuZXJhdG9yJDEpOwogICAgdmFyIF9hc3luY1RvR2VuZXJhdG9yMjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Mihhc3luY1RvR2VuZXJhdG9yJDEuZXhwb3J0cyk7CiAgICB2YXIgX2NsYXNzQ2FsbENoZWNrMjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0MihjbGFzc0NhbGxDaGVjayQxLmV4cG9ydHMpOwogICAgdmFyIF9jcmVhdGVDbGFzczIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoY3JlYXRlQ2xhc3MkMS5leHBvcnRzKTsKICAgIHZhciBfZGVmaW5lUHJvcGVydHkzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoZGVmaW5lUHJvcGVydHkkNi5leHBvcnRzKTsKICAgIHZhciBfYWJvcnRhYmxlUHJvbWlzZUNhY2hlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoZGlzdCQyKTsKICAgIHZhciBfcXVpY2tMcnUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0MihxdWlja0xydSk7CiAgICBmdW5jdGlvbiBvd25LZXlzMihvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7CiAgICAgIHZhciBrZXlzMiA9ICgwLCBfa2V5cy5kZWZhdWx0KShvYmplY3QpOwogICAgICBpZiAoX2dldE93blByb3BlcnR5U3ltYm9scy5kZWZhdWx0KSB7CiAgICAgICAgdmFyIHN5bWJvbHMyID0gKDAsIF9nZXRPd25Qcm9wZXJ0eVN5bWJvbHMuZGVmYXVsdCkob2JqZWN0KTsKICAgICAgICBpZiAoZW51bWVyYWJsZU9ubHkpCiAgICAgICAgICBzeW1ib2xzMiA9ICgwLCBfZmlsdGVyLmRlZmF1bHQpKHN5bWJvbHMyKS5jYWxsKHN5bWJvbHMyLCBmdW5jdGlvbihzeW0pIHsKICAgICAgICAgICAgcmV0dXJuICgwLCBfZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLmRlZmF1bHQpKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOwogICAgICAgICAgfSk7CiAgICAgICAga2V5czIucHVzaC5hcHBseShrZXlzMiwgc3ltYm9sczIpOwogICAgICB9CiAgICAgIHJldHVybiBrZXlzMjsKICAgIH0KICAgIGZ1bmN0aW9uIF9vYmplY3RTcHJlYWQyKHRhcmdldCkgewogICAgICBmb3IgKHZhciBpMiA9IDE7IGkyIDwgYXJndW1lbnRzLmxlbmd0aDsgaTIrKykgewogICAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaTJdICE9IG51bGwgPyBhcmd1bWVudHNbaTJdIDoge307CiAgICAgICAgaWYgKGkyICUgMikgewogICAgICAgICAgdmFyIF9jb250ZXh0MzsKICAgICAgICAgICgwLCBfZm9yRWFjaC5kZWZhdWx0KShfY29udGV4dDMgPSBvd25LZXlzMihPYmplY3Qoc291cmNlKSwgdHJ1ZSkpLmNhbGwoX2NvbnRleHQzLCBmdW5jdGlvbihrZXkpIHsKICAgICAgICAgICAgKDAsIF9kZWZpbmVQcm9wZXJ0eTMuZGVmYXVsdCkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSBpZiAoX2dldE93blByb3BlcnR5RGVzY3JpcHRvcnMuZGVmYXVsdCkgewogICAgICAgICAgKDAsIF9kZWZpbmVQcm9wZXJ0aWVzMi5kZWZhdWx0KSh0YXJnZXQsICgwLCBfZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycy5kZWZhdWx0KShzb3VyY2UpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFyIF9jb250ZXh0NDsKICAgICAgICAgICgwLCBfZm9yRWFjaC5kZWZhdWx0KShfY29udGV4dDQgPSBvd25LZXlzMihPYmplY3Qoc291cmNlKSkpLmNhbGwoX2NvbnRleHQ0LCBmdW5jdGlvbihrZXkpIHsKICAgICAgICAgICAgKDAsIF9kZWZpbmVQcm9wZXJ0eTIyLmRlZmF1bHQpKHRhcmdldCwga2V5LCAoMCwgX2dldE93blByb3BlcnR5RGVzY3JpcHRvci5kZWZhdWx0KShzb3VyY2UsIGtleSkpOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICB2YXIgSW5kZXhGaWxlID0gLyogQF9fUFVSRV9fICovIGZ1bmN0aW9uKCkgewogICAgICBmdW5jdGlvbiBJbmRleEZpbGUyKF9yZWYpIHsKICAgICAgICB2YXIgZmlsZWhhbmRsZTIgPSBfcmVmLmZpbGVoYW5kbGUsIF9yZWYkcmVuYW1lUmVmU2VxID0gX3JlZi5yZW5hbWVSZWZTZXEsIHJlbmFtZVJlZlNlcSA9IF9yZWYkcmVuYW1lUmVmU2VxID09PSB2b2lkIDAgPyBmdW5jdGlvbihuKSB7CiAgICAgICAgICByZXR1cm4gbjsKICAgICAgICB9IDogX3JlZiRyZW5hbWVSZWZTZXE7CiAgICAgICAgKDAsIF9jbGFzc0NhbGxDaGVjazIyLmRlZmF1bHQpKHRoaXMsIEluZGV4RmlsZTIpOwogICAgICAgICgwLCBfZGVmaW5lUHJvcGVydHkzLmRlZmF1bHQpKHRoaXMsICJmaWxlaGFuZGxlIiwgdm9pZCAwKTsKICAgICAgICAoMCwgX2RlZmluZVByb3BlcnR5My5kZWZhdWx0KSh0aGlzLCAicmVuYW1lUmVmU2VxIiwgdm9pZCAwKTsKICAgICAgICAoMCwgX2RlZmluZVByb3BlcnR5My5kZWZhdWx0KSh0aGlzLCAiX3BhcnNlQ2FjaGUiLCB2b2lkIDApOwogICAgICAgIHRoaXMuZmlsZWhhbmRsZSA9IGZpbGVoYW5kbGUyOwogICAgICAgIHRoaXMucmVuYW1lUmVmU2VxID0gcmVuYW1lUmVmU2VxOwogICAgICB9CiAgICAgICgwLCBfY3JlYXRlQ2xhc3MyMi5kZWZhdWx0KShJbmRleEZpbGUyLCBbewogICAgICAgIGtleTogIl9maW5kRmlyc3REYXRhIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2ZpbmRGaXJzdERhdGEoZGF0YTIsIHZpcnR1YWxPZmZzZXQyKSB7CiAgICAgICAgICB2YXIgY3VycmVudEZkbCA9IGRhdGEyLmZpcnN0RGF0YUxpbmU7CiAgICAgICAgICBpZiAoY3VycmVudEZkbCkgewogICAgICAgICAgICBkYXRhMi5maXJzdERhdGFMaW5lID0gY3VycmVudEZkbC5jb21wYXJlVG8odmlydHVhbE9mZnNldDIpID4gMCA/IHZpcnR1YWxPZmZzZXQyIDogY3VycmVudEZkbDsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGRhdGEyLmZpcnN0RGF0YUxpbmUgPSB2aXJ0dWFsT2Zmc2V0MjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJwYXJzZSIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgdmFyIF9wYXJzZTIgPSAoMCwgX2FzeW5jVG9HZW5lcmF0b3IyMi5kZWZhdWx0KSgvKiBAX19QVVJFX18gKi8gX3JlZ2VuZXJhdG9yMi5kZWZhdWx0Lm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgICAgICAgdmFyIG9wdHMsIF9hcmdzID0gYXJndW1lbnRzOwogICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yMi5kZWZhdWx0LndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgb3B0cyA9IF9hcmdzLmxlbmd0aCA+IDAgJiYgX2FyZ3NbMF0gIT09IHZvaWQgMCA/IF9hcmdzWzBdIDoge307CiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9wYXJzZUNhY2hlKSB7CiAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9wYXJzZUNhY2hlID0gbmV3IF9hYm9ydGFibGVQcm9taXNlQ2FjaGUuZGVmYXVsdCh7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlOiBuZXcgX3F1aWNrTHJ1LmRlZmF1bHQoewogICAgICAgICAgICAgICAgICAgICAgICAgIG1heFNpemU6IDEKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw6IGZ1bmN0aW9uIGZpbGwob3B0czIsIHNpZ25hbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5fcGFyc2UoX29iamVjdFNwcmVhZDIoX29iamVjdFNwcmVhZDIoe30sIG9wdHMyKSwge30sIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hbAogICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHRoaXMuX3BhcnNlQ2FjaGUuZ2V0KCJpbmRleCIsIG9wdHMsIG9wdHMuc2lnbmFsKSk7CiAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZSwgdGhpcyk7CiAgICAgICAgICB9KSk7CiAgICAgICAgICBmdW5jdGlvbiBwYXJzZSgpIHsKICAgICAgICAgICAgcmV0dXJuIF9wYXJzZTIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBwYXJzZTsKICAgICAgICB9KCkKICAgICAgfSwgewogICAgICAgIGtleTogImhhc1JlZlNlcSIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgdmFyIF9oYXNSZWZTZXEgPSAoMCwgX2FzeW5jVG9HZW5lcmF0b3IyMi5kZWZhdWx0KSgvKiBAX19QVVJFX18gKi8gX3JlZ2VuZXJhdG9yMi5kZWZhdWx0Lm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoc2VxSWQpIHsKICAgICAgICAgICAgdmFyIG9wdHMsIF9hcmdzMiA9IGFyZ3VtZW50czsKICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvcjIuZGVmYXVsdC53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICBvcHRzID0gX2FyZ3MyLmxlbmd0aCA+IDEgJiYgX2FyZ3MyWzFdICE9PSB2b2lkIDAgPyBfYXJnczJbMV0gOiB7fTsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2Uob3B0cyk7CiAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIudDEgPSBzZXFJZDsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDIuc2VudC5pbmRpY2VzW19jb250ZXh0Mi50MV07CiAgICAgICAgICAgICAgICAgICAgaWYgKF9jb250ZXh0Mi50MCkgewogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA3OwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IHt9OwogICAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsICEhX2NvbnRleHQyLnQwLmJpbkluZGV4KTsKICAgICAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZTIsIHRoaXMpOwogICAgICAgICAgfSkpOwogICAgICAgICAgZnVuY3Rpb24gaGFzUmVmU2VxKF94KSB7CiAgICAgICAgICAgIHJldHVybiBfaGFzUmVmU2VxLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gaGFzUmVmU2VxOwogICAgICAgIH0oKQogICAgICB9XSk7CiAgICAgIHJldHVybiBJbmRleEZpbGUyOwogICAgfSgpOwogICAgZXhwb3J0cy5kZWZhdWx0ID0gSW5kZXhGaWxlOwogIH0pKGluZGV4RmlsZSk7CiAgdmFyIHV0aWwgPSB7fTsKICB2YXIgZmxvb3IgPSBNYXRoLmZsb29yOwogIHZhciBtZXJnZVNvcnQgPSBmdW5jdGlvbihhcnJheSwgY29tcGFyZWZuKSB7CiAgICB2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoOwogICAgdmFyIG1pZGRsZSA9IGZsb29yKGxlbmd0aCAvIDIpOwogICAgcmV0dXJuIGxlbmd0aCA8IDggPyBpbnNlcnRpb25Tb3J0KGFycmF5LCBjb21wYXJlZm4pIDogbWVyZ2UobWVyZ2VTb3J0KGFycmF5LnNsaWNlKDAsIG1pZGRsZSksIGNvbXBhcmVmbiksIG1lcmdlU29ydChhcnJheS5zbGljZShtaWRkbGUpLCBjb21wYXJlZm4pLCBjb21wYXJlZm4pOwogIH07CiAgdmFyIGluc2VydGlvblNvcnQgPSBmdW5jdGlvbihhcnJheSwgY29tcGFyZWZuKSB7CiAgICB2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoOwogICAgdmFyIGkyID0gMTsKICAgIHZhciBlbGVtZW50LCBqOwogICAgd2hpbGUgKGkyIDwgbGVuZ3RoKSB7CiAgICAgIGogPSBpMjsKICAgICAgZWxlbWVudCA9IGFycmF5W2kyXTsKICAgICAgd2hpbGUgKGogJiYgY29tcGFyZWZuKGFycmF5W2ogLSAxXSwgZWxlbWVudCkgPiAwKSB7CiAgICAgICAgYXJyYXlbal0gPSBhcnJheVstLWpdOwogICAgICB9CiAgICAgIGlmIChqICE9PSBpMisrKQogICAgICAgIGFycmF5W2pdID0gZWxlbWVudDsKICAgIH0KICAgIHJldHVybiBhcnJheTsKICB9OwogIHZhciBtZXJnZSA9IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb21wYXJlZm4pIHsKICAgIHZhciBsbGVuZ3RoID0gbGVmdC5sZW5ndGg7CiAgICB2YXIgcmxlbmd0aCA9IHJpZ2h0Lmxlbmd0aDsKICAgIHZhciBsaW5kZXggPSAwOwogICAgdmFyIHJpbmRleCA9IDA7CiAgICB2YXIgcmVzdWx0ID0gW107CiAgICB3aGlsZSAobGluZGV4IDwgbGxlbmd0aCB8fCByaW5kZXggPCBybGVuZ3RoKSB7CiAgICAgIGlmIChsaW5kZXggPCBsbGVuZ3RoICYmIHJpbmRleCA8IHJsZW5ndGgpIHsKICAgICAgICByZXN1bHQucHVzaChjb21wYXJlZm4obGVmdFtsaW5kZXhdLCByaWdodFtyaW5kZXhdKSA8PSAwID8gbGVmdFtsaW5kZXgrK10gOiByaWdodFtyaW5kZXgrK10pOwogICAgICB9IGVsc2UgewogICAgICAgIHJlc3VsdC5wdXNoKGxpbmRleCA8IGxsZW5ndGggPyBsZWZ0W2xpbmRleCsrXSA6IHJpZ2h0W3JpbmRleCsrXSk7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiByZXN1bHQ7CiAgfTsKICB2YXIgYXJyYXlTb3J0ID0gbWVyZ2VTb3J0OwogIHZhciB1c2VyQWdlbnQkMiA9IGVuZ2luZVVzZXJBZ2VudDsKICB2YXIgZmlyZWZveCA9IHVzZXJBZ2VudCQyLm1hdGNoKC9maXJlZm94XC8oXGQrKS9pKTsKICB2YXIgZW5naW5lRmZWZXJzaW9uID0gISFmaXJlZm94ICYmICtmaXJlZm94WzFdOwogIHZhciBVQSA9IGVuZ2luZVVzZXJBZ2VudDsKICB2YXIgZW5naW5lSXNJZU9yRWRnZSA9IC9NU0lFfFRyaWRlbnQvLnRlc3QoVUEpOwogIHZhciB1c2VyQWdlbnQkMSA9IGVuZ2luZVVzZXJBZ2VudDsKICB2YXIgd2Via2l0ID0gdXNlckFnZW50JDEubWF0Y2goL0FwcGxlV2ViS2l0XC8oXGQrKVwuLyk7CiAgdmFyIGVuZ2luZVdlYmtpdFZlcnNpb24gPSAhIXdlYmtpdCAmJiArd2Via2l0WzFdOwogIHZhciAkJGggPSBfZXhwb3J0OwogIHZhciBhQ2FsbGFibGUkMyA9IGFDYWxsYWJsZSRjOwogIHZhciB0b09iamVjdCQyID0gdG9PYmplY3QkYjsKICB2YXIgdG9MZW5ndGgkMiA9IHRvTGVuZ3RoJDk7CiAgdmFyIHRvU3RyaW5nJDUgPSB0b1N0cmluZyRhOwogIHZhciBmYWlscyQ0ID0gZmFpbHMkbjsKICB2YXIgaW50ZXJuYWxTb3J0ID0gYXJyYXlTb3J0OwogIHZhciBhcnJheU1ldGhvZElzU3RyaWN0JDIgPSBhcnJheU1ldGhvZElzU3RyaWN0JDQ7CiAgdmFyIEZGID0gZW5naW5lRmZWZXJzaW9uOwogIHZhciBJRV9PUl9FREdFID0gZW5naW5lSXNJZU9yRWRnZTsKICB2YXIgVjggPSBlbmdpbmVWOFZlcnNpb247CiAgdmFyIFdFQktJVCA9IGVuZ2luZVdlYmtpdFZlcnNpb247CiAgdmFyIHRlc3QgPSBbXTsKICB2YXIgbmF0aXZlU29ydCA9IHRlc3Quc29ydDsKICB2YXIgRkFJTFNfT05fVU5ERUZJTkVEID0gZmFpbHMkNChmdW5jdGlvbigpIHsKICAgIHRlc3Quc29ydCh2b2lkIDApOwogIH0pOwogIHZhciBGQUlMU19PTl9OVUxMID0gZmFpbHMkNChmdW5jdGlvbigpIHsKICAgIHRlc3Quc29ydChudWxsKTsKICB9KTsKICB2YXIgU1RSSUNUX01FVEhPRCQyID0gYXJyYXlNZXRob2RJc1N0cmljdCQyKCJzb3J0Iik7CiAgdmFyIFNUQUJMRV9TT1JUID0gIWZhaWxzJDQoZnVuY3Rpb24oKSB7CiAgICBpZiAoVjgpCiAgICAgIHJldHVybiBWOCA8IDcwOwogICAgaWYgKEZGICYmIEZGID4gMykKICAgICAgcmV0dXJuOwogICAgaWYgKElFX09SX0VER0UpCiAgICAgIHJldHVybiB0cnVlOwogICAgaWYgKFdFQktJVCkKICAgICAgcmV0dXJuIFdFQktJVCA8IDYwMzsKICAgIHZhciByZXN1bHQgPSAiIjsKICAgIHZhciBjb2RlMiwgY2hyLCB2YWx1ZSwgaW5kZXg7CiAgICBmb3IgKGNvZGUyID0gNjU7IGNvZGUyIDwgNzY7IGNvZGUyKyspIHsKICAgICAgY2hyID0gU3RyaW5nLmZyb21DaGFyQ29kZShjb2RlMik7CiAgICAgIHN3aXRjaCAoY29kZTIpIHsKICAgICAgICBjYXNlIDY2OgogICAgICAgIGNhc2UgNjk6CiAgICAgICAgY2FzZSA3MDoKICAgICAgICBjYXNlIDcyOgogICAgICAgICAgdmFsdWUgPSAzOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSA2ODoKICAgICAgICBjYXNlIDcxOgogICAgICAgICAgdmFsdWUgPSA0OwogICAgICAgICAgYnJlYWs7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHZhbHVlID0gMjsKICAgICAgfQogICAgICBmb3IgKGluZGV4ID0gMDsgaW5kZXggPCA0NzsgaW5kZXgrKykgewogICAgICAgIHRlc3QucHVzaCh7IGs6IGNociArIGluZGV4LCB2OiB2YWx1ZSB9KTsKICAgICAgfQogICAgfQogICAgdGVzdC5zb3J0KGZ1bmN0aW9uKGEsIGIpIHsKICAgICAgcmV0dXJuIGIudiAtIGEudjsKICAgIH0pOwogICAgZm9yIChpbmRleCA9IDA7IGluZGV4IDwgdGVzdC5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgY2hyID0gdGVzdFtpbmRleF0uay5jaGFyQXQoMCk7CiAgICAgIGlmIChyZXN1bHQuY2hhckF0KHJlc3VsdC5sZW5ndGggLSAxKSAhPT0gY2hyKQogICAgICAgIHJlc3VsdCArPSBjaHI7CiAgICB9CiAgICByZXR1cm4gcmVzdWx0ICE9PSAiREdCRUZIQUNJSksiOwogIH0pOwogIHZhciBGT1JDRUQkMSA9IEZBSUxTX09OX1VOREVGSU5FRCB8fCAhRkFJTFNfT05fTlVMTCB8fCAhU1RSSUNUX01FVEhPRCQyIHx8ICFTVEFCTEVfU09SVDsKICB2YXIgZ2V0U29ydENvbXBhcmUgPSBmdW5jdGlvbihjb21wYXJlZm4pIHsKICAgIHJldHVybiBmdW5jdGlvbih4LCB5KSB7CiAgICAgIGlmICh5ID09PSB2b2lkIDApCiAgICAgICAgcmV0dXJuIC0xOwogICAgICBpZiAoeCA9PT0gdm9pZCAwKQogICAgICAgIHJldHVybiAxOwogICAgICBpZiAoY29tcGFyZWZuICE9PSB2b2lkIDApCiAgICAgICAgcmV0dXJuICtjb21wYXJlZm4oeCwgeSkgfHwgMDsKICAgICAgcmV0dXJuIHRvU3RyaW5nJDUoeCkgPiB0b1N0cmluZyQ1KHkpID8gMSA6IC0xOwogICAgfTsKICB9OwogICQkaCh7IHRhcmdldDogIkFycmF5IiwgcHJvdG86IHRydWUsIGZvcmNlZDogRk9SQ0VEJDEgfSwgewogICAgc29ydDogZnVuY3Rpb24gc29ydDIoY29tcGFyZWZuKSB7CiAgICAgIGlmIChjb21wYXJlZm4gIT09IHZvaWQgMCkKICAgICAgICBhQ2FsbGFibGUkMyhjb21wYXJlZm4pOwogICAgICB2YXIgYXJyYXkgPSB0b09iamVjdCQyKHRoaXMpOwogICAgICBpZiAoU1RBQkxFX1NPUlQpCiAgICAgICAgcmV0dXJuIGNvbXBhcmVmbiA9PT0gdm9pZCAwID8gbmF0aXZlU29ydC5jYWxsKGFycmF5KSA6IG5hdGl2ZVNvcnQuY2FsbChhcnJheSwgY29tcGFyZWZuKTsKICAgICAgdmFyIGl0ZW1zID0gW107CiAgICAgIHZhciBhcnJheUxlbmd0aCA9IHRvTGVuZ3RoJDIoYXJyYXkubGVuZ3RoKTsKICAgICAgdmFyIGl0ZW1zTGVuZ3RoLCBpbmRleDsKICAgICAgZm9yIChpbmRleCA9IDA7IGluZGV4IDwgYXJyYXlMZW5ndGg7IGluZGV4KyspIHsKICAgICAgICBpZiAoaW5kZXggaW4gYXJyYXkpCiAgICAgICAgICBpdGVtcy5wdXNoKGFycmF5W2luZGV4XSk7CiAgICAgIH0KICAgICAgaXRlbXMgPSBpbnRlcm5hbFNvcnQoaXRlbXMsIGdldFNvcnRDb21wYXJlKGNvbXBhcmVmbikpOwogICAgICBpdGVtc0xlbmd0aCA9IGl0ZW1zLmxlbmd0aDsKICAgICAgaW5kZXggPSAwOwogICAgICB3aGlsZSAoaW5kZXggPCBpdGVtc0xlbmd0aCkKICAgICAgICBhcnJheVtpbmRleF0gPSBpdGVtc1tpbmRleCsrXTsKICAgICAgd2hpbGUgKGluZGV4IDwgYXJyYXlMZW5ndGgpCiAgICAgICAgZGVsZXRlIGFycmF5W2luZGV4KytdOwogICAgICByZXR1cm4gYXJyYXk7CiAgICB9CiAgfSk7CiAgdmFyIGVudHJ5VmlydHVhbCQ0ID0gZW50cnlWaXJ0dWFsJGE7CiAgdmFyIHNvcnQkMyA9IGVudHJ5VmlydHVhbCQ0KCJBcnJheSIpLnNvcnQ7CiAgdmFyIHNvcnQkMiA9IHNvcnQkMzsKICB2YXIgQXJyYXlQcm90b3R5cGUkMiA9IEFycmF5LnByb3RvdHlwZTsKICB2YXIgc29ydF8xID0gZnVuY3Rpb24oaXQpIHsKICAgIHZhciBvd24gPSBpdC5zb3J0OwogICAgcmV0dXJuIGl0ID09PSBBcnJheVByb3RvdHlwZSQyIHx8IGl0IGluc3RhbmNlb2YgQXJyYXkgJiYgb3duID09PSBBcnJheVByb3RvdHlwZSQyLnNvcnQgPyBzb3J0JDIgOiBvd247CiAgfTsKICB2YXIgcGFyZW50JGkgPSBzb3J0XzE7CiAgdmFyIHNvcnQkMSA9IHBhcmVudCRpOwogIHZhciBzb3J0ID0gc29ydCQxOwogIHZhciAkJGcgPSBfZXhwb3J0OwogICQkZyh7IHRhcmdldDogIk51bWJlciIsIHN0YXQ6IHRydWUgfSwgewogICAgTUlOX1NBRkVfSU5URUdFUjogLTkwMDcxOTkyNTQ3NDA5OTEKICB9KTsKICB2YXIgbWluU2FmZUludGVnZXIkMiA9IC05MDA3MTk5MjU0NzQwOTkxOwogIHZhciBwYXJlbnQkaCA9IG1pblNhZmVJbnRlZ2VyJDI7CiAgdmFyIG1pblNhZmVJbnRlZ2VyJDEgPSBwYXJlbnQkaDsKICB2YXIgbWluU2FmZUludGVnZXIgPSBtaW5TYWZlSW50ZWdlciQxOwogIHZhciAkJGYgPSBfZXhwb3J0OwogICQkZih7IHRhcmdldDogIk51bWJlciIsIHN0YXQ6IHRydWUgfSwgewogICAgTUFYX1NBRkVfSU5URUdFUjogOTAwNzE5OTI1NDc0MDk5MQogIH0pOwogIHZhciBtYXhTYWZlSW50ZWdlciQyID0gOTAwNzE5OTI1NDc0MDk5MTsKICB2YXIgcGFyZW50JGcgPSBtYXhTYWZlSW50ZWdlciQyOwogIHZhciBtYXhTYWZlSW50ZWdlciQxID0gcGFyZW50JGc7CiAgdmFyIG1heFNhZmVJbnRlZ2VyID0gbWF4U2FmZUludGVnZXIkMTsKICB2YXIgJCRlID0gX2V4cG9ydDsKICB2YXIgZ2xvYmFsJDQgPSBnbG9iYWwkbzsKICB2YXIgaXNDYWxsYWJsZSQyID0gaXNDYWxsYWJsZSRsOwogIHZhciB1c2VyQWdlbnQgPSBlbmdpbmVVc2VyQWdlbnQ7CiAgdmFyIHNsaWNlID0gW10uc2xpY2U7CiAgdmFyIE1TSUUgPSAvTVNJRSAuXC4vLnRlc3QodXNlckFnZW50KTsKICB2YXIgd3JhcCA9IGZ1bmN0aW9uKHNjaGVkdWxlcikgewogICAgcmV0dXJuIGZ1bmN0aW9uKGhhbmRsZXIsIHRpbWVvdXQpIHsKICAgICAgdmFyIGJvdW5kQXJncyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyOwogICAgICB2YXIgYXJncyA9IGJvdW5kQXJncyA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKSA6IHZvaWQgMDsKICAgICAgcmV0dXJuIHNjaGVkdWxlcihib3VuZEFyZ3MgPyBmdW5jdGlvbigpIHsKICAgICAgICAoaXNDYWxsYWJsZSQyKGhhbmRsZXIpID8gaGFuZGxlciA6IEZ1bmN0aW9uKGhhbmRsZXIpKS5hcHBseSh0aGlzLCBhcmdzKTsKICAgICAgfSA6IGhhbmRsZXIsIHRpbWVvdXQpOwogICAgfTsKICB9OwogICQkZSh7IGdsb2JhbDogdHJ1ZSwgYmluZDogdHJ1ZSwgZm9yY2VkOiBNU0lFIH0sIHsKICAgIHNldFRpbWVvdXQ6IHdyYXAoZ2xvYmFsJDQuc2V0VGltZW91dCksCiAgICBzZXRJbnRlcnZhbDogd3JhcChnbG9iYWwkNC5zZXRJbnRlcnZhbCkKICB9KTsKICB2YXIgcGF0aCQ0ID0gcGF0aCRuOwogIHZhciBzZXRUaW1lb3V0JDIgPSBwYXRoJDQuc2V0VGltZW91dDsKICB2YXIgc2V0VGltZW91dCQxID0gc2V0VGltZW91dCQyOwogIHZhciBwcm9taXNlID0gcHJvbWlzZSQzOwogIChmdW5jdGlvbihleHBvcnRzKSB7CiAgICB2YXIgX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIgPSBpbnRlcm9wUmVxdWlyZURlZmF1bHQkMS5leHBvcnRzOwogICAgdmFyIF9PYmplY3QkZGVmaW5lUHJvcGVydHkgPSBkZWZpbmVQcm9wZXJ0eSQ5OwogICAgX09iamVjdCRkZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICAgICAgdmFsdWU6IHRydWUKICAgIH0pOwogICAgZXhwb3J0cy50aW1lb3V0ID0gdGltZW91dDsKICAgIGV4cG9ydHMubG9uZ1RvTnVtYmVyID0gbG9uZ1RvTnVtYmVyOwogICAgZXhwb3J0cy5jaGVja0Fib3J0U2lnbmFsID0gY2hlY2tBYm9ydFNpZ25hbDsKICAgIGV4cG9ydHMuYWJvcnRCcmVha1BvaW50ID0gYWJvcnRCcmVha1BvaW50OwogICAgZXhwb3J0cy5jYW5NZXJnZUJsb2NrcyA9IGNhbk1lcmdlQmxvY2tzOwogICAgZXhwb3J0cy5tYWtlT3B0cyA9IG1ha2VPcHRzOwogICAgZXhwb3J0cy5vcHRpbWl6ZUNodW5rcyA9IG9wdGltaXplQ2h1bmtzOwogICAgdmFyIF9yZWdlbmVyYXRvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0MihyZWdlbmVyYXRvciQxKTsKICAgIHZhciBfZm9yRWFjaCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKGZvckVhY2gkMSk7CiAgICB2YXIgX3NvcnQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Mihzb3J0KTsKICAgIHZhciBfYXN5bmNUb0dlbmVyYXRvcjIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoYXN5bmNUb0dlbmVyYXRvciQxLmV4cG9ydHMpOwogICAgdmFyIF9taW5TYWZlSW50ZWdlciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKG1pblNhZmVJbnRlZ2VyKTsKICAgIHZhciBfbWF4U2FmZUludGVnZXIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0MihtYXhTYWZlSW50ZWdlcik7CiAgICB2YXIgX3NldFRpbWVvdXQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoc2V0VGltZW91dCQxKTsKICAgIHZhciBfcHJvbWlzZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKHByb21pc2UpOwogICAgZnVuY3Rpb24gdGltZW91dChtcykgewogICAgICByZXR1cm4gbmV3IF9wcm9taXNlLmRlZmF1bHQoZnVuY3Rpb24ocmVzb2x2ZSkgewogICAgICAgIHJldHVybiAoMCwgX3NldFRpbWVvdXQyLmRlZmF1bHQpKHJlc29sdmUsIG1zKTsKICAgICAgfSk7CiAgICB9CiAgICBmdW5jdGlvbiBsb25nVG9OdW1iZXIobG9uZzIpIHsKICAgICAgaWYgKGxvbmcyLmdyZWF0ZXJUaGFuKF9tYXhTYWZlSW50ZWdlci5kZWZhdWx0KSB8fCBsb25nMi5sZXNzVGhhbihfbWluU2FmZUludGVnZXIuZGVmYXVsdCkpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoImludGVnZXIgb3ZlcmZsb3ciKTsKICAgICAgfQogICAgICByZXR1cm4gbG9uZzIudG9OdW1iZXIoKTsKICAgIH0KICAgIGZ1bmN0aW9uIGNoZWNrQWJvcnRTaWduYWwoc2lnbmFsKSB7CiAgICAgIGlmICghc2lnbmFsKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmIChzaWduYWwuYWJvcnRlZCkgewogICAgICAgIGlmICh0eXBlb2YgRE9NRXhjZXB0aW9uICE9PSAidW5kZWZpbmVkIikgewogICAgICAgICAgdGhyb3cgbmV3IERPTUV4Y2VwdGlvbigiYWJvcnRlZCIsICJBYm9ydEVycm9yIik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBlID0gbmV3IEVycm9yKCJhYm9ydGVkIik7CiAgICAgICAgICBlLmNvZGUgPSAiRVJSX0FCT1JURUQiOwogICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIGFib3J0QnJlYWtQb2ludChfeCkgewogICAgICByZXR1cm4gX2Fib3J0QnJlYWtQb2ludC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfQogICAgZnVuY3Rpb24gX2Fib3J0QnJlYWtQb2ludCgpIHsKICAgICAgX2Fib3J0QnJlYWtQb2ludCA9ICgwLCBfYXN5bmNUb0dlbmVyYXRvcjIyLmRlZmF1bHQpKC8qIEBfX1BVUkVfXyAqLyBfcmVnZW5lcmF0b3IyLmRlZmF1bHQubWFyayhmdW5jdGlvbiBfY2FsbGVlKHNpZ25hbCkgewogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3IyLmRlZmF1bHQud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIF9wcm9taXNlLmRlZmF1bHQucmVzb2x2ZSgpOwogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIGNoZWNrQWJvcnRTaWduYWwoc2lnbmFsKTsKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpOwogICAgICByZXR1cm4gX2Fib3J0QnJlYWtQb2ludC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfQogICAgZnVuY3Rpb24gY2FuTWVyZ2VCbG9ja3MoY2h1bmsxLCBjaHVuazIpIHsKICAgICAgcmV0dXJuIGNodW5rMi5taW52LmJsb2NrUG9zaXRpb24gLSBjaHVuazEubWF4di5ibG9ja1Bvc2l0aW9uIDwgNjVlMyAmJiBjaHVuazIubWF4di5ibG9ja1Bvc2l0aW9uIC0gY2h1bmsxLm1pbnYuYmxvY2tQb3NpdGlvbiA8IDVlNjsKICAgIH0KICAgIGZ1bmN0aW9uIG1ha2VPcHRzKCkgewogICAgICB2YXIgb2JqID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB2b2lkIDAgPyBhcmd1bWVudHNbMF0gOiB7fTsKICAgICAgcmV0dXJuICJhYm9ydGVkIiBpbiBvYmogPyB7CiAgICAgICAgc2lnbmFsOiBvYmoKICAgICAgfSA6IG9iajsKICAgIH0KICAgIGZ1bmN0aW9uIG9wdGltaXplQ2h1bmtzKGNodW5rcywgbG93ZXN0KSB7CiAgICAgIHZhciBtZXJnZWRDaHVua3MgPSBbXTsKICAgICAgdmFyIGxhc3RDaHVuayA9IG51bGw7CiAgICAgIGlmIChjaHVua3MubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuIGNodW5rczsKICAgICAgfQogICAgICAoMCwgX3NvcnQuZGVmYXVsdCkoY2h1bmtzKS5jYWxsKGNodW5rcywgZnVuY3Rpb24oYzAsIGMxKSB7CiAgICAgICAgdmFyIGRpZiA9IGMwLm1pbnYuYmxvY2tQb3NpdGlvbiAtIGMxLm1pbnYuYmxvY2tQb3NpdGlvbjsKICAgICAgICBpZiAoZGlmICE9PSAwKSB7CiAgICAgICAgICByZXR1cm4gZGlmOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gYzAubWludi5kYXRhUG9zaXRpb24gLSBjMS5taW52LmRhdGFQb3NpdGlvbjsKICAgICAgICB9CiAgICAgIH0pOwogICAgICAoMCwgX2ZvckVhY2guZGVmYXVsdCkoY2h1bmtzKS5jYWxsKGNodW5rcywgZnVuY3Rpb24oY2h1bmsyKSB7CiAgICAgICAgaWYgKCFsb3dlc3QgfHwgY2h1bmsyLm1heHYuY29tcGFyZVRvKGxvd2VzdCkgPiAwKSB7CiAgICAgICAgICBpZiAobGFzdENodW5rID09PSBudWxsKSB7CiAgICAgICAgICAgIG1lcmdlZENodW5rcy5wdXNoKGNodW5rMik7CiAgICAgICAgICAgIGxhc3RDaHVuayA9IGNodW5rMjsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmIChjYW5NZXJnZUJsb2NrcyhsYXN0Q2h1bmssIGNodW5rMikpIHsKICAgICAgICAgICAgICBpZiAoY2h1bmsyLm1heHYuY29tcGFyZVRvKGxhc3RDaHVuay5tYXh2KSA+IDApIHsKICAgICAgICAgICAgICAgIGxhc3RDaHVuay5tYXh2ID0gY2h1bmsyLm1heHY7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIG1lcmdlZENodW5rcy5wdXNoKGNodW5rMik7CiAgICAgICAgICAgICAgbGFzdENodW5rID0gY2h1bmsyOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIG1lcmdlZENodW5rczsKICAgIH0KICB9KSh1dGlsKTsKICAoZnVuY3Rpb24oZXhwb3J0cykgewogICAgdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyID0gaW50ZXJvcFJlcXVpcmVEZWZhdWx0JDEuZXhwb3J0czsKICAgIHZhciBfT2JqZWN0JGRlZmluZVByb3BlcnR5MiA9IGRlZmluZVByb3BlcnR5JDk7CiAgICBfT2JqZWN0JGRlZmluZVByb3BlcnR5MihleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICAgICAgdmFsdWU6IHRydWUKICAgIH0pOwogICAgZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwOwogICAgdmFyIF9nZXRJdGVyYXRvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0MihnZXRJdGVyYXRvciQyKTsKICAgIHZhciBfaXNBcnJheSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKGlzQXJyYXkkNik7CiAgICB2YXIgX2dldEl0ZXJhdG9yTWV0aG9kMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKGdldEl0ZXJhdG9yTWV0aG9kJDIpOwogICAgdmFyIF9zeW1ib2wgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0MihzeW1ib2wkMik7CiAgICB2YXIgX2Zyb20gPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Mihmcm9tJDMpOwogICAgdmFyIF9kZWZpbmVQcm9wZXJ0eTIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoZGVmaW5lUHJvcGVydHkkOSk7CiAgICB2YXIgX2RlZmluZVByb3BlcnRpZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoZGVmaW5lUHJvcGVydGllcyk7CiAgICB2YXIgX2dldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0MihnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKTsKICAgIHZhciBfZm9yRWFjaCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKGZvckVhY2gkMSk7CiAgICB2YXIgX2dldE93blByb3BlcnR5RGVzY3JpcHRvciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKGdldE93blByb3BlcnR5RGVzY3JpcHRvciQzKTsKICAgIHZhciBfZmlsdGVyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoZmlsdGVyKTsKICAgIHZhciBfZ2V0T3duUHJvcGVydHlTeW1ib2xzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoZ2V0T3duUHJvcGVydHlTeW1ib2xzJDIpOwogICAgdmFyIF9rZXlzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoa2V5cyQyKTsKICAgIHZhciBfY29uc3RydWN0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoY29uc3RydWN0KTsKICAgIHZhciBfc2xpY2VkVG9BcnJheTIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoc2xpY2VkVG9BcnJheSQxLmV4cG9ydHMpOwogICAgdmFyIF9kZWZpbmVQcm9wZXJ0eTMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0MihkZWZpbmVQcm9wZXJ0eSQ2LmV4cG9ydHMpOwogICAgdmFyIF9tYXAgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0MihtYXApOwogICAgdmFyIF9yZWdlbmVyYXRvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0MihyZWdlbmVyYXRvciQxKTsKICAgIHZhciBfYXN5bmNUb0dlbmVyYXRvcjIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoYXN5bmNUb0dlbmVyYXRvciQxLmV4cG9ydHMpOwogICAgdmFyIF9zbGljZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKHNsaWNlJDEpOwogICAgdmFyIF9jbGFzc0NhbGxDaGVjazIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoY2xhc3NDYWxsQ2hlY2skMS5leHBvcnRzKTsKICAgIHZhciBfY3JlYXRlQ2xhc3MyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKGNyZWF0ZUNsYXNzJDEuZXhwb3J0cyk7CiAgICB2YXIgX2luaGVyaXRzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKGluaGVyaXRzLmV4cG9ydHMpOwogICAgdmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4uZXhwb3J0cyk7CiAgICB2YXIgX2dldFByb3RvdHlwZU9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKGdldFByb3RvdHlwZU9mJDQuZXhwb3J0cyk7CiAgICB2YXIgX2xvbmcgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Mihsb25nKTsKICAgIHZhciBfdmlydHVhbE9mZnNldCA9IHZpcnR1YWxPZmZzZXQ7CiAgICB2YXIgX2NodW5rID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoY2h1bmspOwogICAgdmFyIF9pbmRleEZpbGUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0MihpbmRleEZpbGUpOwogICAgdmFyIF91dGlsID0gdXRpbDsKICAgIGZ1bmN0aW9uIF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG8sIGFsbG93QXJyYXlMaWtlKSB7CiAgICAgIHZhciBpdDsKICAgICAgaWYgKHR5cGVvZiBfc3ltYm9sLmRlZmF1bHQgPT09ICJ1bmRlZmluZWQiIHx8ICgwLCBfZ2V0SXRlcmF0b3JNZXRob2QyLmRlZmF1bHQpKG8pID09IG51bGwpIHsKICAgICAgICBpZiAoKDAsIF9pc0FycmF5LmRlZmF1bHQpKG8pIHx8IChpdCA9IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvKSkgfHwgYWxsb3dBcnJheUxpa2UgJiYgbyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSB7CiAgICAgICAgICBpZiAoaXQpCiAgICAgICAgICAgIG8gPSBpdDsKICAgICAgICAgIHZhciBpMiA9IDA7CiAgICAgICAgICB2YXIgRiA9IGZ1bmN0aW9uIEYyKCkgewogICAgICAgICAgfTsKICAgICAgICAgIHJldHVybiB7IHM6IEYsIG46IGZ1bmN0aW9uIG4oKSB7CiAgICAgICAgICAgIGlmIChpMiA+PSBvLmxlbmd0aCkKICAgICAgICAgICAgICByZXR1cm4geyBkb25lOiB0cnVlIH07CiAgICAgICAgICAgIHJldHVybiB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogb1tpMisrXSB9OwogICAgICAgICAgfSwgZTogZnVuY3Rpb24gZShfZSkgewogICAgICAgICAgICB0aHJvdyBfZTsKICAgICAgICAgIH0sIGY6IEYgfTsKICAgICAgICB9CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpOwogICAgICB9CiAgICAgIHZhciBub3JtYWxDb21wbGV0aW9uID0gdHJ1ZSwgZGlkRXJyID0gZmFsc2UsIGVycjI7CiAgICAgIHJldHVybiB7IHM6IGZ1bmN0aW9uIHMoKSB7CiAgICAgICAgaXQgPSAoMCwgX2dldEl0ZXJhdG9yMi5kZWZhdWx0KShvKTsKICAgICAgfSwgbjogZnVuY3Rpb24gbigpIHsKICAgICAgICB2YXIgc3RlcCA9IGl0Lm5leHQoKTsKICAgICAgICBub3JtYWxDb21wbGV0aW9uID0gc3RlcC5kb25lOwogICAgICAgIHJldHVybiBzdGVwOwogICAgICB9LCBlOiBmdW5jdGlvbiBlKF9lMikgewogICAgICAgIGRpZEVyciA9IHRydWU7CiAgICAgICAgZXJyMiA9IF9lMjsKICAgICAgfSwgZjogZnVuY3Rpb24gZigpIHsKICAgICAgICB0cnkgewogICAgICAgICAgaWYgKCFub3JtYWxDb21wbGV0aW9uICYmIGl0LnJldHVybiAhPSBudWxsKQogICAgICAgICAgICBpdC5yZXR1cm4oKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgaWYgKGRpZEVycikKICAgICAgICAgICAgdGhyb3cgZXJyMjsKICAgICAgICB9CiAgICAgIH0gfTsKICAgIH0KICAgIGZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsKICAgICAgdmFyIF9jb250ZXh0NzsKICAgICAgaWYgKCFvKQogICAgICAgIHJldHVybjsKICAgICAgaWYgKHR5cGVvZiBvID09PSAic3RyaW5nIikKICAgICAgICByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsKICAgICAgdmFyIG4gPSAoMCwgX3NsaWNlLmRlZmF1bHQpKF9jb250ZXh0NyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKSkuY2FsbChfY29udGV4dDcsIDgsIC0xKTsKICAgICAgaWYgKG4gPT09ICJPYmplY3QiICYmIG8uY29uc3RydWN0b3IpCiAgICAgICAgbiA9IG8uY29uc3RydWN0b3IubmFtZTsKICAgICAgaWYgKG4gPT09ICJNYXAiIHx8IG4gPT09ICJTZXQiKQogICAgICAgIHJldHVybiAoMCwgX2Zyb20uZGVmYXVsdCkobyk7CiAgICAgIGlmIChuID09PSAiQXJndW1lbnRzIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkKICAgICAgICByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsKICAgIH0KICAgIGZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuMikgewogICAgICBpZiAobGVuMiA9PSBudWxsIHx8IGxlbjIgPiBhcnIubGVuZ3RoKQogICAgICAgIGxlbjIgPSBhcnIubGVuZ3RoOwogICAgICBmb3IgKHZhciBpMiA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuMik7IGkyIDwgbGVuMjsgaTIrKykgewogICAgICAgIGFycjJbaTJdID0gYXJyW2kyXTsKICAgICAgfQogICAgICByZXR1cm4gYXJyMjsKICAgIH0KICAgIGZ1bmN0aW9uIG93bktleXMyKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsKICAgICAgdmFyIGtleXMyID0gKDAsIF9rZXlzLmRlZmF1bHQpKG9iamVjdCk7CiAgICAgIGlmIChfZ2V0T3duUHJvcGVydHlTeW1ib2xzLmRlZmF1bHQpIHsKICAgICAgICB2YXIgc3ltYm9sczIgPSAoMCwgX2dldE93blByb3BlcnR5U3ltYm9scy5kZWZhdWx0KShvYmplY3QpOwogICAgICAgIGlmIChlbnVtZXJhYmxlT25seSkKICAgICAgICAgIHN5bWJvbHMyID0gKDAsIF9maWx0ZXIuZGVmYXVsdCkoc3ltYm9sczIpLmNhbGwoc3ltYm9sczIsIGZ1bmN0aW9uKHN5bSkgewogICAgICAgICAgICByZXR1cm4gKDAsIF9nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IuZGVmYXVsdCkob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7CiAgICAgICAgICB9KTsKICAgICAgICBrZXlzMi5wdXNoLmFwcGx5KGtleXMyLCBzeW1ib2xzMik7CiAgICAgIH0KICAgICAgcmV0dXJuIGtleXMyOwogICAgfQogICAgZnVuY3Rpb24gX29iamVjdFNwcmVhZDIodGFyZ2V0KSB7CiAgICAgIGZvciAodmFyIGkyID0gMTsgaTIgPCBhcmd1bWVudHMubGVuZ3RoOyBpMisrKSB7CiAgICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpMl0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpMl0gOiB7fTsKICAgICAgICBpZiAoaTIgJSAyKSB7CiAgICAgICAgICB2YXIgX2NvbnRleHQ1OwogICAgICAgICAgKDAsIF9mb3JFYWNoLmRlZmF1bHQpKF9jb250ZXh0NSA9IG93bktleXMyKE9iamVjdChzb3VyY2UpLCB0cnVlKSkuY2FsbChfY29udGV4dDUsIGZ1bmN0aW9uKGtleSkgewogICAgICAgICAgICAoMCwgX2RlZmluZVByb3BlcnR5My5kZWZhdWx0KSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIGlmIChfZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycy5kZWZhdWx0KSB7CiAgICAgICAgICAoMCwgX2RlZmluZVByb3BlcnRpZXMyLmRlZmF1bHQpKHRhcmdldCwgKDAsIF9nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzLmRlZmF1bHQpKHNvdXJjZSkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgX2NvbnRleHQ2OwogICAgICAgICAgKDAsIF9mb3JFYWNoLmRlZmF1bHQpKF9jb250ZXh0NiA9IG93bktleXMyKE9iamVjdChzb3VyY2UpKSkuY2FsbChfY29udGV4dDYsIGZ1bmN0aW9uKGtleSkgewogICAgICAgICAgICAoMCwgX2RlZmluZVByb3BlcnR5MjIuZGVmYXVsdCkodGFyZ2V0LCBrZXksICgwLCBfZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLmRlZmF1bHQpKHNvdXJjZSwga2V5KSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIGZ1bmN0aW9uIF9jcmVhdGVTdXBlcjIoRGVyaXZlZCkgewogICAgICB2YXIgaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCA9IF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QyKCk7CiAgICAgIHJldHVybiBmdW5jdGlvbiBfY3JlYXRlU3VwZXJJbnRlcm5hbCgpIHsKICAgICAgICB2YXIgU3VwZXIgPSAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KShEZXJpdmVkKSwgcmVzdWx0OwogICAgICAgIGlmIChoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KSB7CiAgICAgICAgICB2YXIgTmV3VGFyZ2V0ID0gKDAsIF9nZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkodGhpcykuY29uc3RydWN0b3I7CiAgICAgICAgICByZXN1bHQgPSAoMCwgX2NvbnN0cnVjdC5kZWZhdWx0KShTdXBlciwgYXJndW1lbnRzLCBOZXdUYXJnZXQpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXN1bHQgPSBTdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMi5kZWZhdWx0KSh0aGlzLCByZXN1bHQpOwogICAgICB9OwogICAgfQogICAgZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdDIoKSB7CiAgICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gInVuZGVmaW5lZCIgfHwgIV9jb25zdHJ1Y3QuZGVmYXVsdCkKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIGlmIChfY29uc3RydWN0LmRlZmF1bHQuc2hhbSkKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIGlmICh0eXBlb2YgUHJveHkgPT09ICJmdW5jdGlvbiIpCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIHRyeSB7CiAgICAgICAgRGF0ZS5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCgoMCwgX2NvbnN0cnVjdC5kZWZhdWx0KShEYXRlLCBbXSwgZnVuY3Rpb24oKSB7CiAgICAgICAgfSkpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9CiAgICB2YXIgQkFJX01BR0lDID0gMjE1NzgwNTA7CiAgICBmdW5jdGlvbiByb3VuZERvd24obiwgbXVsdGlwbGUpIHsKICAgICAgcmV0dXJuIG4gLSBuICUgbXVsdGlwbGU7CiAgICB9CiAgICBmdW5jdGlvbiByb3VuZFVwKG4sIG11bHRpcGxlKSB7CiAgICAgIHJldHVybiBuIC0gbiAlIG11bHRpcGxlICsgbXVsdGlwbGU7CiAgICB9CiAgICB2YXIgQkFJID0gLyogQF9fUFVSRV9fICovIGZ1bmN0aW9uKF9JbmRleEZpbGUpIHsKICAgICAgKDAsIF9pbmhlcml0czIuZGVmYXVsdCkoQkFJMiwgX0luZGV4RmlsZSk7CiAgICAgIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIyKEJBSTIpOwogICAgICBmdW5jdGlvbiBCQUkyKCkgewogICAgICAgICgwLCBfY2xhc3NDYWxsQ2hlY2syMi5kZWZhdWx0KSh0aGlzLCBCQUkyKTsKICAgICAgICByZXR1cm4gX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KICAgICAgKDAsIF9jcmVhdGVDbGFzczIyLmRlZmF1bHQpKEJBSTIsIFt7CiAgICAgICAga2V5OiAicGFyc2VQc2V1ZG9CaW4iLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBwYXJzZVBzZXVkb0JpbihieXRlcywgb2Zmc2V0KSB7CiAgICAgICAgICB2YXIgbGluZUNvdW50ID0gKDAsIF91dGlsLmxvbmdUb051bWJlcikoX2xvbmcuZGVmYXVsdC5mcm9tQnl0ZXNMRSgoMCwgX3NsaWNlLmRlZmF1bHQpKEFycmF5LnByb3RvdHlwZSkuY2FsbChieXRlcywgb2Zmc2V0ICsgMTYsIG9mZnNldCArIDI0KSwgdHJ1ZSkpOwogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgbGluZUNvdW50CiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIGtleTogImxpbmVDb3VudCIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgdmFyIF9saW5lQ291bnQgPSAoMCwgX2FzeW5jVG9HZW5lcmF0b3IyMi5kZWZhdWx0KSgvKiBAX19QVVJFX18gKi8gX3JlZ2VuZXJhdG9yMi5kZWZhdWx0Lm1hcmsoZnVuY3Rpb24gX2NhbGxlZShyZWZJZCkgewogICAgICAgICAgICB2YXIgb3B0cywgcHJvbSwgaW5kZXgsIHJldCwgX2FyZ3MgPSBhcmd1bWVudHM7CiAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3IyLmRlZmF1bHQud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICBvcHRzID0gX2FyZ3MubGVuZ3RoID4gMSAmJiBfYXJnc1sxXSAhPT0gdm9pZCAwID8gX2FyZ3NbMV0gOiB7fTsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZShvcHRzKTsKICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgIHByb20gPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgICAgIGluZGV4ID0gcHJvbS5pbmRpY2VzW3JlZklkXTsKICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXgpIHsKICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIC0xKTsKICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgIHJldCA9IGluZGV4LnN0YXRzIHx8IHt9OwogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHJldC5saW5lQ291bnQgPT09IHZvaWQgMCA/IC0xIDogcmV0LmxpbmVDb3VudCk7CiAgICAgICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZSwgdGhpcyk7CiAgICAgICAgICB9KSk7CiAgICAgICAgICBmdW5jdGlvbiBsaW5lQ291bnQoX3gpIHsKICAgICAgICAgICAgcmV0dXJuIF9saW5lQ291bnQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBsaW5lQ291bnQ7CiAgICAgICAgfSgpCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJfcGFyc2UiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbigpIHsKICAgICAgICAgIHZhciBfcGFyc2UyID0gKDAsIF9hc3luY1RvR2VuZXJhdG9yMjIuZGVmYXVsdCkoLyogQF9fUFVSRV9fICovIF9yZWdlbmVyYXRvcjIuZGVmYXVsdC5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgICAgICB2YXIgb3B0cywgZGF0YTIsIGJ5dGVzLCBkZXB0aCwgYmluTGltaXQsIGN1cnJPZmZzZXQsIGkyLCBiaW5Db3VudCwgc3RhdHMsIGJpbkluZGV4LCBqLCBiaW4sIGNodW5rQ291bnQsIGNodW5rcywgaywgdSwgdiwgbGluZWFyQ291bnQsIGxpbmVhckluZGV4LCBfaywgX2FyZ3MyID0gYXJndW1lbnRzOwogICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yMi5kZWZhdWx0LndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIG9wdHMgPSBfYXJnczIubGVuZ3RoID4gMCAmJiBfYXJnczJbMF0gIT09IHZvaWQgMCA/IF9hcmdzMlswXSA6IHt9OwogICAgICAgICAgICAgICAgICAgIGRhdGEyID0gewogICAgICAgICAgICAgICAgICAgICAgYmFpOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgbWF4QmxvY2tTaXplOiAxIDw8IDE2CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmlsZWhhbmRsZS5yZWFkRmlsZShvcHRzKTsKICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgIGJ5dGVzID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgaWYgKCEoYnl0ZXMucmVhZFVJbnQzMkxFKDApICE9PSBCQUlfTUFHSUMpKSB7CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJOb3QgYSBCQUkgZmlsZSIpOwogICAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICAgICAgZGF0YTIucmVmQ291bnQgPSBieXRlcy5yZWFkSW50MzJMRSg0KTsKICAgICAgICAgICAgICAgICAgICBkZXB0aCA9IDU7CiAgICAgICAgICAgICAgICAgICAgYmluTGltaXQgPSAoKDEgPDwgKGRlcHRoICsgMSkgKiAzKSAtIDEpIC8gNzsKICAgICAgICAgICAgICAgICAgICBkYXRhMi5pbmRpY2VzID0gbmV3IEFycmF5KGRhdGEyLnJlZkNvdW50KTsKICAgICAgICAgICAgICAgICAgICBjdXJyT2Zmc2V0ID0gODsKICAgICAgICAgICAgICAgICAgICBpMiA9IDA7CiAgICAgICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICAgICAgaWYgKCEoaTIgPCBkYXRhMi5yZWZDb3VudCkpIHsKICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNTA7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxNjsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gKDAsIF91dGlsLmFib3J0QnJlYWtQb2ludCkob3B0cy5zaWduYWwpOwogICAgICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgICAgIGJpbkNvdW50ID0gYnl0ZXMucmVhZEludDMyTEUoY3Vyck9mZnNldCk7CiAgICAgICAgICAgICAgICAgICAgc3RhdHMgPSB2b2lkIDA7CiAgICAgICAgICAgICAgICAgICAgY3Vyck9mZnNldCArPSA0OwogICAgICAgICAgICAgICAgICAgIGJpbkluZGV4ID0ge307CiAgICAgICAgICAgICAgICAgICAgaiA9IDA7CiAgICAgICAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgICAgICAgaWYgKCEoaiA8IGJpbkNvdW50KSkgewogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0MjsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBiaW4gPSBieXRlcy5yZWFkVUludDMyTEUoY3Vyck9mZnNldCk7CiAgICAgICAgICAgICAgICAgICAgY3Vyck9mZnNldCArPSA0OwogICAgICAgICAgICAgICAgICAgIGlmICghKGJpbiA9PT0gYmluTGltaXQgKyAxKSkgewogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzMDsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjdXJyT2Zmc2V0ICs9IDQ7CiAgICAgICAgICAgICAgICAgICAgc3RhdHMgPSB0aGlzLnBhcnNlUHNldWRvQmluKGJ5dGVzLCBjdXJyT2Zmc2V0KTsKICAgICAgICAgICAgICAgICAgICBjdXJyT2Zmc2V0ICs9IDMyOwogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIGNhc2UgMzA6CiAgICAgICAgICAgICAgICAgICAgaWYgKCEoYmluID4gYmluTGltaXQgKyAxKSkgewogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzNDsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoImJhaSBpbmRleCBjb250YWlucyB0b28gbWFueSBiaW5zLCBwbGVhc2UgdXNlIENTSSIpOwogICAgICAgICAgICAgICAgICBjYXNlIDM0OgogICAgICAgICAgICAgICAgICAgIGNodW5rQ291bnQgPSBieXRlcy5yZWFkSW50MzJMRShjdXJyT2Zmc2V0KTsKICAgICAgICAgICAgICAgICAgICBjdXJyT2Zmc2V0ICs9IDQ7CiAgICAgICAgICAgICAgICAgICAgY2h1bmtzID0gbmV3IEFycmF5KGNodW5rQ291bnQpOwogICAgICAgICAgICAgICAgICAgIGZvciAoayA9IDA7IGsgPCBjaHVua0NvdW50OyBrICs9IDEpIHsKICAgICAgICAgICAgICAgICAgICAgIHUgPSAoMCwgX3ZpcnR1YWxPZmZzZXQuZnJvbUJ5dGVzKShieXRlcywgY3Vyck9mZnNldCk7CiAgICAgICAgICAgICAgICAgICAgICB2ID0gKDAsIF92aXJ0dWFsT2Zmc2V0LmZyb21CeXRlcykoYnl0ZXMsIGN1cnJPZmZzZXQgKyA4KTsKICAgICAgICAgICAgICAgICAgICAgIGN1cnJPZmZzZXQgKz0gMTY7CiAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9maW5kRmlyc3REYXRhKGRhdGEyLCB1KTsKICAgICAgICAgICAgICAgICAgICAgIGNodW5rc1trXSA9IG5ldyBfY2h1bmsuZGVmYXVsdCh1LCB2LCBiaW4pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBiaW5JbmRleFtiaW5dID0gY2h1bmtzOwogICAgICAgICAgICAgICAgICBjYXNlIDM5OgogICAgICAgICAgICAgICAgICAgIGogKz0gMTsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDIxOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICBjYXNlIDQyOgogICAgICAgICAgICAgICAgICAgIGxpbmVhckNvdW50ID0gYnl0ZXMucmVhZEludDMyTEUoY3Vyck9mZnNldCk7CiAgICAgICAgICAgICAgICAgICAgY3Vyck9mZnNldCArPSA0OwogICAgICAgICAgICAgICAgICAgIGxpbmVhckluZGV4ID0gbmV3IEFycmF5KGxpbmVhckNvdW50KTsKICAgICAgICAgICAgICAgICAgICBmb3IgKF9rID0gMDsgX2sgPCBsaW5lYXJDb3VudDsgX2sgKz0gMSkgewogICAgICAgICAgICAgICAgICAgICAgbGluZWFySW5kZXhbX2tdID0gKDAsIF92aXJ0dWFsT2Zmc2V0LmZyb21CeXRlcykoYnl0ZXMsIGN1cnJPZmZzZXQpOwogICAgICAgICAgICAgICAgICAgICAgY3Vyck9mZnNldCArPSA4OwogICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZmluZEZpcnN0RGF0YShkYXRhMiwgbGluZWFySW5kZXhbX2tdKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZGF0YTIuaW5kaWNlc1tpMl0gPSB7CiAgICAgICAgICAgICAgICAgICAgICBiaW5JbmRleCwKICAgICAgICAgICAgICAgICAgICAgIGxpbmVhckluZGV4LAogICAgICAgICAgICAgICAgICAgICAgc3RhdHMKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICBjYXNlIDQ3OgogICAgICAgICAgICAgICAgICAgIGkyICs9IDE7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMzsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgY2FzZSA1MDoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgZGF0YTIpOwogICAgICAgICAgICAgICAgICBjYXNlIDUxOgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZTIsIHRoaXMpOwogICAgICAgICAgfSkpOwogICAgICAgICAgZnVuY3Rpb24gX3BhcnNlKCkgewogICAgICAgICAgICByZXR1cm4gX3BhcnNlMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIF9wYXJzZTsKICAgICAgICB9KCkKICAgICAgfSwgewogICAgICAgIGtleTogImluZGV4Q292IiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICB2YXIgX2luZGV4Q292ID0gKDAsIF9hc3luY1RvR2VuZXJhdG9yMjIuZGVmYXVsdCkoLyogQF9fUFVSRV9fICovIF9yZWdlbmVyYXRvcjIuZGVmYXVsdC5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKHNlcUlkLCBzdGFydCwgZW5kKSB7CiAgICAgICAgICAgIHZhciBvcHRzLCB2LCByYW5nZSwgaW5kZXhEYXRhLCBzZXFJZHgsIF9zZXFJZHgkbGluZWFySW5kZXgsIGxpbmVhckluZGV4LCBzdGF0cywgZSwgcywgZGVwdGhzLCB0b3RhbFNpemUsIGN1cnJlbnRQb3MsIGkyLCBqLCBfYXJnczMgPSBhcmd1bWVudHM7CiAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3IyLmRlZmF1bHQud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgb3B0cyA9IF9hcmdzMy5sZW5ndGggPiAzICYmIF9hcmdzM1szXSAhPT0gdm9pZCAwID8gX2FyZ3MzWzNdIDoge307CiAgICAgICAgICAgICAgICAgICAgdiA9IDE2Mzg0OwogICAgICAgICAgICAgICAgICAgIHJhbmdlID0gc3RhcnQgIT09IHZvaWQgMDsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2Uob3B0cyk7CiAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICBpbmRleERhdGEgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICAgICAgICBzZXFJZHggPSBpbmRleERhdGEuaW5kaWNlc1tzZXFJZF07CiAgICAgICAgICAgICAgICAgICAgaWYgKHNlcUlkeCkgewogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA5OwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCBbXSk7CiAgICAgICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgICAgICBfc2VxSWR4JGxpbmVhckluZGV4ID0gc2VxSWR4LmxpbmVhckluZGV4LCBsaW5lYXJJbmRleCA9IF9zZXFJZHgkbGluZWFySW5kZXggPT09IHZvaWQgMCA/IFtdIDogX3NlcUlkeCRsaW5lYXJJbmRleCwgc3RhdHMgPSBzZXFJZHguc3RhdHM7CiAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmVhckluZGV4Lmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMjsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgW10pOwogICAgICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgICAgIGUgPSBlbmQgIT09IHZvaWQgMCA/IHJvdW5kVXAoZW5kLCB2KSA6IChsaW5lYXJJbmRleC5sZW5ndGggLSAxKSAqIHY7CiAgICAgICAgICAgICAgICAgICAgcyA9IHN0YXJ0ICE9PSB2b2lkIDAgPyByb3VuZERvd24oc3RhcnQsIHYpIDogMDsKICAgICAgICAgICAgICAgICAgICBpZiAocmFuZ2UpIHsKICAgICAgICAgICAgICAgICAgICAgIGRlcHRocyA9IG5ldyBBcnJheSgoZSAtIHMpIC8gdik7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIGRlcHRocyA9IG5ldyBBcnJheShsaW5lYXJJbmRleC5sZW5ndGggLSAxKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdG90YWxTaXplID0gbGluZWFySW5kZXhbbGluZWFySW5kZXgubGVuZ3RoIC0gMV0uYmxvY2tQb3NpdGlvbjsKICAgICAgICAgICAgICAgICAgICBpZiAoIShlID4gKGxpbmVhckluZGV4Lmxlbmd0aCAtIDEpICogdikpIHsKICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTg7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJxdWVyeSBvdXRzaWRlIG9mIHJhbmdlIG9mIGxpbmVhciBpbmRleCIpOwogICAgICAgICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQb3MgPSBsaW5lYXJJbmRleFtzIC8gdl0uYmxvY2tQb3NpdGlvbjsKICAgICAgICAgICAgICAgICAgICBmb3IgKGkyID0gcyAvIHYsIGogPSAwOyBpMiA8IGUgLyB2OyBpMisrLCBqKyspIHsKICAgICAgICAgICAgICAgICAgICAgIGRlcHRoc1tqXSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgc2NvcmU6IGxpbmVhckluZGV4W2kyICsgMV0uYmxvY2tQb3NpdGlvbiAtIGN1cnJlbnRQb3MsCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0OiBpMiAqIHYsCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogaTIgKiB2ICsgdgogICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQb3MgPSBsaW5lYXJJbmRleFtpMiArIDFdLmJsb2NrUG9zaXRpb247CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCAoMCwgX21hcC5kZWZhdWx0KShkZXB0aHMpLmNhbGwoZGVwdGhzLCBmdW5jdGlvbihkKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZDIoX29iamVjdFNwcmVhZDIoe30sIGQpLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICBzY29yZTogZC5zY29yZSAqIHN0YXRzLmxpbmVDb3VudCAvIHRvdGFsU2l6ZQogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZTMsIHRoaXMpOwogICAgICAgICAgfSkpOwogICAgICAgICAgZnVuY3Rpb24gaW5kZXhDb3YoX3gyLCBfeDMsIF94NCkgewogICAgICAgICAgICByZXR1cm4gX2luZGV4Q292LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gaW5kZXhDb3Y7CiAgICAgICAgfSgpCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJyZWcyYmlucyIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlZzJiaW5zKGJlZywgZW5kKSB7CiAgICAgICAgICBlbmQgLT0gMTsKICAgICAgICAgIHJldHVybiBbWzAsIDBdLCBbMSArIChiZWcgPj4gMjYpLCAxICsgKGVuZCA+PiAyNildLCBbOSArIChiZWcgPj4gMjMpLCA5ICsgKGVuZCA+PiAyMyldLCBbNzMgKyAoYmVnID4+IDIwKSwgNzMgKyAoZW5kID4+IDIwKV0sIFs1ODUgKyAoYmVnID4+IDE3KSwgNTg1ICsgKGVuZCA+PiAxNyldLCBbNDY4MSArIChiZWcgPj4gMTQpLCA0NjgxICsgKGVuZCA+PiAxNCldXTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJibG9ja3NGb3JSYW5nZSIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgdmFyIF9ibG9ja3NGb3JSYW5nZSA9ICgwLCBfYXN5bmNUb0dlbmVyYXRvcjIyLmRlZmF1bHQpKC8qIEBfX1BVUkVfXyAqLyBfcmVnZW5lcmF0b3IyLmRlZmF1bHQubWFyayhmdW5jdGlvbiBfY2FsbGVlNChyZWZJZCwgbWluMiwgbWF4MikgewogICAgICAgICAgICB2YXIgb3B0cywgaW5kZXhEYXRhLCBiYSwgb3ZlcmxhcHBpbmdCaW5zLCBjaHVua3MsIF9pdGVyYXRvciwgX3N0ZXAsIF9zdGVwJHZhbHVlLCBzdGFydCwgZW5kLCBiaW4sIGJpbkNodW5rcywgYzIsIG5pbnR2LCBsb3dlc3QsIG1pbkxpbiwgbWF4TGluLCBpMiwgdnAsIF9hcmdzNCA9IGFyZ3VtZW50czsKICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvcjIuZGVmYXVsdC53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICBvcHRzID0gX2FyZ3M0Lmxlbmd0aCA+IDMgJiYgX2FyZ3M0WzNdICE9PSB2b2lkIDAgPyBfYXJnczRbM10gOiB7fTsKICAgICAgICAgICAgICAgICAgICBpZiAobWluMiA8IDApIHsKICAgICAgICAgICAgICAgICAgICAgIG1pbjIgPSAwOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2Uob3B0cyk7CiAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICBpbmRleERhdGEgPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXhEYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsIFtdKTsKICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgIGJhID0gaW5kZXhEYXRhLmluZGljZXNbcmVmSWRdOwogICAgICAgICAgICAgICAgICAgIGlmIChiYSkgewogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgW10pOwogICAgICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgICAgIG92ZXJsYXBwaW5nQmlucyA9IHRoaXMucmVnMmJpbnMobWluMiwgbWF4Mik7CiAgICAgICAgICAgICAgICAgICAgY2h1bmtzID0gW107CiAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIob3ZlcmxhcHBpbmdCaW5zKTsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTsgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF9zdGVwJHZhbHVlID0gKDAsIF9zbGljZWRUb0FycmF5MjIuZGVmYXVsdCkoX3N0ZXAudmFsdWUsIDIpLCBzdGFydCA9IF9zdGVwJHZhbHVlWzBdLCBlbmQgPSBfc3RlcCR2YWx1ZVsxXTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChiaW4gPSBzdGFydDsgYmluIDw9IGVuZDsgYmluKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYmEuYmluSW5kZXhbYmluXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmluQ2h1bmtzID0gYmEuYmluSW5kZXhbYmluXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoYzIgPSAwOyBjMiA8IGJpbkNodW5rcy5sZW5ndGg7ICsrYzIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmtzLnB1c2gobmV3IF9jaHVuay5kZWZhdWx0KGJpbkNodW5rc1tjMl0ubWludiwgYmluQ2h1bmtzW2MyXS5tYXh2LCBiaW4pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIyKSB7CiAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IuZShlcnIyKTsKICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgbmludHYgPSBiYS5saW5lYXJJbmRleC5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgbG93ZXN0ID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICBtaW5MaW4gPSBNYXRoLm1pbihtaW4yID4+IDE0LCBuaW50diAtIDEpOwogICAgICAgICAgICAgICAgICAgIG1heExpbiA9IE1hdGgubWluKG1heDIgPj4gMTQsIG5pbnR2IC0gMSk7CiAgICAgICAgICAgICAgICAgICAgZm9yIChpMiA9IG1pbkxpbjsgaTIgPD0gbWF4TGluOyArK2kyKSB7CiAgICAgICAgICAgICAgICAgICAgICB2cCA9IGJhLmxpbmVhckluZGV4W2kyXTsKICAgICAgICAgICAgICAgICAgICAgIGlmICh2cCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxvd2VzdCB8fCB2cC5jb21wYXJlVG8obG93ZXN0KSA8IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBsb3dlc3QgPSB2cDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgKDAsIF91dGlsLm9wdGltaXplQ2h1bmtzKShjaHVua3MsIGxvd2VzdCkpOwogICAgICAgICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZTQsIHRoaXMpOwogICAgICAgICAgfSkpOwogICAgICAgICAgZnVuY3Rpb24gYmxvY2tzRm9yUmFuZ2UoX3g1LCBfeDYsIF94NykgewogICAgICAgICAgICByZXR1cm4gX2Jsb2Nrc0ZvclJhbmdlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gYmxvY2tzRm9yUmFuZ2U7CiAgICAgICAgfSgpCiAgICAgIH1dKTsKICAgICAgcmV0dXJuIEJBSTI7CiAgICB9KF9pbmRleEZpbGUuZGVmYXVsdCk7CiAgICBleHBvcnRzLmRlZmF1bHQgPSBCQUk7CiAgfSkoYmFpKTsKICB2YXIgY3NpID0ge307CiAgdmFyIGludGVyb3BSZXF1aXJlV2lsZGNhcmQgPSB7IGV4cG9ydHM6IHt9IH07CiAgdmFyIGludGVybmFsTWV0YWRhdGEgPSB7IGV4cG9ydHM6IHt9IH07CiAgdmFyIGZhaWxzJDMgPSBmYWlscyRuOwogIHZhciBmcmVlemluZyA9ICFmYWlscyQzKGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIE9iamVjdC5pc0V4dGVuc2libGUoT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKHt9KSk7CiAgfSk7CiAgdmFyICQkZCA9IF9leHBvcnQ7CiAgdmFyIGhpZGRlbktleXMgPSBoaWRkZW5LZXlzJDY7CiAgdmFyIGlzT2JqZWN0JDQgPSBpc09iamVjdCRpOwogIHZhciBoYXMkMSA9IGhhcyRjOwogIHZhciBkZWZpbmVQcm9wZXJ0eSQyID0gb2JqZWN0RGVmaW5lUHJvcGVydHkuZjsKICB2YXIgZ2V0T3duUHJvcGVydHlOYW1lc01vZHVsZSA9IG9iamVjdEdldE93blByb3BlcnR5TmFtZXM7CiAgdmFyIGdldE93blByb3BlcnR5TmFtZXNFeHRlcm5hbE1vZHVsZSA9IG9iamVjdEdldE93blByb3BlcnR5TmFtZXNFeHRlcm5hbDsKICB2YXIgdWlkID0gdWlkJDQ7CiAgdmFyIEZSRUVaSU5HID0gZnJlZXppbmc7CiAgdmFyIFJFUVVJUkVEID0gZmFsc2U7CiAgdmFyIE1FVEFEQVRBID0gdWlkKCJtZXRhIik7CiAgdmFyIGlkJDEgPSAwOwogIHZhciBpc0V4dGVuc2libGUkMSA9IE9iamVjdC5pc0V4dGVuc2libGUgfHwgZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9OwogIHZhciBzZXRNZXRhZGF0YSA9IGZ1bmN0aW9uKGl0KSB7CiAgICBkZWZpbmVQcm9wZXJ0eSQyKGl0LCBNRVRBREFUQSwgeyB2YWx1ZTogewogICAgICBvYmplY3RJRDogIk8iICsgaWQkMSsrLAogICAgICB3ZWFrRGF0YToge30KICAgIH0gfSk7CiAgfTsKICB2YXIgZmFzdEtleSA9IGZ1bmN0aW9uKGl0LCBjcmVhdGUyKSB7CiAgICBpZiAoIWlzT2JqZWN0JDQoaXQpKQogICAgICByZXR1cm4gdHlwZW9mIGl0ID09ICJzeW1ib2wiID8gaXQgOiAodHlwZW9mIGl0ID09ICJzdHJpbmciID8gIlMiIDogIlAiKSArIGl0OwogICAgaWYgKCFoYXMkMShpdCwgTUVUQURBVEEpKSB7CiAgICAgIGlmICghaXNFeHRlbnNpYmxlJDEoaXQpKQogICAgICAgIHJldHVybiAiRiI7CiAgICAgIGlmICghY3JlYXRlMikKICAgICAgICByZXR1cm4gIkUiOwogICAgICBzZXRNZXRhZGF0YShpdCk7CiAgICB9CiAgICByZXR1cm4gaXRbTUVUQURBVEFdLm9iamVjdElEOwogIH07CiAgdmFyIGdldFdlYWtEYXRhJDEgPSBmdW5jdGlvbihpdCwgY3JlYXRlMikgewogICAgaWYgKCFoYXMkMShpdCwgTUVUQURBVEEpKSB7CiAgICAgIGlmICghaXNFeHRlbnNpYmxlJDEoaXQpKQogICAgICAgIHJldHVybiB0cnVlOwogICAgICBpZiAoIWNyZWF0ZTIpCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICBzZXRNZXRhZGF0YShpdCk7CiAgICB9CiAgICByZXR1cm4gaXRbTUVUQURBVEFdLndlYWtEYXRhOwogIH07CiAgdmFyIG9uRnJlZXplID0gZnVuY3Rpb24oaXQpIHsKICAgIGlmIChGUkVFWklORyAmJiBSRVFVSVJFRCAmJiBpc0V4dGVuc2libGUkMShpdCkgJiYgIWhhcyQxKGl0LCBNRVRBREFUQSkpCiAgICAgIHNldE1ldGFkYXRhKGl0KTsKICAgIHJldHVybiBpdDsKICB9OwogIHZhciBlbmFibGUgPSBmdW5jdGlvbigpIHsKICAgIG1ldGEuZW5hYmxlID0gZnVuY3Rpb24oKSB7CiAgICB9OwogICAgUkVRVUlSRUQgPSB0cnVlOwogICAgdmFyIGdldE93blByb3BlcnR5TmFtZXMgPSBnZXRPd25Qcm9wZXJ0eU5hbWVzTW9kdWxlLmY7CiAgICB2YXIgc3BsaWNlID0gW10uc3BsaWNlOwogICAgdmFyIHRlc3QyID0ge307CiAgICB0ZXN0MltNRVRBREFUQV0gPSAxOwogICAgaWYgKGdldE93blByb3BlcnR5TmFtZXModGVzdDIpLmxlbmd0aCkgewogICAgICBnZXRPd25Qcm9wZXJ0eU5hbWVzTW9kdWxlLmYgPSBmdW5jdGlvbihpdCkgewogICAgICAgIHZhciByZXN1bHQgPSBnZXRPd25Qcm9wZXJ0eU5hbWVzKGl0KTsKICAgICAgICBmb3IgKHZhciBpMiA9IDAsIGxlbmd0aCA9IHJlc3VsdC5sZW5ndGg7IGkyIDwgbGVuZ3RoOyBpMisrKSB7CiAgICAgICAgICBpZiAocmVzdWx0W2kyXSA9PT0gTUVUQURBVEEpIHsKICAgICAgICAgICAgc3BsaWNlLmNhbGwocmVzdWx0LCBpMiwgMSk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICB9OwogICAgICAkJGQoeyB0YXJnZXQ6ICJPYmplY3QiLCBzdGF0OiB0cnVlLCBmb3JjZWQ6IHRydWUgfSwgewogICAgICAgIGdldE93blByb3BlcnR5TmFtZXM6IGdldE93blByb3BlcnR5TmFtZXNFeHRlcm5hbE1vZHVsZS5mCiAgICAgIH0pOwogICAgfQogIH07CiAgdmFyIG1ldGEgPSBpbnRlcm5hbE1ldGFkYXRhLmV4cG9ydHMgPSB7CiAgICBlbmFibGUsCiAgICBmYXN0S2V5LAogICAgZ2V0V2Vha0RhdGE6IGdldFdlYWtEYXRhJDEsCiAgICBvbkZyZWV6ZQogIH07CiAgaGlkZGVuS2V5c1tNRVRBREFUQV0gPSB0cnVlOwogIHZhciAkJGMgPSBfZXhwb3J0OwogIHZhciBnbG9iYWwkMyA9IGdsb2JhbCRvOwogIHZhciBJbnRlcm5hbE1ldGFkYXRhTW9kdWxlJDEgPSBpbnRlcm5hbE1ldGFkYXRhLmV4cG9ydHM7CiAgdmFyIGZhaWxzJDIgPSBmYWlscyRuOwogIHZhciBjcmVhdGVOb25FbnVtZXJhYmxlUHJvcGVydHkgPSBjcmVhdGVOb25FbnVtZXJhYmxlUHJvcGVydHkkNzsKICB2YXIgaXRlcmF0ZSQyID0gaXRlcmF0ZSQ3OwogIHZhciBhbkluc3RhbmNlJDEgPSBhbkluc3RhbmNlJDM7CiAgdmFyIGlzQ2FsbGFibGUkMSA9IGlzQ2FsbGFibGUkbDsKICB2YXIgaXNPYmplY3QkMyA9IGlzT2JqZWN0JGk7CiAgdmFyIHNldFRvU3RyaW5nVGFnID0gc2V0VG9TdHJpbmdUYWckNjsKICB2YXIgZGVmaW5lUHJvcGVydHkkMSA9IG9iamVjdERlZmluZVByb3BlcnR5LmY7CiAgdmFyIGZvckVhY2ggPSBhcnJheUl0ZXJhdGlvbi5mb3JFYWNoOwogIHZhciBERVNDUklQVE9SUyQxID0gZGVzY3JpcHRvcnM7CiAgdmFyIEludGVybmFsU3RhdGVNb2R1bGUkMSA9IGludGVybmFsU3RhdGU7CiAgdmFyIHNldEludGVybmFsU3RhdGUkMSA9IEludGVybmFsU3RhdGVNb2R1bGUkMS5zZXQ7CiAgdmFyIGludGVybmFsU3RhdGVHZXR0ZXJGb3IkMSA9IEludGVybmFsU3RhdGVNb2R1bGUkMS5nZXR0ZXJGb3I7CiAgdmFyIGNvbGxlY3Rpb24kMSA9IGZ1bmN0aW9uKENPTlNUUlVDVE9SX05BTUUsIHdyYXBwZXIyLCBjb21tb24yKSB7CiAgICB2YXIgSVNfTUFQID0gQ09OU1RSVUNUT1JfTkFNRS5pbmRleE9mKCJNYXAiKSAhPT0gLTE7CiAgICB2YXIgSVNfV0VBSyA9IENPTlNUUlVDVE9SX05BTUUuaW5kZXhPZigiV2VhayIpICE9PSAtMTsKICAgIHZhciBBRERFUiA9IElTX01BUCA/ICJzZXQiIDogImFkZCI7CiAgICB2YXIgTmF0aXZlQ29uc3RydWN0b3IgPSBnbG9iYWwkM1tDT05TVFJVQ1RPUl9OQU1FXTsKICAgIHZhciBOYXRpdmVQcm90b3R5cGUgPSBOYXRpdmVDb25zdHJ1Y3RvciAmJiBOYXRpdmVDb25zdHJ1Y3Rvci5wcm90b3R5cGU7CiAgICB2YXIgZXhwb3J0ZWQgPSB7fTsKICAgIHZhciBDb25zdHJ1Y3RvcjsKICAgIGlmICghREVTQ1JJUFRPUlMkMSB8fCAhaXNDYWxsYWJsZSQxKE5hdGl2ZUNvbnN0cnVjdG9yKSB8fCAhKElTX1dFQUsgfHwgTmF0aXZlUHJvdG90eXBlLmZvckVhY2ggJiYgIWZhaWxzJDIoZnVuY3Rpb24oKSB7CiAgICAgIG5ldyBOYXRpdmVDb25zdHJ1Y3RvcigpLmVudHJpZXMoKS5uZXh0KCk7CiAgICB9KSkpIHsKICAgICAgQ29uc3RydWN0b3IgPSBjb21tb24yLmdldENvbnN0cnVjdG9yKHdyYXBwZXIyLCBDT05TVFJVQ1RPUl9OQU1FLCBJU19NQVAsIEFEREVSKTsKICAgICAgSW50ZXJuYWxNZXRhZGF0YU1vZHVsZSQxLmVuYWJsZSgpOwogICAgfSBlbHNlIHsKICAgICAgQ29uc3RydWN0b3IgPSB3cmFwcGVyMihmdW5jdGlvbih0YXJnZXQsIGl0ZXJhYmxlKSB7CiAgICAgICAgc2V0SW50ZXJuYWxTdGF0ZSQxKGFuSW5zdGFuY2UkMSh0YXJnZXQsIENvbnN0cnVjdG9yLCBDT05TVFJVQ1RPUl9OQU1FKSwgewogICAgICAgICAgdHlwZTogQ09OU1RSVUNUT1JfTkFNRSwKICAgICAgICAgIGNvbGxlY3Rpb246IG5ldyBOYXRpdmVDb25zdHJ1Y3RvcigpCiAgICAgICAgfSk7CiAgICAgICAgaWYgKGl0ZXJhYmxlICE9IHZvaWQgMCkKICAgICAgICAgIGl0ZXJhdGUkMihpdGVyYWJsZSwgdGFyZ2V0W0FEREVSXSwgeyB0aGF0OiB0YXJnZXQsIEFTX0VOVFJJRVM6IElTX01BUCB9KTsKICAgICAgfSk7CiAgICAgIHZhciBnZXRJbnRlcm5hbFN0YXRlMiA9IGludGVybmFsU3RhdGVHZXR0ZXJGb3IkMShDT05TVFJVQ1RPUl9OQU1FKTsKICAgICAgZm9yRWFjaChbImFkZCIsICJjbGVhciIsICJkZWxldGUiLCAiZm9yRWFjaCIsICJnZXQiLCAiaGFzIiwgInNldCIsICJrZXlzIiwgInZhbHVlcyIsICJlbnRyaWVzIl0sIGZ1bmN0aW9uKEtFWSkgewogICAgICAgIHZhciBJU19BRERFUiA9IEtFWSA9PSAiYWRkIiB8fCBLRVkgPT0gInNldCI7CiAgICAgICAgaWYgKEtFWSBpbiBOYXRpdmVQcm90b3R5cGUgJiYgIShJU19XRUFLICYmIEtFWSA9PSAiY2xlYXIiKSkgewogICAgICAgICAgY3JlYXRlTm9uRW51bWVyYWJsZVByb3BlcnR5KENvbnN0cnVjdG9yLnByb3RvdHlwZSwgS0VZLCBmdW5jdGlvbihhLCBiKSB7CiAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uMiA9IGdldEludGVybmFsU3RhdGUyKHRoaXMpLmNvbGxlY3Rpb247CiAgICAgICAgICAgIGlmICghSVNfQURERVIgJiYgSVNfV0VBSyAmJiAhaXNPYmplY3QkMyhhKSkKICAgICAgICAgICAgICByZXR1cm4gS0VZID09ICJnZXQiID8gdm9pZCAwIDogZmFsc2U7CiAgICAgICAgICAgIHZhciByZXN1bHQgPSBjb2xsZWN0aW9uMltLRVldKGEgPT09IDAgPyAwIDogYSwgYik7CiAgICAgICAgICAgIHJldHVybiBJU19BRERFUiA/IHRoaXMgOiByZXN1bHQ7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICBJU19XRUFLIHx8IGRlZmluZVByb3BlcnR5JDEoQ29uc3RydWN0b3IucHJvdG90eXBlLCAic2l6ZSIsIHsKICAgICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgICAgIHJldHVybiBnZXRJbnRlcm5hbFN0YXRlMih0aGlzKS5jb2xsZWN0aW9uLnNpemU7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICAgIHNldFRvU3RyaW5nVGFnKENvbnN0cnVjdG9yLCBDT05TVFJVQ1RPUl9OQU1FLCBmYWxzZSwgdHJ1ZSk7CiAgICBleHBvcnRlZFtDT05TVFJVQ1RPUl9OQU1FXSA9IENvbnN0cnVjdG9yOwogICAgJCRjKHsgZ2xvYmFsOiB0cnVlLCBmb3JjZWQ6IHRydWUgfSwgZXhwb3J0ZWQpOwogICAgaWYgKCFJU19XRUFLKQogICAgICBjb21tb24yLnNldFN0cm9uZyhDb25zdHJ1Y3RvciwgQ09OU1RSVUNUT1JfTkFNRSwgSVNfTUFQKTsKICAgIHJldHVybiBDb25zdHJ1Y3RvcjsKICB9OwogIHZhciByZWRlZmluZUFsbCQxID0gcmVkZWZpbmVBbGwkMzsKICB2YXIgZ2V0V2Vha0RhdGEgPSBpbnRlcm5hbE1ldGFkYXRhLmV4cG9ydHMuZ2V0V2Vha0RhdGE7CiAgdmFyIGFuT2JqZWN0JDQgPSBhbk9iamVjdCRpOwogIHZhciBpc09iamVjdCQyID0gaXNPYmplY3QkaTsKICB2YXIgYW5JbnN0YW5jZSA9IGFuSW5zdGFuY2UkMzsKICB2YXIgaXRlcmF0ZSQxID0gaXRlcmF0ZSQ3OwogIHZhciBBcnJheUl0ZXJhdGlvbk1vZHVsZSA9IGFycmF5SXRlcmF0aW9uOwogIHZhciAkaGFzID0gaGFzJGM7CiAgdmFyIEludGVybmFsU3RhdGVNb2R1bGUgPSBpbnRlcm5hbFN0YXRlOwogIHZhciBzZXRJbnRlcm5hbFN0YXRlID0gSW50ZXJuYWxTdGF0ZU1vZHVsZS5zZXQ7CiAgdmFyIGludGVybmFsU3RhdGVHZXR0ZXJGb3IgPSBJbnRlcm5hbFN0YXRlTW9kdWxlLmdldHRlckZvcjsKICB2YXIgZmluZCA9IEFycmF5SXRlcmF0aW9uTW9kdWxlLmZpbmQ7CiAgdmFyIGZpbmRJbmRleCA9IEFycmF5SXRlcmF0aW9uTW9kdWxlLmZpbmRJbmRleDsKICB2YXIgaWQgPSAwOwogIHZhciB1bmNhdWdodEZyb3plblN0b3JlID0gZnVuY3Rpb24oc3RvcmUyKSB7CiAgICByZXR1cm4gc3RvcmUyLmZyb3plbiB8fCAoc3RvcmUyLmZyb3plbiA9IG5ldyBVbmNhdWdodEZyb3plblN0b3JlKCkpOwogIH07CiAgdmFyIFVuY2F1Z2h0RnJvemVuU3RvcmUgPSBmdW5jdGlvbigpIHsKICAgIHRoaXMuZW50cmllcyA9IFtdOwogIH07CiAgdmFyIGZpbmRVbmNhdWdodEZyb3plbiA9IGZ1bmN0aW9uKHN0b3JlMiwga2V5KSB7CiAgICByZXR1cm4gZmluZChzdG9yZTIuZW50cmllcywgZnVuY3Rpb24oaXQpIHsKICAgICAgcmV0dXJuIGl0WzBdID09PSBrZXk7CiAgICB9KTsKICB9OwogIFVuY2F1Z2h0RnJvemVuU3RvcmUucHJvdG90eXBlID0gewogICAgZ2V0OiBmdW5jdGlvbihrZXkpIHsKICAgICAgdmFyIGVudHJ5ID0gZmluZFVuY2F1Z2h0RnJvemVuKHRoaXMsIGtleSk7CiAgICAgIGlmIChlbnRyeSkKICAgICAgICByZXR1cm4gZW50cnlbMV07CiAgICB9LAogICAgaGFzOiBmdW5jdGlvbihrZXkpIHsKICAgICAgcmV0dXJuICEhZmluZFVuY2F1Z2h0RnJvemVuKHRoaXMsIGtleSk7CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbihrZXksIHZhbHVlKSB7CiAgICAgIHZhciBlbnRyeSA9IGZpbmRVbmNhdWdodEZyb3plbih0aGlzLCBrZXkpOwogICAgICBpZiAoZW50cnkpCiAgICAgICAgZW50cnlbMV0gPSB2YWx1ZTsKICAgICAgZWxzZQogICAgICAgIHRoaXMuZW50cmllcy5wdXNoKFtrZXksIHZhbHVlXSk7CiAgICB9LAogICAgImRlbGV0ZSI6IGZ1bmN0aW9uKGtleSkgewogICAgICB2YXIgaW5kZXggPSBmaW5kSW5kZXgodGhpcy5lbnRyaWVzLCBmdW5jdGlvbihpdCkgewogICAgICAgIHJldHVybiBpdFswXSA9PT0ga2V5OwogICAgICB9KTsKICAgICAgaWYgKH5pbmRleCkKICAgICAgICB0aGlzLmVudHJpZXMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgcmV0dXJuICEhfmluZGV4OwogICAgfQogIH07CiAgdmFyIGNvbGxlY3Rpb25XZWFrJDEgPSB7CiAgICBnZXRDb25zdHJ1Y3RvcjogZnVuY3Rpb24od3JhcHBlcjIsIENPTlNUUlVDVE9SX05BTUUsIElTX01BUCwgQURERVIpIHsKICAgICAgdmFyIEMgPSB3cmFwcGVyMihmdW5jdGlvbih0aGF0LCBpdGVyYWJsZSkgewogICAgICAgIGFuSW5zdGFuY2UodGhhdCwgQywgQ09OU1RSVUNUT1JfTkFNRSk7CiAgICAgICAgc2V0SW50ZXJuYWxTdGF0ZSh0aGF0LCB7CiAgICAgICAgICB0eXBlOiBDT05TVFJVQ1RPUl9OQU1FLAogICAgICAgICAgaWQ6IGlkKyssCiAgICAgICAgICBmcm96ZW46IHZvaWQgMAogICAgICAgIH0pOwogICAgICAgIGlmIChpdGVyYWJsZSAhPSB2b2lkIDApCiAgICAgICAgICBpdGVyYXRlJDEoaXRlcmFibGUsIHRoYXRbQURERVJdLCB7IHRoYXQsIEFTX0VOVFJJRVM6IElTX01BUCB9KTsKICAgICAgfSk7CiAgICAgIHZhciBnZXRJbnRlcm5hbFN0YXRlMiA9IGludGVybmFsU3RhdGVHZXR0ZXJGb3IoQ09OU1RSVUNUT1JfTkFNRSk7CiAgICAgIHZhciBkZWZpbmUgPSBmdW5jdGlvbih0aGF0LCBrZXksIHZhbHVlKSB7CiAgICAgICAgdmFyIHN0YXRlID0gZ2V0SW50ZXJuYWxTdGF0ZTIodGhhdCk7CiAgICAgICAgdmFyIGRhdGEyID0gZ2V0V2Vha0RhdGEoYW5PYmplY3QkNChrZXkpLCB0cnVlKTsKICAgICAgICBpZiAoZGF0YTIgPT09IHRydWUpCiAgICAgICAgICB1bmNhdWdodEZyb3plblN0b3JlKHN0YXRlKS5zZXQoa2V5LCB2YWx1ZSk7CiAgICAgICAgZWxzZQogICAgICAgICAgZGF0YTJbc3RhdGUuaWRdID0gdmFsdWU7CiAgICAgICAgcmV0dXJuIHRoYXQ7CiAgICAgIH07CiAgICAgIHJlZGVmaW5lQWxsJDEoQy5wcm90b3R5cGUsIHsKICAgICAgICAiZGVsZXRlIjogZnVuY3Rpb24oa2V5KSB7CiAgICAgICAgICB2YXIgc3RhdGUgPSBnZXRJbnRlcm5hbFN0YXRlMih0aGlzKTsKICAgICAgICAgIGlmICghaXNPYmplY3QkMihrZXkpKQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB2YXIgZGF0YTIgPSBnZXRXZWFrRGF0YShrZXkpOwogICAgICAgICAgaWYgKGRhdGEyID09PSB0cnVlKQogICAgICAgICAgICByZXR1cm4gdW5jYXVnaHRGcm96ZW5TdG9yZShzdGF0ZSlbImRlbGV0ZSJdKGtleSk7CiAgICAgICAgICByZXR1cm4gZGF0YTIgJiYgJGhhcyhkYXRhMiwgc3RhdGUuaWQpICYmIGRlbGV0ZSBkYXRhMltzdGF0ZS5pZF07CiAgICAgICAgfSwKICAgICAgICBoYXM6IGZ1bmN0aW9uIGhhczIoa2V5KSB7CiAgICAgICAgICB2YXIgc3RhdGUgPSBnZXRJbnRlcm5hbFN0YXRlMih0aGlzKTsKICAgICAgICAgIGlmICghaXNPYmplY3QkMihrZXkpKQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB2YXIgZGF0YTIgPSBnZXRXZWFrRGF0YShrZXkpOwogICAgICAgICAgaWYgKGRhdGEyID09PSB0cnVlKQogICAgICAgICAgICByZXR1cm4gdW5jYXVnaHRGcm96ZW5TdG9yZShzdGF0ZSkuaGFzKGtleSk7CiAgICAgICAgICByZXR1cm4gZGF0YTIgJiYgJGhhcyhkYXRhMiwgc3RhdGUuaWQpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJlZGVmaW5lQWxsJDEoQy5wcm90b3R5cGUsIElTX01BUCA/IHsKICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldDIoa2V5KSB7CiAgICAgICAgICB2YXIgc3RhdGUgPSBnZXRJbnRlcm5hbFN0YXRlMih0aGlzKTsKICAgICAgICAgIGlmIChpc09iamVjdCQyKGtleSkpIHsKICAgICAgICAgICAgdmFyIGRhdGEyID0gZ2V0V2Vha0RhdGEoa2V5KTsKICAgICAgICAgICAgaWYgKGRhdGEyID09PSB0cnVlKQogICAgICAgICAgICAgIHJldHVybiB1bmNhdWdodEZyb3plblN0b3JlKHN0YXRlKS5nZXQoa2V5KTsKICAgICAgICAgICAgcmV0dXJuIGRhdGEyID8gZGF0YTJbc3RhdGUuaWRdIDogdm9pZCAwOwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQyKGtleSwgdmFsdWUpIHsKICAgICAgICAgIHJldHVybiBkZWZpbmUodGhpcywga2V5LCB2YWx1ZSk7CiAgICAgICAgfQogICAgICB9IDogewogICAgICAgIGFkZDogZnVuY3Rpb24gYWRkKHZhbHVlKSB7CiAgICAgICAgICByZXR1cm4gZGVmaW5lKHRoaXMsIHZhbHVlLCB0cnVlKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gQzsKICAgIH0KICB9OwogIHZhciBnbG9iYWwkMiA9IGdsb2JhbCRvOwogIHZhciByZWRlZmluZUFsbCA9IHJlZGVmaW5lQWxsJDM7CiAgdmFyIEludGVybmFsTWV0YWRhdGFNb2R1bGUgPSBpbnRlcm5hbE1ldGFkYXRhLmV4cG9ydHM7CiAgdmFyIGNvbGxlY3Rpb24gPSBjb2xsZWN0aW9uJDE7CiAgdmFyIGNvbGxlY3Rpb25XZWFrID0gY29sbGVjdGlvbldlYWskMTsKICB2YXIgaXNPYmplY3QkMSA9IGlzT2JqZWN0JGk7CiAgdmFyIGVuZm9yY2VJdGVybmFsU3RhdGUgPSBpbnRlcm5hbFN0YXRlLmVuZm9yY2U7CiAgdmFyIE5BVElWRV9XRUFLX01BUCA9IG5hdGl2ZVdlYWtNYXA7CiAgdmFyIElTX0lFMTEgPSAhZ2xvYmFsJDIuQWN0aXZlWE9iamVjdCAmJiAiQWN0aXZlWE9iamVjdCIgaW4gZ2xvYmFsJDI7CiAgdmFyIGlzRXh0ZW5zaWJsZSA9IE9iamVjdC5pc0V4dGVuc2libGU7CiAgdmFyIEludGVybmFsV2Vha01hcDsKICB2YXIgd3JhcHBlciA9IGZ1bmN0aW9uKGluaXQyKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gV2Vha01hcDIoKSB7CiAgICAgIHJldHVybiBpbml0Mih0aGlzLCBhcmd1bWVudHMubGVuZ3RoID8gYXJndW1lbnRzWzBdIDogdm9pZCAwKTsKICAgIH07CiAgfTsKICB2YXIgJFdlYWtNYXAgPSBjb2xsZWN0aW9uKCJXZWFrTWFwIiwgd3JhcHBlciwgY29sbGVjdGlvbldlYWspOwogIGlmIChOQVRJVkVfV0VBS19NQVAgJiYgSVNfSUUxMSkgewogICAgSW50ZXJuYWxXZWFrTWFwID0gY29sbGVjdGlvbldlYWsuZ2V0Q29uc3RydWN0b3Iod3JhcHBlciwgIldlYWtNYXAiLCB0cnVlKTsKICAgIEludGVybmFsTWV0YWRhdGFNb2R1bGUuZW5hYmxlKCk7CiAgICB2YXIgV2Vha01hcFByb3RvdHlwZSA9ICRXZWFrTWFwLnByb3RvdHlwZTsKICAgIHZhciBuYXRpdmVEZWxldGUgPSBXZWFrTWFwUHJvdG90eXBlWyJkZWxldGUiXTsKICAgIHZhciBuYXRpdmVIYXMgPSBXZWFrTWFwUHJvdG90eXBlLmhhczsKICAgIHZhciBuYXRpdmVHZXQgPSBXZWFrTWFwUHJvdG90eXBlLmdldDsKICAgIHZhciBuYXRpdmVTZXQgPSBXZWFrTWFwUHJvdG90eXBlLnNldDsKICAgIHJlZGVmaW5lQWxsKFdlYWtNYXBQcm90b3R5cGUsIHsKICAgICAgImRlbGV0ZSI6IGZ1bmN0aW9uKGtleSkgewogICAgICAgIGlmIChpc09iamVjdCQxKGtleSkgJiYgIWlzRXh0ZW5zaWJsZShrZXkpKSB7CiAgICAgICAgICB2YXIgc3RhdGUgPSBlbmZvcmNlSXRlcm5hbFN0YXRlKHRoaXMpOwogICAgICAgICAgaWYgKCFzdGF0ZS5mcm96ZW4pCiAgICAgICAgICAgIHN0YXRlLmZyb3plbiA9IG5ldyBJbnRlcm5hbFdlYWtNYXAoKTsKICAgICAgICAgIHJldHVybiBuYXRpdmVEZWxldGUuY2FsbCh0aGlzLCBrZXkpIHx8IHN0YXRlLmZyb3plblsiZGVsZXRlIl0oa2V5KTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG5hdGl2ZURlbGV0ZS5jYWxsKHRoaXMsIGtleSk7CiAgICAgIH0sCiAgICAgIGhhczogZnVuY3Rpb24gaGFzMihrZXkpIHsKICAgICAgICBpZiAoaXNPYmplY3QkMShrZXkpICYmICFpc0V4dGVuc2libGUoa2V5KSkgewogICAgICAgICAgdmFyIHN0YXRlID0gZW5mb3JjZUl0ZXJuYWxTdGF0ZSh0aGlzKTsKICAgICAgICAgIGlmICghc3RhdGUuZnJvemVuKQogICAgICAgICAgICBzdGF0ZS5mcm96ZW4gPSBuZXcgSW50ZXJuYWxXZWFrTWFwKCk7CiAgICAgICAgICByZXR1cm4gbmF0aXZlSGFzLmNhbGwodGhpcywga2V5KSB8fCBzdGF0ZS5mcm96ZW4uaGFzKGtleSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBuYXRpdmVIYXMuY2FsbCh0aGlzLCBrZXkpOwogICAgICB9LAogICAgICBnZXQ6IGZ1bmN0aW9uIGdldDIoa2V5KSB7CiAgICAgICAgaWYgKGlzT2JqZWN0JDEoa2V5KSAmJiAhaXNFeHRlbnNpYmxlKGtleSkpIHsKICAgICAgICAgIHZhciBzdGF0ZSA9IGVuZm9yY2VJdGVybmFsU3RhdGUodGhpcyk7CiAgICAgICAgICBpZiAoIXN0YXRlLmZyb3plbikKICAgICAgICAgICAgc3RhdGUuZnJvemVuID0gbmV3IEludGVybmFsV2Vha01hcCgpOwogICAgICAgICAgcmV0dXJuIG5hdGl2ZUhhcy5jYWxsKHRoaXMsIGtleSkgPyBuYXRpdmVHZXQuY2FsbCh0aGlzLCBrZXkpIDogc3RhdGUuZnJvemVuLmdldChrZXkpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbmF0aXZlR2V0LmNhbGwodGhpcywga2V5KTsKICAgICAgfSwKICAgICAgc2V0OiBmdW5jdGlvbiBzZXQyKGtleSwgdmFsdWUpIHsKICAgICAgICBpZiAoaXNPYmplY3QkMShrZXkpICYmICFpc0V4dGVuc2libGUoa2V5KSkgewogICAgICAgICAgdmFyIHN0YXRlID0gZW5mb3JjZUl0ZXJuYWxTdGF0ZSh0aGlzKTsKICAgICAgICAgIGlmICghc3RhdGUuZnJvemVuKQogICAgICAgICAgICBzdGF0ZS5mcm96ZW4gPSBuZXcgSW50ZXJuYWxXZWFrTWFwKCk7CiAgICAgICAgICBuYXRpdmVIYXMuY2FsbCh0aGlzLCBrZXkpID8gbmF0aXZlU2V0LmNhbGwodGhpcywga2V5LCB2YWx1ZSkgOiBzdGF0ZS5mcm96ZW4uc2V0KGtleSwgdmFsdWUpOwogICAgICAgIH0gZWxzZQogICAgICAgICAgbmF0aXZlU2V0LmNhbGwodGhpcywga2V5LCB2YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KICAgIH0pOwogIH0KICB2YXIgcGF0aCQzID0gcGF0aCRuOwogIHZhciB3ZWFrTWFwJDMgPSBwYXRoJDMuV2Vha01hcDsKICB2YXIgcGFyZW50JGYgPSB3ZWFrTWFwJDM7CiAgdmFyIHdlYWtNYXAkMiA9IHBhcmVudCRmOwogIHZhciBhbk9iamVjdCQzID0gYW5PYmplY3QkaTsKICB2YXIgbWFwRW1wbGFjZSA9IGZ1bmN0aW9uIGVtcGxhY2Uoa2V5LCBoYW5kbGVyKSB7CiAgICB2YXIgbWFwMiA9IGFuT2JqZWN0JDModGhpcyk7CiAgICB2YXIgdmFsdWUgPSBtYXAyLmhhcyhrZXkpICYmICJ1cGRhdGUiIGluIGhhbmRsZXIgPyBoYW5kbGVyLnVwZGF0ZShtYXAyLmdldChrZXkpLCBrZXksIG1hcDIpIDogaGFuZGxlci5pbnNlcnQoa2V5LCBtYXAyKTsKICAgIG1hcDIuc2V0KGtleSwgdmFsdWUpOwogICAgcmV0dXJuIHZhbHVlOwogIH07CiAgdmFyICQkYiA9IF9leHBvcnQ7CiAgdmFyIElTX1BVUkUkMiA9IGlzUHVyZTsKICB2YXIgJGVtcGxhY2UgPSBtYXBFbXBsYWNlOwogICQkYih7IHRhcmdldDogIldlYWtNYXAiLCBwcm90bzogdHJ1ZSwgcmVhbDogdHJ1ZSwgZm9yY2VkOiBJU19QVVJFJDIgfSwgewogICAgZW1wbGFjZTogJGVtcGxhY2UKICB9KTsKICB2YXIgYUNhbGxhYmxlJDIgPSBhQ2FsbGFibGUkYzsKICB2YXIgYUNvbnN0cnVjdG9yID0gYUNvbnN0cnVjdG9yJDM7CiAgdmFyIGJpbmQkNSA9IGZ1bmN0aW9uQmluZENvbnRleHQ7CiAgdmFyIGl0ZXJhdGUgPSBpdGVyYXRlJDc7CiAgdmFyIGNvbGxlY3Rpb25Gcm9tID0gZnVuY3Rpb24gZnJvbTIoc291cmNlKSB7CiAgICB2YXIgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aDsKICAgIHZhciBtYXBGbiA9IGxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB2b2lkIDA7CiAgICB2YXIgbWFwcGluZywgYXJyYXksIG4sIGJvdW5kRnVuY3Rpb247CiAgICBhQ29uc3RydWN0b3IodGhpcyk7CiAgICBtYXBwaW5nID0gbWFwRm4gIT09IHZvaWQgMDsKICAgIGlmIChtYXBwaW5nKQogICAgICBhQ2FsbGFibGUkMihtYXBGbik7CiAgICBpZiAoc291cmNlID09IHZvaWQgMCkKICAgICAgcmV0dXJuIG5ldyB0aGlzKCk7CiAgICBhcnJheSA9IFtdOwogICAgaWYgKG1hcHBpbmcpIHsKICAgICAgbiA9IDA7CiAgICAgIGJvdW5kRnVuY3Rpb24gPSBiaW5kJDUobWFwRm4sIGxlbmd0aCA+IDIgPyBhcmd1bWVudHNbMl0gOiB2b2lkIDAsIDIpOwogICAgICBpdGVyYXRlKHNvdXJjZSwgZnVuY3Rpb24obmV4dEl0ZW0pIHsKICAgICAgICBhcnJheS5wdXNoKGJvdW5kRnVuY3Rpb24obmV4dEl0ZW0sIG4rKykpOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIGl0ZXJhdGUoc291cmNlLCBhcnJheS5wdXNoLCB7IHRoYXQ6IGFycmF5IH0pOwogICAgfQogICAgcmV0dXJuIG5ldyB0aGlzKGFycmF5KTsKICB9OwogIHZhciAkJGEgPSBfZXhwb3J0OwogIHZhciBmcm9tID0gY29sbGVjdGlvbkZyb207CiAgJCRhKHsgdGFyZ2V0OiAiV2Vha01hcCIsIHN0YXQ6IHRydWUgfSwgewogICAgZnJvbQogIH0pOwogIHZhciBjb2xsZWN0aW9uT2YgPSBmdW5jdGlvbiBvZjIoKSB7CiAgICB2YXIgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aDsKICAgIHZhciBBID0gbmV3IEFycmF5KGxlbmd0aCk7CiAgICB3aGlsZSAobGVuZ3RoLS0pCiAgICAgIEFbbGVuZ3RoXSA9IGFyZ3VtZW50c1tsZW5ndGhdOwogICAgcmV0dXJuIG5ldyB0aGlzKEEpOwogIH07CiAgdmFyICQkOSA9IF9leHBvcnQ7CiAgdmFyIG9mID0gY29sbGVjdGlvbk9mOwogICQkOSh7IHRhcmdldDogIldlYWtNYXAiLCBzdGF0OiB0cnVlIH0sIHsKICAgIG9mCiAgfSk7CiAgdmFyIGFDYWxsYWJsZSQxID0gYUNhbGxhYmxlJGM7CiAgdmFyIGFuT2JqZWN0JDIgPSBhbk9iamVjdCRpOwogIHZhciBjb2xsZWN0aW9uRGVsZXRlQWxsJDEgPSBmdW5jdGlvbigpIHsKICAgIHZhciBjb2xsZWN0aW9uMiA9IGFuT2JqZWN0JDIodGhpcyk7CiAgICB2YXIgcmVtb3ZlciA9IGFDYWxsYWJsZSQxKGNvbGxlY3Rpb24yWyJkZWxldGUiXSk7CiAgICB2YXIgYWxsRGVsZXRlZCA9IHRydWU7CiAgICB2YXIgd2FzRGVsZXRlZDsKICAgIGZvciAodmFyIGsgPSAwLCBsZW4yID0gYXJndW1lbnRzLmxlbmd0aDsgayA8IGxlbjI7IGsrKykgewogICAgICB3YXNEZWxldGVkID0gcmVtb3Zlci5jYWxsKGNvbGxlY3Rpb24yLCBhcmd1bWVudHNba10pOwogICAgICBhbGxEZWxldGVkID0gYWxsRGVsZXRlZCAmJiB3YXNEZWxldGVkOwogICAgfQogICAgcmV0dXJuICEhYWxsRGVsZXRlZDsKICB9OwogIHZhciAkJDggPSBfZXhwb3J0OwogIHZhciBJU19QVVJFJDEgPSBpc1B1cmU7CiAgdmFyIGNvbGxlY3Rpb25EZWxldGVBbGwgPSBjb2xsZWN0aW9uRGVsZXRlQWxsJDE7CiAgJCQ4KHsgdGFyZ2V0OiAiV2Vha01hcCIsIHByb3RvOiB0cnVlLCByZWFsOiB0cnVlLCBmb3JjZWQ6IElTX1BVUkUkMSB9LCB7CiAgICBkZWxldGVBbGw6IGZ1bmN0aW9uIGRlbGV0ZUFsbCgpIHsKICAgICAgcmV0dXJuIGNvbGxlY3Rpb25EZWxldGVBbGwuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KICB9KTsKICB2YXIgaXNDYWxsYWJsZSA9IGlzQ2FsbGFibGUkbDsKICB2YXIgYW5PYmplY3QkMSA9IGFuT2JqZWN0JGk7CiAgdmFyIG1hcFVwc2VydCA9IGZ1bmN0aW9uIHVwc2VydChrZXksIHVwZGF0ZUZuKSB7CiAgICB2YXIgbWFwMiA9IGFuT2JqZWN0JDEodGhpcyk7CiAgICB2YXIgaW5zZXJ0Rm4gPSBhcmd1bWVudHMubGVuZ3RoID4gMiA/IGFyZ3VtZW50c1syXSA6IHZvaWQgMDsKICAgIHZhciB2YWx1ZTsKICAgIGlmICghaXNDYWxsYWJsZSh1cGRhdGVGbikgJiYgIWlzQ2FsbGFibGUoaW5zZXJ0Rm4pKSB7CiAgICAgIHRocm93IFR5cGVFcnJvcigiQXQgbGVhc3Qgb25lIGNhbGxiYWNrIHJlcXVpcmVkIik7CiAgICB9CiAgICBpZiAobWFwMi5oYXMoa2V5KSkgewogICAgICB2YWx1ZSA9IG1hcDIuZ2V0KGtleSk7CiAgICAgIGlmIChpc0NhbGxhYmxlKHVwZGF0ZUZuKSkgewogICAgICAgIHZhbHVlID0gdXBkYXRlRm4odmFsdWUpOwogICAgICAgIG1hcDIuc2V0KGtleSwgdmFsdWUpOwogICAgICB9CiAgICB9IGVsc2UgaWYgKGlzQ2FsbGFibGUoaW5zZXJ0Rm4pKSB7CiAgICAgIHZhbHVlID0gaW5zZXJ0Rm4oKTsKICAgICAgbWFwMi5zZXQoa2V5LCB2YWx1ZSk7CiAgICB9CiAgICByZXR1cm4gdmFsdWU7CiAgfTsKICB2YXIgJCQ3ID0gX2V4cG9ydDsKICB2YXIgSVNfUFVSRSA9IGlzUHVyZTsKICB2YXIgJHVwc2VydCA9IG1hcFVwc2VydDsKICAkJDcoeyB0YXJnZXQ6ICJXZWFrTWFwIiwgcHJvdG86IHRydWUsIHJlYWw6IHRydWUsIGZvcmNlZDogSVNfUFVSRSB9LCB7CiAgICB1cHNlcnQ6ICR1cHNlcnQKICB9KTsKICB2YXIgcGFyZW50JGUgPSB3ZWFrTWFwJDI7CiAgdmFyIHdlYWtNYXAkMSA9IHBhcmVudCRlOwogIHZhciB3ZWFrTWFwID0gd2Vha01hcCQxOwogIHZhciBwYXJlbnQkZCA9IGdldE93blByb3BlcnR5RGVzY3JpcHRvciQ0OwogIHZhciBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IkMSA9IHBhcmVudCRkOwogIHZhciBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPSBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IkMTsKICAoZnVuY3Rpb24obW9kdWxlKSB7CiAgICB2YXIgX3R5cGVvZjMgPSBfdHlwZW9mJDEuZXhwb3J0c1siZGVmYXVsdCJdOwogICAgdmFyIF9XZWFrTWFwID0gd2Vha01hcDsKICAgIHZhciBfT2JqZWN0JGRlZmluZVByb3BlcnR5ID0gZGVmaW5lUHJvcGVydHkkNDsKICAgIHZhciBfT2JqZWN0JGdldE93blByb3BlcnR5RGVzY3JpcHRvciA9IGdldE93blByb3BlcnR5RGVzY3JpcHRvcjsKICAgIGZ1bmN0aW9uIF9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZShub2RlSW50ZXJvcCkgewogICAgICBpZiAodHlwZW9mIF9XZWFrTWFwICE9PSAiZnVuY3Rpb24iKQogICAgICAgIHJldHVybiBudWxsOwogICAgICB2YXIgY2FjaGVCYWJlbEludGVyb3AgPSBuZXcgX1dlYWtNYXAoKTsKICAgICAgdmFyIGNhY2hlTm9kZUludGVyb3AgPSBuZXcgX1dlYWtNYXAoKTsKICAgICAgcmV0dXJuIChfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUgPSBmdW5jdGlvbiBfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUyKG5vZGVJbnRlcm9wMikgewogICAgICAgIHJldHVybiBub2RlSW50ZXJvcDIgPyBjYWNoZU5vZGVJbnRlcm9wIDogY2FjaGVCYWJlbEludGVyb3A7CiAgICAgIH0pKG5vZGVJbnRlcm9wKTsKICAgIH0KICAgIGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaiwgbm9kZUludGVyb3ApIHsKICAgICAgaWYgKCFub2RlSW50ZXJvcCAmJiBvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsKICAgICAgICByZXR1cm4gb2JqOwogICAgICB9CiAgICAgIGlmIChvYmogPT09IG51bGwgfHwgX3R5cGVvZjMob2JqKSAhPT0gIm9iamVjdCIgJiYgdHlwZW9mIG9iaiAhPT0gImZ1bmN0aW9uIikgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAiZGVmYXVsdCI6IG9iagogICAgICAgIH07CiAgICAgIH0KICAgICAgdmFyIGNhY2hlID0gX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlKG5vZGVJbnRlcm9wKTsKICAgICAgaWYgKGNhY2hlICYmIGNhY2hlLmhhcyhvYmopKSB7CiAgICAgICAgcmV0dXJuIGNhY2hlLmdldChvYmopOwogICAgICB9CiAgICAgIHZhciBuZXdPYmogPSB7fTsKICAgICAgdmFyIGhhc1Byb3BlcnR5RGVzY3JpcHRvciA9IF9PYmplY3QkZGVmaW5lUHJvcGVydHkgJiYgX09iamVjdCRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7CiAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHsKICAgICAgICBpZiAoa2V5ICE9PSAiZGVmYXVsdCIgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgewogICAgICAgICAgdmFyIGRlc2MgPSBoYXNQcm9wZXJ0eURlc2NyaXB0b3IgPyBfT2JqZWN0JGdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiBudWxsOwogICAgICAgICAgaWYgKGRlc2MgJiYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSkgewogICAgICAgICAgICBfT2JqZWN0JGRlZmluZVByb3BlcnR5KG5ld09iaiwga2V5LCBkZXNjKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG5ld09ialtrZXldID0gb2JqW2tleV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIG5ld09ialsiZGVmYXVsdCJdID0gb2JqOwogICAgICBpZiAoY2FjaGUpIHsKICAgICAgICBjYWNoZS5zZXQob2JqLCBuZXdPYmopOwogICAgICB9CiAgICAgIHJldHVybiBuZXdPYmo7CiAgICB9CiAgICBtb2R1bGUuZXhwb3J0cyA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkOwogICAgbW9kdWxlLmV4cG9ydHNbImRlZmF1bHQiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKICB9KShpbnRlcm9wUmVxdWlyZVdpbGRjYXJkKTsKICB2YXIgREVTQ1JJUFRPUlMgPSBkZXNjcmlwdG9yczsKICB2YXIgZmFpbHMkMSA9IGZhaWxzJG47CiAgdmFyIG9iamVjdEtleXMgPSBvYmplY3RLZXlzJDM7CiAgdmFyIGdldE93blByb3BlcnR5U3ltYm9sc01vZHVsZSA9IG9iamVjdEdldE93blByb3BlcnR5U3ltYm9sczsKICB2YXIgcHJvcGVydHlJc0VudW1lcmFibGVNb2R1bGUgPSBvYmplY3RQcm9wZXJ0eUlzRW51bWVyYWJsZTsKICB2YXIgdG9PYmplY3QkMSA9IHRvT2JqZWN0JGI7CiAgdmFyIEluZGV4ZWRPYmplY3QkMSA9IGluZGV4ZWRPYmplY3Q7CiAgdmFyICRhc3NpZ24gPSBPYmplY3QuYXNzaWduOwogIHZhciBkZWZpbmVQcm9wZXJ0eSA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTsKICB2YXIgb2JqZWN0QXNzaWduID0gISRhc3NpZ24gfHwgZmFpbHMkMShmdW5jdGlvbigpIHsKICAgIGlmIChERVNDUklQVE9SUyAmJiAkYXNzaWduKHsgYjogMSB9LCAkYXNzaWduKGRlZmluZVByb3BlcnR5KHt9LCAiYSIsIHsKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgICBkZWZpbmVQcm9wZXJ0eSh0aGlzLCAiYiIsIHsKICAgICAgICAgIHZhbHVlOiAzLAogICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UKICAgICAgICB9KTsKICAgICAgfQogICAgfSksIHsgYjogMiB9KSkuYiAhPT0gMSkKICAgICAgcmV0dXJuIHRydWU7CiAgICB2YXIgQSA9IHt9OwogICAgdmFyIEIgPSB7fTsKICAgIHZhciBzeW1ib2wyID0gU3ltYm9sKCk7CiAgICB2YXIgYWxwaGFiZXQgPSAiYWJjZGVmZ2hpamtsbW5vcHFyc3QiOwogICAgQVtzeW1ib2wyXSA9IDc7CiAgICBhbHBoYWJldC5zcGxpdCgiIikuZm9yRWFjaChmdW5jdGlvbihjaHIpIHsKICAgICAgQltjaHJdID0gY2hyOwogICAgfSk7CiAgICByZXR1cm4gJGFzc2lnbih7fSwgQSlbc3ltYm9sMl0gIT0gNyB8fCBvYmplY3RLZXlzKCRhc3NpZ24oe30sIEIpKS5qb2luKCIiKSAhPSBhbHBoYWJldDsKICB9KSA/IGZ1bmN0aW9uIGFzc2lnbjIodGFyZ2V0LCBzb3VyY2UpIHsKICAgIHZhciBUID0gdG9PYmplY3QkMSh0YXJnZXQpOwogICAgdmFyIGFyZ3VtZW50c0xlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGg7CiAgICB2YXIgaW5kZXggPSAxOwogICAgdmFyIGdldE93blByb3BlcnR5U3ltYm9sczIgPSBnZXRPd25Qcm9wZXJ0eVN5bWJvbHNNb2R1bGUuZjsKICAgIHZhciBwcm9wZXJ0eUlzRW51bWVyYWJsZSA9IHByb3BlcnR5SXNFbnVtZXJhYmxlTW9kdWxlLmY7CiAgICB3aGlsZSAoYXJndW1lbnRzTGVuZ3RoID4gaW5kZXgpIHsKICAgICAgdmFyIFMgPSBJbmRleGVkT2JqZWN0JDEoYXJndW1lbnRzW2luZGV4KytdKTsKICAgICAgdmFyIGtleXMyID0gZ2V0T3duUHJvcGVydHlTeW1ib2xzMiA/IG9iamVjdEtleXMoUykuY29uY2F0KGdldE93blByb3BlcnR5U3ltYm9sczIoUykpIDogb2JqZWN0S2V5cyhTKTsKICAgICAgdmFyIGxlbmd0aCA9IGtleXMyLmxlbmd0aDsKICAgICAgdmFyIGogPSAwOwogICAgICB2YXIga2V5OwogICAgICB3aGlsZSAobGVuZ3RoID4gaikgewogICAgICAgIGtleSA9IGtleXMyW2orK107CiAgICAgICAgaWYgKCFERVNDUklQVE9SUyB8fCBwcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKFMsIGtleSkpCiAgICAgICAgICBUW2tleV0gPSBTW2tleV07CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBUOwogIH0gOiAkYXNzaWduOwogIHZhciAkJDYgPSBfZXhwb3J0OwogIHZhciBhc3NpZ24kNCA9IG9iamVjdEFzc2lnbjsKICAkJDYoeyB0YXJnZXQ6ICJPYmplY3QiLCBzdGF0OiB0cnVlLCBmb3JjZWQ6IE9iamVjdC5hc3NpZ24gIT09IGFzc2lnbiQ0IH0sIHsKICAgIGFzc2lnbjogYXNzaWduJDQKICB9KTsKICB2YXIgcGF0aCQyID0gcGF0aCRuOwogIHZhciBhc3NpZ24kMyA9IHBhdGgkMi5PYmplY3QuYXNzaWduOwogIHZhciBwYXJlbnQkYyA9IGFzc2lnbiQzOwogIHZhciBhc3NpZ24kMiA9IHBhcmVudCRjOwogIHZhciBhc3NpZ24kMSA9IGFzc2lnbiQyOwogIHZhciBzbGljZWRUb0FycmF5ID0geyBleHBvcnRzOiB7fSB9OwogIHZhciBhcnJheVdpdGhIb2xlcyA9IHsgZXhwb3J0czoge30gfTsKICAoZnVuY3Rpb24obW9kdWxlKSB7CiAgICBmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7CiAgICAgIGlmIChBcnJheS5pc0FycmF5KGFycikpCiAgICAgICAgcmV0dXJuIGFycjsKICAgIH0KICAgIG1vZHVsZS5leHBvcnRzID0gX2FycmF5V2l0aEhvbGVzOwogICAgbW9kdWxlLmV4cG9ydHNbImRlZmF1bHQiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKICB9KShhcnJheVdpdGhIb2xlcyk7CiAgdmFyIGl0ZXJhYmxlVG9BcnJheUxpbWl0ID0geyBleHBvcnRzOiB7fSB9OwogIChmdW5jdGlvbihtb2R1bGUpIHsKICAgIGZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkyKSB7CiAgICAgIHZhciBfaSA9IGFyciA9PSBudWxsID8gbnVsbCA6IHR5cGVvZiBTeW1ib2wgIT09ICJ1bmRlZmluZWQiICYmIGFycltTeW1ib2wuaXRlcmF0b3JdIHx8IGFyclsiQEBpdGVyYXRvciJdOwogICAgICBpZiAoX2kgPT0gbnVsbCkKICAgICAgICByZXR1cm47CiAgICAgIHZhciBfYXJyID0gW107CiAgICAgIHZhciBfbiA9IHRydWU7CiAgICAgIHZhciBfZCA9IGZhbHNlOwogICAgICB2YXIgX3MsIF9lOwogICAgICB0cnkgewogICAgICAgIGZvciAoX2kgPSBfaS5jYWxsKGFycik7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsKICAgICAgICAgIF9hcnIucHVzaChfcy52YWx1ZSk7CiAgICAgICAgICBpZiAoaTIgJiYgX2Fyci5sZW5ndGggPT09IGkyKQogICAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycjIpIHsKICAgICAgICBfZCA9IHRydWU7CiAgICAgICAgX2UgPSBlcnIyOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIHRyeSB7CiAgICAgICAgICBpZiAoIV9uICYmIF9pWyJyZXR1cm4iXSAhPSBudWxsKQogICAgICAgICAgICBfaVsicmV0dXJuIl0oKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgaWYgKF9kKQogICAgICAgICAgICB0aHJvdyBfZTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIF9hcnI7CiAgICB9CiAgICBtb2R1bGUuZXhwb3J0cyA9IF9pdGVyYWJsZVRvQXJyYXlMaW1pdDsKICAgIG1vZHVsZS5leHBvcnRzWyJkZWZhdWx0Il0gPSBtb2R1bGUuZXhwb3J0cywgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7CiAgfSkoaXRlcmFibGVUb0FycmF5TGltaXQpOwogIHZhciB1bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheSA9IHsgZXhwb3J0czoge30gfTsKICB2YXIgYXJyYXlMaWtlVG9BcnJheSA9IHsgZXhwb3J0czoge30gfTsKICAoZnVuY3Rpb24obW9kdWxlKSB7CiAgICBmdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbjIpIHsKICAgICAgaWYgKGxlbjIgPT0gbnVsbCB8fCBsZW4yID4gYXJyLmxlbmd0aCkKICAgICAgICBsZW4yID0gYXJyLmxlbmd0aDsKICAgICAgZm9yICh2YXIgaTIgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbjIpOyBpMiA8IGxlbjI7IGkyKyspIHsKICAgICAgICBhcnIyW2kyXSA9IGFycltpMl07CiAgICAgIH0KICAgICAgcmV0dXJuIGFycjI7CiAgICB9CiAgICBtb2R1bGUuZXhwb3J0cyA9IF9hcnJheUxpa2VUb0FycmF5OwogICAgbW9kdWxlLmV4cG9ydHNbImRlZmF1bHQiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKICB9KShhcnJheUxpa2VUb0FycmF5KTsKICAoZnVuY3Rpb24obW9kdWxlKSB7CiAgICB2YXIgYXJyYXlMaWtlVG9BcnJheSQxMiA9IGFycmF5TGlrZVRvQXJyYXkuZXhwb3J0czsKICAgIGZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsKICAgICAgaWYgKCFvKQogICAgICAgIHJldHVybjsKICAgICAgaWYgKHR5cGVvZiBvID09PSAic3RyaW5nIikKICAgICAgICByZXR1cm4gYXJyYXlMaWtlVG9BcnJheSQxMihvLCBtaW5MZW4pOwogICAgICB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7CiAgICAgIGlmIChuID09PSAiT2JqZWN0IiAmJiBvLmNvbnN0cnVjdG9yKQogICAgICAgIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7CiAgICAgIGlmIChuID09PSAiTWFwIiB8fCBuID09PSAiU2V0IikKICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShvKTsKICAgICAgaWYgKG4gPT09ICJBcmd1bWVudHMiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKQogICAgICAgIHJldHVybiBhcnJheUxpa2VUb0FycmF5JDEyKG8sIG1pbkxlbik7CiAgICB9CiAgICBtb2R1bGUuZXhwb3J0cyA9IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheTsKICAgIG1vZHVsZS5leHBvcnRzWyJkZWZhdWx0Il0gPSBtb2R1bGUuZXhwb3J0cywgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7CiAgfSkodW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkpOwogIHZhciBub25JdGVyYWJsZVJlc3QgPSB7IGV4cG9ydHM6IHt9IH07CiAgKGZ1bmN0aW9uKG1vZHVsZSkgewogICAgZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKTsKICAgIH0KICAgIG1vZHVsZS5leHBvcnRzID0gX25vbkl0ZXJhYmxlUmVzdDsKICAgIG1vZHVsZS5leHBvcnRzWyJkZWZhdWx0Il0gPSBtb2R1bGUuZXhwb3J0cywgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7CiAgfSkobm9uSXRlcmFibGVSZXN0KTsKICAoZnVuY3Rpb24obW9kdWxlKSB7CiAgICB2YXIgYXJyYXlXaXRoSG9sZXMkMTIgPSBhcnJheVdpdGhIb2xlcy5leHBvcnRzOwogICAgdmFyIGl0ZXJhYmxlVG9BcnJheUxpbWl0JDEyID0gaXRlcmFibGVUb0FycmF5TGltaXQuZXhwb3J0czsKICAgIHZhciB1bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheSQxMiA9IHVuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5LmV4cG9ydHM7CiAgICB2YXIgbm9uSXRlcmFibGVSZXN0JDEyID0gbm9uSXRlcmFibGVSZXN0LmV4cG9ydHM7CiAgICBmdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkyKSB7CiAgICAgIHJldHVybiBhcnJheVdpdGhIb2xlcyQxMihhcnIpIHx8IGl0ZXJhYmxlVG9BcnJheUxpbWl0JDEyKGFyciwgaTIpIHx8IHVuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5JDEyKGFyciwgaTIpIHx8IG5vbkl0ZXJhYmxlUmVzdCQxMigpOwogICAgfQogICAgbW9kdWxlLmV4cG9ydHMgPSBfc2xpY2VkVG9BcnJheTsKICAgIG1vZHVsZS5leHBvcnRzWyJkZWZhdWx0Il0gPSBtb2R1bGUuZXhwb3J0cywgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7CiAgfSkoc2xpY2VkVG9BcnJheSk7CiAgdmFyIHJlZ2VuZXJhdG9yID0gcnVudGltZS5leHBvcnRzOwogIHZhciBhc3luY1RvR2VuZXJhdG9yID0geyBleHBvcnRzOiB7fSB9OwogIChmdW5jdGlvbihtb2R1bGUpIHsKICAgIGZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHsKICAgICAgdHJ5IHsKICAgICAgICB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7CiAgICAgICAgdmFyIHZhbHVlID0gaW5mby52YWx1ZTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAoaW5mby5kb25lKSB7CiAgICAgICAgcmVzb2x2ZSh2YWx1ZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpOwogICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBfYXN5bmNUb0dlbmVyYXRvcihmbikgewogICAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIHNlbGYyID0gdGhpcywgYXJncyA9IGFyZ3VtZW50czsKICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICB2YXIgZ2VuID0gZm4uYXBwbHkoc2VsZjIsIGFyZ3MpOwogICAgICAgICAgZnVuY3Rpb24gX25leHQodmFsdWUpIHsKICAgICAgICAgICAgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAibmV4dCIsIHZhbHVlKTsKICAgICAgICAgIH0KICAgICAgICAgIGZ1bmN0aW9uIF90aHJvdyhlcnIyKSB7CiAgICAgICAgICAgIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgInRocm93IiwgZXJyMik7CiAgICAgICAgICB9CiAgICAgICAgICBfbmV4dCh2b2lkIDApOwogICAgICAgIH0pOwogICAgICB9OwogICAgfQogICAgbW9kdWxlLmV4cG9ydHMgPSBfYXN5bmNUb0dlbmVyYXRvcjsKICAgIG1vZHVsZS5leHBvcnRzWyJkZWZhdWx0Il0gPSBtb2R1bGUuZXhwb3J0cywgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7CiAgfSkoYXN5bmNUb0dlbmVyYXRvcik7CiAgdmFyIGNvbW1vbiA9IHt9OwogIChmdW5jdGlvbihleHBvcnRzKSB7CiAgICB2YXIgVFlQRURfT0sgPSB0eXBlb2YgVWludDhBcnJheSAhPT0gInVuZGVmaW5lZCIgJiYgdHlwZW9mIFVpbnQxNkFycmF5ICE9PSAidW5kZWZpbmVkIiAmJiB0eXBlb2YgSW50MzJBcnJheSAhPT0gInVuZGVmaW5lZCI7CiAgICBmdW5jdGlvbiBfaGFzKG9iaiwga2V5KSB7CiAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpOwogICAgfQogICAgZXhwb3J0cy5hc3NpZ24gPSBmdW5jdGlvbihvYmopIHsKICAgICAgdmFyIHNvdXJjZXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpOwogICAgICB3aGlsZSAoc291cmNlcy5sZW5ndGgpIHsKICAgICAgICB2YXIgc291cmNlID0gc291cmNlcy5zaGlmdCgpOwogICAgICAgIGlmICghc291cmNlKSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CiAgICAgICAgaWYgKHR5cGVvZiBzb3VyY2UgIT09ICJvYmplY3QiKSB7CiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHNvdXJjZSArICJtdXN0IGJlIG5vbi1vYmplY3QiKTsKICAgICAgICB9CiAgICAgICAgZm9yICh2YXIgcCBpbiBzb3VyY2UpIHsKICAgICAgICAgIGlmIChfaGFzKHNvdXJjZSwgcCkpIHsKICAgICAgICAgICAgb2JqW3BdID0gc291cmNlW3BdOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gb2JqOwogICAgfTsKICAgIGV4cG9ydHMuc2hyaW5rQnVmID0gZnVuY3Rpb24oYnVmLCBzaXplKSB7CiAgICAgIGlmIChidWYubGVuZ3RoID09PSBzaXplKSB7CiAgICAgICAgcmV0dXJuIGJ1ZjsKICAgICAgfQogICAgICBpZiAoYnVmLnN1YmFycmF5KSB7CiAgICAgICAgcmV0dXJuIGJ1Zi5zdWJhcnJheSgwLCBzaXplKTsKICAgICAgfQogICAgICBidWYubGVuZ3RoID0gc2l6ZTsKICAgICAgcmV0dXJuIGJ1ZjsKICAgIH07CiAgICB2YXIgZm5UeXBlZCA9IHsKICAgICAgYXJyYXlTZXQ6IGZ1bmN0aW9uKGRlc3QsIHNyYywgc3JjX29mZnMsIGxlbjIsIGRlc3Rfb2ZmcykgewogICAgICAgIGlmIChzcmMuc3ViYXJyYXkgJiYgZGVzdC5zdWJhcnJheSkgewogICAgICAgICAgZGVzdC5zZXQoc3JjLnN1YmFycmF5KHNyY19vZmZzLCBzcmNfb2ZmcyArIGxlbjIpLCBkZXN0X29mZnMpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBmb3IgKHZhciBpMiA9IDA7IGkyIDwgbGVuMjsgaTIrKykgewogICAgICAgICAgZGVzdFtkZXN0X29mZnMgKyBpMl0gPSBzcmNbc3JjX29mZnMgKyBpMl07CiAgICAgICAgfQogICAgICB9LAogICAgICBmbGF0dGVuQ2h1bmtzOiBmdW5jdGlvbihjaHVua3MpIHsKICAgICAgICB2YXIgaTIsIGwsIGxlbjIsIHBvcywgY2h1bmsyLCByZXN1bHQ7CiAgICAgICAgbGVuMiA9IDA7CiAgICAgICAgZm9yIChpMiA9IDAsIGwgPSBjaHVua3MubGVuZ3RoOyBpMiA8IGw7IGkyKyspIHsKICAgICAgICAgIGxlbjIgKz0gY2h1bmtzW2kyXS5sZW5ndGg7CiAgICAgICAgfQogICAgICAgIHJlc3VsdCA9IG5ldyBVaW50OEFycmF5KGxlbjIpOwogICAgICAgIHBvcyA9IDA7CiAgICAgICAgZm9yIChpMiA9IDAsIGwgPSBjaHVua3MubGVuZ3RoOyBpMiA8IGw7IGkyKyspIHsKICAgICAgICAgIGNodW5rMiA9IGNodW5rc1tpMl07CiAgICAgICAgICByZXN1bHQuc2V0KGNodW5rMiwgcG9zKTsKICAgICAgICAgIHBvcyArPSBjaHVuazIubGVuZ3RoOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICB9CiAgICB9OwogICAgdmFyIGZuVW50eXBlZCA9IHsKICAgICAgYXJyYXlTZXQ6IGZ1bmN0aW9uKGRlc3QsIHNyYywgc3JjX29mZnMsIGxlbjIsIGRlc3Rfb2ZmcykgewogICAgICAgIGZvciAodmFyIGkyID0gMDsgaTIgPCBsZW4yOyBpMisrKSB7CiAgICAgICAgICBkZXN0W2Rlc3Rfb2ZmcyArIGkyXSA9IHNyY1tzcmNfb2ZmcyArIGkyXTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGZsYXR0ZW5DaHVua3M6IGZ1bmN0aW9uKGNodW5rcykgewogICAgICAgIHJldHVybiBbXS5jb25jYXQuYXBwbHkoW10sIGNodW5rcyk7CiAgICAgIH0KICAgIH07CiAgICBleHBvcnRzLnNldFR5cGVkID0gZnVuY3Rpb24ob24pIHsKICAgICAgaWYgKG9uKSB7CiAgICAgICAgZXhwb3J0cy5CdWY4ID0gVWludDhBcnJheTsKICAgICAgICBleHBvcnRzLkJ1ZjE2ID0gVWludDE2QXJyYXk7CiAgICAgICAgZXhwb3J0cy5CdWYzMiA9IEludDMyQXJyYXk7CiAgICAgICAgZXhwb3J0cy5hc3NpZ24oZXhwb3J0cywgZm5UeXBlZCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZXhwb3J0cy5CdWY4ID0gQXJyYXk7CiAgICAgICAgZXhwb3J0cy5CdWYxNiA9IEFycmF5OwogICAgICAgIGV4cG9ydHMuQnVmMzIgPSBBcnJheTsKICAgICAgICBleHBvcnRzLmFzc2lnbihleHBvcnRzLCBmblVudHlwZWQpOwogICAgICB9CiAgICB9OwogICAgZXhwb3J0cy5zZXRUeXBlZChUWVBFRF9PSyk7CiAgfSkoY29tbW9uKTsKICB2YXIgZGVmbGF0ZSQ0ID0ge307CiAgdmFyIGRlZmxhdGUkMyA9IHt9OwogIHZhciB0cmVlcyQxID0ge307CiAgdmFyIHV0aWxzJDYgPSBjb21tb247CiAgdmFyIFpfRklYRUQkMSA9IDQ7CiAgdmFyIFpfQklOQVJZID0gMDsKICB2YXIgWl9URVhUID0gMTsKICB2YXIgWl9VTktOT1dOJDEgPSAyOwogIGZ1bmN0aW9uIHplcm8kMShidWYpIHsKICAgIHZhciBsZW4yID0gYnVmLmxlbmd0aDsKICAgIHdoaWxlICgtLWxlbjIgPj0gMCkgewogICAgICBidWZbbGVuMl0gPSAwOwogICAgfQogIH0KICB2YXIgU1RPUkVEX0JMT0NLID0gMDsKICB2YXIgU1RBVElDX1RSRUVTID0gMTsKICB2YXIgRFlOX1RSRUVTID0gMjsKICB2YXIgTUlOX01BVENIJDEgPSAzOwogIHZhciBNQVhfTUFUQ0gkMSA9IDI1ODsKICB2YXIgTEVOR1RIX0NPREVTJDEgPSAyOTsKICB2YXIgTElURVJBTFMkMSA9IDI1NjsKICB2YXIgTF9DT0RFUyQxID0gTElURVJBTFMkMSArIDEgKyBMRU5HVEhfQ09ERVMkMTsKICB2YXIgRF9DT0RFUyQxID0gMzA7CiAgdmFyIEJMX0NPREVTJDEgPSAxOTsKICB2YXIgSEVBUF9TSVpFJDEgPSAyICogTF9DT0RFUyQxICsgMTsKICB2YXIgTUFYX0JJVFMkMSA9IDE1OwogIHZhciBCdWZfc2l6ZSA9IDE2OwogIHZhciBNQVhfQkxfQklUUyA9IDc7CiAgdmFyIEVORF9CTE9DSyA9IDI1NjsKICB2YXIgUkVQXzNfNiA9IDE2OwogIHZhciBSRVBaXzNfMTAgPSAxNzsKICB2YXIgUkVQWl8xMV8xMzggPSAxODsKICB2YXIgZXh0cmFfbGJpdHMgPSBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMSwgMSwgMSwgMSwgMiwgMiwgMiwgMiwgMywgMywgMywgMywgNCwgNCwgNCwgNCwgNSwgNSwgNSwgNSwgMF07CiAgdmFyIGV4dHJhX2RiaXRzID0gWzAsIDAsIDAsIDAsIDEsIDEsIDIsIDIsIDMsIDMsIDQsIDQsIDUsIDUsIDYsIDYsIDcsIDcsIDgsIDgsIDksIDksIDEwLCAxMCwgMTEsIDExLCAxMiwgMTIsIDEzLCAxM107CiAgdmFyIGV4dHJhX2JsYml0cyA9IFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAyLCAzLCA3XTsKICB2YXIgYmxfb3JkZXIgPSBbMTYsIDE3LCAxOCwgMCwgOCwgNywgOSwgNiwgMTAsIDUsIDExLCA0LCAxMiwgMywgMTMsIDIsIDE0LCAxLCAxNV07CiAgdmFyIERJU1RfQ09ERV9MRU4gPSA1MTI7CiAgdmFyIHN0YXRpY19sdHJlZSA9IG5ldyBBcnJheSgoTF9DT0RFUyQxICsgMikgKiAyKTsKICB6ZXJvJDEoc3RhdGljX2x0cmVlKTsKICB2YXIgc3RhdGljX2R0cmVlID0gbmV3IEFycmF5KERfQ09ERVMkMSAqIDIpOwogIHplcm8kMShzdGF0aWNfZHRyZWUpOwogIHZhciBfZGlzdF9jb2RlID0gbmV3IEFycmF5KERJU1RfQ09ERV9MRU4pOwogIHplcm8kMShfZGlzdF9jb2RlKTsKICB2YXIgX2xlbmd0aF9jb2RlID0gbmV3IEFycmF5KE1BWF9NQVRDSCQxIC0gTUlOX01BVENIJDEgKyAxKTsKICB6ZXJvJDEoX2xlbmd0aF9jb2RlKTsKICB2YXIgYmFzZV9sZW5ndGggPSBuZXcgQXJyYXkoTEVOR1RIX0NPREVTJDEpOwogIHplcm8kMShiYXNlX2xlbmd0aCk7CiAgdmFyIGJhc2VfZGlzdCA9IG5ldyBBcnJheShEX0NPREVTJDEpOwogIHplcm8kMShiYXNlX2Rpc3QpOwogIGZ1bmN0aW9uIFN0YXRpY1RyZWVEZXNjKHN0YXRpY190cmVlLCBleHRyYV9iaXRzLCBleHRyYV9iYXNlLCBlbGVtcywgbWF4X2xlbmd0aCkgewogICAgdGhpcy5zdGF0aWNfdHJlZSA9IHN0YXRpY190cmVlOwogICAgdGhpcy5leHRyYV9iaXRzID0gZXh0cmFfYml0czsKICAgIHRoaXMuZXh0cmFfYmFzZSA9IGV4dHJhX2Jhc2U7CiAgICB0aGlzLmVsZW1zID0gZWxlbXM7CiAgICB0aGlzLm1heF9sZW5ndGggPSBtYXhfbGVuZ3RoOwogICAgdGhpcy5oYXNfc3RyZWUgPSBzdGF0aWNfdHJlZSAmJiBzdGF0aWNfdHJlZS5sZW5ndGg7CiAgfQogIHZhciBzdGF0aWNfbF9kZXNjOwogIHZhciBzdGF0aWNfZF9kZXNjOwogIHZhciBzdGF0aWNfYmxfZGVzYzsKICBmdW5jdGlvbiBUcmVlRGVzYyhkeW5fdHJlZSwgc3RhdF9kZXNjKSB7CiAgICB0aGlzLmR5bl90cmVlID0gZHluX3RyZWU7CiAgICB0aGlzLm1heF9jb2RlID0gMDsKICAgIHRoaXMuc3RhdF9kZXNjID0gc3RhdF9kZXNjOwogIH0KICBmdW5jdGlvbiBkX2NvZGUoZGlzdDIpIHsKICAgIHJldHVybiBkaXN0MiA8IDI1NiA/IF9kaXN0X2NvZGVbZGlzdDJdIDogX2Rpc3RfY29kZVsyNTYgKyAoZGlzdDIgPj4+IDcpXTsKICB9CiAgZnVuY3Rpb24gcHV0X3Nob3J0KHMsIHcpIHsKICAgIHMucGVuZGluZ19idWZbcy5wZW5kaW5nKytdID0gdyAmIDI1NTsKICAgIHMucGVuZGluZ19idWZbcy5wZW5kaW5nKytdID0gdyA+Pj4gOCAmIDI1NTsKICB9CiAgZnVuY3Rpb24gc2VuZF9iaXRzKHMsIHZhbHVlLCBsZW5ndGgpIHsKICAgIGlmIChzLmJpX3ZhbGlkID4gQnVmX3NpemUgLSBsZW5ndGgpIHsKICAgICAgcy5iaV9idWYgfD0gdmFsdWUgPDwgcy5iaV92YWxpZCAmIDY1NTM1OwogICAgICBwdXRfc2hvcnQocywgcy5iaV9idWYpOwogICAgICBzLmJpX2J1ZiA9IHZhbHVlID4+IEJ1Zl9zaXplIC0gcy5iaV92YWxpZDsKICAgICAgcy5iaV92YWxpZCArPSBsZW5ndGggLSBCdWZfc2l6ZTsKICAgIH0gZWxzZSB7CiAgICAgIHMuYmlfYnVmIHw9IHZhbHVlIDw8IHMuYmlfdmFsaWQgJiA2NTUzNTsKICAgICAgcy5iaV92YWxpZCArPSBsZW5ndGg7CiAgICB9CiAgfQogIGZ1bmN0aW9uIHNlbmRfY29kZShzLCBjMiwgdHJlZSkgewogICAgc2VuZF9iaXRzKHMsIHRyZWVbYzIgKiAyXSwgdHJlZVtjMiAqIDIgKyAxXSk7CiAgfQogIGZ1bmN0aW9uIGJpX3JldmVyc2UoY29kZTIsIGxlbjIpIHsKICAgIHZhciByZXMgPSAwOwogICAgZG8gewogICAgICByZXMgfD0gY29kZTIgJiAxOwogICAgICBjb2RlMiA+Pj49IDE7CiAgICAgIHJlcyA8PD0gMTsKICAgIH0gd2hpbGUgKC0tbGVuMiA+IDApOwogICAgcmV0dXJuIHJlcyA+Pj4gMTsKICB9CiAgZnVuY3Rpb24gYmlfZmx1c2gocykgewogICAgaWYgKHMuYmlfdmFsaWQgPT09IDE2KSB7CiAgICAgIHB1dF9zaG9ydChzLCBzLmJpX2J1Zik7CiAgICAgIHMuYmlfYnVmID0gMDsKICAgICAgcy5iaV92YWxpZCA9IDA7CiAgICB9IGVsc2UgaWYgKHMuYmlfdmFsaWQgPj0gOCkgewogICAgICBzLnBlbmRpbmdfYnVmW3MucGVuZGluZysrXSA9IHMuYmlfYnVmICYgMjU1OwogICAgICBzLmJpX2J1ZiA+Pj0gODsKICAgICAgcy5iaV92YWxpZCAtPSA4OwogICAgfQogIH0KICBmdW5jdGlvbiBnZW5fYml0bGVuKHMsIGRlc2MpIHsKICAgIHZhciB0cmVlID0gZGVzYy5keW5fdHJlZTsKICAgIHZhciBtYXhfY29kZSA9IGRlc2MubWF4X2NvZGU7CiAgICB2YXIgc3RyZWUgPSBkZXNjLnN0YXRfZGVzYy5zdGF0aWNfdHJlZTsKICAgIHZhciBoYXNfc3RyZWUgPSBkZXNjLnN0YXRfZGVzYy5oYXNfc3RyZWU7CiAgICB2YXIgZXh0cmEgPSBkZXNjLnN0YXRfZGVzYy5leHRyYV9iaXRzOwogICAgdmFyIGJhc2UgPSBkZXNjLnN0YXRfZGVzYy5leHRyYV9iYXNlOwogICAgdmFyIG1heF9sZW5ndGggPSBkZXNjLnN0YXRfZGVzYy5tYXhfbGVuZ3RoOwogICAgdmFyIGg7CiAgICB2YXIgbiwgbTsKICAgIHZhciBiaXRzOwogICAgdmFyIHhiaXRzOwogICAgdmFyIGY7CiAgICB2YXIgb3ZlcmZsb3cgPSAwOwogICAgZm9yIChiaXRzID0gMDsgYml0cyA8PSBNQVhfQklUUyQxOyBiaXRzKyspIHsKICAgICAgcy5ibF9jb3VudFtiaXRzXSA9IDA7CiAgICB9CiAgICB0cmVlW3MuaGVhcFtzLmhlYXBfbWF4XSAqIDIgKyAxXSA9IDA7CiAgICBmb3IgKGggPSBzLmhlYXBfbWF4ICsgMTsgaCA8IEhFQVBfU0laRSQxOyBoKyspIHsKICAgICAgbiA9IHMuaGVhcFtoXTsKICAgICAgYml0cyA9IHRyZWVbdHJlZVtuICogMiArIDFdICogMiArIDFdICsgMTsKICAgICAgaWYgKGJpdHMgPiBtYXhfbGVuZ3RoKSB7CiAgICAgICAgYml0cyA9IG1heF9sZW5ndGg7CiAgICAgICAgb3ZlcmZsb3crKzsKICAgICAgfQogICAgICB0cmVlW24gKiAyICsgMV0gPSBiaXRzOwogICAgICBpZiAobiA+IG1heF9jb2RlKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KICAgICAgcy5ibF9jb3VudFtiaXRzXSsrOwogICAgICB4Yml0cyA9IDA7CiAgICAgIGlmIChuID49IGJhc2UpIHsKICAgICAgICB4Yml0cyA9IGV4dHJhW24gLSBiYXNlXTsKICAgICAgfQogICAgICBmID0gdHJlZVtuICogMl07CiAgICAgIHMub3B0X2xlbiArPSBmICogKGJpdHMgKyB4Yml0cyk7CiAgICAgIGlmIChoYXNfc3RyZWUpIHsKICAgICAgICBzLnN0YXRpY19sZW4gKz0gZiAqIChzdHJlZVtuICogMiArIDFdICsgeGJpdHMpOwogICAgICB9CiAgICB9CiAgICBpZiAob3ZlcmZsb3cgPT09IDApIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgZG8gewogICAgICBiaXRzID0gbWF4X2xlbmd0aCAtIDE7CiAgICAgIHdoaWxlIChzLmJsX2NvdW50W2JpdHNdID09PSAwKSB7CiAgICAgICAgYml0cy0tOwogICAgICB9CiAgICAgIHMuYmxfY291bnRbYml0c10tLTsKICAgICAgcy5ibF9jb3VudFtiaXRzICsgMV0gKz0gMjsKICAgICAgcy5ibF9jb3VudFttYXhfbGVuZ3RoXS0tOwogICAgICBvdmVyZmxvdyAtPSAyOwogICAgfSB3aGlsZSAob3ZlcmZsb3cgPiAwKTsKICAgIGZvciAoYml0cyA9IG1heF9sZW5ndGg7IGJpdHMgIT09IDA7IGJpdHMtLSkgewogICAgICBuID0gcy5ibF9jb3VudFtiaXRzXTsKICAgICAgd2hpbGUgKG4gIT09IDApIHsKICAgICAgICBtID0gcy5oZWFwWy0taF07CiAgICAgICAgaWYgKG0gPiBtYXhfY29kZSkgewogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQogICAgICAgIGlmICh0cmVlW20gKiAyICsgMV0gIT09IGJpdHMpIHsKICAgICAgICAgIHMub3B0X2xlbiArPSAoYml0cyAtIHRyZWVbbSAqIDIgKyAxXSkgKiB0cmVlW20gKiAyXTsKICAgICAgICAgIHRyZWVbbSAqIDIgKyAxXSA9IGJpdHM7CiAgICAgICAgfQogICAgICAgIG4tLTsKICAgICAgfQogICAgfQogIH0KICBmdW5jdGlvbiBnZW5fY29kZXModHJlZSwgbWF4X2NvZGUsIGJsX2NvdW50KSB7CiAgICB2YXIgbmV4dF9jb2RlID0gbmV3IEFycmF5KE1BWF9CSVRTJDEgKyAxKTsKICAgIHZhciBjb2RlMiA9IDA7CiAgICB2YXIgYml0czsKICAgIHZhciBuOwogICAgZm9yIChiaXRzID0gMTsgYml0cyA8PSBNQVhfQklUUyQxOyBiaXRzKyspIHsKICAgICAgbmV4dF9jb2RlW2JpdHNdID0gY29kZTIgPSBjb2RlMiArIGJsX2NvdW50W2JpdHMgLSAxXSA8PCAxOwogICAgfQogICAgZm9yIChuID0gMDsgbiA8PSBtYXhfY29kZTsgbisrKSB7CiAgICAgIHZhciBsZW4yID0gdHJlZVtuICogMiArIDFdOwogICAgICBpZiAobGVuMiA9PT0gMCkgewogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICAgIHRyZWVbbiAqIDJdID0gYmlfcmV2ZXJzZShuZXh0X2NvZGVbbGVuMl0rKywgbGVuMik7CiAgICB9CiAgfQogIGZ1bmN0aW9uIHRyX3N0YXRpY19pbml0KCkgewogICAgdmFyIG47CiAgICB2YXIgYml0czsKICAgIHZhciBsZW5ndGg7CiAgICB2YXIgY29kZTI7CiAgICB2YXIgZGlzdDI7CiAgICB2YXIgYmxfY291bnQgPSBuZXcgQXJyYXkoTUFYX0JJVFMkMSArIDEpOwogICAgbGVuZ3RoID0gMDsKICAgIGZvciAoY29kZTIgPSAwOyBjb2RlMiA8IExFTkdUSF9DT0RFUyQxIC0gMTsgY29kZTIrKykgewogICAgICBiYXNlX2xlbmd0aFtjb2RlMl0gPSBsZW5ndGg7CiAgICAgIGZvciAobiA9IDA7IG4gPCAxIDw8IGV4dHJhX2xiaXRzW2NvZGUyXTsgbisrKSB7CiAgICAgICAgX2xlbmd0aF9jb2RlW2xlbmd0aCsrXSA9IGNvZGUyOwogICAgICB9CiAgICB9CiAgICBfbGVuZ3RoX2NvZGVbbGVuZ3RoIC0gMV0gPSBjb2RlMjsKICAgIGRpc3QyID0gMDsKICAgIGZvciAoY29kZTIgPSAwOyBjb2RlMiA8IDE2OyBjb2RlMisrKSB7CiAgICAgIGJhc2VfZGlzdFtjb2RlMl0gPSBkaXN0MjsKICAgICAgZm9yIChuID0gMDsgbiA8IDEgPDwgZXh0cmFfZGJpdHNbY29kZTJdOyBuKyspIHsKICAgICAgICBfZGlzdF9jb2RlW2Rpc3QyKytdID0gY29kZTI7CiAgICAgIH0KICAgIH0KICAgIGRpc3QyID4+PSA3OwogICAgZm9yICg7IGNvZGUyIDwgRF9DT0RFUyQxOyBjb2RlMisrKSB7CiAgICAgIGJhc2VfZGlzdFtjb2RlMl0gPSBkaXN0MiA8PCA3OwogICAgICBmb3IgKG4gPSAwOyBuIDwgMSA8PCBleHRyYV9kYml0c1tjb2RlMl0gLSA3OyBuKyspIHsKICAgICAgICBfZGlzdF9jb2RlWzI1NiArIGRpc3QyKytdID0gY29kZTI7CiAgICAgIH0KICAgIH0KICAgIGZvciAoYml0cyA9IDA7IGJpdHMgPD0gTUFYX0JJVFMkMTsgYml0cysrKSB7CiAgICAgIGJsX2NvdW50W2JpdHNdID0gMDsKICAgIH0KICAgIG4gPSAwOwogICAgd2hpbGUgKG4gPD0gMTQzKSB7CiAgICAgIHN0YXRpY19sdHJlZVtuICogMiArIDFdID0gODsKICAgICAgbisrOwogICAgICBibF9jb3VudFs4XSsrOwogICAgfQogICAgd2hpbGUgKG4gPD0gMjU1KSB7CiAgICAgIHN0YXRpY19sdHJlZVtuICogMiArIDFdID0gOTsKICAgICAgbisrOwogICAgICBibF9jb3VudFs5XSsrOwogICAgfQogICAgd2hpbGUgKG4gPD0gMjc5KSB7CiAgICAgIHN0YXRpY19sdHJlZVtuICogMiArIDFdID0gNzsKICAgICAgbisrOwogICAgICBibF9jb3VudFs3XSsrOwogICAgfQogICAgd2hpbGUgKG4gPD0gMjg3KSB7CiAgICAgIHN0YXRpY19sdHJlZVtuICogMiArIDFdID0gODsKICAgICAgbisrOwogICAgICBibF9jb3VudFs4XSsrOwogICAgfQogICAgZ2VuX2NvZGVzKHN0YXRpY19sdHJlZSwgTF9DT0RFUyQxICsgMSwgYmxfY291bnQpOwogICAgZm9yIChuID0gMDsgbiA8IERfQ09ERVMkMTsgbisrKSB7CiAgICAgIHN0YXRpY19kdHJlZVtuICogMiArIDFdID0gNTsKICAgICAgc3RhdGljX2R0cmVlW24gKiAyXSA9IGJpX3JldmVyc2UobiwgNSk7CiAgICB9CiAgICBzdGF0aWNfbF9kZXNjID0gbmV3IFN0YXRpY1RyZWVEZXNjKHN0YXRpY19sdHJlZSwgZXh0cmFfbGJpdHMsIExJVEVSQUxTJDEgKyAxLCBMX0NPREVTJDEsIE1BWF9CSVRTJDEpOwogICAgc3RhdGljX2RfZGVzYyA9IG5ldyBTdGF0aWNUcmVlRGVzYyhzdGF0aWNfZHRyZWUsIGV4dHJhX2RiaXRzLCAwLCBEX0NPREVTJDEsIE1BWF9CSVRTJDEpOwogICAgc3RhdGljX2JsX2Rlc2MgPSBuZXcgU3RhdGljVHJlZURlc2MobmV3IEFycmF5KDApLCBleHRyYV9ibGJpdHMsIDAsIEJMX0NPREVTJDEsIE1BWF9CTF9CSVRTKTsKICB9CiAgZnVuY3Rpb24gaW5pdF9ibG9jayhzKSB7CiAgICB2YXIgbjsKICAgIGZvciAobiA9IDA7IG4gPCBMX0NPREVTJDE7IG4rKykgewogICAgICBzLmR5bl9sdHJlZVtuICogMl0gPSAwOwogICAgfQogICAgZm9yIChuID0gMDsgbiA8IERfQ09ERVMkMTsgbisrKSB7CiAgICAgIHMuZHluX2R0cmVlW24gKiAyXSA9IDA7CiAgICB9CiAgICBmb3IgKG4gPSAwOyBuIDwgQkxfQ09ERVMkMTsgbisrKSB7CiAgICAgIHMuYmxfdHJlZVtuICogMl0gPSAwOwogICAgfQogICAgcy5keW5fbHRyZWVbRU5EX0JMT0NLICogMl0gPSAxOwogICAgcy5vcHRfbGVuID0gcy5zdGF0aWNfbGVuID0gMDsKICAgIHMubGFzdF9saXQgPSBzLm1hdGNoZXMgPSAwOwogIH0KICBmdW5jdGlvbiBiaV93aW5kdXAocykgewogICAgaWYgKHMuYmlfdmFsaWQgPiA4KSB7CiAgICAgIHB1dF9zaG9ydChzLCBzLmJpX2J1Zik7CiAgICB9IGVsc2UgaWYgKHMuYmlfdmFsaWQgPiAwKSB7CiAgICAgIHMucGVuZGluZ19idWZbcy5wZW5kaW5nKytdID0gcy5iaV9idWY7CiAgICB9CiAgICBzLmJpX2J1ZiA9IDA7CiAgICBzLmJpX3ZhbGlkID0gMDsKICB9CiAgZnVuY3Rpb24gY29weV9ibG9jayhzLCBidWYsIGxlbjIsIGhlYWRlcikgewogICAgYmlfd2luZHVwKHMpOwogICAgaWYgKGhlYWRlcikgewogICAgICBwdXRfc2hvcnQocywgbGVuMik7CiAgICAgIHB1dF9zaG9ydChzLCB+bGVuMik7CiAgICB9CiAgICB1dGlscyQ2LmFycmF5U2V0KHMucGVuZGluZ19idWYsIHMud2luZG93LCBidWYsIGxlbjIsIHMucGVuZGluZyk7CiAgICBzLnBlbmRpbmcgKz0gbGVuMjsKICB9CiAgZnVuY3Rpb24gc21hbGxlcih0cmVlLCBuLCBtLCBkZXB0aCkgewogICAgdmFyIF9uMiA9IG4gKiAyOwogICAgdmFyIF9tMiA9IG0gKiAyOwogICAgcmV0dXJuIHRyZWVbX24yXSA8IHRyZWVbX20yXSB8fCB0cmVlW19uMl0gPT09IHRyZWVbX20yXSAmJiBkZXB0aFtuXSA8PSBkZXB0aFttXTsKICB9CiAgZnVuY3Rpb24gcHFkb3duaGVhcChzLCB0cmVlLCBrKSB7CiAgICB2YXIgdiA9IHMuaGVhcFtrXTsKICAgIHZhciBqID0gayA8PCAxOwogICAgd2hpbGUgKGogPD0gcy5oZWFwX2xlbikgewogICAgICBpZiAoaiA8IHMuaGVhcF9sZW4gJiYgc21hbGxlcih0cmVlLCBzLmhlYXBbaiArIDFdLCBzLmhlYXBbal0sIHMuZGVwdGgpKSB7CiAgICAgICAgaisrOwogICAgICB9CiAgICAgIGlmIChzbWFsbGVyKHRyZWUsIHYsIHMuaGVhcFtqXSwgcy5kZXB0aCkpIHsKICAgICAgICBicmVhazsKICAgICAgfQogICAgICBzLmhlYXBba10gPSBzLmhlYXBbal07CiAgICAgIGsgPSBqOwogICAgICBqIDw8PSAxOwogICAgfQogICAgcy5oZWFwW2tdID0gdjsKICB9CiAgZnVuY3Rpb24gY29tcHJlc3NfYmxvY2socywgbHRyZWUsIGR0cmVlKSB7CiAgICB2YXIgZGlzdDI7CiAgICB2YXIgbGM7CiAgICB2YXIgbHggPSAwOwogICAgdmFyIGNvZGUyOwogICAgdmFyIGV4dHJhOwogICAgaWYgKHMubGFzdF9saXQgIT09IDApIHsKICAgICAgZG8gewogICAgICAgIGRpc3QyID0gcy5wZW5kaW5nX2J1ZltzLmRfYnVmICsgbHggKiAyXSA8PCA4IHwgcy5wZW5kaW5nX2J1ZltzLmRfYnVmICsgbHggKiAyICsgMV07CiAgICAgICAgbGMgPSBzLnBlbmRpbmdfYnVmW3MubF9idWYgKyBseF07CiAgICAgICAgbHgrKzsKICAgICAgICBpZiAoZGlzdDIgPT09IDApIHsKICAgICAgICAgIHNlbmRfY29kZShzLCBsYywgbHRyZWUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb2RlMiA9IF9sZW5ndGhfY29kZVtsY107CiAgICAgICAgICBzZW5kX2NvZGUocywgY29kZTIgKyBMSVRFUkFMUyQxICsgMSwgbHRyZWUpOwogICAgICAgICAgZXh0cmEgPSBleHRyYV9sYml0c1tjb2RlMl07CiAgICAgICAgICBpZiAoZXh0cmEgIT09IDApIHsKICAgICAgICAgICAgbGMgLT0gYmFzZV9sZW5ndGhbY29kZTJdOwogICAgICAgICAgICBzZW5kX2JpdHMocywgbGMsIGV4dHJhKTsKICAgICAgICAgIH0KICAgICAgICAgIGRpc3QyLS07CiAgICAgICAgICBjb2RlMiA9IGRfY29kZShkaXN0Mik7CiAgICAgICAgICBzZW5kX2NvZGUocywgY29kZTIsIGR0cmVlKTsKICAgICAgICAgIGV4dHJhID0gZXh0cmFfZGJpdHNbY29kZTJdOwogICAgICAgICAgaWYgKGV4dHJhICE9PSAwKSB7CiAgICAgICAgICAgIGRpc3QyIC09IGJhc2VfZGlzdFtjb2RlMl07CiAgICAgICAgICAgIHNlbmRfYml0cyhzLCBkaXN0MiwgZXh0cmEpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSB3aGlsZSAobHggPCBzLmxhc3RfbGl0KTsKICAgIH0KICAgIHNlbmRfY29kZShzLCBFTkRfQkxPQ0ssIGx0cmVlKTsKICB9CiAgZnVuY3Rpb24gYnVpbGRfdHJlZShzLCBkZXNjKSB7CiAgICB2YXIgdHJlZSA9IGRlc2MuZHluX3RyZWU7CiAgICB2YXIgc3RyZWUgPSBkZXNjLnN0YXRfZGVzYy5zdGF0aWNfdHJlZTsKICAgIHZhciBoYXNfc3RyZWUgPSBkZXNjLnN0YXRfZGVzYy5oYXNfc3RyZWU7CiAgICB2YXIgZWxlbXMgPSBkZXNjLnN0YXRfZGVzYy5lbGVtczsKICAgIHZhciBuLCBtOwogICAgdmFyIG1heF9jb2RlID0gLTE7CiAgICB2YXIgbm9kZTI7CiAgICBzLmhlYXBfbGVuID0gMDsKICAgIHMuaGVhcF9tYXggPSBIRUFQX1NJWkUkMTsKICAgIGZvciAobiA9IDA7IG4gPCBlbGVtczsgbisrKSB7CiAgICAgIGlmICh0cmVlW24gKiAyXSAhPT0gMCkgewogICAgICAgIHMuaGVhcFsrK3MuaGVhcF9sZW5dID0gbWF4X2NvZGUgPSBuOwogICAgICAgIHMuZGVwdGhbbl0gPSAwOwogICAgICB9IGVsc2UgewogICAgICAgIHRyZWVbbiAqIDIgKyAxXSA9IDA7CiAgICAgIH0KICAgIH0KICAgIHdoaWxlIChzLmhlYXBfbGVuIDwgMikgewogICAgICBub2RlMiA9IHMuaGVhcFsrK3MuaGVhcF9sZW5dID0gbWF4X2NvZGUgPCAyID8gKyttYXhfY29kZSA6IDA7CiAgICAgIHRyZWVbbm9kZTIgKiAyXSA9IDE7CiAgICAgIHMuZGVwdGhbbm9kZTJdID0gMDsKICAgICAgcy5vcHRfbGVuLS07CiAgICAgIGlmIChoYXNfc3RyZWUpIHsKICAgICAgICBzLnN0YXRpY19sZW4gLT0gc3RyZWVbbm9kZTIgKiAyICsgMV07CiAgICAgIH0KICAgIH0KICAgIGRlc2MubWF4X2NvZGUgPSBtYXhfY29kZTsKICAgIGZvciAobiA9IHMuaGVhcF9sZW4gPj4gMTsgbiA+PSAxOyBuLS0pIHsKICAgICAgcHFkb3duaGVhcChzLCB0cmVlLCBuKTsKICAgIH0KICAgIG5vZGUyID0gZWxlbXM7CiAgICBkbyB7CiAgICAgIG4gPSBzLmhlYXBbMV07CiAgICAgIHMuaGVhcFsxXSA9IHMuaGVhcFtzLmhlYXBfbGVuLS1dOwogICAgICBwcWRvd25oZWFwKHMsIHRyZWUsIDEpOwogICAgICBtID0gcy5oZWFwWzFdOwogICAgICBzLmhlYXBbLS1zLmhlYXBfbWF4XSA9IG47CiAgICAgIHMuaGVhcFstLXMuaGVhcF9tYXhdID0gbTsKICAgICAgdHJlZVtub2RlMiAqIDJdID0gdHJlZVtuICogMl0gKyB0cmVlW20gKiAyXTsKICAgICAgcy5kZXB0aFtub2RlMl0gPSAocy5kZXB0aFtuXSA+PSBzLmRlcHRoW21dID8gcy5kZXB0aFtuXSA6IHMuZGVwdGhbbV0pICsgMTsKICAgICAgdHJlZVtuICogMiArIDFdID0gdHJlZVttICogMiArIDFdID0gbm9kZTI7CiAgICAgIHMuaGVhcFsxXSA9IG5vZGUyKys7CiAgICAgIHBxZG93bmhlYXAocywgdHJlZSwgMSk7CiAgICB9IHdoaWxlIChzLmhlYXBfbGVuID49IDIpOwogICAgcy5oZWFwWy0tcy5oZWFwX21heF0gPSBzLmhlYXBbMV07CiAgICBnZW5fYml0bGVuKHMsIGRlc2MpOwogICAgZ2VuX2NvZGVzKHRyZWUsIG1heF9jb2RlLCBzLmJsX2NvdW50KTsKICB9CiAgZnVuY3Rpb24gc2Nhbl90cmVlKHMsIHRyZWUsIG1heF9jb2RlKSB7CiAgICB2YXIgbjsKICAgIHZhciBwcmV2bGVuID0gLTE7CiAgICB2YXIgY3VybGVuOwogICAgdmFyIG5leHRsZW4gPSB0cmVlWzAgKiAyICsgMV07CiAgICB2YXIgY291bnQgPSAwOwogICAgdmFyIG1heF9jb3VudCA9IDc7CiAgICB2YXIgbWluX2NvdW50ID0gNDsKICAgIGlmIChuZXh0bGVuID09PSAwKSB7CiAgICAgIG1heF9jb3VudCA9IDEzODsKICAgICAgbWluX2NvdW50ID0gMzsKICAgIH0KICAgIHRyZWVbKG1heF9jb2RlICsgMSkgKiAyICsgMV0gPSA2NTUzNTsKICAgIGZvciAobiA9IDA7IG4gPD0gbWF4X2NvZGU7IG4rKykgewogICAgICBjdXJsZW4gPSBuZXh0bGVuOwogICAgICBuZXh0bGVuID0gdHJlZVsobiArIDEpICogMiArIDFdOwogICAgICBpZiAoKytjb3VudCA8IG1heF9jb3VudCAmJiBjdXJsZW4gPT09IG5leHRsZW4pIHsKICAgICAgICBjb250aW51ZTsKICAgICAgfSBlbHNlIGlmIChjb3VudCA8IG1pbl9jb3VudCkgewogICAgICAgIHMuYmxfdHJlZVtjdXJsZW4gKiAyXSArPSBjb3VudDsKICAgICAgfSBlbHNlIGlmIChjdXJsZW4gIT09IDApIHsKICAgICAgICBpZiAoY3VybGVuICE9PSBwcmV2bGVuKSB7CiAgICAgICAgICBzLmJsX3RyZWVbY3VybGVuICogMl0rKzsKICAgICAgICB9CiAgICAgICAgcy5ibF90cmVlW1JFUF8zXzYgKiAyXSsrOwogICAgICB9IGVsc2UgaWYgKGNvdW50IDw9IDEwKSB7CiAgICAgICAgcy5ibF90cmVlW1JFUFpfM18xMCAqIDJdKys7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcy5ibF90cmVlW1JFUFpfMTFfMTM4ICogMl0rKzsKICAgICAgfQogICAgICBjb3VudCA9IDA7CiAgICAgIHByZXZsZW4gPSBjdXJsZW47CiAgICAgIGlmIChuZXh0bGVuID09PSAwKSB7CiAgICAgICAgbWF4X2NvdW50ID0gMTM4OwogICAgICAgIG1pbl9jb3VudCA9IDM7CiAgICAgIH0gZWxzZSBpZiAoY3VybGVuID09PSBuZXh0bGVuKSB7CiAgICAgICAgbWF4X2NvdW50ID0gNjsKICAgICAgICBtaW5fY291bnQgPSAzOwogICAgICB9IGVsc2UgewogICAgICAgIG1heF9jb3VudCA9IDc7CiAgICAgICAgbWluX2NvdW50ID0gNDsKICAgICAgfQogICAgfQogIH0KICBmdW5jdGlvbiBzZW5kX3RyZWUocywgdHJlZSwgbWF4X2NvZGUpIHsKICAgIHZhciBuOwogICAgdmFyIHByZXZsZW4gPSAtMTsKICAgIHZhciBjdXJsZW47CiAgICB2YXIgbmV4dGxlbiA9IHRyZWVbMCAqIDIgKyAxXTsKICAgIHZhciBjb3VudCA9IDA7CiAgICB2YXIgbWF4X2NvdW50ID0gNzsKICAgIHZhciBtaW5fY291bnQgPSA0OwogICAgaWYgKG5leHRsZW4gPT09IDApIHsKICAgICAgbWF4X2NvdW50ID0gMTM4OwogICAgICBtaW5fY291bnQgPSAzOwogICAgfQogICAgZm9yIChuID0gMDsgbiA8PSBtYXhfY29kZTsgbisrKSB7CiAgICAgIGN1cmxlbiA9IG5leHRsZW47CiAgICAgIG5leHRsZW4gPSB0cmVlWyhuICsgMSkgKiAyICsgMV07CiAgICAgIGlmICgrK2NvdW50IDwgbWF4X2NvdW50ICYmIGN1cmxlbiA9PT0gbmV4dGxlbikgewogICAgICAgIGNvbnRpbnVlOwogICAgICB9IGVsc2UgaWYgKGNvdW50IDwgbWluX2NvdW50KSB7CiAgICAgICAgZG8gewogICAgICAgICAgc2VuZF9jb2RlKHMsIGN1cmxlbiwgcy5ibF90cmVlKTsKICAgICAgICB9IHdoaWxlICgtLWNvdW50ICE9PSAwKTsKICAgICAgfSBlbHNlIGlmIChjdXJsZW4gIT09IDApIHsKICAgICAgICBpZiAoY3VybGVuICE9PSBwcmV2bGVuKSB7CiAgICAgICAgICBzZW5kX2NvZGUocywgY3VybGVuLCBzLmJsX3RyZWUpOwogICAgICAgICAgY291bnQtLTsKICAgICAgICB9CiAgICAgICAgc2VuZF9jb2RlKHMsIFJFUF8zXzYsIHMuYmxfdHJlZSk7CiAgICAgICAgc2VuZF9iaXRzKHMsIGNvdW50IC0gMywgMik7CiAgICAgIH0gZWxzZSBpZiAoY291bnQgPD0gMTApIHsKICAgICAgICBzZW5kX2NvZGUocywgUkVQWl8zXzEwLCBzLmJsX3RyZWUpOwogICAgICAgIHNlbmRfYml0cyhzLCBjb3VudCAtIDMsIDMpOwogICAgICB9IGVsc2UgewogICAgICAgIHNlbmRfY29kZShzLCBSRVBaXzExXzEzOCwgcy5ibF90cmVlKTsKICAgICAgICBzZW5kX2JpdHMocywgY291bnQgLSAxMSwgNyk7CiAgICAgIH0KICAgICAgY291bnQgPSAwOwogICAgICBwcmV2bGVuID0gY3VybGVuOwogICAgICBpZiAobmV4dGxlbiA9PT0gMCkgewogICAgICAgIG1heF9jb3VudCA9IDEzODsKICAgICAgICBtaW5fY291bnQgPSAzOwogICAgICB9IGVsc2UgaWYgKGN1cmxlbiA9PT0gbmV4dGxlbikgewogICAgICAgIG1heF9jb3VudCA9IDY7CiAgICAgICAgbWluX2NvdW50ID0gMzsKICAgICAgfSBlbHNlIHsKICAgICAgICBtYXhfY291bnQgPSA3OwogICAgICAgIG1pbl9jb3VudCA9IDQ7CiAgICAgIH0KICAgIH0KICB9CiAgZnVuY3Rpb24gYnVpbGRfYmxfdHJlZShzKSB7CiAgICB2YXIgbWF4X2JsaW5kZXg7CiAgICBzY2FuX3RyZWUocywgcy5keW5fbHRyZWUsIHMubF9kZXNjLm1heF9jb2RlKTsKICAgIHNjYW5fdHJlZShzLCBzLmR5bl9kdHJlZSwgcy5kX2Rlc2MubWF4X2NvZGUpOwogICAgYnVpbGRfdHJlZShzLCBzLmJsX2Rlc2MpOwogICAgZm9yIChtYXhfYmxpbmRleCA9IEJMX0NPREVTJDEgLSAxOyBtYXhfYmxpbmRleCA+PSAzOyBtYXhfYmxpbmRleC0tKSB7CiAgICAgIGlmIChzLmJsX3RyZWVbYmxfb3JkZXJbbWF4X2JsaW5kZXhdICogMiArIDFdICE9PSAwKSB7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KICAgIHMub3B0X2xlbiArPSAzICogKG1heF9ibGluZGV4ICsgMSkgKyA1ICsgNSArIDQ7CiAgICByZXR1cm4gbWF4X2JsaW5kZXg7CiAgfQogIGZ1bmN0aW9uIHNlbmRfYWxsX3RyZWVzKHMsIGxjb2RlcywgZGNvZGVzLCBibGNvZGVzKSB7CiAgICB2YXIgcmFuazI7CiAgICBzZW5kX2JpdHMocywgbGNvZGVzIC0gMjU3LCA1KTsKICAgIHNlbmRfYml0cyhzLCBkY29kZXMgLSAxLCA1KTsKICAgIHNlbmRfYml0cyhzLCBibGNvZGVzIC0gNCwgNCk7CiAgICBmb3IgKHJhbmsyID0gMDsgcmFuazIgPCBibGNvZGVzOyByYW5rMisrKSB7CiAgICAgIHNlbmRfYml0cyhzLCBzLmJsX3RyZWVbYmxfb3JkZXJbcmFuazJdICogMiArIDFdLCAzKTsKICAgIH0KICAgIHNlbmRfdHJlZShzLCBzLmR5bl9sdHJlZSwgbGNvZGVzIC0gMSk7CiAgICBzZW5kX3RyZWUocywgcy5keW5fZHRyZWUsIGRjb2RlcyAtIDEpOwogIH0KICBmdW5jdGlvbiBkZXRlY3RfZGF0YV90eXBlKHMpIHsKICAgIHZhciBibGFja19tYXNrID0gNDA5MzYyNDQ0NzsKICAgIHZhciBuOwogICAgZm9yIChuID0gMDsgbiA8PSAzMTsgbisrLCBibGFja19tYXNrID4+Pj0gMSkgewogICAgICBpZiAoYmxhY2tfbWFzayAmIDEgJiYgcy5keW5fbHRyZWVbbiAqIDJdICE9PSAwKSB7CiAgICAgICAgcmV0dXJuIFpfQklOQVJZOwogICAgICB9CiAgICB9CiAgICBpZiAocy5keW5fbHRyZWVbOSAqIDJdICE9PSAwIHx8IHMuZHluX2x0cmVlWzEwICogMl0gIT09IDAgfHwgcy5keW5fbHRyZWVbMTMgKiAyXSAhPT0gMCkgewogICAgICByZXR1cm4gWl9URVhUOwogICAgfQogICAgZm9yIChuID0gMzI7IG4gPCBMSVRFUkFMUyQxOyBuKyspIHsKICAgICAgaWYgKHMuZHluX2x0cmVlW24gKiAyXSAhPT0gMCkgewogICAgICAgIHJldHVybiBaX1RFWFQ7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBaX0JJTkFSWTsKICB9CiAgdmFyIHN0YXRpY19pbml0X2RvbmUgPSBmYWxzZTsKICBmdW5jdGlvbiBfdHJfaW5pdChzKSB7CiAgICBpZiAoIXN0YXRpY19pbml0X2RvbmUpIHsKICAgICAgdHJfc3RhdGljX2luaXQoKTsKICAgICAgc3RhdGljX2luaXRfZG9uZSA9IHRydWU7CiAgICB9CiAgICBzLmxfZGVzYyA9IG5ldyBUcmVlRGVzYyhzLmR5bl9sdHJlZSwgc3RhdGljX2xfZGVzYyk7CiAgICBzLmRfZGVzYyA9IG5ldyBUcmVlRGVzYyhzLmR5bl9kdHJlZSwgc3RhdGljX2RfZGVzYyk7CiAgICBzLmJsX2Rlc2MgPSBuZXcgVHJlZURlc2Mocy5ibF90cmVlLCBzdGF0aWNfYmxfZGVzYyk7CiAgICBzLmJpX2J1ZiA9IDA7CiAgICBzLmJpX3ZhbGlkID0gMDsKICAgIGluaXRfYmxvY2socyk7CiAgfQogIGZ1bmN0aW9uIF90cl9zdG9yZWRfYmxvY2socywgYnVmLCBzdG9yZWRfbGVuLCBsYXN0MikgewogICAgc2VuZF9iaXRzKHMsIChTVE9SRURfQkxPQ0sgPDwgMSkgKyAobGFzdDIgPyAxIDogMCksIDMpOwogICAgY29weV9ibG9jayhzLCBidWYsIHN0b3JlZF9sZW4sIHRydWUpOwogIH0KICBmdW5jdGlvbiBfdHJfYWxpZ24ocykgewogICAgc2VuZF9iaXRzKHMsIFNUQVRJQ19UUkVFUyA8PCAxLCAzKTsKICAgIHNlbmRfY29kZShzLCBFTkRfQkxPQ0ssIHN0YXRpY19sdHJlZSk7CiAgICBiaV9mbHVzaChzKTsKICB9CiAgZnVuY3Rpb24gX3RyX2ZsdXNoX2Jsb2NrKHMsIGJ1Ziwgc3RvcmVkX2xlbiwgbGFzdDIpIHsKICAgIHZhciBvcHRfbGVuYiwgc3RhdGljX2xlbmI7CiAgICB2YXIgbWF4X2JsaW5kZXggPSAwOwogICAgaWYgKHMubGV2ZWwgPiAwKSB7CiAgICAgIGlmIChzLnN0cm0uZGF0YV90eXBlID09PSBaX1VOS05PV04kMSkgewogICAgICAgIHMuc3RybS5kYXRhX3R5cGUgPSBkZXRlY3RfZGF0YV90eXBlKHMpOwogICAgICB9CiAgICAgIGJ1aWxkX3RyZWUocywgcy5sX2Rlc2MpOwogICAgICBidWlsZF90cmVlKHMsIHMuZF9kZXNjKTsKICAgICAgbWF4X2JsaW5kZXggPSBidWlsZF9ibF90cmVlKHMpOwogICAgICBvcHRfbGVuYiA9IHMub3B0X2xlbiArIDMgKyA3ID4+PiAzOwogICAgICBzdGF0aWNfbGVuYiA9IHMuc3RhdGljX2xlbiArIDMgKyA3ID4+PiAzOwogICAgICBpZiAoc3RhdGljX2xlbmIgPD0gb3B0X2xlbmIpIHsKICAgICAgICBvcHRfbGVuYiA9IHN0YXRpY19sZW5iOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBvcHRfbGVuYiA9IHN0YXRpY19sZW5iID0gc3RvcmVkX2xlbiArIDU7CiAgICB9CiAgICBpZiAoc3RvcmVkX2xlbiArIDQgPD0gb3B0X2xlbmIgJiYgYnVmICE9PSAtMSkgewogICAgICBfdHJfc3RvcmVkX2Jsb2NrKHMsIGJ1Ziwgc3RvcmVkX2xlbiwgbGFzdDIpOwogICAgfSBlbHNlIGlmIChzLnN0cmF0ZWd5ID09PSBaX0ZJWEVEJDEgfHwgc3RhdGljX2xlbmIgPT09IG9wdF9sZW5iKSB7CiAgICAgIHNlbmRfYml0cyhzLCAoU1RBVElDX1RSRUVTIDw8IDEpICsgKGxhc3QyID8gMSA6IDApLCAzKTsKICAgICAgY29tcHJlc3NfYmxvY2socywgc3RhdGljX2x0cmVlLCBzdGF0aWNfZHRyZWUpOwogICAgfSBlbHNlIHsKICAgICAgc2VuZF9iaXRzKHMsIChEWU5fVFJFRVMgPDwgMSkgKyAobGFzdDIgPyAxIDogMCksIDMpOwogICAgICBzZW5kX2FsbF90cmVlcyhzLCBzLmxfZGVzYy5tYXhfY29kZSArIDEsIHMuZF9kZXNjLm1heF9jb2RlICsgMSwgbWF4X2JsaW5kZXggKyAxKTsKICAgICAgY29tcHJlc3NfYmxvY2socywgcy5keW5fbHRyZWUsIHMuZHluX2R0cmVlKTsKICAgIH0KICAgIGluaXRfYmxvY2socyk7CiAgICBpZiAobGFzdDIpIHsKICAgICAgYmlfd2luZHVwKHMpOwogICAgfQogIH0KICBmdW5jdGlvbiBfdHJfdGFsbHkocywgZGlzdDIsIGxjKSB7CiAgICBzLnBlbmRpbmdfYnVmW3MuZF9idWYgKyBzLmxhc3RfbGl0ICogMl0gPSBkaXN0MiA+Pj4gOCAmIDI1NTsKICAgIHMucGVuZGluZ19idWZbcy5kX2J1ZiArIHMubGFzdF9saXQgKiAyICsgMV0gPSBkaXN0MiAmIDI1NTsKICAgIHMucGVuZGluZ19idWZbcy5sX2J1ZiArIHMubGFzdF9saXRdID0gbGMgJiAyNTU7CiAgICBzLmxhc3RfbGl0Kys7CiAgICBpZiAoZGlzdDIgPT09IDApIHsKICAgICAgcy5keW5fbHRyZWVbbGMgKiAyXSsrOwogICAgfSBlbHNlIHsKICAgICAgcy5tYXRjaGVzKys7CiAgICAgIGRpc3QyLS07CiAgICAgIHMuZHluX2x0cmVlWyhfbGVuZ3RoX2NvZGVbbGNdICsgTElURVJBTFMkMSArIDEpICogMl0rKzsKICAgICAgcy5keW5fZHRyZWVbZF9jb2RlKGRpc3QyKSAqIDJdKys7CiAgICB9CiAgICByZXR1cm4gcy5sYXN0X2xpdCA9PT0gcy5saXRfYnVmc2l6ZSAtIDE7CiAgfQogIHRyZWVzJDEuX3RyX2luaXQgPSBfdHJfaW5pdDsKICB0cmVlcyQxLl90cl9zdG9yZWRfYmxvY2sgPSBfdHJfc3RvcmVkX2Jsb2NrOwogIHRyZWVzJDEuX3RyX2ZsdXNoX2Jsb2NrID0gX3RyX2ZsdXNoX2Jsb2NrOwogIHRyZWVzJDEuX3RyX3RhbGx5ID0gX3RyX3RhbGx5OwogIHRyZWVzJDEuX3RyX2FsaWduID0gX3RyX2FsaWduOwogIGZ1bmN0aW9uIGFkbGVyMzIkMihhZGxlciwgYnVmLCBsZW4yLCBwb3MpIHsKICAgIHZhciBzMSA9IGFkbGVyICYgNjU1MzUgfCAwLCBzMiA9IGFkbGVyID4+PiAxNiAmIDY1NTM1IHwgMCwgbiA9IDA7CiAgICB3aGlsZSAobGVuMiAhPT0gMCkgewogICAgICBuID0gbGVuMiA+IDJlMyA/IDJlMyA6IGxlbjI7CiAgICAgIGxlbjIgLT0gbjsKICAgICAgZG8gewogICAgICAgIHMxID0gczEgKyBidWZbcG9zKytdIHwgMDsKICAgICAgICBzMiA9IHMyICsgczEgfCAwOwogICAgICB9IHdoaWxlICgtLW4pOwogICAgICBzMSAlPSA2NTUyMTsKICAgICAgczIgJT0gNjU1MjE7CiAgICB9CiAgICByZXR1cm4gczEgfCBzMiA8PCAxNiB8IDA7CiAgfQogIHZhciBhZGxlcjMyXzEgPSBhZGxlcjMyJDI7CiAgZnVuY3Rpb24gbWFrZVRhYmxlKCkgewogICAgdmFyIGMyLCB0YWJsZSA9IFtdOwogICAgZm9yICh2YXIgbiA9IDA7IG4gPCAyNTY7IG4rKykgewogICAgICBjMiA9IG47CiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgODsgaysrKSB7CiAgICAgICAgYzIgPSBjMiAmIDEgPyAzOTg4MjkyMzg0IF4gYzIgPj4+IDEgOiBjMiA+Pj4gMTsKICAgICAgfQogICAgICB0YWJsZVtuXSA9IGMyOwogICAgfQogICAgcmV0dXJuIHRhYmxlOwogIH0KICB2YXIgY3JjVGFibGUgPSBtYWtlVGFibGUoKTsKICBmdW5jdGlvbiBjcmMzMiQzKGNyYywgYnVmLCBsZW4yLCBwb3MpIHsKICAgIHZhciB0ID0gY3JjVGFibGUsIGVuZCA9IHBvcyArIGxlbjI7CiAgICBjcmMgXj0gLTE7CiAgICBmb3IgKHZhciBpMiA9IHBvczsgaTIgPCBlbmQ7IGkyKyspIHsKICAgICAgY3JjID0gY3JjID4+PiA4IF4gdFsoY3JjIF4gYnVmW2kyXSkgJiAyNTVdOwogICAgfQogICAgcmV0dXJuIGNyYyBeIC0xOwogIH0KICB2YXIgY3JjMzJfMSA9IGNyYzMyJDM7CiAgdmFyIG1lc3NhZ2VzID0gewogICAgMjogIm5lZWQgZGljdGlvbmFyeSIsCiAgICAxOiAic3RyZWFtIGVuZCIsCiAgICAwOiAiIiwKICAgICItMSI6ICJmaWxlIGVycm9yIiwKICAgICItMiI6ICJzdHJlYW0gZXJyb3IiLAogICAgIi0zIjogImRhdGEgZXJyb3IiLAogICAgIi00IjogImluc3VmZmljaWVudCBtZW1vcnkiLAogICAgIi01IjogImJ1ZmZlciBlcnJvciIsCiAgICAiLTYiOiAiaW5jb21wYXRpYmxlIHZlcnNpb24iCiAgfTsKICB2YXIgdXRpbHMkNSA9IGNvbW1vbjsKICB2YXIgdHJlZXMgPSB0cmVlcyQxOwogIHZhciBhZGxlcjMyJDEgPSBhZGxlcjMyXzE7CiAgdmFyIGNyYzMyJDIgPSBjcmMzMl8xOwogIHZhciBtc2ckMiA9IG1lc3NhZ2VzOwogIHZhciBaX05PX0ZMVVNIJDEgPSAwOwogIHZhciBaX1BBUlRJQUxfRkxVU0ggPSAxOwogIHZhciBaX0ZVTExfRkxVU0ggPSAzOwogIHZhciBaX0ZJTklTSCQyID0gNDsKICB2YXIgWl9CTE9DSyQxID0gNTsKICB2YXIgWl9PSyQyID0gMDsKICB2YXIgWl9TVFJFQU1fRU5EJDIgPSAxOwogIHZhciBaX1NUUkVBTV9FUlJPUiQxID0gLTI7CiAgdmFyIFpfREFUQV9FUlJPUiQxID0gLTM7CiAgdmFyIFpfQlVGX0VSUk9SJDEgPSAtNTsKICB2YXIgWl9ERUZBVUxUX0NPTVBSRVNTSU9OJDEgPSAtMTsKICB2YXIgWl9GSUxURVJFRCA9IDE7CiAgdmFyIFpfSFVGRk1BTl9PTkxZID0gMjsKICB2YXIgWl9STEUgPSAzOwogIHZhciBaX0ZJWEVEID0gNDsKICB2YXIgWl9ERUZBVUxUX1NUUkFURUdZJDEgPSAwOwogIHZhciBaX1VOS05PV04gPSAyOwogIHZhciBaX0RFRkxBVEVEJDIgPSA4OwogIHZhciBNQVhfTUVNX0xFVkVMID0gOTsKICB2YXIgTUFYX1dCSVRTJDEgPSAxNTsKICB2YXIgREVGX01FTV9MRVZFTCA9IDg7CiAgdmFyIExFTkdUSF9DT0RFUyA9IDI5OwogIHZhciBMSVRFUkFMUyA9IDI1NjsKICB2YXIgTF9DT0RFUyA9IExJVEVSQUxTICsgMSArIExFTkdUSF9DT0RFUzsKICB2YXIgRF9DT0RFUyA9IDMwOwogIHZhciBCTF9DT0RFUyA9IDE5OwogIHZhciBIRUFQX1NJWkUgPSAyICogTF9DT0RFUyArIDE7CiAgdmFyIE1BWF9CSVRTID0gMTU7CiAgdmFyIE1JTl9NQVRDSCA9IDM7CiAgdmFyIE1BWF9NQVRDSCA9IDI1ODsKICB2YXIgTUlOX0xPT0tBSEVBRCA9IE1BWF9NQVRDSCArIE1JTl9NQVRDSCArIDE7CiAgdmFyIFBSRVNFVF9ESUNUID0gMzI7CiAgdmFyIElOSVRfU1RBVEUgPSA0MjsKICB2YXIgRVhUUkFfU1RBVEUgPSA2OTsKICB2YXIgTkFNRV9TVEFURSA9IDczOwogIHZhciBDT01NRU5UX1NUQVRFID0gOTE7CiAgdmFyIEhDUkNfU1RBVEUgPSAxMDM7CiAgdmFyIEJVU1lfU1RBVEUgPSAxMTM7CiAgdmFyIEZJTklTSF9TVEFURSA9IDY2NjsKICB2YXIgQlNfTkVFRF9NT1JFID0gMTsKICB2YXIgQlNfQkxPQ0tfRE9ORSA9IDI7CiAgdmFyIEJTX0ZJTklTSF9TVEFSVEVEID0gMzsKICB2YXIgQlNfRklOSVNIX0RPTkUgPSA0OwogIHZhciBPU19DT0RFID0gMzsKICBmdW5jdGlvbiBlcnIoc3RybSwgZXJyb3JDb2RlKSB7CiAgICBzdHJtLm1zZyA9IG1zZyQyW2Vycm9yQ29kZV07CiAgICByZXR1cm4gZXJyb3JDb2RlOwogIH0KICBmdW5jdGlvbiByYW5rKGYpIHsKICAgIHJldHVybiAoZiA8PCAxKSAtIChmID4gNCA/IDkgOiAwKTsKICB9CiAgZnVuY3Rpb24gemVybyhidWYpIHsKICAgIHZhciBsZW4yID0gYnVmLmxlbmd0aDsKICAgIHdoaWxlICgtLWxlbjIgPj0gMCkgewogICAgICBidWZbbGVuMl0gPSAwOwogICAgfQogIH0KICBmdW5jdGlvbiBmbHVzaF9wZW5kaW5nKHN0cm0pIHsKICAgIHZhciBzID0gc3RybS5zdGF0ZTsKICAgIHZhciBsZW4yID0gcy5wZW5kaW5nOwogICAgaWYgKGxlbjIgPiBzdHJtLmF2YWlsX291dCkgewogICAgICBsZW4yID0gc3RybS5hdmFpbF9vdXQ7CiAgICB9CiAgICBpZiAobGVuMiA9PT0gMCkgewogICAgICByZXR1cm47CiAgICB9CiAgICB1dGlscyQ1LmFycmF5U2V0KHN0cm0ub3V0cHV0LCBzLnBlbmRpbmdfYnVmLCBzLnBlbmRpbmdfb3V0LCBsZW4yLCBzdHJtLm5leHRfb3V0KTsKICAgIHN0cm0ubmV4dF9vdXQgKz0gbGVuMjsKICAgIHMucGVuZGluZ19vdXQgKz0gbGVuMjsKICAgIHN0cm0udG90YWxfb3V0ICs9IGxlbjI7CiAgICBzdHJtLmF2YWlsX291dCAtPSBsZW4yOwogICAgcy5wZW5kaW5nIC09IGxlbjI7CiAgICBpZiAocy5wZW5kaW5nID09PSAwKSB7CiAgICAgIHMucGVuZGluZ19vdXQgPSAwOwogICAgfQogIH0KICBmdW5jdGlvbiBmbHVzaF9ibG9ja19vbmx5KHMsIGxhc3QyKSB7CiAgICB0cmVlcy5fdHJfZmx1c2hfYmxvY2socywgcy5ibG9ja19zdGFydCA+PSAwID8gcy5ibG9ja19zdGFydCA6IC0xLCBzLnN0cnN0YXJ0IC0gcy5ibG9ja19zdGFydCwgbGFzdDIpOwogICAgcy5ibG9ja19zdGFydCA9IHMuc3Ryc3RhcnQ7CiAgICBmbHVzaF9wZW5kaW5nKHMuc3RybSk7CiAgfQogIGZ1bmN0aW9uIHB1dF9ieXRlKHMsIGIpIHsKICAgIHMucGVuZGluZ19idWZbcy5wZW5kaW5nKytdID0gYjsKICB9CiAgZnVuY3Rpb24gcHV0U2hvcnRNU0IocywgYikgewogICAgcy5wZW5kaW5nX2J1ZltzLnBlbmRpbmcrK10gPSBiID4+PiA4ICYgMjU1OwogICAgcy5wZW5kaW5nX2J1ZltzLnBlbmRpbmcrK10gPSBiICYgMjU1OwogIH0KICBmdW5jdGlvbiByZWFkX2J1ZihzdHJtLCBidWYsIHN0YXJ0LCBzaXplKSB7CiAgICB2YXIgbGVuMiA9IHN0cm0uYXZhaWxfaW47CiAgICBpZiAobGVuMiA+IHNpemUpIHsKICAgICAgbGVuMiA9IHNpemU7CiAgICB9CiAgICBpZiAobGVuMiA9PT0gMCkgewogICAgICByZXR1cm4gMDsKICAgIH0KICAgIHN0cm0uYXZhaWxfaW4gLT0gbGVuMjsKICAgIHV0aWxzJDUuYXJyYXlTZXQoYnVmLCBzdHJtLmlucHV0LCBzdHJtLm5leHRfaW4sIGxlbjIsIHN0YXJ0KTsKICAgIGlmIChzdHJtLnN0YXRlLndyYXAgPT09IDEpIHsKICAgICAgc3RybS5hZGxlciA9IGFkbGVyMzIkMShzdHJtLmFkbGVyLCBidWYsIGxlbjIsIHN0YXJ0KTsKICAgIH0gZWxzZSBpZiAoc3RybS5zdGF0ZS53cmFwID09PSAyKSB7CiAgICAgIHN0cm0uYWRsZXIgPSBjcmMzMiQyKHN0cm0uYWRsZXIsIGJ1ZiwgbGVuMiwgc3RhcnQpOwogICAgfQogICAgc3RybS5uZXh0X2luICs9IGxlbjI7CiAgICBzdHJtLnRvdGFsX2luICs9IGxlbjI7CiAgICByZXR1cm4gbGVuMjsKICB9CiAgZnVuY3Rpb24gbG9uZ2VzdF9tYXRjaChzLCBjdXJfbWF0Y2gpIHsKICAgIHZhciBjaGFpbl9sZW5ndGggPSBzLm1heF9jaGFpbl9sZW5ndGg7CiAgICB2YXIgc2NhbiA9IHMuc3Ryc3RhcnQ7CiAgICB2YXIgbWF0Y2gyOwogICAgdmFyIGxlbjI7CiAgICB2YXIgYmVzdF9sZW4gPSBzLnByZXZfbGVuZ3RoOwogICAgdmFyIG5pY2VfbWF0Y2ggPSBzLm5pY2VfbWF0Y2g7CiAgICB2YXIgbGltaXQgPSBzLnN0cnN0YXJ0ID4gcy53X3NpemUgLSBNSU5fTE9PS0FIRUFEID8gcy5zdHJzdGFydCAtIChzLndfc2l6ZSAtIE1JTl9MT09LQUhFQUQpIDogMDsKICAgIHZhciBfd2luID0gcy53aW5kb3c7CiAgICB2YXIgd21hc2sgPSBzLndfbWFzazsKICAgIHZhciBwcmV2ID0gcy5wcmV2OwogICAgdmFyIHN0cmVuZCA9IHMuc3Ryc3RhcnQgKyBNQVhfTUFUQ0g7CiAgICB2YXIgc2Nhbl9lbmQxID0gX3dpbltzY2FuICsgYmVzdF9sZW4gLSAxXTsKICAgIHZhciBzY2FuX2VuZCA9IF93aW5bc2NhbiArIGJlc3RfbGVuXTsKICAgIGlmIChzLnByZXZfbGVuZ3RoID49IHMuZ29vZF9tYXRjaCkgewogICAgICBjaGFpbl9sZW5ndGggPj49IDI7CiAgICB9CiAgICBpZiAobmljZV9tYXRjaCA+IHMubG9va2FoZWFkKSB7CiAgICAgIG5pY2VfbWF0Y2ggPSBzLmxvb2thaGVhZDsKICAgIH0KICAgIGRvIHsKICAgICAgbWF0Y2gyID0gY3VyX21hdGNoOwogICAgICBpZiAoX3dpblttYXRjaDIgKyBiZXN0X2xlbl0gIT09IHNjYW5fZW5kIHx8IF93aW5bbWF0Y2gyICsgYmVzdF9sZW4gLSAxXSAhPT0gc2Nhbl9lbmQxIHx8IF93aW5bbWF0Y2gyXSAhPT0gX3dpbltzY2FuXSB8fCBfd2luWysrbWF0Y2gyXSAhPT0gX3dpbltzY2FuICsgMV0pIHsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICBzY2FuICs9IDI7CiAgICAgIG1hdGNoMisrOwogICAgICBkbyB7CiAgICAgIH0gd2hpbGUgKF93aW5bKytzY2FuXSA9PT0gX3dpblsrK21hdGNoMl0gJiYgX3dpblsrK3NjYW5dID09PSBfd2luWysrbWF0Y2gyXSAmJiBfd2luWysrc2Nhbl0gPT09IF93aW5bKyttYXRjaDJdICYmIF93aW5bKytzY2FuXSA9PT0gX3dpblsrK21hdGNoMl0gJiYgX3dpblsrK3NjYW5dID09PSBfd2luWysrbWF0Y2gyXSAmJiBfd2luWysrc2Nhbl0gPT09IF93aW5bKyttYXRjaDJdICYmIF93aW5bKytzY2FuXSA9PT0gX3dpblsrK21hdGNoMl0gJiYgX3dpblsrK3NjYW5dID09PSBfd2luWysrbWF0Y2gyXSAmJiBzY2FuIDwgc3RyZW5kKTsKICAgICAgbGVuMiA9IE1BWF9NQVRDSCAtIChzdHJlbmQgLSBzY2FuKTsKICAgICAgc2NhbiA9IHN0cmVuZCAtIE1BWF9NQVRDSDsKICAgICAgaWYgKGxlbjIgPiBiZXN0X2xlbikgewogICAgICAgIHMubWF0Y2hfc3RhcnQgPSBjdXJfbWF0Y2g7CiAgICAgICAgYmVzdF9sZW4gPSBsZW4yOwogICAgICAgIGlmIChsZW4yID49IG5pY2VfbWF0Y2gpIHsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgICBzY2FuX2VuZDEgPSBfd2luW3NjYW4gKyBiZXN0X2xlbiAtIDFdOwogICAgICAgIHNjYW5fZW5kID0gX3dpbltzY2FuICsgYmVzdF9sZW5dOwogICAgICB9CiAgICB9IHdoaWxlICgoY3VyX21hdGNoID0gcHJldltjdXJfbWF0Y2ggJiB3bWFza10pID4gbGltaXQgJiYgLS1jaGFpbl9sZW5ndGggIT09IDApOwogICAgaWYgKGJlc3RfbGVuIDw9IHMubG9va2FoZWFkKSB7CiAgICAgIHJldHVybiBiZXN0X2xlbjsKICAgIH0KICAgIHJldHVybiBzLmxvb2thaGVhZDsKICB9CiAgZnVuY3Rpb24gZmlsbF93aW5kb3cocykgewogICAgdmFyIF93X3NpemUgPSBzLndfc2l6ZTsKICAgIHZhciBwLCBuLCBtLCBtb3JlLCBzdHI7CiAgICBkbyB7CiAgICAgIG1vcmUgPSBzLndpbmRvd19zaXplIC0gcy5sb29rYWhlYWQgLSBzLnN0cnN0YXJ0OwogICAgICBpZiAocy5zdHJzdGFydCA+PSBfd19zaXplICsgKF93X3NpemUgLSBNSU5fTE9PS0FIRUFEKSkgewogICAgICAgIHV0aWxzJDUuYXJyYXlTZXQocy53aW5kb3csIHMud2luZG93LCBfd19zaXplLCBfd19zaXplLCAwKTsKICAgICAgICBzLm1hdGNoX3N0YXJ0IC09IF93X3NpemU7CiAgICAgICAgcy5zdHJzdGFydCAtPSBfd19zaXplOwogICAgICAgIHMuYmxvY2tfc3RhcnQgLT0gX3dfc2l6ZTsKICAgICAgICBuID0gcy5oYXNoX3NpemU7CiAgICAgICAgcCA9IG47CiAgICAgICAgZG8gewogICAgICAgICAgbSA9IHMuaGVhZFstLXBdOwogICAgICAgICAgcy5oZWFkW3BdID0gbSA+PSBfd19zaXplID8gbSAtIF93X3NpemUgOiAwOwogICAgICAgIH0gd2hpbGUgKC0tbik7CiAgICAgICAgbiA9IF93X3NpemU7CiAgICAgICAgcCA9IG47CiAgICAgICAgZG8gewogICAgICAgICAgbSA9IHMucHJldlstLXBdOwogICAgICAgICAgcy5wcmV2W3BdID0gbSA+PSBfd19zaXplID8gbSAtIF93X3NpemUgOiAwOwogICAgICAgIH0gd2hpbGUgKC0tbik7CiAgICAgICAgbW9yZSArPSBfd19zaXplOwogICAgICB9CiAgICAgIGlmIChzLnN0cm0uYXZhaWxfaW4gPT09IDApIHsKICAgICAgICBicmVhazsKICAgICAgfQogICAgICBuID0gcmVhZF9idWYocy5zdHJtLCBzLndpbmRvdywgcy5zdHJzdGFydCArIHMubG9va2FoZWFkLCBtb3JlKTsKICAgICAgcy5sb29rYWhlYWQgKz0gbjsKICAgICAgaWYgKHMubG9va2FoZWFkICsgcy5pbnNlcnQgPj0gTUlOX01BVENIKSB7CiAgICAgICAgc3RyID0gcy5zdHJzdGFydCAtIHMuaW5zZXJ0OwogICAgICAgIHMuaW5zX2ggPSBzLndpbmRvd1tzdHJdOwogICAgICAgIHMuaW5zX2ggPSAocy5pbnNfaCA8PCBzLmhhc2hfc2hpZnQgXiBzLndpbmRvd1tzdHIgKyAxXSkgJiBzLmhhc2hfbWFzazsKICAgICAgICB3aGlsZSAocy5pbnNlcnQpIHsKICAgICAgICAgIHMuaW5zX2ggPSAocy5pbnNfaCA8PCBzLmhhc2hfc2hpZnQgXiBzLndpbmRvd1tzdHIgKyBNSU5fTUFUQ0ggLSAxXSkgJiBzLmhhc2hfbWFzazsKICAgICAgICAgIHMucHJldltzdHIgJiBzLndfbWFza10gPSBzLmhlYWRbcy5pbnNfaF07CiAgICAgICAgICBzLmhlYWRbcy5pbnNfaF0gPSBzdHI7CiAgICAgICAgICBzdHIrKzsKICAgICAgICAgIHMuaW5zZXJ0LS07CiAgICAgICAgICBpZiAocy5sb29rYWhlYWQgKyBzLmluc2VydCA8IE1JTl9NQVRDSCkgewogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0gd2hpbGUgKHMubG9va2FoZWFkIDwgTUlOX0xPT0tBSEVBRCAmJiBzLnN0cm0uYXZhaWxfaW4gIT09IDApOwogIH0KICBmdW5jdGlvbiBkZWZsYXRlX3N0b3JlZChzLCBmbHVzaDIpIHsKICAgIHZhciBtYXhfYmxvY2tfc2l6ZSA9IDY1NTM1OwogICAgaWYgKG1heF9ibG9ja19zaXplID4gcy5wZW5kaW5nX2J1Zl9zaXplIC0gNSkgewogICAgICBtYXhfYmxvY2tfc2l6ZSA9IHMucGVuZGluZ19idWZfc2l6ZSAtIDU7CiAgICB9CiAgICBmb3IgKDsgOyApIHsKICAgICAgaWYgKHMubG9va2FoZWFkIDw9IDEpIHsKICAgICAgICBmaWxsX3dpbmRvdyhzKTsKICAgICAgICBpZiAocy5sb29rYWhlYWQgPT09IDAgJiYgZmx1c2gyID09PSBaX05PX0ZMVVNIJDEpIHsKICAgICAgICAgIHJldHVybiBCU19ORUVEX01PUkU7CiAgICAgICAgfQogICAgICAgIGlmIChzLmxvb2thaGVhZCA9PT0gMCkgewogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICAgIHMuc3Ryc3RhcnQgKz0gcy5sb29rYWhlYWQ7CiAgICAgIHMubG9va2FoZWFkID0gMDsKICAgICAgdmFyIG1heF9zdGFydCA9IHMuYmxvY2tfc3RhcnQgKyBtYXhfYmxvY2tfc2l6ZTsKICAgICAgaWYgKHMuc3Ryc3RhcnQgPT09IDAgfHwgcy5zdHJzdGFydCA+PSBtYXhfc3RhcnQpIHsKICAgICAgICBzLmxvb2thaGVhZCA9IHMuc3Ryc3RhcnQgLSBtYXhfc3RhcnQ7CiAgICAgICAgcy5zdHJzdGFydCA9IG1heF9zdGFydDsKICAgICAgICBmbHVzaF9ibG9ja19vbmx5KHMsIGZhbHNlKTsKICAgICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgICAgcmV0dXJuIEJTX05FRURfTU9SRTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKHMuc3Ryc3RhcnQgLSBzLmJsb2NrX3N0YXJ0ID49IHMud19zaXplIC0gTUlOX0xPT0tBSEVBRCkgewogICAgICAgIGZsdXNoX2Jsb2NrX29ubHkocywgZmFsc2UpOwogICAgICAgIGlmIChzLnN0cm0uYXZhaWxfb3V0ID09PSAwKSB7CiAgICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcy5pbnNlcnQgPSAwOwogICAgaWYgKGZsdXNoMiA9PT0gWl9GSU5JU0gkMikgewogICAgICBmbHVzaF9ibG9ja19vbmx5KHMsIHRydWUpOwogICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgIHJldHVybiBCU19GSU5JU0hfU1RBUlRFRDsKICAgICAgfQogICAgICByZXR1cm4gQlNfRklOSVNIX0RPTkU7CiAgICB9CiAgICBpZiAocy5zdHJzdGFydCA+IHMuYmxvY2tfc3RhcnQpIHsKICAgICAgZmx1c2hfYmxvY2tfb25seShzLCBmYWxzZSk7CiAgICAgIGlmIChzLnN0cm0uYXZhaWxfb3V0ID09PSAwKSB7CiAgICAgICAgcmV0dXJuIEJTX05FRURfTU9SRTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIEJTX05FRURfTU9SRTsKICB9CiAgZnVuY3Rpb24gZGVmbGF0ZV9mYXN0KHMsIGZsdXNoMikgewogICAgdmFyIGhhc2hfaGVhZDsKICAgIHZhciBiZmx1c2g7CiAgICBmb3IgKDsgOyApIHsKICAgICAgaWYgKHMubG9va2FoZWFkIDwgTUlOX0xPT0tBSEVBRCkgewogICAgICAgIGZpbGxfd2luZG93KHMpOwogICAgICAgIGlmIChzLmxvb2thaGVhZCA8IE1JTl9MT09LQUhFQUQgJiYgZmx1c2gyID09PSBaX05PX0ZMVVNIJDEpIHsKICAgICAgICAgIHJldHVybiBCU19ORUVEX01PUkU7CiAgICAgICAgfQogICAgICAgIGlmIChzLmxvb2thaGVhZCA9PT0gMCkgewogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICAgIGhhc2hfaGVhZCA9IDA7CiAgICAgIGlmIChzLmxvb2thaGVhZCA+PSBNSU5fTUFUQ0gpIHsKICAgICAgICBzLmluc19oID0gKHMuaW5zX2ggPDwgcy5oYXNoX3NoaWZ0IF4gcy53aW5kb3dbcy5zdHJzdGFydCArIE1JTl9NQVRDSCAtIDFdKSAmIHMuaGFzaF9tYXNrOwogICAgICAgIGhhc2hfaGVhZCA9IHMucHJldltzLnN0cnN0YXJ0ICYgcy53X21hc2tdID0gcy5oZWFkW3MuaW5zX2hdOwogICAgICAgIHMuaGVhZFtzLmluc19oXSA9IHMuc3Ryc3RhcnQ7CiAgICAgIH0KICAgICAgaWYgKGhhc2hfaGVhZCAhPT0gMCAmJiBzLnN0cnN0YXJ0IC0gaGFzaF9oZWFkIDw9IHMud19zaXplIC0gTUlOX0xPT0tBSEVBRCkgewogICAgICAgIHMubWF0Y2hfbGVuZ3RoID0gbG9uZ2VzdF9tYXRjaChzLCBoYXNoX2hlYWQpOwogICAgICB9CiAgICAgIGlmIChzLm1hdGNoX2xlbmd0aCA+PSBNSU5fTUFUQ0gpIHsKICAgICAgICBiZmx1c2ggPSB0cmVlcy5fdHJfdGFsbHkocywgcy5zdHJzdGFydCAtIHMubWF0Y2hfc3RhcnQsIHMubWF0Y2hfbGVuZ3RoIC0gTUlOX01BVENIKTsKICAgICAgICBzLmxvb2thaGVhZCAtPSBzLm1hdGNoX2xlbmd0aDsKICAgICAgICBpZiAocy5tYXRjaF9sZW5ndGggPD0gcy5tYXhfbGF6eV9tYXRjaCAmJiBzLmxvb2thaGVhZCA+PSBNSU5fTUFUQ0gpIHsKICAgICAgICAgIHMubWF0Y2hfbGVuZ3RoLS07CiAgICAgICAgICBkbyB7CiAgICAgICAgICAgIHMuc3Ryc3RhcnQrKzsKICAgICAgICAgICAgcy5pbnNfaCA9IChzLmluc19oIDw8IHMuaGFzaF9zaGlmdCBeIHMud2luZG93W3Muc3Ryc3RhcnQgKyBNSU5fTUFUQ0ggLSAxXSkgJiBzLmhhc2hfbWFzazsKICAgICAgICAgICAgaGFzaF9oZWFkID0gcy5wcmV2W3Muc3Ryc3RhcnQgJiBzLndfbWFza10gPSBzLmhlYWRbcy5pbnNfaF07CiAgICAgICAgICAgIHMuaGVhZFtzLmluc19oXSA9IHMuc3Ryc3RhcnQ7CiAgICAgICAgICB9IHdoaWxlICgtLXMubWF0Y2hfbGVuZ3RoICE9PSAwKTsKICAgICAgICAgIHMuc3Ryc3RhcnQrKzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcy5zdHJzdGFydCArPSBzLm1hdGNoX2xlbmd0aDsKICAgICAgICAgIHMubWF0Y2hfbGVuZ3RoID0gMDsKICAgICAgICAgIHMuaW5zX2ggPSBzLndpbmRvd1tzLnN0cnN0YXJ0XTsKICAgICAgICAgIHMuaW5zX2ggPSAocy5pbnNfaCA8PCBzLmhhc2hfc2hpZnQgXiBzLndpbmRvd1tzLnN0cnN0YXJ0ICsgMV0pICYgcy5oYXNoX21hc2s7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGJmbHVzaCA9IHRyZWVzLl90cl90YWxseShzLCAwLCBzLndpbmRvd1tzLnN0cnN0YXJ0XSk7CiAgICAgICAgcy5sb29rYWhlYWQtLTsKICAgICAgICBzLnN0cnN0YXJ0Kys7CiAgICAgIH0KICAgICAgaWYgKGJmbHVzaCkgewogICAgICAgIGZsdXNoX2Jsb2NrX29ubHkocywgZmFsc2UpOwogICAgICAgIGlmIChzLnN0cm0uYXZhaWxfb3V0ID09PSAwKSB7CiAgICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcy5pbnNlcnQgPSBzLnN0cnN0YXJ0IDwgTUlOX01BVENIIC0gMSA/IHMuc3Ryc3RhcnQgOiBNSU5fTUFUQ0ggLSAxOwogICAgaWYgKGZsdXNoMiA9PT0gWl9GSU5JU0gkMikgewogICAgICBmbHVzaF9ibG9ja19vbmx5KHMsIHRydWUpOwogICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgIHJldHVybiBCU19GSU5JU0hfU1RBUlRFRDsKICAgICAgfQogICAgICByZXR1cm4gQlNfRklOSVNIX0RPTkU7CiAgICB9CiAgICBpZiAocy5sYXN0X2xpdCkgewogICAgICBmbHVzaF9ibG9ja19vbmx5KHMsIGZhbHNlKTsKICAgICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHsKICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gQlNfQkxPQ0tfRE9ORTsKICB9CiAgZnVuY3Rpb24gZGVmbGF0ZV9zbG93KHMsIGZsdXNoMikgewogICAgdmFyIGhhc2hfaGVhZDsKICAgIHZhciBiZmx1c2g7CiAgICB2YXIgbWF4X2luc2VydDsKICAgIGZvciAoOyA7ICkgewogICAgICBpZiAocy5sb29rYWhlYWQgPCBNSU5fTE9PS0FIRUFEKSB7CiAgICAgICAgZmlsbF93aW5kb3cocyk7CiAgICAgICAgaWYgKHMubG9va2FoZWFkIDwgTUlOX0xPT0tBSEVBRCAmJiBmbHVzaDIgPT09IFpfTk9fRkxVU0gkMSkgewogICAgICAgICAgcmV0dXJuIEJTX05FRURfTU9SRTsKICAgICAgICB9CiAgICAgICAgaWYgKHMubG9va2FoZWFkID09PSAwKSB7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KICAgICAgaGFzaF9oZWFkID0gMDsKICAgICAgaWYgKHMubG9va2FoZWFkID49IE1JTl9NQVRDSCkgewogICAgICAgIHMuaW5zX2ggPSAocy5pbnNfaCA8PCBzLmhhc2hfc2hpZnQgXiBzLndpbmRvd1tzLnN0cnN0YXJ0ICsgTUlOX01BVENIIC0gMV0pICYgcy5oYXNoX21hc2s7CiAgICAgICAgaGFzaF9oZWFkID0gcy5wcmV2W3Muc3Ryc3RhcnQgJiBzLndfbWFza10gPSBzLmhlYWRbcy5pbnNfaF07CiAgICAgICAgcy5oZWFkW3MuaW5zX2hdID0gcy5zdHJzdGFydDsKICAgICAgfQogICAgICBzLnByZXZfbGVuZ3RoID0gcy5tYXRjaF9sZW5ndGg7CiAgICAgIHMucHJldl9tYXRjaCA9IHMubWF0Y2hfc3RhcnQ7CiAgICAgIHMubWF0Y2hfbGVuZ3RoID0gTUlOX01BVENIIC0gMTsKICAgICAgaWYgKGhhc2hfaGVhZCAhPT0gMCAmJiBzLnByZXZfbGVuZ3RoIDwgcy5tYXhfbGF6eV9tYXRjaCAmJiBzLnN0cnN0YXJ0IC0gaGFzaF9oZWFkIDw9IHMud19zaXplIC0gTUlOX0xPT0tBSEVBRCkgewogICAgICAgIHMubWF0Y2hfbGVuZ3RoID0gbG9uZ2VzdF9tYXRjaChzLCBoYXNoX2hlYWQpOwogICAgICAgIGlmIChzLm1hdGNoX2xlbmd0aCA8PSA1ICYmIChzLnN0cmF0ZWd5ID09PSBaX0ZJTFRFUkVEIHx8IHMubWF0Y2hfbGVuZ3RoID09PSBNSU5fTUFUQ0ggJiYgcy5zdHJzdGFydCAtIHMubWF0Y2hfc3RhcnQgPiA0MDk2KSkgewogICAgICAgICAgcy5tYXRjaF9sZW5ndGggPSBNSU5fTUFUQ0ggLSAxOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAocy5wcmV2X2xlbmd0aCA+PSBNSU5fTUFUQ0ggJiYgcy5tYXRjaF9sZW5ndGggPD0gcy5wcmV2X2xlbmd0aCkgewogICAgICAgIG1heF9pbnNlcnQgPSBzLnN0cnN0YXJ0ICsgcy5sb29rYWhlYWQgLSBNSU5fTUFUQ0g7CiAgICAgICAgYmZsdXNoID0gdHJlZXMuX3RyX3RhbGx5KHMsIHMuc3Ryc3RhcnQgLSAxIC0gcy5wcmV2X21hdGNoLCBzLnByZXZfbGVuZ3RoIC0gTUlOX01BVENIKTsKICAgICAgICBzLmxvb2thaGVhZCAtPSBzLnByZXZfbGVuZ3RoIC0gMTsKICAgICAgICBzLnByZXZfbGVuZ3RoIC09IDI7CiAgICAgICAgZG8gewogICAgICAgICAgaWYgKCsrcy5zdHJzdGFydCA8PSBtYXhfaW5zZXJ0KSB7CiAgICAgICAgICAgIHMuaW5zX2ggPSAocy5pbnNfaCA8PCBzLmhhc2hfc2hpZnQgXiBzLndpbmRvd1tzLnN0cnN0YXJ0ICsgTUlOX01BVENIIC0gMV0pICYgcy5oYXNoX21hc2s7CiAgICAgICAgICAgIGhhc2hfaGVhZCA9IHMucHJldltzLnN0cnN0YXJ0ICYgcy53X21hc2tdID0gcy5oZWFkW3MuaW5zX2hdOwogICAgICAgICAgICBzLmhlYWRbcy5pbnNfaF0gPSBzLnN0cnN0YXJ0OwogICAgICAgICAgfQogICAgICAgIH0gd2hpbGUgKC0tcy5wcmV2X2xlbmd0aCAhPT0gMCk7CiAgICAgICAgcy5tYXRjaF9hdmFpbGFibGUgPSAwOwogICAgICAgIHMubWF0Y2hfbGVuZ3RoID0gTUlOX01BVENIIC0gMTsKICAgICAgICBzLnN0cnN0YXJ0Kys7CiAgICAgICAgaWYgKGJmbHVzaCkgewogICAgICAgICAgZmx1c2hfYmxvY2tfb25seShzLCBmYWxzZSk7CiAgICAgICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChzLm1hdGNoX2F2YWlsYWJsZSkgewogICAgICAgIGJmbHVzaCA9IHRyZWVzLl90cl90YWxseShzLCAwLCBzLndpbmRvd1tzLnN0cnN0YXJ0IC0gMV0pOwogICAgICAgIGlmIChiZmx1c2gpIHsKICAgICAgICAgIGZsdXNoX2Jsb2NrX29ubHkocywgZmFsc2UpOwogICAgICAgIH0KICAgICAgICBzLnN0cnN0YXJ0Kys7CiAgICAgICAgcy5sb29rYWhlYWQtLTsKICAgICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgICAgcmV0dXJuIEJTX05FRURfTU9SRTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcy5tYXRjaF9hdmFpbGFibGUgPSAxOwogICAgICAgIHMuc3Ryc3RhcnQrKzsKICAgICAgICBzLmxvb2thaGVhZC0tOwogICAgICB9CiAgICB9CiAgICBpZiAocy5tYXRjaF9hdmFpbGFibGUpIHsKICAgICAgYmZsdXNoID0gdHJlZXMuX3RyX3RhbGx5KHMsIDAsIHMud2luZG93W3Muc3Ryc3RhcnQgLSAxXSk7CiAgICAgIHMubWF0Y2hfYXZhaWxhYmxlID0gMDsKICAgIH0KICAgIHMuaW5zZXJ0ID0gcy5zdHJzdGFydCA8IE1JTl9NQVRDSCAtIDEgPyBzLnN0cnN0YXJ0IDogTUlOX01BVENIIC0gMTsKICAgIGlmIChmbHVzaDIgPT09IFpfRklOSVNIJDIpIHsKICAgICAgZmx1c2hfYmxvY2tfb25seShzLCB0cnVlKTsKICAgICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHsKICAgICAgICByZXR1cm4gQlNfRklOSVNIX1NUQVJURUQ7CiAgICAgIH0KICAgICAgcmV0dXJuIEJTX0ZJTklTSF9ET05FOwogICAgfQogICAgaWYgKHMubGFzdF9saXQpIHsKICAgICAgZmx1c2hfYmxvY2tfb25seShzLCBmYWxzZSk7CiAgICAgIGlmIChzLnN0cm0uYXZhaWxfb3V0ID09PSAwKSB7CiAgICAgICAgcmV0dXJuIEJTX05FRURfTU9SRTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIEJTX0JMT0NLX0RPTkU7CiAgfQogIGZ1bmN0aW9uIGRlZmxhdGVfcmxlKHMsIGZsdXNoMikgewogICAgdmFyIGJmbHVzaDsKICAgIHZhciBwcmV2OwogICAgdmFyIHNjYW4sIHN0cmVuZDsKICAgIHZhciBfd2luID0gcy53aW5kb3c7CiAgICBmb3IgKDsgOyApIHsKICAgICAgaWYgKHMubG9va2FoZWFkIDw9IE1BWF9NQVRDSCkgewogICAgICAgIGZpbGxfd2luZG93KHMpOwogICAgICAgIGlmIChzLmxvb2thaGVhZCA8PSBNQVhfTUFUQ0ggJiYgZmx1c2gyID09PSBaX05PX0ZMVVNIJDEpIHsKICAgICAgICAgIHJldHVybiBCU19ORUVEX01PUkU7CiAgICAgICAgfQogICAgICAgIGlmIChzLmxvb2thaGVhZCA9PT0gMCkgewogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICAgIHMubWF0Y2hfbGVuZ3RoID0gMDsKICAgICAgaWYgKHMubG9va2FoZWFkID49IE1JTl9NQVRDSCAmJiBzLnN0cnN0YXJ0ID4gMCkgewogICAgICAgIHNjYW4gPSBzLnN0cnN0YXJ0IC0gMTsKICAgICAgICBwcmV2ID0gX3dpbltzY2FuXTsKICAgICAgICBpZiAocHJldiA9PT0gX3dpblsrK3NjYW5dICYmIHByZXYgPT09IF93aW5bKytzY2FuXSAmJiBwcmV2ID09PSBfd2luWysrc2Nhbl0pIHsKICAgICAgICAgIHN0cmVuZCA9IHMuc3Ryc3RhcnQgKyBNQVhfTUFUQ0g7CiAgICAgICAgICBkbyB7CiAgICAgICAgICB9IHdoaWxlIChwcmV2ID09PSBfd2luWysrc2Nhbl0gJiYgcHJldiA9PT0gX3dpblsrK3NjYW5dICYmIHByZXYgPT09IF93aW5bKytzY2FuXSAmJiBwcmV2ID09PSBfd2luWysrc2Nhbl0gJiYgcHJldiA9PT0gX3dpblsrK3NjYW5dICYmIHByZXYgPT09IF93aW5bKytzY2FuXSAmJiBwcmV2ID09PSBfd2luWysrc2Nhbl0gJiYgcHJldiA9PT0gX3dpblsrK3NjYW5dICYmIHNjYW4gPCBzdHJlbmQpOwogICAgICAgICAgcy5tYXRjaF9sZW5ndGggPSBNQVhfTUFUQ0ggLSAoc3RyZW5kIC0gc2Nhbik7CiAgICAgICAgICBpZiAocy5tYXRjaF9sZW5ndGggPiBzLmxvb2thaGVhZCkgewogICAgICAgICAgICBzLm1hdGNoX2xlbmd0aCA9IHMubG9va2FoZWFkOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBpZiAocy5tYXRjaF9sZW5ndGggPj0gTUlOX01BVENIKSB7CiAgICAgICAgYmZsdXNoID0gdHJlZXMuX3RyX3RhbGx5KHMsIDEsIHMubWF0Y2hfbGVuZ3RoIC0gTUlOX01BVENIKTsKICAgICAgICBzLmxvb2thaGVhZCAtPSBzLm1hdGNoX2xlbmd0aDsKICAgICAgICBzLnN0cnN0YXJ0ICs9IHMubWF0Y2hfbGVuZ3RoOwogICAgICAgIHMubWF0Y2hfbGVuZ3RoID0gMDsKICAgICAgfSBlbHNlIHsKICAgICAgICBiZmx1c2ggPSB0cmVlcy5fdHJfdGFsbHkocywgMCwgcy53aW5kb3dbcy5zdHJzdGFydF0pOwogICAgICAgIHMubG9va2FoZWFkLS07CiAgICAgICAgcy5zdHJzdGFydCsrOwogICAgICB9CiAgICAgIGlmIChiZmx1c2gpIHsKICAgICAgICBmbHVzaF9ibG9ja19vbmx5KHMsIGZhbHNlKTsKICAgICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgICAgcmV0dXJuIEJTX05FRURfTU9SRTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHMuaW5zZXJ0ID0gMDsKICAgIGlmIChmbHVzaDIgPT09IFpfRklOSVNIJDIpIHsKICAgICAgZmx1c2hfYmxvY2tfb25seShzLCB0cnVlKTsKICAgICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHsKICAgICAgICByZXR1cm4gQlNfRklOSVNIX1NUQVJURUQ7CiAgICAgIH0KICAgICAgcmV0dXJuIEJTX0ZJTklTSF9ET05FOwogICAgfQogICAgaWYgKHMubGFzdF9saXQpIHsKICAgICAgZmx1c2hfYmxvY2tfb25seShzLCBmYWxzZSk7CiAgICAgIGlmIChzLnN0cm0uYXZhaWxfb3V0ID09PSAwKSB7CiAgICAgICAgcmV0dXJuIEJTX05FRURfTU9SRTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIEJTX0JMT0NLX0RPTkU7CiAgfQogIGZ1bmN0aW9uIGRlZmxhdGVfaHVmZihzLCBmbHVzaDIpIHsKICAgIHZhciBiZmx1c2g7CiAgICBmb3IgKDsgOyApIHsKICAgICAgaWYgKHMubG9va2FoZWFkID09PSAwKSB7CiAgICAgICAgZmlsbF93aW5kb3cocyk7CiAgICAgICAgaWYgKHMubG9va2FoZWFkID09PSAwKSB7CiAgICAgICAgICBpZiAoZmx1c2gyID09PSBaX05PX0ZMVVNIJDEpIHsKICAgICAgICAgICAgcmV0dXJuIEJTX05FRURfTU9SRTsKICAgICAgICAgIH0KICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgICBzLm1hdGNoX2xlbmd0aCA9IDA7CiAgICAgIGJmbHVzaCA9IHRyZWVzLl90cl90YWxseShzLCAwLCBzLndpbmRvd1tzLnN0cnN0YXJ0XSk7CiAgICAgIHMubG9va2FoZWFkLS07CiAgICAgIHMuc3Ryc3RhcnQrKzsKICAgICAgaWYgKGJmbHVzaCkgewogICAgICAgIGZsdXNoX2Jsb2NrX29ubHkocywgZmFsc2UpOwogICAgICAgIGlmIChzLnN0cm0uYXZhaWxfb3V0ID09PSAwKSB7CiAgICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcy5pbnNlcnQgPSAwOwogICAgaWYgKGZsdXNoMiA9PT0gWl9GSU5JU0gkMikgewogICAgICBmbHVzaF9ibG9ja19vbmx5KHMsIHRydWUpOwogICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgIHJldHVybiBCU19GSU5JU0hfU1RBUlRFRDsKICAgICAgfQogICAgICByZXR1cm4gQlNfRklOSVNIX0RPTkU7CiAgICB9CiAgICBpZiAocy5sYXN0X2xpdCkgewogICAgICBmbHVzaF9ibG9ja19vbmx5KHMsIGZhbHNlKTsKICAgICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHsKICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gQlNfQkxPQ0tfRE9ORTsKICB9CiAgZnVuY3Rpb24gQ29uZmlnKGdvb2RfbGVuZ3RoLCBtYXhfbGF6eSwgbmljZV9sZW5ndGgsIG1heF9jaGFpbiwgZnVuYykgewogICAgdGhpcy5nb29kX2xlbmd0aCA9IGdvb2RfbGVuZ3RoOwogICAgdGhpcy5tYXhfbGF6eSA9IG1heF9sYXp5OwogICAgdGhpcy5uaWNlX2xlbmd0aCA9IG5pY2VfbGVuZ3RoOwogICAgdGhpcy5tYXhfY2hhaW4gPSBtYXhfY2hhaW47CiAgICB0aGlzLmZ1bmMgPSBmdW5jOwogIH0KICB2YXIgY29uZmlndXJhdGlvbl90YWJsZTsKICBjb25maWd1cmF0aW9uX3RhYmxlID0gWwogICAgbmV3IENvbmZpZygwLCAwLCAwLCAwLCBkZWZsYXRlX3N0b3JlZCksCiAgICBuZXcgQ29uZmlnKDQsIDQsIDgsIDQsIGRlZmxhdGVfZmFzdCksCiAgICBuZXcgQ29uZmlnKDQsIDUsIDE2LCA4LCBkZWZsYXRlX2Zhc3QpLAogICAgbmV3IENvbmZpZyg0LCA2LCAzMiwgMzIsIGRlZmxhdGVfZmFzdCksCiAgICBuZXcgQ29uZmlnKDQsIDQsIDE2LCAxNiwgZGVmbGF0ZV9zbG93KSwKICAgIG5ldyBDb25maWcoOCwgMTYsIDMyLCAzMiwgZGVmbGF0ZV9zbG93KSwKICAgIG5ldyBDb25maWcoOCwgMTYsIDEyOCwgMTI4LCBkZWZsYXRlX3Nsb3cpLAogICAgbmV3IENvbmZpZyg4LCAzMiwgMTI4LCAyNTYsIGRlZmxhdGVfc2xvdyksCiAgICBuZXcgQ29uZmlnKDMyLCAxMjgsIDI1OCwgMTAyNCwgZGVmbGF0ZV9zbG93KSwKICAgIG5ldyBDb25maWcoMzIsIDI1OCwgMjU4LCA0MDk2LCBkZWZsYXRlX3Nsb3cpCiAgXTsKICBmdW5jdGlvbiBsbV9pbml0KHMpIHsKICAgIHMud2luZG93X3NpemUgPSAyICogcy53X3NpemU7CiAgICB6ZXJvKHMuaGVhZCk7CiAgICBzLm1heF9sYXp5X21hdGNoID0gY29uZmlndXJhdGlvbl90YWJsZVtzLmxldmVsXS5tYXhfbGF6eTsKICAgIHMuZ29vZF9tYXRjaCA9IGNvbmZpZ3VyYXRpb25fdGFibGVbcy5sZXZlbF0uZ29vZF9sZW5ndGg7CiAgICBzLm5pY2VfbWF0Y2ggPSBjb25maWd1cmF0aW9uX3RhYmxlW3MubGV2ZWxdLm5pY2VfbGVuZ3RoOwogICAgcy5tYXhfY2hhaW5fbGVuZ3RoID0gY29uZmlndXJhdGlvbl90YWJsZVtzLmxldmVsXS5tYXhfY2hhaW47CiAgICBzLnN0cnN0YXJ0ID0gMDsKICAgIHMuYmxvY2tfc3RhcnQgPSAwOwogICAgcy5sb29rYWhlYWQgPSAwOwogICAgcy5pbnNlcnQgPSAwOwogICAgcy5tYXRjaF9sZW5ndGggPSBzLnByZXZfbGVuZ3RoID0gTUlOX01BVENIIC0gMTsKICAgIHMubWF0Y2hfYXZhaWxhYmxlID0gMDsKICAgIHMuaW5zX2ggPSAwOwogIH0KICBmdW5jdGlvbiBEZWZsYXRlU3RhdGUoKSB7CiAgICB0aGlzLnN0cm0gPSBudWxsOwogICAgdGhpcy5zdGF0dXMgPSAwOwogICAgdGhpcy5wZW5kaW5nX2J1ZiA9IG51bGw7CiAgICB0aGlzLnBlbmRpbmdfYnVmX3NpemUgPSAwOwogICAgdGhpcy5wZW5kaW5nX291dCA9IDA7CiAgICB0aGlzLnBlbmRpbmcgPSAwOwogICAgdGhpcy53cmFwID0gMDsKICAgIHRoaXMuZ3poZWFkID0gbnVsbDsKICAgIHRoaXMuZ3ppbmRleCA9IDA7CiAgICB0aGlzLm1ldGhvZCA9IFpfREVGTEFURUQkMjsKICAgIHRoaXMubGFzdF9mbHVzaCA9IC0xOwogICAgdGhpcy53X3NpemUgPSAwOwogICAgdGhpcy53X2JpdHMgPSAwOwogICAgdGhpcy53X21hc2sgPSAwOwogICAgdGhpcy53aW5kb3cgPSBudWxsOwogICAgdGhpcy53aW5kb3dfc2l6ZSA9IDA7CiAgICB0aGlzLnByZXYgPSBudWxsOwogICAgdGhpcy5oZWFkID0gbnVsbDsKICAgIHRoaXMuaW5zX2ggPSAwOwogICAgdGhpcy5oYXNoX3NpemUgPSAwOwogICAgdGhpcy5oYXNoX2JpdHMgPSAwOwogICAgdGhpcy5oYXNoX21hc2sgPSAwOwogICAgdGhpcy5oYXNoX3NoaWZ0ID0gMDsKICAgIHRoaXMuYmxvY2tfc3RhcnQgPSAwOwogICAgdGhpcy5tYXRjaF9sZW5ndGggPSAwOwogICAgdGhpcy5wcmV2X21hdGNoID0gMDsKICAgIHRoaXMubWF0Y2hfYXZhaWxhYmxlID0gMDsKICAgIHRoaXMuc3Ryc3RhcnQgPSAwOwogICAgdGhpcy5tYXRjaF9zdGFydCA9IDA7CiAgICB0aGlzLmxvb2thaGVhZCA9IDA7CiAgICB0aGlzLnByZXZfbGVuZ3RoID0gMDsKICAgIHRoaXMubWF4X2NoYWluX2xlbmd0aCA9IDA7CiAgICB0aGlzLm1heF9sYXp5X21hdGNoID0gMDsKICAgIHRoaXMubGV2ZWwgPSAwOwogICAgdGhpcy5zdHJhdGVneSA9IDA7CiAgICB0aGlzLmdvb2RfbWF0Y2ggPSAwOwogICAgdGhpcy5uaWNlX21hdGNoID0gMDsKICAgIHRoaXMuZHluX2x0cmVlID0gbmV3IHV0aWxzJDUuQnVmMTYoSEVBUF9TSVpFICogMik7CiAgICB0aGlzLmR5bl9kdHJlZSA9IG5ldyB1dGlscyQ1LkJ1ZjE2KCgyICogRF9DT0RFUyArIDEpICogMik7CiAgICB0aGlzLmJsX3RyZWUgPSBuZXcgdXRpbHMkNS5CdWYxNigoMiAqIEJMX0NPREVTICsgMSkgKiAyKTsKICAgIHplcm8odGhpcy5keW5fbHRyZWUpOwogICAgemVybyh0aGlzLmR5bl9kdHJlZSk7CiAgICB6ZXJvKHRoaXMuYmxfdHJlZSk7CiAgICB0aGlzLmxfZGVzYyA9IG51bGw7CiAgICB0aGlzLmRfZGVzYyA9IG51bGw7CiAgICB0aGlzLmJsX2Rlc2MgPSBudWxsOwogICAgdGhpcy5ibF9jb3VudCA9IG5ldyB1dGlscyQ1LkJ1ZjE2KE1BWF9CSVRTICsgMSk7CiAgICB0aGlzLmhlYXAgPSBuZXcgdXRpbHMkNS5CdWYxNigyICogTF9DT0RFUyArIDEpOwogICAgemVybyh0aGlzLmhlYXApOwogICAgdGhpcy5oZWFwX2xlbiA9IDA7CiAgICB0aGlzLmhlYXBfbWF4ID0gMDsKICAgIHRoaXMuZGVwdGggPSBuZXcgdXRpbHMkNS5CdWYxNigyICogTF9DT0RFUyArIDEpOwogICAgemVybyh0aGlzLmRlcHRoKTsKICAgIHRoaXMubF9idWYgPSAwOwogICAgdGhpcy5saXRfYnVmc2l6ZSA9IDA7CiAgICB0aGlzLmxhc3RfbGl0ID0gMDsKICAgIHRoaXMuZF9idWYgPSAwOwogICAgdGhpcy5vcHRfbGVuID0gMDsKICAgIHRoaXMuc3RhdGljX2xlbiA9IDA7CiAgICB0aGlzLm1hdGNoZXMgPSAwOwogICAgdGhpcy5pbnNlcnQgPSAwOwogICAgdGhpcy5iaV9idWYgPSAwOwogICAgdGhpcy5iaV92YWxpZCA9IDA7CiAgfQogIGZ1bmN0aW9uIGRlZmxhdGVSZXNldEtlZXAoc3RybSkgewogICAgdmFyIHM7CiAgICBpZiAoIXN0cm0gfHwgIXN0cm0uc3RhdGUpIHsKICAgICAgcmV0dXJuIGVycihzdHJtLCBaX1NUUkVBTV9FUlJPUiQxKTsKICAgIH0KICAgIHN0cm0udG90YWxfaW4gPSBzdHJtLnRvdGFsX291dCA9IDA7CiAgICBzdHJtLmRhdGFfdHlwZSA9IFpfVU5LTk9XTjsKICAgIHMgPSBzdHJtLnN0YXRlOwogICAgcy5wZW5kaW5nID0gMDsKICAgIHMucGVuZGluZ19vdXQgPSAwOwogICAgaWYgKHMud3JhcCA8IDApIHsKICAgICAgcy53cmFwID0gLXMud3JhcDsKICAgIH0KICAgIHMuc3RhdHVzID0gcy53cmFwID8gSU5JVF9TVEFURSA6IEJVU1lfU1RBVEU7CiAgICBzdHJtLmFkbGVyID0gcy53cmFwID09PSAyID8gMCA6IDE7CiAgICBzLmxhc3RfZmx1c2ggPSBaX05PX0ZMVVNIJDE7CiAgICB0cmVlcy5fdHJfaW5pdChzKTsKICAgIHJldHVybiBaX09LJDI7CiAgfQogIGZ1bmN0aW9uIGRlZmxhdGVSZXNldChzdHJtKSB7CiAgICB2YXIgcmV0ID0gZGVmbGF0ZVJlc2V0S2VlcChzdHJtKTsKICAgIGlmIChyZXQgPT09IFpfT0skMikgewogICAgICBsbV9pbml0KHN0cm0uc3RhdGUpOwogICAgfQogICAgcmV0dXJuIHJldDsKICB9CiAgZnVuY3Rpb24gZGVmbGF0ZVNldEhlYWRlcihzdHJtLCBoZWFkMikgewogICAgaWYgKCFzdHJtIHx8ICFzdHJtLnN0YXRlKSB7CiAgICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUiQxOwogICAgfQogICAgaWYgKHN0cm0uc3RhdGUud3JhcCAhPT0gMikgewogICAgICByZXR1cm4gWl9TVFJFQU1fRVJST1IkMTsKICAgIH0KICAgIHN0cm0uc3RhdGUuZ3poZWFkID0gaGVhZDI7CiAgICByZXR1cm4gWl9PSyQyOwogIH0KICBmdW5jdGlvbiBkZWZsYXRlSW5pdDIoc3RybSwgbGV2ZWwsIG1ldGhvZCwgd2luZG93Qml0cywgbWVtTGV2ZWwsIHN0cmF0ZWd5KSB7CiAgICBpZiAoIXN0cm0pIHsKICAgICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SJDE7CiAgICB9CiAgICB2YXIgd3JhcDIgPSAxOwogICAgaWYgKGxldmVsID09PSBaX0RFRkFVTFRfQ09NUFJFU1NJT04kMSkgewogICAgICBsZXZlbCA9IDY7CiAgICB9CiAgICBpZiAod2luZG93Qml0cyA8IDApIHsKICAgICAgd3JhcDIgPSAwOwogICAgICB3aW5kb3dCaXRzID0gLXdpbmRvd0JpdHM7CiAgICB9IGVsc2UgaWYgKHdpbmRvd0JpdHMgPiAxNSkgewogICAgICB3cmFwMiA9IDI7CiAgICAgIHdpbmRvd0JpdHMgLT0gMTY7CiAgICB9CiAgICBpZiAobWVtTGV2ZWwgPCAxIHx8IG1lbUxldmVsID4gTUFYX01FTV9MRVZFTCB8fCBtZXRob2QgIT09IFpfREVGTEFURUQkMiB8fCB3aW5kb3dCaXRzIDwgOCB8fCB3aW5kb3dCaXRzID4gMTUgfHwgbGV2ZWwgPCAwIHx8IGxldmVsID4gOSB8fCBzdHJhdGVneSA8IDAgfHwgc3RyYXRlZ3kgPiBaX0ZJWEVEKSB7CiAgICAgIHJldHVybiBlcnIoc3RybSwgWl9TVFJFQU1fRVJST1IkMSk7CiAgICB9CiAgICBpZiAod2luZG93Qml0cyA9PT0gOCkgewogICAgICB3aW5kb3dCaXRzID0gOTsKICAgIH0KICAgIHZhciBzID0gbmV3IERlZmxhdGVTdGF0ZSgpOwogICAgc3RybS5zdGF0ZSA9IHM7CiAgICBzLnN0cm0gPSBzdHJtOwogICAgcy53cmFwID0gd3JhcDI7CiAgICBzLmd6aGVhZCA9IG51bGw7CiAgICBzLndfYml0cyA9IHdpbmRvd0JpdHM7CiAgICBzLndfc2l6ZSA9IDEgPDwgcy53X2JpdHM7CiAgICBzLndfbWFzayA9IHMud19zaXplIC0gMTsKICAgIHMuaGFzaF9iaXRzID0gbWVtTGV2ZWwgKyA3OwogICAgcy5oYXNoX3NpemUgPSAxIDw8IHMuaGFzaF9iaXRzOwogICAgcy5oYXNoX21hc2sgPSBzLmhhc2hfc2l6ZSAtIDE7CiAgICBzLmhhc2hfc2hpZnQgPSB+figocy5oYXNoX2JpdHMgKyBNSU5fTUFUQ0ggLSAxKSAvIE1JTl9NQVRDSCk7CiAgICBzLndpbmRvdyA9IG5ldyB1dGlscyQ1LkJ1Zjgocy53X3NpemUgKiAyKTsKICAgIHMuaGVhZCA9IG5ldyB1dGlscyQ1LkJ1ZjE2KHMuaGFzaF9zaXplKTsKICAgIHMucHJldiA9IG5ldyB1dGlscyQ1LkJ1ZjE2KHMud19zaXplKTsKICAgIHMubGl0X2J1ZnNpemUgPSAxIDw8IG1lbUxldmVsICsgNjsKICAgIHMucGVuZGluZ19idWZfc2l6ZSA9IHMubGl0X2J1ZnNpemUgKiA0OwogICAgcy5wZW5kaW5nX2J1ZiA9IG5ldyB1dGlscyQ1LkJ1Zjgocy5wZW5kaW5nX2J1Zl9zaXplKTsKICAgIHMuZF9idWYgPSAxICogcy5saXRfYnVmc2l6ZTsKICAgIHMubF9idWYgPSAoMSArIDIpICogcy5saXRfYnVmc2l6ZTsKICAgIHMubGV2ZWwgPSBsZXZlbDsKICAgIHMuc3RyYXRlZ3kgPSBzdHJhdGVneTsKICAgIHMubWV0aG9kID0gbWV0aG9kOwogICAgcmV0dXJuIGRlZmxhdGVSZXNldChzdHJtKTsKICB9CiAgZnVuY3Rpb24gZGVmbGF0ZUluaXQoc3RybSwgbGV2ZWwpIHsKICAgIHJldHVybiBkZWZsYXRlSW5pdDIoc3RybSwgbGV2ZWwsIFpfREVGTEFURUQkMiwgTUFYX1dCSVRTJDEsIERFRl9NRU1fTEVWRUwsIFpfREVGQVVMVF9TVFJBVEVHWSQxKTsKICB9CiAgZnVuY3Rpb24gZGVmbGF0ZSQyKHN0cm0sIGZsdXNoMikgewogICAgdmFyIG9sZF9mbHVzaCwgczsKICAgIHZhciBiZWcsIHZhbDsKICAgIGlmICghc3RybSB8fCAhc3RybS5zdGF0ZSB8fCBmbHVzaDIgPiBaX0JMT0NLJDEgfHwgZmx1c2gyIDwgMCkgewogICAgICByZXR1cm4gc3RybSA/IGVycihzdHJtLCBaX1NUUkVBTV9FUlJPUiQxKSA6IFpfU1RSRUFNX0VSUk9SJDE7CiAgICB9CiAgICBzID0gc3RybS5zdGF0ZTsKICAgIGlmICghc3RybS5vdXRwdXQgfHwgIXN0cm0uaW5wdXQgJiYgc3RybS5hdmFpbF9pbiAhPT0gMCB8fCBzLnN0YXR1cyA9PT0gRklOSVNIX1NUQVRFICYmIGZsdXNoMiAhPT0gWl9GSU5JU0gkMikgewogICAgICByZXR1cm4gZXJyKHN0cm0sIHN0cm0uYXZhaWxfb3V0ID09PSAwID8gWl9CVUZfRVJST1IkMSA6IFpfU1RSRUFNX0VSUk9SJDEpOwogICAgfQogICAgcy5zdHJtID0gc3RybTsKICAgIG9sZF9mbHVzaCA9IHMubGFzdF9mbHVzaDsKICAgIHMubGFzdF9mbHVzaCA9IGZsdXNoMjsKICAgIGlmIChzLnN0YXR1cyA9PT0gSU5JVF9TVEFURSkgewogICAgICBpZiAocy53cmFwID09PSAyKSB7CiAgICAgICAgc3RybS5hZGxlciA9IDA7CiAgICAgICAgcHV0X2J5dGUocywgMzEpOwogICAgICAgIHB1dF9ieXRlKHMsIDEzOSk7CiAgICAgICAgcHV0X2J5dGUocywgOCk7CiAgICAgICAgaWYgKCFzLmd6aGVhZCkgewogICAgICAgICAgcHV0X2J5dGUocywgMCk7CiAgICAgICAgICBwdXRfYnl0ZShzLCAwKTsKICAgICAgICAgIHB1dF9ieXRlKHMsIDApOwogICAgICAgICAgcHV0X2J5dGUocywgMCk7CiAgICAgICAgICBwdXRfYnl0ZShzLCAwKTsKICAgICAgICAgIHB1dF9ieXRlKHMsIHMubGV2ZWwgPT09IDkgPyAyIDogcy5zdHJhdGVneSA+PSBaX0hVRkZNQU5fT05MWSB8fCBzLmxldmVsIDwgMiA/IDQgOiAwKTsKICAgICAgICAgIHB1dF9ieXRlKHMsIE9TX0NPREUpOwogICAgICAgICAgcy5zdGF0dXMgPSBCVVNZX1NUQVRFOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBwdXRfYnl0ZShzLCAocy5nemhlYWQudGV4dCA/IDEgOiAwKSArIChzLmd6aGVhZC5oY3JjID8gMiA6IDApICsgKCFzLmd6aGVhZC5leHRyYSA/IDAgOiA0KSArICghcy5nemhlYWQubmFtZSA/IDAgOiA4KSArICghcy5nemhlYWQuY29tbWVudCA/IDAgOiAxNikpOwogICAgICAgICAgcHV0X2J5dGUocywgcy5nemhlYWQudGltZSAmIDI1NSk7CiAgICAgICAgICBwdXRfYnl0ZShzLCBzLmd6aGVhZC50aW1lID4+IDggJiAyNTUpOwogICAgICAgICAgcHV0X2J5dGUocywgcy5nemhlYWQudGltZSA+PiAxNiAmIDI1NSk7CiAgICAgICAgICBwdXRfYnl0ZShzLCBzLmd6aGVhZC50aW1lID4+IDI0ICYgMjU1KTsKICAgICAgICAgIHB1dF9ieXRlKHMsIHMubGV2ZWwgPT09IDkgPyAyIDogcy5zdHJhdGVneSA+PSBaX0hVRkZNQU5fT05MWSB8fCBzLmxldmVsIDwgMiA/IDQgOiAwKTsKICAgICAgICAgIHB1dF9ieXRlKHMsIHMuZ3poZWFkLm9zICYgMjU1KTsKICAgICAgICAgIGlmIChzLmd6aGVhZC5leHRyYSAmJiBzLmd6aGVhZC5leHRyYS5sZW5ndGgpIHsKICAgICAgICAgICAgcHV0X2J5dGUocywgcy5nemhlYWQuZXh0cmEubGVuZ3RoICYgMjU1KTsKICAgICAgICAgICAgcHV0X2J5dGUocywgcy5nemhlYWQuZXh0cmEubGVuZ3RoID4+IDggJiAyNTUpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHMuZ3poZWFkLmhjcmMpIHsKICAgICAgICAgICAgc3RybS5hZGxlciA9IGNyYzMyJDIoc3RybS5hZGxlciwgcy5wZW5kaW5nX2J1Ziwgcy5wZW5kaW5nLCAwKTsKICAgICAgICAgIH0KICAgICAgICAgIHMuZ3ppbmRleCA9IDA7CiAgICAgICAgICBzLnN0YXR1cyA9IEVYVFJBX1NUQVRFOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgaGVhZGVyID0gWl9ERUZMQVRFRCQyICsgKHMud19iaXRzIC0gOCA8PCA0KSA8PCA4OwogICAgICAgIHZhciBsZXZlbF9mbGFncyA9IC0xOwogICAgICAgIGlmIChzLnN0cmF0ZWd5ID49IFpfSFVGRk1BTl9PTkxZIHx8IHMubGV2ZWwgPCAyKSB7CiAgICAgICAgICBsZXZlbF9mbGFncyA9IDA7CiAgICAgICAgfSBlbHNlIGlmIChzLmxldmVsIDwgNikgewogICAgICAgICAgbGV2ZWxfZmxhZ3MgPSAxOwogICAgICAgIH0gZWxzZSBpZiAocy5sZXZlbCA9PT0gNikgewogICAgICAgICAgbGV2ZWxfZmxhZ3MgPSAyOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBsZXZlbF9mbGFncyA9IDM7CiAgICAgICAgfQogICAgICAgIGhlYWRlciB8PSBsZXZlbF9mbGFncyA8PCA2OwogICAgICAgIGlmIChzLnN0cnN0YXJ0ICE9PSAwKSB7CiAgICAgICAgICBoZWFkZXIgfD0gUFJFU0VUX0RJQ1Q7CiAgICAgICAgfQogICAgICAgIGhlYWRlciArPSAzMSAtIGhlYWRlciAlIDMxOwogICAgICAgIHMuc3RhdHVzID0gQlVTWV9TVEFURTsKICAgICAgICBwdXRTaG9ydE1TQihzLCBoZWFkZXIpOwogICAgICAgIGlmIChzLnN0cnN0YXJ0ICE9PSAwKSB7CiAgICAgICAgICBwdXRTaG9ydE1TQihzLCBzdHJtLmFkbGVyID4+PiAxNik7CiAgICAgICAgICBwdXRTaG9ydE1TQihzLCBzdHJtLmFkbGVyICYgNjU1MzUpOwogICAgICAgIH0KICAgICAgICBzdHJtLmFkbGVyID0gMTsKICAgICAgfQogICAgfQogICAgaWYgKHMuc3RhdHVzID09PSBFWFRSQV9TVEFURSkgewogICAgICBpZiAocy5nemhlYWQuZXh0cmEpIHsKICAgICAgICBiZWcgPSBzLnBlbmRpbmc7CiAgICAgICAgd2hpbGUgKHMuZ3ppbmRleCA8IChzLmd6aGVhZC5leHRyYS5sZW5ndGggJiA2NTUzNSkpIHsKICAgICAgICAgIGlmIChzLnBlbmRpbmcgPT09IHMucGVuZGluZ19idWZfc2l6ZSkgewogICAgICAgICAgICBpZiAocy5nemhlYWQuaGNyYyAmJiBzLnBlbmRpbmcgPiBiZWcpIHsKICAgICAgICAgICAgICBzdHJtLmFkbGVyID0gY3JjMzIkMihzdHJtLmFkbGVyLCBzLnBlbmRpbmdfYnVmLCBzLnBlbmRpbmcgLSBiZWcsIGJlZyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZmx1c2hfcGVuZGluZyhzdHJtKTsKICAgICAgICAgICAgYmVnID0gcy5wZW5kaW5nOwogICAgICAgICAgICBpZiAocy5wZW5kaW5nID09PSBzLnBlbmRpbmdfYnVmX3NpemUpIHsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcHV0X2J5dGUocywgcy5nemhlYWQuZXh0cmFbcy5nemluZGV4XSAmIDI1NSk7CiAgICAgICAgICBzLmd6aW5kZXgrKzsKICAgICAgICB9CiAgICAgICAgaWYgKHMuZ3poZWFkLmhjcmMgJiYgcy5wZW5kaW5nID4gYmVnKSB7CiAgICAgICAgICBzdHJtLmFkbGVyID0gY3JjMzIkMihzdHJtLmFkbGVyLCBzLnBlbmRpbmdfYnVmLCBzLnBlbmRpbmcgLSBiZWcsIGJlZyk7CiAgICAgICAgfQogICAgICAgIGlmIChzLmd6aW5kZXggPT09IHMuZ3poZWFkLmV4dHJhLmxlbmd0aCkgewogICAgICAgICAgcy5nemluZGV4ID0gMDsKICAgICAgICAgIHMuc3RhdHVzID0gTkFNRV9TVEFURTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcy5zdGF0dXMgPSBOQU1FX1NUQVRFOwogICAgICB9CiAgICB9CiAgICBpZiAocy5zdGF0dXMgPT09IE5BTUVfU1RBVEUpIHsKICAgICAgaWYgKHMuZ3poZWFkLm5hbWUpIHsKICAgICAgICBiZWcgPSBzLnBlbmRpbmc7CiAgICAgICAgZG8gewogICAgICAgICAgaWYgKHMucGVuZGluZyA9PT0gcy5wZW5kaW5nX2J1Zl9zaXplKSB7CiAgICAgICAgICAgIGlmIChzLmd6aGVhZC5oY3JjICYmIHMucGVuZGluZyA+IGJlZykgewogICAgICAgICAgICAgIHN0cm0uYWRsZXIgPSBjcmMzMiQyKHN0cm0uYWRsZXIsIHMucGVuZGluZ19idWYsIHMucGVuZGluZyAtIGJlZywgYmVnKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmbHVzaF9wZW5kaW5nKHN0cm0pOwogICAgICAgICAgICBiZWcgPSBzLnBlbmRpbmc7CiAgICAgICAgICAgIGlmIChzLnBlbmRpbmcgPT09IHMucGVuZGluZ19idWZfc2l6ZSkgewogICAgICAgICAgICAgIHZhbCA9IDE7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmIChzLmd6aW5kZXggPCBzLmd6aGVhZC5uYW1lLmxlbmd0aCkgewogICAgICAgICAgICB2YWwgPSBzLmd6aGVhZC5uYW1lLmNoYXJDb2RlQXQocy5nemluZGV4KyspICYgMjU1OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFsID0gMDsKICAgICAgICAgIH0KICAgICAgICAgIHB1dF9ieXRlKHMsIHZhbCk7CiAgICAgICAgfSB3aGlsZSAodmFsICE9PSAwKTsKICAgICAgICBpZiAocy5nemhlYWQuaGNyYyAmJiBzLnBlbmRpbmcgPiBiZWcpIHsKICAgICAgICAgIHN0cm0uYWRsZXIgPSBjcmMzMiQyKHN0cm0uYWRsZXIsIHMucGVuZGluZ19idWYsIHMucGVuZGluZyAtIGJlZywgYmVnKTsKICAgICAgICB9CiAgICAgICAgaWYgKHZhbCA9PT0gMCkgewogICAgICAgICAgcy5nemluZGV4ID0gMDsKICAgICAgICAgIHMuc3RhdHVzID0gQ09NTUVOVF9TVEFURTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcy5zdGF0dXMgPSBDT01NRU5UX1NUQVRFOwogICAgICB9CiAgICB9CiAgICBpZiAocy5zdGF0dXMgPT09IENPTU1FTlRfU1RBVEUpIHsKICAgICAgaWYgKHMuZ3poZWFkLmNvbW1lbnQpIHsKICAgICAgICBiZWcgPSBzLnBlbmRpbmc7CiAgICAgICAgZG8gewogICAgICAgICAgaWYgKHMucGVuZGluZyA9PT0gcy5wZW5kaW5nX2J1Zl9zaXplKSB7CiAgICAgICAgICAgIGlmIChzLmd6aGVhZC5oY3JjICYmIHMucGVuZGluZyA+IGJlZykgewogICAgICAgICAgICAgIHN0cm0uYWRsZXIgPSBjcmMzMiQyKHN0cm0uYWRsZXIsIHMucGVuZGluZ19idWYsIHMucGVuZGluZyAtIGJlZywgYmVnKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmbHVzaF9wZW5kaW5nKHN0cm0pOwogICAgICAgICAgICBiZWcgPSBzLnBlbmRpbmc7CiAgICAgICAgICAgIGlmIChzLnBlbmRpbmcgPT09IHMucGVuZGluZ19idWZfc2l6ZSkgewogICAgICAgICAgICAgIHZhbCA9IDE7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmIChzLmd6aW5kZXggPCBzLmd6aGVhZC5jb21tZW50Lmxlbmd0aCkgewogICAgICAgICAgICB2YWwgPSBzLmd6aGVhZC5jb21tZW50LmNoYXJDb2RlQXQocy5nemluZGV4KyspICYgMjU1OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFsID0gMDsKICAgICAgICAgIH0KICAgICAgICAgIHB1dF9ieXRlKHMsIHZhbCk7CiAgICAgICAgfSB3aGlsZSAodmFsICE9PSAwKTsKICAgICAgICBpZiAocy5nemhlYWQuaGNyYyAmJiBzLnBlbmRpbmcgPiBiZWcpIHsKICAgICAgICAgIHN0cm0uYWRsZXIgPSBjcmMzMiQyKHN0cm0uYWRsZXIsIHMucGVuZGluZ19idWYsIHMucGVuZGluZyAtIGJlZywgYmVnKTsKICAgICAgICB9CiAgICAgICAgaWYgKHZhbCA9PT0gMCkgewogICAgICAgICAgcy5zdGF0dXMgPSBIQ1JDX1NUQVRFOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBzLnN0YXR1cyA9IEhDUkNfU1RBVEU7CiAgICAgIH0KICAgIH0KICAgIGlmIChzLnN0YXR1cyA9PT0gSENSQ19TVEFURSkgewogICAgICBpZiAocy5nemhlYWQuaGNyYykgewogICAgICAgIGlmIChzLnBlbmRpbmcgKyAyID4gcy5wZW5kaW5nX2J1Zl9zaXplKSB7CiAgICAgICAgICBmbHVzaF9wZW5kaW5nKHN0cm0pOwogICAgICAgIH0KICAgICAgICBpZiAocy5wZW5kaW5nICsgMiA8PSBzLnBlbmRpbmdfYnVmX3NpemUpIHsKICAgICAgICAgIHB1dF9ieXRlKHMsIHN0cm0uYWRsZXIgJiAyNTUpOwogICAgICAgICAgcHV0X2J5dGUocywgc3RybS5hZGxlciA+PiA4ICYgMjU1KTsKICAgICAgICAgIHN0cm0uYWRsZXIgPSAwOwogICAgICAgICAgcy5zdGF0dXMgPSBCVVNZX1NUQVRFOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBzLnN0YXR1cyA9IEJVU1lfU1RBVEU7CiAgICAgIH0KICAgIH0KICAgIGlmIChzLnBlbmRpbmcgIT09IDApIHsKICAgICAgZmx1c2hfcGVuZGluZyhzdHJtKTsKICAgICAgaWYgKHN0cm0uYXZhaWxfb3V0ID09PSAwKSB7CiAgICAgICAgcy5sYXN0X2ZsdXNoID0gLTE7CiAgICAgICAgcmV0dXJuIFpfT0skMjsKICAgICAgfQogICAgfSBlbHNlIGlmIChzdHJtLmF2YWlsX2luID09PSAwICYmIHJhbmsoZmx1c2gyKSA8PSByYW5rKG9sZF9mbHVzaCkgJiYgZmx1c2gyICE9PSBaX0ZJTklTSCQyKSB7CiAgICAgIHJldHVybiBlcnIoc3RybSwgWl9CVUZfRVJST1IkMSk7CiAgICB9CiAgICBpZiAocy5zdGF0dXMgPT09IEZJTklTSF9TVEFURSAmJiBzdHJtLmF2YWlsX2luICE9PSAwKSB7CiAgICAgIHJldHVybiBlcnIoc3RybSwgWl9CVUZfRVJST1IkMSk7CiAgICB9CiAgICBpZiAoc3RybS5hdmFpbF9pbiAhPT0gMCB8fCBzLmxvb2thaGVhZCAhPT0gMCB8fCBmbHVzaDIgIT09IFpfTk9fRkxVU0gkMSAmJiBzLnN0YXR1cyAhPT0gRklOSVNIX1NUQVRFKSB7CiAgICAgIHZhciBic3RhdGUgPSBzLnN0cmF0ZWd5ID09PSBaX0hVRkZNQU5fT05MWSA/IGRlZmxhdGVfaHVmZihzLCBmbHVzaDIpIDogcy5zdHJhdGVneSA9PT0gWl9STEUgPyBkZWZsYXRlX3JsZShzLCBmbHVzaDIpIDogY29uZmlndXJhdGlvbl90YWJsZVtzLmxldmVsXS5mdW5jKHMsIGZsdXNoMik7CiAgICAgIGlmIChic3RhdGUgPT09IEJTX0ZJTklTSF9TVEFSVEVEIHx8IGJzdGF0ZSA9PT0gQlNfRklOSVNIX0RPTkUpIHsKICAgICAgICBzLnN0YXR1cyA9IEZJTklTSF9TVEFURTsKICAgICAgfQogICAgICBpZiAoYnN0YXRlID09PSBCU19ORUVEX01PUkUgfHwgYnN0YXRlID09PSBCU19GSU5JU0hfU1RBUlRFRCkgewogICAgICAgIGlmIChzdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgICAgcy5sYXN0X2ZsdXNoID0gLTE7CiAgICAgICAgfQogICAgICAgIHJldHVybiBaX09LJDI7CiAgICAgIH0KICAgICAgaWYgKGJzdGF0ZSA9PT0gQlNfQkxPQ0tfRE9ORSkgewogICAgICAgIGlmIChmbHVzaDIgPT09IFpfUEFSVElBTF9GTFVTSCkgewogICAgICAgICAgdHJlZXMuX3RyX2FsaWduKHMpOwogICAgICAgIH0gZWxzZSBpZiAoZmx1c2gyICE9PSBaX0JMT0NLJDEpIHsKICAgICAgICAgIHRyZWVzLl90cl9zdG9yZWRfYmxvY2socywgMCwgMCwgZmFsc2UpOwogICAgICAgICAgaWYgKGZsdXNoMiA9PT0gWl9GVUxMX0ZMVVNIKSB7CiAgICAgICAgICAgIHplcm8ocy5oZWFkKTsKICAgICAgICAgICAgaWYgKHMubG9va2FoZWFkID09PSAwKSB7CiAgICAgICAgICAgICAgcy5zdHJzdGFydCA9IDA7CiAgICAgICAgICAgICAgcy5ibG9ja19zdGFydCA9IDA7CiAgICAgICAgICAgICAgcy5pbnNlcnQgPSAwOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZsdXNoX3BlbmRpbmcoc3RybSk7CiAgICAgICAgaWYgKHN0cm0uYXZhaWxfb3V0ID09PSAwKSB7CiAgICAgICAgICBzLmxhc3RfZmx1c2ggPSAtMTsKICAgICAgICAgIHJldHVybiBaX09LJDI7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBpZiAoZmx1c2gyICE9PSBaX0ZJTklTSCQyKSB7CiAgICAgIHJldHVybiBaX09LJDI7CiAgICB9CiAgICBpZiAocy53cmFwIDw9IDApIHsKICAgICAgcmV0dXJuIFpfU1RSRUFNX0VORCQyOwogICAgfQogICAgaWYgKHMud3JhcCA9PT0gMikgewogICAgICBwdXRfYnl0ZShzLCBzdHJtLmFkbGVyICYgMjU1KTsKICAgICAgcHV0X2J5dGUocywgc3RybS5hZGxlciA+PiA4ICYgMjU1KTsKICAgICAgcHV0X2J5dGUocywgc3RybS5hZGxlciA+PiAxNiAmIDI1NSk7CiAgICAgIHB1dF9ieXRlKHMsIHN0cm0uYWRsZXIgPj4gMjQgJiAyNTUpOwogICAgICBwdXRfYnl0ZShzLCBzdHJtLnRvdGFsX2luICYgMjU1KTsKICAgICAgcHV0X2J5dGUocywgc3RybS50b3RhbF9pbiA+PiA4ICYgMjU1KTsKICAgICAgcHV0X2J5dGUocywgc3RybS50b3RhbF9pbiA+PiAxNiAmIDI1NSk7CiAgICAgIHB1dF9ieXRlKHMsIHN0cm0udG90YWxfaW4gPj4gMjQgJiAyNTUpOwogICAgfSBlbHNlIHsKICAgICAgcHV0U2hvcnRNU0Iocywgc3RybS5hZGxlciA+Pj4gMTYpOwogICAgICBwdXRTaG9ydE1TQihzLCBzdHJtLmFkbGVyICYgNjU1MzUpOwogICAgfQogICAgZmx1c2hfcGVuZGluZyhzdHJtKTsKICAgIGlmIChzLndyYXAgPiAwKSB7CiAgICAgIHMud3JhcCA9IC1zLndyYXA7CiAgICB9CiAgICByZXR1cm4gcy5wZW5kaW5nICE9PSAwID8gWl9PSyQyIDogWl9TVFJFQU1fRU5EJDI7CiAgfQogIGZ1bmN0aW9uIGRlZmxhdGVFbmQoc3RybSkgewogICAgdmFyIHN0YXR1czsKICAgIGlmICghc3RybSB8fCAhc3RybS5zdGF0ZSkgewogICAgICByZXR1cm4gWl9TVFJFQU1fRVJST1IkMTsKICAgIH0KICAgIHN0YXR1cyA9IHN0cm0uc3RhdGUuc3RhdHVzOwogICAgaWYgKHN0YXR1cyAhPT0gSU5JVF9TVEFURSAmJiBzdGF0dXMgIT09IEVYVFJBX1NUQVRFICYmIHN0YXR1cyAhPT0gTkFNRV9TVEFURSAmJiBzdGF0dXMgIT09IENPTU1FTlRfU1RBVEUgJiYgc3RhdHVzICE9PSBIQ1JDX1NUQVRFICYmIHN0YXR1cyAhPT0gQlVTWV9TVEFURSAmJiBzdGF0dXMgIT09IEZJTklTSF9TVEFURSkgewogICAgICByZXR1cm4gZXJyKHN0cm0sIFpfU1RSRUFNX0VSUk9SJDEpOwogICAgfQogICAgc3RybS5zdGF0ZSA9IG51bGw7CiAgICByZXR1cm4gc3RhdHVzID09PSBCVVNZX1NUQVRFID8gZXJyKHN0cm0sIFpfREFUQV9FUlJPUiQxKSA6IFpfT0skMjsKICB9CiAgZnVuY3Rpb24gZGVmbGF0ZVNldERpY3Rpb25hcnkoc3RybSwgZGljdGlvbmFyeSkgewogICAgdmFyIGRpY3RMZW5ndGggPSBkaWN0aW9uYXJ5Lmxlbmd0aDsKICAgIHZhciBzOwogICAgdmFyIHN0ciwgbjsKICAgIHZhciB3cmFwMjsKICAgIHZhciBhdmFpbDsKICAgIHZhciBuZXh0OwogICAgdmFyIGlucHV0OwogICAgdmFyIHRtcERpY3Q7CiAgICBpZiAoIXN0cm0gfHwgIXN0cm0uc3RhdGUpIHsKICAgICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SJDE7CiAgICB9CiAgICBzID0gc3RybS5zdGF0ZTsKICAgIHdyYXAyID0gcy53cmFwOwogICAgaWYgKHdyYXAyID09PSAyIHx8IHdyYXAyID09PSAxICYmIHMuc3RhdHVzICE9PSBJTklUX1NUQVRFIHx8IHMubG9va2FoZWFkKSB7CiAgICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUiQxOwogICAgfQogICAgaWYgKHdyYXAyID09PSAxKSB7CiAgICAgIHN0cm0uYWRsZXIgPSBhZGxlcjMyJDEoc3RybS5hZGxlciwgZGljdGlvbmFyeSwgZGljdExlbmd0aCwgMCk7CiAgICB9CiAgICBzLndyYXAgPSAwOwogICAgaWYgKGRpY3RMZW5ndGggPj0gcy53X3NpemUpIHsKICAgICAgaWYgKHdyYXAyID09PSAwKSB7CiAgICAgICAgemVybyhzLmhlYWQpOwogICAgICAgIHMuc3Ryc3RhcnQgPSAwOwogICAgICAgIHMuYmxvY2tfc3RhcnQgPSAwOwogICAgICAgIHMuaW5zZXJ0ID0gMDsKICAgICAgfQogICAgICB0bXBEaWN0ID0gbmV3IHV0aWxzJDUuQnVmOChzLndfc2l6ZSk7CiAgICAgIHV0aWxzJDUuYXJyYXlTZXQodG1wRGljdCwgZGljdGlvbmFyeSwgZGljdExlbmd0aCAtIHMud19zaXplLCBzLndfc2l6ZSwgMCk7CiAgICAgIGRpY3Rpb25hcnkgPSB0bXBEaWN0OwogICAgICBkaWN0TGVuZ3RoID0gcy53X3NpemU7CiAgICB9CiAgICBhdmFpbCA9IHN0cm0uYXZhaWxfaW47CiAgICBuZXh0ID0gc3RybS5uZXh0X2luOwogICAgaW5wdXQgPSBzdHJtLmlucHV0OwogICAgc3RybS5hdmFpbF9pbiA9IGRpY3RMZW5ndGg7CiAgICBzdHJtLm5leHRfaW4gPSAwOwogICAgc3RybS5pbnB1dCA9IGRpY3Rpb25hcnk7CiAgICBmaWxsX3dpbmRvdyhzKTsKICAgIHdoaWxlIChzLmxvb2thaGVhZCA+PSBNSU5fTUFUQ0gpIHsKICAgICAgc3RyID0gcy5zdHJzdGFydDsKICAgICAgbiA9IHMubG9va2FoZWFkIC0gKE1JTl9NQVRDSCAtIDEpOwogICAgICBkbyB7CiAgICAgICAgcy5pbnNfaCA9IChzLmluc19oIDw8IHMuaGFzaF9zaGlmdCBeIHMud2luZG93W3N0ciArIE1JTl9NQVRDSCAtIDFdKSAmIHMuaGFzaF9tYXNrOwogICAgICAgIHMucHJldltzdHIgJiBzLndfbWFza10gPSBzLmhlYWRbcy5pbnNfaF07CiAgICAgICAgcy5oZWFkW3MuaW5zX2hdID0gc3RyOwogICAgICAgIHN0cisrOwogICAgICB9IHdoaWxlICgtLW4pOwogICAgICBzLnN0cnN0YXJ0ID0gc3RyOwogICAgICBzLmxvb2thaGVhZCA9IE1JTl9NQVRDSCAtIDE7CiAgICAgIGZpbGxfd2luZG93KHMpOwogICAgfQogICAgcy5zdHJzdGFydCArPSBzLmxvb2thaGVhZDsKICAgIHMuYmxvY2tfc3RhcnQgPSBzLnN0cnN0YXJ0OwogICAgcy5pbnNlcnQgPSBzLmxvb2thaGVhZDsKICAgIHMubG9va2FoZWFkID0gMDsKICAgIHMubWF0Y2hfbGVuZ3RoID0gcy5wcmV2X2xlbmd0aCA9IE1JTl9NQVRDSCAtIDE7CiAgICBzLm1hdGNoX2F2YWlsYWJsZSA9IDA7CiAgICBzdHJtLm5leHRfaW4gPSBuZXh0OwogICAgc3RybS5pbnB1dCA9IGlucHV0OwogICAgc3RybS5hdmFpbF9pbiA9IGF2YWlsOwogICAgcy53cmFwID0gd3JhcDI7CiAgICByZXR1cm4gWl9PSyQyOwogIH0KICBkZWZsYXRlJDMuZGVmbGF0ZUluaXQgPSBkZWZsYXRlSW5pdDsKICBkZWZsYXRlJDMuZGVmbGF0ZUluaXQyID0gZGVmbGF0ZUluaXQyOwogIGRlZmxhdGUkMy5kZWZsYXRlUmVzZXQgPSBkZWZsYXRlUmVzZXQ7CiAgZGVmbGF0ZSQzLmRlZmxhdGVSZXNldEtlZXAgPSBkZWZsYXRlUmVzZXRLZWVwOwogIGRlZmxhdGUkMy5kZWZsYXRlU2V0SGVhZGVyID0gZGVmbGF0ZVNldEhlYWRlcjsKICBkZWZsYXRlJDMuZGVmbGF0ZSA9IGRlZmxhdGUkMjsKICBkZWZsYXRlJDMuZGVmbGF0ZUVuZCA9IGRlZmxhdGVFbmQ7CiAgZGVmbGF0ZSQzLmRlZmxhdGVTZXREaWN0aW9uYXJ5ID0gZGVmbGF0ZVNldERpY3Rpb25hcnk7CiAgZGVmbGF0ZSQzLmRlZmxhdGVJbmZvID0gInBha28gZGVmbGF0ZSAoZnJvbSBOb2RlY2EgcHJvamVjdCkiOwogIHZhciBzdHJpbmdzJDIgPSB7fTsKICB2YXIgdXRpbHMkNCA9IGNvbW1vbjsKICB2YXIgU1RSX0FQUExZX09LID0gdHJ1ZTsKICB2YXIgU1RSX0FQUExZX1VJQV9PSyA9IHRydWU7CiAgdHJ5IHsKICAgIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgWzBdKTsKICB9IGNhdGNoIChfXykgewogICAgU1RSX0FQUExZX09LID0gZmFsc2U7CiAgfQogIHRyeSB7CiAgICBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIG5ldyBVaW50OEFycmF5KDEpKTsKICB9IGNhdGNoIChfXykgewogICAgU1RSX0FQUExZX1VJQV9PSyA9IGZhbHNlOwogIH0KICB2YXIgX3V0ZjhsZW4gPSBuZXcgdXRpbHMkNC5CdWY4KDI1Nik7CiAgZm9yICh2YXIgcSA9IDA7IHEgPCAyNTY7IHErKykgewogICAgX3V0ZjhsZW5bcV0gPSBxID49IDI1MiA/IDYgOiBxID49IDI0OCA/IDUgOiBxID49IDI0MCA/IDQgOiBxID49IDIyNCA/IDMgOiBxID49IDE5MiA/IDIgOiAxOwogIH0KICBfdXRmOGxlblsyNTRdID0gX3V0ZjhsZW5bMjU0XSA9IDE7CiAgc3RyaW5ncyQyLnN0cmluZzJidWYgPSBmdW5jdGlvbihzdHIpIHsKICAgIHZhciBidWYsIGMyLCBjMjIsIG1fcG9zLCBpMiwgc3RyX2xlbiA9IHN0ci5sZW5ndGgsIGJ1Zl9sZW4gPSAwOwogICAgZm9yIChtX3BvcyA9IDA7IG1fcG9zIDwgc3RyX2xlbjsgbV9wb3MrKykgewogICAgICBjMiA9IHN0ci5jaGFyQ29kZUF0KG1fcG9zKTsKICAgICAgaWYgKChjMiAmIDY0NTEyKSA9PT0gNTUyOTYgJiYgbV9wb3MgKyAxIDwgc3RyX2xlbikgewogICAgICAgIGMyMiA9IHN0ci5jaGFyQ29kZUF0KG1fcG9zICsgMSk7CiAgICAgICAgaWYgKChjMjIgJiA2NDUxMikgPT09IDU2MzIwKSB7CiAgICAgICAgICBjMiA9IDY1NTM2ICsgKGMyIC0gNTUyOTYgPDwgMTApICsgKGMyMiAtIDU2MzIwKTsKICAgICAgICAgIG1fcG9zKys7CiAgICAgICAgfQogICAgICB9CiAgICAgIGJ1Zl9sZW4gKz0gYzIgPCAxMjggPyAxIDogYzIgPCAyMDQ4ID8gMiA6IGMyIDwgNjU1MzYgPyAzIDogNDsKICAgIH0KICAgIGJ1ZiA9IG5ldyB1dGlscyQ0LkJ1ZjgoYnVmX2xlbik7CiAgICBmb3IgKGkyID0gMCwgbV9wb3MgPSAwOyBpMiA8IGJ1Zl9sZW47IG1fcG9zKyspIHsKICAgICAgYzIgPSBzdHIuY2hhckNvZGVBdChtX3Bvcyk7CiAgICAgIGlmICgoYzIgJiA2NDUxMikgPT09IDU1Mjk2ICYmIG1fcG9zICsgMSA8IHN0cl9sZW4pIHsKICAgICAgICBjMjIgPSBzdHIuY2hhckNvZGVBdChtX3BvcyArIDEpOwogICAgICAgIGlmICgoYzIyICYgNjQ1MTIpID09PSA1NjMyMCkgewogICAgICAgICAgYzIgPSA2NTUzNiArIChjMiAtIDU1Mjk2IDw8IDEwKSArIChjMjIgLSA1NjMyMCk7CiAgICAgICAgICBtX3BvcysrOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoYzIgPCAxMjgpIHsKICAgICAgICBidWZbaTIrK10gPSBjMjsKICAgICAgfSBlbHNlIGlmIChjMiA8IDIwNDgpIHsKICAgICAgICBidWZbaTIrK10gPSAxOTIgfCBjMiA+Pj4gNjsKICAgICAgICBidWZbaTIrK10gPSAxMjggfCBjMiAmIDYzOwogICAgICB9IGVsc2UgaWYgKGMyIDwgNjU1MzYpIHsKICAgICAgICBidWZbaTIrK10gPSAyMjQgfCBjMiA+Pj4gMTI7CiAgICAgICAgYnVmW2kyKytdID0gMTI4IHwgYzIgPj4+IDYgJiA2MzsKICAgICAgICBidWZbaTIrK10gPSAxMjggfCBjMiAmIDYzOwogICAgICB9IGVsc2UgewogICAgICAgIGJ1ZltpMisrXSA9IDI0MCB8IGMyID4+PiAxODsKICAgICAgICBidWZbaTIrK10gPSAxMjggfCBjMiA+Pj4gMTIgJiA2MzsKICAgICAgICBidWZbaTIrK10gPSAxMjggfCBjMiA+Pj4gNiAmIDYzOwogICAgICAgIGJ1ZltpMisrXSA9IDEyOCB8IGMyICYgNjM7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBidWY7CiAgfTsKICBmdW5jdGlvbiBidWYyYmluc3RyaW5nKGJ1ZiwgbGVuMikgewogICAgaWYgKGxlbjIgPCA2NTUzNCkgewogICAgICBpZiAoYnVmLnN1YmFycmF5ICYmIFNUUl9BUFBMWV9VSUFfT0sgfHwgIWJ1Zi5zdWJhcnJheSAmJiBTVFJfQVBQTFlfT0spIHsKICAgICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCB1dGlscyQ0LnNocmlua0J1ZihidWYsIGxlbjIpKTsKICAgICAgfQogICAgfQogICAgdmFyIHJlc3VsdCA9ICIiOwogICAgZm9yICh2YXIgaTIgPSAwOyBpMiA8IGxlbjI7IGkyKyspIHsKICAgICAgcmVzdWx0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2kyXSk7CiAgICB9CiAgICByZXR1cm4gcmVzdWx0OwogIH0KICBzdHJpbmdzJDIuYnVmMmJpbnN0cmluZyA9IGZ1bmN0aW9uKGJ1ZikgewogICAgcmV0dXJuIGJ1ZjJiaW5zdHJpbmcoYnVmLCBidWYubGVuZ3RoKTsKICB9OwogIHN0cmluZ3MkMi5iaW5zdHJpbmcyYnVmID0gZnVuY3Rpb24oc3RyKSB7CiAgICB2YXIgYnVmID0gbmV3IHV0aWxzJDQuQnVmOChzdHIubGVuZ3RoKTsKICAgIGZvciAodmFyIGkyID0gMCwgbGVuMiA9IGJ1Zi5sZW5ndGg7IGkyIDwgbGVuMjsgaTIrKykgewogICAgICBidWZbaTJdID0gc3RyLmNoYXJDb2RlQXQoaTIpOwogICAgfQogICAgcmV0dXJuIGJ1ZjsKICB9OwogIHN0cmluZ3MkMi5idWYyc3RyaW5nID0gZnVuY3Rpb24oYnVmLCBtYXgyKSB7CiAgICB2YXIgaTIsIG91dCwgYzIsIGNfbGVuOwogICAgdmFyIGxlbjIgPSBtYXgyIHx8IGJ1Zi5sZW5ndGg7CiAgICB2YXIgdXRmMTZidWYgPSBuZXcgQXJyYXkobGVuMiAqIDIpOwogICAgZm9yIChvdXQgPSAwLCBpMiA9IDA7IGkyIDwgbGVuMjsgKSB7CiAgICAgIGMyID0gYnVmW2kyKytdOwogICAgICBpZiAoYzIgPCAxMjgpIHsKICAgICAgICB1dGYxNmJ1ZltvdXQrK10gPSBjMjsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICBjX2xlbiA9IF91dGY4bGVuW2MyXTsKICAgICAgaWYgKGNfbGVuID4gNCkgewogICAgICAgIHV0ZjE2YnVmW291dCsrXSA9IDY1NTMzOwogICAgICAgIGkyICs9IGNfbGVuIC0gMTsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICBjMiAmPSBjX2xlbiA9PT0gMiA/IDMxIDogY19sZW4gPT09IDMgPyAxNSA6IDc7CiAgICAgIHdoaWxlIChjX2xlbiA+IDEgJiYgaTIgPCBsZW4yKSB7CiAgICAgICAgYzIgPSBjMiA8PCA2IHwgYnVmW2kyKytdICYgNjM7CiAgICAgICAgY19sZW4tLTsKICAgICAgfQogICAgICBpZiAoY19sZW4gPiAxKSB7CiAgICAgICAgdXRmMTZidWZbb3V0KytdID0gNjU1MzM7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KICAgICAgaWYgKGMyIDwgNjU1MzYpIHsKICAgICAgICB1dGYxNmJ1ZltvdXQrK10gPSBjMjsKICAgICAgfSBlbHNlIHsKICAgICAgICBjMiAtPSA2NTUzNjsKICAgICAgICB1dGYxNmJ1ZltvdXQrK10gPSA1NTI5NiB8IGMyID4+IDEwICYgMTAyMzsKICAgICAgICB1dGYxNmJ1ZltvdXQrK10gPSA1NjMyMCB8IGMyICYgMTAyMzsKICAgICAgfQogICAgfQogICAgcmV0dXJuIGJ1ZjJiaW5zdHJpbmcodXRmMTZidWYsIG91dCk7CiAgfTsKICBzdHJpbmdzJDIudXRmOGJvcmRlciA9IGZ1bmN0aW9uKGJ1ZiwgbWF4MikgewogICAgdmFyIHBvczsKICAgIG1heDIgPSBtYXgyIHx8IGJ1Zi5sZW5ndGg7CiAgICBpZiAobWF4MiA+IGJ1Zi5sZW5ndGgpIHsKICAgICAgbWF4MiA9IGJ1Zi5sZW5ndGg7CiAgICB9CiAgICBwb3MgPSBtYXgyIC0gMTsKICAgIHdoaWxlIChwb3MgPj0gMCAmJiAoYnVmW3Bvc10gJiAxOTIpID09PSAxMjgpIHsKICAgICAgcG9zLS07CiAgICB9CiAgICBpZiAocG9zIDwgMCkgewogICAgICByZXR1cm4gbWF4MjsKICAgIH0KICAgIGlmIChwb3MgPT09IDApIHsKICAgICAgcmV0dXJuIG1heDI7CiAgICB9CiAgICByZXR1cm4gcG9zICsgX3V0ZjhsZW5bYnVmW3Bvc11dID4gbWF4MiA/IHBvcyA6IG1heDI7CiAgfTsKICBmdW5jdGlvbiBaU3RyZWFtJDIoKSB7CiAgICB0aGlzLmlucHV0ID0gbnVsbDsKICAgIHRoaXMubmV4dF9pbiA9IDA7CiAgICB0aGlzLmF2YWlsX2luID0gMDsKICAgIHRoaXMudG90YWxfaW4gPSAwOwogICAgdGhpcy5vdXRwdXQgPSBudWxsOwogICAgdGhpcy5uZXh0X291dCA9IDA7CiAgICB0aGlzLmF2YWlsX291dCA9IDA7CiAgICB0aGlzLnRvdGFsX291dCA9IDA7CiAgICB0aGlzLm1zZyA9ICIiOwogICAgdGhpcy5zdGF0ZSA9IG51bGw7CiAgICB0aGlzLmRhdGFfdHlwZSA9IDI7CiAgICB0aGlzLmFkbGVyID0gMDsKICB9CiAgdmFyIHpzdHJlYW0gPSBaU3RyZWFtJDI7CiAgdmFyIHpsaWJfZGVmbGF0ZSA9IGRlZmxhdGUkMzsKICB2YXIgdXRpbHMkMyA9IGNvbW1vbjsKICB2YXIgc3RyaW5ncyQxID0gc3RyaW5ncyQyOwogIHZhciBtc2ckMSA9IG1lc3NhZ2VzOwogIHZhciBaU3RyZWFtJDEgPSB6c3RyZWFtOwogIHZhciB0b1N0cmluZyQ0ID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZzsKICB2YXIgWl9OT19GTFVTSCA9IDA7CiAgdmFyIFpfRklOSVNIJDEgPSA0OwogIHZhciBaX09LJDEgPSAwOwogIHZhciBaX1NUUkVBTV9FTkQkMSA9IDE7CiAgdmFyIFpfU1lOQ19GTFVTSCQxID0gMjsKICB2YXIgWl9ERUZBVUxUX0NPTVBSRVNTSU9OID0gLTE7CiAgdmFyIFpfREVGQVVMVF9TVFJBVEVHWSA9IDA7CiAgdmFyIFpfREVGTEFURUQkMSA9IDg7CiAgZnVuY3Rpb24gRGVmbGF0ZShvcHRpb25zKSB7CiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgRGVmbGF0ZSkpCiAgICAgIHJldHVybiBuZXcgRGVmbGF0ZShvcHRpb25zKTsKICAgIHRoaXMub3B0aW9ucyA9IHV0aWxzJDMuYXNzaWduKHsKICAgICAgbGV2ZWw6IFpfREVGQVVMVF9DT01QUkVTU0lPTiwKICAgICAgbWV0aG9kOiBaX0RFRkxBVEVEJDEsCiAgICAgIGNodW5rU2l6ZTogMTYzODQsCiAgICAgIHdpbmRvd0JpdHM6IDE1LAogICAgICBtZW1MZXZlbDogOCwKICAgICAgc3RyYXRlZ3k6IFpfREVGQVVMVF9TVFJBVEVHWSwKICAgICAgdG86ICIiCiAgICB9LCBvcHRpb25zIHx8IHt9KTsKICAgIHZhciBvcHQgPSB0aGlzLm9wdGlvbnM7CiAgICBpZiAob3B0LnJhdyAmJiBvcHQud2luZG93Qml0cyA+IDApIHsKICAgICAgb3B0LndpbmRvd0JpdHMgPSAtb3B0LndpbmRvd0JpdHM7CiAgICB9IGVsc2UgaWYgKG9wdC5nemlwICYmIG9wdC53aW5kb3dCaXRzID4gMCAmJiBvcHQud2luZG93Qml0cyA8IDE2KSB7CiAgICAgIG9wdC53aW5kb3dCaXRzICs9IDE2OwogICAgfQogICAgdGhpcy5lcnIgPSAwOwogICAgdGhpcy5tc2cgPSAiIjsKICAgIHRoaXMuZW5kZWQgPSBmYWxzZTsKICAgIHRoaXMuY2h1bmtzID0gW107CiAgICB0aGlzLnN0cm0gPSBuZXcgWlN0cmVhbSQxKCk7CiAgICB0aGlzLnN0cm0uYXZhaWxfb3V0ID0gMDsKICAgIHZhciBzdGF0dXMgPSB6bGliX2RlZmxhdGUuZGVmbGF0ZUluaXQyKHRoaXMuc3RybSwgb3B0LmxldmVsLCBvcHQubWV0aG9kLCBvcHQud2luZG93Qml0cywgb3B0Lm1lbUxldmVsLCBvcHQuc3RyYXRlZ3kpOwogICAgaWYgKHN0YXR1cyAhPT0gWl9PSyQxKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcihtc2ckMVtzdGF0dXNdKTsKICAgIH0KICAgIGlmIChvcHQuaGVhZGVyKSB7CiAgICAgIHpsaWJfZGVmbGF0ZS5kZWZsYXRlU2V0SGVhZGVyKHRoaXMuc3RybSwgb3B0LmhlYWRlcik7CiAgICB9CiAgICBpZiAob3B0LmRpY3Rpb25hcnkpIHsKICAgICAgdmFyIGRpY3Q7CiAgICAgIGlmICh0eXBlb2Ygb3B0LmRpY3Rpb25hcnkgPT09ICJzdHJpbmciKSB7CiAgICAgICAgZGljdCA9IHN0cmluZ3MkMS5zdHJpbmcyYnVmKG9wdC5kaWN0aW9uYXJ5KTsKICAgICAgfSBlbHNlIGlmICh0b1N0cmluZyQ0LmNhbGwob3B0LmRpY3Rpb25hcnkpID09PSAiW29iamVjdCBBcnJheUJ1ZmZlcl0iKSB7CiAgICAgICAgZGljdCA9IG5ldyBVaW50OEFycmF5KG9wdC5kaWN0aW9uYXJ5KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBkaWN0ID0gb3B0LmRpY3Rpb25hcnk7CiAgICAgIH0KICAgICAgc3RhdHVzID0gemxpYl9kZWZsYXRlLmRlZmxhdGVTZXREaWN0aW9uYXJ5KHRoaXMuc3RybSwgZGljdCk7CiAgICAgIGlmIChzdGF0dXMgIT09IFpfT0skMSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihtc2ckMVtzdGF0dXNdKTsKICAgICAgfQogICAgICB0aGlzLl9kaWN0X3NldCA9IHRydWU7CiAgICB9CiAgfQogIERlZmxhdGUucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbihkYXRhMiwgbW9kZSkgewogICAgdmFyIHN0cm0gPSB0aGlzLnN0cm07CiAgICB2YXIgY2h1bmtTaXplID0gdGhpcy5vcHRpb25zLmNodW5rU2l6ZTsKICAgIHZhciBzdGF0dXMsIF9tb2RlOwogICAgaWYgKHRoaXMuZW5kZWQpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgX21vZGUgPSBtb2RlID09PSB+fm1vZGUgPyBtb2RlIDogbW9kZSA9PT0gdHJ1ZSA/IFpfRklOSVNIJDEgOiBaX05PX0ZMVVNIOwogICAgaWYgKHR5cGVvZiBkYXRhMiA9PT0gInN0cmluZyIpIHsKICAgICAgc3RybS5pbnB1dCA9IHN0cmluZ3MkMS5zdHJpbmcyYnVmKGRhdGEyKTsKICAgIH0gZWxzZSBpZiAodG9TdHJpbmckNC5jYWxsKGRhdGEyKSA9PT0gIltvYmplY3QgQXJyYXlCdWZmZXJdIikgewogICAgICBzdHJtLmlucHV0ID0gbmV3IFVpbnQ4QXJyYXkoZGF0YTIpOwogICAgfSBlbHNlIHsKICAgICAgc3RybS5pbnB1dCA9IGRhdGEyOwogICAgfQogICAgc3RybS5uZXh0X2luID0gMDsKICAgIHN0cm0uYXZhaWxfaW4gPSBzdHJtLmlucHV0Lmxlbmd0aDsKICAgIGRvIHsKICAgICAgaWYgKHN0cm0uYXZhaWxfb3V0ID09PSAwKSB7CiAgICAgICAgc3RybS5vdXRwdXQgPSBuZXcgdXRpbHMkMy5CdWY4KGNodW5rU2l6ZSk7CiAgICAgICAgc3RybS5uZXh0X291dCA9IDA7CiAgICAgICAgc3RybS5hdmFpbF9vdXQgPSBjaHVua1NpemU7CiAgICAgIH0KICAgICAgc3RhdHVzID0gemxpYl9kZWZsYXRlLmRlZmxhdGUoc3RybSwgX21vZGUpOwogICAgICBpZiAoc3RhdHVzICE9PSBaX1NUUkVBTV9FTkQkMSAmJiBzdGF0dXMgIT09IFpfT0skMSkgewogICAgICAgIHRoaXMub25FbmQoc3RhdHVzKTsKICAgICAgICB0aGlzLmVuZGVkID0gdHJ1ZTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgaWYgKHN0cm0uYXZhaWxfb3V0ID09PSAwIHx8IHN0cm0uYXZhaWxfaW4gPT09IDAgJiYgKF9tb2RlID09PSBaX0ZJTklTSCQxIHx8IF9tb2RlID09PSBaX1NZTkNfRkxVU0gkMSkpIHsKICAgICAgICBpZiAodGhpcy5vcHRpb25zLnRvID09PSAic3RyaW5nIikgewogICAgICAgICAgdGhpcy5vbkRhdGEoc3RyaW5ncyQxLmJ1ZjJiaW5zdHJpbmcodXRpbHMkMy5zaHJpbmtCdWYoc3RybS5vdXRwdXQsIHN0cm0ubmV4dF9vdXQpKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMub25EYXRhKHV0aWxzJDMuc2hyaW5rQnVmKHN0cm0ub3V0cHV0LCBzdHJtLm5leHRfb3V0KSk7CiAgICAgICAgfQogICAgICB9CiAgICB9IHdoaWxlICgoc3RybS5hdmFpbF9pbiA+IDAgfHwgc3RybS5hdmFpbF9vdXQgPT09IDApICYmIHN0YXR1cyAhPT0gWl9TVFJFQU1fRU5EJDEpOwogICAgaWYgKF9tb2RlID09PSBaX0ZJTklTSCQxKSB7CiAgICAgIHN0YXR1cyA9IHpsaWJfZGVmbGF0ZS5kZWZsYXRlRW5kKHRoaXMuc3RybSk7CiAgICAgIHRoaXMub25FbmQoc3RhdHVzKTsKICAgICAgdGhpcy5lbmRlZCA9IHRydWU7CiAgICAgIHJldHVybiBzdGF0dXMgPT09IFpfT0skMTsKICAgIH0KICAgIGlmIChfbW9kZSA9PT0gWl9TWU5DX0ZMVVNIJDEpIHsKICAgICAgdGhpcy5vbkVuZChaX09LJDEpOwogICAgICBzdHJtLmF2YWlsX291dCA9IDA7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgcmV0dXJuIHRydWU7CiAgfTsKICBEZWZsYXRlLnByb3RvdHlwZS5vbkRhdGEgPSBmdW5jdGlvbihjaHVuazIpIHsKICAgIHRoaXMuY2h1bmtzLnB1c2goY2h1bmsyKTsKICB9OwogIERlZmxhdGUucHJvdG90eXBlLm9uRW5kID0gZnVuY3Rpb24oc3RhdHVzKSB7CiAgICBpZiAoc3RhdHVzID09PSBaX09LJDEpIHsKICAgICAgaWYgKHRoaXMub3B0aW9ucy50byA9PT0gInN0cmluZyIpIHsKICAgICAgICB0aGlzLnJlc3VsdCA9IHRoaXMuY2h1bmtzLmpvaW4oIiIpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucmVzdWx0ID0gdXRpbHMkMy5mbGF0dGVuQ2h1bmtzKHRoaXMuY2h1bmtzKTsKICAgICAgfQogICAgfQogICAgdGhpcy5jaHVua3MgPSBbXTsKICAgIHRoaXMuZXJyID0gc3RhdHVzOwogICAgdGhpcy5tc2cgPSB0aGlzLnN0cm0ubXNnOwogIH07CiAgZnVuY3Rpb24gZGVmbGF0ZSQxKGlucHV0LCBvcHRpb25zKSB7CiAgICB2YXIgZGVmbGF0b3IgPSBuZXcgRGVmbGF0ZShvcHRpb25zKTsKICAgIGRlZmxhdG9yLnB1c2goaW5wdXQsIHRydWUpOwogICAgaWYgKGRlZmxhdG9yLmVycikgewogICAgICB0aHJvdyBkZWZsYXRvci5tc2cgfHwgbXNnJDFbZGVmbGF0b3IuZXJyXTsKICAgIH0KICAgIHJldHVybiBkZWZsYXRvci5yZXN1bHQ7CiAgfQogIGZ1bmN0aW9uIGRlZmxhdGVSYXcoaW5wdXQsIG9wdGlvbnMpIHsKICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwogICAgb3B0aW9ucy5yYXcgPSB0cnVlOwogICAgcmV0dXJuIGRlZmxhdGUkMShpbnB1dCwgb3B0aW9ucyk7CiAgfQogIGZ1bmN0aW9uIGd6aXAoaW5wdXQsIG9wdGlvbnMpIHsKICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwogICAgb3B0aW9ucy5nemlwID0gdHJ1ZTsKICAgIHJldHVybiBkZWZsYXRlJDEoaW5wdXQsIG9wdGlvbnMpOwogIH0KICBkZWZsYXRlJDQuRGVmbGF0ZSA9IERlZmxhdGU7CiAgZGVmbGF0ZSQ0LmRlZmxhdGUgPSBkZWZsYXRlJDE7CiAgZGVmbGF0ZSQ0LmRlZmxhdGVSYXcgPSBkZWZsYXRlUmF3OwogIGRlZmxhdGUkNC5nemlwID0gZ3ppcDsKICB2YXIgaW5mbGF0ZSQ0ID0ge307CiAgdmFyIGluZmxhdGUkMyA9IHt9OwogIHZhciBCQUQkMSA9IDMwOwogIHZhciBUWVBFJDEgPSAxMjsKICB2YXIgaW5mZmFzdCA9IGZ1bmN0aW9uIGluZmxhdGVfZmFzdDIoc3RybSwgc3RhcnQpIHsKICAgIHZhciBzdGF0ZTsKICAgIHZhciBfaW47CiAgICB2YXIgbGFzdDI7CiAgICB2YXIgX291dDsKICAgIHZhciBiZWc7CiAgICB2YXIgZW5kOwogICAgdmFyIGRtYXg7CiAgICB2YXIgd3NpemU7CiAgICB2YXIgd2hhdmU7CiAgICB2YXIgd25leHQ7CiAgICB2YXIgc193aW5kb3c7CiAgICB2YXIgaG9sZDsKICAgIHZhciBiaXRzOwogICAgdmFyIGxjb2RlOwogICAgdmFyIGRjb2RlOwogICAgdmFyIGxtYXNrOwogICAgdmFyIGRtYXNrOwogICAgdmFyIGhlcmU7CiAgICB2YXIgb3A7CiAgICB2YXIgbGVuMjsKICAgIHZhciBkaXN0MjsKICAgIHZhciBmcm9tMjsKICAgIHZhciBmcm9tX3NvdXJjZTsKICAgIHZhciBpbnB1dCwgb3V0cHV0OwogICAgc3RhdGUgPSBzdHJtLnN0YXRlOwogICAgX2luID0gc3RybS5uZXh0X2luOwogICAgaW5wdXQgPSBzdHJtLmlucHV0OwogICAgbGFzdDIgPSBfaW4gKyAoc3RybS5hdmFpbF9pbiAtIDUpOwogICAgX291dCA9IHN0cm0ubmV4dF9vdXQ7CiAgICBvdXRwdXQgPSBzdHJtLm91dHB1dDsKICAgIGJlZyA9IF9vdXQgLSAoc3RhcnQgLSBzdHJtLmF2YWlsX291dCk7CiAgICBlbmQgPSBfb3V0ICsgKHN0cm0uYXZhaWxfb3V0IC0gMjU3KTsKICAgIGRtYXggPSBzdGF0ZS5kbWF4OwogICAgd3NpemUgPSBzdGF0ZS53c2l6ZTsKICAgIHdoYXZlID0gc3RhdGUud2hhdmU7CiAgICB3bmV4dCA9IHN0YXRlLnduZXh0OwogICAgc193aW5kb3cgPSBzdGF0ZS53aW5kb3c7CiAgICBob2xkID0gc3RhdGUuaG9sZDsKICAgIGJpdHMgPSBzdGF0ZS5iaXRzOwogICAgbGNvZGUgPSBzdGF0ZS5sZW5jb2RlOwogICAgZGNvZGUgPSBzdGF0ZS5kaXN0Y29kZTsKICAgIGxtYXNrID0gKDEgPDwgc3RhdGUubGVuYml0cykgLSAxOwogICAgZG1hc2sgPSAoMSA8PCBzdGF0ZS5kaXN0Yml0cykgLSAxOwogICAgdG9wOgogICAgICBkbyB7CiAgICAgICAgaWYgKGJpdHMgPCAxNSkgewogICAgICAgICAgaG9sZCArPSBpbnB1dFtfaW4rK10gPDwgYml0czsKICAgICAgICAgIGJpdHMgKz0gODsKICAgICAgICAgIGhvbGQgKz0gaW5wdXRbX2luKytdIDw8IGJpdHM7CiAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgfQogICAgICAgIGhlcmUgPSBsY29kZVtob2xkICYgbG1hc2tdOwogICAgICAgIGRvbGVuOgogICAgICAgICAgZm9yICg7IDsgKSB7CiAgICAgICAgICAgIG9wID0gaGVyZSA+Pj4gMjQ7CiAgICAgICAgICAgIGhvbGQgPj4+PSBvcDsKICAgICAgICAgICAgYml0cyAtPSBvcDsKICAgICAgICAgICAgb3AgPSBoZXJlID4+PiAxNiAmIDI1NTsKICAgICAgICAgICAgaWYgKG9wID09PSAwKSB7CiAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBoZXJlICYgNjU1MzU7CiAgICAgICAgICAgIH0gZWxzZSBpZiAob3AgJiAxNikgewogICAgICAgICAgICAgIGxlbjIgPSBoZXJlICYgNjU1MzU7CiAgICAgICAgICAgICAgb3AgJj0gMTU7CiAgICAgICAgICAgICAgaWYgKG9wKSB7CiAgICAgICAgICAgICAgICBpZiAoYml0cyA8IG9wKSB7CiAgICAgICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbX2luKytdIDw8IGJpdHM7CiAgICAgICAgICAgICAgICAgIGJpdHMgKz0gODsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGxlbjIgKz0gaG9sZCAmICgxIDw8IG9wKSAtIDE7CiAgICAgICAgICAgICAgICBob2xkID4+Pj0gb3A7CiAgICAgICAgICAgICAgICBiaXRzIC09IG9wOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoYml0cyA8IDE1KSB7CiAgICAgICAgICAgICAgICBob2xkICs9IGlucHV0W19pbisrXSA8PCBiaXRzOwogICAgICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtfaW4rK10gPDwgYml0czsKICAgICAgICAgICAgICAgIGJpdHMgKz0gODsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaGVyZSA9IGRjb2RlW2hvbGQgJiBkbWFza107CiAgICAgICAgICAgICAgZG9kaXN0OgogICAgICAgICAgICAgICAgZm9yICg7IDsgKSB7CiAgICAgICAgICAgICAgICAgIG9wID0gaGVyZSA+Pj4gMjQ7CiAgICAgICAgICAgICAgICAgIGhvbGQgPj4+PSBvcDsKICAgICAgICAgICAgICAgICAgYml0cyAtPSBvcDsKICAgICAgICAgICAgICAgICAgb3AgPSBoZXJlID4+PiAxNiAmIDI1NTsKICAgICAgICAgICAgICAgICAgaWYgKG9wICYgMTYpIHsKICAgICAgICAgICAgICAgICAgICBkaXN0MiA9IGhlcmUgJiA2NTUzNTsKICAgICAgICAgICAgICAgICAgICBvcCAmPSAxNTsKICAgICAgICAgICAgICAgICAgICBpZiAoYml0cyA8IG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICBob2xkICs9IGlucHV0W19pbisrXSA8PCBiaXRzOwogICAgICAgICAgICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgICAgICAgICAgICAgaWYgKGJpdHMgPCBvcCkgewogICAgICAgICAgICAgICAgICAgICAgICBob2xkICs9IGlucHV0W19pbisrXSA8PCBiaXRzOwogICAgICAgICAgICAgICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGRpc3QyICs9IGhvbGQgJiAoMSA8PCBvcCkgLSAxOwogICAgICAgICAgICAgICAgICAgIGlmIChkaXN0MiA+IGRtYXgpIHsKICAgICAgICAgICAgICAgICAgICAgIHN0cm0ubXNnID0gImludmFsaWQgZGlzdGFuY2UgdG9vIGZhciBiYWNrIjsKICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQkMTsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIHRvcDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaG9sZCA+Pj49IG9wOwogICAgICAgICAgICAgICAgICAgIGJpdHMgLT0gb3A7CiAgICAgICAgICAgICAgICAgICAgb3AgPSBfb3V0IC0gYmVnOwogICAgICAgICAgICAgICAgICAgIGlmIChkaXN0MiA+IG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICBvcCA9IGRpc3QyIC0gb3A7CiAgICAgICAgICAgICAgICAgICAgICBpZiAob3AgPiB3aGF2ZSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuc2FuZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm0ubXNnID0gImludmFsaWQgZGlzdGFuY2UgdG9vIGZhciBiYWNrIjsKICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEJDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgdG9wOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICBmcm9tMiA9IDA7CiAgICAgICAgICAgICAgICAgICAgICBmcm9tX3NvdXJjZSA9IHNfd2luZG93OwogICAgICAgICAgICAgICAgICAgICAgaWYgKHduZXh0ID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZyb20yICs9IHdzaXplIC0gb3A7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcCA8IGxlbjIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBsZW4yIC09IG9wOwogICAgICAgICAgICAgICAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gc193aW5kb3dbZnJvbTIrK107CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSB3aGlsZSAoLS1vcCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbTIgPSBfb3V0IC0gZGlzdDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbV9zb3VyY2UgPSBvdXRwdXQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAod25leHQgPCBvcCkgewogICAgICAgICAgICAgICAgICAgICAgICBmcm9tMiArPSB3c2l6ZSArIHduZXh0IC0gb3A7CiAgICAgICAgICAgICAgICAgICAgICAgIG9wIC09IHduZXh0OwogICAgICAgICAgICAgICAgICAgICAgICBpZiAob3AgPCBsZW4yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgbGVuMiAtPSBvcDsKICAgICAgICAgICAgICAgICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IHNfd2luZG93W2Zyb20yKytdOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0gd2hpbGUgKC0tb3ApOwogICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20yID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAod25leHQgPCBsZW4yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcCA9IHduZXh0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVuMiAtPSBvcDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBzX3dpbmRvd1tmcm9tMisrXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gd2hpbGUgKC0tb3ApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbTIgPSBfb3V0IC0gZGlzdDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tX3NvdXJjZSA9IG91dHB1dDsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZyb20yICs9IHduZXh0IC0gb3A7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcCA8IGxlbjIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBsZW4yIC09IG9wOwogICAgICAgICAgICAgICAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gc193aW5kb3dbZnJvbTIrK107CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSB3aGlsZSAoLS1vcCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbTIgPSBfb3V0IC0gZGlzdDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbV9zb3VyY2UgPSBvdXRwdXQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChsZW4yID4gMikgewogICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IGZyb21fc291cmNlW2Zyb20yKytdOwogICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IGZyb21fc291cmNlW2Zyb20yKytdOwogICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IGZyb21fc291cmNlW2Zyb20yKytdOwogICAgICAgICAgICAgICAgICAgICAgICBsZW4yIC09IDM7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICBpZiAobGVuMikgewogICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IGZyb21fc291cmNlW2Zyb20yKytdOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAobGVuMiA+IDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IGZyb21fc291cmNlW2Zyb20yKytdOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIGZyb20yID0gX291dCAtIGRpc3QyOwogICAgICAgICAgICAgICAgICAgICAgZG8gewogICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IG91dHB1dFtmcm9tMisrXTsKICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBvdXRwdXRbZnJvbTIrK107CiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gb3V0cHV0W2Zyb20yKytdOwogICAgICAgICAgICAgICAgICAgICAgICBsZW4yIC09IDM7CiAgICAgICAgICAgICAgICAgICAgICB9IHdoaWxlIChsZW4yID4gMik7CiAgICAgICAgICAgICAgICAgICAgICBpZiAobGVuMikgewogICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IG91dHB1dFtmcm9tMisrXTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxlbjIgPiAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBvdXRwdXRbZnJvbTIrK107CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoKG9wICYgNjQpID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgaGVyZSA9IGRjb2RlWyhoZXJlICYgNjU1MzUpICsgKGhvbGQgJiAoMSA8PCBvcCkgLSAxKV07CiAgICAgICAgICAgICAgICAgICAgY29udGludWUgZG9kaXN0OwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHN0cm0ubXNnID0gImludmFsaWQgZGlzdGFuY2UgY29kZSI7CiAgICAgICAgICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRCQxOwogICAgICAgICAgICAgICAgICAgIGJyZWFrIHRvcDsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIGlmICgob3AgJiA2NCkgPT09IDApIHsKICAgICAgICAgICAgICBoZXJlID0gbGNvZGVbKGhlcmUgJiA2NTUzNSkgKyAoaG9sZCAmICgxIDw8IG9wKSAtIDEpXTsKICAgICAgICAgICAgICBjb250aW51ZSBkb2xlbjsKICAgICAgICAgICAgfSBlbHNlIGlmIChvcCAmIDMyKSB7CiAgICAgICAgICAgICAgc3RhdGUubW9kZSA9IFRZUEUkMTsKICAgICAgICAgICAgICBicmVhayB0b3A7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgc3RybS5tc2cgPSAiaW52YWxpZCBsaXRlcmFsL2xlbmd0aCBjb2RlIjsKICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEJDE7CiAgICAgICAgICAgICAgYnJlYWsgdG9wOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICB9IHdoaWxlIChfaW4gPCBsYXN0MiAmJiBfb3V0IDwgZW5kKTsKICAgIGxlbjIgPSBiaXRzID4+IDM7CiAgICBfaW4gLT0gbGVuMjsKICAgIGJpdHMgLT0gbGVuMiA8PCAzOwogICAgaG9sZCAmPSAoMSA8PCBiaXRzKSAtIDE7CiAgICBzdHJtLm5leHRfaW4gPSBfaW47CiAgICBzdHJtLm5leHRfb3V0ID0gX291dDsKICAgIHN0cm0uYXZhaWxfaW4gPSBfaW4gPCBsYXN0MiA/IDUgKyAobGFzdDIgLSBfaW4pIDogNSAtIChfaW4gLSBsYXN0Mik7CiAgICBzdHJtLmF2YWlsX291dCA9IF9vdXQgPCBlbmQgPyAyNTcgKyAoZW5kIC0gX291dCkgOiAyNTcgLSAoX291dCAtIGVuZCk7CiAgICBzdGF0ZS5ob2xkID0gaG9sZDsKICAgIHN0YXRlLmJpdHMgPSBiaXRzOwogICAgcmV0dXJuOwogIH07CiAgdmFyIHV0aWxzJDIgPSBjb21tb247CiAgdmFyIE1BWEJJVFMgPSAxNTsKICB2YXIgRU5PVUdIX0xFTlMkMSA9IDg1MjsKICB2YXIgRU5PVUdIX0RJU1RTJDEgPSA1OTI7CiAgdmFyIENPREVTJDEgPSAwOwogIHZhciBMRU5TJDEgPSAxOwogIHZhciBESVNUUyQxID0gMjsKICB2YXIgbGJhc2UgPSBbCiAgICAzLAogICAgNCwKICAgIDUsCiAgICA2LAogICAgNywKICAgIDgsCiAgICA5LAogICAgMTAsCiAgICAxMSwKICAgIDEzLAogICAgMTUsCiAgICAxNywKICAgIDE5LAogICAgMjMsCiAgICAyNywKICAgIDMxLAogICAgMzUsCiAgICA0MywKICAgIDUxLAogICAgNTksCiAgICA2NywKICAgIDgzLAogICAgOTksCiAgICAxMTUsCiAgICAxMzEsCiAgICAxNjMsCiAgICAxOTUsCiAgICAyMjcsCiAgICAyNTgsCiAgICAwLAogICAgMAogIF07CiAgdmFyIGxleHQgPSBbCiAgICAxNiwKICAgIDE2LAogICAgMTYsCiAgICAxNiwKICAgIDE2LAogICAgMTYsCiAgICAxNiwKICAgIDE2LAogICAgMTcsCiAgICAxNywKICAgIDE3LAogICAgMTcsCiAgICAxOCwKICAgIDE4LAogICAgMTgsCiAgICAxOCwKICAgIDE5LAogICAgMTksCiAgICAxOSwKICAgIDE5LAogICAgMjAsCiAgICAyMCwKICAgIDIwLAogICAgMjAsCiAgICAyMSwKICAgIDIxLAogICAgMjEsCiAgICAyMSwKICAgIDE2LAogICAgNzIsCiAgICA3OAogIF07CiAgdmFyIGRiYXNlID0gWwogICAgMSwKICAgIDIsCiAgICAzLAogICAgNCwKICAgIDUsCiAgICA3LAogICAgOSwKICAgIDEzLAogICAgMTcsCiAgICAyNSwKICAgIDMzLAogICAgNDksCiAgICA2NSwKICAgIDk3LAogICAgMTI5LAogICAgMTkzLAogICAgMjU3LAogICAgMzg1LAogICAgNTEzLAogICAgNzY5LAogICAgMTAyNSwKICAgIDE1MzcsCiAgICAyMDQ5LAogICAgMzA3MywKICAgIDQwOTcsCiAgICA2MTQ1LAogICAgODE5MywKICAgIDEyMjg5LAogICAgMTYzODUsCiAgICAyNDU3NywKICAgIDAsCiAgICAwCiAgXTsKICB2YXIgZGV4dCA9IFsKICAgIDE2LAogICAgMTYsCiAgICAxNiwKICAgIDE2LAogICAgMTcsCiAgICAxNywKICAgIDE4LAogICAgMTgsCiAgICAxOSwKICAgIDE5LAogICAgMjAsCiAgICAyMCwKICAgIDIxLAogICAgMjEsCiAgICAyMiwKICAgIDIyLAogICAgMjMsCiAgICAyMywKICAgIDI0LAogICAgMjQsCiAgICAyNSwKICAgIDI1LAogICAgMjYsCiAgICAyNiwKICAgIDI3LAogICAgMjcsCiAgICAyOCwKICAgIDI4LAogICAgMjksCiAgICAyOSwKICAgIDY0LAogICAgNjQKICBdOwogIHZhciBpbmZ0cmVlcyA9IGZ1bmN0aW9uIGluZmxhdGVfdGFibGUyKHR5cGUsIGxlbnMsIGxlbnNfaW5kZXgsIGNvZGVzLCB0YWJsZSwgdGFibGVfaW5kZXgsIHdvcmssIG9wdHMpIHsKICAgIHZhciBiaXRzID0gb3B0cy5iaXRzOwogICAgdmFyIGxlbjIgPSAwOwogICAgdmFyIHN5bSA9IDA7CiAgICB2YXIgbWluMiA9IDAsIG1heDIgPSAwOwogICAgdmFyIHJvb3QgPSAwOwogICAgdmFyIGN1cnIgPSAwOwogICAgdmFyIGRyb3AgPSAwOwogICAgdmFyIGxlZnQgPSAwOwogICAgdmFyIHVzZWQgPSAwOwogICAgdmFyIGh1ZmYgPSAwOwogICAgdmFyIGluY3I7CiAgICB2YXIgZmlsbDsKICAgIHZhciBsb3c7CiAgICB2YXIgbWFzazsKICAgIHZhciBuZXh0OwogICAgdmFyIGJhc2UgPSBudWxsOwogICAgdmFyIGJhc2VfaW5kZXggPSAwOwogICAgdmFyIGVuZDsKICAgIHZhciBjb3VudCA9IG5ldyB1dGlscyQyLkJ1ZjE2KE1BWEJJVFMgKyAxKTsKICAgIHZhciBvZmZzID0gbmV3IHV0aWxzJDIuQnVmMTYoTUFYQklUUyArIDEpOwogICAgdmFyIGV4dHJhID0gbnVsbDsKICAgIHZhciBleHRyYV9pbmRleCA9IDA7CiAgICB2YXIgaGVyZV9iaXRzLCBoZXJlX29wLCBoZXJlX3ZhbDsKICAgIGZvciAobGVuMiA9IDA7IGxlbjIgPD0gTUFYQklUUzsgbGVuMisrKSB7CiAgICAgIGNvdW50W2xlbjJdID0gMDsKICAgIH0KICAgIGZvciAoc3ltID0gMDsgc3ltIDwgY29kZXM7IHN5bSsrKSB7CiAgICAgIGNvdW50W2xlbnNbbGVuc19pbmRleCArIHN5bV1dKys7CiAgICB9CiAgICByb290ID0gYml0czsKICAgIGZvciAobWF4MiA9IE1BWEJJVFM7IG1heDIgPj0gMTsgbWF4Mi0tKSB7CiAgICAgIGlmIChjb3VudFttYXgyXSAhPT0gMCkgewogICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CiAgICBpZiAocm9vdCA+IG1heDIpIHsKICAgICAgcm9vdCA9IG1heDI7CiAgICB9CiAgICBpZiAobWF4MiA9PT0gMCkgewogICAgICB0YWJsZVt0YWJsZV9pbmRleCsrXSA9IDEgPDwgMjQgfCA2NCA8PCAxNiB8IDA7CiAgICAgIHRhYmxlW3RhYmxlX2luZGV4KytdID0gMSA8PCAyNCB8IDY0IDw8IDE2IHwgMDsKICAgICAgb3B0cy5iaXRzID0gMTsKICAgICAgcmV0dXJuIDA7CiAgICB9CiAgICBmb3IgKG1pbjIgPSAxOyBtaW4yIDwgbWF4MjsgbWluMisrKSB7CiAgICAgIGlmIChjb3VudFttaW4yXSAhPT0gMCkgewogICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CiAgICBpZiAocm9vdCA8IG1pbjIpIHsKICAgICAgcm9vdCA9IG1pbjI7CiAgICB9CiAgICBsZWZ0ID0gMTsKICAgIGZvciAobGVuMiA9IDE7IGxlbjIgPD0gTUFYQklUUzsgbGVuMisrKSB7CiAgICAgIGxlZnQgPDw9IDE7CiAgICAgIGxlZnQgLT0gY291bnRbbGVuMl07CiAgICAgIGlmIChsZWZ0IDwgMCkgewogICAgICAgIHJldHVybiAtMTsKICAgICAgfQogICAgfQogICAgaWYgKGxlZnQgPiAwICYmICh0eXBlID09PSBDT0RFUyQxIHx8IG1heDIgIT09IDEpKSB7CiAgICAgIHJldHVybiAtMTsKICAgIH0KICAgIG9mZnNbMV0gPSAwOwogICAgZm9yIChsZW4yID0gMTsgbGVuMiA8IE1BWEJJVFM7IGxlbjIrKykgewogICAgICBvZmZzW2xlbjIgKyAxXSA9IG9mZnNbbGVuMl0gKyBjb3VudFtsZW4yXTsKICAgIH0KICAgIGZvciAoc3ltID0gMDsgc3ltIDwgY29kZXM7IHN5bSsrKSB7CiAgICAgIGlmIChsZW5zW2xlbnNfaW5kZXggKyBzeW1dICE9PSAwKSB7CiAgICAgICAgd29ya1tvZmZzW2xlbnNbbGVuc19pbmRleCArIHN5bV1dKytdID0gc3ltOwogICAgICB9CiAgICB9CiAgICBpZiAodHlwZSA9PT0gQ09ERVMkMSkgewogICAgICBiYXNlID0gZXh0cmEgPSB3b3JrOwogICAgICBlbmQgPSAxOTsKICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gTEVOUyQxKSB7CiAgICAgIGJhc2UgPSBsYmFzZTsKICAgICAgYmFzZV9pbmRleCAtPSAyNTc7CiAgICAgIGV4dHJhID0gbGV4dDsKICAgICAgZXh0cmFfaW5kZXggLT0gMjU3OwogICAgICBlbmQgPSAyNTY7CiAgICB9IGVsc2UgewogICAgICBiYXNlID0gZGJhc2U7CiAgICAgIGV4dHJhID0gZGV4dDsKICAgICAgZW5kID0gLTE7CiAgICB9CiAgICBodWZmID0gMDsKICAgIHN5bSA9IDA7CiAgICBsZW4yID0gbWluMjsKICAgIG5leHQgPSB0YWJsZV9pbmRleDsKICAgIGN1cnIgPSByb290OwogICAgZHJvcCA9IDA7CiAgICBsb3cgPSAtMTsKICAgIHVzZWQgPSAxIDw8IHJvb3Q7CiAgICBtYXNrID0gdXNlZCAtIDE7CiAgICBpZiAodHlwZSA9PT0gTEVOUyQxICYmIHVzZWQgPiBFTk9VR0hfTEVOUyQxIHx8IHR5cGUgPT09IERJU1RTJDEgJiYgdXNlZCA+IEVOT1VHSF9ESVNUUyQxKSB7CiAgICAgIHJldHVybiAxOwogICAgfQogICAgZm9yICg7IDsgKSB7CiAgICAgIGhlcmVfYml0cyA9IGxlbjIgLSBkcm9wOwogICAgICBpZiAod29ya1tzeW1dIDwgZW5kKSB7CiAgICAgICAgaGVyZV9vcCA9IDA7CiAgICAgICAgaGVyZV92YWwgPSB3b3JrW3N5bV07CiAgICAgIH0gZWxzZSBpZiAod29ya1tzeW1dID4gZW5kKSB7CiAgICAgICAgaGVyZV9vcCA9IGV4dHJhW2V4dHJhX2luZGV4ICsgd29ya1tzeW1dXTsKICAgICAgICBoZXJlX3ZhbCA9IGJhc2VbYmFzZV9pbmRleCArIHdvcmtbc3ltXV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaGVyZV9vcCA9IDMyICsgNjQ7CiAgICAgICAgaGVyZV92YWwgPSAwOwogICAgICB9CiAgICAgIGluY3IgPSAxIDw8IGxlbjIgLSBkcm9wOwogICAgICBmaWxsID0gMSA8PCBjdXJyOwogICAgICBtaW4yID0gZmlsbDsKICAgICAgZG8gewogICAgICAgIGZpbGwgLT0gaW5jcjsKICAgICAgICB0YWJsZVtuZXh0ICsgKGh1ZmYgPj4gZHJvcCkgKyBmaWxsXSA9IGhlcmVfYml0cyA8PCAyNCB8IGhlcmVfb3AgPDwgMTYgfCBoZXJlX3ZhbCB8IDA7CiAgICAgIH0gd2hpbGUgKGZpbGwgIT09IDApOwogICAgICBpbmNyID0gMSA8PCBsZW4yIC0gMTsKICAgICAgd2hpbGUgKGh1ZmYgJiBpbmNyKSB7CiAgICAgICAgaW5jciA+Pj0gMTsKICAgICAgfQogICAgICBpZiAoaW5jciAhPT0gMCkgewogICAgICAgIGh1ZmYgJj0gaW5jciAtIDE7CiAgICAgICAgaHVmZiArPSBpbmNyOwogICAgICB9IGVsc2UgewogICAgICAgIGh1ZmYgPSAwOwogICAgICB9CiAgICAgIHN5bSsrOwogICAgICBpZiAoLS1jb3VudFtsZW4yXSA9PT0gMCkgewogICAgICAgIGlmIChsZW4yID09PSBtYXgyKSB7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgbGVuMiA9IGxlbnNbbGVuc19pbmRleCArIHdvcmtbc3ltXV07CiAgICAgIH0KICAgICAgaWYgKGxlbjIgPiByb290ICYmIChodWZmICYgbWFzaykgIT09IGxvdykgewogICAgICAgIGlmIChkcm9wID09PSAwKSB7CiAgICAgICAgICBkcm9wID0gcm9vdDsKICAgICAgICB9CiAgICAgICAgbmV4dCArPSBtaW4yOwogICAgICAgIGN1cnIgPSBsZW4yIC0gZHJvcDsKICAgICAgICBsZWZ0ID0gMSA8PCBjdXJyOwogICAgICAgIHdoaWxlIChjdXJyICsgZHJvcCA8IG1heDIpIHsKICAgICAgICAgIGxlZnQgLT0gY291bnRbY3VyciArIGRyb3BdOwogICAgICAgICAgaWYgKGxlZnQgPD0gMCkgewogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIGN1cnIrKzsKICAgICAgICAgIGxlZnQgPDw9IDE7CiAgICAgICAgfQogICAgICAgIHVzZWQgKz0gMSA8PCBjdXJyOwogICAgICAgIGlmICh0eXBlID09PSBMRU5TJDEgJiYgdXNlZCA+IEVOT1VHSF9MRU5TJDEgfHwgdHlwZSA9PT0gRElTVFMkMSAmJiB1c2VkID4gRU5PVUdIX0RJU1RTJDEpIHsKICAgICAgICAgIHJldHVybiAxOwogICAgICAgIH0KICAgICAgICBsb3cgPSBodWZmICYgbWFzazsKICAgICAgICB0YWJsZVtsb3ddID0gcm9vdCA8PCAyNCB8IGN1cnIgPDwgMTYgfCBuZXh0IC0gdGFibGVfaW5kZXggfCAwOwogICAgICB9CiAgICB9CiAgICBpZiAoaHVmZiAhPT0gMCkgewogICAgICB0YWJsZVtuZXh0ICsgaHVmZl0gPSBsZW4yIC0gZHJvcCA8PCAyNCB8IDY0IDw8IDE2IHwgMDsKICAgIH0KICAgIG9wdHMuYml0cyA9IHJvb3Q7CiAgICByZXR1cm4gMDsKICB9OwogIHZhciB1dGlscyQxID0gY29tbW9uOwogIHZhciBhZGxlcjMyID0gYWRsZXIzMl8xOwogIHZhciBjcmMzMiQxID0gY3JjMzJfMTsKICB2YXIgaW5mbGF0ZV9mYXN0ID0gaW5mZmFzdDsKICB2YXIgaW5mbGF0ZV90YWJsZSA9IGluZnRyZWVzOwogIHZhciBDT0RFUyA9IDA7CiAgdmFyIExFTlMgPSAxOwogIHZhciBESVNUUyA9IDI7CiAgdmFyIFpfRklOSVNIID0gNDsKICB2YXIgWl9CTE9DSyA9IDU7CiAgdmFyIFpfVFJFRVMgPSA2OwogIHZhciBaX09LID0gMDsKICB2YXIgWl9TVFJFQU1fRU5EID0gMTsKICB2YXIgWl9ORUVEX0RJQ1QgPSAyOwogIHZhciBaX1NUUkVBTV9FUlJPUiA9IC0yOwogIHZhciBaX0RBVEFfRVJST1IgPSAtMzsKICB2YXIgWl9NRU1fRVJST1IgPSAtNDsKICB2YXIgWl9CVUZfRVJST1IgPSAtNTsKICB2YXIgWl9ERUZMQVRFRCA9IDg7CiAgdmFyIEhFQUQgPSAxOwogIHZhciBGTEFHUyA9IDI7CiAgdmFyIFRJTUUgPSAzOwogIHZhciBPUyA9IDQ7CiAgdmFyIEVYTEVOID0gNTsKICB2YXIgRVhUUkEgPSA2OwogIHZhciBOQU1FID0gNzsKICB2YXIgQ09NTUVOVCA9IDg7CiAgdmFyIEhDUkMgPSA5OwogIHZhciBESUNUSUQgPSAxMDsKICB2YXIgRElDVCA9IDExOwogIHZhciBUWVBFID0gMTI7CiAgdmFyIFRZUEVETyA9IDEzOwogIHZhciBTVE9SRUQgPSAxNDsKICB2YXIgQ09QWV8gPSAxNTsKICB2YXIgQ09QWSA9IDE2OwogIHZhciBUQUJMRSA9IDE3OwogIHZhciBMRU5MRU5TID0gMTg7CiAgdmFyIENPREVMRU5TID0gMTk7CiAgdmFyIExFTl8gPSAyMDsKICB2YXIgTEVOID0gMjE7CiAgdmFyIExFTkVYVCA9IDIyOwogIHZhciBESVNUID0gMjM7CiAgdmFyIERJU1RFWFQgPSAyNDsKICB2YXIgTUFUQ0gkMiA9IDI1OwogIHZhciBMSVQgPSAyNjsKICB2YXIgQ0hFQ0sgPSAyNzsKICB2YXIgTEVOR1RIID0gMjg7CiAgdmFyIERPTkUgPSAyOTsKICB2YXIgQkFEID0gMzA7CiAgdmFyIE1FTSA9IDMxOwogIHZhciBTWU5DID0gMzI7CiAgdmFyIEVOT1VHSF9MRU5TID0gODUyOwogIHZhciBFTk9VR0hfRElTVFMgPSA1OTI7CiAgdmFyIE1BWF9XQklUUyA9IDE1OwogIHZhciBERUZfV0JJVFMgPSBNQVhfV0JJVFM7CiAgZnVuY3Rpb24genN3YXAzMihxMikgewogICAgcmV0dXJuIChxMiA+Pj4gMjQgJiAyNTUpICsgKHEyID4+PiA4ICYgNjUyODApICsgKChxMiAmIDY1MjgwKSA8PCA4KSArICgocTIgJiAyNTUpIDw8IDI0KTsKICB9CiAgZnVuY3Rpb24gSW5mbGF0ZVN0YXRlKCkgewogICAgdGhpcy5tb2RlID0gMDsKICAgIHRoaXMubGFzdCA9IGZhbHNlOwogICAgdGhpcy53cmFwID0gMDsKICAgIHRoaXMuaGF2ZWRpY3QgPSBmYWxzZTsKICAgIHRoaXMuZmxhZ3MgPSAwOwogICAgdGhpcy5kbWF4ID0gMDsKICAgIHRoaXMuY2hlY2sgPSAwOwogICAgdGhpcy50b3RhbCA9IDA7CiAgICB0aGlzLmhlYWQgPSBudWxsOwogICAgdGhpcy53Yml0cyA9IDA7CiAgICB0aGlzLndzaXplID0gMDsKICAgIHRoaXMud2hhdmUgPSAwOwogICAgdGhpcy53bmV4dCA9IDA7CiAgICB0aGlzLndpbmRvdyA9IG51bGw7CiAgICB0aGlzLmhvbGQgPSAwOwogICAgdGhpcy5iaXRzID0gMDsKICAgIHRoaXMubGVuZ3RoID0gMDsKICAgIHRoaXMub2Zmc2V0ID0gMDsKICAgIHRoaXMuZXh0cmEgPSAwOwogICAgdGhpcy5sZW5jb2RlID0gbnVsbDsKICAgIHRoaXMuZGlzdGNvZGUgPSBudWxsOwogICAgdGhpcy5sZW5iaXRzID0gMDsKICAgIHRoaXMuZGlzdGJpdHMgPSAwOwogICAgdGhpcy5uY29kZSA9IDA7CiAgICB0aGlzLm5sZW4gPSAwOwogICAgdGhpcy5uZGlzdCA9IDA7CiAgICB0aGlzLmhhdmUgPSAwOwogICAgdGhpcy5uZXh0ID0gbnVsbDsKICAgIHRoaXMubGVucyA9IG5ldyB1dGlscyQxLkJ1ZjE2KDMyMCk7CiAgICB0aGlzLndvcmsgPSBuZXcgdXRpbHMkMS5CdWYxNigyODgpOwogICAgdGhpcy5sZW5keW4gPSBudWxsOwogICAgdGhpcy5kaXN0ZHluID0gbnVsbDsKICAgIHRoaXMuc2FuZSA9IDA7CiAgICB0aGlzLmJhY2sgPSAwOwogICAgdGhpcy53YXMgPSAwOwogIH0KICBmdW5jdGlvbiBpbmZsYXRlUmVzZXRLZWVwKHN0cm0pIHsKICAgIHZhciBzdGF0ZTsKICAgIGlmICghc3RybSB8fCAhc3RybS5zdGF0ZSkgewogICAgICByZXR1cm4gWl9TVFJFQU1fRVJST1I7CiAgICB9CiAgICBzdGF0ZSA9IHN0cm0uc3RhdGU7CiAgICBzdHJtLnRvdGFsX2luID0gc3RybS50b3RhbF9vdXQgPSBzdGF0ZS50b3RhbCA9IDA7CiAgICBzdHJtLm1zZyA9ICIiOwogICAgaWYgKHN0YXRlLndyYXApIHsKICAgICAgc3RybS5hZGxlciA9IHN0YXRlLndyYXAgJiAxOwogICAgfQogICAgc3RhdGUubW9kZSA9IEhFQUQ7CiAgICBzdGF0ZS5sYXN0ID0gMDsKICAgIHN0YXRlLmhhdmVkaWN0ID0gMDsKICAgIHN0YXRlLmRtYXggPSAzMjc2ODsKICAgIHN0YXRlLmhlYWQgPSBudWxsOwogICAgc3RhdGUuaG9sZCA9IDA7CiAgICBzdGF0ZS5iaXRzID0gMDsKICAgIHN0YXRlLmxlbmNvZGUgPSBzdGF0ZS5sZW5keW4gPSBuZXcgdXRpbHMkMS5CdWYzMihFTk9VR0hfTEVOUyk7CiAgICBzdGF0ZS5kaXN0Y29kZSA9IHN0YXRlLmRpc3RkeW4gPSBuZXcgdXRpbHMkMS5CdWYzMihFTk9VR0hfRElTVFMpOwogICAgc3RhdGUuc2FuZSA9IDE7CiAgICBzdGF0ZS5iYWNrID0gLTE7CiAgICByZXR1cm4gWl9PSzsKICB9CiAgZnVuY3Rpb24gaW5mbGF0ZVJlc2V0KHN0cm0pIHsKICAgIHZhciBzdGF0ZTsKICAgIGlmICghc3RybSB8fCAhc3RybS5zdGF0ZSkgewogICAgICByZXR1cm4gWl9TVFJFQU1fRVJST1I7CiAgICB9CiAgICBzdGF0ZSA9IHN0cm0uc3RhdGU7CiAgICBzdGF0ZS53c2l6ZSA9IDA7CiAgICBzdGF0ZS53aGF2ZSA9IDA7CiAgICBzdGF0ZS53bmV4dCA9IDA7CiAgICByZXR1cm4gaW5mbGF0ZVJlc2V0S2VlcChzdHJtKTsKICB9CiAgZnVuY3Rpb24gaW5mbGF0ZVJlc2V0MihzdHJtLCB3aW5kb3dCaXRzKSB7CiAgICB2YXIgd3JhcDI7CiAgICB2YXIgc3RhdGU7CiAgICBpZiAoIXN0cm0gfHwgIXN0cm0uc3RhdGUpIHsKICAgICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SOwogICAgfQogICAgc3RhdGUgPSBzdHJtLnN0YXRlOwogICAgaWYgKHdpbmRvd0JpdHMgPCAwKSB7CiAgICAgIHdyYXAyID0gMDsKICAgICAgd2luZG93Qml0cyA9IC13aW5kb3dCaXRzOwogICAgfSBlbHNlIHsKICAgICAgd3JhcDIgPSAod2luZG93Qml0cyA+PiA0KSArIDE7CiAgICAgIGlmICh3aW5kb3dCaXRzIDwgNDgpIHsKICAgICAgICB3aW5kb3dCaXRzICY9IDE1OwogICAgICB9CiAgICB9CiAgICBpZiAod2luZG93Qml0cyAmJiAod2luZG93Qml0cyA8IDggfHwgd2luZG93Qml0cyA+IDE1KSkgewogICAgICByZXR1cm4gWl9TVFJFQU1fRVJST1I7CiAgICB9CiAgICBpZiAoc3RhdGUud2luZG93ICE9PSBudWxsICYmIHN0YXRlLndiaXRzICE9PSB3aW5kb3dCaXRzKSB7CiAgICAgIHN0YXRlLndpbmRvdyA9IG51bGw7CiAgICB9CiAgICBzdGF0ZS53cmFwID0gd3JhcDI7CiAgICBzdGF0ZS53Yml0cyA9IHdpbmRvd0JpdHM7CiAgICByZXR1cm4gaW5mbGF0ZVJlc2V0KHN0cm0pOwogIH0KICBmdW5jdGlvbiBpbmZsYXRlSW5pdDIoc3RybSwgd2luZG93Qml0cykgewogICAgdmFyIHJldDsKICAgIHZhciBzdGF0ZTsKICAgIGlmICghc3RybSkgewogICAgICByZXR1cm4gWl9TVFJFQU1fRVJST1I7CiAgICB9CiAgICBzdGF0ZSA9IG5ldyBJbmZsYXRlU3RhdGUoKTsKICAgIHN0cm0uc3RhdGUgPSBzdGF0ZTsKICAgIHN0YXRlLndpbmRvdyA9IG51bGw7CiAgICByZXQgPSBpbmZsYXRlUmVzZXQyKHN0cm0sIHdpbmRvd0JpdHMpOwogICAgaWYgKHJldCAhPT0gWl9PSykgewogICAgICBzdHJtLnN0YXRlID0gbnVsbDsKICAgIH0KICAgIHJldHVybiByZXQ7CiAgfQogIGZ1bmN0aW9uIGluZmxhdGVJbml0KHN0cm0pIHsKICAgIHJldHVybiBpbmZsYXRlSW5pdDIoc3RybSwgREVGX1dCSVRTKTsKICB9CiAgdmFyIHZpcmdpbiA9IHRydWU7CiAgdmFyIGxlbmZpeCwgZGlzdGZpeDsKICBmdW5jdGlvbiBmaXhlZHRhYmxlcyhzdGF0ZSkgewogICAgaWYgKHZpcmdpbikgewogICAgICB2YXIgc3ltOwogICAgICBsZW5maXggPSBuZXcgdXRpbHMkMS5CdWYzMig1MTIpOwogICAgICBkaXN0Zml4ID0gbmV3IHV0aWxzJDEuQnVmMzIoMzIpOwogICAgICBzeW0gPSAwOwogICAgICB3aGlsZSAoc3ltIDwgMTQ0KSB7CiAgICAgICAgc3RhdGUubGVuc1tzeW0rK10gPSA4OwogICAgICB9CiAgICAgIHdoaWxlIChzeW0gPCAyNTYpIHsKICAgICAgICBzdGF0ZS5sZW5zW3N5bSsrXSA9IDk7CiAgICAgIH0KICAgICAgd2hpbGUgKHN5bSA8IDI4MCkgewogICAgICAgIHN0YXRlLmxlbnNbc3ltKytdID0gNzsKICAgICAgfQogICAgICB3aGlsZSAoc3ltIDwgMjg4KSB7CiAgICAgICAgc3RhdGUubGVuc1tzeW0rK10gPSA4OwogICAgICB9CiAgICAgIGluZmxhdGVfdGFibGUoTEVOUywgc3RhdGUubGVucywgMCwgMjg4LCBsZW5maXgsIDAsIHN0YXRlLndvcmssIHsgYml0czogOSB9KTsKICAgICAgc3ltID0gMDsKICAgICAgd2hpbGUgKHN5bSA8IDMyKSB7CiAgICAgICAgc3RhdGUubGVuc1tzeW0rK10gPSA1OwogICAgICB9CiAgICAgIGluZmxhdGVfdGFibGUoRElTVFMsIHN0YXRlLmxlbnMsIDAsIDMyLCBkaXN0Zml4LCAwLCBzdGF0ZS53b3JrLCB7IGJpdHM6IDUgfSk7CiAgICAgIHZpcmdpbiA9IGZhbHNlOwogICAgfQogICAgc3RhdGUubGVuY29kZSA9IGxlbmZpeDsKICAgIHN0YXRlLmxlbmJpdHMgPSA5OwogICAgc3RhdGUuZGlzdGNvZGUgPSBkaXN0Zml4OwogICAgc3RhdGUuZGlzdGJpdHMgPSA1OwogIH0KICBmdW5jdGlvbiB1cGRhdGV3aW5kb3coc3RybSwgc3JjLCBlbmQsIGNvcHkpIHsKICAgIHZhciBkaXN0MjsKICAgIHZhciBzdGF0ZSA9IHN0cm0uc3RhdGU7CiAgICBpZiAoc3RhdGUud2luZG93ID09PSBudWxsKSB7CiAgICAgIHN0YXRlLndzaXplID0gMSA8PCBzdGF0ZS53Yml0czsKICAgICAgc3RhdGUud25leHQgPSAwOwogICAgICBzdGF0ZS53aGF2ZSA9IDA7CiAgICAgIHN0YXRlLndpbmRvdyA9IG5ldyB1dGlscyQxLkJ1Zjgoc3RhdGUud3NpemUpOwogICAgfQogICAgaWYgKGNvcHkgPj0gc3RhdGUud3NpemUpIHsKICAgICAgdXRpbHMkMS5hcnJheVNldChzdGF0ZS53aW5kb3csIHNyYywgZW5kIC0gc3RhdGUud3NpemUsIHN0YXRlLndzaXplLCAwKTsKICAgICAgc3RhdGUud25leHQgPSAwOwogICAgICBzdGF0ZS53aGF2ZSA9IHN0YXRlLndzaXplOwogICAgfSBlbHNlIHsKICAgICAgZGlzdDIgPSBzdGF0ZS53c2l6ZSAtIHN0YXRlLnduZXh0OwogICAgICBpZiAoZGlzdDIgPiBjb3B5KSB7CiAgICAgICAgZGlzdDIgPSBjb3B5OwogICAgICB9CiAgICAgIHV0aWxzJDEuYXJyYXlTZXQoc3RhdGUud2luZG93LCBzcmMsIGVuZCAtIGNvcHksIGRpc3QyLCBzdGF0ZS53bmV4dCk7CiAgICAgIGNvcHkgLT0gZGlzdDI7CiAgICAgIGlmIChjb3B5KSB7CiAgICAgICAgdXRpbHMkMS5hcnJheVNldChzdGF0ZS53aW5kb3csIHNyYywgZW5kIC0gY29weSwgY29weSwgMCk7CiAgICAgICAgc3RhdGUud25leHQgPSBjb3B5OwogICAgICAgIHN0YXRlLndoYXZlID0gc3RhdGUud3NpemU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc3RhdGUud25leHQgKz0gZGlzdDI7CiAgICAgICAgaWYgKHN0YXRlLnduZXh0ID09PSBzdGF0ZS53c2l6ZSkgewogICAgICAgICAgc3RhdGUud25leHQgPSAwOwogICAgICAgIH0KICAgICAgICBpZiAoc3RhdGUud2hhdmUgPCBzdGF0ZS53c2l6ZSkgewogICAgICAgICAgc3RhdGUud2hhdmUgKz0gZGlzdDI7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICByZXR1cm4gMDsKICB9CiAgZnVuY3Rpb24gaW5mbGF0ZSQyKHN0cm0sIGZsdXNoMikgewogICAgdmFyIHN0YXRlOwogICAgdmFyIGlucHV0LCBvdXRwdXQ7CiAgICB2YXIgbmV4dDsKICAgIHZhciBwdXQ7CiAgICB2YXIgaGF2ZSwgbGVmdDsKICAgIHZhciBob2xkOwogICAgdmFyIGJpdHM7CiAgICB2YXIgX2luLCBfb3V0OwogICAgdmFyIGNvcHk7CiAgICB2YXIgZnJvbTI7CiAgICB2YXIgZnJvbV9zb3VyY2U7CiAgICB2YXIgaGVyZSA9IDA7CiAgICB2YXIgaGVyZV9iaXRzLCBoZXJlX29wLCBoZXJlX3ZhbDsKICAgIHZhciBsYXN0X2JpdHMsIGxhc3Rfb3AsIGxhc3RfdmFsOwogICAgdmFyIGxlbjI7CiAgICB2YXIgcmV0OwogICAgdmFyIGhidWYgPSBuZXcgdXRpbHMkMS5CdWY4KDQpOwogICAgdmFyIG9wdHM7CiAgICB2YXIgbjsKICAgIHZhciBvcmRlciA9IFsxNiwgMTcsIDE4LCAwLCA4LCA3LCA5LCA2LCAxMCwgNSwgMTEsIDQsIDEyLCAzLCAxMywgMiwgMTQsIDEsIDE1XTsKICAgIGlmICghc3RybSB8fCAhc3RybS5zdGF0ZSB8fCAhc3RybS5vdXRwdXQgfHwgIXN0cm0uaW5wdXQgJiYgc3RybS5hdmFpbF9pbiAhPT0gMCkgewogICAgICByZXR1cm4gWl9TVFJFQU1fRVJST1I7CiAgICB9CiAgICBzdGF0ZSA9IHN0cm0uc3RhdGU7CiAgICBpZiAoc3RhdGUubW9kZSA9PT0gVFlQRSkgewogICAgICBzdGF0ZS5tb2RlID0gVFlQRURPOwogICAgfQogICAgcHV0ID0gc3RybS5uZXh0X291dDsKICAgIG91dHB1dCA9IHN0cm0ub3V0cHV0OwogICAgbGVmdCA9IHN0cm0uYXZhaWxfb3V0OwogICAgbmV4dCA9IHN0cm0ubmV4dF9pbjsKICAgIGlucHV0ID0gc3RybS5pbnB1dDsKICAgIGhhdmUgPSBzdHJtLmF2YWlsX2luOwogICAgaG9sZCA9IHN0YXRlLmhvbGQ7CiAgICBiaXRzID0gc3RhdGUuYml0czsKICAgIF9pbiA9IGhhdmU7CiAgICBfb3V0ID0gbGVmdDsKICAgIHJldCA9IFpfT0s7CiAgICBpbmZfbGVhdmU6CiAgICAgIGZvciAoOyA7ICkgewogICAgICAgIHN3aXRjaCAoc3RhdGUubW9kZSkgewogICAgICAgICAgY2FzZSBIRUFEOgogICAgICAgICAgICBpZiAoc3RhdGUud3JhcCA9PT0gMCkgewogICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBUWVBFRE87CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgd2hpbGUgKGJpdHMgPCAxNikgewogICAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7CiAgICAgICAgICAgICAgICBicmVhayBpbmZfbGVhdmU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGhhdmUtLTsKICAgICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0czsKICAgICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHN0YXRlLndyYXAgJiAyICYmIGhvbGQgPT09IDM1NjE1KSB7CiAgICAgICAgICAgICAgc3RhdGUuY2hlY2sgPSAwOwogICAgICAgICAgICAgIGhidWZbMF0gPSBob2xkICYgMjU1OwogICAgICAgICAgICAgIGhidWZbMV0gPSBob2xkID4+PiA4ICYgMjU1OwogICAgICAgICAgICAgIHN0YXRlLmNoZWNrID0gY3JjMzIkMShzdGF0ZS5jaGVjaywgaGJ1ZiwgMiwgMCk7CiAgICAgICAgICAgICAgaG9sZCA9IDA7CiAgICAgICAgICAgICAgYml0cyA9IDA7CiAgICAgICAgICAgICAgc3RhdGUubW9kZSA9IEZMQUdTOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHN0YXRlLmZsYWdzID0gMDsKICAgICAgICAgICAgaWYgKHN0YXRlLmhlYWQpIHsKICAgICAgICAgICAgICBzdGF0ZS5oZWFkLmRvbmUgPSBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIShzdGF0ZS53cmFwICYgMSkgfHwgKCgoaG9sZCAmIDI1NSkgPDwgOCkgKyAoaG9sZCA+PiA4KSkgJSAzMSkgewogICAgICAgICAgICAgIHN0cm0ubXNnID0gImluY29ycmVjdCBoZWFkZXIgY2hlY2siOwogICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKChob2xkICYgMTUpICE9PSBaX0RFRkxBVEVEKSB7CiAgICAgICAgICAgICAgc3RybS5tc2cgPSAidW5rbm93biBjb21wcmVzc2lvbiBtZXRob2QiOwogICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaG9sZCA+Pj49IDQ7CiAgICAgICAgICAgIGJpdHMgLT0gNDsKICAgICAgICAgICAgbGVuMiA9IChob2xkICYgMTUpICsgODsKICAgICAgICAgICAgaWYgKHN0YXRlLndiaXRzID09PSAwKSB7CiAgICAgICAgICAgICAgc3RhdGUud2JpdHMgPSBsZW4yOwogICAgICAgICAgICB9IGVsc2UgaWYgKGxlbjIgPiBzdGF0ZS53Yml0cykgewogICAgICAgICAgICAgIHN0cm0ubXNnID0gImludmFsaWQgd2luZG93IHNpemUiOwogICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc3RhdGUuZG1heCA9IDEgPDwgbGVuMjsKICAgICAgICAgICAgc3RybS5hZGxlciA9IHN0YXRlLmNoZWNrID0gMTsKICAgICAgICAgICAgc3RhdGUubW9kZSA9IGhvbGQgJiA1MTIgPyBESUNUSUQgOiBUWVBFOwogICAgICAgICAgICBob2xkID0gMDsKICAgICAgICAgICAgYml0cyA9IDA7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSBGTEFHUzoKICAgICAgICAgICAgd2hpbGUgKGJpdHMgPCAxNikgewogICAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7CiAgICAgICAgICAgICAgICBicmVhayBpbmZfbGVhdmU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGhhdmUtLTsKICAgICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0czsKICAgICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc3RhdGUuZmxhZ3MgPSBob2xkOwogICAgICAgICAgICBpZiAoKHN0YXRlLmZsYWdzICYgMjU1KSAhPT0gWl9ERUZMQVRFRCkgewogICAgICAgICAgICAgIHN0cm0ubXNnID0gInVua25vd24gY29tcHJlc3Npb24gbWV0aG9kIjsKICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDU3MzQ0KSB7CiAgICAgICAgICAgICAgc3RybS5tc2cgPSAidW5rbm93biBoZWFkZXIgZmxhZ3Mgc2V0IjsKICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChzdGF0ZS5oZWFkKSB7CiAgICAgICAgICAgICAgc3RhdGUuaGVhZC50ZXh0ID0gaG9sZCA+PiA4ICYgMTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoc3RhdGUuZmxhZ3MgJiA1MTIpIHsKICAgICAgICAgICAgICBoYnVmWzBdID0gaG9sZCAmIDI1NTsKICAgICAgICAgICAgICBoYnVmWzFdID0gaG9sZCA+Pj4gOCAmIDI1NTsKICAgICAgICAgICAgICBzdGF0ZS5jaGVjayA9IGNyYzMyJDEoc3RhdGUuY2hlY2ssIGhidWYsIDIsIDApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGhvbGQgPSAwOwogICAgICAgICAgICBiaXRzID0gMDsKICAgICAgICAgICAgc3RhdGUubW9kZSA9IFRJTUU7CiAgICAgICAgICBjYXNlIFRJTUU6CiAgICAgICAgICAgIHdoaWxlIChiaXRzIDwgMzIpIHsKICAgICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgewogICAgICAgICAgICAgICAgYnJlYWsgaW5mX2xlYXZlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBoYXZlLS07CiAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChzdGF0ZS5oZWFkKSB7CiAgICAgICAgICAgICAgc3RhdGUuaGVhZC50aW1lID0gaG9sZDsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoc3RhdGUuZmxhZ3MgJiA1MTIpIHsKICAgICAgICAgICAgICBoYnVmWzBdID0gaG9sZCAmIDI1NTsKICAgICAgICAgICAgICBoYnVmWzFdID0gaG9sZCA+Pj4gOCAmIDI1NTsKICAgICAgICAgICAgICBoYnVmWzJdID0gaG9sZCA+Pj4gMTYgJiAyNTU7CiAgICAgICAgICAgICAgaGJ1ZlszXSA9IGhvbGQgPj4+IDI0ICYgMjU1OwogICAgICAgICAgICAgIHN0YXRlLmNoZWNrID0gY3JjMzIkMShzdGF0ZS5jaGVjaywgaGJ1ZiwgNCwgMCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaG9sZCA9IDA7CiAgICAgICAgICAgIGJpdHMgPSAwOwogICAgICAgICAgICBzdGF0ZS5tb2RlID0gT1M7CiAgICAgICAgICBjYXNlIE9TOgogICAgICAgICAgICB3aGlsZSAoYml0cyA8IDE2KSB7CiAgICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsKICAgICAgICAgICAgICAgIGJyZWFrIGluZl9sZWF2ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaGF2ZS0tOwogICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzOwogICAgICAgICAgICAgIGJpdHMgKz0gODsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoc3RhdGUuaGVhZCkgewogICAgICAgICAgICAgIHN0YXRlLmhlYWQueGZsYWdzID0gaG9sZCAmIDI1NTsKICAgICAgICAgICAgICBzdGF0ZS5oZWFkLm9zID0gaG9sZCA+PiA4OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDUxMikgewogICAgICAgICAgICAgIGhidWZbMF0gPSBob2xkICYgMjU1OwogICAgICAgICAgICAgIGhidWZbMV0gPSBob2xkID4+PiA4ICYgMjU1OwogICAgICAgICAgICAgIHN0YXRlLmNoZWNrID0gY3JjMzIkMShzdGF0ZS5jaGVjaywgaGJ1ZiwgMiwgMCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaG9sZCA9IDA7CiAgICAgICAgICAgIGJpdHMgPSAwOwogICAgICAgICAgICBzdGF0ZS5tb2RlID0gRVhMRU47CiAgICAgICAgICBjYXNlIEVYTEVOOgogICAgICAgICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAxMDI0KSB7CiAgICAgICAgICAgICAgd2hpbGUgKGJpdHMgPCAxNikgewogICAgICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsKICAgICAgICAgICAgICAgICAgYnJlYWsgaW5mX2xlYXZlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaGF2ZS0tOwogICAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHN0YXRlLmxlbmd0aCA9IGhvbGQ7CiAgICAgICAgICAgICAgaWYgKHN0YXRlLmhlYWQpIHsKICAgICAgICAgICAgICAgIHN0YXRlLmhlYWQuZXh0cmFfbGVuID0gaG9sZDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKHN0YXRlLmZsYWdzICYgNTEyKSB7CiAgICAgICAgICAgICAgICBoYnVmWzBdID0gaG9sZCAmIDI1NTsKICAgICAgICAgICAgICAgIGhidWZbMV0gPSBob2xkID4+PiA4ICYgMjU1OwogICAgICAgICAgICAgICAgc3RhdGUuY2hlY2sgPSBjcmMzMiQxKHN0YXRlLmNoZWNrLCBoYnVmLCAyLCAwKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaG9sZCA9IDA7CiAgICAgICAgICAgICAgYml0cyA9IDA7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdGUuaGVhZCkgewogICAgICAgICAgICAgIHN0YXRlLmhlYWQuZXh0cmEgPSBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBFWFRSQTsKICAgICAgICAgIGNhc2UgRVhUUkE6CiAgICAgICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDEwMjQpIHsKICAgICAgICAgICAgICBjb3B5ID0gc3RhdGUubGVuZ3RoOwogICAgICAgICAgICAgIGlmIChjb3B5ID4gaGF2ZSkgewogICAgICAgICAgICAgICAgY29weSA9IGhhdmU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChjb3B5KSB7CiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuaGVhZCkgewogICAgICAgICAgICAgICAgICBsZW4yID0gc3RhdGUuaGVhZC5leHRyYV9sZW4gLSBzdGF0ZS5sZW5ndGg7CiAgICAgICAgICAgICAgICAgIGlmICghc3RhdGUuaGVhZC5leHRyYSkgewogICAgICAgICAgICAgICAgICAgIHN0YXRlLmhlYWQuZXh0cmEgPSBuZXcgQXJyYXkoc3RhdGUuaGVhZC5leHRyYV9sZW4pOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHV0aWxzJDEuYXJyYXlTZXQoc3RhdGUuaGVhZC5leHRyYSwgaW5wdXQsIG5leHQsIGNvcHksIGxlbjIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHN0YXRlLmZsYWdzICYgNTEyKSB7CiAgICAgICAgICAgICAgICAgIHN0YXRlLmNoZWNrID0gY3JjMzIkMShzdGF0ZS5jaGVjaywgaW5wdXQsIGNvcHksIG5leHQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaGF2ZSAtPSBjb3B5OwogICAgICAgICAgICAgICAgbmV4dCArPSBjb3B5OwogICAgICAgICAgICAgICAgc3RhdGUubGVuZ3RoIC09IGNvcHk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChzdGF0ZS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIGJyZWFrIGluZl9sZWF2ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc3RhdGUubGVuZ3RoID0gMDsKICAgICAgICAgICAgc3RhdGUubW9kZSA9IE5BTUU7CiAgICAgICAgICBjYXNlIE5BTUU6CiAgICAgICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDIwNDgpIHsKICAgICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgewogICAgICAgICAgICAgICAgYnJlYWsgaW5mX2xlYXZlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBjb3B5ID0gMDsKICAgICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICBsZW4yID0gaW5wdXRbbmV4dCArIGNvcHkrK107CiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuaGVhZCAmJiBsZW4yICYmIHN0YXRlLmxlbmd0aCA8IDY1NTM2KSB7CiAgICAgICAgICAgICAgICAgIHN0YXRlLmhlYWQubmFtZSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGxlbjIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gd2hpbGUgKGxlbjIgJiYgY29weSA8IGhhdmUpOwogICAgICAgICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDUxMikgewogICAgICAgICAgICAgICAgc3RhdGUuY2hlY2sgPSBjcmMzMiQxKHN0YXRlLmNoZWNrLCBpbnB1dCwgY29weSwgbmV4dCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGhhdmUgLT0gY29weTsKICAgICAgICAgICAgICBuZXh0ICs9IGNvcHk7CiAgICAgICAgICAgICAgaWYgKGxlbjIpIHsKICAgICAgICAgICAgICAgIGJyZWFrIGluZl9sZWF2ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdGUuaGVhZCkgewogICAgICAgICAgICAgIHN0YXRlLmhlYWQubmFtZSA9IG51bGw7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc3RhdGUubGVuZ3RoID0gMDsKICAgICAgICAgICAgc3RhdGUubW9kZSA9IENPTU1FTlQ7CiAgICAgICAgICBjYXNlIENPTU1FTlQ6CiAgICAgICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDQwOTYpIHsKICAgICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgewogICAgICAgICAgICAgICAgYnJlYWsgaW5mX2xlYXZlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBjb3B5ID0gMDsKICAgICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICBsZW4yID0gaW5wdXRbbmV4dCArIGNvcHkrK107CiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuaGVhZCAmJiBsZW4yICYmIHN0YXRlLmxlbmd0aCA8IDY1NTM2KSB7CiAgICAgICAgICAgICAgICAgIHN0YXRlLmhlYWQuY29tbWVudCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGxlbjIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gd2hpbGUgKGxlbjIgJiYgY29weSA8IGhhdmUpOwogICAgICAgICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDUxMikgewogICAgICAgICAgICAgICAgc3RhdGUuY2hlY2sgPSBjcmMzMiQxKHN0YXRlLmNoZWNrLCBpbnB1dCwgY29weSwgbmV4dCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGhhdmUgLT0gY29weTsKICAgICAgICAgICAgICBuZXh0ICs9IGNvcHk7CiAgICAgICAgICAgICAgaWYgKGxlbjIpIHsKICAgICAgICAgICAgICAgIGJyZWFrIGluZl9sZWF2ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdGUuaGVhZCkgewogICAgICAgICAgICAgIHN0YXRlLmhlYWQuY29tbWVudCA9IG51bGw7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc3RhdGUubW9kZSA9IEhDUkM7CiAgICAgICAgICBjYXNlIEhDUkM6CiAgICAgICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDUxMikgewogICAgICAgICAgICAgIHdoaWxlIChiaXRzIDwgMTYpIHsKICAgICAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7CiAgICAgICAgICAgICAgICAgIGJyZWFrIGluZl9sZWF2ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGhhdmUtLTsKICAgICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzOwogICAgICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoaG9sZCAhPT0gKHN0YXRlLmNoZWNrICYgNjU1MzUpKSB7CiAgICAgICAgICAgICAgICBzdHJtLm1zZyA9ICJoZWFkZXIgY3JjIG1pc21hdGNoIjsKICAgICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaG9sZCA9IDA7CiAgICAgICAgICAgICAgYml0cyA9IDA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHN0YXRlLmhlYWQpIHsKICAgICAgICAgICAgICBzdGF0ZS5oZWFkLmhjcmMgPSBzdGF0ZS5mbGFncyA+PiA5ICYgMTsKICAgICAgICAgICAgICBzdGF0ZS5oZWFkLmRvbmUgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHN0cm0uYWRsZXIgPSBzdGF0ZS5jaGVjayA9IDA7CiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBUWVBFOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgRElDVElEOgogICAgICAgICAgICB3aGlsZSAoYml0cyA8IDMyKSB7CiAgICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsKICAgICAgICAgICAgICAgIGJyZWFrIGluZl9sZWF2ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaGF2ZS0tOwogICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzOwogICAgICAgICAgICAgIGJpdHMgKz0gODsKICAgICAgICAgICAgfQogICAgICAgICAgICBzdHJtLmFkbGVyID0gc3RhdGUuY2hlY2sgPSB6c3dhcDMyKGhvbGQpOwogICAgICAgICAgICBob2xkID0gMDsKICAgICAgICAgICAgYml0cyA9IDA7CiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBESUNUOwogICAgICAgICAgY2FzZSBESUNUOgogICAgICAgICAgICBpZiAoc3RhdGUuaGF2ZWRpY3QgPT09IDApIHsKICAgICAgICAgICAgICBzdHJtLm5leHRfb3V0ID0gcHV0OwogICAgICAgICAgICAgIHN0cm0uYXZhaWxfb3V0ID0gbGVmdDsKICAgICAgICAgICAgICBzdHJtLm5leHRfaW4gPSBuZXh0OwogICAgICAgICAgICAgIHN0cm0uYXZhaWxfaW4gPSBoYXZlOwogICAgICAgICAgICAgIHN0YXRlLmhvbGQgPSBob2xkOwogICAgICAgICAgICAgIHN0YXRlLmJpdHMgPSBiaXRzOwogICAgICAgICAgICAgIHJldHVybiBaX05FRURfRElDVDsKICAgICAgICAgICAgfQogICAgICAgICAgICBzdHJtLmFkbGVyID0gc3RhdGUuY2hlY2sgPSAxOwogICAgICAgICAgICBzdGF0ZS5tb2RlID0gVFlQRTsKICAgICAgICAgIGNhc2UgVFlQRToKICAgICAgICAgICAgaWYgKGZsdXNoMiA9PT0gWl9CTE9DSyB8fCBmbHVzaDIgPT09IFpfVFJFRVMpIHsKICAgICAgICAgICAgICBicmVhayBpbmZfbGVhdmU7CiAgICAgICAgICAgIH0KICAgICAgICAgIGNhc2UgVFlQRURPOgogICAgICAgICAgICBpZiAoc3RhdGUubGFzdCkgewogICAgICAgICAgICAgIGhvbGQgPj4+PSBiaXRzICYgNzsKICAgICAgICAgICAgICBiaXRzIC09IGJpdHMgJiA3OwogICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBDSEVDSzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICB3aGlsZSAoYml0cyA8IDMpIHsKICAgICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgewogICAgICAgICAgICAgICAgYnJlYWsgaW5mX2xlYXZlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBoYXZlLS07CiAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHN0YXRlLmxhc3QgPSBob2xkICYgMTsKICAgICAgICAgICAgaG9sZCA+Pj49IDE7CiAgICAgICAgICAgIGJpdHMgLT0gMTsKICAgICAgICAgICAgc3dpdGNoIChob2xkICYgMykgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBTVE9SRUQ7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICBmaXhlZHRhYmxlcyhzdGF0ZSk7CiAgICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gTEVOXzsKICAgICAgICAgICAgICAgIGlmIChmbHVzaDIgPT09IFpfVFJFRVMpIHsKICAgICAgICAgICAgICAgICAgaG9sZCA+Pj49IDI7CiAgICAgICAgICAgICAgICAgIGJpdHMgLT0gMjsKICAgICAgICAgICAgICAgICAgYnJlYWsgaW5mX2xlYXZlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgc3RhdGUubW9kZSA9IFRBQkxFOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgc3RybS5tc2cgPSAiaW52YWxpZCBibG9jayB0eXBlIjsKICAgICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaG9sZCA+Pj49IDI7CiAgICAgICAgICAgIGJpdHMgLT0gMjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIFNUT1JFRDoKICAgICAgICAgICAgaG9sZCA+Pj49IGJpdHMgJiA3OwogICAgICAgICAgICBiaXRzIC09IGJpdHMgJiA3OwogICAgICAgICAgICB3aGlsZSAoYml0cyA8IDMyKSB7CiAgICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsKICAgICAgICAgICAgICAgIGJyZWFrIGluZl9sZWF2ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaGF2ZS0tOwogICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzOwogICAgICAgICAgICAgIGJpdHMgKz0gODsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoKGhvbGQgJiA2NTUzNSkgIT09IChob2xkID4+PiAxNiBeIDY1NTM1KSkgewogICAgICAgICAgICAgIHN0cm0ubXNnID0gImludmFsaWQgc3RvcmVkIGJsb2NrIGxlbmd0aHMiOwogICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc3RhdGUubGVuZ3RoID0gaG9sZCAmIDY1NTM1OwogICAgICAgICAgICBob2xkID0gMDsKICAgICAgICAgICAgYml0cyA9IDA7CiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBDT1BZXzsKICAgICAgICAgICAgaWYgKGZsdXNoMiA9PT0gWl9UUkVFUykgewogICAgICAgICAgICAgIGJyZWFrIGluZl9sZWF2ZTsKICAgICAgICAgICAgfQogICAgICAgICAgY2FzZSBDT1BZXzoKICAgICAgICAgICAgc3RhdGUubW9kZSA9IENPUFk7CiAgICAgICAgICBjYXNlIENPUFk6CiAgICAgICAgICAgIGNvcHkgPSBzdGF0ZS5sZW5ndGg7CiAgICAgICAgICAgIGlmIChjb3B5KSB7CiAgICAgICAgICAgICAgaWYgKGNvcHkgPiBoYXZlKSB7CiAgICAgICAgICAgICAgICBjb3B5ID0gaGF2ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKGNvcHkgPiBsZWZ0KSB7CiAgICAgICAgICAgICAgICBjb3B5ID0gbGVmdDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKGNvcHkgPT09IDApIHsKICAgICAgICAgICAgICAgIGJyZWFrIGluZl9sZWF2ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdXRpbHMkMS5hcnJheVNldChvdXRwdXQsIGlucHV0LCBuZXh0LCBjb3B5LCBwdXQpOwogICAgICAgICAgICAgIGhhdmUgLT0gY29weTsKICAgICAgICAgICAgICBuZXh0ICs9IGNvcHk7CiAgICAgICAgICAgICAgbGVmdCAtPSBjb3B5OwogICAgICAgICAgICAgIHB1dCArPSBjb3B5OwogICAgICAgICAgICAgIHN0YXRlLmxlbmd0aCAtPSBjb3B5OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBUWVBFOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgVEFCTEU6CiAgICAgICAgICAgIHdoaWxlIChiaXRzIDwgMTQpIHsKICAgICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgewogICAgICAgICAgICAgICAgYnJlYWsgaW5mX2xlYXZlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBoYXZlLS07CiAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHN0YXRlLm5sZW4gPSAoaG9sZCAmIDMxKSArIDI1NzsKICAgICAgICAgICAgaG9sZCA+Pj49IDU7CiAgICAgICAgICAgIGJpdHMgLT0gNTsKICAgICAgICAgICAgc3RhdGUubmRpc3QgPSAoaG9sZCAmIDMxKSArIDE7CiAgICAgICAgICAgIGhvbGQgPj4+PSA1OwogICAgICAgICAgICBiaXRzIC09IDU7CiAgICAgICAgICAgIHN0YXRlLm5jb2RlID0gKGhvbGQgJiAxNSkgKyA0OwogICAgICAgICAgICBob2xkID4+Pj0gNDsKICAgICAgICAgICAgYml0cyAtPSA0OwogICAgICAgICAgICBpZiAoc3RhdGUubmxlbiA+IDI4NiB8fCBzdGF0ZS5uZGlzdCA+IDMwKSB7CiAgICAgICAgICAgICAgc3RybS5tc2cgPSAidG9vIG1hbnkgbGVuZ3RoIG9yIGRpc3RhbmNlIHN5bWJvbHMiOwogICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc3RhdGUuaGF2ZSA9IDA7CiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBMRU5MRU5TOwogICAgICAgICAgY2FzZSBMRU5MRU5TOgogICAgICAgICAgICB3aGlsZSAoc3RhdGUuaGF2ZSA8IHN0YXRlLm5jb2RlKSB7CiAgICAgICAgICAgICAgd2hpbGUgKGJpdHMgPCAzKSB7CiAgICAgICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgewogICAgICAgICAgICAgICAgICBicmVhayBpbmZfbGVhdmU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBoYXZlLS07CiAgICAgICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0czsKICAgICAgICAgICAgICAgIGJpdHMgKz0gODsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgc3RhdGUubGVuc1tvcmRlcltzdGF0ZS5oYXZlKytdXSA9IGhvbGQgJiA3OwogICAgICAgICAgICAgIGhvbGQgPj4+PSAzOwogICAgICAgICAgICAgIGJpdHMgLT0gMzsKICAgICAgICAgICAgfQogICAgICAgICAgICB3aGlsZSAoc3RhdGUuaGF2ZSA8IDE5KSB7CiAgICAgICAgICAgICAgc3RhdGUubGVuc1tvcmRlcltzdGF0ZS5oYXZlKytdXSA9IDA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc3RhdGUubGVuY29kZSA9IHN0YXRlLmxlbmR5bjsKICAgICAgICAgICAgc3RhdGUubGVuYml0cyA9IDc7CiAgICAgICAgICAgIG9wdHMgPSB7IGJpdHM6IHN0YXRlLmxlbmJpdHMgfTsKICAgICAgICAgICAgcmV0ID0gaW5mbGF0ZV90YWJsZShDT0RFUywgc3RhdGUubGVucywgMCwgMTksIHN0YXRlLmxlbmNvZGUsIDAsIHN0YXRlLndvcmssIG9wdHMpOwogICAgICAgICAgICBzdGF0ZS5sZW5iaXRzID0gb3B0cy5iaXRzOwogICAgICAgICAgICBpZiAocmV0KSB7CiAgICAgICAgICAgICAgc3RybS5tc2cgPSAiaW52YWxpZCBjb2RlIGxlbmd0aHMgc2V0IjsKICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHN0YXRlLmhhdmUgPSAwOwogICAgICAgICAgICBzdGF0ZS5tb2RlID0gQ09ERUxFTlM7CiAgICAgICAgICBjYXNlIENPREVMRU5TOgogICAgICAgICAgICB3aGlsZSAoc3RhdGUuaGF2ZSA8IHN0YXRlLm5sZW4gKyBzdGF0ZS5uZGlzdCkgewogICAgICAgICAgICAgIGZvciAoOyA7ICkgewogICAgICAgICAgICAgICAgaGVyZSA9IHN0YXRlLmxlbmNvZGVbaG9sZCAmICgxIDw8IHN0YXRlLmxlbmJpdHMpIC0gMV07CiAgICAgICAgICAgICAgICBoZXJlX2JpdHMgPSBoZXJlID4+PiAyNDsKICAgICAgICAgICAgICAgIGhlcmVfb3AgPSBoZXJlID4+PiAxNiAmIDI1NTsKICAgICAgICAgICAgICAgIGhlcmVfdmFsID0gaGVyZSAmIDY1NTM1OwogICAgICAgICAgICAgICAgaWYgKGhlcmVfYml0cyA8PSBiaXRzKSB7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsKICAgICAgICAgICAgICAgICAgYnJlYWsgaW5mX2xlYXZlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaGF2ZS0tOwogICAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChoZXJlX3ZhbCA8IDE2KSB7CiAgICAgICAgICAgICAgICBob2xkID4+Pj0gaGVyZV9iaXRzOwogICAgICAgICAgICAgICAgYml0cyAtPSBoZXJlX2JpdHM7CiAgICAgICAgICAgICAgICBzdGF0ZS5sZW5zW3N0YXRlLmhhdmUrK10gPSBoZXJlX3ZhbDsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgaWYgKGhlcmVfdmFsID09PSAxNikgewogICAgICAgICAgICAgICAgICBuID0gaGVyZV9iaXRzICsgMjsKICAgICAgICAgICAgICAgICAgd2hpbGUgKGJpdHMgPCBuKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIGluZl9sZWF2ZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaGF2ZS0tOwogICAgICAgICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzOwogICAgICAgICAgICAgICAgICAgIGJpdHMgKz0gODsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBob2xkID4+Pj0gaGVyZV9iaXRzOwogICAgICAgICAgICAgICAgICBiaXRzIC09IGhlcmVfYml0czsKICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLmhhdmUgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICBzdHJtLm1zZyA9ICJpbnZhbGlkIGJpdCBsZW5ndGggcmVwZWF0IjsKICAgICAgICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGxlbjIgPSBzdGF0ZS5sZW5zW3N0YXRlLmhhdmUgLSAxXTsKICAgICAgICAgICAgICAgICAgY29weSA9IDMgKyAoaG9sZCAmIDMpOwogICAgICAgICAgICAgICAgICBob2xkID4+Pj0gMjsKICAgICAgICAgICAgICAgICAgYml0cyAtPSAyOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChoZXJlX3ZhbCA9PT0gMTcpIHsKICAgICAgICAgICAgICAgICAgbiA9IGhlcmVfYml0cyArIDM7CiAgICAgICAgICAgICAgICAgIHdoaWxlIChiaXRzIDwgbikgewogICAgICAgICAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICBicmVhayBpbmZfbGVhdmU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGhhdmUtLTsKICAgICAgICAgICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0czsKICAgICAgICAgICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgaG9sZCA+Pj49IGhlcmVfYml0czsKICAgICAgICAgICAgICAgICAgYml0cyAtPSBoZXJlX2JpdHM7CiAgICAgICAgICAgICAgICAgIGxlbjIgPSAwOwogICAgICAgICAgICAgICAgICBjb3B5ID0gMyArIChob2xkICYgNyk7CiAgICAgICAgICAgICAgICAgIGhvbGQgPj4+PSAzOwogICAgICAgICAgICAgICAgICBiaXRzIC09IDM7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBuID0gaGVyZV9iaXRzICsgNzsKICAgICAgICAgICAgICAgICAgd2hpbGUgKGJpdHMgPCBuKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIGluZl9sZWF2ZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaGF2ZS0tOwogICAgICAgICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzOwogICAgICAgICAgICAgICAgICAgIGJpdHMgKz0gODsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBob2xkID4+Pj0gaGVyZV9iaXRzOwogICAgICAgICAgICAgICAgICBiaXRzIC09IGhlcmVfYml0czsKICAgICAgICAgICAgICAgICAgbGVuMiA9IDA7CiAgICAgICAgICAgICAgICAgIGNvcHkgPSAxMSArIChob2xkICYgMTI3KTsKICAgICAgICAgICAgICAgICAgaG9sZCA+Pj49IDc7CiAgICAgICAgICAgICAgICAgIGJpdHMgLT0gNzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5oYXZlICsgY29weSA+IHN0YXRlLm5sZW4gKyBzdGF0ZS5uZGlzdCkgewogICAgICAgICAgICAgICAgICBzdHJtLm1zZyA9ICJpbnZhbGlkIGJpdCBsZW5ndGggcmVwZWF0IjsKICAgICAgICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB3aGlsZSAoY29weS0tKSB7CiAgICAgICAgICAgICAgICAgIHN0YXRlLmxlbnNbc3RhdGUuaGF2ZSsrXSA9IGxlbjI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChzdGF0ZS5tb2RlID09PSBCQUQpIHsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoc3RhdGUubGVuc1syNTZdID09PSAwKSB7CiAgICAgICAgICAgICAgc3RybS5tc2cgPSAiaW52YWxpZCBjb2RlIC0tIG1pc3NpbmcgZW5kLW9mLWJsb2NrIjsKICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHN0YXRlLmxlbmJpdHMgPSA5OwogICAgICAgICAgICBvcHRzID0geyBiaXRzOiBzdGF0ZS5sZW5iaXRzIH07CiAgICAgICAgICAgIHJldCA9IGluZmxhdGVfdGFibGUoTEVOUywgc3RhdGUubGVucywgMCwgc3RhdGUubmxlbiwgc3RhdGUubGVuY29kZSwgMCwgc3RhdGUud29yaywgb3B0cyk7CiAgICAgICAgICAgIHN0YXRlLmxlbmJpdHMgPSBvcHRzLmJpdHM7CiAgICAgICAgICAgIGlmIChyZXQpIHsKICAgICAgICAgICAgICBzdHJtLm1zZyA9ICJpbnZhbGlkIGxpdGVyYWwvbGVuZ3RocyBzZXQiOwogICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc3RhdGUuZGlzdGJpdHMgPSA2OwogICAgICAgICAgICBzdGF0ZS5kaXN0Y29kZSA9IHN0YXRlLmRpc3RkeW47CiAgICAgICAgICAgIG9wdHMgPSB7IGJpdHM6IHN0YXRlLmRpc3RiaXRzIH07CiAgICAgICAgICAgIHJldCA9IGluZmxhdGVfdGFibGUoRElTVFMsIHN0YXRlLmxlbnMsIHN0YXRlLm5sZW4sIHN0YXRlLm5kaXN0LCBzdGF0ZS5kaXN0Y29kZSwgMCwgc3RhdGUud29yaywgb3B0cyk7CiAgICAgICAgICAgIHN0YXRlLmRpc3RiaXRzID0gb3B0cy5iaXRzOwogICAgICAgICAgICBpZiAocmV0KSB7CiAgICAgICAgICAgICAgc3RybS5tc2cgPSAiaW52YWxpZCBkaXN0YW5jZXMgc2V0IjsKICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBMRU5fOwogICAgICAgICAgICBpZiAoZmx1c2gyID09PSBaX1RSRUVTKSB7CiAgICAgICAgICAgICAgYnJlYWsgaW5mX2xlYXZlOwogICAgICAgICAgICB9CiAgICAgICAgICBjYXNlIExFTl86CiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBMRU47CiAgICAgICAgICBjYXNlIExFTjoKICAgICAgICAgICAgaWYgKGhhdmUgPj0gNiAmJiBsZWZ0ID49IDI1OCkgewogICAgICAgICAgICAgIHN0cm0ubmV4dF9vdXQgPSBwdXQ7CiAgICAgICAgICAgICAgc3RybS5hdmFpbF9vdXQgPSBsZWZ0OwogICAgICAgICAgICAgIHN0cm0ubmV4dF9pbiA9IG5leHQ7CiAgICAgICAgICAgICAgc3RybS5hdmFpbF9pbiA9IGhhdmU7CiAgICAgICAgICAgICAgc3RhdGUuaG9sZCA9IGhvbGQ7CiAgICAgICAgICAgICAgc3RhdGUuYml0cyA9IGJpdHM7CiAgICAgICAgICAgICAgaW5mbGF0ZV9mYXN0KHN0cm0sIF9vdXQpOwogICAgICAgICAgICAgIHB1dCA9IHN0cm0ubmV4dF9vdXQ7CiAgICAgICAgICAgICAgb3V0cHV0ID0gc3RybS5vdXRwdXQ7CiAgICAgICAgICAgICAgbGVmdCA9IHN0cm0uYXZhaWxfb3V0OwogICAgICAgICAgICAgIG5leHQgPSBzdHJtLm5leHRfaW47CiAgICAgICAgICAgICAgaW5wdXQgPSBzdHJtLmlucHV0OwogICAgICAgICAgICAgIGhhdmUgPSBzdHJtLmF2YWlsX2luOwogICAgICAgICAgICAgIGhvbGQgPSBzdGF0ZS5ob2xkOwogICAgICAgICAgICAgIGJpdHMgPSBzdGF0ZS5iaXRzOwogICAgICAgICAgICAgIGlmIChzdGF0ZS5tb2RlID09PSBUWVBFKSB7CiAgICAgICAgICAgICAgICBzdGF0ZS5iYWNrID0gLTE7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHN0YXRlLmJhY2sgPSAwOwogICAgICAgICAgICBmb3IgKDsgOyApIHsKICAgICAgICAgICAgICBoZXJlID0gc3RhdGUubGVuY29kZVtob2xkICYgKDEgPDwgc3RhdGUubGVuYml0cykgLSAxXTsKICAgICAgICAgICAgICBoZXJlX2JpdHMgPSBoZXJlID4+PiAyNDsKICAgICAgICAgICAgICBoZXJlX29wID0gaGVyZSA+Pj4gMTYgJiAyNTU7CiAgICAgICAgICAgICAgaGVyZV92YWwgPSBoZXJlICYgNjU1MzU7CiAgICAgICAgICAgICAgaWYgKGhlcmVfYml0cyA8PSBiaXRzKSB7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsKICAgICAgICAgICAgICAgIGJyZWFrIGluZl9sZWF2ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaGF2ZS0tOwogICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzOwogICAgICAgICAgICAgIGJpdHMgKz0gODsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoaGVyZV9vcCAmJiAoaGVyZV9vcCAmIDI0MCkgPT09IDApIHsKICAgICAgICAgICAgICBsYXN0X2JpdHMgPSBoZXJlX2JpdHM7CiAgICAgICAgICAgICAgbGFzdF9vcCA9IGhlcmVfb3A7CiAgICAgICAgICAgICAgbGFzdF92YWwgPSBoZXJlX3ZhbDsKICAgICAgICAgICAgICBmb3IgKDsgOyApIHsKICAgICAgICAgICAgICAgIGhlcmUgPSBzdGF0ZS5sZW5jb2RlW2xhc3RfdmFsICsgKChob2xkICYgKDEgPDwgbGFzdF9iaXRzICsgbGFzdF9vcCkgLSAxKSA+PiBsYXN0X2JpdHMpXTsKICAgICAgICAgICAgICAgIGhlcmVfYml0cyA9IGhlcmUgPj4+IDI0OwogICAgICAgICAgICAgICAgaGVyZV9vcCA9IGhlcmUgPj4+IDE2ICYgMjU1OwogICAgICAgICAgICAgICAgaGVyZV92YWwgPSBoZXJlICYgNjU1MzU7CiAgICAgICAgICAgICAgICBpZiAobGFzdF9iaXRzICsgaGVyZV9iaXRzIDw9IGJpdHMpIHsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgewogICAgICAgICAgICAgICAgICBicmVhayBpbmZfbGVhdmU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBoYXZlLS07CiAgICAgICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0czsKICAgICAgICAgICAgICAgIGJpdHMgKz0gODsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaG9sZCA+Pj49IGxhc3RfYml0czsKICAgICAgICAgICAgICBiaXRzIC09IGxhc3RfYml0czsKICAgICAgICAgICAgICBzdGF0ZS5iYWNrICs9IGxhc3RfYml0czsKICAgICAgICAgICAgfQogICAgICAgICAgICBob2xkID4+Pj0gaGVyZV9iaXRzOwogICAgICAgICAgICBiaXRzIC09IGhlcmVfYml0czsKICAgICAgICAgICAgc3RhdGUuYmFjayArPSBoZXJlX2JpdHM7CiAgICAgICAgICAgIHN0YXRlLmxlbmd0aCA9IGhlcmVfdmFsOwogICAgICAgICAgICBpZiAoaGVyZV9vcCA9PT0gMCkgewogICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBMSVQ7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGhlcmVfb3AgJiAzMikgewogICAgICAgICAgICAgIHN0YXRlLmJhY2sgPSAtMTsKICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gVFlQRTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoaGVyZV9vcCAmIDY0KSB7CiAgICAgICAgICAgICAgc3RybS5tc2cgPSAiaW52YWxpZCBsaXRlcmFsL2xlbmd0aCBjb2RlIjsKICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHN0YXRlLmV4dHJhID0gaGVyZV9vcCAmIDE1OwogICAgICAgICAgICBzdGF0ZS5tb2RlID0gTEVORVhUOwogICAgICAgICAgY2FzZSBMRU5FWFQ6CiAgICAgICAgICAgIGlmIChzdGF0ZS5leHRyYSkgewogICAgICAgICAgICAgIG4gPSBzdGF0ZS5leHRyYTsKICAgICAgICAgICAgICB3aGlsZSAoYml0cyA8IG4pIHsKICAgICAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7CiAgICAgICAgICAgICAgICAgIGJyZWFrIGluZl9sZWF2ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGhhdmUtLTsKICAgICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzOwogICAgICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBzdGF0ZS5sZW5ndGggKz0gaG9sZCAmICgxIDw8IHN0YXRlLmV4dHJhKSAtIDE7CiAgICAgICAgICAgICAgaG9sZCA+Pj49IHN0YXRlLmV4dHJhOwogICAgICAgICAgICAgIGJpdHMgLT0gc3RhdGUuZXh0cmE7CiAgICAgICAgICAgICAgc3RhdGUuYmFjayArPSBzdGF0ZS5leHRyYTsKICAgICAgICAgICAgfQogICAgICAgICAgICBzdGF0ZS53YXMgPSBzdGF0ZS5sZW5ndGg7CiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBESVNUOwogICAgICAgICAgY2FzZSBESVNUOgogICAgICAgICAgICBmb3IgKDsgOyApIHsKICAgICAgICAgICAgICBoZXJlID0gc3RhdGUuZGlzdGNvZGVbaG9sZCAmICgxIDw8IHN0YXRlLmRpc3RiaXRzKSAtIDFdOwogICAgICAgICAgICAgIGhlcmVfYml0cyA9IGhlcmUgPj4+IDI0OwogICAgICAgICAgICAgIGhlcmVfb3AgPSBoZXJlID4+PiAxNiAmIDI1NTsKICAgICAgICAgICAgICBoZXJlX3ZhbCA9IGhlcmUgJiA2NTUzNTsKICAgICAgICAgICAgICBpZiAoaGVyZV9iaXRzIDw9IGJpdHMpIHsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgewogICAgICAgICAgICAgICAgYnJlYWsgaW5mX2xlYXZlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBoYXZlLS07CiAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICgoaGVyZV9vcCAmIDI0MCkgPT09IDApIHsKICAgICAgICAgICAgICBsYXN0X2JpdHMgPSBoZXJlX2JpdHM7CiAgICAgICAgICAgICAgbGFzdF9vcCA9IGhlcmVfb3A7CiAgICAgICAgICAgICAgbGFzdF92YWwgPSBoZXJlX3ZhbDsKICAgICAgICAgICAgICBmb3IgKDsgOyApIHsKICAgICAgICAgICAgICAgIGhlcmUgPSBzdGF0ZS5kaXN0Y29kZVtsYXN0X3ZhbCArICgoaG9sZCAmICgxIDw8IGxhc3RfYml0cyArIGxhc3Rfb3ApIC0gMSkgPj4gbGFzdF9iaXRzKV07CiAgICAgICAgICAgICAgICBoZXJlX2JpdHMgPSBoZXJlID4+PiAyNDsKICAgICAgICAgICAgICAgIGhlcmVfb3AgPSBoZXJlID4+PiAxNiAmIDI1NTsKICAgICAgICAgICAgICAgIGhlcmVfdmFsID0gaGVyZSAmIDY1NTM1OwogICAgICAgICAgICAgICAgaWYgKGxhc3RfYml0cyArIGhlcmVfYml0cyA8PSBiaXRzKSB7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsKICAgICAgICAgICAgICAgICAgYnJlYWsgaW5mX2xlYXZlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaGF2ZS0tOwogICAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGhvbGQgPj4+PSBsYXN0X2JpdHM7CiAgICAgICAgICAgICAgYml0cyAtPSBsYXN0X2JpdHM7CiAgICAgICAgICAgICAgc3RhdGUuYmFjayArPSBsYXN0X2JpdHM7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaG9sZCA+Pj49IGhlcmVfYml0czsKICAgICAgICAgICAgYml0cyAtPSBoZXJlX2JpdHM7CiAgICAgICAgICAgIHN0YXRlLmJhY2sgKz0gaGVyZV9iaXRzOwogICAgICAgICAgICBpZiAoaGVyZV9vcCAmIDY0KSB7CiAgICAgICAgICAgICAgc3RybS5tc2cgPSAiaW52YWxpZCBkaXN0YW5jZSBjb2RlIjsKICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHN0YXRlLm9mZnNldCA9IGhlcmVfdmFsOwogICAgICAgICAgICBzdGF0ZS5leHRyYSA9IGhlcmVfb3AgJiAxNTsKICAgICAgICAgICAgc3RhdGUubW9kZSA9IERJU1RFWFQ7CiAgICAgICAgICBjYXNlIERJU1RFWFQ6CiAgICAgICAgICAgIGlmIChzdGF0ZS5leHRyYSkgewogICAgICAgICAgICAgIG4gPSBzdGF0ZS5leHRyYTsKICAgICAgICAgICAgICB3aGlsZSAoYml0cyA8IG4pIHsKICAgICAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7CiAgICAgICAgICAgICAgICAgIGJyZWFrIGluZl9sZWF2ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGhhdmUtLTsKICAgICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzOwogICAgICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBzdGF0ZS5vZmZzZXQgKz0gaG9sZCAmICgxIDw8IHN0YXRlLmV4dHJhKSAtIDE7CiAgICAgICAgICAgICAgaG9sZCA+Pj49IHN0YXRlLmV4dHJhOwogICAgICAgICAgICAgIGJpdHMgLT0gc3RhdGUuZXh0cmE7CiAgICAgICAgICAgICAgc3RhdGUuYmFjayArPSBzdGF0ZS5leHRyYTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoc3RhdGUub2Zmc2V0ID4gc3RhdGUuZG1heCkgewogICAgICAgICAgICAgIHN0cm0ubXNnID0gImludmFsaWQgZGlzdGFuY2UgdG9vIGZhciBiYWNrIjsKICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBNQVRDSCQyOwogICAgICAgICAgY2FzZSBNQVRDSCQyOgogICAgICAgICAgICBpZiAobGVmdCA9PT0gMCkgewogICAgICAgICAgICAgIGJyZWFrIGluZl9sZWF2ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb3B5ID0gX291dCAtIGxlZnQ7CiAgICAgICAgICAgIGlmIChzdGF0ZS5vZmZzZXQgPiBjb3B5KSB7CiAgICAgICAgICAgICAgY29weSA9IHN0YXRlLm9mZnNldCAtIGNvcHk7CiAgICAgICAgICAgICAgaWYgKGNvcHkgPiBzdGF0ZS53aGF2ZSkgewogICAgICAgICAgICAgICAgaWYgKHN0YXRlLnNhbmUpIHsKICAgICAgICAgICAgICAgICAgc3RybS5tc2cgPSAiaW52YWxpZCBkaXN0YW5jZSB0b28gZmFyIGJhY2siOwogICAgICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKGNvcHkgPiBzdGF0ZS53bmV4dCkgewogICAgICAgICAgICAgICAgY29weSAtPSBzdGF0ZS53bmV4dDsKICAgICAgICAgICAgICAgIGZyb20yID0gc3RhdGUud3NpemUgLSBjb3B5OwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBmcm9tMiA9IHN0YXRlLnduZXh0IC0gY29weTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKGNvcHkgPiBzdGF0ZS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIGNvcHkgPSBzdGF0ZS5sZW5ndGg7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGZyb21fc291cmNlID0gc3RhdGUud2luZG93OwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGZyb21fc291cmNlID0gb3V0cHV0OwogICAgICAgICAgICAgIGZyb20yID0gcHV0IC0gc3RhdGUub2Zmc2V0OwogICAgICAgICAgICAgIGNvcHkgPSBzdGF0ZS5sZW5ndGg7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGNvcHkgPiBsZWZ0KSB7CiAgICAgICAgICAgICAgY29weSA9IGxlZnQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbGVmdCAtPSBjb3B5OwogICAgICAgICAgICBzdGF0ZS5sZW5ndGggLT0gY29weTsKICAgICAgICAgICAgZG8gewogICAgICAgICAgICAgIG91dHB1dFtwdXQrK10gPSBmcm9tX3NvdXJjZVtmcm9tMisrXTsKICAgICAgICAgICAgfSB3aGlsZSAoLS1jb3B5KTsKICAgICAgICAgICAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBMRU47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIExJVDoKICAgICAgICAgICAgaWYgKGxlZnQgPT09IDApIHsKICAgICAgICAgICAgICBicmVhayBpbmZfbGVhdmU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgb3V0cHV0W3B1dCsrXSA9IHN0YXRlLmxlbmd0aDsKICAgICAgICAgICAgbGVmdC0tOwogICAgICAgICAgICBzdGF0ZS5tb2RlID0gTEVOOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgQ0hFQ0s6CiAgICAgICAgICAgIGlmIChzdGF0ZS53cmFwKSB7CiAgICAgICAgICAgICAgd2hpbGUgKGJpdHMgPCAzMikgewogICAgICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsKICAgICAgICAgICAgICAgICAgYnJlYWsgaW5mX2xlYXZlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaGF2ZS0tOwogICAgICAgICAgICAgICAgaG9sZCB8PSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF9vdXQgLT0gbGVmdDsKICAgICAgICAgICAgICBzdHJtLnRvdGFsX291dCArPSBfb3V0OwogICAgICAgICAgICAgIHN0YXRlLnRvdGFsICs9IF9vdXQ7CiAgICAgICAgICAgICAgaWYgKF9vdXQpIHsKICAgICAgICAgICAgICAgIHN0cm0uYWRsZXIgPSBzdGF0ZS5jaGVjayA9IHN0YXRlLmZsYWdzID8gY3JjMzIkMShzdGF0ZS5jaGVjaywgb3V0cHV0LCBfb3V0LCBwdXQgLSBfb3V0KSA6IGFkbGVyMzIoc3RhdGUuY2hlY2ssIG91dHB1dCwgX291dCwgcHV0IC0gX291dCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF9vdXQgPSBsZWZ0OwogICAgICAgICAgICAgIGlmICgoc3RhdGUuZmxhZ3MgPyBob2xkIDogenN3YXAzMihob2xkKSkgIT09IHN0YXRlLmNoZWNrKSB7CiAgICAgICAgICAgICAgICBzdHJtLm1zZyA9ICJpbmNvcnJlY3QgZGF0YSBjaGVjayI7CiAgICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGhvbGQgPSAwOwogICAgICAgICAgICAgIGJpdHMgPSAwOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBMRU5HVEg7CiAgICAgICAgICBjYXNlIExFTkdUSDoKICAgICAgICAgICAgaWYgKHN0YXRlLndyYXAgJiYgc3RhdGUuZmxhZ3MpIHsKICAgICAgICAgICAgICB3aGlsZSAoYml0cyA8IDMyKSB7CiAgICAgICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgewogICAgICAgICAgICAgICAgICBicmVhayBpbmZfbGVhdmU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBoYXZlLS07CiAgICAgICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0czsKICAgICAgICAgICAgICAgIGJpdHMgKz0gODsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKGhvbGQgIT09IChzdGF0ZS50b3RhbCAmIDQyOTQ5NjcyOTUpKSB7CiAgICAgICAgICAgICAgICBzdHJtLm1zZyA9ICJpbmNvcnJlY3QgbGVuZ3RoIGNoZWNrIjsKICAgICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaG9sZCA9IDA7CiAgICAgICAgICAgICAgYml0cyA9IDA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc3RhdGUubW9kZSA9IERPTkU7CiAgICAgICAgICBjYXNlIERPTkU6CiAgICAgICAgICAgIHJldCA9IFpfU1RSRUFNX0VORDsKICAgICAgICAgICAgYnJlYWsgaW5mX2xlYXZlOwogICAgICAgICAgY2FzZSBCQUQ6CiAgICAgICAgICAgIHJldCA9IFpfREFUQV9FUlJPUjsKICAgICAgICAgICAgYnJlYWsgaW5mX2xlYXZlOwogICAgICAgICAgY2FzZSBNRU06CiAgICAgICAgICAgIHJldHVybiBaX01FTV9FUlJPUjsKICAgICAgICAgIGNhc2UgU1lOQzoKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUjsKICAgICAgICB9CiAgICAgIH0KICAgIHN0cm0ubmV4dF9vdXQgPSBwdXQ7CiAgICBzdHJtLmF2YWlsX291dCA9IGxlZnQ7CiAgICBzdHJtLm5leHRfaW4gPSBuZXh0OwogICAgc3RybS5hdmFpbF9pbiA9IGhhdmU7CiAgICBzdGF0ZS5ob2xkID0gaG9sZDsKICAgIHN0YXRlLmJpdHMgPSBiaXRzOwogICAgaWYgKHN0YXRlLndzaXplIHx8IF9vdXQgIT09IHN0cm0uYXZhaWxfb3V0ICYmIHN0YXRlLm1vZGUgPCBCQUQgJiYgKHN0YXRlLm1vZGUgPCBDSEVDSyB8fCBmbHVzaDIgIT09IFpfRklOSVNIKSkgewogICAgICBpZiAodXBkYXRld2luZG93KHN0cm0sIHN0cm0ub3V0cHV0LCBzdHJtLm5leHRfb3V0LCBfb3V0IC0gc3RybS5hdmFpbF9vdXQpKQogICAgICAgIDsKICAgIH0KICAgIF9pbiAtPSBzdHJtLmF2YWlsX2luOwogICAgX291dCAtPSBzdHJtLmF2YWlsX291dDsKICAgIHN0cm0udG90YWxfaW4gKz0gX2luOwogICAgc3RybS50b3RhbF9vdXQgKz0gX291dDsKICAgIHN0YXRlLnRvdGFsICs9IF9vdXQ7CiAgICBpZiAoc3RhdGUud3JhcCAmJiBfb3V0KSB7CiAgICAgIHN0cm0uYWRsZXIgPSBzdGF0ZS5jaGVjayA9IHN0YXRlLmZsYWdzID8gY3JjMzIkMShzdGF0ZS5jaGVjaywgb3V0cHV0LCBfb3V0LCBzdHJtLm5leHRfb3V0IC0gX291dCkgOiBhZGxlcjMyKHN0YXRlLmNoZWNrLCBvdXRwdXQsIF9vdXQsIHN0cm0ubmV4dF9vdXQgLSBfb3V0KTsKICAgIH0KICAgIHN0cm0uZGF0YV90eXBlID0gc3RhdGUuYml0cyArIChzdGF0ZS5sYXN0ID8gNjQgOiAwKSArIChzdGF0ZS5tb2RlID09PSBUWVBFID8gMTI4IDogMCkgKyAoc3RhdGUubW9kZSA9PT0gTEVOXyB8fCBzdGF0ZS5tb2RlID09PSBDT1BZXyA/IDI1NiA6IDApOwogICAgaWYgKChfaW4gPT09IDAgJiYgX291dCA9PT0gMCB8fCBmbHVzaDIgPT09IFpfRklOSVNIKSAmJiByZXQgPT09IFpfT0spIHsKICAgICAgcmV0ID0gWl9CVUZfRVJST1I7CiAgICB9CiAgICByZXR1cm4gcmV0OwogIH0KICBmdW5jdGlvbiBpbmZsYXRlRW5kKHN0cm0pIHsKICAgIGlmICghc3RybSB8fCAhc3RybS5zdGF0ZSkgewogICAgICByZXR1cm4gWl9TVFJFQU1fRVJST1I7CiAgICB9CiAgICB2YXIgc3RhdGUgPSBzdHJtLnN0YXRlOwogICAgaWYgKHN0YXRlLndpbmRvdykgewogICAgICBzdGF0ZS53aW5kb3cgPSBudWxsOwogICAgfQogICAgc3RybS5zdGF0ZSA9IG51bGw7CiAgICByZXR1cm4gWl9PSzsKICB9CiAgZnVuY3Rpb24gaW5mbGF0ZUdldEhlYWRlcihzdHJtLCBoZWFkMikgewogICAgdmFyIHN0YXRlOwogICAgaWYgKCFzdHJtIHx8ICFzdHJtLnN0YXRlKSB7CiAgICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUjsKICAgIH0KICAgIHN0YXRlID0gc3RybS5zdGF0ZTsKICAgIGlmICgoc3RhdGUud3JhcCAmIDIpID09PSAwKSB7CiAgICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUjsKICAgIH0KICAgIHN0YXRlLmhlYWQgPSBoZWFkMjsKICAgIGhlYWQyLmRvbmUgPSBmYWxzZTsKICAgIHJldHVybiBaX09LOwogIH0KICBmdW5jdGlvbiBpbmZsYXRlU2V0RGljdGlvbmFyeShzdHJtLCBkaWN0aW9uYXJ5KSB7CiAgICB2YXIgZGljdExlbmd0aCA9IGRpY3Rpb25hcnkubGVuZ3RoOwogICAgdmFyIHN0YXRlOwogICAgdmFyIGRpY3RpZDsKICAgIHZhciByZXQ7CiAgICBpZiAoIXN0cm0gfHwgIXN0cm0uc3RhdGUpIHsKICAgICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SOwogICAgfQogICAgc3RhdGUgPSBzdHJtLnN0YXRlOwogICAgaWYgKHN0YXRlLndyYXAgIT09IDAgJiYgc3RhdGUubW9kZSAhPT0gRElDVCkgewogICAgICByZXR1cm4gWl9TVFJFQU1fRVJST1I7CiAgICB9CiAgICBpZiAoc3RhdGUubW9kZSA9PT0gRElDVCkgewogICAgICBkaWN0aWQgPSAxOwogICAgICBkaWN0aWQgPSBhZGxlcjMyKGRpY3RpZCwgZGljdGlvbmFyeSwgZGljdExlbmd0aCwgMCk7CiAgICAgIGlmIChkaWN0aWQgIT09IHN0YXRlLmNoZWNrKSB7CiAgICAgICAgcmV0dXJuIFpfREFUQV9FUlJPUjsKICAgICAgfQogICAgfQogICAgcmV0ID0gdXBkYXRld2luZG93KHN0cm0sIGRpY3Rpb25hcnksIGRpY3RMZW5ndGgsIGRpY3RMZW5ndGgpOwogICAgaWYgKHJldCkgewogICAgICBzdGF0ZS5tb2RlID0gTUVNOwogICAgICByZXR1cm4gWl9NRU1fRVJST1I7CiAgICB9CiAgICBzdGF0ZS5oYXZlZGljdCA9IDE7CiAgICByZXR1cm4gWl9PSzsKICB9CiAgaW5mbGF0ZSQzLmluZmxhdGVSZXNldCA9IGluZmxhdGVSZXNldDsKICBpbmZsYXRlJDMuaW5mbGF0ZVJlc2V0MiA9IGluZmxhdGVSZXNldDI7CiAgaW5mbGF0ZSQzLmluZmxhdGVSZXNldEtlZXAgPSBpbmZsYXRlUmVzZXRLZWVwOwogIGluZmxhdGUkMy5pbmZsYXRlSW5pdCA9IGluZmxhdGVJbml0OwogIGluZmxhdGUkMy5pbmZsYXRlSW5pdDIgPSBpbmZsYXRlSW5pdDI7CiAgaW5mbGF0ZSQzLmluZmxhdGUgPSBpbmZsYXRlJDI7CiAgaW5mbGF0ZSQzLmluZmxhdGVFbmQgPSBpbmZsYXRlRW5kOwogIGluZmxhdGUkMy5pbmZsYXRlR2V0SGVhZGVyID0gaW5mbGF0ZUdldEhlYWRlcjsKICBpbmZsYXRlJDMuaW5mbGF0ZVNldERpY3Rpb25hcnkgPSBpbmZsYXRlU2V0RGljdGlvbmFyeTsKICBpbmZsYXRlJDMuaW5mbGF0ZUluZm8gPSAicGFrbyBpbmZsYXRlIChmcm9tIE5vZGVjYSBwcm9qZWN0KSI7CiAgdmFyIGNvbnN0YW50cyQyID0gewogICAgWl9OT19GTFVTSDogMCwKICAgIFpfUEFSVElBTF9GTFVTSDogMSwKICAgIFpfU1lOQ19GTFVTSDogMiwKICAgIFpfRlVMTF9GTFVTSDogMywKICAgIFpfRklOSVNIOiA0LAogICAgWl9CTE9DSzogNSwKICAgIFpfVFJFRVM6IDYsCiAgICBaX09LOiAwLAogICAgWl9TVFJFQU1fRU5EOiAxLAogICAgWl9ORUVEX0RJQ1Q6IDIsCiAgICBaX0VSUk5POiAtMSwKICAgIFpfU1RSRUFNX0VSUk9SOiAtMiwKICAgIFpfREFUQV9FUlJPUjogLTMsCiAgICBaX0JVRl9FUlJPUjogLTUsCiAgICBaX05PX0NPTVBSRVNTSU9OOiAwLAogICAgWl9CRVNUX1NQRUVEOiAxLAogICAgWl9CRVNUX0NPTVBSRVNTSU9OOiA5LAogICAgWl9ERUZBVUxUX0NPTVBSRVNTSU9OOiAtMSwKICAgIFpfRklMVEVSRUQ6IDEsCiAgICBaX0hVRkZNQU5fT05MWTogMiwKICAgIFpfUkxFOiAzLAogICAgWl9GSVhFRDogNCwKICAgIFpfREVGQVVMVF9TVFJBVEVHWTogMCwKICAgIFpfQklOQVJZOiAwLAogICAgWl9URVhUOiAxLAogICAgWl9VTktOT1dOOiAyLAogICAgWl9ERUZMQVRFRDogOAogIH07CiAgZnVuY3Rpb24gR1poZWFkZXIkMSgpIHsKICAgIHRoaXMudGV4dCA9IDA7CiAgICB0aGlzLnRpbWUgPSAwOwogICAgdGhpcy54ZmxhZ3MgPSAwOwogICAgdGhpcy5vcyA9IDA7CiAgICB0aGlzLmV4dHJhID0gbnVsbDsKICAgIHRoaXMuZXh0cmFfbGVuID0gMDsKICAgIHRoaXMubmFtZSA9ICIiOwogICAgdGhpcy5jb21tZW50ID0gIiI7CiAgICB0aGlzLmhjcmMgPSAwOwogICAgdGhpcy5kb25lID0gZmFsc2U7CiAgfQogIHZhciBnemhlYWRlciA9IEdaaGVhZGVyJDE7CiAgdmFyIHpsaWJfaW5mbGF0ZSA9IGluZmxhdGUkMzsKICB2YXIgdXRpbHMgPSBjb21tb247CiAgdmFyIHN0cmluZ3MgPSBzdHJpbmdzJDI7CiAgdmFyIGMgPSBjb25zdGFudHMkMjsKICB2YXIgbXNnID0gbWVzc2FnZXM7CiAgdmFyIFpTdHJlYW0gPSB6c3RyZWFtOwogIHZhciBHWmhlYWRlciA9IGd6aGVhZGVyOwogIHZhciB0b1N0cmluZyQzID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZzsKICBmdW5jdGlvbiBJbmZsYXRlJDEob3B0aW9ucykgewogICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEluZmxhdGUkMSkpCiAgICAgIHJldHVybiBuZXcgSW5mbGF0ZSQxKG9wdGlvbnMpOwogICAgdGhpcy5vcHRpb25zID0gdXRpbHMuYXNzaWduKHsKICAgICAgY2h1bmtTaXplOiAxNjM4NCwKICAgICAgd2luZG93Qml0czogMCwKICAgICAgdG86ICIiCiAgICB9LCBvcHRpb25zIHx8IHt9KTsKICAgIHZhciBvcHQgPSB0aGlzLm9wdGlvbnM7CiAgICBpZiAob3B0LnJhdyAmJiBvcHQud2luZG93Qml0cyA+PSAwICYmIG9wdC53aW5kb3dCaXRzIDwgMTYpIHsKICAgICAgb3B0LndpbmRvd0JpdHMgPSAtb3B0LndpbmRvd0JpdHM7CiAgICAgIGlmIChvcHQud2luZG93Qml0cyA9PT0gMCkgewogICAgICAgIG9wdC53aW5kb3dCaXRzID0gLTE1OwogICAgICB9CiAgICB9CiAgICBpZiAob3B0LndpbmRvd0JpdHMgPj0gMCAmJiBvcHQud2luZG93Qml0cyA8IDE2ICYmICEob3B0aW9ucyAmJiBvcHRpb25zLndpbmRvd0JpdHMpKSB7CiAgICAgIG9wdC53aW5kb3dCaXRzICs9IDMyOwogICAgfQogICAgaWYgKG9wdC53aW5kb3dCaXRzID4gMTUgJiYgb3B0LndpbmRvd0JpdHMgPCA0OCkgewogICAgICBpZiAoKG9wdC53aW5kb3dCaXRzICYgMTUpID09PSAwKSB7CiAgICAgICAgb3B0LndpbmRvd0JpdHMgfD0gMTU7CiAgICAgIH0KICAgIH0KICAgIHRoaXMuZXJyID0gMDsKICAgIHRoaXMubXNnID0gIiI7CiAgICB0aGlzLmVuZGVkID0gZmFsc2U7CiAgICB0aGlzLmNodW5rcyA9IFtdOwogICAgdGhpcy5zdHJtID0gbmV3IFpTdHJlYW0oKTsKICAgIHRoaXMuc3RybS5hdmFpbF9vdXQgPSAwOwogICAgdmFyIHN0YXR1cyA9IHpsaWJfaW5mbGF0ZS5pbmZsYXRlSW5pdDIodGhpcy5zdHJtLCBvcHQud2luZG93Qml0cyk7CiAgICBpZiAoc3RhdHVzICE9PSBjLlpfT0spIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKG1zZ1tzdGF0dXNdKTsKICAgIH0KICAgIHRoaXMuaGVhZGVyID0gbmV3IEdaaGVhZGVyKCk7CiAgICB6bGliX2luZmxhdGUuaW5mbGF0ZUdldEhlYWRlcih0aGlzLnN0cm0sIHRoaXMuaGVhZGVyKTsKICAgIGlmIChvcHQuZGljdGlvbmFyeSkgewogICAgICBpZiAodHlwZW9mIG9wdC5kaWN0aW9uYXJ5ID09PSAic3RyaW5nIikgewogICAgICAgIG9wdC5kaWN0aW9uYXJ5ID0gc3RyaW5ncy5zdHJpbmcyYnVmKG9wdC5kaWN0aW9uYXJ5KTsKICAgICAgfSBlbHNlIGlmICh0b1N0cmluZyQzLmNhbGwob3B0LmRpY3Rpb25hcnkpID09PSAiW29iamVjdCBBcnJheUJ1ZmZlcl0iKSB7CiAgICAgICAgb3B0LmRpY3Rpb25hcnkgPSBuZXcgVWludDhBcnJheShvcHQuZGljdGlvbmFyeSk7CiAgICAgIH0KICAgICAgaWYgKG9wdC5yYXcpIHsKICAgICAgICBzdGF0dXMgPSB6bGliX2luZmxhdGUuaW5mbGF0ZVNldERpY3Rpb25hcnkodGhpcy5zdHJtLCBvcHQuZGljdGlvbmFyeSk7CiAgICAgICAgaWYgKHN0YXR1cyAhPT0gYy5aX09LKSB7CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IobXNnW3N0YXR1c10pOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KICBJbmZsYXRlJDEucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbihkYXRhMiwgbW9kZSkgewogICAgdmFyIHN0cm0gPSB0aGlzLnN0cm07CiAgICB2YXIgY2h1bmtTaXplID0gdGhpcy5vcHRpb25zLmNodW5rU2l6ZTsKICAgIHZhciBkaWN0aW9uYXJ5ID0gdGhpcy5vcHRpb25zLmRpY3Rpb25hcnk7CiAgICB2YXIgc3RhdHVzLCBfbW9kZTsKICAgIHZhciBuZXh0X291dF91dGY4LCB0YWlsLCB1dGY4c3RyOwogICAgdmFyIGFsbG93QnVmRXJyb3IgPSBmYWxzZTsKICAgIGlmICh0aGlzLmVuZGVkKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIF9tb2RlID0gbW9kZSA9PT0gfn5tb2RlID8gbW9kZSA6IG1vZGUgPT09IHRydWUgPyBjLlpfRklOSVNIIDogYy5aX05PX0ZMVVNIOwogICAgaWYgKHR5cGVvZiBkYXRhMiA9PT0gInN0cmluZyIpIHsKICAgICAgc3RybS5pbnB1dCA9IHN0cmluZ3MuYmluc3RyaW5nMmJ1ZihkYXRhMik7CiAgICB9IGVsc2UgaWYgKHRvU3RyaW5nJDMuY2FsbChkYXRhMikgPT09ICJbb2JqZWN0IEFycmF5QnVmZmVyXSIpIHsKICAgICAgc3RybS5pbnB1dCA9IG5ldyBVaW50OEFycmF5KGRhdGEyKTsKICAgIH0gZWxzZSB7CiAgICAgIHN0cm0uaW5wdXQgPSBkYXRhMjsKICAgIH0KICAgIHN0cm0ubmV4dF9pbiA9IDA7CiAgICBzdHJtLmF2YWlsX2luID0gc3RybS5pbnB1dC5sZW5ndGg7CiAgICBkbyB7CiAgICAgIGlmIChzdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgIHN0cm0ub3V0cHV0ID0gbmV3IHV0aWxzLkJ1ZjgoY2h1bmtTaXplKTsKICAgICAgICBzdHJtLm5leHRfb3V0ID0gMDsKICAgICAgICBzdHJtLmF2YWlsX291dCA9IGNodW5rU2l6ZTsKICAgICAgfQogICAgICBzdGF0dXMgPSB6bGliX2luZmxhdGUuaW5mbGF0ZShzdHJtLCBjLlpfTk9fRkxVU0gpOwogICAgICBpZiAoc3RhdHVzID09PSBjLlpfTkVFRF9ESUNUICYmIGRpY3Rpb25hcnkpIHsKICAgICAgICBzdGF0dXMgPSB6bGliX2luZmxhdGUuaW5mbGF0ZVNldERpY3Rpb25hcnkodGhpcy5zdHJtLCBkaWN0aW9uYXJ5KTsKICAgICAgfQogICAgICBpZiAoc3RhdHVzID09PSBjLlpfQlVGX0VSUk9SICYmIGFsbG93QnVmRXJyb3IgPT09IHRydWUpIHsKICAgICAgICBzdGF0dXMgPSBjLlpfT0s7CiAgICAgICAgYWxsb3dCdWZFcnJvciA9IGZhbHNlOwogICAgICB9CiAgICAgIGlmIChzdGF0dXMgIT09IGMuWl9TVFJFQU1fRU5EICYmIHN0YXR1cyAhPT0gYy5aX09LKSB7CiAgICAgICAgdGhpcy5vbkVuZChzdGF0dXMpOwogICAgICAgIHRoaXMuZW5kZWQgPSB0cnVlOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBpZiAoc3RybS5uZXh0X291dCkgewogICAgICAgIGlmIChzdHJtLmF2YWlsX291dCA9PT0gMCB8fCBzdGF0dXMgPT09IGMuWl9TVFJFQU1fRU5EIHx8IHN0cm0uYXZhaWxfaW4gPT09IDAgJiYgKF9tb2RlID09PSBjLlpfRklOSVNIIHx8IF9tb2RlID09PSBjLlpfU1lOQ19GTFVTSCkpIHsKICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudG8gPT09ICJzdHJpbmciKSB7CiAgICAgICAgICAgIG5leHRfb3V0X3V0ZjggPSBzdHJpbmdzLnV0Zjhib3JkZXIoc3RybS5vdXRwdXQsIHN0cm0ubmV4dF9vdXQpOwogICAgICAgICAgICB0YWlsID0gc3RybS5uZXh0X291dCAtIG5leHRfb3V0X3V0Zjg7CiAgICAgICAgICAgIHV0ZjhzdHIgPSBzdHJpbmdzLmJ1ZjJzdHJpbmcoc3RybS5vdXRwdXQsIG5leHRfb3V0X3V0ZjgpOwogICAgICAgICAgICBzdHJtLm5leHRfb3V0ID0gdGFpbDsKICAgICAgICAgICAgc3RybS5hdmFpbF9vdXQgPSBjaHVua1NpemUgLSB0YWlsOwogICAgICAgICAgICBpZiAodGFpbCkgewogICAgICAgICAgICAgIHV0aWxzLmFycmF5U2V0KHN0cm0ub3V0cHV0LCBzdHJtLm91dHB1dCwgbmV4dF9vdXRfdXRmOCwgdGFpbCwgMCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5vbkRhdGEodXRmOHN0cik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLm9uRGF0YSh1dGlscy5zaHJpbmtCdWYoc3RybS5vdXRwdXQsIHN0cm0ubmV4dF9vdXQpKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKHN0cm0uYXZhaWxfaW4gPT09IDAgJiYgc3RybS5hdmFpbF9vdXQgPT09IDApIHsKICAgICAgICBhbGxvd0J1ZkVycm9yID0gdHJ1ZTsKICAgICAgfQogICAgfSB3aGlsZSAoKHN0cm0uYXZhaWxfaW4gPiAwIHx8IHN0cm0uYXZhaWxfb3V0ID09PSAwKSAmJiBzdGF0dXMgIT09IGMuWl9TVFJFQU1fRU5EKTsKICAgIGlmIChzdGF0dXMgPT09IGMuWl9TVFJFQU1fRU5EKSB7CiAgICAgIF9tb2RlID0gYy5aX0ZJTklTSDsKICAgIH0KICAgIGlmIChfbW9kZSA9PT0gYy5aX0ZJTklTSCkgewogICAgICBzdGF0dXMgPSB6bGliX2luZmxhdGUuaW5mbGF0ZUVuZCh0aGlzLnN0cm0pOwogICAgICB0aGlzLm9uRW5kKHN0YXR1cyk7CiAgICAgIHRoaXMuZW5kZWQgPSB0cnVlOwogICAgICByZXR1cm4gc3RhdHVzID09PSBjLlpfT0s7CiAgICB9CiAgICBpZiAoX21vZGUgPT09IGMuWl9TWU5DX0ZMVVNIKSB7CiAgICAgIHRoaXMub25FbmQoYy5aX09LKTsKICAgICAgc3RybS5hdmFpbF9vdXQgPSAwOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIHJldHVybiB0cnVlOwogIH07CiAgSW5mbGF0ZSQxLnByb3RvdHlwZS5vbkRhdGEgPSBmdW5jdGlvbihjaHVuazIpIHsKICAgIHRoaXMuY2h1bmtzLnB1c2goY2h1bmsyKTsKICB9OwogIEluZmxhdGUkMS5wcm90b3R5cGUub25FbmQgPSBmdW5jdGlvbihzdGF0dXMpIHsKICAgIGlmIChzdGF0dXMgPT09IGMuWl9PSykgewogICAgICBpZiAodGhpcy5vcHRpb25zLnRvID09PSAic3RyaW5nIikgewogICAgICAgIHRoaXMucmVzdWx0ID0gdGhpcy5jaHVua3Muam9pbigiIik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5yZXN1bHQgPSB1dGlscy5mbGF0dGVuQ2h1bmtzKHRoaXMuY2h1bmtzKTsKICAgICAgfQogICAgfQogICAgdGhpcy5jaHVua3MgPSBbXTsKICAgIHRoaXMuZXJyID0gc3RhdHVzOwogICAgdGhpcy5tc2cgPSB0aGlzLnN0cm0ubXNnOwogIH07CiAgZnVuY3Rpb24gaW5mbGF0ZSQxKGlucHV0LCBvcHRpb25zKSB7CiAgICB2YXIgaW5mbGF0b3IgPSBuZXcgSW5mbGF0ZSQxKG9wdGlvbnMpOwogICAgaW5mbGF0b3IucHVzaChpbnB1dCwgdHJ1ZSk7CiAgICBpZiAoaW5mbGF0b3IuZXJyKSB7CiAgICAgIHRocm93IGluZmxhdG9yLm1zZyB8fCBtc2dbaW5mbGF0b3IuZXJyXTsKICAgIH0KICAgIHJldHVybiBpbmZsYXRvci5yZXN1bHQ7CiAgfQogIGZ1bmN0aW9uIGluZmxhdGVSYXcoaW5wdXQsIG9wdGlvbnMpIHsKICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwogICAgb3B0aW9ucy5yYXcgPSB0cnVlOwogICAgcmV0dXJuIGluZmxhdGUkMShpbnB1dCwgb3B0aW9ucyk7CiAgfQogIGluZmxhdGUkNC5JbmZsYXRlID0gSW5mbGF0ZSQxOwogIGluZmxhdGUkNC5pbmZsYXRlID0gaW5mbGF0ZSQxOwogIGluZmxhdGUkNC5pbmZsYXRlUmF3ID0gaW5mbGF0ZVJhdzsKICBpbmZsYXRlJDQudW5nemlwID0gaW5mbGF0ZSQxOwogIHZhciBhc3NpZ24gPSBjb21tb24uYXNzaWduOwogIHZhciBkZWZsYXRlID0gZGVmbGF0ZSQ0OwogIHZhciBpbmZsYXRlID0gaW5mbGF0ZSQ0OwogIHZhciBjb25zdGFudHMkMSA9IGNvbnN0YW50cyQyOwogIHZhciBwYWtvID0ge307CiAgYXNzaWduKHBha28sIGRlZmxhdGUsIGluZmxhdGUsIGNvbnN0YW50cyQxKTsKICB2YXIgcGFrb18xID0gcGFrbzsKICB2YXIgX2ludGVyb3BSZXF1aXJlRGVmYXVsdCQ1ID0gaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmV4cG9ydHM7CiAgdmFyIF9yZWdlbmVyYXRvciQ1ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdCQ1KHJlZ2VuZXJhdG9yKTsKICB2YXIgX2FzeW5jVG9HZW5lcmF0b3IyJDUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0JDUoYXN5bmNUb0dlbmVyYXRvci5leHBvcnRzKTsKICB2YXIgX3JlcXVpcmUkMiA9IHBha29fMSwgWl9TWU5DX0ZMVVNIID0gX3JlcXVpcmUkMi5aX1NZTkNfRkxVU0gsIEluZmxhdGUgPSBfcmVxdWlyZSQyLkluZmxhdGU7CiAgZnVuY3Rpb24gdW56aXAkMihfeCkgewogICAgcmV0dXJuIF91bnppcC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH0KICBmdW5jdGlvbiBfdW56aXAoKSB7CiAgICBfdW56aXAgPSAoMCwgX2FzeW5jVG9HZW5lcmF0b3IyJDUuZGVmYXVsdCkoLyogQF9fUFVSRV9fICovIF9yZWdlbmVyYXRvciQ1LmRlZmF1bHQubWFyayhmdW5jdGlvbiBfY2FsbGVlKGlucHV0RGF0YSkgewogICAgICB2YXIgc3RybSwgcG9zLCBpMiwgY2h1bmtzLCBpbmZsYXRvciwgcmVtYWluaW5nSW5wdXQsIF9pbmZsYXRvciwgcmVzdWx0OwogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yJDUuZGVmYXVsdC53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAwOwogICAgICAgICAgICAgIHBvcyA9IDA7CiAgICAgICAgICAgICAgaTIgPSAwOwogICAgICAgICAgICAgIGNodW5rcyA9IFtdOwogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgcmVtYWluaW5nSW5wdXQgPSBpbnB1dERhdGEuc2xpY2UocG9zKTsKICAgICAgICAgICAgICBpbmZsYXRvciA9IG5ldyBJbmZsYXRlKCk7CiAgICAgICAgICAgICAgX2luZmxhdG9yID0gaW5mbGF0b3I7CiAgICAgICAgICAgICAgc3RybSA9IF9pbmZsYXRvci5zdHJtOwogICAgICAgICAgICAgIGluZmxhdG9yLnB1c2gocmVtYWluaW5nSW5wdXQsIFpfU1lOQ19GTFVTSCk7CiAgICAgICAgICAgICAgaWYgKCFpbmZsYXRvci5lcnIpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoaW5mbGF0b3IubXNnKTsKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBwb3MgKz0gc3RybS5uZXh0X2luOwogICAgICAgICAgICAgIGNodW5rc1tpMl0gPSBCdWZmZXIuZnJvbShpbmZsYXRvci5yZXN1bHQpOwogICAgICAgICAgICAgIGkyICs9IDE7CiAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgaWYgKHN0cm0uYXZhaWxfaW4pIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgIHJlc3VsdCA9IEJ1ZmZlci5jb25jYXQoY2h1bmtzKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCByZXN1bHQpOwogICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxOTsKICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDApOwogICAgICAgICAgICAgIGlmICghX2NvbnRleHQudDAubWVzc2FnZS5tYXRjaCgvaW5jb3JyZWN0IGhlYWRlciBjaGVjay8pKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjM7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJwcm9ibGVtIGRlY29tcHJlc3NpbmcgYmxvY2s6IGluY29ycmVjdCBnemlwIGhlYWRlciBjaGVjayIpOwogICAgICAgICAgICBjYXNlIDIzOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzAsIDE5XV0pOwogICAgfSkpOwogICAgcmV0dXJuIF91bnppcC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH0KICBmdW5jdGlvbiB1bnppcENodW5rJDEoX3gyKSB7CiAgICByZXR1cm4gX3VuemlwQ2h1bmsuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9CiAgZnVuY3Rpb24gX3VuemlwQ2h1bmsoKSB7CiAgICBfdW56aXBDaHVuayA9ICgwLCBfYXN5bmNUb0dlbmVyYXRvcjIkNS5kZWZhdWx0KSgvKiBAX19QVVJFX18gKi8gX3JlZ2VuZXJhdG9yJDUuZGVmYXVsdC5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKGlucHV0RGF0YSkgewogICAgICB2YXIgc3RybSwgY3BvcywgZHBvcywgYmxvY2tzLCBjcG9zaXRpb25zLCBkcG9zaXRpb25zLCByZW1haW5pbmdJbnB1dCwgaW5mbGF0b3IsIF9idWZmZXIsIGJ1ZmZlcjI7CiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3IkNS5kZWZhdWx0LndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMDsKICAgICAgICAgICAgICBjcG9zID0gMDsKICAgICAgICAgICAgICBkcG9zID0gMDsKICAgICAgICAgICAgICBibG9ja3MgPSBbXTsKICAgICAgICAgICAgICBjcG9zaXRpb25zID0gW107CiAgICAgICAgICAgICAgZHBvc2l0aW9ucyA9IFtdOwogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgcmVtYWluaW5nSW5wdXQgPSBpbnB1dERhdGEuc2xpY2UoY3Bvcyk7CiAgICAgICAgICAgICAgaW5mbGF0b3IgPSBuZXcgSW5mbGF0ZSgpOwogICAgICAgICAgICAgIHN0cm0gPSBpbmZsYXRvci5zdHJtOwogICAgICAgICAgICAgIGluZmxhdG9yLnB1c2gocmVtYWluaW5nSW5wdXQsIFpfU1lOQ19GTFVTSCk7CiAgICAgICAgICAgICAgaWYgKCFpbmZsYXRvci5lcnIpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGluZmxhdG9yLm1zZyk7CiAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgX2J1ZmZlciA9IEJ1ZmZlci5mcm9tKGluZmxhdG9yLnJlc3VsdCk7CiAgICAgICAgICAgICAgYmxvY2tzLnB1c2goX2J1ZmZlcik7CiAgICAgICAgICAgICAgY3Bvc2l0aW9ucy5wdXNoKGNwb3MpOwogICAgICAgICAgICAgIGRwb3NpdGlvbnMucHVzaChkcG9zKTsKICAgICAgICAgICAgICBjcG9zICs9IHN0cm0ubmV4dF9pbjsKICAgICAgICAgICAgICBkcG9zICs9IF9idWZmZXIubGVuZ3RoOwogICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgIGlmIChzdHJtLmF2YWlsX2luKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDY7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgYnVmZmVyMiA9IEJ1ZmZlci5jb25jYXQoYmxvY2tzKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgeyBidWZmZXI6IGJ1ZmZlcjIsIGNwb3NpdGlvbnMsIGRwb3NpdGlvbnMgfSk7CiAgICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAyMzsKICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDJbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgaWYgKCFfY29udGV4dDIudDAubWVzc2FnZS5tYXRjaCgvaW5jb3JyZWN0IGhlYWRlciBjaGVjay8pKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI3OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigicHJvYmxlbSBkZWNvbXByZXNzaW5nIGJsb2NrOiBpbmNvcnJlY3QgZ3ppcCBoZWFkZXIgY2hlY2siKTsKICAgICAgICAgICAgY2FzZSAyNzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyLCBudWxsLCBbWzAsIDIzXV0pOwogICAgfSkpOwogICAgcmV0dXJuIF91bnppcENodW5rLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfQogIGZ1bmN0aW9uIHVuemlwQ2h1bmtTbGljZSQxKF94MywgX3g0KSB7CiAgICByZXR1cm4gX3VuemlwQ2h1bmtTbGljZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH0KICBmdW5jdGlvbiBfdW56aXBDaHVua1NsaWNlKCkgewogICAgX3VuemlwQ2h1bmtTbGljZSA9ICgwLCBfYXN5bmNUb0dlbmVyYXRvcjIkNS5kZWZhdWx0KSgvKiBAX19QVVJFX18gKi8gX3JlZ2VuZXJhdG9yJDUuZGVmYXVsdC5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKGlucHV0RGF0YSwgY2h1bmsyKSB7CiAgICAgIHZhciBzdHJtLCBjcG9zLCBkcG9zLCBkZWNvbXByZXNzZWRCbG9ja3MsIGNwb3NpdGlvbnMsIGRwb3NpdGlvbnMsIHJlbWFpbmluZ0lucHV0LCBpbmZsYXRvciwgX2J1ZmZlcjIsIGxlbjIsIG9yaWdDcG9zLCBidWZmZXIyOwogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yJDUuZGVmYXVsdC53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDA7CiAgICAgICAgICAgICAgY3BvcyA9IGNodW5rMi5taW52LmJsb2NrUG9zaXRpb247CiAgICAgICAgICAgICAgZHBvcyA9IGNodW5rMi5taW52LmRhdGFQb3NpdGlvbjsKICAgICAgICAgICAgICBkZWNvbXByZXNzZWRCbG9ja3MgPSBbXTsKICAgICAgICAgICAgICBjcG9zaXRpb25zID0gW107CiAgICAgICAgICAgICAgZHBvc2l0aW9ucyA9IFtdOwogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgcmVtYWluaW5nSW5wdXQgPSBpbnB1dERhdGEuc2xpY2UoY3BvcyAtIGNodW5rMi5taW52LmJsb2NrUG9zaXRpb24pOwogICAgICAgICAgICAgIGluZmxhdG9yID0gbmV3IEluZmxhdGUoKTsKICAgICAgICAgICAgICBzdHJtID0gaW5mbGF0b3Iuc3RybTsKICAgICAgICAgICAgICBpbmZsYXRvci5wdXNoKHJlbWFpbmluZ0lucHV0LCBaX1NZTkNfRkxVU0gpOwogICAgICAgICAgICAgIGlmICghaW5mbGF0b3IuZXJyKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihpbmZsYXRvci5tc2cpOwogICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIF9idWZmZXIyID0gQnVmZmVyLmZyb20oaW5mbGF0b3IucmVzdWx0KTsKICAgICAgICAgICAgICBkZWNvbXByZXNzZWRCbG9ja3MucHVzaChfYnVmZmVyMik7CiAgICAgICAgICAgICAgbGVuMiA9IF9idWZmZXIyLmxlbmd0aDsKICAgICAgICAgICAgICBjcG9zaXRpb25zLnB1c2goY3Bvcyk7CiAgICAgICAgICAgICAgZHBvc2l0aW9ucy5wdXNoKGRwb3MpOwogICAgICAgICAgICAgIGlmIChkZWNvbXByZXNzZWRCbG9ja3MubGVuZ3RoID09PSAxICYmIGNodW5rMi5taW52LmRhdGFQb3NpdGlvbikgewogICAgICAgICAgICAgICAgZGVjb21wcmVzc2VkQmxvY2tzWzBdID0gZGVjb21wcmVzc2VkQmxvY2tzWzBdLnNsaWNlKGNodW5rMi5taW52LmRhdGFQb3NpdGlvbik7CiAgICAgICAgICAgICAgICBsZW4yID0gZGVjb21wcmVzc2VkQmxvY2tzWzBdLmxlbmd0aDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgb3JpZ0Nwb3MgPSBjcG9zOwogICAgICAgICAgICAgIGNwb3MgKz0gc3RybS5uZXh0X2luOwogICAgICAgICAgICAgIGRwb3MgKz0gbGVuMjsKICAgICAgICAgICAgICBpZiAoIShvcmlnQ3BvcyA+PSBjaHVuazIubWF4di5ibG9ja1Bvc2l0aW9uKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyNjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBkZWNvbXByZXNzZWRCbG9ja3NbZGVjb21wcmVzc2VkQmxvY2tzLmxlbmd0aCAtIDFdID0gZGVjb21wcmVzc2VkQmxvY2tzW2RlY29tcHJlc3NlZEJsb2Nrcy5sZW5ndGggLSAxXS5zbGljZSgwLCBjaHVuazIubWF4di5ibG9ja1Bvc2l0aW9uID09PSBjaHVuazIubWludi5ibG9ja1Bvc2l0aW9uID8gY2h1bmsyLm1heHYuZGF0YVBvc2l0aW9uIC0gY2h1bmsyLm1pbnYuZGF0YVBvc2l0aW9uICsgMSA6IGNodW5rMi5tYXh2LmRhdGFQb3NpdGlvbiArIDEpOwogICAgICAgICAgICAgIGNwb3NpdGlvbnMucHVzaChjcG9zKTsKICAgICAgICAgICAgICBkcG9zaXRpb25zLnB1c2goZHBvcyk7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoImJyZWFrIiwgMjcpOwogICAgICAgICAgICBjYXNlIDI2OgogICAgICAgICAgICAgIGlmIChzdHJtLmF2YWlsX2luKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDY7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIGNhc2UgMjc6CiAgICAgICAgICAgICAgYnVmZmVyMiA9IEJ1ZmZlci5jb25jYXQoZGVjb21wcmVzc2VkQmxvY2tzKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgeyBidWZmZXI6IGJ1ZmZlcjIsIGNwb3NpdGlvbnMsIGRwb3NpdGlvbnMgfSk7CiAgICAgICAgICAgIGNhc2UgMzE6CiAgICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSAzMTsKICAgICAgICAgICAgICBfY29udGV4dDMudDAgPSBfY29udGV4dDNbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgaWYgKCFfY29udGV4dDMudDAubWVzc2FnZS5tYXRjaCgvaW5jb3JyZWN0IGhlYWRlciBjaGVjay8pKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM1OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigicHJvYmxlbSBkZWNvbXByZXNzaW5nIGJsb2NrOiBpbmNvcnJlY3QgZ3ppcCBoZWFkZXIgY2hlY2siKTsKICAgICAgICAgICAgY2FzZSAzNToKICAgICAgICAgICAgICB0aHJvdyBfY29udGV4dDMudDA7CiAgICAgICAgICAgIGNhc2UgMzY6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMywgbnVsbCwgW1swLCAzMV1dKTsKICAgIH0pKTsKICAgIHJldHVybiBfdW56aXBDaHVua1NsaWNlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfQogIHZhciB1bnppcFBha28gPSB7CiAgICB1bnppcDogdW56aXAkMiwKICAgIHVuemlwQ2h1bms6IHVuemlwQ2h1bmskMSwKICAgIHVuemlwQ2h1bmtTbGljZTogdW56aXBDaHVua1NsaWNlJDEsCiAgICBwYWtvVW56aXA6IHVuemlwJDIsCiAgICBub2RlVW56aXA6IGZ1bmN0aW9uIG5vZGVVbnppcCgpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCJub2RlVW56aXAgbm90IGltcGxlbWVudGVkLiIpOwogICAgfQogIH07CiAgdmFyIF9fdml0ZUJyb3dzZXJFeHRlcm5hbCA9IG5ldyBQcm94eSh7fSwgewogICAgZ2V0KCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ01vZHVsZSAiIiBoYXMgYmVlbiBleHRlcm5hbGl6ZWQgZm9yIGJyb3dzZXIgY29tcGF0aWJpbGl0eSBhbmQgY2Fubm90IGJlIGFjY2Vzc2VkIGluIGNsaWVudCBjb2RlLicpOwogICAgfQogIH0pOwogIHZhciBfX3ZpdGVCcm93c2VyRXh0ZXJuYWwkMSA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuZnJlZXplKHsKICAgIF9fcHJvdG9fXzogbnVsbCwKICAgICJkZWZhdWx0IjogX192aXRlQnJvd3NlckV4dGVybmFsCiAgfSk7CiAgdmFyIHJlcXVpcmUkJDEgPSAvKiBAX19QVVJFX18gKi8gZ2V0QXVnbWVudGVkTmFtZXNwYWNlKF9fdml0ZUJyb3dzZXJFeHRlcm5hbCQxKTsKICB2YXIgX2ludGVyb3BSZXF1aXJlRGVmYXVsdCQ0ID0gaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmV4cG9ydHM7CiAgdmFyIF9yZWdlbmVyYXRvciQ0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdCQ0KHJlZ2VuZXJhdG9yKTsKICB2YXIgX2FzeW5jVG9HZW5lcmF0b3IyJDQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0JDQoYXN5bmNUb0dlbmVyYXRvci5leHBvcnRzKTsKICB2YXIgX2NsYXNzQ2FsbENoZWNrMiQ0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdCQ0KGNsYXNzQ2FsbENoZWNrLmV4cG9ydHMpOwogIHZhciBfY3JlYXRlQ2xhc3MyJDQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0JDQoY3JlYXRlQ2xhc3MuZXhwb3J0cyk7CiAgdmFyIGZzID0gcmVxdWlyZSQkMTsKICB2YXIgTG9jYWxGaWxlJDIgPSAvKiBAX19QVVJFX18gKi8gZnVuY3Rpb24oKSB7CiAgICBmdW5jdGlvbiBMb2NhbEZpbGUyKHBhdGgyKSB7CiAgICAgICgwLCBfY2xhc3NDYWxsQ2hlY2syJDQuZGVmYXVsdCkodGhpcywgTG9jYWxGaWxlMik7CiAgICAgIHRoaXMuZmRQcm9taXNlID0gZnMub3BlbihwYXRoMiwgInIiKTsKICAgICAgdGhpcy5wYXRoID0gcGF0aDI7CiAgICB9CiAgICAoMCwgX2NyZWF0ZUNsYXNzMiQ0LmRlZmF1bHQpKExvY2FsRmlsZTIsIFt7IGtleTogInJlYWQiLCB2YWx1ZTogZnVuY3Rpb24oKSB7CiAgICAgIHZhciBfcmVhZCA9ICgwLCBfYXN5bmNUb0dlbmVyYXRvcjIkNC5kZWZhdWx0KSgvKiBAX19QVVJFX18gKi8gX3JlZ2VuZXJhdG9yJDQuZGVmYXVsdC5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoYnVmLCBvZmZzZXQsIGxlbmd0aCwgcG9zaXRpb24pIHsKICAgICAgICB2YXIgZmQsIHJldDsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yJDQuZGVmYXVsdC53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mZFByb21pc2U7CiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgZmQgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gZnMucmVhZChmZCwgYnVmLCBvZmZzZXQsIGxlbmd0aCwgcG9zaXRpb24pOwogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIHJldCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCByZXQpOwogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIHRoaXMpOwogICAgICB9KSk7CiAgICAgIGZ1bmN0aW9uIHJlYWQoX3gsIF94MiwgX3gzLCBfeDQpIHsKICAgICAgICByZXR1cm4gX3JlYWQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQogICAgICByZXR1cm4gcmVhZDsKICAgIH0oKSB9LCB7IGtleTogInN0YXQiLCB2YWx1ZTogZnVuY3Rpb24oKSB7CiAgICAgIHZhciBfc3RhdCA9ICgwLCBfYXN5bmNUb0dlbmVyYXRvcjIkNC5kZWZhdWx0KSgvKiBAX19QVVJFX18gKi8gX3JlZ2VuZXJhdG9yJDQuZGVmYXVsdC5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBmZDsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yJDQuZGVmYXVsdC53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZkUHJvbWlzZTsKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBmZCA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIGZzLmZzdGF0KGZkKSk7CiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCB0aGlzKTsKICAgICAgfSkpOwogICAgICBmdW5jdGlvbiBzdGF0KCkgewogICAgICAgIHJldHVybiBfc3RhdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CiAgICAgIHJldHVybiBzdGF0OwogICAgfSgpIH1dKTsKICAgIHJldHVybiBMb2NhbEZpbGUyOwogIH0oKTsKICB2YXIgbG9jYWxGaWxlID0gTG9jYWxGaWxlJDI7CiAgdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQkMyA9IGludGVyb3BSZXF1aXJlRGVmYXVsdC5leHBvcnRzOwogIHZhciBfcmVnZW5lcmF0b3IkMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQkMyhyZWdlbmVyYXRvcik7CiAgdmFyIF9hc3luY1RvR2VuZXJhdG9yMiQzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdCQzKGFzeW5jVG9HZW5lcmF0b3IuZXhwb3J0cyk7CiAgdmFyIF9jbGFzc0NhbGxDaGVjazIkMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQkMyhjbGFzc0NhbGxDaGVjay5leHBvcnRzKTsKICB2YXIgX2NyZWF0ZUNsYXNzMiQzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdCQzKGNyZWF0ZUNsYXNzLmV4cG9ydHMpOwogIHZhciBMb25nID0gbG9uZzsKICB2YXIgTG9jYWxGaWxlJDEgPSBsb2NhbEZpbGU7CiAgdmFyIFVOQ09NUFJFU1NFRF9QT1NJVElPTiA9IDE7CiAgdmFyIEd6aUluZGV4JDEgPSAvKiBAX19QVVJFX18gKi8gZnVuY3Rpb24oKSB7CiAgICBmdW5jdGlvbiBHemlJbmRleDIoX3JlZikgewogICAgICB2YXIgZmlsZWhhbmRsZTIgPSBfcmVmLmZpbGVoYW5kbGUsIHBhdGgyID0gX3JlZi5wYXRoOwogICAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMiQzLmRlZmF1bHQpKHRoaXMsIEd6aUluZGV4Mik7CiAgICAgIGlmIChmaWxlaGFuZGxlMikKICAgICAgICB0aGlzLmZpbGVoYW5kbGUgPSBmaWxlaGFuZGxlMjsKICAgICAgZWxzZSBpZiAocGF0aDIpCiAgICAgICAgdGhpcy5maWxlaGFuZGxlID0gbmV3IExvY2FsRmlsZSQxKHBhdGgyKTsKICAgICAgZWxzZQogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoImVpdGhlciBmaWxlaGFuZGxlIG9yIHBhdGggbXVzdCBiZSBkZWZpbmVkIik7CiAgICB9CiAgICAoMCwgX2NyZWF0ZUNsYXNzMiQzLmRlZmF1bHQpKEd6aUluZGV4MiwgW3sga2V5OiAiX3JlYWRMb25nV2l0aE92ZXJmbG93IiwgdmFsdWU6IGZ1bmN0aW9uIF9yZWFkTG9uZ1dpdGhPdmVyZmxvdyhidWYpIHsKICAgICAgdmFyIG9mZnNldCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdm9pZCAwID8gYXJndW1lbnRzWzFdIDogMDsKICAgICAgdmFyIHVuc2lnbmVkID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB2b2lkIDAgPyBhcmd1bWVudHNbMl0gOiB0cnVlOwogICAgICB2YXIgbG9uZzIgPSBMb25nLmZyb21CeXRlc0xFKGJ1Zi5zbGljZShvZmZzZXQsIG9mZnNldCArIDgpLCB1bnNpZ25lZCk7CiAgICAgIGlmIChsb25nMi5ncmVhdGVyVGhhbihOdW1iZXIuTUFYX1NBRkVfSU5URUdFUikgfHwgbG9uZzIubGVzc1RoYW4oTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIpKQogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoImludGVnZXIgb3ZlcmZsb3ciKTsKICAgICAgcmV0dXJuIGxvbmcyLnRvTnVtYmVyKCk7CiAgICB9IH0sIHsga2V5OiAiX2dldEluZGV4IiwgdmFsdWU6IGZ1bmN0aW9uIF9nZXRJbmRleCgpIHsKICAgICAgaWYgKCF0aGlzLmluZGV4KQogICAgICAgIHRoaXMuaW5kZXggPSB0aGlzLl9yZWFkSW5kZXgoKTsKICAgICAgcmV0dXJuIHRoaXMuaW5kZXg7CiAgICB9IH0sIHsKICAgICAga2V5OiAiX3JlYWRJbmRleCIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbigpIHsKICAgICAgICB2YXIgX3JlYWRJbmRleDIgPSAoMCwgX2FzeW5jVG9HZW5lcmF0b3IyJDMuZGVmYXVsdCkoLyogQF9fUFVSRV9fICovIF9yZWdlbmVyYXRvciQzLmRlZmF1bHQubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgICAgdmFyIGJ1ZiwgbnVtRW50cmllcywgZW50cmllczIsIGJ1ZlNpemUsIGVudHJ5TnVtYmVyLCBjb21wcmVzc2VkUG9zaXRpb24sIHVuY29tcHJlc3NlZFBvc2l0aW9uOwogICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvciQzLmRlZmF1bHQud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgYnVmID0gQnVmZmVyLmFsbG9jVW5zYWZlKDgpOwogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmlsZWhhbmRsZS5yZWFkKGJ1ZiwgMCwgOCwgMCk7CiAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgIG51bUVudHJpZXMgPSB0aGlzLl9yZWFkTG9uZ1dpdGhPdmVyZmxvdyhidWYsIDAsIHRydWUpOwogICAgICAgICAgICAgICAgICBpZiAobnVtRW50cmllcykgewogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIFtbMCwgMF1dKTsKICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgZW50cmllczIgPSBuZXcgQXJyYXkobnVtRW50cmllcyArIDEpOwogICAgICAgICAgICAgICAgICBlbnRyaWVzMlswXSA9IFswLCAwXTsKICAgICAgICAgICAgICAgICAgYnVmU2l6ZSA9IDggKiAyICogbnVtRW50cmllczsKICAgICAgICAgICAgICAgICAgaWYgKCEoYnVmU2l6ZSA+IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSKSkgewogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJpbnRlZ2VyIG92ZXJmbG93Iik7CiAgICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgICBidWYgPSBCdWZmZXIuYWxsb2NVbnNhZmUoYnVmU2l6ZSk7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNDsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmlsZWhhbmRsZS5yZWFkKGJ1ZiwgMCwgYnVmU2l6ZSwgOCk7CiAgICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgICBmb3IgKGVudHJ5TnVtYmVyID0gMDsgZW50cnlOdW1iZXIgPCBudW1FbnRyaWVzOyBlbnRyeU51bWJlciArPSAxKSB7CiAgICAgICAgICAgICAgICAgICAgY29tcHJlc3NlZFBvc2l0aW9uID0gdGhpcy5fcmVhZExvbmdXaXRoT3ZlcmZsb3coYnVmLCBlbnRyeU51bWJlciAqIDE2KTsKICAgICAgICAgICAgICAgICAgICB1bmNvbXByZXNzZWRQb3NpdGlvbiA9IHRoaXMuX3JlYWRMb25nV2l0aE92ZXJmbG93KGJ1ZiwgZW50cnlOdW1iZXIgKiAxNiArIDgpOwogICAgICAgICAgICAgICAgICAgIGVudHJpZXMyW2VudHJ5TnVtYmVyICsgMV0gPSBbY29tcHJlc3NlZFBvc2l0aW9uLCB1bmNvbXByZXNzZWRQb3NpdGlvbl07CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgZW50cmllczIpOwogICAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlLCB0aGlzKTsKICAgICAgICB9KSk7CiAgICAgICAgZnVuY3Rpb24gX3JlYWRJbmRleCgpIHsKICAgICAgICAgIHJldHVybiBfcmVhZEluZGV4Mi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gX3JlYWRJbmRleDsKICAgICAgfSgpCiAgICB9LCB7CiAgICAgIGtleTogImdldExhc3RCbG9jayIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbigpIHsKICAgICAgICB2YXIgX2dldExhc3RCbG9jayA9ICgwLCBfYXN5bmNUb0dlbmVyYXRvcjIkMy5kZWZhdWx0KSgvKiBAX19QVVJFX18gKi8gX3JlZ2VuZXJhdG9yJDMuZGVmYXVsdC5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgICAgdmFyIGVudHJpZXMyOwogICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvciQzLmRlZmF1bHQud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dldEluZGV4KCk7CiAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgIGVudHJpZXMyID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICAgIGlmIChlbnRyaWVzMi5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIHZvaWQgMCk7CiAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBlbnRyaWVzMltlbnRyaWVzMi5sZW5ndGggLSAxXSk7CiAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWUyLCB0aGlzKTsKICAgICAgICB9KSk7CiAgICAgICAgZnVuY3Rpb24gZ2V0TGFzdEJsb2NrKCkgewogICAgICAgICAgcmV0dXJuIF9nZXRMYXN0QmxvY2suYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGdldExhc3RCbG9jazsKICAgICAgfSgpCiAgICB9LCB7CiAgICAgIGtleTogImdldFJlbGV2YW50QmxvY2tzRm9yUmVhZCIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbigpIHsKICAgICAgICB2YXIgX2dldFJlbGV2YW50QmxvY2tzRm9yUmVhZCA9ICgwLCBfYXN5bmNUb0dlbmVyYXRvcjIkMy5kZWZhdWx0KSgvKiBAX19QVVJFX18gKi8gX3JlZ2VuZXJhdG9yJDMuZGVmYXVsdC5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKGxlbmd0aCwgcG9zaXRpb24pIHsKICAgICAgICAgIHZhciBlbmRQb3NpdGlvbiwgZW50cmllczIsIHJlbGV2YW50LCBjb21wYXJlLCBsb3dlckJvdW5kLCB1cHBlckJvdW5kLCBzZWFyY2hQb3NpdGlvbiwgY29tcGFyaXNvbiwgaTI7CiAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yJDMuZGVmYXVsdC53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgZW5kUG9zaXRpb24gPSBwb3NpdGlvbiArIGxlbmd0aDsKICAgICAgICAgICAgICAgICAgaWYgKCEobGVuZ3RoID09PSAwKSkgewogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgW10pOwogICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRJbmRleCgpOwogICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICBlbnRyaWVzMiA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgICAgICByZWxldmFudCA9IFtdOwogICAgICAgICAgICAgICAgICBjb21wYXJlID0gZnVuY3Rpb24gY29tcGFyZTIoZW50cnksIG5leHRFbnRyeSkgewogICAgICAgICAgICAgICAgICAgIHZhciB1bmNvbXByZXNzZWRQb3NpdGlvbiA9IGVudHJ5W1VOQ09NUFJFU1NFRF9QT1NJVElPTl07CiAgICAgICAgICAgICAgICAgICAgdmFyIG5leHRVbmNvbXByZXNzZWRQb3NpdGlvbiA9IG5leHRFbnRyeSA/IG5leHRFbnRyeVtVTkNPTVBSRVNTRURfUE9TSVRJT05dIDogSW5maW5pdHk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHVuY29tcHJlc3NlZFBvc2l0aW9uIDw9IHBvc2l0aW9uICYmIG5leHRVbmNvbXByZXNzZWRQb3NpdGlvbiA+IHBvc2l0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKHVuY29tcHJlc3NlZFBvc2l0aW9uIDwgcG9zaXRpb24pIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7CiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIGxvd2VyQm91bmQgPSAwOwogICAgICAgICAgICAgICAgICB1cHBlckJvdW5kID0gZW50cmllczIubGVuZ3RoIC0gMTsKICAgICAgICAgICAgICAgICAgc2VhcmNoUG9zaXRpb24gPSBNYXRoLmZsb29yKGVudHJpZXMyLmxlbmd0aCAvIDIpOwogICAgICAgICAgICAgICAgICBjb21wYXJpc29uID0gY29tcGFyZShlbnRyaWVzMltzZWFyY2hQb3NpdGlvbl0sIGVudHJpZXMyW3NlYXJjaFBvc2l0aW9uICsgMV0pOwogICAgICAgICAgICAgICAgICB3aGlsZSAoY29tcGFyaXNvbiAhPT0gMCkgewogICAgICAgICAgICAgICAgICAgIGlmIChjb21wYXJpc29uID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgdXBwZXJCb3VuZCA9IHNlYXJjaFBvc2l0aW9uIC0gMTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvbXBhcmlzb24gPCAwKSB7CiAgICAgICAgICAgICAgICAgICAgICBsb3dlckJvdW5kID0gc2VhcmNoUG9zaXRpb24gKyAxOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBzZWFyY2hQb3NpdGlvbiA9IE1hdGguY2VpbCgodXBwZXJCb3VuZCAtIGxvd2VyQm91bmQpIC8gMikgKyBsb3dlckJvdW5kOwogICAgICAgICAgICAgICAgICAgIGNvbXBhcmlzb24gPSBjb21wYXJlKGVudHJpZXMyW3NlYXJjaFBvc2l0aW9uXSwgZW50cmllczJbc2VhcmNoUG9zaXRpb24gKyAxXSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgcmVsZXZhbnQucHVzaChlbnRyaWVzMltzZWFyY2hQb3NpdGlvbl0pOwogICAgICAgICAgICAgICAgICBpMiA9IHNlYXJjaFBvc2l0aW9uICsgMTsKICAgICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICAgIGlmICghKGkyIDwgZW50cmllczIubGVuZ3RoKSkgewogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjI7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgcmVsZXZhbnQucHVzaChlbnRyaWVzMltpMl0pOwogICAgICAgICAgICAgICAgICBpZiAoIShlbnRyaWVzMltpMl1bVU5DT01QUkVTU0VEX1BPU0lUSU9OXSA+PSBlbmRQb3NpdGlvbikpIHsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDE5OwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJicmVhayIsIDIyKTsKICAgICAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgICAgIGkyICs9IDE7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgICAgICAgaWYgKHJlbGV2YW50W3JlbGV2YW50Lmxlbmd0aCAtIDFdW1VOQ09NUFJFU1NFRF9QT1NJVElPTl0gPCBlbmRQb3NpdGlvbikgewogICAgICAgICAgICAgICAgICAgIHJlbGV2YW50LnB1c2goW10pOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCByZWxldmFudCk7CiAgICAgICAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlMywgdGhpcyk7CiAgICAgICAgfSkpOwogICAgICAgIGZ1bmN0aW9uIGdldFJlbGV2YW50QmxvY2tzRm9yUmVhZChfeCwgX3gyKSB7CiAgICAgICAgICByZXR1cm4gX2dldFJlbGV2YW50QmxvY2tzRm9yUmVhZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZ2V0UmVsZXZhbnRCbG9ja3NGb3JSZWFkOwogICAgICB9KCkKICAgIH1dKTsKICAgIHJldHVybiBHemlJbmRleDI7CiAgfSgpOwogIHZhciBnemlJbmRleCA9IEd6aUluZGV4JDE7CiAgdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQkMiA9IGludGVyb3BSZXF1aXJlRGVmYXVsdC5leHBvcnRzOwogIHZhciBfc2xpY2VkVG9BcnJheTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0JDIoc2xpY2VkVG9BcnJheS5leHBvcnRzKTsKICB2YXIgX3JlZ2VuZXJhdG9yJDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0JDIocmVnZW5lcmF0b3IpOwogIHZhciBfYXN5bmNUb0dlbmVyYXRvcjIkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQkMihhc3luY1RvR2VuZXJhdG9yLmV4cG9ydHMpOwogIHZhciBfY2xhc3NDYWxsQ2hlY2syJDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0JDIoY2xhc3NDYWxsQ2hlY2suZXhwb3J0cyk7CiAgdmFyIF9jcmVhdGVDbGFzczIkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQkMihjcmVhdGVDbGFzcy5leHBvcnRzKTsKICB2YXIgX3JlcXVpcmUkMSA9IHVuemlwUGFrbywgdW56aXAkMSA9IF9yZXF1aXJlJDEudW56aXA7CiAgdmFyIExvY2FsRmlsZSA9IGxvY2FsRmlsZTsKICB2YXIgR3ppSW5kZXggPSBnemlJbmRleDsKICB2YXIgQmd6RmlsZWhhbmRsZSA9IC8qIEBfX1BVUkVfXyAqLyBmdW5jdGlvbigpIHsKICAgIGZ1bmN0aW9uIEJnekZpbGVoYW5kbGUyKF9yZWYpIHsKICAgICAgdmFyIGZpbGVoYW5kbGUyID0gX3JlZi5maWxlaGFuZGxlLCBwYXRoMiA9IF9yZWYucGF0aCwgZ3ppRmlsZWhhbmRsZSA9IF9yZWYuZ3ppRmlsZWhhbmRsZSwgZ3ppUGF0aCA9IF9yZWYuZ3ppUGF0aDsKICAgICAgKDAsIF9jbGFzc0NhbGxDaGVjazIkMi5kZWZhdWx0KSh0aGlzLCBCZ3pGaWxlaGFuZGxlMik7CiAgICAgIGlmIChmaWxlaGFuZGxlMikKICAgICAgICB0aGlzLmZpbGVoYW5kbGUgPSBmaWxlaGFuZGxlMjsKICAgICAgZWxzZSBpZiAocGF0aDIpCiAgICAgICAgdGhpcy5maWxlaGFuZGxlID0gbmV3IExvY2FsRmlsZShwYXRoMik7CiAgICAgIGVsc2UKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJlaXRoZXIgZmlsZWhhbmRsZSBvciBwYXRoIG11c3QgYmUgZGVmaW5lZCIpOwogICAgICBpZiAoIWd6aUZpbGVoYW5kbGUgJiYgIWd6aVBhdGggJiYgIXBhdGgyKQogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoImVpdGhlciBnemlGaWxlaGFuZGxlIG9yIGd6aVBhdGggbXVzdCBiZSBkZWZpbmVkIik7CiAgICAgIHRoaXMuZ3ppID0gbmV3IEd6aUluZGV4KHsKICAgICAgICBmaWxlaGFuZGxlOiBnemlGaWxlaGFuZGxlLAogICAgICAgIHBhdGg6ICFnemlGaWxlaGFuZGxlICYmICFnemlQYXRoICYmIHBhdGgyID8gZ3ppUGF0aCA6ICIiLmNvbmNhdChwYXRoMiwgIi5nemkiKQogICAgICB9KTsKICAgIH0KICAgICgwLCBfY3JlYXRlQ2xhc3MyJDIuZGVmYXVsdCkoQmd6RmlsZWhhbmRsZTIsIFt7IGtleTogInN0YXQiLCB2YWx1ZTogZnVuY3Rpb24oKSB7CiAgICAgIHZhciBfc3RhdCA9ICgwLCBfYXN5bmNUb0dlbmVyYXRvcjIkMi5kZWZhdWx0KSgvKiBAX19QVVJFX18gKi8gX3JlZ2VuZXJhdG9yJDIuZGVmYXVsdC5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIGNvbXByZXNzZWRTdGF0OwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3IkMi5kZWZhdWx0LndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbGVoYW5kbGUuc3RhdCgpOwogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIGNvbXByZXNzZWRTdGF0ID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gT2JqZWN0OwogICAgICAgICAgICAgICAgX2NvbnRleHQudDEgPSBjb21wcmVzc2VkU3RhdDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VW5jb21wcmVzc2VkRmlsZVNpemUoKTsKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBfY29udGV4dC50MiA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MyA9IHZvaWQgMDsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQ0ID0gdm9pZCAwOwogICAgICAgICAgICAgICAgX2NvbnRleHQudDUgPSB7IHNpemU6IF9jb250ZXh0LnQyLCBibG9ja3M6IF9jb250ZXh0LnQzLCBibGtzaXplOiBfY29udGV4dC50NCB9OwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQudDAuYXNzaWduLmNhbGwoX2NvbnRleHQudDAsIF9jb250ZXh0LnQxLCBfY29udGV4dC50NSkpOwogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCB0aGlzKTsKICAgICAgfSkpOwogICAgICBmdW5jdGlvbiBzdGF0KCkgewogICAgICAgIHJldHVybiBfc3RhdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CiAgICAgIHJldHVybiBzdGF0OwogICAgfSgpIH0sIHsga2V5OiAiZ2V0VW5jb21wcmVzc2VkRmlsZVNpemUiLCB2YWx1ZTogZnVuY3Rpb24oKSB7CiAgICAgIHZhciBfZ2V0VW5jb21wcmVzc2VkRmlsZVNpemUgPSAoMCwgX2FzeW5jVG9HZW5lcmF0b3IyJDIuZGVmYXVsdCkoLyogQF9fUFVSRV9fICovIF9yZWdlbmVyYXRvciQyLmRlZmF1bHQubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgX3JlZjIsIF9yZWYzLCB1bmNvbXByZXNzZWRQb3NpdGlvbiwgX3JlZjQsIHNpemUsIGJ1ZiwgX3JlZjUsIGJ5dGVzUmVhZCwgbGFzdEJsb2NrVW5jb21wcmVzc2VkU2l6ZTsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yJDIuZGVmYXVsdC53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmd6aS5nZXRMYXN0QmxvY2soKTsKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBfcmVmMiA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgX3JlZjMgPSAoMCwgX3NsaWNlZFRvQXJyYXkyLmRlZmF1bHQpKF9yZWYyLCAyKTsKICAgICAgICAgICAgICAgIHVuY29tcHJlc3NlZFBvc2l0aW9uID0gX3JlZjNbMV07CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDc7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5maWxlaGFuZGxlLnN0YXQoKTsKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBfcmVmNCA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgc2l6ZSA9IF9yZWY0LnNpemU7CiAgICAgICAgICAgICAgICBidWYgPSBCdWZmZXIuYWxsb2NVbnNhZmUoNCk7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmlsZWhhbmRsZS5yZWFkKGJ1ZiwgMCwgNCwgc2l6ZSAtIDI4IC0gNCk7CiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgIF9yZWY1ID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICBieXRlc1JlYWQgPSBfcmVmNS5ieXRlc1JlYWQ7CiAgICAgICAgICAgICAgICBpZiAoIShieXRlc1JlYWQgIT09IDQpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTY7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJyZWFkIGVycm9yIik7CiAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICAgIGxhc3RCbG9ja1VuY29tcHJlc3NlZFNpemUgPSBidWYucmVhZFVJbnQzMkxFKDApOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIHVuY29tcHJlc3NlZFBvc2l0aW9uICsgbGFzdEJsb2NrVW5jb21wcmVzc2VkU2l6ZSk7CiAgICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMiwgdGhpcyk7CiAgICAgIH0pKTsKICAgICAgZnVuY3Rpb24gZ2V0VW5jb21wcmVzc2VkRmlsZVNpemUoKSB7CiAgICAgICAgcmV0dXJuIF9nZXRVbmNvbXByZXNzZWRGaWxlU2l6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CiAgICAgIHJldHVybiBnZXRVbmNvbXByZXNzZWRGaWxlU2l6ZTsKICAgIH0oKSB9LCB7IGtleTogIl9yZWFkQW5kVW5jb21wcmVzc0Jsb2NrIiwgdmFsdWU6IGZ1bmN0aW9uKCkgewogICAgICB2YXIgX3JlYWRBbmRVbmNvbXByZXNzQmxvY2syID0gKDAsIF9hc3luY1RvR2VuZXJhdG9yMiQyLmRlZmF1bHQpKC8qIEBfX1BVUkVfXyAqLyBfcmVnZW5lcmF0b3IkMi5kZWZhdWx0Lm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoYmxvY2tCdWZmZXIsIF9yZWY2LCBfcmVmNykgewogICAgICAgIHZhciBfcmVmOCwgY29tcHJlc3NlZFBvc2l0aW9uLCBfcmVmOSwgbmV4dENvbXByZXNzZWRQb3NpdGlvbiwgbmV4dCwgYmxvY2tDb21wcmVzc2VkTGVuZ3RoLCB1bnppcHBlZEJ1ZmZlcjsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yJDIuZGVmYXVsdC53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9yZWY4ID0gKDAsIF9zbGljZWRUb0FycmF5Mi5kZWZhdWx0KShfcmVmNiwgMSksIGNvbXByZXNzZWRQb3NpdGlvbiA9IF9yZWY4WzBdOwogICAgICAgICAgICAgICAgX3JlZjkgPSAoMCwgX3NsaWNlZFRvQXJyYXkyLmRlZmF1bHQpKF9yZWY3LCAxKSwgbmV4dENvbXByZXNzZWRQb3NpdGlvbiA9IF9yZWY5WzBdOwogICAgICAgICAgICAgICAgbmV4dCA9IG5leHRDb21wcmVzc2VkUG9zaXRpb247CiAgICAgICAgICAgICAgICBpZiAobmV4dCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA2OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmlsZWhhbmRsZS5zdGF0KCk7CiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgbmV4dCA9IF9jb250ZXh0My5zZW50LnNpemU7CiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgYmxvY2tDb21wcmVzc2VkTGVuZ3RoID0gbmV4dCAtIGNvbXByZXNzZWRQb3NpdGlvbjsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5maWxlaGFuZGxlLnJlYWQoYmxvY2tCdWZmZXIsIDAsIGJsb2NrQ29tcHJlc3NlZExlbmd0aCwgY29tcHJlc3NlZFBvc2l0aW9uKTsKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMjsKICAgICAgICAgICAgICAgIHJldHVybiB1bnppcCQxKGJsb2NrQnVmZmVyLnNsaWNlKDAsIGJsb2NrQ29tcHJlc3NlZExlbmd0aCkpOwogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICB1bnppcHBlZEJ1ZmZlciA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIHVuemlwcGVkQnVmZmVyKTsKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzLCB0aGlzKTsKICAgICAgfSkpOwogICAgICBmdW5jdGlvbiBfcmVhZEFuZFVuY29tcHJlc3NCbG9jayhfeCwgX3gyLCBfeDMpIHsKICAgICAgICByZXR1cm4gX3JlYWRBbmRVbmNvbXByZXNzQmxvY2syLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KICAgICAgcmV0dXJuIF9yZWFkQW5kVW5jb21wcmVzc0Jsb2NrOwogICAgfSgpIH0sIHsga2V5OiAicmVhZCIsIHZhbHVlOiBmdW5jdGlvbigpIHsKICAgICAgdmFyIF9yZWFkID0gKDAsIF9hc3luY1RvR2VuZXJhdG9yMiQyLmRlZmF1bHQpKC8qIEBfX1BVUkVfXyAqLyBfcmVnZW5lcmF0b3IkMi5kZWZhdWx0Lm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoYnVmLCBvZmZzZXQsIGxlbmd0aCwgcG9zaXRpb24pIHsKICAgICAgICB2YXIgYmxvY2tQb3NpdGlvbnMsIGJsb2NrQnVmZmVyLCBkZXN0aW5hdGlvbk9mZnNldCwgYnl0ZXNSZWFkLCBibG9ja051bSwgdW5jb21wcmVzc2VkQnVmZmVyLCBfYmxvY2tQb3NpdGlvbnMkYmxvY2ssIHVuY29tcHJlc3NlZFBvc2l0aW9uLCBzb3VyY2VPZmZzZXQsIHNvdXJjZUVuZDsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yJDIuZGVmYXVsdC53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmd6aS5nZXRSZWxldmFudEJsb2Nrc0ZvclJlYWQobGVuZ3RoLCBwb3NpdGlvbik7CiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgYmxvY2tQb3NpdGlvbnMgPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgICAgICAgIGJsb2NrQnVmZmVyID0gQnVmZmVyLmFsbG9jVW5zYWZlKDMyNzY4ICogMik7CiAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbk9mZnNldCA9IG9mZnNldDsKICAgICAgICAgICAgICAgIGJ5dGVzUmVhZCA9IDA7CiAgICAgICAgICAgICAgICBibG9ja051bSA9IDA7CiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgaWYgKCEoYmxvY2tOdW0gPCBibG9ja1Bvc2l0aW9ucy5sZW5ndGggLSAxKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDE4OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVhZEFuZFVuY29tcHJlc3NCbG9jayhibG9ja0J1ZmZlciwgYmxvY2tQb3NpdGlvbnNbYmxvY2tOdW1dLCBibG9ja1Bvc2l0aW9uc1tibG9ja051bSArIDFdKTsKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgdW5jb21wcmVzc2VkQnVmZmVyID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICAgICAgICBfYmxvY2tQb3NpdGlvbnMkYmxvY2sgPSAoMCwgX3NsaWNlZFRvQXJyYXkyLmRlZmF1bHQpKGJsb2NrUG9zaXRpb25zW2Jsb2NrTnVtXSwgMiksIHVuY29tcHJlc3NlZFBvc2l0aW9uID0gX2Jsb2NrUG9zaXRpb25zJGJsb2NrWzFdOwogICAgICAgICAgICAgICAgc291cmNlT2Zmc2V0ID0gdW5jb21wcmVzc2VkUG9zaXRpb24gPj0gcG9zaXRpb24gPyAwIDogcG9zaXRpb24gLSB1bmNvbXByZXNzZWRQb3NpdGlvbjsKICAgICAgICAgICAgICAgIHNvdXJjZUVuZCA9IE1hdGgubWluKHBvc2l0aW9uICsgbGVuZ3RoLCB1bmNvbXByZXNzZWRQb3NpdGlvbiArIHVuY29tcHJlc3NlZEJ1ZmZlci5sZW5ndGgpIC0gdW5jb21wcmVzc2VkUG9zaXRpb247CiAgICAgICAgICAgICAgICBpZiAoc291cmNlT2Zmc2V0ID49IDAgJiYgc291cmNlT2Zmc2V0IDwgdW5jb21wcmVzc2VkQnVmZmVyLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICB1bmNvbXByZXNzZWRCdWZmZXIuY29weShidWYsIGRlc3RpbmF0aW9uT2Zmc2V0LCBzb3VyY2VPZmZzZXQsIHNvdXJjZUVuZCk7CiAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uT2Zmc2V0ICs9IHNvdXJjZUVuZCAtIHNvdXJjZU9mZnNldDsKICAgICAgICAgICAgICAgICAgYnl0ZXNSZWFkICs9IHNvdXJjZUVuZCAtIHNvdXJjZU9mZnNldDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgICAgYmxvY2tOdW0gKz0gMTsKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgeyBieXRlc1JlYWQsIGJ1ZmZlcjogYnVmIH0pOwogICAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTQsIHRoaXMpOwogICAgICB9KSk7CiAgICAgIGZ1bmN0aW9uIHJlYWQoX3g0LCBfeDUsIF94NiwgX3g3KSB7CiAgICAgICAgcmV0dXJuIF9yZWFkLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlYWQ7CiAgICB9KCkgfV0pOwogICAgcmV0dXJuIEJnekZpbGVoYW5kbGUyOwogIH0oKTsKICB2YXIgYmd6RmlsZWhhbmRsZSA9IEJnekZpbGVoYW5kbGU7CiAgdmFyIEJnemZGaWxlaGFuZGxlID0gYmd6RmlsZWhhbmRsZTsKICB2YXIgX3JlcXVpcmUgPSB1bnppcFBha28sIHVuemlwID0gX3JlcXVpcmUudW56aXAsIHVuemlwQ2h1bmsgPSBfcmVxdWlyZS51bnppcENodW5rLCB1bnppcENodW5rU2xpY2UgPSBfcmVxdWlyZS51bnppcENodW5rU2xpY2U7CiAgdmFyIGRpc3QkMSA9IHsgQmd6ZkZpbGVoYW5kbGUsIHVuemlwLCB1bnppcENodW5rLCB1bnppcENodW5rU2xpY2UgfTsKICAoZnVuY3Rpb24oZXhwb3J0cykgewogICAgdmFyIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkID0gaW50ZXJvcFJlcXVpcmVXaWxkY2FyZC5leHBvcnRzOwogICAgdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyID0gaW50ZXJvcFJlcXVpcmVEZWZhdWx0JDEuZXhwb3J0czsKICAgIHZhciBfT2JqZWN0JGRlZmluZVByb3BlcnR5ID0gZGVmaW5lUHJvcGVydHkkOTsKICAgIF9PYmplY3QkZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgICAgIHZhbHVlOiB0cnVlCiAgICB9KTsKICAgIGV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDsKICAgIHZhciBfZ2V0SXRlcmF0b3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoZ2V0SXRlcmF0b3IkMik7CiAgICB2YXIgX2lzQXJyYXkgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Mihpc0FycmF5JDYpOwogICAgdmFyIF9nZXRJdGVyYXRvck1ldGhvZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0MihnZXRJdGVyYXRvck1ldGhvZCQyKTsKICAgIHZhciBfc3ltYm9sID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoc3ltYm9sJDIpOwogICAgdmFyIF9mcm9tID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoZnJvbSQzKTsKICAgIHZhciBfY29uc3RydWN0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoY29uc3RydWN0KTsKICAgIHZhciBfY29uY2F0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoY29uY2F0KTsKICAgIHZhciBfc2xpY2VkVG9BcnJheTIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoc2xpY2VkVG9BcnJheSQxLmV4cG9ydHMpOwogICAgdmFyIF9zbGljZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKHNsaWNlJDEpOwogICAgdmFyIF9hc3NpZ24gPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Mihhc3NpZ24kMSk7CiAgICB2YXIgX3JlZ2VuZXJhdG9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKHJlZ2VuZXJhdG9yJDEpOwogICAgdmFyIF9hc3luY1RvR2VuZXJhdG9yMjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Mihhc3luY1RvR2VuZXJhdG9yJDEuZXhwb3J0cyk7CiAgICB2YXIgX2NsYXNzQ2FsbENoZWNrMjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0MihjbGFzc0NhbGxDaGVjayQxLmV4cG9ydHMpOwogICAgdmFyIF9jcmVhdGVDbGFzczIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoY3JlYXRlQ2xhc3MkMS5leHBvcnRzKTsKICAgIHZhciBfYXNzZXJ0VGhpc0luaXRpYWxpemVkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKGFzc2VydFRoaXNJbml0aWFsaXplZC5leHBvcnRzKTsKICAgIHZhciBfaW5oZXJpdHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoaW5oZXJpdHMuZXhwb3J0cyk7CiAgICB2YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIocG9zc2libGVDb25zdHJ1Y3RvclJldHVybi5leHBvcnRzKTsKICAgIHZhciBfZ2V0UHJvdG90eXBlT2YyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoZ2V0UHJvdG90eXBlT2YkNC5leHBvcnRzKTsKICAgIHZhciBfZGVmaW5lUHJvcGVydHkyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKGRlZmluZVByb3BlcnR5JDYuZXhwb3J0cyk7CiAgICB2YXIgX2xvbmcgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Mihsb25nKTsKICAgIHZhciBfYmd6ZkZpbGVoYW5kbGUgPSBkaXN0JDE7CiAgICB2YXIgX3ZpcnR1YWxPZmZzZXQgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCh2aXJ0dWFsT2Zmc2V0KTsKICAgIHZhciBfY2h1bmsgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0MihjaHVuayk7CiAgICB2YXIgX3V0aWwgPSB1dGlsOwogICAgdmFyIF9pbmRleEZpbGUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0MihpbmRleEZpbGUpOwogICAgZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobywgYWxsb3dBcnJheUxpa2UpIHsKICAgICAgdmFyIGl0OwogICAgICBpZiAodHlwZW9mIF9zeW1ib2wuZGVmYXVsdCA9PT0gInVuZGVmaW5lZCIgfHwgKDAsIF9nZXRJdGVyYXRvck1ldGhvZDIuZGVmYXVsdCkobykgPT0gbnVsbCkgewogICAgICAgIGlmICgoMCwgX2lzQXJyYXkuZGVmYXVsdCkobykgfHwgKGl0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8pKSB8fCBhbGxvd0FycmF5TGlrZSAmJiBvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHsKICAgICAgICAgIGlmIChpdCkKICAgICAgICAgICAgbyA9IGl0OwogICAgICAgICAgdmFyIGkyID0gMDsKICAgICAgICAgIHZhciBGID0gZnVuY3Rpb24gRjIoKSB7CiAgICAgICAgICB9OwogICAgICAgICAgcmV0dXJuIHsgczogRiwgbjogZnVuY3Rpb24gbigpIHsKICAgICAgICAgICAgaWYgKGkyID49IG8ubGVuZ3RoKQogICAgICAgICAgICAgIHJldHVybiB7IGRvbmU6IHRydWUgfTsKICAgICAgICAgICAgcmV0dXJuIHsgZG9uZTogZmFsc2UsIHZhbHVlOiBvW2kyKytdIH07CiAgICAgICAgICB9LCBlOiBmdW5jdGlvbiBlKF9lKSB7CiAgICAgICAgICAgIHRocm93IF9lOwogICAgICAgICAgfSwgZjogRiB9OwogICAgICAgIH0KICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIik7CiAgICAgIH0KICAgICAgdmFyIG5vcm1hbENvbXBsZXRpb24gPSB0cnVlLCBkaWRFcnIgPSBmYWxzZSwgZXJyMjsKICAgICAgcmV0dXJuIHsgczogZnVuY3Rpb24gcygpIHsKICAgICAgICBpdCA9ICgwLCBfZ2V0SXRlcmF0b3IyLmRlZmF1bHQpKG8pOwogICAgICB9LCBuOiBmdW5jdGlvbiBuKCkgewogICAgICAgIHZhciBzdGVwID0gaXQubmV4dCgpOwogICAgICAgIG5vcm1hbENvbXBsZXRpb24gPSBzdGVwLmRvbmU7CiAgICAgICAgcmV0dXJuIHN0ZXA7CiAgICAgIH0sIGU6IGZ1bmN0aW9uIGUoX2UyKSB7CiAgICAgICAgZGlkRXJyID0gdHJ1ZTsKICAgICAgICBlcnIyID0gX2UyOwogICAgICB9LCBmOiBmdW5jdGlvbiBmKCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICBpZiAoIW5vcm1hbENvbXBsZXRpb24gJiYgaXQucmV0dXJuICE9IG51bGwpCiAgICAgICAgICAgIGl0LnJldHVybigpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICBpZiAoZGlkRXJyKQogICAgICAgICAgICB0aHJvdyBlcnIyOwogICAgICAgIH0KICAgICAgfSB9OwogICAgfQogICAgZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgewogICAgICB2YXIgX2NvbnRleHQ4OwogICAgICBpZiAoIW8pCiAgICAgICAgcmV0dXJuOwogICAgICBpZiAodHlwZW9mIG8gPT09ICJzdHJpbmciKQogICAgICAgIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOwogICAgICB2YXIgbiA9ICgwLCBfc2xpY2UuZGVmYXVsdCkoX2NvbnRleHQ4ID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pKS5jYWxsKF9jb250ZXh0OCwgOCwgLTEpOwogICAgICBpZiAobiA9PT0gIk9iamVjdCIgJiYgby5jb25zdHJ1Y3RvcikKICAgICAgICBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOwogICAgICBpZiAobiA9PT0gIk1hcCIgfHwgbiA9PT0gIlNldCIpCiAgICAgICAgcmV0dXJuICgwLCBfZnJvbS5kZWZhdWx0KShvKTsKICAgICAgaWYgKG4gPT09ICJBcmd1bWVudHMiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKQogICAgICAgIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOwogICAgfQogICAgZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4yKSB7CiAgICAgIGlmIChsZW4yID09IG51bGwgfHwgbGVuMiA+IGFyci5sZW5ndGgpCiAgICAgICAgbGVuMiA9IGFyci5sZW5ndGg7CiAgICAgIGZvciAodmFyIGkyID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4yKTsgaTIgPCBsZW4yOyBpMisrKSB7CiAgICAgICAgYXJyMltpMl0gPSBhcnJbaTJdOwogICAgICB9CiAgICAgIHJldHVybiBhcnIyOwogICAgfQogICAgZnVuY3Rpb24gX2NyZWF0ZVN1cGVyMihEZXJpdmVkKSB7CiAgICAgIHZhciBoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdDIoKTsKICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9jcmVhdGVTdXBlckludGVybmFsKCkgewogICAgICAgIHZhciBTdXBlciA9ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKERlcml2ZWQpLCByZXN1bHQ7CiAgICAgICAgaWYgKGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QpIHsKICAgICAgICAgIHZhciBOZXdUYXJnZXQgPSAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KSh0aGlzKS5jb25zdHJ1Y3RvcjsKICAgICAgICAgIHJlc3VsdCA9ICgwLCBfY29uc3RydWN0LmRlZmF1bHQpKFN1cGVyLCBhcmd1bWVudHMsIE5ld1RhcmdldCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlc3VsdCA9IFN1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfQogICAgICAgIHJldHVybiAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yLmRlZmF1bHQpKHRoaXMsIHJlc3VsdCk7CiAgICAgIH07CiAgICB9CiAgICBmdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0MigpIHsKICAgICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSAidW5kZWZpbmVkIiB8fCAhX2NvbnN0cnVjdC5kZWZhdWx0KQogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgaWYgKF9jb25zdHJ1Y3QuZGVmYXVsdC5zaGFtKQogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgaWYgKHR5cGVvZiBQcm94eSA9PT0gImZ1bmN0aW9uIikKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgdHJ5IHsKICAgICAgICBEYXRlLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKCgwLCBfY29uc3RydWN0LmRlZmF1bHQpKERhdGUsIFtdLCBmdW5jdGlvbigpIHsKICAgICAgICB9KSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0KICAgIHZhciBDU0kxX01BR0lDID0gMjE1ODI2NTk7CiAgICB2YXIgQ1NJMl9NQUdJQyA9IDM4MzU5ODc1OwogICAgZnVuY3Rpb24gbHNoaWZ0KG51bSwgYml0cykgewogICAgICByZXR1cm4gbnVtICogTWF0aC5wb3coMiwgYml0cyk7CiAgICB9CiAgICBmdW5jdGlvbiByc2hpZnQobnVtLCBiaXRzKSB7CiAgICAgIHJldHVybiBNYXRoLmZsb29yKG51bSAvIE1hdGgucG93KDIsIGJpdHMpKTsKICAgIH0KICAgIHZhciBDU0kgPSAvKiBAX19QVVJFX18gKi8gZnVuY3Rpb24oX0luZGV4RmlsZSkgewogICAgICAoMCwgX2luaGVyaXRzMi5kZWZhdWx0KShDU0kyLCBfSW5kZXhGaWxlKTsKICAgICAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcjIoQ1NJMik7CiAgICAgIGZ1bmN0aW9uIENTSTIoYXJncykgewogICAgICAgIHZhciBfdGhpczsKICAgICAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMjIuZGVmYXVsdCkodGhpcywgQ1NJMik7CiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBhcmdzKTsKICAgICAgICAoMCwgX2RlZmluZVByb3BlcnR5MjIuZGVmYXVsdCkoKDAsIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQyLmRlZmF1bHQpKF90aGlzKSwgIm1heEJpbk51bWJlciIsIHZvaWQgMCk7CiAgICAgICAgKDAsIF9kZWZpbmVQcm9wZXJ0eTIyLmRlZmF1bHQpKCgwLCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkMi5kZWZhdWx0KShfdGhpcyksICJkZXB0aCIsIHZvaWQgMCk7CiAgICAgICAgKDAsIF9kZWZpbmVQcm9wZXJ0eTIyLmRlZmF1bHQpKCgwLCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkMi5kZWZhdWx0KShfdGhpcyksICJtaW5TaGlmdCIsIHZvaWQgMCk7CiAgICAgICAgX3RoaXMubWF4QmluTnVtYmVyID0gMDsKICAgICAgICBfdGhpcy5kZXB0aCA9IDA7CiAgICAgICAgX3RoaXMubWluU2hpZnQgPSAwOwogICAgICAgIHJldHVybiBfdGhpczsKICAgICAgfQogICAgICAoMCwgX2NyZWF0ZUNsYXNzMjIuZGVmYXVsdCkoQ1NJMiwgW3sKICAgICAgICBrZXk6ICJsaW5lQ291bnQiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbigpIHsKICAgICAgICAgIHZhciBfbGluZUNvdW50ID0gKDAsIF9hc3luY1RvR2VuZXJhdG9yMjIuZGVmYXVsdCkoLyogQF9fUFVSRV9fICovIF9yZWdlbmVyYXRvcjIuZGVmYXVsdC5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUocmVmSWQpIHsKICAgICAgICAgICAgdmFyIGluZGV4RGF0YSwgaWR4LCBzdGF0czsKICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvcjIuZGVmYXVsdC53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlKCk7CiAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICBpbmRleERhdGEgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgICAgIGlmIChpbmRleERhdGEpIHsKICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIC0xKTsKICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICAgIGlkeCA9IGluZGV4RGF0YS5pbmRpY2VzW3JlZklkXTsKICAgICAgICAgICAgICAgICAgICBpZiAoaWR4KSB7CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCAtMSk7CiAgICAgICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgICAgICBzdGF0cyA9IGluZGV4RGF0YS5pbmRpY2VzW3JlZklkXS5zdGF0czsKICAgICAgICAgICAgICAgICAgICBpZiAoIXN0YXRzKSB7CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgc3RhdHMubGluZUNvdW50KTsKICAgICAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCAtMSk7CiAgICAgICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIF9jYWxsZWUsIHRoaXMpOwogICAgICAgICAgfSkpOwogICAgICAgICAgZnVuY3Rpb24gbGluZUNvdW50KF94KSB7CiAgICAgICAgICAgIHJldHVybiBfbGluZUNvdW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gbGluZUNvdW50OwogICAgICAgIH0oKQogICAgICB9LCB7CiAgICAgICAga2V5OiAiaW5kZXhDb3YiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbigpIHsKICAgICAgICAgIHZhciBfaW5kZXhDb3YgPSAoMCwgX2FzeW5jVG9HZW5lcmF0b3IyMi5kZWZhdWx0KSgvKiBAX19QVVJFX18gKi8gX3JlZ2VuZXJhdG9yMi5kZWZhdWx0Lm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3IyLmRlZmF1bHQud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIFtdKTsKICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICAgICAgfSkpOwogICAgICAgICAgZnVuY3Rpb24gaW5kZXhDb3YoKSB7CiAgICAgICAgICAgIHJldHVybiBfaW5kZXhDb3YuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBpbmRleENvdjsKICAgICAgICB9KCkKICAgICAgfSwgewogICAgICAgIGtleTogInBhcnNlQXV4RGF0YSIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHBhcnNlQXV4RGF0YShieXRlcywgb2Zmc2V0LCBhdXhMZW5ndGgpIHsKICAgICAgICAgIGlmIChhdXhMZW5ndGggPCAzMCkgewogICAgICAgICAgICByZXR1cm4ge307CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgZGF0YTIgPSB7fTsKICAgICAgICAgIGRhdGEyLmZvcm1hdEZsYWdzID0gYnl0ZXMucmVhZEludDMyTEUob2Zmc2V0KTsKICAgICAgICAgIGRhdGEyLmNvb3JkaW5hdGVUeXBlID0gZGF0YTIuZm9ybWF0RmxhZ3MgJiA2NTUzNiA/ICJ6ZXJvLWJhc2VkLWhhbGYtb3BlbiIgOiAiMS1iYXNlZC1jbG9zZWQiOwogICAgICAgICAgZGF0YTIuZm9ybWF0ID0gewogICAgICAgICAgICAwOiAiZ2VuZXJpYyIsCiAgICAgICAgICAgIDE6ICJTQU0iLAogICAgICAgICAgICAyOiAiVkNGIgogICAgICAgICAgfVtkYXRhMi5mb3JtYXRGbGFncyAmIDE1XTsKICAgICAgICAgIGlmICghZGF0YTIuZm9ybWF0KSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiaW52YWxpZCBUYWJpeCBwcmVzZXQgZm9ybWF0IGZsYWdzICIuY29uY2F0KGRhdGEyLmZvcm1hdEZsYWdzKSk7CiAgICAgICAgICB9CiAgICAgICAgICBkYXRhMi5jb2x1bW5OdW1iZXJzID0gewogICAgICAgICAgICByZWY6IGJ5dGVzLnJlYWRJbnQzMkxFKG9mZnNldCArIDQpLAogICAgICAgICAgICBzdGFydDogYnl0ZXMucmVhZEludDMyTEUob2Zmc2V0ICsgOCksCiAgICAgICAgICAgIGVuZDogYnl0ZXMucmVhZEludDMyTEUob2Zmc2V0ICsgMTIpCiAgICAgICAgICB9OwogICAgICAgICAgZGF0YTIubWV0YVZhbHVlID0gYnl0ZXMucmVhZEludDMyTEUob2Zmc2V0ICsgMTYpOwogICAgICAgICAgZGF0YTIubWV0YUNoYXIgPSBkYXRhMi5tZXRhVmFsdWUgPyBTdHJpbmcuZnJvbUNoYXJDb2RlKGRhdGEyLm1ldGFWYWx1ZSkgOiAiIjsKICAgICAgICAgIGRhdGEyLnNraXBMaW5lcyA9IGJ5dGVzLnJlYWRJbnQzMkxFKG9mZnNldCArIDIwKTsKICAgICAgICAgIHZhciBuYW1lU2VjdGlvbkxlbmd0aCA9IGJ5dGVzLnJlYWRJbnQzMkxFKG9mZnNldCArIDI0KTsKICAgICAgICAgICgwLCBfYXNzaWduLmRlZmF1bHQpKGRhdGEyLCB0aGlzLl9wYXJzZU5hbWVCeXRlcygoMCwgX3NsaWNlLmRlZmF1bHQpKGJ5dGVzKS5jYWxsKGJ5dGVzLCBvZmZzZXQgKyAyOCwgb2Zmc2V0ICsgMjggKyBuYW1lU2VjdGlvbkxlbmd0aCkpKTsKICAgICAgICAgIHJldHVybiBkYXRhMjsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJfcGFyc2VOYW1lQnl0ZXMiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcGFyc2VOYW1lQnl0ZXMobmFtZXNCeXRlcykgewogICAgICAgICAgdmFyIGN1cnJSZWZJZCA9IDA7CiAgICAgICAgICB2YXIgY3Vyck5hbWVTdGFydCA9IDA7CiAgICAgICAgICB2YXIgcmVmSWRUb05hbWUgPSBbXTsKICAgICAgICAgIHZhciByZWZOYW1lVG9JZCA9IHt9OwogICAgICAgICAgZm9yICh2YXIgaTIgPSAwOyBpMiA8IG5hbWVzQnl0ZXMubGVuZ3RoOyBpMiArPSAxKSB7CiAgICAgICAgICAgIGlmICghbmFtZXNCeXRlc1tpMl0pIHsKICAgICAgICAgICAgICBpZiAoY3Vyck5hbWVTdGFydCA8IGkyKSB7CiAgICAgICAgICAgICAgICB2YXIgcmVmTmFtZSA9IG5hbWVzQnl0ZXMudG9TdHJpbmcoInV0ZjgiLCBjdXJyTmFtZVN0YXJ0LCBpMik7CiAgICAgICAgICAgICAgICByZWZOYW1lID0gdGhpcy5yZW5hbWVSZWZTZXEocmVmTmFtZSk7CiAgICAgICAgICAgICAgICByZWZJZFRvTmFtZVtjdXJyUmVmSWRdID0gcmVmTmFtZTsKICAgICAgICAgICAgICAgIHJlZk5hbWVUb0lkW3JlZk5hbWVdID0gY3VyclJlZklkOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBjdXJyTmFtZVN0YXJ0ID0gaTIgKyAxOwogICAgICAgICAgICAgIGN1cnJSZWZJZCArPSAxOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICByZWZOYW1lVG9JZCwKICAgICAgICAgICAgcmVmSWRUb05hbWUKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAga2V5OiAiX3BhcnNlIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICB2YXIgX3BhcnNlMiA9ICgwLCBfYXN5bmNUb0dlbmVyYXRvcjIyLmRlZmF1bHQpKC8qIEBfX1BVUkVfXyAqLyBfcmVnZW5lcmF0b3IyLmRlZmF1bHQubWFyayhmdW5jdGlvbiBfY2FsbGVlMyhvcHRzKSB7CiAgICAgICAgICAgIHZhciBkYXRhMiwgYnVmZmVyMiwgYnl0ZXMsIGF1eExlbmd0aCwgY3Vyck9mZnNldCwgaTIsIGJpbkNvdW50LCBiaW5JbmRleCwgc3RhdHMsIGosIGJpbiwgbG9mZnNldCwgY2h1bmtDb3VudCwgY2h1bmtzLCBrLCB1LCB2OwogICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yMi5kZWZhdWx0LndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIGRhdGEyID0gewogICAgICAgICAgICAgICAgICAgICAgY3NpOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgbWF4QmxvY2tTaXplOiAxIDw8IDE2CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmlsZWhhbmRsZS5yZWFkRmlsZShvcHRzKTsKICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgIGJ1ZmZlcjIgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDY7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgwLCBfYmd6ZkZpbGVoYW5kbGUudW56aXApKGJ1ZmZlcjIpOwogICAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgICAgYnl0ZXMgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICAgICAgICBpZiAoIShieXRlcy5yZWFkVUludDMyTEUoMCkgPT09IENTSTFfTUFHSUMpKSB7CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDExOwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGRhdGEyLmNzaVZlcnNpb24gPSAxOwogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTY7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICAgICAgaWYgKCEoYnl0ZXMucmVhZFVJbnQzMkxFKDApID09PSBDU0kyX01BR0lDKSkgewogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxNTsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBkYXRhMi5jc2lWZXJzaW9uID0gMjsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDE2OwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiTm90IGEgQ1NJIGZpbGUiKTsKICAgICAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICAgICAgICB0aGlzLm1pblNoaWZ0ID0gYnl0ZXMucmVhZEludDMyTEUoNCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXB0aCA9IGJ5dGVzLnJlYWRJbnQzMkxFKDgpOwogICAgICAgICAgICAgICAgICAgIHRoaXMubWF4QmluTnVtYmVyID0gKCgxIDw8ICh0aGlzLmRlcHRoICsgMSkgKiAzKSAtIDEpIC8gNzsKICAgICAgICAgICAgICAgICAgICBhdXhMZW5ndGggPSBieXRlcy5yZWFkSW50MzJMRSgxMik7CiAgICAgICAgICAgICAgICAgICAgaWYgKGF1eExlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgKDAsIF9hc3NpZ24uZGVmYXVsdCkoZGF0YTIsIHRoaXMucGFyc2VBdXhEYXRhKGJ5dGVzLCAxNiwgYXV4TGVuZ3RoKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGRhdGEyLnJlZkNvdW50ID0gYnl0ZXMucmVhZEludDMyTEUoMTYgKyBhdXhMZW5ndGgpOwogICAgICAgICAgICAgICAgICAgIGRhdGEyLmluZGljZXMgPSBuZXcgQXJyYXkoZGF0YTIucmVmQ291bnQpOwogICAgICAgICAgICAgICAgICAgIGN1cnJPZmZzZXQgPSAxNiArIGF1eExlbmd0aCArIDQ7CiAgICAgICAgICAgICAgICAgICAgaTIgPSAwOwogICAgICAgICAgICAgICAgICBjYXNlIDI1OgogICAgICAgICAgICAgICAgICAgIGlmICghKGkyIDwgZGF0YTIucmVmQ291bnQpKSB7CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM3OwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjg7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgwLCBfdXRpbC5hYm9ydEJyZWFrUG9pbnQpKG9wdHMuc2lnbmFsKTsKICAgICAgICAgICAgICAgICAgY2FzZSAyODoKICAgICAgICAgICAgICAgICAgICBiaW5Db3VudCA9IGJ5dGVzLnJlYWRJbnQzMkxFKGN1cnJPZmZzZXQpOwogICAgICAgICAgICAgICAgICAgIGN1cnJPZmZzZXQgKz0gNDsKICAgICAgICAgICAgICAgICAgICBiaW5JbmRleCA9IHt9OwogICAgICAgICAgICAgICAgICAgIHN0YXRzID0gdm9pZCAwOwogICAgICAgICAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBiaW5Db3VudDsgaiArPSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICBiaW4gPSBieXRlcy5yZWFkVUludDMyTEUoY3Vyck9mZnNldCk7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoYmluID4gdGhpcy5tYXhCaW5OdW1iZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHMgPSB0aGlzLnBhcnNlUHNldWRvQmluKGJ5dGVzLCBjdXJyT2Zmc2V0ICsgNCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJPZmZzZXQgKz0gNCArIDggKyA0ICsgMTYgKyAxNjsKICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZmZzZXQgPSAoMCwgX3ZpcnR1YWxPZmZzZXQuZnJvbUJ5dGVzKShieXRlcywgY3Vyck9mZnNldCArIDQpOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9maW5kRmlyc3REYXRhKGRhdGEyLCBsb2Zmc2V0KTsKICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmtDb3VudCA9IGJ5dGVzLnJlYWRJbnQzMkxFKGN1cnJPZmZzZXQgKyAxMik7CiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJPZmZzZXQgKz0gMTY7CiAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rcyA9IG5ldyBBcnJheShjaHVua0NvdW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChrID0gMDsgayA8IGNodW5rQ291bnQ7IGsgKz0gMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSAoMCwgX3ZpcnR1YWxPZmZzZXQuZnJvbUJ5dGVzKShieXRlcywgY3Vyck9mZnNldCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdiA9ICgwLCBfdmlydHVhbE9mZnNldC5mcm9tQnl0ZXMpKGJ5dGVzLCBjdXJyT2Zmc2V0ICsgOCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyck9mZnNldCArPSAxNjsKICAgICAgICAgICAgICAgICAgICAgICAgICBjaHVua3Nba10gPSBuZXcgX2NodW5rLmRlZmF1bHQodSwgdiwgYmluKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBiaW5JbmRleFtiaW5dID0gY2h1bmtzOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBkYXRhMi5pbmRpY2VzW2kyXSA9IHsKICAgICAgICAgICAgICAgICAgICAgIGJpbkluZGV4LAogICAgICAgICAgICAgICAgICAgICAgc3RhdHMKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICBjYXNlIDM0OgogICAgICAgICAgICAgICAgICAgIGkyICs9IDE7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyNTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgY2FzZSAzNzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgZGF0YTIpOwogICAgICAgICAgICAgICAgICBjYXNlIDM4OgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZTMsIHRoaXMpOwogICAgICAgICAgfSkpOwogICAgICAgICAgZnVuY3Rpb24gX3BhcnNlKF94MikgewogICAgICAgICAgICByZXR1cm4gX3BhcnNlMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIF9wYXJzZTsKICAgICAgICB9KCkKICAgICAgfSwgewogICAgICAgIGtleTogInBhcnNlUHNldWRvQmluIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2VQc2V1ZG9CaW4oYnl0ZXMsIG9mZnNldCkgewogICAgICAgICAgdmFyIGxpbmVDb3VudCA9ICgwLCBfdXRpbC5sb25nVG9OdW1iZXIpKF9sb25nLmRlZmF1bHQuZnJvbUJ5dGVzTEUoKDAsIF9zbGljZS5kZWZhdWx0KShBcnJheS5wcm90b3R5cGUpLmNhbGwoYnl0ZXMsIG9mZnNldCArIDI4LCBvZmZzZXQgKyAzNiksIHRydWUpKTsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGxpbmVDb3VudAogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJibG9ja3NGb3JSYW5nZSIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgdmFyIF9ibG9ja3NGb3JSYW5nZSA9ICgwLCBfYXN5bmNUb0dlbmVyYXRvcjIyLmRlZmF1bHQpKC8qIEBfX1BVUkVfXyAqLyBfcmVnZW5lcmF0b3IyLmRlZmF1bHQubWFyayhmdW5jdGlvbiBfY2FsbGVlNChyZWZJZCwgbWluMiwgbWF4MikgewogICAgICAgICAgICB2YXIgb3B0cywgaW5kZXhEYXRhLCBiYSwgb3ZlcmxhcHBpbmdCaW5zLCBjaHVua3MsIF9pdGVyYXRvciwgX3N0ZXAsIF9zdGVwJHZhbHVlLCBzdGFydCwgZW5kLCBiaW4sIGJpbkNodW5rcywgYzIsIF9hcmdzNCA9IGFyZ3VtZW50czsKICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvcjIuZGVmYXVsdC53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICBvcHRzID0gX2FyZ3M0Lmxlbmd0aCA+IDMgJiYgX2FyZ3M0WzNdICE9PSB2b2lkIDAgPyBfYXJnczRbM10gOiB7fTsKICAgICAgICAgICAgICAgICAgICBpZiAobWluMiA8IDApIHsKICAgICAgICAgICAgICAgICAgICAgIG1pbjIgPSAwOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2Uob3B0cyk7CiAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICBpbmRleERhdGEgPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXhEYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsIFtdKTsKICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgIGJhID0gaW5kZXhEYXRhLmluZGljZXNbcmVmSWRdOwogICAgICAgICAgICAgICAgICAgIGlmIChiYSkgewogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgW10pOwogICAgICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgICAgIG92ZXJsYXBwaW5nQmlucyA9IHRoaXMucmVnMmJpbnMobWluMiwgbWF4Mik7CiAgICAgICAgICAgICAgICAgICAgY2h1bmtzID0gW107CiAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIob3ZlcmxhcHBpbmdCaW5zKTsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTsgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF9zdGVwJHZhbHVlID0gKDAsIF9zbGljZWRUb0FycmF5MjIuZGVmYXVsdCkoX3N0ZXAudmFsdWUsIDIpLCBzdGFydCA9IF9zdGVwJHZhbHVlWzBdLCBlbmQgPSBfc3RlcCR2YWx1ZVsxXTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChiaW4gPSBzdGFydDsgYmluIDw9IGVuZDsgYmluKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYmEuYmluSW5kZXhbYmluXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmluQ2h1bmtzID0gYmEuYmluSW5kZXhbYmluXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoYzIgPSAwOyBjMiA8IGJpbkNodW5rcy5sZW5ndGg7ICsrYzIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmtzLnB1c2gobmV3IF9jaHVuay5kZWZhdWx0KGJpbkNodW5rc1tjMl0ubWludiwgYmluQ2h1bmtzW2MyXS5tYXh2LCBiaW4pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIyKSB7CiAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IuZShlcnIyKTsKICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsICgwLCBfdXRpbC5vcHRpbWl6ZUNodW5rcykoY2h1bmtzLCBuZXcgX3ZpcnR1YWxPZmZzZXQuZGVmYXVsdCgwLCAwKSkpOwogICAgICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZTQsIHRoaXMpOwogICAgICAgICAgfSkpOwogICAgICAgICAgZnVuY3Rpb24gYmxvY2tzRm9yUmFuZ2UoX3gzLCBfeDQsIF94NSkgewogICAgICAgICAgICByZXR1cm4gX2Jsb2Nrc0ZvclJhbmdlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gYmxvY2tzRm9yUmFuZ2U7CiAgICAgICAgfSgpCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJyZWcyYmlucyIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlZzJiaW5zKGJlZywgZW5kKSB7CiAgICAgICAgICBiZWcgLT0gMTsKICAgICAgICAgIGlmIChiZWcgPCAxKSB7CiAgICAgICAgICAgIGJlZyA9IDE7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoZW5kID4gTWF0aC5wb3coMiwgNTApKSB7CiAgICAgICAgICAgIGVuZCA9IE1hdGgucG93KDIsIDM0KTsKICAgICAgICAgIH0KICAgICAgICAgIGVuZCAtPSAxOwogICAgICAgICAgdmFyIGwgPSAwOwogICAgICAgICAgdmFyIHQgPSAwOwogICAgICAgICAgdmFyIHMgPSB0aGlzLm1pblNoaWZ0ICsgdGhpcy5kZXB0aCAqIDM7CiAgICAgICAgICB2YXIgYmlucyA9IFtdOwogICAgICAgICAgZm9yICg7IGwgPD0gdGhpcy5kZXB0aDsgcyAtPSAzLCB0ICs9IGxzaGlmdCgxLCBsICogMyksIGwgKz0gMSkgewogICAgICAgICAgICB2YXIgYiA9IHQgKyByc2hpZnQoYmVnLCBzKTsKICAgICAgICAgICAgdmFyIGUgPSB0ICsgcnNoaWZ0KGVuZCwgcyk7CiAgICAgICAgICAgIGlmIChlIC0gYiArIGJpbnMubGVuZ3RoID4gdGhpcy5tYXhCaW5OdW1iZXIpIHsKICAgICAgICAgICAgICB2YXIgX2NvbnRleHQ1LCBfY29udGV4dDYsIF9jb250ZXh0NzsKICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKDAsIF9jb25jYXQuZGVmYXVsdCkoX2NvbnRleHQ1ID0gKDAsIF9jb25jYXQuZGVmYXVsdCkoX2NvbnRleHQ2ID0gKDAsIF9jb25jYXQuZGVmYXVsdCkoX2NvbnRleHQ3ID0gInF1ZXJ5ICIuY29uY2F0KGJlZywgIi0iKSkuY2FsbChfY29udGV4dDcsIGVuZCwgIiBpcyB0b28gbGFyZ2UgZm9yIGN1cnJlbnQgYmlubmluZyBzY2hlbWUgKHNoaWZ0ICIpKS5jYWxsKF9jb250ZXh0NiwgdGhpcy5taW5TaGlmdCwgIiwgZGVwdGggIikpLmNhbGwoX2NvbnRleHQ1LCB0aGlzLmRlcHRoLCAiKSwgdHJ5IGEgc21hbGxlciBxdWVyeSBvciBhIGNvYXJzZXIgaW5kZXggYmlubmluZyBzY2hlbWUiKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYmlucy5wdXNoKFtiLCBlXSk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gYmluczsKICAgICAgICB9CiAgICAgIH1dKTsKICAgICAgcmV0dXJuIENTSTI7CiAgICB9KF9pbmRleEZpbGUuZGVmYXVsdCk7CiAgICBleHBvcnRzLmRlZmF1bHQgPSBDU0k7CiAgfSkoY3NpKTsKICB2YXIgYmFtRmlsZSA9IHt9OwogIHZhciAkJDUgPSBfZXhwb3J0OwogICQkNSh7IHRhcmdldDogIkRhdGUiLCBzdGF0OiB0cnVlIH0sIHsKICAgIG5vdzogZnVuY3Rpb24gbm93MigpIHsKICAgICAgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgfQogIH0pOwogIHZhciBwYXRoJDEgPSBwYXRoJG47CiAgdmFyIG5vdyQyID0gcGF0aCQxLkRhdGUubm93OwogIHZhciBwYXJlbnQkYiA9IG5vdyQyOwogIHZhciBub3ckMSA9IHBhcmVudCRiOwogIHZhciBub3cgPSBub3ckMTsKICB2YXIgYUNhbGxhYmxlID0gYUNhbGxhYmxlJGM7CiAgdmFyIHRvT2JqZWN0ID0gdG9PYmplY3QkYjsKICB2YXIgSW5kZXhlZE9iamVjdCA9IGluZGV4ZWRPYmplY3Q7CiAgdmFyIHRvTGVuZ3RoJDEgPSB0b0xlbmd0aCQ5OwogIHZhciBjcmVhdGVNZXRob2QkMSA9IGZ1bmN0aW9uKElTX1JJR0hUKSB7CiAgICByZXR1cm4gZnVuY3Rpb24odGhhdCwgY2FsbGJhY2tmbiwgYXJndW1lbnRzTGVuZ3RoLCBtZW1vKSB7CiAgICAgIGFDYWxsYWJsZShjYWxsYmFja2ZuKTsKICAgICAgdmFyIE8gPSB0b09iamVjdCh0aGF0KTsKICAgICAgdmFyIHNlbGYyID0gSW5kZXhlZE9iamVjdChPKTsKICAgICAgdmFyIGxlbmd0aCA9IHRvTGVuZ3RoJDEoTy5sZW5ndGgpOwogICAgICB2YXIgaW5kZXggPSBJU19SSUdIVCA/IGxlbmd0aCAtIDEgOiAwOwogICAgICB2YXIgaTIgPSBJU19SSUdIVCA/IC0xIDogMTsKICAgICAgaWYgKGFyZ3VtZW50c0xlbmd0aCA8IDIpCiAgICAgICAgd2hpbGUgKHRydWUpIHsKICAgICAgICAgIGlmIChpbmRleCBpbiBzZWxmMikgewogICAgICAgICAgICBtZW1vID0gc2VsZjJbaW5kZXhdOwogICAgICAgICAgICBpbmRleCArPSBpMjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBpbmRleCArPSBpMjsKICAgICAgICAgIGlmIChJU19SSUdIVCA/IGluZGV4IDwgMCA6IGxlbmd0aCA8PSBpbmRleCkgewogICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoIlJlZHVjZSBvZiBlbXB0eSBhcnJheSB3aXRoIG5vIGluaXRpYWwgdmFsdWUiKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIGZvciAoOyBJU19SSUdIVCA/IGluZGV4ID49IDAgOiBsZW5ndGggPiBpbmRleDsgaW5kZXggKz0gaTIpCiAgICAgICAgaWYgKGluZGV4IGluIHNlbGYyKSB7CiAgICAgICAgICBtZW1vID0gY2FsbGJhY2tmbihtZW1vLCBzZWxmMltpbmRleF0sIGluZGV4LCBPKTsKICAgICAgICB9CiAgICAgIHJldHVybiBtZW1vOwogICAgfTsKICB9OwogIHZhciBhcnJheVJlZHVjZSA9IHsKICAgIGxlZnQ6IGNyZWF0ZU1ldGhvZCQxKGZhbHNlKSwKICAgIHJpZ2h0OiBjcmVhdGVNZXRob2QkMSh0cnVlKQogIH07CiAgdmFyICQkNCA9IF9leHBvcnQ7CiAgdmFyICRyZWR1Y2UgPSBhcnJheVJlZHVjZS5sZWZ0OwogIHZhciBhcnJheU1ldGhvZElzU3RyaWN0JDEgPSBhcnJheU1ldGhvZElzU3RyaWN0JDQ7CiAgdmFyIENIUk9NRV9WRVJTSU9OID0gZW5naW5lVjhWZXJzaW9uOwogIHZhciBJU19OT0RFID0gZW5naW5lSXNOb2RlOwogIHZhciBTVFJJQ1RfTUVUSE9EJDEgPSBhcnJheU1ldGhvZElzU3RyaWN0JDEoInJlZHVjZSIpOwogIHZhciBDSFJPTUVfQlVHID0gIUlTX05PREUgJiYgQ0hST01FX1ZFUlNJT04gPiA3OSAmJiBDSFJPTUVfVkVSU0lPTiA8IDgzOwogICQkNCh7IHRhcmdldDogIkFycmF5IiwgcHJvdG86IHRydWUsIGZvcmNlZDogIVNUUklDVF9NRVRIT0QkMSB8fCBDSFJPTUVfQlVHIH0sIHsKICAgIHJlZHVjZTogZnVuY3Rpb24gcmVkdWNlMihjYWxsYmFja2ZuKSB7CiAgICAgIHJldHVybiAkcmVkdWNlKHRoaXMsIGNhbGxiYWNrZm4sIGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdm9pZCAwKTsKICAgIH0KICB9KTsKICB2YXIgZW50cnlWaXJ0dWFsJDMgPSBlbnRyeVZpcnR1YWwkYTsKICB2YXIgcmVkdWNlJDMgPSBlbnRyeVZpcnR1YWwkMygiQXJyYXkiKS5yZWR1Y2U7CiAgdmFyIHJlZHVjZSQyID0gcmVkdWNlJDM7CiAgdmFyIEFycmF5UHJvdG90eXBlJDEgPSBBcnJheS5wcm90b3R5cGU7CiAgdmFyIHJlZHVjZV8xID0gZnVuY3Rpb24oaXQpIHsKICAgIHZhciBvd24gPSBpdC5yZWR1Y2U7CiAgICByZXR1cm4gaXQgPT09IEFycmF5UHJvdG90eXBlJDEgfHwgaXQgaW5zdGFuY2VvZiBBcnJheSAmJiBvd24gPT09IEFycmF5UHJvdG90eXBlJDEucmVkdWNlID8gcmVkdWNlJDIgOiBvd247CiAgfTsKICB2YXIgcGFyZW50JGEgPSByZWR1Y2VfMTsKICB2YXIgcmVkdWNlJDEgPSBwYXJlbnQkYTsKICB2YXIgcmVkdWNlID0gcmVkdWNlJDE7CiAgdmFyICQkMyA9IF9leHBvcnQ7CiAgdmFyIGJpbmQkNCA9IGZ1bmN0aW9uQmluZDsKICAkJDMoeyB0YXJnZXQ6ICJGdW5jdGlvbiIsIHByb3RvOiB0cnVlIH0sIHsKICAgIGJpbmQ6IGJpbmQkNAogIH0pOwogIHZhciBlbnRyeVZpcnR1YWwkMiA9IGVudHJ5VmlydHVhbCRhOwogIHZhciBiaW5kJDMgPSBlbnRyeVZpcnR1YWwkMigiRnVuY3Rpb24iKS5iaW5kOwogIHZhciBiaW5kJDIgPSBiaW5kJDM7CiAgdmFyIEZ1bmN0aW9uUHJvdG90eXBlID0gRnVuY3Rpb24ucHJvdG90eXBlOwogIHZhciBiaW5kXzEgPSBmdW5jdGlvbihpdCkgewogICAgdmFyIG93biA9IGl0LmJpbmQ7CiAgICByZXR1cm4gaXQgPT09IEZ1bmN0aW9uUHJvdG90eXBlIHx8IGl0IGluc3RhbmNlb2YgRnVuY3Rpb24gJiYgb3duID09PSBGdW5jdGlvblByb3RvdHlwZS5iaW5kID8gYmluZCQyIDogb3duOwogIH07CiAgdmFyIHBhcmVudCQ5ID0gYmluZF8xOwogIHZhciBiaW5kJDEgPSBwYXJlbnQkOTsKICB2YXIgYmluZCA9IGJpbmQkMTsKICB2YXIgd3JhcEFzeW5jR2VuZXJhdG9yID0geyBleHBvcnRzOiB7fSB9OwogIHZhciBBc3luY0dlbmVyYXRvciA9IHsgZXhwb3J0czoge30gfTsKICB2YXIgV3JhcHBlZFdlbGxLbm93blN5bWJvbE1vZHVsZSA9IHdlbGxLbm93blN5bWJvbFdyYXBwZWQ7CiAgdmFyIGFzeW5jSXRlcmF0b3IkNCA9IFdyYXBwZWRXZWxsS25vd25TeW1ib2xNb2R1bGUuZigiYXN5bmNJdGVyYXRvciIpOwogIHZhciBwYXJlbnQkOCA9IGFzeW5jSXRlcmF0b3IkNDsKICB2YXIgYXN5bmNJdGVyYXRvciQzID0gcGFyZW50JDg7CiAgdmFyIHBhcmVudCQ3ID0gYXN5bmNJdGVyYXRvciQzOwogIHZhciBhc3luY0l0ZXJhdG9yJDIgPSBwYXJlbnQkNzsKICB2YXIgYXN5bmNJdGVyYXRvciQxID0gYXN5bmNJdGVyYXRvciQyOwogIHZhciBBd2FpdFZhbHVlID0geyBleHBvcnRzOiB7fSB9OwogIChmdW5jdGlvbihtb2R1bGUpIHsKICAgIGZ1bmN0aW9uIF9Bd2FpdFZhbHVlKHZhbHVlKSB7CiAgICAgIHRoaXMud3JhcHBlZCA9IHZhbHVlOwogICAgfQogICAgbW9kdWxlLmV4cG9ydHMgPSBfQXdhaXRWYWx1ZTsKICAgIG1vZHVsZS5leHBvcnRzWyJkZWZhdWx0Il0gPSBtb2R1bGUuZXhwb3J0cywgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7CiAgfSkoQXdhaXRWYWx1ZSk7CiAgKGZ1bmN0aW9uKG1vZHVsZSkgewogICAgdmFyIF9Qcm9taXNlID0gcHJvbWlzZSQxOwogICAgdmFyIF9TeW1ib2wgPSBzeW1ib2w7CiAgICB2YXIgX1N5bWJvbCRhc3luY0l0ZXJhdG9yID0gYXN5bmNJdGVyYXRvciQxOwogICAgdmFyIEF3YWl0VmFsdWUkMSA9IEF3YWl0VmFsdWUuZXhwb3J0czsKICAgIGZ1bmN0aW9uIEFzeW5jR2VuZXJhdG9yMihnZW4pIHsKICAgICAgdmFyIGZyb250LCBiYWNrOwogICAgICBmdW5jdGlvbiBzZW5kKGtleSwgYXJnKSB7CiAgICAgICAgcmV0dXJuIG5ldyBfUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAgIHZhciByZXF1ZXN0ID0gewogICAgICAgICAgICBrZXksCiAgICAgICAgICAgIGFyZywKICAgICAgICAgICAgcmVzb2x2ZSwKICAgICAgICAgICAgcmVqZWN0LAogICAgICAgICAgICBuZXh0OiBudWxsCiAgICAgICAgICB9OwogICAgICAgICAgaWYgKGJhY2spIHsKICAgICAgICAgICAgYmFjayA9IGJhY2submV4dCA9IHJlcXVlc3Q7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBmcm9udCA9IGJhY2sgPSByZXF1ZXN0OwogICAgICAgICAgICByZXN1bWUoa2V5LCBhcmcpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHJlc3VtZShrZXksIGFyZykgewogICAgICAgIHRyeSB7CiAgICAgICAgICB2YXIgcmVzdWx0ID0gZ2VuW2tleV0oYXJnKTsKICAgICAgICAgIHZhciB2YWx1ZSA9IHJlc3VsdC52YWx1ZTsKICAgICAgICAgIHZhciB3cmFwcGVkQXdhaXQgPSB2YWx1ZSBpbnN0YW5jZW9mIEF3YWl0VmFsdWUkMTsKICAgICAgICAgIF9Qcm9taXNlLnJlc29sdmUod3JhcHBlZEF3YWl0ID8gdmFsdWUud3JhcHBlZCA6IHZhbHVlKS50aGVuKGZ1bmN0aW9uKGFyZzIpIHsKICAgICAgICAgICAgaWYgKHdyYXBwZWRBd2FpdCkgewogICAgICAgICAgICAgIHJlc3VtZShrZXkgPT09ICJyZXR1cm4iID8gInJldHVybiIgOiAibmV4dCIsIGFyZzIpOwogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBzZXR0bGUocmVzdWx0LmRvbmUgPyAicmV0dXJuIiA6ICJub3JtYWwiLCBhcmcyKTsKICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycjIpIHsKICAgICAgICAgICAgcmVzdW1lKCJ0aHJvdyIsIGVycjIpOwogICAgICAgICAgfSk7CiAgICAgICAgfSBjYXRjaCAoZXJyMikgewogICAgICAgICAgc2V0dGxlKCJ0aHJvdyIsIGVycjIpOwogICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBzZXR0bGUodHlwZSwgdmFsdWUpIHsKICAgICAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICAgIGNhc2UgInJldHVybiI6CiAgICAgICAgICAgIGZyb250LnJlc29sdmUoewogICAgICAgICAgICAgIHZhbHVlLAogICAgICAgICAgICAgIGRvbmU6IHRydWUKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAidGhyb3ciOgogICAgICAgICAgICBmcm9udC5yZWplY3QodmFsdWUpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIGZyb250LnJlc29sdmUoewogICAgICAgICAgICAgIHZhbHVlLAogICAgICAgICAgICAgIGRvbmU6IGZhbHNlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgZnJvbnQgPSBmcm9udC5uZXh0OwogICAgICAgIGlmIChmcm9udCkgewogICAgICAgICAgcmVzdW1lKGZyb250LmtleSwgZnJvbnQuYXJnKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYmFjayA9IG51bGw7CiAgICAgICAgfQogICAgICB9CiAgICAgIHRoaXMuX2ludm9rZSA9IHNlbmQ7CiAgICAgIGlmICh0eXBlb2YgZ2VuWyJyZXR1cm4iXSAhPT0gImZ1bmN0aW9uIikgewogICAgICAgIHRoaXNbInJldHVybiJdID0gdm9pZCAwOwogICAgICB9CiAgICB9CiAgICBBc3luY0dlbmVyYXRvcjIucHJvdG90eXBlW3R5cGVvZiBfU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIF9TeW1ib2wkYXN5bmNJdGVyYXRvciB8fCAiQEBhc3luY0l0ZXJhdG9yIl0gPSBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9OwogICAgQXN5bmNHZW5lcmF0b3IyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24oYXJnKSB7CiAgICAgIHJldHVybiB0aGlzLl9pbnZva2UoIm5leHQiLCBhcmcpOwogICAgfTsKICAgIEFzeW5jR2VuZXJhdG9yMi5wcm90b3R5cGVbInRocm93Il0gPSBmdW5jdGlvbihhcmcpIHsKICAgICAgcmV0dXJuIHRoaXMuX2ludm9rZSgidGhyb3ciLCBhcmcpOwogICAgfTsKICAgIEFzeW5jR2VuZXJhdG9yMi5wcm90b3R5cGVbInJldHVybiJdID0gZnVuY3Rpb24oYXJnKSB7CiAgICAgIHJldHVybiB0aGlzLl9pbnZva2UoInJldHVybiIsIGFyZyk7CiAgICB9OwogICAgbW9kdWxlLmV4cG9ydHMgPSBBc3luY0dlbmVyYXRvcjI7CiAgICBtb2R1bGUuZXhwb3J0c1siZGVmYXVsdCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwogIH0pKEFzeW5jR2VuZXJhdG9yKTsKICAoZnVuY3Rpb24obW9kdWxlKSB7CiAgICB2YXIgQXN5bmNHZW5lcmF0b3IkMSA9IEFzeW5jR2VuZXJhdG9yLmV4cG9ydHM7CiAgICBmdW5jdGlvbiBfd3JhcEFzeW5jR2VuZXJhdG9yKGZuKSB7CiAgICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gbmV3IEFzeW5jR2VuZXJhdG9yJDEoZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKSk7CiAgICAgIH07CiAgICB9CiAgICBtb2R1bGUuZXhwb3J0cyA9IF93cmFwQXN5bmNHZW5lcmF0b3I7CiAgICBtb2R1bGUuZXhwb3J0c1siZGVmYXVsdCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwogIH0pKHdyYXBBc3luY0dlbmVyYXRvcik7CiAgdmFyIGF3YWl0QXN5bmNHZW5lcmF0b3IgPSB7IGV4cG9ydHM6IHt9IH07CiAgKGZ1bmN0aW9uKG1vZHVsZSkgewogICAgdmFyIEF3YWl0VmFsdWUkMSA9IEF3YWl0VmFsdWUuZXhwb3J0czsKICAgIGZ1bmN0aW9uIF9hd2FpdEFzeW5jR2VuZXJhdG9yKHZhbHVlKSB7CiAgICAgIHJldHVybiBuZXcgQXdhaXRWYWx1ZSQxKHZhbHVlKTsKICAgIH0KICAgIG1vZHVsZS5leHBvcnRzID0gX2F3YWl0QXN5bmNHZW5lcmF0b3I7CiAgICBtb2R1bGUuZXhwb3J0c1siZGVmYXVsdCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwogIH0pKGF3YWl0QXN5bmNHZW5lcmF0b3IpOwogIHZhciBhc3luY0dlbmVyYXRvckRlbGVnYXRlID0geyBleHBvcnRzOiB7fSB9OwogIChmdW5jdGlvbihtb2R1bGUpIHsKICAgIHZhciBfUHJvbWlzZSA9IHByb21pc2UkMTsKICAgIHZhciBfU3ltYm9sID0gc3ltYm9sOwogICAgdmFyIF9TeW1ib2wkaXRlcmF0b3IgPSBpdGVyYXRvcjsKICAgIGZ1bmN0aW9uIF9hc3luY0dlbmVyYXRvckRlbGVnYXRlKGlubmVyLCBhd2FpdFdyYXApIHsKICAgICAgdmFyIGl0ZXIgPSB7fSwgd2FpdGluZyA9IGZhbHNlOwogICAgICBmdW5jdGlvbiBwdW1wKGtleSwgdmFsdWUpIHsKICAgICAgICB3YWl0aW5nID0gdHJ1ZTsKICAgICAgICB2YWx1ZSA9IG5ldyBfUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKSB7CiAgICAgICAgICByZXNvbHZlKGlubmVyW2tleV0odmFsdWUpKTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gewogICAgICAgICAgZG9uZTogZmFsc2UsCiAgICAgICAgICB2YWx1ZTogYXdhaXRXcmFwKHZhbHVlKQogICAgICAgIH07CiAgICAgIH0KICAgICAgaXRlclt0eXBlb2YgX1N5bWJvbCAhPT0gInVuZGVmaW5lZCIgJiYgX1N5bWJvbCRpdGVyYXRvciB8fCAiQEBpdGVyYXRvciJdID0gZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH07CiAgICAgIGl0ZXIubmV4dCA9IGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgICAgaWYgKHdhaXRpbmcpIHsKICAgICAgICAgIHdhaXRpbmcgPSBmYWxzZTsKICAgICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHB1bXAoIm5leHQiLCB2YWx1ZSk7CiAgICAgIH07CiAgICAgIGlmICh0eXBlb2YgaW5uZXJbInRocm93Il0gPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICBpdGVyWyJ0aHJvdyJdID0gZnVuY3Rpb24odmFsdWUpIHsKICAgICAgICAgIGlmICh3YWl0aW5nKSB7CiAgICAgICAgICAgIHdhaXRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgdGhyb3cgdmFsdWU7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gcHVtcCgidGhyb3ciLCB2YWx1ZSk7CiAgICAgICAgfTsKICAgICAgfQogICAgICBpZiAodHlwZW9mIGlubmVyWyJyZXR1cm4iXSA9PT0gImZ1bmN0aW9uIikgewogICAgICAgIGl0ZXJbInJldHVybiJdID0gZnVuY3Rpb24odmFsdWUpIHsKICAgICAgICAgIGlmICh3YWl0aW5nKSB7CiAgICAgICAgICAgIHdhaXRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgcmV0dXJuIHZhbHVlOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHB1bXAoInJldHVybiIsIHZhbHVlKTsKICAgICAgICB9OwogICAgICB9CiAgICAgIHJldHVybiBpdGVyOwogICAgfQogICAgbW9kdWxlLmV4cG9ydHMgPSBfYXN5bmNHZW5lcmF0b3JEZWxlZ2F0ZTsKICAgIG1vZHVsZS5leHBvcnRzWyJkZWZhdWx0Il0gPSBtb2R1bGUuZXhwb3J0cywgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7CiAgfSkoYXN5bmNHZW5lcmF0b3JEZWxlZ2F0ZSk7CiAgdmFyIGFzeW5jSXRlcmF0b3IgPSB7IGV4cG9ydHM6IHt9IH07CiAgKGZ1bmN0aW9uKG1vZHVsZSkgewogICAgdmFyIF9TeW1ib2wgPSBzeW1ib2w7CiAgICB2YXIgX1N5bWJvbCRhc3luY0l0ZXJhdG9yID0gYXN5bmNJdGVyYXRvciQxOwogICAgdmFyIF9TeW1ib2wkaXRlcmF0b3IgPSBpdGVyYXRvcjsKICAgIHZhciBfZ2V0SXRlcmF0b3JNZXRob2QgPSBnZXRJdGVyYXRvck1ldGhvZCQyOwogICAgZnVuY3Rpb24gX2FzeW5jSXRlcmF0b3IoaXRlcmFibGUpIHsKICAgICAgdmFyIG1ldGhvZDsKICAgICAgaWYgKHR5cGVvZiBfU3ltYm9sICE9PSAidW5kZWZpbmVkIikgewogICAgICAgIGlmIChfU3ltYm9sJGFzeW5jSXRlcmF0b3IpCiAgICAgICAgICBtZXRob2QgPSBpdGVyYWJsZVtfU3ltYm9sJGFzeW5jSXRlcmF0b3JdOwogICAgICAgIGlmIChtZXRob2QgPT0gbnVsbCAmJiBfU3ltYm9sJGl0ZXJhdG9yKQogICAgICAgICAgbWV0aG9kID0gX2dldEl0ZXJhdG9yTWV0aG9kKGl0ZXJhYmxlKTsKICAgICAgfQogICAgICBpZiAobWV0aG9kID09IG51bGwpCiAgICAgICAgbWV0aG9kID0gaXRlcmFibGVbIkBAYXN5bmNJdGVyYXRvciJdOwogICAgICBpZiAobWV0aG9kID09IG51bGwpCiAgICAgICAgbWV0aG9kID0gaXRlcmFibGVbIkBAaXRlcmF0b3IiXTsKICAgICAgaWYgKG1ldGhvZCA9PSBudWxsKQogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIk9iamVjdCBpcyBub3QgYXN5bmMgaXRlcmFibGUiKTsKICAgICAgcmV0dXJuIG1ldGhvZC5jYWxsKGl0ZXJhYmxlKTsKICAgIH0KICAgIG1vZHVsZS5leHBvcnRzID0gX2FzeW5jSXRlcmF0b3I7CiAgICBtb2R1bGUuZXhwb3J0c1siZGVmYXVsdCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwogIH0pKGFzeW5jSXRlcmF0b3IpOwogIHZhciBidWZmZXIgPSB7fTsKICB2YXIgYmFzZTY0SnMgPSB7fTsKICBiYXNlNjRKcy5ieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aDsKICBiYXNlNjRKcy50b0J5dGVBcnJheSA9IHRvQnl0ZUFycmF5OwogIGJhc2U2NEpzLmZyb21CeXRlQXJyYXkgPSBmcm9tQnl0ZUFycmF5OwogIHZhciBsb29rdXAgPSBbXTsKICB2YXIgcmV2TG9va3VwID0gW107CiAgdmFyIEFyciA9IHR5cGVvZiBVaW50OEFycmF5ICE9PSAidW5kZWZpbmVkIiA/IFVpbnQ4QXJyYXkgOiBBcnJheTsKICB2YXIgY29kZSA9ICJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvIjsKICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29kZS5sZW5ndGg7IGkgPCBsZW47ICsraSkgewogICAgbG9va3VwW2ldID0gY29kZVtpXTsKICAgIHJldkxvb2t1cFtjb2RlLmNoYXJDb2RlQXQoaSldID0gaTsKICB9CiAgcmV2TG9va3VwWyItIi5jaGFyQ29kZUF0KDApXSA9IDYyOwogIHJldkxvb2t1cFsiXyIuY2hhckNvZGVBdCgwKV0gPSA2MzsKICBmdW5jdGlvbiBnZXRMZW5zKGI2NCkgewogICAgdmFyIGxlbjIgPSBiNjQubGVuZ3RoOwogICAgaWYgKGxlbjIgJSA0ID4gMCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgc3RyaW5nLiBMZW5ndGggbXVzdCBiZSBhIG11bHRpcGxlIG9mIDQiKTsKICAgIH0KICAgIHZhciB2YWxpZExlbiA9IGI2NC5pbmRleE9mKCI9Iik7CiAgICBpZiAodmFsaWRMZW4gPT09IC0xKQogICAgICB2YWxpZExlbiA9IGxlbjI7CiAgICB2YXIgcGxhY2VIb2xkZXJzTGVuID0gdmFsaWRMZW4gPT09IGxlbjIgPyAwIDogNCAtIHZhbGlkTGVuICUgNDsKICAgIHJldHVybiBbdmFsaWRMZW4sIHBsYWNlSG9sZGVyc0xlbl07CiAgfQogIGZ1bmN0aW9uIGJ5dGVMZW5ndGgoYjY0KSB7CiAgICB2YXIgbGVucyA9IGdldExlbnMoYjY0KTsKICAgIHZhciB2YWxpZExlbiA9IGxlbnNbMF07CiAgICB2YXIgcGxhY2VIb2xkZXJzTGVuID0gbGVuc1sxXTsKICAgIHJldHVybiAodmFsaWRMZW4gKyBwbGFjZUhvbGRlcnNMZW4pICogMyAvIDQgLSBwbGFjZUhvbGRlcnNMZW47CiAgfQogIGZ1bmN0aW9uIF9ieXRlTGVuZ3RoKGI2NCwgdmFsaWRMZW4sIHBsYWNlSG9sZGVyc0xlbikgewogICAgcmV0dXJuICh2YWxpZExlbiArIHBsYWNlSG9sZGVyc0xlbikgKiAzIC8gNCAtIHBsYWNlSG9sZGVyc0xlbjsKICB9CiAgZnVuY3Rpb24gdG9CeXRlQXJyYXkoYjY0KSB7CiAgICB2YXIgdG1wOwogICAgdmFyIGxlbnMgPSBnZXRMZW5zKGI2NCk7CiAgICB2YXIgdmFsaWRMZW4gPSBsZW5zWzBdOwogICAgdmFyIHBsYWNlSG9sZGVyc0xlbiA9IGxlbnNbMV07CiAgICB2YXIgYXJyID0gbmV3IEFycihfYnl0ZUxlbmd0aChiNjQsIHZhbGlkTGVuLCBwbGFjZUhvbGRlcnNMZW4pKTsKICAgIHZhciBjdXJCeXRlID0gMDsKICAgIHZhciBsZW4yID0gcGxhY2VIb2xkZXJzTGVuID4gMCA/IHZhbGlkTGVuIC0gNCA6IHZhbGlkTGVuOwogICAgdmFyIGkyOwogICAgZm9yIChpMiA9IDA7IGkyIDwgbGVuMjsgaTIgKz0gNCkgewogICAgICB0bXAgPSByZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaTIpXSA8PCAxOCB8IHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpMiArIDEpXSA8PCAxMiB8IHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpMiArIDIpXSA8PCA2IHwgcmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkyICsgMyldOwogICAgICBhcnJbY3VyQnl0ZSsrXSA9IHRtcCA+PiAxNiAmIDI1NTsKICAgICAgYXJyW2N1ckJ5dGUrK10gPSB0bXAgPj4gOCAmIDI1NTsKICAgICAgYXJyW2N1ckJ5dGUrK10gPSB0bXAgJiAyNTU7CiAgICB9CiAgICBpZiAocGxhY2VIb2xkZXJzTGVuID09PSAyKSB7CiAgICAgIHRtcCA9IHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpMildIDw8IDIgfCByZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaTIgKyAxKV0gPj4gNDsKICAgICAgYXJyW2N1ckJ5dGUrK10gPSB0bXAgJiAyNTU7CiAgICB9CiAgICBpZiAocGxhY2VIb2xkZXJzTGVuID09PSAxKSB7CiAgICAgIHRtcCA9IHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpMildIDw8IDEwIHwgcmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkyICsgMSldIDw8IDQgfCByZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaTIgKyAyKV0gPj4gMjsKICAgICAgYXJyW2N1ckJ5dGUrK10gPSB0bXAgPj4gOCAmIDI1NTsKICAgICAgYXJyW2N1ckJ5dGUrK10gPSB0bXAgJiAyNTU7CiAgICB9CiAgICByZXR1cm4gYXJyOwogIH0KICBmdW5jdGlvbiB0cmlwbGV0VG9CYXNlNjQobnVtKSB7CiAgICByZXR1cm4gbG9va3VwW251bSA+PiAxOCAmIDYzXSArIGxvb2t1cFtudW0gPj4gMTIgJiA2M10gKyBsb29rdXBbbnVtID4+IDYgJiA2M10gKyBsb29rdXBbbnVtICYgNjNdOwogIH0KICBmdW5jdGlvbiBlbmNvZGVDaHVuayh1aW50OCwgc3RhcnQsIGVuZCkgewogICAgdmFyIHRtcDsKICAgIHZhciBvdXRwdXQgPSBbXTsKICAgIGZvciAodmFyIGkyID0gc3RhcnQ7IGkyIDwgZW5kOyBpMiArPSAzKSB7CiAgICAgIHRtcCA9ICh1aW50OFtpMl0gPDwgMTYgJiAxNjcxMTY4MCkgKyAodWludDhbaTIgKyAxXSA8PCA4ICYgNjUyODApICsgKHVpbnQ4W2kyICsgMl0gJiAyNTUpOwogICAgICBvdXRwdXQucHVzaCh0cmlwbGV0VG9CYXNlNjQodG1wKSk7CiAgICB9CiAgICByZXR1cm4gb3V0cHV0LmpvaW4oIiIpOwogIH0KICBmdW5jdGlvbiBmcm9tQnl0ZUFycmF5KHVpbnQ4KSB7CiAgICB2YXIgdG1wOwogICAgdmFyIGxlbjIgPSB1aW50OC5sZW5ndGg7CiAgICB2YXIgZXh0cmFCeXRlcyA9IGxlbjIgJSAzOwogICAgdmFyIHBhcnRzID0gW107CiAgICB2YXIgbWF4Q2h1bmtMZW5ndGggPSAxNjM4MzsKICAgIGZvciAodmFyIGkyID0gMCwgbGVuMjIgPSBsZW4yIC0gZXh0cmFCeXRlczsgaTIgPCBsZW4yMjsgaTIgKz0gbWF4Q2h1bmtMZW5ndGgpIHsKICAgICAgcGFydHMucHVzaChlbmNvZGVDaHVuayh1aW50OCwgaTIsIGkyICsgbWF4Q2h1bmtMZW5ndGggPiBsZW4yMiA/IGxlbjIyIDogaTIgKyBtYXhDaHVua0xlbmd0aCkpOwogICAgfQogICAgaWYgKGV4dHJhQnl0ZXMgPT09IDEpIHsKICAgICAgdG1wID0gdWludDhbbGVuMiAtIDFdOwogICAgICBwYXJ0cy5wdXNoKGxvb2t1cFt0bXAgPj4gMl0gKyBsb29rdXBbdG1wIDw8IDQgJiA2M10gKyAiPT0iKTsKICAgIH0gZWxzZSBpZiAoZXh0cmFCeXRlcyA9PT0gMikgewogICAgICB0bXAgPSAodWludDhbbGVuMiAtIDJdIDw8IDgpICsgdWludDhbbGVuMiAtIDFdOwogICAgICBwYXJ0cy5wdXNoKGxvb2t1cFt0bXAgPj4gMTBdICsgbG9va3VwW3RtcCA+PiA0ICYgNjNdICsgbG9va3VwW3RtcCA8PCAyICYgNjNdICsgIj0iKTsKICAgIH0KICAgIHJldHVybiBwYXJ0cy5qb2luKCIiKTsKICB9CiAgdmFyIGllZWU3NTQgPSB7fTsKICAvKiEgaWVlZTc1NC4gQlNELTMtQ2xhdXNlIExpY2Vuc2UuIEZlcm9zcyBBYm91a2hhZGlqZWggPGh0dHBzOi8vZmVyb3NzLm9yZy9vcGVuc291cmNlPiAqLwogIGllZWU3NTQucmVhZCA9IGZ1bmN0aW9uKGJ1ZmZlcjIsIG9mZnNldCwgaXNMRSwgbUxlbiwgbkJ5dGVzKSB7CiAgICB2YXIgZSwgbTsKICAgIHZhciBlTGVuID0gbkJ5dGVzICogOCAtIG1MZW4gLSAxOwogICAgdmFyIGVNYXggPSAoMSA8PCBlTGVuKSAtIDE7CiAgICB2YXIgZUJpYXMgPSBlTWF4ID4+IDE7CiAgICB2YXIgbkJpdHMgPSAtNzsKICAgIHZhciBpMiA9IGlzTEUgPyBuQnl0ZXMgLSAxIDogMDsKICAgIHZhciBkID0gaXNMRSA/IC0xIDogMTsKICAgIHZhciBzID0gYnVmZmVyMltvZmZzZXQgKyBpMl07CiAgICBpMiArPSBkOwogICAgZSA9IHMgJiAoMSA8PCAtbkJpdHMpIC0gMTsKICAgIHMgPj49IC1uQml0czsKICAgIG5CaXRzICs9IGVMZW47CiAgICBmb3IgKDsgbkJpdHMgPiAwOyBlID0gZSAqIDI1NiArIGJ1ZmZlcjJbb2Zmc2V0ICsgaTJdLCBpMiArPSBkLCBuQml0cyAtPSA4KSB7CiAgICB9CiAgICBtID0gZSAmICgxIDw8IC1uQml0cykgLSAxOwogICAgZSA+Pj0gLW5CaXRzOwogICAgbkJpdHMgKz0gbUxlbjsKICAgIGZvciAoOyBuQml0cyA+IDA7IG0gPSBtICogMjU2ICsgYnVmZmVyMltvZmZzZXQgKyBpMl0sIGkyICs9IGQsIG5CaXRzIC09IDgpIHsKICAgIH0KICAgIGlmIChlID09PSAwKSB7CiAgICAgIGUgPSAxIC0gZUJpYXM7CiAgICB9IGVsc2UgaWYgKGUgPT09IGVNYXgpIHsKICAgICAgcmV0dXJuIG0gPyBOYU4gOiAocyA/IC0xIDogMSkgKiBJbmZpbml0eTsKICAgIH0gZWxzZSB7CiAgICAgIG0gPSBtICsgTWF0aC5wb3coMiwgbUxlbik7CiAgICAgIGUgPSBlIC0gZUJpYXM7CiAgICB9CiAgICByZXR1cm4gKHMgPyAtMSA6IDEpICogbSAqIE1hdGgucG93KDIsIGUgLSBtTGVuKTsKICB9OwogIGllZWU3NTQud3JpdGUgPSBmdW5jdGlvbihidWZmZXIyLCB2YWx1ZSwgb2Zmc2V0LCBpc0xFLCBtTGVuLCBuQnl0ZXMpIHsKICAgIHZhciBlLCBtLCBjMjsKICAgIHZhciBlTGVuID0gbkJ5dGVzICogOCAtIG1MZW4gLSAxOwogICAgdmFyIGVNYXggPSAoMSA8PCBlTGVuKSAtIDE7CiAgICB2YXIgZUJpYXMgPSBlTWF4ID4+IDE7CiAgICB2YXIgcnQgPSBtTGVuID09PSAyMyA/IE1hdGgucG93KDIsIC0yNCkgLSBNYXRoLnBvdygyLCAtNzcpIDogMDsKICAgIHZhciBpMiA9IGlzTEUgPyAwIDogbkJ5dGVzIC0gMTsKICAgIHZhciBkID0gaXNMRSA/IDEgOiAtMTsKICAgIHZhciBzID0gdmFsdWUgPCAwIHx8IHZhbHVlID09PSAwICYmIDEgLyB2YWx1ZSA8IDAgPyAxIDogMDsKICAgIHZhbHVlID0gTWF0aC5hYnModmFsdWUpOwogICAgaWYgKGlzTmFOKHZhbHVlKSB8fCB2YWx1ZSA9PT0gSW5maW5pdHkpIHsKICAgICAgbSA9IGlzTmFOKHZhbHVlKSA/IDEgOiAwOwogICAgICBlID0gZU1heDsKICAgIH0gZWxzZSB7CiAgICAgIGUgPSBNYXRoLmZsb29yKE1hdGgubG9nKHZhbHVlKSAvIE1hdGguTE4yKTsKICAgICAgaWYgKHZhbHVlICogKGMyID0gTWF0aC5wb3coMiwgLWUpKSA8IDEpIHsKICAgICAgICBlLS07CiAgICAgICAgYzIgKj0gMjsKICAgICAgfQogICAgICBpZiAoZSArIGVCaWFzID49IDEpIHsKICAgICAgICB2YWx1ZSArPSBydCAvIGMyOwogICAgICB9IGVsc2UgewogICAgICAgIHZhbHVlICs9IHJ0ICogTWF0aC5wb3coMiwgMSAtIGVCaWFzKTsKICAgICAgfQogICAgICBpZiAodmFsdWUgKiBjMiA+PSAyKSB7CiAgICAgICAgZSsrOwogICAgICAgIGMyIC89IDI7CiAgICAgIH0KICAgICAgaWYgKGUgKyBlQmlhcyA+PSBlTWF4KSB7CiAgICAgICAgbSA9IDA7CiAgICAgICAgZSA9IGVNYXg7CiAgICAgIH0gZWxzZSBpZiAoZSArIGVCaWFzID49IDEpIHsKICAgICAgICBtID0gKHZhbHVlICogYzIgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pOwogICAgICAgIGUgPSBlICsgZUJpYXM7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbSA9IHZhbHVlICogTWF0aC5wb3coMiwgZUJpYXMgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pOwogICAgICAgIGUgPSAwOwogICAgICB9CiAgICB9CiAgICBmb3IgKDsgbUxlbiA+PSA4OyBidWZmZXIyW29mZnNldCArIGkyXSA9IG0gJiAyNTUsIGkyICs9IGQsIG0gLz0gMjU2LCBtTGVuIC09IDgpIHsKICAgIH0KICAgIGUgPSBlIDw8IG1MZW4gfCBtOwogICAgZUxlbiArPSBtTGVuOwogICAgZm9yICg7IGVMZW4gPiAwOyBidWZmZXIyW29mZnNldCArIGkyXSA9IGUgJiAyNTUsIGkyICs9IGQsIGUgLz0gMjU2LCBlTGVuIC09IDgpIHsKICAgIH0KICAgIGJ1ZmZlcjJbb2Zmc2V0ICsgaTIgLSBkXSB8PSBzICogMTI4OwogIH07CiAgLyohCiAgICogVGhlIGJ1ZmZlciBtb2R1bGUgZnJvbSBub2RlLmpzLCBmb3IgdGhlIGJyb3dzZXIuCiAgICoKICAgKiBAYXV0aG9yICAgRmVyb3NzIEFib3VraGFkaWplaCA8aHR0cHM6Ly9mZXJvc3Mub3JnPgogICAqIEBsaWNlbnNlICBNSVQKICAgKi8KICAoZnVuY3Rpb24oZXhwb3J0cykgewogICAgY29uc3QgYmFzZTY0ID0gYmFzZTY0SnM7CiAgICBjb25zdCBpZWVlNzU0JDEgPSBpZWVlNzU0OwogICAgY29uc3QgY3VzdG9tSW5zcGVjdFN5bWJvbCA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIFN5bWJvbFsiZm9yIl0gPT09ICJmdW5jdGlvbiIgPyBTeW1ib2xbImZvciJdKCJub2RlanMudXRpbC5pbnNwZWN0LmN1c3RvbSIpIDogbnVsbDsKICAgIGV4cG9ydHMuQnVmZmVyID0gQnVmZmVyMjsKICAgIGV4cG9ydHMuU2xvd0J1ZmZlciA9IFNsb3dCdWZmZXI7CiAgICBleHBvcnRzLklOU1BFQ1RfTUFYX0JZVEVTID0gNTA7CiAgICBjb25zdCBLX01BWF9MRU5HVEggPSAyMTQ3NDgzNjQ3OwogICAgZXhwb3J0cy5rTWF4TGVuZ3RoID0gS19NQVhfTEVOR1RIOwogICAgQnVmZmVyMi5UWVBFRF9BUlJBWV9TVVBQT1JUID0gdHlwZWRBcnJheVN1cHBvcnQoKTsKICAgIGlmICghQnVmZmVyMi5UWVBFRF9BUlJBWV9TVVBQT1JUICYmIHR5cGVvZiBjb25zb2xlICE9PSAidW5kZWZpbmVkIiAmJiB0eXBlb2YgY29uc29sZS5lcnJvciA9PT0gImZ1bmN0aW9uIikgewogICAgICBjb25zb2xlLmVycm9yKCJUaGlzIGJyb3dzZXIgbGFja3MgdHlwZWQgYXJyYXkgKFVpbnQ4QXJyYXkpIHN1cHBvcnQgd2hpY2ggaXMgcmVxdWlyZWQgYnkgYGJ1ZmZlcmAgdjUueC4gVXNlIGBidWZmZXJgIHY0LnggaWYgeW91IHJlcXVpcmUgb2xkIGJyb3dzZXIgc3VwcG9ydC4iKTsKICAgIH0KICAgIGZ1bmN0aW9uIHR5cGVkQXJyYXlTdXBwb3J0KCkgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IGFyciA9IG5ldyBVaW50OEFycmF5KDEpOwogICAgICAgIGNvbnN0IHByb3RvID0geyBmb286IGZ1bmN0aW9uKCkgewogICAgICAgICAgcmV0dXJuIDQyOwogICAgICAgIH0gfTsKICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YocHJvdG8sIFVpbnQ4QXJyYXkucHJvdG90eXBlKTsKICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YoYXJyLCBwcm90byk7CiAgICAgICAgcmV0dXJuIGFyci5mb28oKSA9PT0gNDI7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0KICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCdWZmZXIyLnByb3RvdHlwZSwgInBhcmVudCIsIHsKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgICBpZiAoIUJ1ZmZlcjIuaXNCdWZmZXIodGhpcykpCiAgICAgICAgICByZXR1cm4gdm9pZCAwOwogICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlcjsKICAgICAgfQogICAgfSk7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQnVmZmVyMi5wcm90b3R5cGUsICJvZmZzZXQiLCB7CiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGdldDogZnVuY3Rpb24oKSB7CiAgICAgICAgaWYgKCFCdWZmZXIyLmlzQnVmZmVyKHRoaXMpKQogICAgICAgICAgcmV0dXJuIHZvaWQgMDsKICAgICAgICByZXR1cm4gdGhpcy5ieXRlT2Zmc2V0OwogICAgICB9CiAgICB9KTsKICAgIGZ1bmN0aW9uIGNyZWF0ZUJ1ZmZlcihsZW5ndGgpIHsKICAgICAgaWYgKGxlbmd0aCA+IEtfTUFYX0xFTkdUSCkgewogICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgdmFsdWUgIicgKyBsZW5ndGggKyAnIiBpcyBpbnZhbGlkIGZvciBvcHRpb24gInNpemUiJyk7CiAgICAgIH0KICAgICAgY29uc3QgYnVmID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoKTsKICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKGJ1ZiwgQnVmZmVyMi5wcm90b3R5cGUpOwogICAgICByZXR1cm4gYnVmOwogICAgfQogICAgZnVuY3Rpb24gQnVmZmVyMihhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkgewogICAgICBpZiAodHlwZW9mIGFyZyA9PT0gIm51bWJlciIpIHsKICAgICAgICBpZiAodHlwZW9mIGVuY29kaW5nT3JPZmZzZXQgPT09ICJzdHJpbmciKSB7CiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgInN0cmluZyIgYXJndW1lbnQgbXVzdCBiZSBvZiB0eXBlIHN0cmluZy4gUmVjZWl2ZWQgdHlwZSBudW1iZXInKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGFsbG9jVW5zYWZlKGFyZyk7CiAgICAgIH0KICAgICAgcmV0dXJuIGZyb20yKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKTsKICAgIH0KICAgIEJ1ZmZlcjIucG9vbFNpemUgPSA4MTkyOwogICAgZnVuY3Rpb24gZnJvbTIodmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkgewogICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAic3RyaW5nIikgewogICAgICAgIHJldHVybiBmcm9tU3RyaW5nMih2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCk7CiAgICAgIH0KICAgICAgaWYgKEFycmF5QnVmZmVyLmlzVmlldyh2YWx1ZSkpIHsKICAgICAgICByZXR1cm4gZnJvbUFycmF5Vmlldyh2YWx1ZSk7CiAgICAgIH0KICAgICAgaWYgKHZhbHVlID09IG51bGwpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJUaGUgZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBvbmUgb2YgdHlwZSBzdHJpbmcsIEJ1ZmZlciwgQXJyYXlCdWZmZXIsIEFycmF5LCBvciBBcnJheS1saWtlIE9iamVjdC4gUmVjZWl2ZWQgdHlwZSAiICsgdHlwZW9mIHZhbHVlKTsKICAgICAgfQogICAgICBpZiAoaXNJbnN0YW5jZSh2YWx1ZSwgQXJyYXlCdWZmZXIpIHx8IHZhbHVlICYmIGlzSW5zdGFuY2UodmFsdWUuYnVmZmVyLCBBcnJheUJ1ZmZlcikpIHsKICAgICAgICByZXR1cm4gZnJvbUFycmF5QnVmZmVyKHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpOwogICAgICB9CiAgICAgIGlmICh0eXBlb2YgU2hhcmVkQXJyYXlCdWZmZXIgIT09ICJ1bmRlZmluZWQiICYmIChpc0luc3RhbmNlKHZhbHVlLCBTaGFyZWRBcnJheUJ1ZmZlcikgfHwgdmFsdWUgJiYgaXNJbnN0YW5jZSh2YWx1ZS5idWZmZXIsIFNoYXJlZEFycmF5QnVmZmVyKSkpIHsKICAgICAgICByZXR1cm4gZnJvbUFycmF5QnVmZmVyKHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpOwogICAgICB9CiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICJudW1iZXIiKSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlICJ2YWx1ZSIgYXJndW1lbnQgbXVzdCBub3QgYmUgb2YgdHlwZSBudW1iZXIuIFJlY2VpdmVkIHR5cGUgbnVtYmVyJyk7CiAgICAgIH0KICAgICAgY29uc3QgdmFsdWVPZjIgPSB2YWx1ZS52YWx1ZU9mICYmIHZhbHVlLnZhbHVlT2YoKTsKICAgICAgaWYgKHZhbHVlT2YyICE9IG51bGwgJiYgdmFsdWVPZjIgIT09IHZhbHVlKSB7CiAgICAgICAgcmV0dXJuIEJ1ZmZlcjIuZnJvbSh2YWx1ZU9mMiwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKTsKICAgICAgfQogICAgICBjb25zdCBiID0gZnJvbU9iamVjdCh2YWx1ZSk7CiAgICAgIGlmIChiKQogICAgICAgIHJldHVybiBiOwogICAgICBpZiAodHlwZW9mIFN5bWJvbCAhPT0gInVuZGVmaW5lZCIgJiYgU3ltYm9sLnRvUHJpbWl0aXZlICE9IG51bGwgJiYgdHlwZW9mIHZhbHVlW1N5bWJvbC50b1ByaW1pdGl2ZV0gPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICByZXR1cm4gQnVmZmVyMi5mcm9tKHZhbHVlW1N5bWJvbC50b1ByaW1pdGl2ZV0oInN0cmluZyIpLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpOwogICAgICB9CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIlRoZSBmaXJzdCBhcmd1bWVudCBtdXN0IGJlIG9uZSBvZiB0eXBlIHN0cmluZywgQnVmZmVyLCBBcnJheUJ1ZmZlciwgQXJyYXksIG9yIEFycmF5LWxpa2UgT2JqZWN0LiBSZWNlaXZlZCB0eXBlICIgKyB0eXBlb2YgdmFsdWUpOwogICAgfQogICAgQnVmZmVyMi5mcm9tID0gZnVuY3Rpb24odmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkgewogICAgICByZXR1cm4gZnJvbTIodmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCk7CiAgICB9OwogICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKEJ1ZmZlcjIucHJvdG90eXBlLCBVaW50OEFycmF5LnByb3RvdHlwZSk7CiAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YoQnVmZmVyMiwgVWludDhBcnJheSk7CiAgICBmdW5jdGlvbiBhc3NlcnRTaXplKHNpemUpIHsKICAgICAgaWYgKHR5cGVvZiBzaXplICE9PSAibnVtYmVyIikgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJyJzaXplIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgbnVtYmVyJyk7CiAgICAgIH0gZWxzZSBpZiAoc2l6ZSA8IDApIHsKICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVGhlIHZhbHVlICInICsgc2l6ZSArICciIGlzIGludmFsaWQgZm9yIG9wdGlvbiAic2l6ZSInKTsKICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gYWxsb2Moc2l6ZSwgZmlsbCwgZW5jb2RpbmcpIHsKICAgICAgYXNzZXJ0U2l6ZShzaXplKTsKICAgICAgaWYgKHNpemUgPD0gMCkgewogICAgICAgIHJldHVybiBjcmVhdGVCdWZmZXIoc2l6ZSk7CiAgICAgIH0KICAgICAgaWYgKGZpbGwgIT09IHZvaWQgMCkgewogICAgICAgIHJldHVybiB0eXBlb2YgZW5jb2RpbmcgPT09ICJzdHJpbmciID8gY3JlYXRlQnVmZmVyKHNpemUpLmZpbGwoZmlsbCwgZW5jb2RpbmcpIDogY3JlYXRlQnVmZmVyKHNpemUpLmZpbGwoZmlsbCk7CiAgICAgIH0KICAgICAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcihzaXplKTsKICAgIH0KICAgIEJ1ZmZlcjIuYWxsb2MgPSBmdW5jdGlvbihzaXplLCBmaWxsLCBlbmNvZGluZykgewogICAgICByZXR1cm4gYWxsb2Moc2l6ZSwgZmlsbCwgZW5jb2RpbmcpOwogICAgfTsKICAgIGZ1bmN0aW9uIGFsbG9jVW5zYWZlKHNpemUpIHsKICAgICAgYXNzZXJ0U2l6ZShzaXplKTsKICAgICAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcihzaXplIDwgMCA/IDAgOiBjaGVja2VkKHNpemUpIHwgMCk7CiAgICB9CiAgICBCdWZmZXIyLmFsbG9jVW5zYWZlID0gZnVuY3Rpb24oc2l6ZSkgewogICAgICByZXR1cm4gYWxsb2NVbnNhZmUoc2l6ZSk7CiAgICB9OwogICAgQnVmZmVyMi5hbGxvY1Vuc2FmZVNsb3cgPSBmdW5jdGlvbihzaXplKSB7CiAgICAgIHJldHVybiBhbGxvY1Vuc2FmZShzaXplKTsKICAgIH07CiAgICBmdW5jdGlvbiBmcm9tU3RyaW5nMihzdHJpbmcsIGVuY29kaW5nKSB7CiAgICAgIGlmICh0eXBlb2YgZW5jb2RpbmcgIT09ICJzdHJpbmciIHx8IGVuY29kaW5nID09PSAiIikgewogICAgICAgIGVuY29kaW5nID0gInV0ZjgiOwogICAgICB9CiAgICAgIGlmICghQnVmZmVyMi5pc0VuY29kaW5nKGVuY29kaW5nKSkgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIlVua25vd24gZW5jb2Rpbmc6ICIgKyBlbmNvZGluZyk7CiAgICAgIH0KICAgICAgY29uc3QgbGVuZ3RoID0gYnl0ZUxlbmd0aDIoc3RyaW5nLCBlbmNvZGluZykgfCAwOwogICAgICBsZXQgYnVmID0gY3JlYXRlQnVmZmVyKGxlbmd0aCk7CiAgICAgIGNvbnN0IGFjdHVhbCA9IGJ1Zi53cml0ZShzdHJpbmcsIGVuY29kaW5nKTsKICAgICAgaWYgKGFjdHVhbCAhPT0gbGVuZ3RoKSB7CiAgICAgICAgYnVmID0gYnVmLnNsaWNlKDAsIGFjdHVhbCk7CiAgICAgIH0KICAgICAgcmV0dXJuIGJ1ZjsKICAgIH0KICAgIGZ1bmN0aW9uIGZyb21BcnJheUxpa2UoYXJyYXkpIHsKICAgICAgY29uc3QgbGVuZ3RoID0gYXJyYXkubGVuZ3RoIDwgMCA/IDAgOiBjaGVja2VkKGFycmF5Lmxlbmd0aCkgfCAwOwogICAgICBjb25zdCBidWYgPSBjcmVhdGVCdWZmZXIobGVuZ3RoKTsKICAgICAgZm9yIChsZXQgaTIgPSAwOyBpMiA8IGxlbmd0aDsgaTIgKz0gMSkgewogICAgICAgIGJ1ZltpMl0gPSBhcnJheVtpMl0gJiAyNTU7CiAgICAgIH0KICAgICAgcmV0dXJuIGJ1ZjsKICAgIH0KICAgIGZ1bmN0aW9uIGZyb21BcnJheVZpZXcoYXJyYXlWaWV3KSB7CiAgICAgIGlmIChpc0luc3RhbmNlKGFycmF5VmlldywgVWludDhBcnJheSkpIHsKICAgICAgICBjb25zdCBjb3B5ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlWaWV3KTsKICAgICAgICByZXR1cm4gZnJvbUFycmF5QnVmZmVyKGNvcHkuYnVmZmVyLCBjb3B5LmJ5dGVPZmZzZXQsIGNvcHkuYnl0ZUxlbmd0aCk7CiAgICAgIH0KICAgICAgcmV0dXJuIGZyb21BcnJheUxpa2UoYXJyYXlWaWV3KTsKICAgIH0KICAgIGZ1bmN0aW9uIGZyb21BcnJheUJ1ZmZlcihhcnJheSwgYnl0ZU9mZnNldCwgbGVuZ3RoKSB7CiAgICAgIGlmIChieXRlT2Zmc2V0IDwgMCB8fCBhcnJheS5ieXRlTGVuZ3RoIDwgYnl0ZU9mZnNldCkgewogICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCcib2Zmc2V0IiBpcyBvdXRzaWRlIG9mIGJ1ZmZlciBib3VuZHMnKTsKICAgICAgfQogICAgICBpZiAoYXJyYXkuYnl0ZUxlbmd0aCA8IGJ5dGVPZmZzZXQgKyAobGVuZ3RoIHx8IDApKSB7CiAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJyJsZW5ndGgiIGlzIG91dHNpZGUgb2YgYnVmZmVyIGJvdW5kcycpOwogICAgICB9CiAgICAgIGxldCBidWY7CiAgICAgIGlmIChieXRlT2Zmc2V0ID09PSB2b2lkIDAgJiYgbGVuZ3RoID09PSB2b2lkIDApIHsKICAgICAgICBidWYgPSBuZXcgVWludDhBcnJheShhcnJheSk7CiAgICAgIH0gZWxzZSBpZiAobGVuZ3RoID09PSB2b2lkIDApIHsKICAgICAgICBidWYgPSBuZXcgVWludDhBcnJheShhcnJheSwgYnl0ZU9mZnNldCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYnVmID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXksIGJ5dGVPZmZzZXQsIGxlbmd0aCk7CiAgICAgIH0KICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKGJ1ZiwgQnVmZmVyMi5wcm90b3R5cGUpOwogICAgICByZXR1cm4gYnVmOwogICAgfQogICAgZnVuY3Rpb24gZnJvbU9iamVjdChvYmopIHsKICAgICAgaWYgKEJ1ZmZlcjIuaXNCdWZmZXIob2JqKSkgewogICAgICAgIGNvbnN0IGxlbjIgPSBjaGVja2VkKG9iai5sZW5ndGgpIHwgMDsKICAgICAgICBjb25zdCBidWYgPSBjcmVhdGVCdWZmZXIobGVuMik7CiAgICAgICAgaWYgKGJ1Zi5sZW5ndGggPT09IDApIHsKICAgICAgICAgIHJldHVybiBidWY7CiAgICAgICAgfQogICAgICAgIG9iai5jb3B5KGJ1ZiwgMCwgMCwgbGVuMik7CiAgICAgICAgcmV0dXJuIGJ1ZjsKICAgICAgfQogICAgICBpZiAob2JqLmxlbmd0aCAhPT0gdm9pZCAwKSB7CiAgICAgICAgaWYgKHR5cGVvZiBvYmoubGVuZ3RoICE9PSAibnVtYmVyIiB8fCBudW1iZXJJc05hTihvYmoubGVuZ3RoKSkgewogICAgICAgICAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcigwKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZyb21BcnJheUxpa2Uob2JqKTsKICAgICAgfQogICAgICBpZiAob2JqLnR5cGUgPT09ICJCdWZmZXIiICYmIEFycmF5LmlzQXJyYXkob2JqLmRhdGEpKSB7CiAgICAgICAgcmV0dXJuIGZyb21BcnJheUxpa2Uob2JqLmRhdGEpOwogICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBjaGVja2VkKGxlbmd0aCkgewogICAgICBpZiAobGVuZ3RoID49IEtfTUFYX0xFTkdUSCkgewogICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCJBdHRlbXB0IHRvIGFsbG9jYXRlIEJ1ZmZlciBsYXJnZXIgdGhhbiBtYXhpbXVtIHNpemU6IDB4IiArIEtfTUFYX0xFTkdUSC50b1N0cmluZygxNikgKyAiIGJ5dGVzIik7CiAgICAgIH0KICAgICAgcmV0dXJuIGxlbmd0aCB8IDA7CiAgICB9CiAgICBmdW5jdGlvbiBTbG93QnVmZmVyKGxlbmd0aCkgewogICAgICBpZiAoK2xlbmd0aCAhPSBsZW5ndGgpIHsKICAgICAgICBsZW5ndGggPSAwOwogICAgICB9CiAgICAgIHJldHVybiBCdWZmZXIyLmFsbG9jKCtsZW5ndGgpOwogICAgfQogICAgQnVmZmVyMi5pc0J1ZmZlciA9IGZ1bmN0aW9uIGlzQnVmZmVyKGIpIHsKICAgICAgcmV0dXJuIGIgIT0gbnVsbCAmJiBiLl9pc0J1ZmZlciA9PT0gdHJ1ZSAmJiBiICE9PSBCdWZmZXIyLnByb3RvdHlwZTsKICAgIH07CiAgICBCdWZmZXIyLmNvbXBhcmUgPSBmdW5jdGlvbiBjb21wYXJlKGEsIGIpIHsKICAgICAgaWYgKGlzSW5zdGFuY2UoYSwgVWludDhBcnJheSkpCiAgICAgICAgYSA9IEJ1ZmZlcjIuZnJvbShhLCBhLm9mZnNldCwgYS5ieXRlTGVuZ3RoKTsKICAgICAgaWYgKGlzSW5zdGFuY2UoYiwgVWludDhBcnJheSkpCiAgICAgICAgYiA9IEJ1ZmZlcjIuZnJvbShiLCBiLm9mZnNldCwgYi5ieXRlTGVuZ3RoKTsKICAgICAgaWYgKCFCdWZmZXIyLmlzQnVmZmVyKGEpIHx8ICFCdWZmZXIyLmlzQnVmZmVyKGIpKSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlICJidWYxIiwgImJ1ZjIiIGFyZ3VtZW50cyBtdXN0IGJlIG9uZSBvZiB0eXBlIEJ1ZmZlciBvciBVaW50OEFycmF5Jyk7CiAgICAgIH0KICAgICAgaWYgKGEgPT09IGIpCiAgICAgICAgcmV0dXJuIDA7CiAgICAgIGxldCB4ID0gYS5sZW5ndGg7CiAgICAgIGxldCB5ID0gYi5sZW5ndGg7CiAgICAgIGZvciAobGV0IGkyID0gMCwgbGVuMiA9IE1hdGgubWluKHgsIHkpOyBpMiA8IGxlbjI7ICsraTIpIHsKICAgICAgICBpZiAoYVtpMl0gIT09IGJbaTJdKSB7CiAgICAgICAgICB4ID0gYVtpMl07CiAgICAgICAgICB5ID0gYltpMl07CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKHggPCB5KQogICAgICAgIHJldHVybiAtMTsKICAgICAgaWYgKHkgPCB4KQogICAgICAgIHJldHVybiAxOwogICAgICByZXR1cm4gMDsKICAgIH07CiAgICBCdWZmZXIyLmlzRW5jb2RpbmcgPSBmdW5jdGlvbiBpc0VuY29kaW5nKGVuY29kaW5nKSB7CiAgICAgIHN3aXRjaCAoU3RyaW5nKGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpKSB7CiAgICAgICAgY2FzZSAiaGV4IjoKICAgICAgICBjYXNlICJ1dGY4IjoKICAgICAgICBjYXNlICJ1dGYtOCI6CiAgICAgICAgY2FzZSAiYXNjaWkiOgogICAgICAgIGNhc2UgImxhdGluMSI6CiAgICAgICAgY2FzZSAiYmluYXJ5IjoKICAgICAgICBjYXNlICJiYXNlNjQiOgogICAgICAgIGNhc2UgInVjczIiOgogICAgICAgIGNhc2UgInVjcy0yIjoKICAgICAgICBjYXNlICJ1dGYxNmxlIjoKICAgICAgICBjYXNlICJ1dGYtMTZsZSI6CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9OwogICAgQnVmZmVyMi5jb25jYXQgPSBmdW5jdGlvbiBjb25jYXQyKGxpc3QsIGxlbmd0aCkgewogICAgICBpZiAoIUFycmF5LmlzQXJyYXkobGlzdCkpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCcibGlzdCIgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzJyk7CiAgICAgIH0KICAgICAgaWYgKGxpc3QubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuIEJ1ZmZlcjIuYWxsb2MoMCk7CiAgICAgIH0KICAgICAgbGV0IGkyOwogICAgICBpZiAobGVuZ3RoID09PSB2b2lkIDApIHsKICAgICAgICBsZW5ndGggPSAwOwogICAgICAgIGZvciAoaTIgPSAwOyBpMiA8IGxpc3QubGVuZ3RoOyArK2kyKSB7CiAgICAgICAgICBsZW5ndGggKz0gbGlzdFtpMl0ubGVuZ3RoOwogICAgICAgIH0KICAgICAgfQogICAgICBjb25zdCBidWZmZXIyID0gQnVmZmVyMi5hbGxvY1Vuc2FmZShsZW5ndGgpOwogICAgICBsZXQgcG9zID0gMDsKICAgICAgZm9yIChpMiA9IDA7IGkyIDwgbGlzdC5sZW5ndGg7ICsraTIpIHsKICAgICAgICBsZXQgYnVmID0gbGlzdFtpMl07CiAgICAgICAgaWYgKGlzSW5zdGFuY2UoYnVmLCBVaW50OEFycmF5KSkgewogICAgICAgICAgaWYgKHBvcyArIGJ1Zi5sZW5ndGggPiBidWZmZXIyLmxlbmd0aCkgewogICAgICAgICAgICBpZiAoIUJ1ZmZlcjIuaXNCdWZmZXIoYnVmKSkKICAgICAgICAgICAgICBidWYgPSBCdWZmZXIyLmZyb20oYnVmKTsKICAgICAgICAgICAgYnVmLmNvcHkoYnVmZmVyMiwgcG9zKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIFVpbnQ4QXJyYXkucHJvdG90eXBlLnNldC5jYWxsKGJ1ZmZlcjIsIGJ1ZiwgcG9zKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKCFCdWZmZXIyLmlzQnVmZmVyKGJ1ZikpIHsKICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJyJsaXN0IiBhcmd1bWVudCBtdXN0IGJlIGFuIEFycmF5IG9mIEJ1ZmZlcnMnKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYnVmLmNvcHkoYnVmZmVyMiwgcG9zKTsKICAgICAgICB9CiAgICAgICAgcG9zICs9IGJ1Zi5sZW5ndGg7CiAgICAgIH0KICAgICAgcmV0dXJuIGJ1ZmZlcjI7CiAgICB9OwogICAgZnVuY3Rpb24gYnl0ZUxlbmd0aDIoc3RyaW5nLCBlbmNvZGluZykgewogICAgICBpZiAoQnVmZmVyMi5pc0J1ZmZlcihzdHJpbmcpKSB7CiAgICAgICAgcmV0dXJuIHN0cmluZy5sZW5ndGg7CiAgICAgIH0KICAgICAgaWYgKEFycmF5QnVmZmVyLmlzVmlldyhzdHJpbmcpIHx8IGlzSW5zdGFuY2Uoc3RyaW5nLCBBcnJheUJ1ZmZlcikpIHsKICAgICAgICByZXR1cm4gc3RyaW5nLmJ5dGVMZW5ndGg7CiAgICAgIH0KICAgICAgaWYgKHR5cGVvZiBzdHJpbmcgIT09ICJzdHJpbmciKSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlICJzdHJpbmciIGFyZ3VtZW50IG11c3QgYmUgb25lIG9mIHR5cGUgc3RyaW5nLCBCdWZmZXIsIG9yIEFycmF5QnVmZmVyLiBSZWNlaXZlZCB0eXBlICcgKyB0eXBlb2Ygc3RyaW5nKTsKICAgICAgfQogICAgICBjb25zdCBsZW4yID0gc3RyaW5nLmxlbmd0aDsKICAgICAgY29uc3QgbXVzdE1hdGNoID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdID09PSB0cnVlOwogICAgICBpZiAoIW11c3RNYXRjaCAmJiBsZW4yID09PSAwKQogICAgICAgIHJldHVybiAwOwogICAgICBsZXQgbG93ZXJlZENhc2UgPSBmYWxzZTsKICAgICAgZm9yICg7IDsgKSB7CiAgICAgICAgc3dpdGNoIChlbmNvZGluZykgewogICAgICAgICAgY2FzZSAiYXNjaWkiOgogICAgICAgICAgY2FzZSAibGF0aW4xIjoKICAgICAgICAgIGNhc2UgImJpbmFyeSI6CiAgICAgICAgICAgIHJldHVybiBsZW4yOwogICAgICAgICAgY2FzZSAidXRmOCI6CiAgICAgICAgICBjYXNlICJ1dGYtOCI6CiAgICAgICAgICAgIHJldHVybiB1dGY4VG9CeXRlcyhzdHJpbmcpLmxlbmd0aDsKICAgICAgICAgIGNhc2UgInVjczIiOgogICAgICAgICAgY2FzZSAidWNzLTIiOgogICAgICAgICAgY2FzZSAidXRmMTZsZSI6CiAgICAgICAgICBjYXNlICJ1dGYtMTZsZSI6CiAgICAgICAgICAgIHJldHVybiBsZW4yICogMjsKICAgICAgICAgIGNhc2UgImhleCI6CiAgICAgICAgICAgIHJldHVybiBsZW4yID4+PiAxOwogICAgICAgICAgY2FzZSAiYmFzZTY0IjoKICAgICAgICAgICAgcmV0dXJuIGJhc2U2NFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGg7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICBpZiAobG93ZXJlZENhc2UpIHsKICAgICAgICAgICAgICByZXR1cm4gbXVzdE1hdGNoID8gLTEgOiB1dGY4VG9CeXRlcyhzdHJpbmcpLmxlbmd0aDsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbmNvZGluZyA9ICgiIiArIGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBCdWZmZXIyLmJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoMjsKICAgIGZ1bmN0aW9uIHNsb3dUb1N0cmluZyhlbmNvZGluZywgc3RhcnQsIGVuZCkgewogICAgICBsZXQgbG93ZXJlZENhc2UgPSBmYWxzZTsKICAgICAgaWYgKHN0YXJ0ID09PSB2b2lkIDAgfHwgc3RhcnQgPCAwKSB7CiAgICAgICAgc3RhcnQgPSAwOwogICAgICB9CiAgICAgIGlmIChzdGFydCA+IHRoaXMubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuICIiOwogICAgICB9CiAgICAgIGlmIChlbmQgPT09IHZvaWQgMCB8fCBlbmQgPiB0aGlzLmxlbmd0aCkgewogICAgICAgIGVuZCA9IHRoaXMubGVuZ3RoOwogICAgICB9CiAgICAgIGlmIChlbmQgPD0gMCkgewogICAgICAgIHJldHVybiAiIjsKICAgICAgfQogICAgICBlbmQgPj4+PSAwOwogICAgICBzdGFydCA+Pj49IDA7CiAgICAgIGlmIChlbmQgPD0gc3RhcnQpIHsKICAgICAgICByZXR1cm4gIiI7CiAgICAgIH0KICAgICAgaWYgKCFlbmNvZGluZykKICAgICAgICBlbmNvZGluZyA9ICJ1dGY4IjsKICAgICAgd2hpbGUgKHRydWUpIHsKICAgICAgICBzd2l0Y2ggKGVuY29kaW5nKSB7CiAgICAgICAgICBjYXNlICJoZXgiOgogICAgICAgICAgICByZXR1cm4gaGV4U2xpY2UodGhpcywgc3RhcnQsIGVuZCk7CiAgICAgICAgICBjYXNlICJ1dGY4IjoKICAgICAgICAgIGNhc2UgInV0Zi04IjoKICAgICAgICAgICAgcmV0dXJuIHV0ZjhTbGljZSh0aGlzLCBzdGFydCwgZW5kKTsKICAgICAgICAgIGNhc2UgImFzY2lpIjoKICAgICAgICAgICAgcmV0dXJuIGFzY2lpU2xpY2UodGhpcywgc3RhcnQsIGVuZCk7CiAgICAgICAgICBjYXNlICJsYXRpbjEiOgogICAgICAgICAgY2FzZSAiYmluYXJ5IjoKICAgICAgICAgICAgcmV0dXJuIGxhdGluMVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpOwogICAgICAgICAgY2FzZSAiYmFzZTY0IjoKICAgICAgICAgICAgcmV0dXJuIGJhc2U2NFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpOwogICAgICAgICAgY2FzZSAidWNzMiI6CiAgICAgICAgICBjYXNlICJ1Y3MtMiI6CiAgICAgICAgICBjYXNlICJ1dGYxNmxlIjoKICAgICAgICAgIGNhc2UgInV0Zi0xNmxlIjoKICAgICAgICAgICAgcmV0dXJuIHV0ZjE2bGVTbGljZSh0aGlzLCBzdGFydCwgZW5kKTsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIGlmIChsb3dlcmVkQ2FzZSkKICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJVbmtub3duIGVuY29kaW5nOiAiICsgZW5jb2RpbmcpOwogICAgICAgICAgICBlbmNvZGluZyA9IChlbmNvZGluZyArICIiKS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBCdWZmZXIyLnByb3RvdHlwZS5faXNCdWZmZXIgPSB0cnVlOwogICAgZnVuY3Rpb24gc3dhcChiLCBuLCBtKSB7CiAgICAgIGNvbnN0IGkyID0gYltuXTsKICAgICAgYltuXSA9IGJbbV07CiAgICAgIGJbbV0gPSBpMjsKICAgIH0KICAgIEJ1ZmZlcjIucHJvdG90eXBlLnN3YXAxNiA9IGZ1bmN0aW9uIHN3YXAxNigpIHsKICAgICAgY29uc3QgbGVuMiA9IHRoaXMubGVuZ3RoOwogICAgICBpZiAobGVuMiAlIDIgIT09IDApIHsKICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDE2LWJpdHMiKTsKICAgICAgfQogICAgICBmb3IgKGxldCBpMiA9IDA7IGkyIDwgbGVuMjsgaTIgKz0gMikgewogICAgICAgIHN3YXAodGhpcywgaTIsIGkyICsgMSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXM7CiAgICB9OwogICAgQnVmZmVyMi5wcm90b3R5cGUuc3dhcDMyID0gZnVuY3Rpb24gc3dhcDMyKCkgewogICAgICBjb25zdCBsZW4yID0gdGhpcy5sZW5ndGg7CiAgICAgIGlmIChsZW4yICUgNCAhPT0gMCkgewogICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCJCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgMzItYml0cyIpOwogICAgICB9CiAgICAgIGZvciAobGV0IGkyID0gMDsgaTIgPCBsZW4yOyBpMiArPSA0KSB7CiAgICAgICAgc3dhcCh0aGlzLCBpMiwgaTIgKyAzKTsKICAgICAgICBzd2FwKHRoaXMsIGkyICsgMSwgaTIgKyAyKTsKICAgICAgfQogICAgICByZXR1cm4gdGhpczsKICAgIH07CiAgICBCdWZmZXIyLnByb3RvdHlwZS5zd2FwNjQgPSBmdW5jdGlvbiBzd2FwNjQoKSB7CiAgICAgIGNvbnN0IGxlbjIgPSB0aGlzLmxlbmd0aDsKICAgICAgaWYgKGxlbjIgJSA4ICE9PSAwKSB7CiAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkJ1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA2NC1iaXRzIik7CiAgICAgIH0KICAgICAgZm9yIChsZXQgaTIgPSAwOyBpMiA8IGxlbjI7IGkyICs9IDgpIHsKICAgICAgICBzd2FwKHRoaXMsIGkyLCBpMiArIDcpOwogICAgICAgIHN3YXAodGhpcywgaTIgKyAxLCBpMiArIDYpOwogICAgICAgIHN3YXAodGhpcywgaTIgKyAyLCBpMiArIDUpOwogICAgICAgIHN3YXAodGhpcywgaTIgKyAzLCBpMiArIDQpOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzOwogICAgfTsKICAgIEJ1ZmZlcjIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcyKCkgewogICAgICBjb25zdCBsZW5ndGggPSB0aGlzLmxlbmd0aDsKICAgICAgaWYgKGxlbmd0aCA9PT0gMCkKICAgICAgICByZXR1cm4gIiI7CiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKQogICAgICAgIHJldHVybiB1dGY4U2xpY2UodGhpcywgMCwgbGVuZ3RoKTsKICAgICAgcmV0dXJuIHNsb3dUb1N0cmluZy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICAgIEJ1ZmZlcjIucHJvdG90eXBlLnRvTG9jYWxlU3RyaW5nID0gQnVmZmVyMi5wcm90b3R5cGUudG9TdHJpbmc7CiAgICBCdWZmZXIyLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiBlcXVhbHMoYikgewogICAgICBpZiAoIUJ1ZmZlcjIuaXNCdWZmZXIoYikpCiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlciIpOwogICAgICBpZiAodGhpcyA9PT0gYikKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgcmV0dXJuIEJ1ZmZlcjIuY29tcGFyZSh0aGlzLCBiKSA9PT0gMDsKICAgIH07CiAgICBCdWZmZXIyLnByb3RvdHlwZS5pbnNwZWN0ID0gZnVuY3Rpb24gaW5zcGVjdCgpIHsKICAgICAgbGV0IHN0ciA9ICIiOwogICAgICBjb25zdCBtYXgyID0gZXhwb3J0cy5JTlNQRUNUX01BWF9CWVRFUzsKICAgICAgc3RyID0gdGhpcy50b1N0cmluZygiaGV4IiwgMCwgbWF4MikucmVwbGFjZSgvKC57Mn0pL2csICIkMSAiKS50cmltKCk7CiAgICAgIGlmICh0aGlzLmxlbmd0aCA+IG1heDIpCiAgICAgICAgc3RyICs9ICIgLi4uICI7CiAgICAgIHJldHVybiAiPEJ1ZmZlciAiICsgc3RyICsgIj4iOwogICAgfTsKICAgIGlmIChjdXN0b21JbnNwZWN0U3ltYm9sKSB7CiAgICAgIEJ1ZmZlcjIucHJvdG90eXBlW2N1c3RvbUluc3BlY3RTeW1ib2xdID0gQnVmZmVyMi5wcm90b3R5cGUuaW5zcGVjdDsKICAgIH0KICAgIEJ1ZmZlcjIucHJvdG90eXBlLmNvbXBhcmUgPSBmdW5jdGlvbiBjb21wYXJlKHRhcmdldCwgc3RhcnQsIGVuZCwgdGhpc1N0YXJ0LCB0aGlzRW5kKSB7CiAgICAgIGlmIChpc0luc3RhbmNlKHRhcmdldCwgVWludDhBcnJheSkpIHsKICAgICAgICB0YXJnZXQgPSBCdWZmZXIyLmZyb20odGFyZ2V0LCB0YXJnZXQub2Zmc2V0LCB0YXJnZXQuYnl0ZUxlbmd0aCk7CiAgICAgIH0KICAgICAgaWYgKCFCdWZmZXIyLmlzQnVmZmVyKHRhcmdldCkpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgInRhcmdldCIgYXJndW1lbnQgbXVzdCBiZSBvbmUgb2YgdHlwZSBCdWZmZXIgb3IgVWludDhBcnJheS4gUmVjZWl2ZWQgdHlwZSAnICsgdHlwZW9mIHRhcmdldCk7CiAgICAgIH0KICAgICAgaWYgKHN0YXJ0ID09PSB2b2lkIDApIHsKICAgICAgICBzdGFydCA9IDA7CiAgICAgIH0KICAgICAgaWYgKGVuZCA9PT0gdm9pZCAwKSB7CiAgICAgICAgZW5kID0gdGFyZ2V0ID8gdGFyZ2V0Lmxlbmd0aCA6IDA7CiAgICAgIH0KICAgICAgaWYgKHRoaXNTdGFydCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGhpc1N0YXJ0ID0gMDsKICAgICAgfQogICAgICBpZiAodGhpc0VuZCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGhpc0VuZCA9IHRoaXMubGVuZ3RoOwogICAgICB9CiAgICAgIGlmIChzdGFydCA8IDAgfHwgZW5kID4gdGFyZ2V0Lmxlbmd0aCB8fCB0aGlzU3RhcnQgPCAwIHx8IHRoaXNFbmQgPiB0aGlzLmxlbmd0aCkgewogICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCJvdXQgb2YgcmFuZ2UgaW5kZXgiKTsKICAgICAgfQogICAgICBpZiAodGhpc1N0YXJ0ID49IHRoaXNFbmQgJiYgc3RhcnQgPj0gZW5kKSB7CiAgICAgICAgcmV0dXJuIDA7CiAgICAgIH0KICAgICAgaWYgKHRoaXNTdGFydCA+PSB0aGlzRW5kKSB7CiAgICAgICAgcmV0dXJuIC0xOwogICAgICB9CiAgICAgIGlmIChzdGFydCA+PSBlbmQpIHsKICAgICAgICByZXR1cm4gMTsKICAgICAgfQogICAgICBzdGFydCA+Pj49IDA7CiAgICAgIGVuZCA+Pj49IDA7CiAgICAgIHRoaXNTdGFydCA+Pj49IDA7CiAgICAgIHRoaXNFbmQgPj4+PSAwOwogICAgICBpZiAodGhpcyA9PT0gdGFyZ2V0KQogICAgICAgIHJldHVybiAwOwogICAgICBsZXQgeCA9IHRoaXNFbmQgLSB0aGlzU3RhcnQ7CiAgICAgIGxldCB5ID0gZW5kIC0gc3RhcnQ7CiAgICAgIGNvbnN0IGxlbjIgPSBNYXRoLm1pbih4LCB5KTsKICAgICAgY29uc3QgdGhpc0NvcHkgPSB0aGlzLnNsaWNlKHRoaXNTdGFydCwgdGhpc0VuZCk7CiAgICAgIGNvbnN0IHRhcmdldENvcHkgPSB0YXJnZXQuc2xpY2Uoc3RhcnQsIGVuZCk7CiAgICAgIGZvciAobGV0IGkyID0gMDsgaTIgPCBsZW4yOyArK2kyKSB7CiAgICAgICAgaWYgKHRoaXNDb3B5W2kyXSAhPT0gdGFyZ2V0Q29weVtpMl0pIHsKICAgICAgICAgIHggPSB0aGlzQ29weVtpMl07CiAgICAgICAgICB5ID0gdGFyZ2V0Q29weVtpMl07CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKHggPCB5KQogICAgICAgIHJldHVybiAtMTsKICAgICAgaWYgKHkgPCB4KQogICAgICAgIHJldHVybiAxOwogICAgICByZXR1cm4gMDsKICAgIH07CiAgICBmdW5jdGlvbiBiaWRpcmVjdGlvbmFsSW5kZXhPZihidWZmZXIyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpIHsKICAgICAgaWYgKGJ1ZmZlcjIubGVuZ3RoID09PSAwKQogICAgICAgIHJldHVybiAtMTsKICAgICAgaWYgKHR5cGVvZiBieXRlT2Zmc2V0ID09PSAic3RyaW5nIikgewogICAgICAgIGVuY29kaW5nID0gYnl0ZU9mZnNldDsKICAgICAgICBieXRlT2Zmc2V0ID0gMDsKICAgICAgfSBlbHNlIGlmIChieXRlT2Zmc2V0ID4gMjE0NzQ4MzY0NykgewogICAgICAgIGJ5dGVPZmZzZXQgPSAyMTQ3NDgzNjQ3OwogICAgICB9IGVsc2UgaWYgKGJ5dGVPZmZzZXQgPCAtMjE0NzQ4MzY0OCkgewogICAgICAgIGJ5dGVPZmZzZXQgPSAtMjE0NzQ4MzY0ODsKICAgICAgfQogICAgICBieXRlT2Zmc2V0ID0gK2J5dGVPZmZzZXQ7CiAgICAgIGlmIChudW1iZXJJc05hTihieXRlT2Zmc2V0KSkgewogICAgICAgIGJ5dGVPZmZzZXQgPSBkaXIgPyAwIDogYnVmZmVyMi5sZW5ndGggLSAxOwogICAgICB9CiAgICAgIGlmIChieXRlT2Zmc2V0IDwgMCkKICAgICAgICBieXRlT2Zmc2V0ID0gYnVmZmVyMi5sZW5ndGggKyBieXRlT2Zmc2V0OwogICAgICBpZiAoYnl0ZU9mZnNldCA+PSBidWZmZXIyLmxlbmd0aCkgewogICAgICAgIGlmIChkaXIpCiAgICAgICAgICByZXR1cm4gLTE7CiAgICAgICAgZWxzZQogICAgICAgICAgYnl0ZU9mZnNldCA9IGJ1ZmZlcjIubGVuZ3RoIC0gMTsKICAgICAgfSBlbHNlIGlmIChieXRlT2Zmc2V0IDwgMCkgewogICAgICAgIGlmIChkaXIpCiAgICAgICAgICBieXRlT2Zmc2V0ID0gMDsKICAgICAgICBlbHNlCiAgICAgICAgICByZXR1cm4gLTE7CiAgICAgIH0KICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICJzdHJpbmciKSB7CiAgICAgICAgdmFsID0gQnVmZmVyMi5mcm9tKHZhbCwgZW5jb2RpbmcpOwogICAgICB9CiAgICAgIGlmIChCdWZmZXIyLmlzQnVmZmVyKHZhbCkpIHsKICAgICAgICBpZiAodmFsLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgcmV0dXJuIC0xOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYXJyYXlJbmRleE9mKGJ1ZmZlcjIsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcik7CiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gIm51bWJlciIpIHsKICAgICAgICB2YWwgPSB2YWwgJiAyNTU7CiAgICAgICAgaWYgKHR5cGVvZiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICBpZiAoZGlyKSB7CiAgICAgICAgICAgIHJldHVybiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoYnVmZmVyMiwgdmFsLCBieXRlT2Zmc2V0KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBVaW50OEFycmF5LnByb3RvdHlwZS5sYXN0SW5kZXhPZi5jYWxsKGJ1ZmZlcjIsIHZhbCwgYnl0ZU9mZnNldCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBhcnJheUluZGV4T2YoYnVmZmVyMiwgW3ZhbF0sIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpOwogICAgICB9CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoInZhbCBtdXN0IGJlIHN0cmluZywgbnVtYmVyIG9yIEJ1ZmZlciIpOwogICAgfQogICAgZnVuY3Rpb24gYXJyYXlJbmRleE9mKGFyciwgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKSB7CiAgICAgIGxldCBpbmRleFNpemUgPSAxOwogICAgICBsZXQgYXJyTGVuZ3RoID0gYXJyLmxlbmd0aDsKICAgICAgbGV0IHZhbExlbmd0aCA9IHZhbC5sZW5ndGg7CiAgICAgIGlmIChlbmNvZGluZyAhPT0gdm9pZCAwKSB7CiAgICAgICAgZW5jb2RpbmcgPSBTdHJpbmcoZW5jb2RpbmcpLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgaWYgKGVuY29kaW5nID09PSAidWNzMiIgfHwgZW5jb2RpbmcgPT09ICJ1Y3MtMiIgfHwgZW5jb2RpbmcgPT09ICJ1dGYxNmxlIiB8fCBlbmNvZGluZyA9PT0gInV0Zi0xNmxlIikgewogICAgICAgICAgaWYgKGFyci5sZW5ndGggPCAyIHx8IHZhbC5sZW5ndGggPCAyKSB7CiAgICAgICAgICAgIHJldHVybiAtMTsKICAgICAgICAgIH0KICAgICAgICAgIGluZGV4U2l6ZSA9IDI7CiAgICAgICAgICBhcnJMZW5ndGggLz0gMjsKICAgICAgICAgIHZhbExlbmd0aCAvPSAyOwogICAgICAgICAgYnl0ZU9mZnNldCAvPSAyOwogICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiByZWFkKGJ1ZiwgaTMpIHsKICAgICAgICBpZiAoaW5kZXhTaXplID09PSAxKSB7CiAgICAgICAgICByZXR1cm4gYnVmW2kzXTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGJ1Zi5yZWFkVUludDE2QkUoaTMgKiBpbmRleFNpemUpOwogICAgICAgIH0KICAgICAgfQogICAgICBsZXQgaTI7CiAgICAgIGlmIChkaXIpIHsKICAgICAgICBsZXQgZm91bmRJbmRleCA9IC0xOwogICAgICAgIGZvciAoaTIgPSBieXRlT2Zmc2V0OyBpMiA8IGFyckxlbmd0aDsgaTIrKykgewogICAgICAgICAgaWYgKHJlYWQoYXJyLCBpMikgPT09IHJlYWQodmFsLCBmb3VuZEluZGV4ID09PSAtMSA/IDAgOiBpMiAtIGZvdW5kSW5kZXgpKSB7CiAgICAgICAgICAgIGlmIChmb3VuZEluZGV4ID09PSAtMSkKICAgICAgICAgICAgICBmb3VuZEluZGV4ID0gaTI7CiAgICAgICAgICAgIGlmIChpMiAtIGZvdW5kSW5kZXggKyAxID09PSB2YWxMZW5ndGgpCiAgICAgICAgICAgICAgcmV0dXJuIGZvdW5kSW5kZXggKiBpbmRleFNpemU7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAoZm91bmRJbmRleCAhPT0gLTEpCiAgICAgICAgICAgICAgaTIgLT0gaTIgLSBmb3VuZEluZGV4OwogICAgICAgICAgICBmb3VuZEluZGV4ID0gLTE7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGlmIChieXRlT2Zmc2V0ICsgdmFsTGVuZ3RoID4gYXJyTGVuZ3RoKQogICAgICAgICAgYnl0ZU9mZnNldCA9IGFyckxlbmd0aCAtIHZhbExlbmd0aDsKICAgICAgICBmb3IgKGkyID0gYnl0ZU9mZnNldDsgaTIgPj0gMDsgaTItLSkgewogICAgICAgICAgbGV0IGZvdW5kID0gdHJ1ZTsKICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdmFsTGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgaWYgKHJlYWQoYXJyLCBpMiArIGopICE9PSByZWFkKHZhbCwgaikpIHsKICAgICAgICAgICAgICBmb3VuZCA9IGZhbHNlOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoZm91bmQpCiAgICAgICAgICAgIHJldHVybiBpMjsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIC0xOwogICAgfQogICAgQnVmZmVyMi5wcm90b3R5cGUuaW5jbHVkZXMgPSBmdW5jdGlvbiBpbmNsdWRlcyh2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7CiAgICAgIHJldHVybiB0aGlzLmluZGV4T2YodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykgIT09IC0xOwogICAgfTsKICAgIEJ1ZmZlcjIucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbiBpbmRleE9mMih2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7CiAgICAgIHJldHVybiBiaWRpcmVjdGlvbmFsSW5kZXhPZih0aGlzLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCB0cnVlKTsKICAgIH07CiAgICBCdWZmZXIyLnByb3RvdHlwZS5sYXN0SW5kZXhPZiA9IGZ1bmN0aW9uIGxhc3RJbmRleE9mKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHsKICAgICAgcmV0dXJuIGJpZGlyZWN0aW9uYWxJbmRleE9mKHRoaXMsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGZhbHNlKTsKICAgIH07CiAgICBmdW5jdGlvbiBoZXhXcml0ZShidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHsKICAgICAgb2Zmc2V0ID0gTnVtYmVyKG9mZnNldCkgfHwgMDsKICAgICAgY29uc3QgcmVtYWluaW5nID0gYnVmLmxlbmd0aCAtIG9mZnNldDsKICAgICAgaWYgKCFsZW5ndGgpIHsKICAgICAgICBsZW5ndGggPSByZW1haW5pbmc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbGVuZ3RoID0gTnVtYmVyKGxlbmd0aCk7CiAgICAgICAgaWYgKGxlbmd0aCA+IHJlbWFpbmluZykgewogICAgICAgICAgbGVuZ3RoID0gcmVtYWluaW5nOwogICAgICAgIH0KICAgICAgfQogICAgICBjb25zdCBzdHJMZW4gPSBzdHJpbmcubGVuZ3RoOwogICAgICBpZiAobGVuZ3RoID4gc3RyTGVuIC8gMikgewogICAgICAgIGxlbmd0aCA9IHN0ckxlbiAvIDI7CiAgICAgIH0KICAgICAgbGV0IGkyOwogICAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW5ndGg7ICsraTIpIHsKICAgICAgICBjb25zdCBwYXJzZWQgPSBwYXJzZUludChzdHJpbmcuc3Vic3RyKGkyICogMiwgMiksIDE2KTsKICAgICAgICBpZiAobnVtYmVySXNOYU4ocGFyc2VkKSkKICAgICAgICAgIHJldHVybiBpMjsKICAgICAgICBidWZbb2Zmc2V0ICsgaTJdID0gcGFyc2VkOwogICAgICB9CiAgICAgIHJldHVybiBpMjsKICAgIH0KICAgIGZ1bmN0aW9uIHV0ZjhXcml0ZShidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHsKICAgICAgcmV0dXJuIGJsaXRCdWZmZXIodXRmOFRvQnl0ZXMoc3RyaW5nLCBidWYubGVuZ3RoIC0gb2Zmc2V0KSwgYnVmLCBvZmZzZXQsIGxlbmd0aCk7CiAgICB9CiAgICBmdW5jdGlvbiBhc2NpaVdyaXRlKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkgewogICAgICByZXR1cm4gYmxpdEJ1ZmZlcihhc2NpaVRvQnl0ZXMoc3RyaW5nKSwgYnVmLCBvZmZzZXQsIGxlbmd0aCk7CiAgICB9CiAgICBmdW5jdGlvbiBiYXNlNjRXcml0ZShidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHsKICAgICAgcmV0dXJuIGJsaXRCdWZmZXIoYmFzZTY0VG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKTsKICAgIH0KICAgIGZ1bmN0aW9uIHVjczJXcml0ZShidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHsKICAgICAgcmV0dXJuIGJsaXRCdWZmZXIodXRmMTZsZVRvQnl0ZXMoc3RyaW5nLCBidWYubGVuZ3RoIC0gb2Zmc2V0KSwgYnVmLCBvZmZzZXQsIGxlbmd0aCk7CiAgICB9CiAgICBCdWZmZXIyLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIHdyaXRlKHN0cmluZywgb2Zmc2V0LCBsZW5ndGgsIGVuY29kaW5nKSB7CiAgICAgIGlmIChvZmZzZXQgPT09IHZvaWQgMCkgewogICAgICAgIGVuY29kaW5nID0gInV0ZjgiOwogICAgICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoOwogICAgICAgIG9mZnNldCA9IDA7CiAgICAgIH0gZWxzZSBpZiAobGVuZ3RoID09PSB2b2lkIDAgJiYgdHlwZW9mIG9mZnNldCA9PT0gInN0cmluZyIpIHsKICAgICAgICBlbmNvZGluZyA9IG9mZnNldDsKICAgICAgICBsZW5ndGggPSB0aGlzLmxlbmd0aDsKICAgICAgICBvZmZzZXQgPSAwOwogICAgICB9IGVsc2UgaWYgKGlzRmluaXRlKG9mZnNldCkpIHsKICAgICAgICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CiAgICAgICAgaWYgKGlzRmluaXRlKGxlbmd0aCkpIHsKICAgICAgICAgIGxlbmd0aCA9IGxlbmd0aCA+Pj4gMDsKICAgICAgICAgIGlmIChlbmNvZGluZyA9PT0gdm9pZCAwKQogICAgICAgICAgICBlbmNvZGluZyA9ICJ1dGY4IjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZW5jb2RpbmcgPSBsZW5ndGg7CiAgICAgICAgICBsZW5ndGggPSB2b2lkIDA7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiQnVmZmVyLndyaXRlKHN0cmluZywgZW5jb2RpbmcsIG9mZnNldFssIGxlbmd0aF0pIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQiKTsKICAgICAgfQogICAgICBjb25zdCByZW1haW5pbmcgPSB0aGlzLmxlbmd0aCAtIG9mZnNldDsKICAgICAgaWYgKGxlbmd0aCA9PT0gdm9pZCAwIHx8IGxlbmd0aCA+IHJlbWFpbmluZykKICAgICAgICBsZW5ndGggPSByZW1haW5pbmc7CiAgICAgIGlmIChzdHJpbmcubGVuZ3RoID4gMCAmJiAobGVuZ3RoIDwgMCB8fCBvZmZzZXQgPCAwKSB8fCBvZmZzZXQgPiB0aGlzLmxlbmd0aCkgewogICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCJBdHRlbXB0IHRvIHdyaXRlIG91dHNpZGUgYnVmZmVyIGJvdW5kcyIpOwogICAgICB9CiAgICAgIGlmICghZW5jb2RpbmcpCiAgICAgICAgZW5jb2RpbmcgPSAidXRmOCI7CiAgICAgIGxldCBsb3dlcmVkQ2FzZSA9IGZhbHNlOwogICAgICBmb3IgKDsgOyApIHsKICAgICAgICBzd2l0Y2ggKGVuY29kaW5nKSB7CiAgICAgICAgICBjYXNlICJoZXgiOgogICAgICAgICAgICByZXR1cm4gaGV4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCk7CiAgICAgICAgICBjYXNlICJ1dGY4IjoKICAgICAgICAgIGNhc2UgInV0Zi04IjoKICAgICAgICAgICAgcmV0dXJuIHV0ZjhXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKTsKICAgICAgICAgIGNhc2UgImFzY2lpIjoKICAgICAgICAgIGNhc2UgImxhdGluMSI6CiAgICAgICAgICBjYXNlICJiaW5hcnkiOgogICAgICAgICAgICByZXR1cm4gYXNjaWlXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKTsKICAgICAgICAgIGNhc2UgImJhc2U2NCI6CiAgICAgICAgICAgIHJldHVybiBiYXNlNjRXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKTsKICAgICAgICAgIGNhc2UgInVjczIiOgogICAgICAgICAgY2FzZSAidWNzLTIiOgogICAgICAgICAgY2FzZSAidXRmMTZsZSI6CiAgICAgICAgICBjYXNlICJ1dGYtMTZsZSI6CiAgICAgICAgICAgIHJldHVybiB1Y3MyV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCk7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICBpZiAobG93ZXJlZENhc2UpCiAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiVW5rbm93biBlbmNvZGluZzogIiArIGVuY29kaW5nKTsKICAgICAgICAgICAgZW5jb2RpbmcgPSAoIiIgKyBlbmNvZGluZykudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlOwogICAgICAgIH0KICAgICAgfQogICAgfTsKICAgIEJ1ZmZlcjIucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICB0eXBlOiAiQnVmZmVyIiwKICAgICAgICBkYXRhOiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLl9hcnIgfHwgdGhpcywgMCkKICAgICAgfTsKICAgIH07CiAgICBmdW5jdGlvbiBiYXNlNjRTbGljZShidWYsIHN0YXJ0LCBlbmQpIHsKICAgICAgaWYgKHN0YXJ0ID09PSAwICYmIGVuZCA9PT0gYnVmLmxlbmd0aCkgewogICAgICAgIHJldHVybiBiYXNlNjQuZnJvbUJ5dGVBcnJheShidWYpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBiYXNlNjQuZnJvbUJ5dGVBcnJheShidWYuc2xpY2Uoc3RhcnQsIGVuZCkpOwogICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiB1dGY4U2xpY2UoYnVmLCBzdGFydCwgZW5kKSB7CiAgICAgIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZCk7CiAgICAgIGNvbnN0IHJlcyA9IFtdOwogICAgICBsZXQgaTIgPSBzdGFydDsKICAgICAgd2hpbGUgKGkyIDwgZW5kKSB7CiAgICAgICAgY29uc3QgZmlyc3RCeXRlID0gYnVmW2kyXTsKICAgICAgICBsZXQgY29kZVBvaW50ID0gbnVsbDsKICAgICAgICBsZXQgYnl0ZXNQZXJTZXF1ZW5jZSA9IGZpcnN0Qnl0ZSA+IDIzOSA/IDQgOiBmaXJzdEJ5dGUgPiAyMjMgPyAzIDogZmlyc3RCeXRlID4gMTkxID8gMiA6IDE7CiAgICAgICAgaWYgKGkyICsgYnl0ZXNQZXJTZXF1ZW5jZSA8PSBlbmQpIHsKICAgICAgICAgIGxldCBzZWNvbmRCeXRlLCB0aGlyZEJ5dGUsIGZvdXJ0aEJ5dGUsIHRlbXBDb2RlUG9pbnQ7CiAgICAgICAgICBzd2l0Y2ggKGJ5dGVzUGVyU2VxdWVuY2UpIHsKICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIGlmIChmaXJzdEJ5dGUgPCAxMjgpIHsKICAgICAgICAgICAgICAgIGNvZGVQb2ludCA9IGZpcnN0Qnl0ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kyICsgMV07CiAgICAgICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMTkyKSA9PT0gMTI4KSB7CiAgICAgICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDMxKSA8PCA2IHwgc2Vjb25kQnl0ZSAmIDYzOwogICAgICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAxMjcpIHsKICAgICAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kyICsgMV07CiAgICAgICAgICAgICAgdGhpcmRCeXRlID0gYnVmW2kyICsgMl07CiAgICAgICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMTkyKSA9PT0gMTI4ICYmICh0aGlyZEJ5dGUgJiAxOTIpID09PSAxMjgpIHsKICAgICAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMTUpIDw8IDEyIHwgKHNlY29uZEJ5dGUgJiA2MykgPDwgNiB8IHRoaXJkQnl0ZSAmIDYzOwogICAgICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAyMDQ3ICYmICh0ZW1wQ29kZVBvaW50IDwgNTUyOTYgfHwgdGVtcENvZGVQb2ludCA+IDU3MzQzKSkgewogICAgICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaTIgKyAxXTsKICAgICAgICAgICAgICB0aGlyZEJ5dGUgPSBidWZbaTIgKyAyXTsKICAgICAgICAgICAgICBmb3VydGhCeXRlID0gYnVmW2kyICsgM107CiAgICAgICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMTkyKSA9PT0gMTI4ICYmICh0aGlyZEJ5dGUgJiAxOTIpID09PSAxMjggJiYgKGZvdXJ0aEJ5dGUgJiAxOTIpID09PSAxMjgpIHsKICAgICAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMTUpIDw8IDE4IHwgKHNlY29uZEJ5dGUgJiA2MykgPDwgMTIgfCAodGhpcmRCeXRlICYgNjMpIDw8IDYgfCBmb3VydGhCeXRlICYgNjM7CiAgICAgICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDY1NTM1ICYmIHRlbXBDb2RlUG9pbnQgPCAxMTE0MTEyKSB7CiAgICAgICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoY29kZVBvaW50ID09PSBudWxsKSB7CiAgICAgICAgICBjb2RlUG9pbnQgPSA2NTUzMzsKICAgICAgICAgIGJ5dGVzUGVyU2VxdWVuY2UgPSAxOwogICAgICAgIH0gZWxzZSBpZiAoY29kZVBvaW50ID4gNjU1MzUpIHsKICAgICAgICAgIGNvZGVQb2ludCAtPSA2NTUzNjsKICAgICAgICAgIHJlcy5wdXNoKGNvZGVQb2ludCA+Pj4gMTAgJiAxMDIzIHwgNTUyOTYpOwogICAgICAgICAgY29kZVBvaW50ID0gNTYzMjAgfCBjb2RlUG9pbnQgJiAxMDIzOwogICAgICAgIH0KICAgICAgICByZXMucHVzaChjb2RlUG9pbnQpOwogICAgICAgIGkyICs9IGJ5dGVzUGVyU2VxdWVuY2U7CiAgICAgIH0KICAgICAgcmV0dXJuIGRlY29kZUNvZGVQb2ludHNBcnJheShyZXMpOwogICAgfQogICAgY29uc3QgTUFYX0FSR1VNRU5UU19MRU5HVEggPSA0MDk2OwogICAgZnVuY3Rpb24gZGVjb2RlQ29kZVBvaW50c0FycmF5KGNvZGVQb2ludHMpIHsKICAgICAgY29uc3QgbGVuMiA9IGNvZGVQb2ludHMubGVuZ3RoOwogICAgICBpZiAobGVuMiA8PSBNQVhfQVJHVU1FTlRTX0xFTkdUSCkgewogICAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZywgY29kZVBvaW50cyk7CiAgICAgIH0KICAgICAgbGV0IHJlcyA9ICIiOwogICAgICBsZXQgaTIgPSAwOwogICAgICB3aGlsZSAoaTIgPCBsZW4yKSB7CiAgICAgICAgcmVzICs9IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCBjb2RlUG9pbnRzLnNsaWNlKGkyLCBpMiArPSBNQVhfQVJHVU1FTlRTX0xFTkdUSCkpOwogICAgICB9CiAgICAgIHJldHVybiByZXM7CiAgICB9CiAgICBmdW5jdGlvbiBhc2NpaVNsaWNlKGJ1Ziwgc3RhcnQsIGVuZCkgewogICAgICBsZXQgcmV0ID0gIiI7CiAgICAgIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZCk7CiAgICAgIGZvciAobGV0IGkyID0gc3RhcnQ7IGkyIDwgZW5kOyArK2kyKSB7CiAgICAgICAgcmV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2kyXSAmIDEyNyk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJldDsKICAgIH0KICAgIGZ1bmN0aW9uIGxhdGluMVNsaWNlKGJ1Ziwgc3RhcnQsIGVuZCkgewogICAgICBsZXQgcmV0ID0gIiI7CiAgICAgIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZCk7CiAgICAgIGZvciAobGV0IGkyID0gc3RhcnQ7IGkyIDwgZW5kOyArK2kyKSB7CiAgICAgICAgcmV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2kyXSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJldDsKICAgIH0KICAgIGZ1bmN0aW9uIGhleFNsaWNlKGJ1Ziwgc3RhcnQsIGVuZCkgewogICAgICBjb25zdCBsZW4yID0gYnVmLmxlbmd0aDsKICAgICAgaWYgKCFzdGFydCB8fCBzdGFydCA8IDApCiAgICAgICAgc3RhcnQgPSAwOwogICAgICBpZiAoIWVuZCB8fCBlbmQgPCAwIHx8IGVuZCA+IGxlbjIpCiAgICAgICAgZW5kID0gbGVuMjsKICAgICAgbGV0IG91dCA9ICIiOwogICAgICBmb3IgKGxldCBpMiA9IHN0YXJ0OyBpMiA8IGVuZDsgKytpMikgewogICAgICAgIG91dCArPSBoZXhTbGljZUxvb2t1cFRhYmxlW2J1ZltpMl1dOwogICAgICB9CiAgICAgIHJldHVybiBvdXQ7CiAgICB9CiAgICBmdW5jdGlvbiB1dGYxNmxlU2xpY2UoYnVmLCBzdGFydCwgZW5kKSB7CiAgICAgIGNvbnN0IGJ5dGVzID0gYnVmLnNsaWNlKHN0YXJ0LCBlbmQpOwogICAgICBsZXQgcmVzID0gIiI7CiAgICAgIGZvciAobGV0IGkyID0gMDsgaTIgPCBieXRlcy5sZW5ndGggLSAxOyBpMiArPSAyKSB7CiAgICAgICAgcmVzICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZXNbaTJdICsgYnl0ZXNbaTIgKyAxXSAqIDI1Nik7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlczsKICAgIH0KICAgIEJ1ZmZlcjIucHJvdG90eXBlLnNsaWNlID0gZnVuY3Rpb24gc2xpY2UyKHN0YXJ0LCBlbmQpIHsKICAgICAgY29uc3QgbGVuMiA9IHRoaXMubGVuZ3RoOwogICAgICBzdGFydCA9IH5+c3RhcnQ7CiAgICAgIGVuZCA9IGVuZCA9PT0gdm9pZCAwID8gbGVuMiA6IH5+ZW5kOwogICAgICBpZiAoc3RhcnQgPCAwKSB7CiAgICAgICAgc3RhcnQgKz0gbGVuMjsKICAgICAgICBpZiAoc3RhcnQgPCAwKQogICAgICAgICAgc3RhcnQgPSAwOwogICAgICB9IGVsc2UgaWYgKHN0YXJ0ID4gbGVuMikgewogICAgICAgIHN0YXJ0ID0gbGVuMjsKICAgICAgfQogICAgICBpZiAoZW5kIDwgMCkgewogICAgICAgIGVuZCArPSBsZW4yOwogICAgICAgIGlmIChlbmQgPCAwKQogICAgICAgICAgZW5kID0gMDsKICAgICAgfSBlbHNlIGlmIChlbmQgPiBsZW4yKSB7CiAgICAgICAgZW5kID0gbGVuMjsKICAgICAgfQogICAgICBpZiAoZW5kIDwgc3RhcnQpCiAgICAgICAgZW5kID0gc3RhcnQ7CiAgICAgIGNvbnN0IG5ld0J1ZiA9IHRoaXMuc3ViYXJyYXkoc3RhcnQsIGVuZCk7CiAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihuZXdCdWYsIEJ1ZmZlcjIucHJvdG90eXBlKTsKICAgICAgcmV0dXJuIG5ld0J1ZjsKICAgIH07CiAgICBmdW5jdGlvbiBjaGVja09mZnNldChvZmZzZXQsIGV4dCwgbGVuZ3RoKSB7CiAgICAgIGlmIChvZmZzZXQgJSAxICE9PSAwIHx8IG9mZnNldCA8IDApCiAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoIm9mZnNldCBpcyBub3QgdWludCIpOwogICAgICBpZiAob2Zmc2V0ICsgZXh0ID4gbGVuZ3RoKQogICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCJUcnlpbmcgdG8gYWNjZXNzIGJleW9uZCBidWZmZXIgbGVuZ3RoIik7CiAgICB9CiAgICBCdWZmZXIyLnByb3RvdHlwZS5yZWFkVWludExFID0gQnVmZmVyMi5wcm90b3R5cGUucmVhZFVJbnRMRSA9IGZ1bmN0aW9uIHJlYWRVSW50TEUob2Zmc2V0LCBieXRlTGVuZ3RoMywgbm9Bc3NlcnQpIHsKICAgICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgICBieXRlTGVuZ3RoMyA9IGJ5dGVMZW5ndGgzID4+PiAwOwogICAgICBpZiAoIW5vQXNzZXJ0KQogICAgICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aDMsIHRoaXMubGVuZ3RoKTsKICAgICAgbGV0IHZhbCA9IHRoaXNbb2Zmc2V0XTsKICAgICAgbGV0IG11bCA9IDE7CiAgICAgIGxldCBpMiA9IDA7CiAgICAgIHdoaWxlICgrK2kyIDwgYnl0ZUxlbmd0aDMgJiYgKG11bCAqPSAyNTYpKSB7CiAgICAgICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgaTJdICogbXVsOwogICAgICB9CiAgICAgIHJldHVybiB2YWw7CiAgICB9OwogICAgQnVmZmVyMi5wcm90b3R5cGUucmVhZFVpbnRCRSA9IEJ1ZmZlcjIucHJvdG90eXBlLnJlYWRVSW50QkUgPSBmdW5jdGlvbiByZWFkVUludEJFKG9mZnNldCwgYnl0ZUxlbmd0aDMsIG5vQXNzZXJ0KSB7CiAgICAgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKICAgICAgYnl0ZUxlbmd0aDMgPSBieXRlTGVuZ3RoMyA+Pj4gMDsKICAgICAgaWYgKCFub0Fzc2VydCkgewogICAgICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aDMsIHRoaXMubGVuZ3RoKTsKICAgICAgfQogICAgICBsZXQgdmFsID0gdGhpc1tvZmZzZXQgKyAtLWJ5dGVMZW5ndGgzXTsKICAgICAgbGV0IG11bCA9IDE7CiAgICAgIHdoaWxlIChieXRlTGVuZ3RoMyA+IDAgJiYgKG11bCAqPSAyNTYpKSB7CiAgICAgICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgLS1ieXRlTGVuZ3RoM10gKiBtdWw7CiAgICAgIH0KICAgICAgcmV0dXJuIHZhbDsKICAgIH07CiAgICBCdWZmZXIyLnByb3RvdHlwZS5yZWFkVWludDggPSBCdWZmZXIyLnByb3RvdHlwZS5yZWFkVUludDggPSBmdW5jdGlvbiByZWFkVUludDgob2Zmc2V0LCBub0Fzc2VydCkgewogICAgICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CiAgICAgIGlmICghbm9Bc3NlcnQpCiAgICAgICAgY2hlY2tPZmZzZXQob2Zmc2V0LCAxLCB0aGlzLmxlbmd0aCk7CiAgICAgIHJldHVybiB0aGlzW29mZnNldF07CiAgICB9OwogICAgQnVmZmVyMi5wcm90b3R5cGUucmVhZFVpbnQxNkxFID0gQnVmZmVyMi5wcm90b3R5cGUucmVhZFVJbnQxNkxFID0gZnVuY3Rpb24gcmVhZFVJbnQxNkxFKG9mZnNldCwgbm9Bc3NlcnQpIHsKICAgICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgICBpZiAoIW5vQXNzZXJ0KQogICAgICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpOwogICAgICByZXR1cm4gdGhpc1tvZmZzZXRdIHwgdGhpc1tvZmZzZXQgKyAxXSA8PCA4OwogICAgfTsKICAgIEJ1ZmZlcjIucHJvdG90eXBlLnJlYWRVaW50MTZCRSA9IEJ1ZmZlcjIucHJvdG90eXBlLnJlYWRVSW50MTZCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MTZCRShvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgICAgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKICAgICAgaWYgKCFub0Fzc2VydCkKICAgICAgICBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKTsKICAgICAgcmV0dXJuIHRoaXNbb2Zmc2V0XSA8PCA4IHwgdGhpc1tvZmZzZXQgKyAxXTsKICAgIH07CiAgICBCdWZmZXIyLnByb3RvdHlwZS5yZWFkVWludDMyTEUgPSBCdWZmZXIyLnByb3RvdHlwZS5yZWFkVUludDMyTEUgPSBmdW5jdGlvbiByZWFkVUludDMyTEUob2Zmc2V0LCBub0Fzc2VydCkgewogICAgICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CiAgICAgIGlmICghbm9Bc3NlcnQpCiAgICAgICAgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aCk7CiAgICAgIHJldHVybiAodGhpc1tvZmZzZXRdIHwgdGhpc1tvZmZzZXQgKyAxXSA8PCA4IHwgdGhpc1tvZmZzZXQgKyAyXSA8PCAxNikgKyB0aGlzW29mZnNldCArIDNdICogMTY3NzcyMTY7CiAgICB9OwogICAgQnVmZmVyMi5wcm90b3R5cGUucmVhZFVpbnQzMkJFID0gQnVmZmVyMi5wcm90b3R5cGUucmVhZFVJbnQzMkJFID0gZnVuY3Rpb24gcmVhZFVJbnQzMkJFKG9mZnNldCwgbm9Bc3NlcnQpIHsKICAgICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgICBpZiAoIW5vQXNzZXJ0KQogICAgICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpOwogICAgICByZXR1cm4gdGhpc1tvZmZzZXRdICogMTY3NzcyMTYgKyAodGhpc1tvZmZzZXQgKyAxXSA8PCAxNiB8IHRoaXNbb2Zmc2V0ICsgMl0gPDwgOCB8IHRoaXNbb2Zmc2V0ICsgM10pOwogICAgfTsKICAgIEJ1ZmZlcjIucHJvdG90eXBlLnJlYWRCaWdVSW50NjRMRSA9IGRlZmluZUJpZ0ludE1ldGhvZChmdW5jdGlvbiByZWFkQmlnVUludDY0TEUob2Zmc2V0KSB7CiAgICAgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKICAgICAgdmFsaWRhdGVOdW1iZXIob2Zmc2V0LCAib2Zmc2V0Iik7CiAgICAgIGNvbnN0IGZpcnN0ID0gdGhpc1tvZmZzZXRdOwogICAgICBjb25zdCBsYXN0MiA9IHRoaXNbb2Zmc2V0ICsgN107CiAgICAgIGlmIChmaXJzdCA9PT0gdm9pZCAwIHx8IGxhc3QyID09PSB2b2lkIDApIHsKICAgICAgICBib3VuZHNFcnJvcihvZmZzZXQsIHRoaXMubGVuZ3RoIC0gOCk7CiAgICAgIH0KICAgICAgY29uc3QgbG8gPSBmaXJzdCArIHRoaXNbKytvZmZzZXRdICogMiAqKiA4ICsgdGhpc1srK29mZnNldF0gKiAyICoqIDE2ICsgdGhpc1srK29mZnNldF0gKiAyICoqIDI0OwogICAgICBjb25zdCBoaSA9IHRoaXNbKytvZmZzZXRdICsgdGhpc1srK29mZnNldF0gKiAyICoqIDggKyB0aGlzWysrb2Zmc2V0XSAqIDIgKiogMTYgKyBsYXN0MiAqIDIgKiogMjQ7CiAgICAgIHJldHVybiBCaWdJbnQobG8pICsgKEJpZ0ludChoaSkgPDwgQmlnSW50KDMyKSk7CiAgICB9KTsKICAgIEJ1ZmZlcjIucHJvdG90eXBlLnJlYWRCaWdVSW50NjRCRSA9IGRlZmluZUJpZ0ludE1ldGhvZChmdW5jdGlvbiByZWFkQmlnVUludDY0QkUob2Zmc2V0KSB7CiAgICAgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKICAgICAgdmFsaWRhdGVOdW1iZXIob2Zmc2V0LCAib2Zmc2V0Iik7CiAgICAgIGNvbnN0IGZpcnN0ID0gdGhpc1tvZmZzZXRdOwogICAgICBjb25zdCBsYXN0MiA9IHRoaXNbb2Zmc2V0ICsgN107CiAgICAgIGlmIChmaXJzdCA9PT0gdm9pZCAwIHx8IGxhc3QyID09PSB2b2lkIDApIHsKICAgICAgICBib3VuZHNFcnJvcihvZmZzZXQsIHRoaXMubGVuZ3RoIC0gOCk7CiAgICAgIH0KICAgICAgY29uc3QgaGkgPSBmaXJzdCAqIDIgKiogMjQgKyB0aGlzWysrb2Zmc2V0XSAqIDIgKiogMTYgKyB0aGlzWysrb2Zmc2V0XSAqIDIgKiogOCArIHRoaXNbKytvZmZzZXRdOwogICAgICBjb25zdCBsbyA9IHRoaXNbKytvZmZzZXRdICogMiAqKiAyNCArIHRoaXNbKytvZmZzZXRdICogMiAqKiAxNiArIHRoaXNbKytvZmZzZXRdICogMiAqKiA4ICsgbGFzdDI7CiAgICAgIHJldHVybiAoQmlnSW50KGhpKSA8PCBCaWdJbnQoMzIpKSArIEJpZ0ludChsbyk7CiAgICB9KTsKICAgIEJ1ZmZlcjIucHJvdG90eXBlLnJlYWRJbnRMRSA9IGZ1bmN0aW9uIHJlYWRJbnRMRShvZmZzZXQsIGJ5dGVMZW5ndGgzLCBub0Fzc2VydCkgewogICAgICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CiAgICAgIGJ5dGVMZW5ndGgzID0gYnl0ZUxlbmd0aDMgPj4+IDA7CiAgICAgIGlmICghbm9Bc3NlcnQpCiAgICAgICAgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoMywgdGhpcy5sZW5ndGgpOwogICAgICBsZXQgdmFsID0gdGhpc1tvZmZzZXRdOwogICAgICBsZXQgbXVsID0gMTsKICAgICAgbGV0IGkyID0gMDsKICAgICAgd2hpbGUgKCsraTIgPCBieXRlTGVuZ3RoMyAmJiAobXVsICo9IDI1NikpIHsKICAgICAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpMl0gKiBtdWw7CiAgICAgIH0KICAgICAgbXVsICo9IDEyODsKICAgICAgaWYgKHZhbCA+PSBtdWwpCiAgICAgICAgdmFsIC09IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoMyk7CiAgICAgIHJldHVybiB2YWw7CiAgICB9OwogICAgQnVmZmVyMi5wcm90b3R5cGUucmVhZEludEJFID0gZnVuY3Rpb24gcmVhZEludEJFKG9mZnNldCwgYnl0ZUxlbmd0aDMsIG5vQXNzZXJ0KSB7CiAgICAgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKICAgICAgYnl0ZUxlbmd0aDMgPSBieXRlTGVuZ3RoMyA+Pj4gMDsKICAgICAgaWYgKCFub0Fzc2VydCkKICAgICAgICBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgzLCB0aGlzLmxlbmd0aCk7CiAgICAgIGxldCBpMiA9IGJ5dGVMZW5ndGgzOwogICAgICBsZXQgbXVsID0gMTsKICAgICAgbGV0IHZhbCA9IHRoaXNbb2Zmc2V0ICsgLS1pMl07CiAgICAgIHdoaWxlIChpMiA+IDAgJiYgKG11bCAqPSAyNTYpKSB7CiAgICAgICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgLS1pMl0gKiBtdWw7CiAgICAgIH0KICAgICAgbXVsICo9IDEyODsKICAgICAgaWYgKHZhbCA+PSBtdWwpCiAgICAgICAgdmFsIC09IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoMyk7CiAgICAgIHJldHVybiB2YWw7CiAgICB9OwogICAgQnVmZmVyMi5wcm90b3R5cGUucmVhZEludDggPSBmdW5jdGlvbiByZWFkSW50OChvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgICAgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKICAgICAgaWYgKCFub0Fzc2VydCkKICAgICAgICBjaGVja09mZnNldChvZmZzZXQsIDEsIHRoaXMubGVuZ3RoKTsKICAgICAgaWYgKCEodGhpc1tvZmZzZXRdICYgMTI4KSkKICAgICAgICByZXR1cm4gdGhpc1tvZmZzZXRdOwogICAgICByZXR1cm4gKDI1NSAtIHRoaXNbb2Zmc2V0XSArIDEpICogLTE7CiAgICB9OwogICAgQnVmZmVyMi5wcm90b3R5cGUucmVhZEludDE2TEUgPSBmdW5jdGlvbiByZWFkSW50MTZMRShvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgICAgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKICAgICAgaWYgKCFub0Fzc2VydCkKICAgICAgICBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKTsKICAgICAgY29uc3QgdmFsID0gdGhpc1tvZmZzZXRdIHwgdGhpc1tvZmZzZXQgKyAxXSA8PCA4OwogICAgICByZXR1cm4gdmFsICYgMzI3NjggPyB2YWwgfCA0Mjk0OTAxNzYwIDogdmFsOwogICAgfTsKICAgIEJ1ZmZlcjIucHJvdG90eXBlLnJlYWRJbnQxNkJFID0gZnVuY3Rpb24gcmVhZEludDE2QkUob2Zmc2V0LCBub0Fzc2VydCkgewogICAgICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CiAgICAgIGlmICghbm9Bc3NlcnQpCiAgICAgICAgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aCk7CiAgICAgIGNvbnN0IHZhbCA9IHRoaXNbb2Zmc2V0ICsgMV0gfCB0aGlzW29mZnNldF0gPDwgODsKICAgICAgcmV0dXJuIHZhbCAmIDMyNzY4ID8gdmFsIHwgNDI5NDkwMTc2MCA6IHZhbDsKICAgIH07CiAgICBCdWZmZXIyLnByb3RvdHlwZS5yZWFkSW50MzJMRSA9IGZ1bmN0aW9uIHJlYWRJbnQzMkxFKG9mZnNldCwgbm9Bc3NlcnQpIHsKICAgICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgICBpZiAoIW5vQXNzZXJ0KQogICAgICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpOwogICAgICByZXR1cm4gdGhpc1tvZmZzZXRdIHwgdGhpc1tvZmZzZXQgKyAxXSA8PCA4IHwgdGhpc1tvZmZzZXQgKyAyXSA8PCAxNiB8IHRoaXNbb2Zmc2V0ICsgM10gPDwgMjQ7CiAgICB9OwogICAgQnVmZmVyMi5wcm90b3R5cGUucmVhZEludDMyQkUgPSBmdW5jdGlvbiByZWFkSW50MzJCRShvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgICAgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKICAgICAgaWYgKCFub0Fzc2VydCkKICAgICAgICBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKTsKICAgICAgcmV0dXJuIHRoaXNbb2Zmc2V0XSA8PCAyNCB8IHRoaXNbb2Zmc2V0ICsgMV0gPDwgMTYgfCB0aGlzW29mZnNldCArIDJdIDw8IDggfCB0aGlzW29mZnNldCArIDNdOwogICAgfTsKICAgIEJ1ZmZlcjIucHJvdG90eXBlLnJlYWRCaWdJbnQ2NExFID0gZGVmaW5lQmlnSW50TWV0aG9kKGZ1bmN0aW9uIHJlYWRCaWdJbnQ2NExFKG9mZnNldCkgewogICAgICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CiAgICAgIHZhbGlkYXRlTnVtYmVyKG9mZnNldCwgIm9mZnNldCIpOwogICAgICBjb25zdCBmaXJzdCA9IHRoaXNbb2Zmc2V0XTsKICAgICAgY29uc3QgbGFzdDIgPSB0aGlzW29mZnNldCArIDddOwogICAgICBpZiAoZmlyc3QgPT09IHZvaWQgMCB8fCBsYXN0MiA9PT0gdm9pZCAwKSB7CiAgICAgICAgYm91bmRzRXJyb3Iob2Zmc2V0LCB0aGlzLmxlbmd0aCAtIDgpOwogICAgICB9CiAgICAgIGNvbnN0IHZhbCA9IHRoaXNbb2Zmc2V0ICsgNF0gKyB0aGlzW29mZnNldCArIDVdICogMiAqKiA4ICsgdGhpc1tvZmZzZXQgKyA2XSAqIDIgKiogMTYgKyAobGFzdDIgPDwgMjQpOwogICAgICByZXR1cm4gKEJpZ0ludCh2YWwpIDw8IEJpZ0ludCgzMikpICsgQmlnSW50KGZpcnN0ICsgdGhpc1srK29mZnNldF0gKiAyICoqIDggKyB0aGlzWysrb2Zmc2V0XSAqIDIgKiogMTYgKyB0aGlzWysrb2Zmc2V0XSAqIDIgKiogMjQpOwogICAgfSk7CiAgICBCdWZmZXIyLnByb3RvdHlwZS5yZWFkQmlnSW50NjRCRSA9IGRlZmluZUJpZ0ludE1ldGhvZChmdW5jdGlvbiByZWFkQmlnSW50NjRCRShvZmZzZXQpIHsKICAgICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgICB2YWxpZGF0ZU51bWJlcihvZmZzZXQsICJvZmZzZXQiKTsKICAgICAgY29uc3QgZmlyc3QgPSB0aGlzW29mZnNldF07CiAgICAgIGNvbnN0IGxhc3QyID0gdGhpc1tvZmZzZXQgKyA3XTsKICAgICAgaWYgKGZpcnN0ID09PSB2b2lkIDAgfHwgbGFzdDIgPT09IHZvaWQgMCkgewogICAgICAgIGJvdW5kc0Vycm9yKG9mZnNldCwgdGhpcy5sZW5ndGggLSA4KTsKICAgICAgfQogICAgICBjb25zdCB2YWwgPSAoZmlyc3QgPDwgMjQpICsgdGhpc1srK29mZnNldF0gKiAyICoqIDE2ICsgdGhpc1srK29mZnNldF0gKiAyICoqIDggKyB0aGlzWysrb2Zmc2V0XTsKICAgICAgcmV0dXJuIChCaWdJbnQodmFsKSA8PCBCaWdJbnQoMzIpKSArIEJpZ0ludCh0aGlzWysrb2Zmc2V0XSAqIDIgKiogMjQgKyB0aGlzWysrb2Zmc2V0XSAqIDIgKiogMTYgKyB0aGlzWysrb2Zmc2V0XSAqIDIgKiogOCArIGxhc3QyKTsKICAgIH0pOwogICAgQnVmZmVyMi5wcm90b3R5cGUucmVhZEZsb2F0TEUgPSBmdW5jdGlvbiByZWFkRmxvYXRMRShvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgICAgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKICAgICAgaWYgKCFub0Fzc2VydCkKICAgICAgICBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKTsKICAgICAgcmV0dXJuIGllZWU3NTQkMS5yZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgMjMsIDQpOwogICAgfTsKICAgIEJ1ZmZlcjIucHJvdG90eXBlLnJlYWRGbG9hdEJFID0gZnVuY3Rpb24gcmVhZEZsb2F0QkUob2Zmc2V0LCBub0Fzc2VydCkgewogICAgICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CiAgICAgIGlmICghbm9Bc3NlcnQpCiAgICAgICAgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aCk7CiAgICAgIHJldHVybiBpZWVlNzU0JDEucmVhZCh0aGlzLCBvZmZzZXQsIGZhbHNlLCAyMywgNCk7CiAgICB9OwogICAgQnVmZmVyMi5wcm90b3R5cGUucmVhZERvdWJsZUxFID0gZnVuY3Rpb24gcmVhZERvdWJsZUxFKG9mZnNldCwgbm9Bc3NlcnQpIHsKICAgICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgICBpZiAoIW5vQXNzZXJ0KQogICAgICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgOCwgdGhpcy5sZW5ndGgpOwogICAgICByZXR1cm4gaWVlZTc1NCQxLnJlYWQodGhpcywgb2Zmc2V0LCB0cnVlLCA1MiwgOCk7CiAgICB9OwogICAgQnVmZmVyMi5wcm90b3R5cGUucmVhZERvdWJsZUJFID0gZnVuY3Rpb24gcmVhZERvdWJsZUJFKG9mZnNldCwgbm9Bc3NlcnQpIHsKICAgICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgICBpZiAoIW5vQXNzZXJ0KQogICAgICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgOCwgdGhpcy5sZW5ndGgpOwogICAgICByZXR1cm4gaWVlZTc1NCQxLnJlYWQodGhpcywgb2Zmc2V0LCBmYWxzZSwgNTIsIDgpOwogICAgfTsKICAgIGZ1bmN0aW9uIGNoZWNrSW50KGJ1ZiwgdmFsdWUsIG9mZnNldCwgZXh0LCBtYXgyLCBtaW4yKSB7CiAgICAgIGlmICghQnVmZmVyMi5pc0J1ZmZlcihidWYpKQogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJyJidWZmZXIiIGFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXIgaW5zdGFuY2UnKTsKICAgICAgaWYgKHZhbHVlID4gbWF4MiB8fCB2YWx1ZSA8IG1pbjIpCiAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJyJ2YWx1ZSIgYXJndW1lbnQgaXMgb3V0IG9mIGJvdW5kcycpOwogICAgICBpZiAob2Zmc2V0ICsgZXh0ID4gYnVmLmxlbmd0aCkKICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW5kZXggb3V0IG9mIHJhbmdlIik7CiAgICB9CiAgICBCdWZmZXIyLnByb3RvdHlwZS53cml0ZVVpbnRMRSA9IEJ1ZmZlcjIucHJvdG90eXBlLndyaXRlVUludExFID0gZnVuY3Rpb24gd3JpdGVVSW50TEUodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aDMsIG5vQXNzZXJ0KSB7CiAgICAgIHZhbHVlID0gK3ZhbHVlOwogICAgICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CiAgICAgIGJ5dGVMZW5ndGgzID0gYnl0ZUxlbmd0aDMgPj4+IDA7CiAgICAgIGlmICghbm9Bc3NlcnQpIHsKICAgICAgICBjb25zdCBtYXhCeXRlcyA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoMykgLSAxOwogICAgICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgzLCBtYXhCeXRlcywgMCk7CiAgICAgIH0KICAgICAgbGV0IG11bCA9IDE7CiAgICAgIGxldCBpMiA9IDA7CiAgICAgIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMjU1OwogICAgICB3aGlsZSAoKytpMiA8IGJ5dGVMZW5ndGgzICYmIChtdWwgKj0gMjU2KSkgewogICAgICAgIHRoaXNbb2Zmc2V0ICsgaTJdID0gdmFsdWUgLyBtdWwgJiAyNTU7CiAgICAgIH0KICAgICAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGgzOwogICAgfTsKICAgIEJ1ZmZlcjIucHJvdG90eXBlLndyaXRlVWludEJFID0gQnVmZmVyMi5wcm90b3R5cGUud3JpdGVVSW50QkUgPSBmdW5jdGlvbiB3cml0ZVVJbnRCRSh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoMywgbm9Bc3NlcnQpIHsKICAgICAgdmFsdWUgPSArdmFsdWU7CiAgICAgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKICAgICAgYnl0ZUxlbmd0aDMgPSBieXRlTGVuZ3RoMyA+Pj4gMDsKICAgICAgaWYgKCFub0Fzc2VydCkgewogICAgICAgIGNvbnN0IG1heEJ5dGVzID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgzKSAtIDE7CiAgICAgICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aDMsIG1heEJ5dGVzLCAwKTsKICAgICAgfQogICAgICBsZXQgaTIgPSBieXRlTGVuZ3RoMyAtIDE7CiAgICAgIGxldCBtdWwgPSAxOwogICAgICB0aGlzW29mZnNldCArIGkyXSA9IHZhbHVlICYgMjU1OwogICAgICB3aGlsZSAoLS1pMiA+PSAwICYmIChtdWwgKj0gMjU2KSkgewogICAgICAgIHRoaXNbb2Zmc2V0ICsgaTJdID0gdmFsdWUgLyBtdWwgJiAyNTU7CiAgICAgIH0KICAgICAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGgzOwogICAgfTsKICAgIEJ1ZmZlcjIucHJvdG90eXBlLndyaXRlVWludDggPSBCdWZmZXIyLnByb3RvdHlwZS53cml0ZVVJbnQ4ID0gZnVuY3Rpb24gd3JpdGVVSW50OCh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewogICAgICB2YWx1ZSA9ICt2YWx1ZTsKICAgICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgICBpZiAoIW5vQXNzZXJ0KQogICAgICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDEsIDI1NSwgMCk7CiAgICAgIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMjU1OwogICAgICByZXR1cm4gb2Zmc2V0ICsgMTsKICAgIH07CiAgICBCdWZmZXIyLnByb3RvdHlwZS53cml0ZVVpbnQxNkxFID0gQnVmZmVyMi5wcm90b3R5cGUud3JpdGVVSW50MTZMRSA9IGZ1bmN0aW9uIHdyaXRlVUludDE2TEUodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICAgICAgdmFsdWUgPSArdmFsdWU7CiAgICAgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKICAgICAgaWYgKCFub0Fzc2VydCkKICAgICAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCA2NTUzNSwgMCk7CiAgICAgIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMjU1OwogICAgICB0aGlzW29mZnNldCArIDFdID0gdmFsdWUgPj4+IDg7CiAgICAgIHJldHVybiBvZmZzZXQgKyAyOwogICAgfTsKICAgIEJ1ZmZlcjIucHJvdG90eXBlLndyaXRlVWludDE2QkUgPSBCdWZmZXIyLnByb3RvdHlwZS53cml0ZVVJbnQxNkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MTZCRSh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewogICAgICB2YWx1ZSA9ICt2YWx1ZTsKICAgICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgICBpZiAoIW5vQXNzZXJ0KQogICAgICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDY1NTM1LCAwKTsKICAgICAgdGhpc1tvZmZzZXRdID0gdmFsdWUgPj4+IDg7CiAgICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSB2YWx1ZSAmIDI1NTsKICAgICAgcmV0dXJuIG9mZnNldCArIDI7CiAgICB9OwogICAgQnVmZmVyMi5wcm90b3R5cGUud3JpdGVVaW50MzJMRSA9IEJ1ZmZlcjIucHJvdG90eXBlLndyaXRlVUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZVVJbnQzMkxFKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgICAgIHZhbHVlID0gK3ZhbHVlOwogICAgICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CiAgICAgIGlmICghbm9Bc3NlcnQpCiAgICAgICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgNDI5NDk2NzI5NSwgMCk7CiAgICAgIHRoaXNbb2Zmc2V0ICsgM10gPSB2YWx1ZSA+Pj4gMjQ7CiAgICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSB2YWx1ZSA+Pj4gMTY7CiAgICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSB2YWx1ZSA+Pj4gODsKICAgICAgdGhpc1tvZmZzZXRdID0gdmFsdWUgJiAyNTU7CiAgICAgIHJldHVybiBvZmZzZXQgKyA0OwogICAgfTsKICAgIEJ1ZmZlcjIucHJvdG90eXBlLndyaXRlVWludDMyQkUgPSBCdWZmZXIyLnByb3RvdHlwZS53cml0ZVVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJCRSh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewogICAgICB2YWx1ZSA9ICt2YWx1ZTsKICAgICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgICBpZiAoIW5vQXNzZXJ0KQogICAgICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDQyOTQ5NjcyOTUsIDApOwogICAgICB0aGlzW29mZnNldF0gPSB2YWx1ZSA+Pj4gMjQ7CiAgICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSB2YWx1ZSA+Pj4gMTY7CiAgICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSB2YWx1ZSA+Pj4gODsKICAgICAgdGhpc1tvZmZzZXQgKyAzXSA9IHZhbHVlICYgMjU1OwogICAgICByZXR1cm4gb2Zmc2V0ICsgNDsKICAgIH07CiAgICBmdW5jdGlvbiB3cnRCaWdVSW50NjRMRShidWYsIHZhbHVlLCBvZmZzZXQsIG1pbjIsIG1heDIpIHsKICAgICAgY2hlY2tJbnRCSSh2YWx1ZSwgbWluMiwgbWF4MiwgYnVmLCBvZmZzZXQsIDcpOwogICAgICBsZXQgbG8gPSBOdW1iZXIodmFsdWUgJiBCaWdJbnQoNDI5NDk2NzI5NSkpOwogICAgICBidWZbb2Zmc2V0KytdID0gbG87CiAgICAgIGxvID0gbG8gPj4gODsKICAgICAgYnVmW29mZnNldCsrXSA9IGxvOwogICAgICBsbyA9IGxvID4+IDg7CiAgICAgIGJ1ZltvZmZzZXQrK10gPSBsbzsKICAgICAgbG8gPSBsbyA+PiA4OwogICAgICBidWZbb2Zmc2V0KytdID0gbG87CiAgICAgIGxldCBoaSA9IE51bWJlcih2YWx1ZSA+PiBCaWdJbnQoMzIpICYgQmlnSW50KDQyOTQ5NjcyOTUpKTsKICAgICAgYnVmW29mZnNldCsrXSA9IGhpOwogICAgICBoaSA9IGhpID4+IDg7CiAgICAgIGJ1ZltvZmZzZXQrK10gPSBoaTsKICAgICAgaGkgPSBoaSA+PiA4OwogICAgICBidWZbb2Zmc2V0KytdID0gaGk7CiAgICAgIGhpID0gaGkgPj4gODsKICAgICAgYnVmW29mZnNldCsrXSA9IGhpOwogICAgICByZXR1cm4gb2Zmc2V0OwogICAgfQogICAgZnVuY3Rpb24gd3J0QmlnVUludDY0QkUoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBtaW4yLCBtYXgyKSB7CiAgICAgIGNoZWNrSW50QkkodmFsdWUsIG1pbjIsIG1heDIsIGJ1Ziwgb2Zmc2V0LCA3KTsKICAgICAgbGV0IGxvID0gTnVtYmVyKHZhbHVlICYgQmlnSW50KDQyOTQ5NjcyOTUpKTsKICAgICAgYnVmW29mZnNldCArIDddID0gbG87CiAgICAgIGxvID0gbG8gPj4gODsKICAgICAgYnVmW29mZnNldCArIDZdID0gbG87CiAgICAgIGxvID0gbG8gPj4gODsKICAgICAgYnVmW29mZnNldCArIDVdID0gbG87CiAgICAgIGxvID0gbG8gPj4gODsKICAgICAgYnVmW29mZnNldCArIDRdID0gbG87CiAgICAgIGxldCBoaSA9IE51bWJlcih2YWx1ZSA+PiBCaWdJbnQoMzIpICYgQmlnSW50KDQyOTQ5NjcyOTUpKTsKICAgICAgYnVmW29mZnNldCArIDNdID0gaGk7CiAgICAgIGhpID0gaGkgPj4gODsKICAgICAgYnVmW29mZnNldCArIDJdID0gaGk7CiAgICAgIGhpID0gaGkgPj4gODsKICAgICAgYnVmW29mZnNldCArIDFdID0gaGk7CiAgICAgIGhpID0gaGkgPj4gODsKICAgICAgYnVmW29mZnNldF0gPSBoaTsKICAgICAgcmV0dXJuIG9mZnNldCArIDg7CiAgICB9CiAgICBCdWZmZXIyLnByb3RvdHlwZS53cml0ZUJpZ1VJbnQ2NExFID0gZGVmaW5lQmlnSW50TWV0aG9kKGZ1bmN0aW9uIHdyaXRlQmlnVUludDY0TEUodmFsdWUsIG9mZnNldCA9IDApIHsKICAgICAgcmV0dXJuIHdydEJpZ1VJbnQ2NExFKHRoaXMsIHZhbHVlLCBvZmZzZXQsIEJpZ0ludCgwKSwgQmlnSW50KCIweGZmZmZmZmZmZmZmZmZmZmYiKSk7CiAgICB9KTsKICAgIEJ1ZmZlcjIucHJvdG90eXBlLndyaXRlQmlnVUludDY0QkUgPSBkZWZpbmVCaWdJbnRNZXRob2QoZnVuY3Rpb24gd3JpdGVCaWdVSW50NjRCRSh2YWx1ZSwgb2Zmc2V0ID0gMCkgewogICAgICByZXR1cm4gd3J0QmlnVUludDY0QkUodGhpcywgdmFsdWUsIG9mZnNldCwgQmlnSW50KDApLCBCaWdJbnQoIjB4ZmZmZmZmZmZmZmZmZmZmZiIpKTsKICAgIH0pOwogICAgQnVmZmVyMi5wcm90b3R5cGUud3JpdGVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlSW50TEUodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aDMsIG5vQXNzZXJ0KSB7CiAgICAgIHZhbHVlID0gK3ZhbHVlOwogICAgICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CiAgICAgIGlmICghbm9Bc3NlcnQpIHsKICAgICAgICBjb25zdCBsaW1pdCA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoMyAtIDEpOwogICAgICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgzLCBsaW1pdCAtIDEsIC1saW1pdCk7CiAgICAgIH0KICAgICAgbGV0IGkyID0gMDsKICAgICAgbGV0IG11bCA9IDE7CiAgICAgIGxldCBzdWIgPSAwOwogICAgICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDI1NTsKICAgICAgd2hpbGUgKCsraTIgPCBieXRlTGVuZ3RoMyAmJiAobXVsICo9IDI1NikpIHsKICAgICAgICBpZiAodmFsdWUgPCAwICYmIHN1YiA9PT0gMCAmJiB0aGlzW29mZnNldCArIGkyIC0gMV0gIT09IDApIHsKICAgICAgICAgIHN1YiA9IDE7CiAgICAgICAgfQogICAgICAgIHRoaXNbb2Zmc2V0ICsgaTJdID0gKHZhbHVlIC8gbXVsID4+IDApIC0gc3ViICYgMjU1OwogICAgICB9CiAgICAgIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoMzsKICAgIH07CiAgICBCdWZmZXIyLnByb3RvdHlwZS53cml0ZUludEJFID0gZnVuY3Rpb24gd3JpdGVJbnRCRSh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoMywgbm9Bc3NlcnQpIHsKICAgICAgdmFsdWUgPSArdmFsdWU7CiAgICAgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKICAgICAgaWYgKCFub0Fzc2VydCkgewogICAgICAgIGNvbnN0IGxpbWl0ID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgzIC0gMSk7CiAgICAgICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aDMsIGxpbWl0IC0gMSwgLWxpbWl0KTsKICAgICAgfQogICAgICBsZXQgaTIgPSBieXRlTGVuZ3RoMyAtIDE7CiAgICAgIGxldCBtdWwgPSAxOwogICAgICBsZXQgc3ViID0gMDsKICAgICAgdGhpc1tvZmZzZXQgKyBpMl0gPSB2YWx1ZSAmIDI1NTsKICAgICAgd2hpbGUgKC0taTIgPj0gMCAmJiAobXVsICo9IDI1NikpIHsKICAgICAgICBpZiAodmFsdWUgPCAwICYmIHN1YiA9PT0gMCAmJiB0aGlzW29mZnNldCArIGkyICsgMV0gIT09IDApIHsKICAgICAgICAgIHN1YiA9IDE7CiAgICAgICAgfQogICAgICAgIHRoaXNbb2Zmc2V0ICsgaTJdID0gKHZhbHVlIC8gbXVsID4+IDApIC0gc3ViICYgMjU1OwogICAgICB9CiAgICAgIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoMzsKICAgIH07CiAgICBCdWZmZXIyLnByb3RvdHlwZS53cml0ZUludDggPSBmdW5jdGlvbiB3cml0ZUludDgodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICAgICAgdmFsdWUgPSArdmFsdWU7CiAgICAgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKICAgICAgaWYgKCFub0Fzc2VydCkKICAgICAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAxMjcsIC0xMjgpOwogICAgICBpZiAodmFsdWUgPCAwKQogICAgICAgIHZhbHVlID0gMjU1ICsgdmFsdWUgKyAxOwogICAgICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDI1NTsKICAgICAgcmV0dXJuIG9mZnNldCArIDE7CiAgICB9OwogICAgQnVmZmVyMi5wcm90b3R5cGUud3JpdGVJbnQxNkxFID0gZnVuY3Rpb24gd3JpdGVJbnQxNkxFKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgICAgIHZhbHVlID0gK3ZhbHVlOwogICAgICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CiAgICAgIGlmICghbm9Bc3NlcnQpCiAgICAgICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMzI3NjcsIC0zMjc2OCk7CiAgICAgIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMjU1OwogICAgICB0aGlzW29mZnNldCArIDFdID0gdmFsdWUgPj4+IDg7CiAgICAgIHJldHVybiBvZmZzZXQgKyAyOwogICAgfTsKICAgIEJ1ZmZlcjIucHJvdG90eXBlLndyaXRlSW50MTZCRSA9IGZ1bmN0aW9uIHdyaXRlSW50MTZCRSh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewogICAgICB2YWx1ZSA9ICt2YWx1ZTsKICAgICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgICBpZiAoIW5vQXNzZXJ0KQogICAgICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDMyNzY3LCAtMzI3NjgpOwogICAgICB0aGlzW29mZnNldF0gPSB2YWx1ZSA+Pj4gODsKICAgICAgdGhpc1tvZmZzZXQgKyAxXSA9IHZhbHVlICYgMjU1OwogICAgICByZXR1cm4gb2Zmc2V0ICsgMjsKICAgIH07CiAgICBCdWZmZXIyLnByb3RvdHlwZS53cml0ZUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZUludDMyTEUodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICAgICAgdmFsdWUgPSArdmFsdWU7CiAgICAgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKICAgICAgaWYgKCFub0Fzc2VydCkKICAgICAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAyMTQ3NDgzNjQ3LCAtMjE0NzQ4MzY0OCk7CiAgICAgIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMjU1OwogICAgICB0aGlzW29mZnNldCArIDFdID0gdmFsdWUgPj4+IDg7CiAgICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSB2YWx1ZSA+Pj4gMTY7CiAgICAgIHRoaXNbb2Zmc2V0ICsgM10gPSB2YWx1ZSA+Pj4gMjQ7CiAgICAgIHJldHVybiBvZmZzZXQgKyA0OwogICAgfTsKICAgIEJ1ZmZlcjIucHJvdG90eXBlLndyaXRlSW50MzJCRSA9IGZ1bmN0aW9uIHdyaXRlSW50MzJCRSh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewogICAgICB2YWx1ZSA9ICt2YWx1ZTsKICAgICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgICBpZiAoIW5vQXNzZXJ0KQogICAgICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDIxNDc0ODM2NDcsIC0yMTQ3NDgzNjQ4KTsKICAgICAgaWYgKHZhbHVlIDwgMCkKICAgICAgICB2YWx1ZSA9IDQyOTQ5NjcyOTUgKyB2YWx1ZSArIDE7CiAgICAgIHRoaXNbb2Zmc2V0XSA9IHZhbHVlID4+PiAyNDsKICAgICAgdGhpc1tvZmZzZXQgKyAxXSA9IHZhbHVlID4+PiAxNjsKICAgICAgdGhpc1tvZmZzZXQgKyAyXSA9IHZhbHVlID4+PiA4OwogICAgICB0aGlzW29mZnNldCArIDNdID0gdmFsdWUgJiAyNTU7CiAgICAgIHJldHVybiBvZmZzZXQgKyA0OwogICAgfTsKICAgIEJ1ZmZlcjIucHJvdG90eXBlLndyaXRlQmlnSW50NjRMRSA9IGRlZmluZUJpZ0ludE1ldGhvZChmdW5jdGlvbiB3cml0ZUJpZ0ludDY0TEUodmFsdWUsIG9mZnNldCA9IDApIHsKICAgICAgcmV0dXJuIHdydEJpZ1VJbnQ2NExFKHRoaXMsIHZhbHVlLCBvZmZzZXQsIC1CaWdJbnQoIjB4ODAwMDAwMDAwMDAwMDAwMCIpLCBCaWdJbnQoIjB4N2ZmZmZmZmZmZmZmZmZmZiIpKTsKICAgIH0pOwogICAgQnVmZmVyMi5wcm90b3R5cGUud3JpdGVCaWdJbnQ2NEJFID0gZGVmaW5lQmlnSW50TWV0aG9kKGZ1bmN0aW9uIHdyaXRlQmlnSW50NjRCRSh2YWx1ZSwgb2Zmc2V0ID0gMCkgewogICAgICByZXR1cm4gd3J0QmlnVUludDY0QkUodGhpcywgdmFsdWUsIG9mZnNldCwgLUJpZ0ludCgiMHg4MDAwMDAwMDAwMDAwMDAwIiksIEJpZ0ludCgiMHg3ZmZmZmZmZmZmZmZmZmZmIikpOwogICAgfSk7CiAgICBmdW5jdGlvbiBjaGVja0lFRUU3NTQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heDIsIG1pbjIpIHsKICAgICAgaWYgKG9mZnNldCArIGV4dCA+IGJ1Zi5sZW5ndGgpCiAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkluZGV4IG91dCBvZiByYW5nZSIpOwogICAgICBpZiAob2Zmc2V0IDwgMCkKICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW5kZXggb3V0IG9mIHJhbmdlIik7CiAgICB9CiAgICBmdW5jdGlvbiB3cml0ZUZsb2F0KGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCBub0Fzc2VydCkgewogICAgICB2YWx1ZSA9ICt2YWx1ZTsKICAgICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgICBpZiAoIW5vQXNzZXJ0KSB7CiAgICAgICAgY2hlY2tJRUVFNzU0KGJ1ZiwgdmFsdWUsIG9mZnNldCwgNCk7CiAgICAgIH0KICAgICAgaWVlZTc1NCQxLndyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCAyMywgNCk7CiAgICAgIHJldHVybiBvZmZzZXQgKyA0OwogICAgfQogICAgQnVmZmVyMi5wcm90b3R5cGUud3JpdGVGbG9hdExFID0gZnVuY3Rpb24gd3JpdGVGbG9hdExFKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgICAgIHJldHVybiB3cml0ZUZsb2F0KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUsIG5vQXNzZXJ0KTsKICAgIH07CiAgICBCdWZmZXIyLnByb3RvdHlwZS53cml0ZUZsb2F0QkUgPSBmdW5jdGlvbiB3cml0ZUZsb2F0QkUodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICAgICAgcmV0dXJuIHdyaXRlRmxvYXQodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UsIG5vQXNzZXJ0KTsKICAgIH07CiAgICBmdW5jdGlvbiB3cml0ZURvdWJsZShidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgbm9Bc3NlcnQpIHsKICAgICAgdmFsdWUgPSArdmFsdWU7CiAgICAgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKICAgICAgaWYgKCFub0Fzc2VydCkgewogICAgICAgIGNoZWNrSUVFRTc1NChidWYsIHZhbHVlLCBvZmZzZXQsIDgpOwogICAgICB9CiAgICAgIGllZWU3NTQkMS53cml0ZShidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgNTIsIDgpOwogICAgICByZXR1cm4gb2Zmc2V0ICsgODsKICAgIH0KICAgIEJ1ZmZlcjIucHJvdG90eXBlLndyaXRlRG91YmxlTEUgPSBmdW5jdGlvbiB3cml0ZURvdWJsZUxFKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgICAgIHJldHVybiB3cml0ZURvdWJsZSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlLCBub0Fzc2VydCk7CiAgICB9OwogICAgQnVmZmVyMi5wcm90b3R5cGUud3JpdGVEb3VibGVCRSA9IGZ1bmN0aW9uIHdyaXRlRG91YmxlQkUodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICAgICAgcmV0dXJuIHdyaXRlRG91YmxlKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlLCBub0Fzc2VydCk7CiAgICB9OwogICAgQnVmZmVyMi5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uIGNvcHkodGFyZ2V0LCB0YXJnZXRTdGFydCwgc3RhcnQsIGVuZCkgewogICAgICBpZiAoIUJ1ZmZlcjIuaXNCdWZmZXIodGFyZ2V0KSkKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJhcmd1bWVudCBzaG91bGQgYmUgYSBCdWZmZXIiKTsKICAgICAgaWYgKCFzdGFydCkKICAgICAgICBzdGFydCA9IDA7CiAgICAgIGlmICghZW5kICYmIGVuZCAhPT0gMCkKICAgICAgICBlbmQgPSB0aGlzLmxlbmd0aDsKICAgICAgaWYgKHRhcmdldFN0YXJ0ID49IHRhcmdldC5sZW5ndGgpCiAgICAgICAgdGFyZ2V0U3RhcnQgPSB0YXJnZXQubGVuZ3RoOwogICAgICBpZiAoIXRhcmdldFN0YXJ0KQogICAgICAgIHRhcmdldFN0YXJ0ID0gMDsKICAgICAgaWYgKGVuZCA+IDAgJiYgZW5kIDwgc3RhcnQpCiAgICAgICAgZW5kID0gc3RhcnQ7CiAgICAgIGlmIChlbmQgPT09IHN0YXJ0KQogICAgICAgIHJldHVybiAwOwogICAgICBpZiAodGFyZ2V0Lmxlbmd0aCA9PT0gMCB8fCB0aGlzLmxlbmd0aCA9PT0gMCkKICAgICAgICByZXR1cm4gMDsKICAgICAgaWYgKHRhcmdldFN0YXJ0IDwgMCkgewogICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCJ0YXJnZXRTdGFydCBvdXQgb2YgYm91bmRzIik7CiAgICAgIH0KICAgICAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCA+PSB0aGlzLmxlbmd0aCkKICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW5kZXggb3V0IG9mIHJhbmdlIik7CiAgICAgIGlmIChlbmQgPCAwKQogICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCJzb3VyY2VFbmQgb3V0IG9mIGJvdW5kcyIpOwogICAgICBpZiAoZW5kID4gdGhpcy5sZW5ndGgpCiAgICAgICAgZW5kID0gdGhpcy5sZW5ndGg7CiAgICAgIGlmICh0YXJnZXQubGVuZ3RoIC0gdGFyZ2V0U3RhcnQgPCBlbmQgLSBzdGFydCkgewogICAgICAgIGVuZCA9IHRhcmdldC5sZW5ndGggLSB0YXJnZXRTdGFydCArIHN0YXJ0OwogICAgICB9CiAgICAgIGNvbnN0IGxlbjIgPSBlbmQgLSBzdGFydDsKICAgICAgaWYgKHRoaXMgPT09IHRhcmdldCAmJiB0eXBlb2YgVWludDhBcnJheS5wcm90b3R5cGUuY29weVdpdGhpbiA9PT0gImZ1bmN0aW9uIikgewogICAgICAgIHRoaXMuY29weVdpdGhpbih0YXJnZXRTdGFydCwgc3RhcnQsIGVuZCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgVWludDhBcnJheS5wcm90b3R5cGUuc2V0LmNhbGwodGFyZ2V0LCB0aGlzLnN1YmFycmF5KHN0YXJ0LCBlbmQpLCB0YXJnZXRTdGFydCk7CiAgICAgIH0KICAgICAgcmV0dXJuIGxlbjI7CiAgICB9OwogICAgQnVmZmVyMi5wcm90b3R5cGUuZmlsbCA9IGZ1bmN0aW9uIGZpbGwodmFsLCBzdGFydCwgZW5kLCBlbmNvZGluZykgewogICAgICBpZiAodHlwZW9mIHZhbCA9PT0gInN0cmluZyIpIHsKICAgICAgICBpZiAodHlwZW9mIHN0YXJ0ID09PSAic3RyaW5nIikgewogICAgICAgICAgZW5jb2RpbmcgPSBzdGFydDsKICAgICAgICAgIHN0YXJ0ID0gMDsKICAgICAgICAgIGVuZCA9IHRoaXMubGVuZ3RoOwogICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGVuZCA9PT0gInN0cmluZyIpIHsKICAgICAgICAgIGVuY29kaW5nID0gZW5kOwogICAgICAgICAgZW5kID0gdGhpcy5sZW5ndGg7CiAgICAgICAgfQogICAgICAgIGlmIChlbmNvZGluZyAhPT0gdm9pZCAwICYmIHR5cGVvZiBlbmNvZGluZyAhPT0gInN0cmluZyIpIHsKICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoImVuY29kaW5nIG11c3QgYmUgYSBzdHJpbmciKTsKICAgICAgICB9CiAgICAgICAgaWYgKHR5cGVvZiBlbmNvZGluZyA9PT0gInN0cmluZyIgJiYgIUJ1ZmZlcjIuaXNFbmNvZGluZyhlbmNvZGluZykpIHsKICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIlVua25vd24gZW5jb2Rpbmc6ICIgKyBlbmNvZGluZyk7CiAgICAgICAgfQogICAgICAgIGlmICh2YWwubGVuZ3RoID09PSAxKSB7CiAgICAgICAgICBjb25zdCBjb2RlMiA9IHZhbC5jaGFyQ29kZUF0KDApOwogICAgICAgICAgaWYgKGVuY29kaW5nID09PSAidXRmOCIgJiYgY29kZTIgPCAxMjggfHwgZW5jb2RpbmcgPT09ICJsYXRpbjEiKSB7CiAgICAgICAgICAgIHZhbCA9IGNvZGUyOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAibnVtYmVyIikgewogICAgICAgIHZhbCA9IHZhbCAmIDI1NTsKICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAiYm9vbGVhbiIpIHsKICAgICAgICB2YWwgPSBOdW1iZXIodmFsKTsKICAgICAgfQogICAgICBpZiAoc3RhcnQgPCAwIHx8IHRoaXMubGVuZ3RoIDwgc3RhcnQgfHwgdGhpcy5sZW5ndGggPCBlbmQpIHsKICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcigiT3V0IG9mIHJhbmdlIGluZGV4Iik7CiAgICAgIH0KICAgICAgaWYgKGVuZCA8PSBzdGFydCkgewogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9CiAgICAgIHN0YXJ0ID0gc3RhcnQgPj4+IDA7CiAgICAgIGVuZCA9IGVuZCA9PT0gdm9pZCAwID8gdGhpcy5sZW5ndGggOiBlbmQgPj4+IDA7CiAgICAgIGlmICghdmFsKQogICAgICAgIHZhbCA9IDA7CiAgICAgIGxldCBpMjsKICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICJudW1iZXIiKSB7CiAgICAgICAgZm9yIChpMiA9IHN0YXJ0OyBpMiA8IGVuZDsgKytpMikgewogICAgICAgICAgdGhpc1tpMl0gPSB2YWw7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IGJ5dGVzID0gQnVmZmVyMi5pc0J1ZmZlcih2YWwpID8gdmFsIDogQnVmZmVyMi5mcm9tKHZhbCwgZW5jb2RpbmcpOwogICAgICAgIGNvbnN0IGxlbjIgPSBieXRlcy5sZW5ndGg7CiAgICAgICAgaWYgKGxlbjIgPT09IDApIHsKICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSB2YWx1ZSAiJyArIHZhbCArICciIGlzIGludmFsaWQgZm9yIGFyZ3VtZW50ICJ2YWx1ZSInKTsKICAgICAgICB9CiAgICAgICAgZm9yIChpMiA9IDA7IGkyIDwgZW5kIC0gc3RhcnQ7ICsraTIpIHsKICAgICAgICAgIHRoaXNbaTIgKyBzdGFydF0gPSBieXRlc1tpMiAlIGxlbjJdOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gdGhpczsKICAgIH07CiAgICBjb25zdCBlcnJvcnMgPSB7fTsKICAgIGZ1bmN0aW9uIEUoc3ltLCBnZXRNZXNzYWdlLCBCYXNlKSB7CiAgICAgIGVycm9yc1tzeW1dID0gY2xhc3MgTm9kZUVycm9yIGV4dGVuZHMgQmFzZSB7CiAgICAgICAgY29uc3RydWN0b3IoKSB7CiAgICAgICAgICBzdXBlcigpOwogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICJtZXNzYWdlIiwgewogICAgICAgICAgICB2YWx1ZTogZ2V0TWVzc2FnZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpLAogICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlCiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMubmFtZSA9IGAke3RoaXMubmFtZX0gWyR7c3ltfV1gOwogICAgICAgICAgdGhpcy5zdGFjazsKICAgICAgICAgIGRlbGV0ZSB0aGlzLm5hbWU7CiAgICAgICAgfQogICAgICAgIGdldCBjb2RlKCkgewogICAgICAgICAgcmV0dXJuIHN5bTsKICAgICAgICB9CiAgICAgICAgc2V0IGNvZGUodmFsdWUpIHsKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiY29kZSIsIHsKICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICAgICAgICB2YWx1ZSwKICAgICAgICAgICAgd3JpdGFibGU6IHRydWUKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICB0b1N0cmluZygpIHsKICAgICAgICAgIHJldHVybiBgJHt0aGlzLm5hbWV9IFske3N5bX1dOiAke3RoaXMubWVzc2FnZX1gOwogICAgICAgIH0KICAgICAgfTsKICAgIH0KICAgIEUoIkVSUl9CVUZGRVJfT1VUX09GX0JPVU5EUyIsIGZ1bmN0aW9uKG5hbWUpIHsKICAgICAgaWYgKG5hbWUpIHsKICAgICAgICByZXR1cm4gYCR7bmFtZX0gaXMgb3V0c2lkZSBvZiBidWZmZXIgYm91bmRzYDsKICAgICAgfQogICAgICByZXR1cm4gIkF0dGVtcHQgdG8gYWNjZXNzIG1lbW9yeSBvdXRzaWRlIGJ1ZmZlciBib3VuZHMiOwogICAgfSwgUmFuZ2VFcnJvcik7CiAgICBFKCJFUlJfSU5WQUxJRF9BUkdfVFlQRSIsIGZ1bmN0aW9uKG5hbWUsIGFjdHVhbCkgewogICAgICByZXR1cm4gYFRoZSAiJHtuYW1lfSIgYXJndW1lbnQgbXVzdCBiZSBvZiB0eXBlIG51bWJlci4gUmVjZWl2ZWQgdHlwZSAke3R5cGVvZiBhY3R1YWx9YDsKICAgIH0sIFR5cGVFcnJvcik7CiAgICBFKCJFUlJfT1VUX09GX1JBTkdFIiwgZnVuY3Rpb24oc3RyLCByYW5nZSwgaW5wdXQpIHsKICAgICAgbGV0IG1zZzIgPSBgVGhlIHZhbHVlIG9mICIke3N0cn0iIGlzIG91dCBvZiByYW5nZS5gOwogICAgICBsZXQgcmVjZWl2ZWQgPSBpbnB1dDsKICAgICAgaWYgKE51bWJlci5pc0ludGVnZXIoaW5wdXQpICYmIE1hdGguYWJzKGlucHV0KSA+IDIgKiogMzIpIHsKICAgICAgICByZWNlaXZlZCA9IGFkZE51bWVyaWNhbFNlcGFyYXRvcihTdHJpbmcoaW5wdXQpKTsKICAgICAgfSBlbHNlIGlmICh0eXBlb2YgaW5wdXQgPT09ICJiaWdpbnQiKSB7CiAgICAgICAgcmVjZWl2ZWQgPSBTdHJpbmcoaW5wdXQpOwogICAgICAgIGlmIChpbnB1dCA+IEJpZ0ludCgyKSAqKiBCaWdJbnQoMzIpIHx8IGlucHV0IDwgLShCaWdJbnQoMikgKiogQmlnSW50KDMyKSkpIHsKICAgICAgICAgIHJlY2VpdmVkID0gYWRkTnVtZXJpY2FsU2VwYXJhdG9yKHJlY2VpdmVkKTsKICAgICAgICB9CiAgICAgICAgcmVjZWl2ZWQgKz0gIm4iOwogICAgICB9CiAgICAgIG1zZzIgKz0gYCBJdCBtdXN0IGJlICR7cmFuZ2V9LiBSZWNlaXZlZCAke3JlY2VpdmVkfWA7CiAgICAgIHJldHVybiBtc2cyOwogICAgfSwgUmFuZ2VFcnJvcik7CiAgICBmdW5jdGlvbiBhZGROdW1lcmljYWxTZXBhcmF0b3IodmFsKSB7CiAgICAgIGxldCByZXMgPSAiIjsKICAgICAgbGV0IGkyID0gdmFsLmxlbmd0aDsKICAgICAgY29uc3Qgc3RhcnQgPSB2YWxbMF0gPT09ICItIiA/IDEgOiAwOwogICAgICBmb3IgKDsgaTIgPj0gc3RhcnQgKyA0OyBpMiAtPSAzKSB7CiAgICAgICAgcmVzID0gYF8ke3ZhbC5zbGljZShpMiAtIDMsIGkyKX0ke3Jlc31gOwogICAgICB9CiAgICAgIHJldHVybiBgJHt2YWwuc2xpY2UoMCwgaTIpfSR7cmVzfWA7CiAgICB9CiAgICBmdW5jdGlvbiBjaGVja0JvdW5kcyhidWYsIG9mZnNldCwgYnl0ZUxlbmd0aDMpIHsKICAgICAgdmFsaWRhdGVOdW1iZXIob2Zmc2V0LCAib2Zmc2V0Iik7CiAgICAgIGlmIChidWZbb2Zmc2V0XSA9PT0gdm9pZCAwIHx8IGJ1ZltvZmZzZXQgKyBieXRlTGVuZ3RoM10gPT09IHZvaWQgMCkgewogICAgICAgIGJvdW5kc0Vycm9yKG9mZnNldCwgYnVmLmxlbmd0aCAtIChieXRlTGVuZ3RoMyArIDEpKTsKICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gY2hlY2tJbnRCSSh2YWx1ZSwgbWluMiwgbWF4MiwgYnVmLCBvZmZzZXQsIGJ5dGVMZW5ndGgzKSB7CiAgICAgIGlmICh2YWx1ZSA+IG1heDIgfHwgdmFsdWUgPCBtaW4yKSB7CiAgICAgICAgY29uc3QgbiA9IHR5cGVvZiBtaW4yID09PSAiYmlnaW50IiA/ICJuIiA6ICIiOwogICAgICAgIGxldCByYW5nZTsKICAgICAgICBpZiAoYnl0ZUxlbmd0aDMgPiAzKSB7CiAgICAgICAgICBpZiAobWluMiA9PT0gMCB8fCBtaW4yID09PSBCaWdJbnQoMCkpIHsKICAgICAgICAgICAgcmFuZ2UgPSBgPj0gMCR7bn0gYW5kIDwgMiR7bn0gKiogJHsoYnl0ZUxlbmd0aDMgKyAxKSAqIDh9JHtufWA7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByYW5nZSA9IGA+PSAtKDIke259ICoqICR7KGJ5dGVMZW5ndGgzICsgMSkgKiA4IC0gMX0ke259KSBhbmQgPCAyICoqICR7KGJ5dGVMZW5ndGgzICsgMSkgKiA4IC0gMX0ke259YDsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmFuZ2UgPSBgPj0gJHttaW4yfSR7bn0gYW5kIDw9ICR7bWF4Mn0ke259YDsKICAgICAgICB9CiAgICAgICAgdGhyb3cgbmV3IGVycm9ycy5FUlJfT1VUX09GX1JBTkdFKCJ2YWx1ZSIsIHJhbmdlLCB2YWx1ZSk7CiAgICAgIH0KICAgICAgY2hlY2tCb3VuZHMoYnVmLCBvZmZzZXQsIGJ5dGVMZW5ndGgzKTsKICAgIH0KICAgIGZ1bmN0aW9uIHZhbGlkYXRlTnVtYmVyKHZhbHVlLCBuYW1lKSB7CiAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICJudW1iZXIiKSB7CiAgICAgICAgdGhyb3cgbmV3IGVycm9ycy5FUlJfSU5WQUxJRF9BUkdfVFlQRShuYW1lLCAibnVtYmVyIiwgdmFsdWUpOwogICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBib3VuZHNFcnJvcih2YWx1ZSwgbGVuZ3RoLCB0eXBlKSB7CiAgICAgIGlmIChNYXRoLmZsb29yKHZhbHVlKSAhPT0gdmFsdWUpIHsKICAgICAgICB2YWxpZGF0ZU51bWJlcih2YWx1ZSwgdHlwZSk7CiAgICAgICAgdGhyb3cgbmV3IGVycm9ycy5FUlJfT1VUX09GX1JBTkdFKHR5cGUgfHwgIm9mZnNldCIsICJhbiBpbnRlZ2VyIiwgdmFsdWUpOwogICAgICB9CiAgICAgIGlmIChsZW5ndGggPCAwKSB7CiAgICAgICAgdGhyb3cgbmV3IGVycm9ycy5FUlJfQlVGRkVSX09VVF9PRl9CT1VORFMoKTsKICAgICAgfQogICAgICB0aHJvdyBuZXcgZXJyb3JzLkVSUl9PVVRfT0ZfUkFOR0UodHlwZSB8fCAib2Zmc2V0IiwgYD49ICR7dHlwZSA/IDEgOiAwfSBhbmQgPD0gJHtsZW5ndGh9YCwgdmFsdWUpOwogICAgfQogICAgY29uc3QgSU5WQUxJRF9CQVNFNjRfUkUgPSAvW14rLzAtOUEtWmEtei1fXS9nOwogICAgZnVuY3Rpb24gYmFzZTY0Y2xlYW4oc3RyKSB7CiAgICAgIHN0ciA9IHN0ci5zcGxpdCgiPSIpWzBdOwogICAgICBzdHIgPSBzdHIudHJpbSgpLnJlcGxhY2UoSU5WQUxJRF9CQVNFNjRfUkUsICIiKTsKICAgICAgaWYgKHN0ci5sZW5ndGggPCAyKQogICAgICAgIHJldHVybiAiIjsKICAgICAgd2hpbGUgKHN0ci5sZW5ndGggJSA0ICE9PSAwKSB7CiAgICAgICAgc3RyID0gc3RyICsgIj0iOwogICAgICB9CiAgICAgIHJldHVybiBzdHI7CiAgICB9CiAgICBmdW5jdGlvbiB1dGY4VG9CeXRlcyhzdHJpbmcsIHVuaXRzKSB7CiAgICAgIHVuaXRzID0gdW5pdHMgfHwgSW5maW5pdHk7CiAgICAgIGxldCBjb2RlUG9pbnQ7CiAgICAgIGNvbnN0IGxlbmd0aCA9IHN0cmluZy5sZW5ndGg7CiAgICAgIGxldCBsZWFkU3Vycm9nYXRlID0gbnVsbDsKICAgICAgY29uc3QgYnl0ZXMgPSBbXTsKICAgICAgZm9yIChsZXQgaTIgPSAwOyBpMiA8IGxlbmd0aDsgKytpMikgewogICAgICAgIGNvZGVQb2ludCA9IHN0cmluZy5jaGFyQ29kZUF0KGkyKTsKICAgICAgICBpZiAoY29kZVBvaW50ID4gNTUyOTUgJiYgY29kZVBvaW50IDwgNTczNDQpIHsKICAgICAgICAgIGlmICghbGVhZFN1cnJvZ2F0ZSkgewogICAgICAgICAgICBpZiAoY29kZVBvaW50ID4gNTYzMTkpIHsKICAgICAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpCiAgICAgICAgICAgICAgICBieXRlcy5wdXNoKDIzOSwgMTkxLCAxODkpOwogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9IGVsc2UgaWYgKGkyICsgMSA9PT0gbGVuZ3RoKSB7CiAgICAgICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKQogICAgICAgICAgICAgICAgYnl0ZXMucHVzaCgyMzksIDE5MSwgMTg5KTsKICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBsZWFkU3Vycm9nYXRlID0gY29kZVBvaW50OwogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChjb2RlUG9pbnQgPCA1NjMyMCkgewogICAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpCiAgICAgICAgICAgICAgYnl0ZXMucHVzaCgyMzksIDE5MSwgMTg5KTsKICAgICAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IGNvZGVQb2ludDsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CiAgICAgICAgICBjb2RlUG9pbnQgPSAobGVhZFN1cnJvZ2F0ZSAtIDU1Mjk2IDw8IDEwIHwgY29kZVBvaW50IC0gNTYzMjApICsgNjU1MzY7CiAgICAgICAgfSBlbHNlIGlmIChsZWFkU3Vycm9nYXRlKSB7CiAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpCiAgICAgICAgICAgIGJ5dGVzLnB1c2goMjM5LCAxOTEsIDE4OSk7CiAgICAgICAgfQogICAgICAgIGxlYWRTdXJyb2dhdGUgPSBudWxsOwogICAgICAgIGlmIChjb2RlUG9pbnQgPCAxMjgpIHsKICAgICAgICAgIGlmICgodW5pdHMgLT0gMSkgPCAwKQogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGJ5dGVzLnB1c2goY29kZVBvaW50KTsKICAgICAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDIwNDgpIHsKICAgICAgICAgIGlmICgodW5pdHMgLT0gMikgPCAwKQogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGJ5dGVzLnB1c2goY29kZVBvaW50ID4+IDYgfCAxOTIsIGNvZGVQb2ludCAmIDYzIHwgMTI4KTsKICAgICAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDY1NTM2KSB7CiAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpIDwgMCkKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBieXRlcy5wdXNoKGNvZGVQb2ludCA+PiAxMiB8IDIyNCwgY29kZVBvaW50ID4+IDYgJiA2MyB8IDEyOCwgY29kZVBvaW50ICYgNjMgfCAxMjgpOwogICAgICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMTExNDExMikgewogICAgICAgICAgaWYgKCh1bml0cyAtPSA0KSA8IDApCiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgYnl0ZXMucHVzaChjb2RlUG9pbnQgPj4gMTggfCAyNDAsIGNvZGVQb2ludCA+PiAxMiAmIDYzIHwgMTI4LCBjb2RlUG9pbnQgPj4gNiAmIDYzIHwgMTI4LCBjb2RlUG9pbnQgJiA2MyB8IDEyOCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiSW52YWxpZCBjb2RlIHBvaW50Iik7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBieXRlczsKICAgIH0KICAgIGZ1bmN0aW9uIGFzY2lpVG9CeXRlcyhzdHIpIHsKICAgICAgY29uc3QgYnl0ZUFycmF5ID0gW107CiAgICAgIGZvciAobGV0IGkyID0gMDsgaTIgPCBzdHIubGVuZ3RoOyArK2kyKSB7CiAgICAgICAgYnl0ZUFycmF5LnB1c2goc3RyLmNoYXJDb2RlQXQoaTIpICYgMjU1KTsKICAgICAgfQogICAgICByZXR1cm4gYnl0ZUFycmF5OwogICAgfQogICAgZnVuY3Rpb24gdXRmMTZsZVRvQnl0ZXMoc3RyLCB1bml0cykgewogICAgICBsZXQgYzIsIGhpLCBsbzsKICAgICAgY29uc3QgYnl0ZUFycmF5ID0gW107CiAgICAgIGZvciAobGV0IGkyID0gMDsgaTIgPCBzdHIubGVuZ3RoOyArK2kyKSB7CiAgICAgICAgaWYgKCh1bml0cyAtPSAyKSA8IDApCiAgICAgICAgICBicmVhazsKICAgICAgICBjMiA9IHN0ci5jaGFyQ29kZUF0KGkyKTsKICAgICAgICBoaSA9IGMyID4+IDg7CiAgICAgICAgbG8gPSBjMiAlIDI1NjsKICAgICAgICBieXRlQXJyYXkucHVzaChsbyk7CiAgICAgICAgYnl0ZUFycmF5LnB1c2goaGkpOwogICAgICB9CiAgICAgIHJldHVybiBieXRlQXJyYXk7CiAgICB9CiAgICBmdW5jdGlvbiBiYXNlNjRUb0J5dGVzKHN0cikgewogICAgICByZXR1cm4gYmFzZTY0LnRvQnl0ZUFycmF5KGJhc2U2NGNsZWFuKHN0cikpOwogICAgfQogICAgZnVuY3Rpb24gYmxpdEJ1ZmZlcihzcmMsIGRzdCwgb2Zmc2V0LCBsZW5ndGgpIHsKICAgICAgbGV0IGkyOwogICAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW5ndGg7ICsraTIpIHsKICAgICAgICBpZiAoaTIgKyBvZmZzZXQgPj0gZHN0Lmxlbmd0aCB8fCBpMiA+PSBzcmMubGVuZ3RoKQogICAgICAgICAgYnJlYWs7CiAgICAgICAgZHN0W2kyICsgb2Zmc2V0XSA9IHNyY1tpMl07CiAgICAgIH0KICAgICAgcmV0dXJuIGkyOwogICAgfQogICAgZnVuY3Rpb24gaXNJbnN0YW5jZShvYmosIHR5cGUpIHsKICAgICAgcmV0dXJuIG9iaiBpbnN0YW5jZW9mIHR5cGUgfHwgb2JqICE9IG51bGwgJiYgb2JqLmNvbnN0cnVjdG9yICE9IG51bGwgJiYgb2JqLmNvbnN0cnVjdG9yLm5hbWUgIT0gbnVsbCAmJiBvYmouY29uc3RydWN0b3IubmFtZSA9PT0gdHlwZS5uYW1lOwogICAgfQogICAgZnVuY3Rpb24gbnVtYmVySXNOYU4ob2JqKSB7CiAgICAgIHJldHVybiBvYmogIT09IG9iajsKICAgIH0KICAgIGNvbnN0IGhleFNsaWNlTG9va3VwVGFibGUgPSBmdW5jdGlvbigpIHsKICAgICAgY29uc3QgYWxwaGFiZXQgPSAiMDEyMzQ1Njc4OWFiY2RlZiI7CiAgICAgIGNvbnN0IHRhYmxlID0gbmV3IEFycmF5KDI1Nik7CiAgICAgIGZvciAobGV0IGkyID0gMDsgaTIgPCAxNjsgKytpMikgewogICAgICAgIGNvbnN0IGkxNiA9IGkyICogMTY7CiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAxNjsgKytqKSB7CiAgICAgICAgICB0YWJsZVtpMTYgKyBqXSA9IGFscGhhYmV0W2kyXSArIGFscGhhYmV0W2pdOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gdGFibGU7CiAgICB9KCk7CiAgICBmdW5jdGlvbiBkZWZpbmVCaWdJbnRNZXRob2QoZm4pIHsKICAgICAgcmV0dXJuIHR5cGVvZiBCaWdJbnQgPT09ICJ1bmRlZmluZWQiID8gQnVmZmVyQmlnSW50Tm90RGVmaW5lZCA6IGZuOwogICAgfQogICAgZnVuY3Rpb24gQnVmZmVyQmlnSW50Tm90RGVmaW5lZCgpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCJCaWdJbnQgbm90IHN1cHBvcnRlZCIpOwogICAgfQogIH0pKGJ1ZmZlcik7CiAgdmFyIEJ1ZmZlciQxID0gYnVmZmVyLkJ1ZmZlcjsKICB2YXIgQ1JDX1RBQkxFID0gWwogICAgMCwKICAgIDE5OTY5NTk4OTQsCiAgICAzOTkzOTE5Nzg4LAogICAgMjU2NzUyNDc5NCwKICAgIDEyNDYzNDEzNywKICAgIDE4ODYwNTc2MTUsCiAgICAzOTE1NjIxNjg1LAogICAgMjY1NzM5MjAzNSwKICAgIDI0OTI2ODI3NCwKICAgIDIwNDQ1MDgzMjQsCiAgICAzNzcyMTE1MjMwLAogICAgMjU0NzE3Nzg2NCwKICAgIDE2Mjk0MTk5NSwKICAgIDIxMjU1NjEwMjEsCiAgICAzODg3NjA3MDQ3LAogICAgMjQyODQ0NDA0OSwKICAgIDQ5ODUzNjU0OCwKICAgIDE3ODk5Mjc2NjYsCiAgICA0MDg5MDE2NjQ4LAogICAgMjIyNzA2MTIxNCwKICAgIDQ1MDU0ODg2MSwKICAgIDE4NDMyNTg2MDMsCiAgICA0MTA3NTgwNzUzLAogICAgMjIxMTY3NzYzOSwKICAgIDMyNTg4Mzk5MCwKICAgIDE2ODQ3NzcxNTIsCiAgICA0MjUxMTIyMDQyLAogICAgMjMyMTkyNjYzNiwKICAgIDMzNTYzMzQ4NywKICAgIDE2NjEzNjU0NjUsCiAgICA0MTk1MzAyNzU1LAogICAgMjM2NjExNTMxNywKICAgIDk5NzA3MzA5NiwKICAgIDEyODE5NTM4ODYsCiAgICAzNTc5ODU1MzMyLAogICAgMjcyNDY4ODI0MiwKICAgIDEwMDY4ODgxNDUsCiAgICAxMjU4NjA3Njg3LAogICAgMzUyNDEwMTYyOSwKICAgIDI3Njg5NDI0NDMsCiAgICA5MDEwOTc3MjIsCiAgICAxMTE5MDAwNjg0LAogICAgMzY4NjUxNzIwNiwKICAgIDI4OTgwNjU3MjgsCiAgICA4NTMwNDQ0NTEsCiAgICAxMTcyMjY2MTAxLAogICAgMzcwNTAxNTc1OSwKICAgIDI4ODI2MTY2NjUsCiAgICA2NTE3Njc5ODAsCiAgICAxMzczNTAzNTQ2LAogICAgMzM2OTU1NDMwNCwKICAgIDMyMTgxMDQ1OTgsCiAgICA1NjU1MDcyNTMsCiAgICAxNDU0NjIxNzMxLAogICAgMzQ4NTExMTcwNSwKICAgIDMwOTk0MzYzMDMsCiAgICA2NzEyNjY5NzQsCiAgICAxNTk0MTk4MDI0LAogICAgMzMyMjczMDkzMCwKICAgIDI5NzAzNDc4MTIsCiAgICA3OTU4MzU1MjcsCiAgICAxNDgzMjMwMjI1LAogICAgMzI0NDM2NzI3NSwKICAgIDMwNjAxNDk1NjUsCiAgICAxOTk0MTQ2MTkyLAogICAgMzExNTg1MzQsCiAgICAyNTYzOTA3NzcyLAogICAgNDAyMzcxNzkzMCwKICAgIDE5MDc0NTk0NjUsCiAgICAxMTI2MzcyMTUsCiAgICAyNjgwMTUzMjUzLAogICAgMzkwNDQyNzA1OSwKICAgIDIwMTM3NzYyOTAsCiAgICAyNTE3MjIwMzYsCiAgICAyNTE3MjE1Mzc0LAogICAgMzc3NTgzMDA0MCwKICAgIDIxMzc2NTY3NjMsCiAgICAxNDEzNzY4MTMsCiAgICAyNDM5Mjc3NzE5LAogICAgMzg2NTI3MTI5NywKICAgIDE4MDIxOTU0NDQsCiAgICA0NzY4NjQ4NjYsCiAgICAyMjM4MDAxMzY4LAogICAgNDA2NjUwODg3OCwKICAgIDE4MTIzNzA5MjUsCiAgICA0NTMwOTI3MzEsCiAgICAyMTgxNjI1MDI1LAogICAgNDExMTQ1MTIyMywKICAgIDE3MDYwODg5MDIsCiAgICAzMTQwNDI3MDQsCiAgICAyMzQ0NTMyMjAyLAogICAgNDI0MDAxNzUzMiwKICAgIDE2NTg2NTgyNzEsCiAgICAzNjY2MTk5NzcsCiAgICAyMzYyNjcwMzIzLAogICAgNDIyNDk5NDQwNSwKICAgIDEzMDM1MzU5NjAsCiAgICA5ODQ5NjE0ODYsCiAgICAyNzQ3MDA3MDkyLAogICAgMzU2OTAzNzUzOCwKICAgIDEyNTYxNzA4MTcsCiAgICAxMDM3NjA0MzExLAogICAgMjc2NTIxMDczMywKICAgIDM1NTQwNzk5OTUsCiAgICAxMTMxMDE0NTA2LAogICAgODc5Njc5OTk2LAogICAgMjkwOTI0MzQ2MiwKICAgIDM2NjM3NzE4NTYsCiAgICAxMTQxMTI0NDY3LAogICAgODU1ODQyMjc3LAogICAgMjg1MjgwMTYzMSwKICAgIDM3MDg2NDg2NDksCiAgICAxMzQyNTMzOTQ4LAogICAgNjU0NDU5MzA2LAogICAgMzE4ODM5NjA0OCwKICAgIDMzNzMwMTUxNzQsCiAgICAxNDY2NDc5OTA5LAogICAgNTQ0MTc5NjM1LAogICAgMzExMDUyMzkxMywKICAgIDM0NjI1MjIwMTUsCiAgICAxNTkxNjcxMDU0LAogICAgNzAyMTM4Nzc2LAogICAgMjk2NjQ2MDQ1MCwKICAgIDMzNTI3OTk0MTIsCiAgICAxNTA0OTE4ODA3LAogICAgNzgzNTUxODczLAogICAgMzA4MjY0MDQ0MywKICAgIDMyMzM0NDI5ODksCiAgICAzOTg4MjkyMzg0LAogICAgMjU5NjI1NDY0NiwKICAgIDYyMzE3MDY4LAogICAgMTk1NzgxMDg0MiwKICAgIDM5Mzk4NDU5NDUsCiAgICAyNjQ3ODE2MTExLAogICAgODE0NzA5OTcsCiAgICAxOTQzODAzNTIzLAogICAgMzgxNDkxODkzMCwKICAgIDI0ODk1OTY4MDQsCiAgICAyMjUyNzQ0MzAsCiAgICAyMDUzNzkwMzc2LAogICAgMzgyNjE3NTc1NSwKICAgIDI0NjY5MDYwMTMsCiAgICAxNjc4MTY3NDMsCiAgICAyMDk3NjUxMzc3LAogICAgNDAyNzU1MjU4MCwKICAgIDIyNjU0OTAzODYsCiAgICA1MDM0NDQwNzIsCiAgICAxNzYyMDUwODE0LAogICAgNDE1MDQxNzI0NSwKICAgIDIxNTQxMjkzNTUsCiAgICA0MjY1MjIyMjUsCiAgICAxODUyNTA3ODc5LAogICAgNDI3NTMxMzUyNiwKICAgIDIzMTIzMTc5MjAsCiAgICAyODI3NTM2MjYsCiAgICAxNzQyNTU1ODUyLAogICAgNDE4OTcwODE0MywKICAgIDIzOTQ4Nzc5NDUsCiAgICAzOTc5MTc3NjMsCiAgICAxNjIyMTgzNjM3LAogICAgMzYwNDM5MDg4OCwKICAgIDI3MTQ4NjY1NTgsCiAgICA5NTM3Mjk3MzIsCiAgICAxMzQwMDc2NjI2LAogICAgMzUxODcxOTk4NSwKICAgIDI3OTczNjA5OTksCiAgICAxMDY4ODI4MzgxLAogICAgMTIxOTYzODg1OSwKICAgIDM2MjQ3NDE4NTAsCiAgICAyOTM2Njc1MTQ4LAogICAgOTA2MTg1NDYyLAogICAgMTA5MDgxMjUxMiwKICAgIDM3NDc2NzIwMDMsCiAgICAyODI1Mzc5NjY5LAogICAgODI5MzI5MTM1LAogICAgMTE4MTMzNTE2MSwKICAgIDM0MTIxNzc4MDQsCiAgICAzMTYwODM0ODQyLAogICAgNjI4MDg1NDA4LAogICAgMTM4MjYwNTM2NiwKICAgIDM0MjMzNjkxMDksCiAgICAzMTM4MDc4NDY3LAogICAgNTcwNTYyMjMzLAogICAgMTQyNjQwMDgxNSwKICAgIDMzMTczMTY1NDIsCiAgICAyOTk4NzMzNjA4LAogICAgNzMzMjM5OTU0LAogICAgMTU1NTI2MTk1NiwKICAgIDMyNjg5MzU1OTEsCiAgICAzMDUwMzYwNjI1LAogICAgNzUyNDU5NDAzLAogICAgMTU0MTMyMDIyMSwKICAgIDI2MDcwNzE5MjAsCiAgICAzOTY1OTczMDMwLAogICAgMTk2OTkyMjk3MiwKICAgIDQwNzM1NDk4LAogICAgMjYxNzgzNzIyNSwKICAgIDM5NDM1NzcxNTEsCiAgICAxOTEzMDg3ODc3LAogICAgODM5MDgzNzEsCiAgICAyNTEyMzQxNjM0LAogICAgMzgwMzc0MDY5MiwKICAgIDIwNzUyMDg2MjIsCiAgICAyMTMyNjExMTIsCiAgICAyNDYzMjcyNjAzLAogICAgMzg1NTk5MDI4NSwKICAgIDIwOTQ4NTQwNzEsCiAgICAxOTg5NTg4ODEsCiAgICAyMjYyMDI5MDEyLAogICAgNDA1NzI2MDYxMCwKICAgIDE3NTkzNTk5OTIsCiAgICA1MzQ0MTQxOTAsCiAgICAyMTc2NzE4NTQxLAogICAgNDEzOTMyOTExNSwKICAgIDE4NzM4MzYwMDEsCiAgICA0MTQ2NjQ1NjcsCiAgICAyMjgyMjQ4OTM0LAogICAgNDI3OTIwMDM2OCwKICAgIDE3MTE2ODQ1NTQsCiAgICAyODUyODExMTYsCiAgICAyNDA1ODAxNzI3LAogICAgNDE2NzIxNjc0NSwKICAgIDE2MzQ0Njc3OTUsCiAgICAzNzYyMjk3MDEsCiAgICAyNjg1MDY3ODk2LAogICAgMzYwODAwNzQwNiwKICAgIDEzMDg5MTg2MTIsCiAgICA5NTY1NDM5MzgsCiAgICAyODA4NTU1MTA1LAogICAgMzQ5NTk1ODI2MywKICAgIDEyMzE2MzYzMDEsCiAgICAxMDQ3NDI3MDM1LAogICAgMjkzMjk1OTgxOCwKICAgIDM2NTQ3MDM4MzYsCiAgICAxMDg4MzU5MjcwLAogICAgOTM2OTE4ZTMsCiAgICAyODQ3NzE0ODk5LAogICAgMzczNjgzNzgyOSwKICAgIDEyMDI5MDA4NjMsCiAgICA4MTcyMzM4OTcsCiAgICAzMTgzMzQyMTA4LAogICAgMzQwMTIzNzEzMCwKICAgIDE0MDQyNzc1NTIsCiAgICA2MTU4MTgxNTAsCiAgICAzMTM0MjA3NDkzLAogICAgMzQ1MzQyMTIwMywKICAgIDE0MjM4NTc0NDksCiAgICA2MDE0NTA0MzEsCiAgICAzMDA5ODM3NjE0LAogICAgMzI5NDcxMDQ1NiwKICAgIDE1NjcxMDM3NDYsCiAgICA3MTE5Mjg3MjQsCiAgICAzMDIwNjY4NDcxLAogICAgMzI3MjM4MDA2NSwKICAgIDE1MTAzMzQyMzUsCiAgICA3NTUxNjcxMTcKICBdOwogIGlmICh0eXBlb2YgSW50MzJBcnJheSAhPT0gInVuZGVmaW5lZCIpIHsKICAgIENSQ19UQUJMRSA9IG5ldyBJbnQzMkFycmF5KENSQ19UQUJMRSk7CiAgfQogIGZ1bmN0aW9uIGVuc3VyZUJ1ZmZlcihpbnB1dCkgewogICAgaWYgKEJ1ZmZlciQxLmlzQnVmZmVyKGlucHV0KSkgewogICAgICByZXR1cm4gaW5wdXQ7CiAgICB9CiAgICB2YXIgaGFzTmV3QnVmZmVyQVBJID0gdHlwZW9mIEJ1ZmZlciQxLmFsbG9jID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBCdWZmZXIkMS5mcm9tID09PSAiZnVuY3Rpb24iOwogICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gIm51bWJlciIpIHsKICAgICAgcmV0dXJuIGhhc05ld0J1ZmZlckFQSSA/IEJ1ZmZlciQxLmFsbG9jKGlucHV0KSA6IG5ldyBCdWZmZXIkMShpbnB1dCk7CiAgICB9IGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gInN0cmluZyIpIHsKICAgICAgcmV0dXJuIGhhc05ld0J1ZmZlckFQSSA/IEJ1ZmZlciQxLmZyb20oaW5wdXQpIDogbmV3IEJ1ZmZlciQxKGlucHV0KTsKICAgIH0gZWxzZSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigiaW5wdXQgbXVzdCBiZSBidWZmZXIsIG51bWJlciwgb3Igc3RyaW5nLCByZWNlaXZlZCAiICsgdHlwZW9mIGlucHV0KTsKICAgIH0KICB9CiAgZnVuY3Rpb24gYnVmZmVyaXplSW50KG51bSkgewogICAgdmFyIHRtcCA9IGVuc3VyZUJ1ZmZlcig0KTsKICAgIHRtcC53cml0ZUludDMyQkUobnVtLCAwKTsKICAgIHJldHVybiB0bXA7CiAgfQogIGZ1bmN0aW9uIF9jcmMzMihidWYsIHByZXZpb3VzKSB7CiAgICBidWYgPSBlbnN1cmVCdWZmZXIoYnVmKTsKICAgIGlmIChCdWZmZXIkMS5pc0J1ZmZlcihwcmV2aW91cykpIHsKICAgICAgcHJldmlvdXMgPSBwcmV2aW91cy5yZWFkVUludDMyQkUoMCk7CiAgICB9CiAgICB2YXIgY3JjID0gfn5wcmV2aW91cyBeIC0xOwogICAgZm9yICh2YXIgbiA9IDA7IG4gPCBidWYubGVuZ3RoOyBuKyspIHsKICAgICAgY3JjID0gQ1JDX1RBQkxFWyhjcmMgXiBidWZbbl0pICYgMjU1XSBeIGNyYyA+Pj4gODsKICAgIH0KICAgIHJldHVybiBjcmMgXiAtMTsKICB9CiAgZnVuY3Rpb24gY3JjMzIoKSB7CiAgICByZXR1cm4gYnVmZmVyaXplSW50KF9jcmMzMi5hcHBseShudWxsLCBhcmd1bWVudHMpKTsKICB9CiAgY3JjMzIuc2lnbmVkID0gZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gX2NyYzMyLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7CiAgfTsKICBjcmMzMi51bnNpZ25lZCA9IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIF9jcmMzMi5hcHBseShudWxsLCBhcmd1bWVudHMpID4+PiAwOwogIH07CiAgdmFyIGJ1ZmZlckNyYzMyID0gY3JjMzI7CiAgdmFyIGhhcyA9IGZ1bmN0aW9uKG9iaiwgcHJvcCkgewogICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApOwogIH07CiAgdmFyIGlzRW51bWVyYWJsZSA9IGZ1bmN0aW9uKG9iaiwgcHJvcCkgewogICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChvYmosIHByb3ApOwogIH07CiAgZnVuY3Rpb24gZW50cmllcyhvYmopIHsKICAgIGlmIChvYmogPT0gbnVsbCkgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY29udmVydCB1bmRlZmluZWQgb3IgbnVsbCB0byBvYmplY3QiKTsKICAgIH0KICAgIHZhciBwYWlycyA9IFtdOwogICAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgICBpZiAoaGFzKG9iaiwga2V5KSAmJiBpc0VudW1lcmFibGUob2JqLCBrZXkpKSB7CiAgICAgICAgcGFpcnMucHVzaChba2V5LCBvYmpba2V5XV0pOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gcGFpcnM7CiAgfQogIHZhciBlbnRyaWVzXzEgPSBlbnRyaWVzOwogIHZhciBvYmplY3RfZW50cmllc1BvbnlmaWxsID0gdHlwZW9mIE9iamVjdC5lbnRyaWVzID09PSAiZnVuY3Rpb24iID8gT2JqZWN0LmVudHJpZXMgOiBlbnRyaWVzXzE7CiAgdmFyIGRpc3QgPSB7fTsKICB2YXIgcmVtb3RlRmlsZSA9IHt9OwogIHZhciBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0JDEgPSBpbnRlcm9wUmVxdWlyZURlZmF1bHQuZXhwb3J0czsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkocmVtb3RlRmlsZSwgIl9fZXNNb2R1bGUiLCB7CiAgICB2YWx1ZTogdHJ1ZQogIH0pOwogIHJlbW90ZUZpbGUuZGVmYXVsdCA9IHZvaWQgMDsKICB2YXIgX3JlZ2VuZXJhdG9yJDEgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0JDEocmVnZW5lcmF0b3IpOwogIHZhciBfYXN5bmNUb0dlbmVyYXRvcjIkMSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQkMShhc3luY1RvR2VuZXJhdG9yLmV4cG9ydHMpOwogIHZhciBfY2xhc3NDYWxsQ2hlY2syJDEgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0JDEoY2xhc3NDYWxsQ2hlY2suZXhwb3J0cyk7CiAgdmFyIF9jcmVhdGVDbGFzczIkMSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQkMShjcmVhdGVDbGFzcy5leHBvcnRzKTsKICB2YXIgX2RlZmluZVByb3BlcnR5MiQxID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdCQxKGRlZmluZVByb3BlcnR5JDMuZXhwb3J0cyk7CiAgdmFyIF9maWxlVXJpVG9QYXRoID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdCQxKHJlcXVpcmUkJDEpOwogIHZhciBfID0gZGlzdDsKICBmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsKICAgIHZhciBrZXlzMiA9IE9iamVjdC5rZXlzKG9iamVjdCk7CiAgICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgICB2YXIgc3ltYm9sczIgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7CiAgICAgIGlmIChlbnVtZXJhYmxlT25seSkKICAgICAgICBzeW1ib2xzMiA9IHN5bWJvbHMyLmZpbHRlcihmdW5jdGlvbihzeW0pIHsKICAgICAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOwogICAgICAgIH0pOwogICAgICBrZXlzMi5wdXNoLmFwcGx5KGtleXMyLCBzeW1ib2xzMik7CiAgICB9CiAgICByZXR1cm4ga2V5czI7CiAgfQogIGZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7CiAgICBmb3IgKHZhciBpMiA9IDE7IGkyIDwgYXJndW1lbnRzLmxlbmd0aDsgaTIrKykgewogICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2kyXSAhPSBudWxsID8gYXJndW1lbnRzW2kyXSA6IHt9OwogICAgICBpZiAoaTIgJSAyKSB7CiAgICAgICAgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbihrZXkpIHsKICAgICAgICAgICgwLCBfZGVmaW5lUHJvcGVydHkyJDEuZGVmYXVsdCkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbihrZXkpIHsKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gdGFyZ2V0OwogIH0KICB2YXIgbXlHbG9iYWwgPSB0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIiA/IHdpbmRvdyA6IHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIiA/IHNlbGYgOiB7CiAgICBmZXRjaDogdm9pZCAwCiAgfTsKICB2YXIgUmVtb3RlRmlsZSQxID0gLyogQF9fUFVSRV9fICovIGZ1bmN0aW9uKCkgewogICAgKDAsIF9jcmVhdGVDbGFzczIkMS5kZWZhdWx0KShSZW1vdGVGaWxlMiwgW3sKICAgICAga2V5OiAiZ2V0QnVmZmVyRnJvbVJlc3BvbnNlIiwKICAgICAgdmFsdWU6IGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBfZ2V0QnVmZmVyRnJvbVJlc3BvbnNlID0gKDAsIF9hc3luY1RvR2VuZXJhdG9yMiQxLmRlZmF1bHQpKC8qIEBfX1BVUkVfXyAqLyBfcmVnZW5lcmF0b3IkMS5kZWZhdWx0Lm1hcmsoZnVuY3Rpb24gX2NhbGxlZShyZXNwb25zZSkgewogICAgICAgICAgdmFyIHJlc3A7CiAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yJDEuZGVmYXVsdC53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICBpZiAoISh0eXBlb2YgcmVzcG9uc2UuYnVmZmVyID09PSAiZnVuY3Rpb24iKSkgewogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlLmJ1ZmZlcigpKTsKICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgaWYgKCEodHlwZW9mIHJlc3BvbnNlLmFycmF5QnVmZmVyID09PSAiZnVuY3Rpb24iKSkgewogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmFycmF5QnVmZmVyKCk7CiAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICAgIHJlc3AgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBCdWZmZXIuZnJvbShyZXNwKSk7CiAgICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJpbnZhbGlkIEhUVFAgcmVzcG9uc2Ugb2JqZWN0LCBoYXMgbm8gYnVmZmVyIG1ldGhvZCwgYW5kIG5vIGFycmF5QnVmZmVyIG1ldGhvZCIpOwogICAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgICB9KSk7CiAgICAgICAgZnVuY3Rpb24gZ2V0QnVmZmVyRnJvbVJlc3BvbnNlKF94KSB7CiAgICAgICAgICByZXR1cm4gX2dldEJ1ZmZlckZyb21SZXNwb25zZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZ2V0QnVmZmVyRnJvbVJlc3BvbnNlOwogICAgICB9KCkKICAgIH1dKTsKICAgIGZ1bmN0aW9uIFJlbW90ZUZpbGUyKHNvdXJjZSkgewogICAgICB2YXIgb3B0cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdm9pZCAwID8gYXJndW1lbnRzWzFdIDoge307CiAgICAgICgwLCBfY2xhc3NDYWxsQ2hlY2syJDEuZGVmYXVsdCkodGhpcywgUmVtb3RlRmlsZTIpOwogICAgICAoMCwgX2RlZmluZVByb3BlcnR5MiQxLmRlZmF1bHQpKHRoaXMsICJ1cmwiLCB2b2lkIDApOwogICAgICAoMCwgX2RlZmluZVByb3BlcnR5MiQxLmRlZmF1bHQpKHRoaXMsICJfc3RhdCIsIHZvaWQgMCk7CiAgICAgICgwLCBfZGVmaW5lUHJvcGVydHkyJDEuZGVmYXVsdCkodGhpcywgImZldGNoSW1wbGVtZW50YXRpb24iLCB2b2lkIDApOwogICAgICAoMCwgX2RlZmluZVByb3BlcnR5MiQxLmRlZmF1bHQpKHRoaXMsICJiYXNlT3ZlcnJpZGVzIiwge30pOwogICAgICB0aGlzLnVybCA9IHNvdXJjZTsKICAgICAgaWYgKHNvdXJjZS5zdGFydHNXaXRoKCJmaWxlOi8vIikpIHsKICAgICAgICB2YXIgcGF0aDIgPSAoMCwgX2ZpbGVVcmlUb1BhdGguZGVmYXVsdCkoc291cmNlKTsKICAgICAgICBpZiAoIXBhdGgyKSB7CiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJpbnZhbGlkIGZpbGUgdXJsIik7CiAgICAgICAgfQogICAgICAgIHZhciBsb2NhbEZpbGUyID0gbmV3IF8uTG9jYWxGaWxlKHBhdGgyKTsKICAgICAgICB0aGlzLnJlYWQgPSBsb2NhbEZpbGUyLnJlYWQuYmluZChsb2NhbEZpbGUyKTsKICAgICAgICB0aGlzLnJlYWRGaWxlID0gbG9jYWxGaWxlMi5yZWFkRmlsZS5iaW5kKGxvY2FsRmlsZTIpOwogICAgICAgIHRoaXMuc3RhdCA9IGxvY2FsRmlsZTIuc3RhdC5iaW5kKGxvY2FsRmlsZTIpOwogICAgICAgIHRoaXMuZmV0Y2hJbXBsZW1lbnRhdGlvbiA9IGZ1bmN0aW9uKCkgewogICAgICAgIH07CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciBmZXRjaDIgPSBvcHRzLmZldGNoIHx8IG15R2xvYmFsLmZldGNoICYmIG15R2xvYmFsLmZldGNoLmJpbmQobXlHbG9iYWwpOwogICAgICBpZiAoIWZldGNoMikgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIm5vIGZldGNoIGZ1bmN0aW9uIHN1cHBsaWVkLCBhbmQgbm9uZSBmb3VuZCBpbiBnbG9iYWwgZW52aXJvbm1lbnQiKTsKICAgICAgfQogICAgICBpZiAob3B0cy5vdmVycmlkZXMpIHsKICAgICAgICB0aGlzLmJhc2VPdmVycmlkZXMgPSBvcHRzLm92ZXJyaWRlczsKICAgICAgfQogICAgICB0aGlzLmZldGNoSW1wbGVtZW50YXRpb24gPSBmZXRjaDI7CiAgICB9CiAgICAoMCwgX2NyZWF0ZUNsYXNzMiQxLmRlZmF1bHQpKFJlbW90ZUZpbGUyLCBbewogICAgICBrZXk6ICJmZXRjaCIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbigpIHsKICAgICAgICB2YXIgX2ZldGNoID0gKDAsIF9hc3luY1RvR2VuZXJhdG9yMiQxLmRlZmF1bHQpKC8qIEBfX1BVUkVfXyAqLyBfcmVnZW5lcmF0b3IkMS5kZWZhdWx0Lm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoaW5wdXQsIGluaXQyKSB7CiAgICAgICAgICB2YXIgcmVzcG9uc2U7CiAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yJDEuZGVmYXVsdC53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAwOwogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZldGNoSW1wbGVtZW50YXRpb24oaW5wdXQsIGluaXQyKTsKICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxNjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gNjsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gX2NvbnRleHQyWyJjYXRjaCJdKDApOwogICAgICAgICAgICAgICAgICBpZiAoIShfY29udGV4dDIudDAubWVzc2FnZSA9PT0gIkZhaWxlZCB0byBmZXRjaCIpKSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxNTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oImdlbmVyaWMtZmlsZWhhbmRsZTogcmVmZXRjaGluZyAiLmNvbmNhdChpbnB1dCwgIiB0byBhdHRlbXB0IHRvIHdvcmsgYXJvdW5kIGNocm9tZSBDT1JTIGhlYWRlciBjYWNoaW5nIGJ1ZyIpKTsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMjsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2hJbXBsZW1lbnRhdGlvbihpbnB1dCwgX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBpbml0MiksIHt9LCB7CiAgICAgICAgICAgICAgICAgICAgY2FjaGU6ICJyZWxvYWQiCiAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTY7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICAgICAgdGhyb3cgX2NvbnRleHQyLnQwOwogICAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlKTsKICAgICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWUyLCB0aGlzLCBbWzAsIDZdXSk7CiAgICAgICAgfSkpOwogICAgICAgIGZ1bmN0aW9uIGZldGNoMihfeDIsIF94MykgewogICAgICAgICAgcmV0dXJuIF9mZXRjaC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmV0Y2gyOwogICAgICB9KCkKICAgIH0sIHsKICAgICAga2V5OiAicmVhZCIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbigpIHsKICAgICAgICB2YXIgX3JlYWQgPSAoMCwgX2FzeW5jVG9HZW5lcmF0b3IyJDEuZGVmYXVsdCkoLyogQF9fUFVSRV9fICovIF9yZWdlbmVyYXRvciQxLmRlZmF1bHQubWFyayhmdW5jdGlvbiBfY2FsbGVlMyhidWZmZXIyKSB7CiAgICAgICAgICB2YXIgb2Zmc2V0LCBsZW5ndGgsIHBvc2l0aW9uLCBvcHRzLCBfb3B0cyRoZWFkZXJzLCBoZWFkZXJzLCBzaWduYWwsIF9vcHRzJG92ZXJyaWRlcywgb3ZlcnJpZGVzLCBhcmdzLCByZXNwb25zZSwgcmVzcG9uc2VEYXRhLCBieXRlc0NvcGllZCwgcmVzLCBzaXplTWF0Y2gsIF9hcmdzMyA9IGFyZ3VtZW50czsKICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3IkMS5kZWZhdWx0LndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICBvZmZzZXQgPSBfYXJnczMubGVuZ3RoID4gMSAmJiBfYXJnczNbMV0gIT09IHZvaWQgMCA/IF9hcmdzM1sxXSA6IDA7CiAgICAgICAgICAgICAgICAgIGxlbmd0aCA9IF9hcmdzMy5sZW5ndGggPiAyID8gX2FyZ3MzWzJdIDogdm9pZCAwOwogICAgICAgICAgICAgICAgICBwb3NpdGlvbiA9IF9hcmdzMy5sZW5ndGggPiAzICYmIF9hcmdzM1szXSAhPT0gdm9pZCAwID8gX2FyZ3MzWzNdIDogMDsKICAgICAgICAgICAgICAgICAgb3B0cyA9IF9hcmdzMy5sZW5ndGggPiA0ICYmIF9hcmdzM1s0XSAhPT0gdm9pZCAwID8gX2FyZ3MzWzRdIDoge307CiAgICAgICAgICAgICAgICAgIF9vcHRzJGhlYWRlcnMgPSBvcHRzLmhlYWRlcnMsIGhlYWRlcnMgPSBfb3B0cyRoZWFkZXJzID09PSB2b2lkIDAgPyB7fSA6IF9vcHRzJGhlYWRlcnMsIHNpZ25hbCA9IG9wdHMuc2lnbmFsLCBfb3B0cyRvdmVycmlkZXMgPSBvcHRzLm92ZXJyaWRlcywgb3ZlcnJpZGVzID0gX29wdHMkb3ZlcnJpZGVzID09PSB2b2lkIDAgPyB7fSA6IF9vcHRzJG92ZXJyaWRlczsKICAgICAgICAgICAgICAgICAgaWYgKGxlbmd0aCA8IEluZmluaXR5KSB7CiAgICAgICAgICAgICAgICAgICAgaGVhZGVycy5yYW5nZSA9ICJieXRlcz0iLmNvbmNhdChwb3NpdGlvbiwgIi0iKS5jb25jYXQocG9zaXRpb24gKyBsZW5ndGgpOwogICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxlbmd0aCA9PT0gSW5maW5pdHkgJiYgcG9zaXRpb24gIT09IDApIHsKICAgICAgICAgICAgICAgICAgICBoZWFkZXJzLnJhbmdlID0gImJ5dGVzPSIuY29uY2F0KHBvc2l0aW9uLCAiLSIpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGFyZ3MgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdGhpcy5iYXNlT3ZlcnJpZGVzKSwgb3ZlcnJpZGVzKSwge30sIHsKICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgaGVhZGVycyksIG92ZXJyaWRlcy5oZWFkZXJzKSwgdGhpcy5iYXNlT3ZlcnJpZGVzLmhlYWRlcnMpLAogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogIkdFVCIsCiAgICAgICAgICAgICAgICAgICAgcmVkaXJlY3Q6ICJmb2xsb3ciLAogICAgICAgICAgICAgICAgICAgIG1vZGU6ICJjb3JzIiwKICAgICAgICAgICAgICAgICAgICBzaWduYWwKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gOTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2godGhpcy51cmwsIGFyZ3MpOwogICAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiSFRUUCAiLmNvbmNhdChyZXNwb25zZS5zdGF0dXMsICIgIikuY29uY2F0KHJlc3BvbnNlLnN0YXR1c1RleHQpKTsKICAgICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICAgIGlmICghKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwICYmIHBvc2l0aW9uID09PSAwIHx8IHJlc3BvbnNlLnN0YXR1cyA9PT0gMjA2KSkgewogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjE7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxNTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QnVmZmVyRnJvbVJlc3BvbnNlKHJlc3BvbnNlKTsKICAgICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlRGF0YSA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgICAgICBieXRlc0NvcGllZCA9IHJlc3BvbnNlRGF0YS5jb3B5KGJ1ZmZlcjIsIG9mZnNldCwgMCwgTWF0aC5taW4obGVuZ3RoLCByZXNwb25zZURhdGEubGVuZ3RoKSk7CiAgICAgICAgICAgICAgICAgIHJlcyA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCJjb250ZW50LXJhbmdlIik7CiAgICAgICAgICAgICAgICAgIHNpemVNYXRjaCA9IC9cLyhcZCspJC8uZXhlYyhyZXMgfHwgIiIpOwogICAgICAgICAgICAgICAgICBpZiAoc2l6ZU1hdGNoICYmIHNpemVNYXRjaFsxXSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuX3N0YXQgPSB7CiAgICAgICAgICAgICAgICAgICAgICBzaXplOiBwYXJzZUludChzaXplTWF0Y2hbMV0sIDEwKQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgICAgICAgICBieXRlc1JlYWQ6IGJ5dGVzQ29waWVkLAogICAgICAgICAgICAgICAgICAgIGJ1ZmZlcjogYnVmZmVyMgogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgICAgIGlmICghKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSkgewogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjM7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCIke3RoaXMudXJsfSBmZXRjaCByZXR1cm5lZCBzdGF0dXMgMjAwLCBleHBlY3RlZCAyMDYiKTsKICAgICAgICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiSFRUUCAiLmNvbmNhdChyZXNwb25zZS5zdGF0dXMsICIgZmV0Y2hpbmcgIikuY29uY2F0KHRoaXMudXJsKSk7CiAgICAgICAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlMywgdGhpcyk7CiAgICAgICAgfSkpOwogICAgICAgIGZ1bmN0aW9uIHJlYWQoX3g0KSB7CiAgICAgICAgICByZXR1cm4gX3JlYWQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlYWQ7CiAgICAgIH0oKQogICAgfSwgewogICAgICBrZXk6ICJyZWFkRmlsZSIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbigpIHsKICAgICAgICB2YXIgX3JlYWRGaWxlID0gKDAsIF9hc3luY1RvR2VuZXJhdG9yMiQxLmRlZmF1bHQpKC8qIEBfX1BVUkVfXyAqLyBfcmVnZW5lcmF0b3IkMS5kZWZhdWx0Lm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgICAgICB2YXIgb3B0aW9ucywgZW5jb2RpbmcsIG9wdHMsIF9vcHRzLCBfb3B0cyRoZWFkZXJzMiwgaGVhZGVycywgc2lnbmFsLCBfb3B0cyRvdmVycmlkZXMyLCBvdmVycmlkZXMsIGFyZ3MsIHJlc3BvbnNlLCBfYXJnczQgPSBhcmd1bWVudHM7CiAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yJDEuZGVmYXVsdC53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IF9hcmdzNC5sZW5ndGggPiAwICYmIF9hcmdzNFswXSAhPT0gdm9pZCAwID8gX2FyZ3M0WzBdIDoge307CiAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gInN0cmluZyIpIHsKICAgICAgICAgICAgICAgICAgICBlbmNvZGluZyA9IG9wdGlvbnM7CiAgICAgICAgICAgICAgICAgICAgb3B0cyA9IHt9OwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGVuY29kaW5nID0gb3B0aW9ucy5lbmNvZGluZzsKICAgICAgICAgICAgICAgICAgICBvcHRzID0gb3B0aW9uczsKICAgICAgICAgICAgICAgICAgICBkZWxldGUgb3B0cy5lbmNvZGluZzsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBfb3B0cyA9IG9wdHMsIF9vcHRzJGhlYWRlcnMyID0gX29wdHMuaGVhZGVycywgaGVhZGVycyA9IF9vcHRzJGhlYWRlcnMyID09PSB2b2lkIDAgPyB7fSA6IF9vcHRzJGhlYWRlcnMyLCBzaWduYWwgPSBfb3B0cy5zaWduYWwsIF9vcHRzJG92ZXJyaWRlczIgPSBfb3B0cy5vdmVycmlkZXMsIG92ZXJyaWRlcyA9IF9vcHRzJG92ZXJyaWRlczIgPT09IHZvaWQgMCA/IHt9IDogX29wdHMkb3ZlcnJpZGVzMjsKICAgICAgICAgICAgICAgICAgYXJncyA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7CiAgICAgICAgICAgICAgICAgICAgaGVhZGVycywKICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJHRVQiLAogICAgICAgICAgICAgICAgICAgIHJlZGlyZWN0OiAiZm9sbG93IiwKICAgICAgICAgICAgICAgICAgICBtb2RlOiAiY29ycyIsCiAgICAgICAgICAgICAgICAgICAgc2lnbmFsCiAgICAgICAgICAgICAgICAgIH0sIHRoaXMuYmFzZU92ZXJyaWRlcyksIG92ZXJyaWRlcyk7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2godGhpcy51cmwsIGFyZ3MpOwogICAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0NC5zZW50OwogICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJnZW5lcmljLWZpbGVoYW5kbGUgZmFpbGVkIHRvIGZldGNoIik7CiAgICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICAgIGlmICghKHJlc3BvbnNlLnN0YXR1cyAhPT0gMjAwKSkgewogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgdGhyb3cgT2JqZWN0LmFzc2lnbihuZXcgRXJyb3IoIkhUVFAgIi5jb25jYXQocmVzcG9uc2Uuc3RhdHVzLCAiIGZldGNoaW5nICIpLmNvbmNhdCh0aGlzLnVybCkpLCB7CiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgICBpZiAoIShlbmNvZGluZyA9PT0gInV0ZjgiKSkgewogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlLnRleHQoKSk7CiAgICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgICBpZiAoIWVuY29kaW5nKSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxNTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoInVuc3VwcG9ydGVkIGVuY29kaW5nOiAiLmNvbmNhdChlbmNvZGluZykpOwogICAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsIHRoaXMuZ2V0QnVmZmVyRnJvbVJlc3BvbnNlKHJlc3BvbnNlKSk7CiAgICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlNCwgdGhpcyk7CiAgICAgICAgfSkpOwogICAgICAgIGZ1bmN0aW9uIHJlYWRGaWxlKCkgewogICAgICAgICAgcmV0dXJuIF9yZWFkRmlsZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcmVhZEZpbGU7CiAgICAgIH0oKQogICAgfSwgewogICAgICBrZXk6ICJzdGF0IiwKICAgICAgdmFsdWU6IGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBfc3RhdCA9ICgwLCBfYXN5bmNUb0dlbmVyYXRvcjIkMS5kZWZhdWx0KSgvKiBAX19QVVJFX18gKi8gX3JlZ2VuZXJhdG9yJDEuZGVmYXVsdC5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KCkgewogICAgICAgICAgdmFyIGJ1ZjsKICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3IkMS5kZWZhdWx0LndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICBpZiAodGhpcy5fc3RhdCkgewogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBidWYgPSBCdWZmZXIuYWxsb2NVbnNhZmUoMTApOwogICAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlYWQoYnVmLCAwLCAxMCwgMCk7CiAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9zdGF0KSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigidW5hYmxlIHRvIGRldGVybWluZSBzaXplIG9mIGZpbGUgYXQgIi5jb25jYXQodGhpcy51cmwpKTsKICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIsIHRoaXMuX3N0YXQpOwogICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlNSwgdGhpcyk7CiAgICAgICAgfSkpOwogICAgICAgIGZ1bmN0aW9uIHN0YXQoKSB7CiAgICAgICAgICByZXR1cm4gX3N0YXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHN0YXQ7CiAgICAgIH0oKQogICAgfSwgewogICAgICBrZXk6ICJjbG9zZSIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbigpIHsKICAgICAgICB2YXIgX2Nsb3NlID0gKDAsIF9hc3luY1RvR2VuZXJhdG9yMiQxLmRlZmF1bHQpKC8qIEBfX1BVUkVfXyAqLyBfcmVnZW5lcmF0b3IkMS5kZWZhdWx0Lm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYoKSB7CiAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yJDEuZGVmYXVsdC53cmFwKGZ1bmN0aW9uIF9jYWxsZWU2JChfY29udGV4dDYpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5hYnJ1cHQoInJldHVybiIpOwogICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlNik7CiAgICAgICAgfSkpOwogICAgICAgIGZ1bmN0aW9uIGNsb3NlKCkgewogICAgICAgICAgcmV0dXJuIF9jbG9zZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gY2xvc2U7CiAgICAgIH0oKQogICAgfV0pOwogICAgcmV0dXJuIFJlbW90ZUZpbGUyOwogIH0oKTsKICByZW1vdGVGaWxlLmRlZmF1bHQgPSBSZW1vdGVGaWxlJDE7CiAgdmFyIGJsb2JGaWxlID0ge307CiAgdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSBpbnRlcm9wUmVxdWlyZURlZmF1bHQuZXhwb3J0czsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoYmxvYkZpbGUsICJfX2VzTW9kdWxlIiwgewogICAgdmFsdWU6IHRydWUKICB9KTsKICBibG9iRmlsZS5kZWZhdWx0ID0gdm9pZCAwOwogIHZhciBfcmVnZW5lcmF0b3IgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlZ2VuZXJhdG9yKTsKICB2YXIgX2FzeW5jVG9HZW5lcmF0b3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChhc3luY1RvR2VuZXJhdG9yLmV4cG9ydHMpOwogIHZhciBfY2xhc3NDYWxsQ2hlY2syID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChjbGFzc0NhbGxDaGVjay5leHBvcnRzKTsKICB2YXIgX2NyZWF0ZUNsYXNzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoY3JlYXRlQ2xhc3MuZXhwb3J0cyk7CiAgdmFyIF9kZWZpbmVQcm9wZXJ0eTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGRlZmluZVByb3BlcnR5JDMuZXhwb3J0cyk7CiAgZnVuY3Rpb24gcmVhZEJsb2JBc0FycmF5QnVmZmVyKGJsb2IpIHsKICAgIHZhciBmaWxlUmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHsKICAgICAgZmlsZVJlYWRlci5vbmVycm9yID0gZnVuY3Rpb24oKSB7CiAgICAgICAgZmlsZVJlYWRlci5hYm9ydCgpOwogICAgICAgIHJlamVjdChuZXcgRXJyb3IoInByb2JsZW0gcmVhZGluZyBibG9iIikpOwogICAgICB9OwogICAgICBmaWxlUmVhZGVyLm9uYWJvcnQgPSBmdW5jdGlvbigpIHsKICAgICAgICByZWplY3QobmV3IEVycm9yKCJibG9iIHJlYWRpbmcgd2FzIGFib3J0ZWQiKSk7CiAgICAgIH07CiAgICAgIGZpbGVSZWFkZXIub25sb2FkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgaWYgKGZpbGVSZWFkZXIucmVzdWx0ICYmIHR5cGVvZiBmaWxlUmVhZGVyLnJlc3VsdCAhPT0gInN0cmluZyIpIHsKICAgICAgICAgIHJlc29sdmUoZmlsZVJlYWRlci5yZXN1bHQpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZWplY3QobmV3IEVycm9yKCJ1bmtub3duIGVycm9yIHJlYWRpbmcgYmxvYiIpKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIGZpbGVSZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoYmxvYik7CiAgICB9KTsKICB9CiAgZnVuY3Rpb24gcmVhZEJsb2JBc1RleHQoYmxvYikgewogICAgdmFyIGZpbGVSZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgewogICAgICBmaWxlUmVhZGVyLm9uZXJyb3IgPSBmdW5jdGlvbigpIHsKICAgICAgICBmaWxlUmVhZGVyLmFib3J0KCk7CiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcigicHJvYmxlbSByZWFkaW5nIGJsb2IiKSk7CiAgICAgIH07CiAgICAgIGZpbGVSZWFkZXIub25hYm9ydCA9IGZ1bmN0aW9uKCkgewogICAgICAgIHJlamVjdChuZXcgRXJyb3IoImJsb2IgcmVhZGluZyB3YXMgYWJvcnRlZCIpKTsKICAgICAgfTsKICAgICAgZmlsZVJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbigpIHsKICAgICAgICBpZiAoZmlsZVJlYWRlci5yZXN1bHQgJiYgdHlwZW9mIGZpbGVSZWFkZXIucmVzdWx0ID09PSAic3RyaW5nIikgewogICAgICAgICAgcmVzb2x2ZShmaWxlUmVhZGVyLnJlc3VsdCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoInVua25vd24gZXJyb3IgcmVhZGluZyBibG9iIikpOwogICAgICAgIH0KICAgICAgfTsKICAgICAgZmlsZVJlYWRlci5yZWFkQXNUZXh0KGJsb2IpOwogICAgfSk7CiAgfQogIHZhciBCbG9iRmlsZSA9IC8qIEBfX1BVUkVfXyAqLyBmdW5jdGlvbigpIHsKICAgIGZ1bmN0aW9uIEJsb2JGaWxlMihibG9iKSB7CiAgICAgICgwLCBfY2xhc3NDYWxsQ2hlY2syLmRlZmF1bHQpKHRoaXMsIEJsb2JGaWxlMik7CiAgICAgICgwLCBfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKHRoaXMsICJibG9iIiwgdm9pZCAwKTsKICAgICAgKDAsIF9kZWZpbmVQcm9wZXJ0eTIuZGVmYXVsdCkodGhpcywgInNpemUiLCB2b2lkIDApOwogICAgICB0aGlzLmJsb2IgPSBibG9iOwogICAgICB0aGlzLnNpemUgPSBibG9iLnNpemU7CiAgICB9CiAgICAoMCwgX2NyZWF0ZUNsYXNzMi5kZWZhdWx0KShCbG9iRmlsZTIsIFt7CiAgICAgIGtleTogInJlYWQiLAogICAgICB2YWx1ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIF9yZWFkID0gKDAsIF9hc3luY1RvR2VuZXJhdG9yMi5kZWZhdWx0KSgvKiBAX19QVVJFX18gKi8gX3JlZ2VuZXJhdG9yLmRlZmF1bHQubWFyayhmdW5jdGlvbiBfY2FsbGVlKGJ1ZmZlcjIpIHsKICAgICAgICAgIHZhciBvZmZzZXQsIGxlbmd0aCwgcG9zaXRpb24sIHN0YXJ0LCBlbmQsIHJlc3VsdCwgcmVzdWx0QnVmZmVyLCBieXRlc0NvcGllZCwgX2FyZ3MgPSBhcmd1bWVudHM7CiAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yLmRlZmF1bHQud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gX2FyZ3MubGVuZ3RoID4gMSAmJiBfYXJnc1sxXSAhPT0gdm9pZCAwID8gX2FyZ3NbMV0gOiAwOwogICAgICAgICAgICAgICAgICBsZW5ndGggPSBfYXJncy5sZW5ndGggPiAyID8gX2FyZ3NbMl0gOiB2b2lkIDA7CiAgICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gX2FyZ3MubGVuZ3RoID4gMyAmJiBfYXJnc1szXSAhPT0gdm9pZCAwID8gX2FyZ3NbM10gOiAwOwogICAgICAgICAgICAgICAgICBpZiAobGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICAgICAgICAgIGJ5dGVzUmVhZDogMCwKICAgICAgICAgICAgICAgICAgICBidWZmZXI6IGJ1ZmZlcjIKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gcG9zaXRpb247CiAgICAgICAgICAgICAgICAgIGVuZCA9IHN0YXJ0ICsgbGVuZ3RoOwogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlYWRCbG9iQXNBcnJheUJ1ZmZlcih0aGlzLmJsb2Iuc2xpY2Uoc3RhcnQsIGVuZCkpOwogICAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgICByZXN1bHRCdWZmZXIgPSBCdWZmZXIuZnJvbShyZXN1bHQpOwogICAgICAgICAgICAgICAgICBieXRlc0NvcGllZCA9IHJlc3VsdEJ1ZmZlci5jb3B5KGJ1ZmZlcjIsIG9mZnNldCk7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgICAgICAgICBieXRlc1JlYWQ6IGJ5dGVzQ29waWVkLAogICAgICAgICAgICAgICAgICAgIGJ1ZmZlcjogcmVzdWx0QnVmZmVyCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlLCB0aGlzKTsKICAgICAgICB9KSk7CiAgICAgICAgZnVuY3Rpb24gcmVhZChfeCkgewogICAgICAgICAgcmV0dXJuIF9yZWFkLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfQogICAgICAgIHJldHVybiByZWFkOwogICAgICB9KCkKICAgIH0sIHsKICAgICAga2V5OiAicmVhZEZpbGUiLAogICAgICB2YWx1ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIF9yZWFkRmlsZSA9ICgwLCBfYXN5bmNUb0dlbmVyYXRvcjIuZGVmYXVsdCkoLyogQF9fUFVSRV9fICovIF9yZWdlbmVyYXRvci5kZWZhdWx0Lm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIob3B0aW9ucykgewogICAgICAgICAgdmFyIGVuY29kaW5nLCByZXN1bHQ7CiAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yLmRlZmF1bHQud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gInN0cmluZyIpIHsKICAgICAgICAgICAgICAgICAgICBlbmNvZGluZyA9IG9wdGlvbnM7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZW5jb2RpbmcgPSBvcHRpb25zICYmIG9wdGlvbnMuZW5jb2Rpbmc7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgaWYgKCEoZW5jb2RpbmcgPT09ICJ1dGY4IikpIHsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIHJlYWRCbG9iQXNUZXh0KHRoaXMuYmxvYikpOwogICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICBpZiAoIWVuY29kaW5nKSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA1OwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigidW5zdXBwb3J0ZWQgZW5jb2Rpbmc6ICIuY29uY2F0KGVuY29kaW5nKSk7CiAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNzsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlYWRCbG9iQXNBcnJheUJ1ZmZlcih0aGlzLmJsb2IpOwogICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIEJ1ZmZlci5mcm9tKHJlc3VsdCkpOwogICAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlMiwgdGhpcyk7CiAgICAgICAgfSkpOwogICAgICAgIGZ1bmN0aW9uIHJlYWRGaWxlKF94MikgewogICAgICAgICAgcmV0dXJuIF9yZWFkRmlsZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcmVhZEZpbGU7CiAgICAgIH0oKQogICAgfSwgewogICAgICBrZXk6ICJzdGF0IiwKICAgICAgdmFsdWU6IGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBfc3RhdCA9ICgwLCBfYXN5bmNUb0dlbmVyYXRvcjIuZGVmYXVsdCkoLyogQF9fUFVSRV9fICovIF9yZWdlbmVyYXRvci5kZWZhdWx0Lm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yLmRlZmF1bHQud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCB7CiAgICAgICAgICAgICAgICAgICAgc2l6ZTogdGhpcy5zaXplCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlMywgdGhpcyk7CiAgICAgICAgfSkpOwogICAgICAgIGZ1bmN0aW9uIHN0YXQoKSB7CiAgICAgICAgICByZXR1cm4gX3N0YXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHN0YXQ7CiAgICAgIH0oKQogICAgfSwgewogICAgICBrZXk6ICJjbG9zZSIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbigpIHsKICAgICAgICB2YXIgX2Nsb3NlID0gKDAsIF9hc3luY1RvR2VuZXJhdG9yMi5kZWZhdWx0KSgvKiBAX19QVVJFX18gKi8gX3JlZ2VuZXJhdG9yLmRlZmF1bHQubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3IuZGVmYXVsdC53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIpOwogICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlNCk7CiAgICAgICAgfSkpOwogICAgICAgIGZ1bmN0aW9uIGNsb3NlKCkgewogICAgICAgICAgcmV0dXJuIF9jbG9zZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gY2xvc2U7CiAgICAgIH0oKQogICAgfV0pOwogICAgcmV0dXJuIEJsb2JGaWxlMjsKICB9KCk7CiAgYmxvYkZpbGUuZGVmYXVsdCA9IEJsb2JGaWxlOwogIHZhciBmaWxlaGFuZGxlID0gLyogQF9fUFVSRV9fICovIE9iamVjdC5mcmVlemUoewogICAgX19wcm90b19fOiBudWxsCiAgfSk7CiAgdmFyIHJlcXVpcmUkJDQgPSAvKiBAX19QVVJFX18gKi8gZ2V0QXVnbWVudGVkTmFtZXNwYWNlKGZpbGVoYW5kbGUpOwogIChmdW5jdGlvbihleHBvcnRzKSB7CiAgICB2YXIgX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIgPSBpbnRlcm9wUmVxdWlyZURlZmF1bHQuZXhwb3J0czsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICAgICAgdmFsdWU6IHRydWUKICAgIH0pOwogICAgdmFyIF9leHBvcnROYW1lcyA9IHsKICAgICAgb3BlbjogdHJ1ZSwKICAgICAgZnJvbVVybDogdHJ1ZSwKICAgICAgTG9jYWxGaWxlOiB0cnVlLAogICAgICBSZW1vdGVGaWxlOiB0cnVlLAogICAgICBCbG9iRmlsZTogdHJ1ZQogICAgfTsKICAgIGV4cG9ydHMub3BlbiA9IG9wZW47CiAgICBleHBvcnRzLmZyb21VcmwgPSBmcm9tVXJsOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJMb2NhbEZpbGUiLCB7CiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGdldDogZnVuY3Rpb24gZ2V0MigpIHsKICAgICAgICByZXR1cm4gX2xvY2FsRmlsZS5kZWZhdWx0OwogICAgICB9CiAgICB9KTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiUmVtb3RlRmlsZSIsIHsKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQyKCkgewogICAgICAgIHJldHVybiBfcmVtb3RlRmlsZS5kZWZhdWx0OwogICAgICB9CiAgICB9KTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiQmxvYkZpbGUiLCB7CiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGdldDogZnVuY3Rpb24gZ2V0MigpIHsKICAgICAgICByZXR1cm4gX2Jsb2JGaWxlLmRlZmF1bHQ7CiAgICAgIH0KICAgIH0pOwogICAgdmFyIF9sb2NhbEZpbGUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0MihyZXF1aXJlJCQxKTsKICAgIHZhciBfcmVtb3RlRmlsZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKHJlbW90ZUZpbGUpOwogICAgdmFyIF9ibG9iRmlsZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKGJsb2JGaWxlKTsKICAgIHZhciBfZmlsZWhhbmRsZSA9IHJlcXVpcmUkJDQ7CiAgICBPYmplY3Qua2V5cyhfZmlsZWhhbmRsZSkuZm9yRWFjaChmdW5jdGlvbihrZXkpIHsKICAgICAgaWYgKGtleSA9PT0gImRlZmF1bHQiIHx8IGtleSA9PT0gIl9fZXNNb2R1bGUiKQogICAgICAgIHJldHVybjsKICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChfZXhwb3J0TmFtZXMsIGtleSkpCiAgICAgICAgcmV0dXJuOwogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7CiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldDIoKSB7CiAgICAgICAgICByZXR1cm4gX2ZpbGVoYW5kbGVba2V5XTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSk7CiAgICBmdW5jdGlvbiBmcm9tVXJsKHNvdXJjZSkgewogICAgICB2YXIgb3B0cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdm9pZCAwID8gYXJndW1lbnRzWzFdIDoge307CiAgICAgIHJldHVybiBuZXcgX3JlbW90ZUZpbGUuZGVmYXVsdChzb3VyY2UsIG9wdHMpOwogICAgfQogICAgZnVuY3Rpb24gb3BlbihtYXliZVVybCwgbWF5YmVQYXRoLCBtYXliZUZpbGVoYW5kbGUpIHsKICAgICAgdmFyIG9wdHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHZvaWQgMCA/IGFyZ3VtZW50c1szXSA6IHt9OwogICAgICBpZiAobWF5YmVGaWxlaGFuZGxlICE9PSB2b2lkIDApIHsKICAgICAgICByZXR1cm4gbWF5YmVGaWxlaGFuZGxlOwogICAgICB9CiAgICAgIGlmIChtYXliZVVybCAhPT0gdm9pZCAwKSB7CiAgICAgICAgcmV0dXJuIGZyb21VcmwobWF5YmVVcmwsIG9wdHMpOwogICAgICB9CiAgICAgIGlmIChtYXliZVBhdGggIT09IHZvaWQgMCkgewogICAgICAgIHJldHVybiBuZXcgX2xvY2FsRmlsZS5kZWZhdWx0KG1heWJlUGF0aCwgb3B0cyk7CiAgICAgIH0KICAgICAgdGhyb3cgbmV3IEVycm9yKCJubyB1cmwsIHBhdGgsIG9yIGZpbGVoYW5kbGUgcHJvdmlkZWQsIGNhbm5vdCBvcGVuIik7CiAgICB9CiAgfSkoZGlzdCk7CiAgdmFyIHJlY29yZCA9IHt9OwogIHZhciBhbk9iamVjdCA9IGFuT2JqZWN0JGk7CiAgdmFyIHJlZ2V4cEZsYWdzID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgdGhhdCA9IGFuT2JqZWN0KHRoaXMpOwogICAgdmFyIHJlc3VsdCA9ICIiOwogICAgaWYgKHRoYXQuZ2xvYmFsKQogICAgICByZXN1bHQgKz0gImciOwogICAgaWYgKHRoYXQuaWdub3JlQ2FzZSkKICAgICAgcmVzdWx0ICs9ICJpIjsKICAgIGlmICh0aGF0Lm11bHRpbGluZSkKICAgICAgcmVzdWx0ICs9ICJtIjsKICAgIGlmICh0aGF0LmRvdEFsbCkKICAgICAgcmVzdWx0ICs9ICJzIjsKICAgIGlmICh0aGF0LnVuaWNvZGUpCiAgICAgIHJlc3VsdCArPSAidSI7CiAgICBpZiAodGhhdC5zdGlja3kpCiAgICAgIHJlc3VsdCArPSAieSI7CiAgICByZXR1cm4gcmVzdWx0OwogIH07CiAgdmFyIGZsYWdzJDMgPSByZWdleHBGbGFnczsKICB2YXIgZmxhZ3NfMSQxID0gZnVuY3Rpb24oaXQpIHsKICAgIHJldHVybiBmbGFncyQzLmNhbGwoaXQpOwogIH07CiAgdmFyIGZsYWdzJDIgPSBmbGFnc18xJDE7CiAgdmFyIFJlZ0V4cFByb3RvdHlwZSA9IFJlZ0V4cC5wcm90b3R5cGU7CiAgdmFyIGZsYWdzXzEgPSBmdW5jdGlvbihpdCkgewogICAgcmV0dXJuIChpdCA9PT0gUmVnRXhwUHJvdG90eXBlIHx8IGl0IGluc3RhbmNlb2YgUmVnRXhwKSAmJiAhKCJmbGFncyIgaW4gaXQpID8gZmxhZ3MkMihpdCkgOiBpdC5mbGFnczsKICB9OwogIHZhciBwYXJlbnQkNiA9IGZsYWdzXzE7CiAgdmFyIGZsYWdzJDEgPSBwYXJlbnQkNjsKICB2YXIgZmxhZ3MgPSBmbGFncyQxOwogIHZhciB3aGl0ZXNwYWNlcyQyID0gIglcblx2XGZcciBceEEwXHUxNjgwXHUyMDAwXHUyMDAxXHUyMDAyXHUyMDAzXHUyMDA0XHUyMDA1XHUyMDA2XHUyMDA3XHUyMDA4XHUyMDA5XHUyMDBBXHUyMDJGXHUyMDVGXHUzMDAwXHUyMDI4XHUyMDI5XHVGRUZGIjsKICB2YXIgcmVxdWlyZU9iamVjdENvZXJjaWJsZSQxID0gcmVxdWlyZU9iamVjdENvZXJjaWJsZSQ1OwogIHZhciB0b1N0cmluZyQyID0gdG9TdHJpbmckYTsKICB2YXIgd2hpdGVzcGFjZXMkMSA9IHdoaXRlc3BhY2VzJDI7CiAgdmFyIHdoaXRlc3BhY2UgPSAiWyIgKyB3aGl0ZXNwYWNlcyQxICsgIl0iOwogIHZhciBsdHJpbSA9IFJlZ0V4cCgiXiIgKyB3aGl0ZXNwYWNlICsgd2hpdGVzcGFjZSArICIqIik7CiAgdmFyIHJ0cmltID0gUmVnRXhwKHdoaXRlc3BhY2UgKyB3aGl0ZXNwYWNlICsgIiokIik7CiAgdmFyIGNyZWF0ZU1ldGhvZCA9IGZ1bmN0aW9uKFRZUEUyKSB7CiAgICByZXR1cm4gZnVuY3Rpb24oJHRoaXMpIHsKICAgICAgdmFyIHN0cmluZyA9IHRvU3RyaW5nJDIocmVxdWlyZU9iamVjdENvZXJjaWJsZSQxKCR0aGlzKSk7CiAgICAgIGlmIChUWVBFMiAmIDEpCiAgICAgICAgc3RyaW5nID0gc3RyaW5nLnJlcGxhY2UobHRyaW0sICIiKTsKICAgICAgaWYgKFRZUEUyICYgMikKICAgICAgICBzdHJpbmcgPSBzdHJpbmcucmVwbGFjZShydHJpbSwgIiIpOwogICAgICByZXR1cm4gc3RyaW5nOwogICAgfTsKICB9OwogIHZhciBzdHJpbmdUcmltID0gewogICAgc3RhcnQ6IGNyZWF0ZU1ldGhvZCgxKSwKICAgIGVuZDogY3JlYXRlTWV0aG9kKDIpLAogICAgdHJpbTogY3JlYXRlTWV0aG9kKDMpCiAgfTsKICB2YXIgZ2xvYmFsJDEgPSBnbG9iYWwkbzsKICB2YXIgZmFpbHMgPSBmYWlscyRuOwogIHZhciB0b1N0cmluZyQxID0gdG9TdHJpbmckYTsKICB2YXIgdHJpbSA9IHN0cmluZ1RyaW0udHJpbTsKICB2YXIgd2hpdGVzcGFjZXMgPSB3aGl0ZXNwYWNlcyQyOwogIHZhciAkcGFyc2VJbnQkMSA9IGdsb2JhbCQxLnBhcnNlSW50OwogIHZhciBTeW1ib2wkMSA9IGdsb2JhbCQxLlN5bWJvbDsKICB2YXIgSVRFUkFUT1IgPSBTeW1ib2wkMSAmJiBTeW1ib2wkMS5pdGVyYXRvcjsKICB2YXIgaGV4ID0gL15bKy1dPzBbWHhdLzsKICB2YXIgRk9SQ0VEID0gJHBhcnNlSW50JDEod2hpdGVzcGFjZXMgKyAiMDgiKSAhPT0gOCB8fCAkcGFyc2VJbnQkMSh3aGl0ZXNwYWNlcyArICIweDE2IikgIT09IDIyIHx8IElURVJBVE9SICYmICFmYWlscyhmdW5jdGlvbigpIHsKICAgICRwYXJzZUludCQxKE9iamVjdChJVEVSQVRPUikpOwogIH0pOwogIHZhciBudW1iZXJQYXJzZUludCA9IEZPUkNFRCA/IGZ1bmN0aW9uIHBhcnNlSW50MihzdHJpbmcsIHJhZGl4KSB7CiAgICB2YXIgUyA9IHRyaW0odG9TdHJpbmckMShzdHJpbmcpKTsKICAgIHJldHVybiAkcGFyc2VJbnQkMShTLCByYWRpeCA+Pj4gMCB8fCAoaGV4LnRlc3QoUykgPyAxNiA6IDEwKSk7CiAgfSA6ICRwYXJzZUludCQxOwogIHZhciAkJDIgPSBfZXhwb3J0OwogIHZhciAkcGFyc2VJbnQgPSBudW1iZXJQYXJzZUludDsKICAkJDIoeyBnbG9iYWw6IHRydWUsIGZvcmNlZDogcGFyc2VJbnQgIT0gJHBhcnNlSW50IH0sIHsKICAgIHBhcnNlSW50OiAkcGFyc2VJbnQKICB9KTsKICB2YXIgcGF0aCA9IHBhdGgkbjsKICB2YXIgX3BhcnNlSW50JDIgPSBwYXRoLnBhcnNlSW50OwogIHZhciBwYXJlbnQkNSA9IF9wYXJzZUludCQyOwogIHZhciBfcGFyc2VJbnQkMSA9IHBhcmVudCQ1OwogIHZhciBfcGFyc2VJbnQgPSBfcGFyc2VJbnQkMTsKICB2YXIgY29uc3RhbnRzID0ge307CiAgKGZ1bmN0aW9uKGV4cG9ydHMpIHsKICAgIHZhciBfT2JqZWN0JGRlZmluZVByb3BlcnR5ID0gZGVmaW5lUHJvcGVydHkkOTsKICAgIF9PYmplY3QkZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgICAgIHZhbHVlOiB0cnVlCiAgICB9KTsKICAgIGV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDsKICAgIHZhciBfZGVmYXVsdDIgPSB7CiAgICAgIEJBTV9GUEFJUkVEOiAxLAogICAgICBCQU1fRlBST1BFUl9QQUlSOiAyLAogICAgICBCQU1fRlVOTUFQOiA0LAogICAgICBCQU1fRk1VTk1BUDogOCwKICAgICAgQkFNX0ZSRVZFUlNFOiAxNiwKICAgICAgQkFNX0ZNUkVWRVJTRTogMzIsCiAgICAgIEJBTV9GUkVBRDE6IDY0LAogICAgICBCQU1fRlJFQUQyOiAxMjgsCiAgICAgIEJBTV9GU0VDT05EQVJZOiAyNTYsCiAgICAgIEJBTV9GUUNGQUlMOiA1MTIsCiAgICAgIEJBTV9GRFVQOiAxMDI0LAogICAgICBCQU1fRlNVUFBMRU1FTlRBUlk6IDIwNDgKICAgIH07CiAgICBleHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDI7CiAgfSkoY29uc3RhbnRzKTsKICAoZnVuY3Rpb24oZXhwb3J0cykgewogICAgdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyID0gaW50ZXJvcFJlcXVpcmVEZWZhdWx0JDEuZXhwb3J0czsKICAgIHZhciBfT2JqZWN0JGRlZmluZVByb3BlcnR5ID0gZGVmaW5lUHJvcGVydHkkOTsKICAgIF9PYmplY3QkZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgICAgIHZhbHVlOiB0cnVlCiAgICB9KTsKICAgIGV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDsKICAgIHZhciBfZmxhZ3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoZmxhZ3MpOwogICAgdmFyIF9wYXJzZUludDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0MihfcGFyc2VJbnQpOwogICAgdmFyIF9maWx0ZXIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0MihmaWx0ZXIpOwogICAgdmFyIF9rZXlzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoa2V5cyQyKTsKICAgIHZhciBfZm9yRWFjaCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKGZvckVhY2gkMSk7CiAgICB2YXIgX2NvbmNhdCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKGNvbmNhdCk7CiAgICB2YXIgX2NsYXNzQ2FsbENoZWNrMjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0MihjbGFzc0NhbGxDaGVjayQxLmV4cG9ydHMpOwogICAgdmFyIF9jcmVhdGVDbGFzczIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoY3JlYXRlQ2xhc3MkMS5leHBvcnRzKTsKICAgIHZhciBfZGVmaW5lUHJvcGVydHkyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKGRlZmluZVByb3BlcnR5JDYuZXhwb3J0cyk7CiAgICB2YXIgX21hcCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKG1hcCk7CiAgICB2YXIgX2NvbnN0YW50cyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKGNvbnN0YW50cyk7CiAgICB2YXIgX2NvbnRleHQ7CiAgICB2YXIgU0VRUkVUX0RFQ09ERVIgPSAoMCwgX21hcC5kZWZhdWx0KShfY29udGV4dCA9ICI9QUNNR1JTVlRXWUhLREJOIi5zcGxpdCgiIikpLmNhbGwoX2NvbnRleHQsIGZ1bmN0aW9uKHMpIHsKICAgICAgcmV0dXJuIHMuY2hhckNvZGVBdCgwKTsKICAgIH0pOwogICAgdmFyIENJR0FSX0RFQ09ERVIgPSAiTUlETlNIUD1YPz8/Pz8/PyIuc3BsaXQoIiIpOwogICAgdmFyIEJhbVJlY29yZCA9IC8qIEBfX1BVUkVfXyAqLyBmdW5jdGlvbigpIHsKICAgICAgZnVuY3Rpb24gQmFtUmVjb3JkMihhcmdzKSB7CiAgICAgICAgKDAsIF9jbGFzc0NhbGxDaGVjazIyLmRlZmF1bHQpKHRoaXMsIEJhbVJlY29yZDIpOwogICAgICAgICgwLCBfZGVmaW5lUHJvcGVydHkyMi5kZWZhdWx0KSh0aGlzLCAiZGF0YSIsIHZvaWQgMCk7CiAgICAgICAgKDAsIF9kZWZpbmVQcm9wZXJ0eTIyLmRlZmF1bHQpKHRoaXMsICJieXRlcyIsIHZvaWQgMCk7CiAgICAgICAgKDAsIF9kZWZpbmVQcm9wZXJ0eTIyLmRlZmF1bHQpKHRoaXMsICJmbGFncyIsIHZvaWQgMCk7CiAgICAgICAgKDAsIF9kZWZpbmVQcm9wZXJ0eTIyLmRlZmF1bHQpKHRoaXMsICJfaWQiLCB2b2lkIDApOwogICAgICAgICgwLCBfZGVmaW5lUHJvcGVydHkyMi5kZWZhdWx0KSh0aGlzLCAiX3JlZklEIiwgdm9pZCAwKTsKICAgICAgICAoMCwgX2RlZmluZVByb3BlcnR5MjIuZGVmYXVsdCkodGhpcywgIl90YWdPZmZzZXQiLCB2b2lkIDApOwogICAgICAgICgwLCBfZGVmaW5lUHJvcGVydHkyMi5kZWZhdWx0KSh0aGlzLCAiX3RhZ0xpc3QiLCBbXSk7CiAgICAgICAgKDAsIF9kZWZpbmVQcm9wZXJ0eTIyLmRlZmF1bHQpKHRoaXMsICJfYWxsVGFnc1BhcnNlZCIsIGZhbHNlKTsKICAgICAgICB0aGlzLmRhdGEgPSB7fTsKICAgICAgICB0aGlzLmJ5dGVzID0gewogICAgICAgICAgc3RhcnQ6IGFyZ3MuYnl0ZXMuc3RhcnQsCiAgICAgICAgICBlbmQ6IGFyZ3MuYnl0ZXMuZW5kLAogICAgICAgICAgYnl0ZUFycmF5OiBhcmdzLmJ5dGVzLmJ5dGVBcnJheQogICAgICAgIH07CiAgICAgICAgdGhpcy5faWQgPSBhcmdzLmZpbGVPZmZzZXQ7CiAgICAgICAgdmFyIF90aGlzJGJ5dGVzID0gdGhpcy5ieXRlcywgc3RhcnQgPSBfdGhpcyRieXRlcy5zdGFydCwgYnl0ZUFycmF5ID0gX3RoaXMkYnl0ZXMuYnl0ZUFycmF5OwogICAgICAgIHRoaXMuX3JlZklEID0gYnl0ZUFycmF5LnJlYWRJbnQzMkxFKHN0YXJ0ICsgNCk7CiAgICAgICAgdGhpcy5kYXRhLnN0YXJ0ID0gYnl0ZUFycmF5LnJlYWRJbnQzMkxFKHN0YXJ0ICsgOCk7CiAgICAgICAgdGhpcy5mbGFncyA9IChieXRlQXJyYXkucmVhZEludDMyTEUoc3RhcnQgKyAxNikgJiA0Mjk0OTAxNzYwKSA+PiAxNjsKICAgICAgfQogICAgICAoMCwgX2NyZWF0ZUNsYXNzMjIuZGVmYXVsdCkoQmFtUmVjb3JkMiwgW3sKICAgICAgICBrZXk6ICJnZXQiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXQyKGZpZWxkKSB7CiAgICAgICAgICBpZiAodGhpc1tmaWVsZF0pIHsKICAgICAgICAgICAgaWYgKHRoaXMuZGF0YVtmaWVsZF0pIHsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhW2ZpZWxkXTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmRhdGFbZmllbGRdID0gdGhpc1tmaWVsZF0oKTsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVtmaWVsZF07CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0KGZpZWxkLnRvTG93ZXJDYXNlKCkpOwogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIGtleTogImVuZCIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGVuZCgpIHsKICAgICAgICAgIHJldHVybiB0aGlzLmdldCgic3RhcnQiKSArICh0aGlzLmdldCgibGVuZ3RoX29uX3JlZiIpIHx8IHRoaXMuZ2V0KCJzZXFfbGVuZ3RoIikgfHwgdm9pZCAwKTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJzZXFfaWQiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXFfaWQoKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5fcmVmSUQ7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAga2V5OiAiX2dldCIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXQyKGZpZWxkKSB7CiAgICAgICAgICBpZiAoZmllbGQgaW4gdGhpcy5kYXRhKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGFbZmllbGRdOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy5kYXRhW2ZpZWxkXSA9IHRoaXMuX3BhcnNlVGFnKGZpZWxkKTsKICAgICAgICAgIHJldHVybiB0aGlzLmRhdGFbZmllbGRdOwogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIGtleTogIl90YWdzIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3RhZ3MoKSB7CiAgICAgICAgICB2YXIgX2NvbnRleHQyLCBfdGhpcyA9IHRoaXM7CiAgICAgICAgICB0aGlzLl9wYXJzZUFsbFRhZ3MoKTsKICAgICAgICAgIHZhciB0YWdzID0gWyJzZXEiXTsKICAgICAgICAgIGlmICghdGhpcy5pc1NlZ21lbnRVbm1hcHBlZCgpKSB7CiAgICAgICAgICAgIHRhZ3MucHVzaCgic3RhcnQiLCAiZW5kIiwgInN0cmFuZCIsICJzY29yZSIsICJxdWFsIiwgIk1RIiwgIkNJR0FSIiwgImxlbmd0aF9vbl9yZWYiLCAidGVtcGxhdGVfbGVuZ3RoIik7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodGhpcy5pc1BhaXJlZCgpKSB7CiAgICAgICAgICAgIHRhZ3MucHVzaCgibmV4dF9zZWdtZW50X3Bvc2l0aW9uIiwgInBhaXJfb3JpZW50YXRpb24iKTsKICAgICAgICAgIH0KICAgICAgICAgIHRhZ3MgPSAoMCwgX2NvbmNhdC5kZWZhdWx0KSh0YWdzKS5jYWxsKHRhZ3MsIHRoaXMuX3RhZ0xpc3QgfHwgW10pOwogICAgICAgICAgKDAsIF9mb3JFYWNoLmRlZmF1bHQpKF9jb250ZXh0MiA9ICgwLCBfa2V5cy5kZWZhdWx0KSh0aGlzLmRhdGEpKS5jYWxsKF9jb250ZXh0MiwgZnVuY3Rpb24oaykgewogICAgICAgICAgICBpZiAoa1swXSAhPT0gIl8iICYmIGsgIT09ICJuZXh0X3NlcV9pZCIpIHsKICAgICAgICAgICAgICB0YWdzLnB1c2goayk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgdmFyIHNlZW4gPSB7fTsKICAgICAgICAgIHRhZ3MgPSAoMCwgX2ZpbHRlci5kZWZhdWx0KSh0YWdzKS5jYWxsKHRhZ3MsIGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgaWYgKHQgaW4gX3RoaXMuZGF0YSAmJiBfdGhpcy5kYXRhW3RdID09PSB2b2lkIDAgfHwgdCA9PT0gIkNHIiB8fCB0ID09PSAiY2ciKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBsdCA9IHQudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgdmFyIHMgPSBzZWVuW2x0XTsKICAgICAgICAgICAgc2VlbltsdF0gPSB0cnVlOwogICAgICAgICAgICByZXR1cm4gIXM7CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiB0YWdzOwogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIGtleTogInBhcmVudCIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHBhcmVudDIoKSB7CiAgICAgICAgICByZXR1cm4gdm9pZCAwOwogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIGtleTogImNoaWxkcmVuIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2hpbGRyZW4oKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5nZXQoInN1YmZlYXR1cmVzIik7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAga2V5OiAiaWQiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpZDIoKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5faWQ7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAga2V5OiAibXEiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBtcSgpIHsKICAgICAgICAgIHZhciBtcTIgPSAodGhpcy5nZXQoIl9iaW5fbXFfbmwiKSAmIDY1MjgwKSA+PiA4OwogICAgICAgICAgcmV0dXJuIG1xMiA9PT0gMjU1ID8gdm9pZCAwIDogbXEyOwogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIGtleTogInNjb3JlIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2NvcmUoKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5nZXQoIm1xIik7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAga2V5OiAicXVhbCIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHF1YWwoKSB7CiAgICAgICAgICB2YXIgX3RoaXMkcXVhbFJhdzsKICAgICAgICAgIHJldHVybiAoX3RoaXMkcXVhbFJhdyA9IHRoaXMucXVhbFJhdygpKSA9PT0gbnVsbCB8fCBfdGhpcyRxdWFsUmF3ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRxdWFsUmF3LmpvaW4oIiAiKTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJxdWFsUmF3IiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcXVhbFJhdygpIHsKICAgICAgICAgIGlmICh0aGlzLmlzU2VnbWVudFVubWFwcGVkKCkpIHsKICAgICAgICAgICAgcmV0dXJuIHZvaWQgMDsKICAgICAgICAgIH0KICAgICAgICAgIHZhciBieXRlQXJyYXkgPSB0aGlzLmJ5dGVzLmJ5dGVBcnJheTsKICAgICAgICAgIHZhciBwID0gdGhpcy5ieXRlcy5zdGFydCArIDM2ICsgdGhpcy5nZXQoIl9sX3JlYWRfbmFtZSIpICsgdGhpcy5nZXQoIl9uX2NpZ2FyX29wIikgKiA0ICsgdGhpcy5nZXQoIl9zZXFfYnl0ZXMiKTsKICAgICAgICAgIHZhciBsc2VxID0gdGhpcy5nZXQoInNlcV9sZW5ndGgiKTsKICAgICAgICAgIHZhciBxc2VxID0gQnVmZmVyLmFsbG9jVW5zYWZlKGxzZXEpOwogICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBsc2VxOyArK2opIHsKICAgICAgICAgICAgcXNlcVtqXSA9IGJ5dGVBcnJheVtwICsgal07CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gcXNlcTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJzdHJhbmQiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzdHJhbmQoKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5pc1JldmVyc2VDb21wbGVtZW50ZWQoKSA/IC0xIDogMTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJtdWx0aV9zZWdtZW50X25leHRfc2VnbWVudF9zdHJhbmQiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBtdWx0aV9zZWdtZW50X25leHRfc2VnbWVudF9zdHJhbmQoKSB7CiAgICAgICAgICBpZiAodGhpcy5pc01hdGVVbm1hcHBlZCgpKSB7CiAgICAgICAgICAgIHJldHVybiB2b2lkIDA7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gdGhpcy5pc01hdGVSZXZlcnNlQ29tcGxlbWVudGVkKCkgPyAtMSA6IDE7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAga2V5OiAibmFtZSIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG5hbWUoKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5nZXQoIl9yZWFkX25hbWUiKTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJfcmVhZF9uYW1lIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlYWRfbmFtZSgpIHsKICAgICAgICAgIHZhciBubCA9IHRoaXMuZ2V0KCJfbF9yZWFkX25hbWUiKTsKICAgICAgICAgIHJldHVybiB0aGlzLmJ5dGVzLmJ5dGVBcnJheS50b1N0cmluZygiYXNjaWkiLCB0aGlzLmJ5dGVzLnN0YXJ0ICsgMzYsIHRoaXMuYnl0ZXMuc3RhcnQgKyAzNiArIG5sIC0gMSk7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAga2V5OiAiX3BhcnNlVGFnIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3BhcnNlVGFnKHRhZ05hbWUpIHsKICAgICAgICAgIGlmICh0aGlzLl9hbGxUYWdzUGFyc2VkKSB7CiAgICAgICAgICAgIHJldHVybiB2b2lkIDA7CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgYnl0ZUFycmF5ID0gdGhpcy5ieXRlcy5ieXRlQXJyYXk7CiAgICAgICAgICB2YXIgcCA9IHRoaXMuX3RhZ09mZnNldCB8fCB0aGlzLmJ5dGVzLnN0YXJ0ICsgMzYgKyB0aGlzLmdldCgiX2xfcmVhZF9uYW1lIikgKyB0aGlzLmdldCgiX25fY2lnYXJfb3AiKSAqIDQgKyB0aGlzLmdldCgiX3NlcV9ieXRlcyIpICsgdGhpcy5nZXQoInNlcV9sZW5ndGgiKTsKICAgICAgICAgIHZhciBibG9ja0VuZCA9IHRoaXMuYnl0ZXMuZW5kOwogICAgICAgICAgdmFyIGxjVGFnOwogICAgICAgICAgd2hpbGUgKHAgPCBibG9ja0VuZCAmJiBsY1RhZyAhPT0gdGFnTmFtZSkgewogICAgICAgICAgICB2YXIgdGFnID0gU3RyaW5nLmZyb21DaGFyQ29kZShieXRlQXJyYXlbcF0sIGJ5dGVBcnJheVtwICsgMV0pOwogICAgICAgICAgICBsY1RhZyA9IHRhZy50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICB2YXIgdHlwZSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZUFycmF5W3AgKyAyXSk7CiAgICAgICAgICAgIHAgKz0gMzsKICAgICAgICAgICAgdmFyIHZhbHVlID0gdm9pZCAwOwogICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICAgICAgICBjYXNlICJBIjoKICAgICAgICAgICAgICAgIHZhbHVlID0gU3RyaW5nLmZyb21DaGFyQ29kZShieXRlQXJyYXlbcF0pOwogICAgICAgICAgICAgICAgcCArPSAxOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgY2FzZSAiaSI6CiAgICAgICAgICAgICAgICB2YWx1ZSA9IGJ5dGVBcnJheS5yZWFkSW50MzJMRShwKTsKICAgICAgICAgICAgICAgIHAgKz0gNDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIGNhc2UgIkkiOgogICAgICAgICAgICAgICAgdmFsdWUgPSBieXRlQXJyYXkucmVhZFVJbnQzMkxFKHApOwogICAgICAgICAgICAgICAgcCArPSA0OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgY2FzZSAiYyI6CiAgICAgICAgICAgICAgICB2YWx1ZSA9IGJ5dGVBcnJheS5yZWFkSW50OChwKTsKICAgICAgICAgICAgICAgIHAgKz0gMTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIGNhc2UgIkMiOgogICAgICAgICAgICAgICAgdmFsdWUgPSBieXRlQXJyYXkucmVhZFVJbnQ4KHApOwogICAgICAgICAgICAgICAgcCArPSAxOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgY2FzZSAicyI6CiAgICAgICAgICAgICAgICB2YWx1ZSA9IGJ5dGVBcnJheS5yZWFkSW50MTZMRShwKTsKICAgICAgICAgICAgICAgIHAgKz0gMjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIGNhc2UgIlMiOgogICAgICAgICAgICAgICAgdmFsdWUgPSBieXRlQXJyYXkucmVhZFVJbnQxNkxFKHApOwogICAgICAgICAgICAgICAgcCArPSAyOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgY2FzZSAiZiI6CiAgICAgICAgICAgICAgICB2YWx1ZSA9IGJ5dGVBcnJheS5yZWFkRmxvYXRMRShwKTsKICAgICAgICAgICAgICAgIHAgKz0gNDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIGNhc2UgIloiOgogICAgICAgICAgICAgIGNhc2UgIkgiOgogICAgICAgICAgICAgICAgdmFsdWUgPSAiIjsKICAgICAgICAgICAgICAgIHdoaWxlIChwIDw9IGJsb2NrRW5kKSB7CiAgICAgICAgICAgICAgICAgIHZhciBjYyA9IGJ5dGVBcnJheVtwKytdOwogICAgICAgICAgICAgICAgICBpZiAoY2MgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB2YWx1ZSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNjKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgY2FzZSAiQiI6IHsKICAgICAgICAgICAgICAgIHZhbHVlID0gIiI7CiAgICAgICAgICAgICAgICB2YXIgX2NjID0gYnl0ZUFycmF5W3ArK107CiAgICAgICAgICAgICAgICB2YXIgQnR5cGUgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKF9jYyk7CiAgICAgICAgICAgICAgICB2YXIgbGltaXQgPSBieXRlQXJyYXkucmVhZEludDMyTEUocCk7CiAgICAgICAgICAgICAgICBwICs9IDQ7CiAgICAgICAgICAgICAgICBpZiAoQnR5cGUgPT09ICJpIikgewogICAgICAgICAgICAgICAgICBpZiAodGFnID09PSAiQ0ciKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBsaW1pdDsgaysrKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgY2lnb3AgPSBieXRlQXJyYXkucmVhZEludDMyTEUocCk7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgbG9wID0gY2lnb3AgPj4gNDsKICAgICAgICAgICAgICAgICAgICAgIHZhciBvcCA9IENJR0FSX0RFQ09ERVJbY2lnb3AgJiAxNV07CiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSArPSBsb3AgKyBvcDsKICAgICAgICAgICAgICAgICAgICAgIHAgKz0gNDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2sgPSAwOyBfayA8IGxpbWl0OyBfaysrKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSArPSBieXRlQXJyYXkucmVhZEludDMyTEUocCk7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoX2sgKyAxIDwgbGltaXQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgKz0gIiwiOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgcCArPSA0OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKEJ0eXBlID09PSAiSSIpIHsKICAgICAgICAgICAgICAgICAgaWYgKHRhZyA9PT0gIkNHIikgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9rMiA9IDA7IF9rMiA8IGxpbWl0OyBfazIrKykgewogICAgICAgICAgICAgICAgICAgICAgdmFyIF9jaWdvcCA9IGJ5dGVBcnJheS5yZWFkVUludDMyTEUocCk7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgX2xvcCA9IF9jaWdvcCA+PiA0OwogICAgICAgICAgICAgICAgICAgICAgdmFyIF9vcCA9IENJR0FSX0RFQ09ERVJbX2NpZ29wICYgMTVdOwogICAgICAgICAgICAgICAgICAgICAgdmFsdWUgKz0gX2xvcCArIF9vcDsKICAgICAgICAgICAgICAgICAgICAgIHAgKz0gNDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2szID0gMDsgX2szIDwgbGltaXQ7IF9rMysrKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSArPSBieXRlQXJyYXkucmVhZFVJbnQzMkxFKHApOwogICAgICAgICAgICAgICAgICAgICAgaWYgKF9rMyArIDEgPCBsaW1pdCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSArPSAiLCI7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICBwICs9IDQ7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoQnR5cGUgPT09ICJzIikgewogICAgICAgICAgICAgICAgICBmb3IgKHZhciBfazQgPSAwOyBfazQgPCBsaW1pdDsgX2s0KyspIHsKICAgICAgICAgICAgICAgICAgICB2YWx1ZSArPSBieXRlQXJyYXkucmVhZEludDE2TEUocCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKF9rNCArIDEgPCBsaW1pdCkgewogICAgICAgICAgICAgICAgICAgICAgdmFsdWUgKz0gIiwiOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBwICs9IDI7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChCdHlwZSA9PT0gIlMiKSB7CiAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9rNSA9IDA7IF9rNSA8IGxpbWl0OyBfazUrKykgewogICAgICAgICAgICAgICAgICAgIHZhbHVlICs9IGJ5dGVBcnJheS5yZWFkVUludDE2TEUocCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKF9rNSArIDEgPCBsaW1pdCkgewogICAgICAgICAgICAgICAgICAgICAgdmFsdWUgKz0gIiwiOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBwICs9IDI7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChCdHlwZSA9PT0gImMiKSB7CiAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9rNiA9IDA7IF9rNiA8IGxpbWl0OyBfazYrKykgewogICAgICAgICAgICAgICAgICAgIHZhbHVlICs9IGJ5dGVBcnJheS5yZWFkSW50OChwKTsKICAgICAgICAgICAgICAgICAgICBpZiAoX2s2ICsgMSA8IGxpbWl0KSB7CiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSArPSAiLCI7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHAgKz0gMTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKEJ0eXBlID09PSAiQyIpIHsKICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2s3ID0gMDsgX2s3IDwgbGltaXQ7IF9rNysrKSB7CiAgICAgICAgICAgICAgICAgICAgdmFsdWUgKz0gYnl0ZUFycmF5LnJlYWRVSW50OChwKTsKICAgICAgICAgICAgICAgICAgICBpZiAoX2s3ICsgMSA8IGxpbWl0KSB7CiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSArPSAiLCI7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHAgKz0gMTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKEJ0eXBlID09PSAiZiIpIHsKICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2s4ID0gMDsgX2s4IDwgbGltaXQ7IF9rOCsrKSB7CiAgICAgICAgICAgICAgICAgICAgdmFsdWUgKz0gYnl0ZUFycmF5LnJlYWRGbG9hdExFKHApOwogICAgICAgICAgICAgICAgICAgIGlmIChfazggKyAxIDwgbGltaXQpIHsKICAgICAgICAgICAgICAgICAgICAgIHZhbHVlICs9ICIsIjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcCArPSA0OwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybigiVW5rbm93biBCQU0gdGFnIHR5cGUgJyIuY29uY2F0KHR5cGUsICInLCB0YWdzIG1heSBiZSBpbmNvbXBsZXRlIikpOwogICAgICAgICAgICAgICAgdmFsdWUgPSB2b2lkIDA7CiAgICAgICAgICAgICAgICBwID0gYmxvY2tFbmQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5fdGFnT2Zmc2V0ID0gcDsKICAgICAgICAgICAgdGhpcy5fdGFnTGlzdC5wdXNoKHRhZyk7CiAgICAgICAgICAgIGlmIChsY1RhZyA9PT0gdGFnTmFtZSkgewogICAgICAgICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmRhdGFbbGNUYWddID0gdmFsdWU7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLl9hbGxUYWdzUGFyc2VkID0gdHJ1ZTsKICAgICAgICAgIHJldHVybiB2b2lkIDA7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAga2V5OiAiX3BhcnNlQWxsVGFncyIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9wYXJzZUFsbFRhZ3MoKSB7CiAgICAgICAgICB0aGlzLl9wYXJzZVRhZygiIik7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAga2V5OiAiX3BhcnNlQ2lnYXIiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcGFyc2VDaWdhcihjaWdhcikgewogICAgICAgICAgdmFyIF9jb250ZXh0MzsKICAgICAgICAgIHJldHVybiAoMCwgX21hcC5kZWZhdWx0KShfY29udGV4dDMgPSBjaWdhci5tYXRjaCgvXGQrXEQvZykpLmNhbGwoX2NvbnRleHQzLCBmdW5jdGlvbihvcCkgewogICAgICAgICAgICByZXR1cm4gW29wLm1hdGNoKC9cRC8pWzBdLnRvVXBwZXJDYXNlKCksICgwLCBfcGFyc2VJbnQyLmRlZmF1bHQpKG9wLCAxMCldOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAga2V5OiAiaXNQYWlyZWQiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc1BhaXJlZCgpIHsKICAgICAgICAgIHJldHVybiAhISgoMCwgX2ZsYWdzMi5kZWZhdWx0KSh0aGlzKSAmIF9jb25zdGFudHMuZGVmYXVsdC5CQU1fRlBBSVJFRCk7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAga2V5OiAiaXNQcm9wZXJseVBhaXJlZCIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGlzUHJvcGVybHlQYWlyZWQoKSB7CiAgICAgICAgICByZXR1cm4gISEoKDAsIF9mbGFnczIuZGVmYXVsdCkodGhpcykgJiBfY29uc3RhbnRzLmRlZmF1bHQuQkFNX0ZQUk9QRVJfUEFJUik7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAga2V5OiAiaXNTZWdtZW50VW5tYXBwZWQiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc1NlZ21lbnRVbm1hcHBlZCgpIHsKICAgICAgICAgIHJldHVybiAhISgoMCwgX2ZsYWdzMi5kZWZhdWx0KSh0aGlzKSAmIF9jb25zdGFudHMuZGVmYXVsdC5CQU1fRlVOTUFQKTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJpc01hdGVVbm1hcHBlZCIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGlzTWF0ZVVubWFwcGVkKCkgewogICAgICAgICAgcmV0dXJuICEhKCgwLCBfZmxhZ3MyLmRlZmF1bHQpKHRoaXMpICYgX2NvbnN0YW50cy5kZWZhdWx0LkJBTV9GTVVOTUFQKTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJpc1JldmVyc2VDb21wbGVtZW50ZWQiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc1JldmVyc2VDb21wbGVtZW50ZWQoKSB7CiAgICAgICAgICByZXR1cm4gISEoKDAsIF9mbGFnczIuZGVmYXVsdCkodGhpcykgJiBfY29uc3RhbnRzLmRlZmF1bHQuQkFNX0ZSRVZFUlNFKTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJpc01hdGVSZXZlcnNlQ29tcGxlbWVudGVkIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaXNNYXRlUmV2ZXJzZUNvbXBsZW1lbnRlZCgpIHsKICAgICAgICAgIHJldHVybiAhISgoMCwgX2ZsYWdzMi5kZWZhdWx0KSh0aGlzKSAmIF9jb25zdGFudHMuZGVmYXVsdC5CQU1fRk1SRVZFUlNFKTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJpc1JlYWQxIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaXNSZWFkMSgpIHsKICAgICAgICAgIHJldHVybiAhISgoMCwgX2ZsYWdzMi5kZWZhdWx0KSh0aGlzKSAmIF9jb25zdGFudHMuZGVmYXVsdC5CQU1fRlJFQUQxKTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJpc1JlYWQyIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaXNSZWFkMigpIHsKICAgICAgICAgIHJldHVybiAhISgoMCwgX2ZsYWdzMi5kZWZhdWx0KSh0aGlzKSAmIF9jb25zdGFudHMuZGVmYXVsdC5CQU1fRlJFQUQyKTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJpc1NlY29uZGFyeSIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGlzU2Vjb25kYXJ5KCkgewogICAgICAgICAgcmV0dXJuICEhKCgwLCBfZmxhZ3MyLmRlZmF1bHQpKHRoaXMpICYgX2NvbnN0YW50cy5kZWZhdWx0LkJBTV9GU0VDT05EQVJZKTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJpc0ZhaWxlZFFjIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaXNGYWlsZWRRYygpIHsKICAgICAgICAgIHJldHVybiAhISgoMCwgX2ZsYWdzMi5kZWZhdWx0KSh0aGlzKSAmIF9jb25zdGFudHMuZGVmYXVsdC5CQU1fRlFDRkFJTCk7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAga2V5OiAiaXNEdXBsaWNhdGUiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0R1cGxpY2F0ZSgpIHsKICAgICAgICAgIHJldHVybiAhISgoMCwgX2ZsYWdzMi5kZWZhdWx0KSh0aGlzKSAmIF9jb25zdGFudHMuZGVmYXVsdC5CQU1fRkRVUCk7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAga2V5OiAiaXNTdXBwbGVtZW50YXJ5IiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaXNTdXBwbGVtZW50YXJ5KCkgewogICAgICAgICAgcmV0dXJuICEhKCgwLCBfZmxhZ3MyLmRlZmF1bHQpKHRoaXMpICYgX2NvbnN0YW50cy5kZWZhdWx0LkJBTV9GU1VQUExFTUVOVEFSWSk7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAga2V5OiAiY2lnYXIiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjaWdhcigpIHsKICAgICAgICAgIGlmICh0aGlzLmlzU2VnbWVudFVubWFwcGVkKCkpIHsKICAgICAgICAgICAgcmV0dXJuIHZvaWQgMDsKICAgICAgICAgIH0KICAgICAgICAgIHZhciBfdGhpcyRieXRlczIgPSB0aGlzLmJ5dGVzLCBieXRlQXJyYXkgPSBfdGhpcyRieXRlczIuYnl0ZUFycmF5LCBzdGFydCA9IF90aGlzJGJ5dGVzMi5zdGFydDsKICAgICAgICAgIHZhciBudW1DaWdhck9wcyA9IHRoaXMuZ2V0KCJfbl9jaWdhcl9vcCIpOwogICAgICAgICAgdmFyIHAgPSBzdGFydCArIDM2ICsgdGhpcy5nZXQoIl9sX3JlYWRfbmFtZSIpOwogICAgICAgICAgdmFyIHNlcUxlbiA9IHRoaXMuZ2V0KCJzZXFfbGVuZ3RoIik7CiAgICAgICAgICB2YXIgY2lnYXIyID0gIiI7CiAgICAgICAgICB2YXIgbHJlZiA9IDA7CiAgICAgICAgICB2YXIgY2lnb3AgPSBieXRlQXJyYXkucmVhZEludDMyTEUocCk7CiAgICAgICAgICB2YXIgbG9wID0gY2lnb3AgPj4gNDsKICAgICAgICAgIHZhciBvcCA9IENJR0FSX0RFQ09ERVJbY2lnb3AgJiAxNV07CiAgICAgICAgICBpZiAob3AgPT09ICJTIiAmJiBsb3AgPT09IHNlcUxlbikgewogICAgICAgICAgICBwICs9IDQ7CiAgICAgICAgICAgIGNpZ29wID0gYnl0ZUFycmF5LnJlYWRJbnQzMkxFKHApOwogICAgICAgICAgICBsb3AgPSBjaWdvcCA+PiA0OwogICAgICAgICAgICBvcCA9IENJR0FSX0RFQ09ERVJbY2lnb3AgJiAxNV07CiAgICAgICAgICAgIGlmIChvcCAhPT0gIk4iKSB7CiAgICAgICAgICAgICAgY29uc29sZS53YXJuKCJDRyB0YWcgd2l0aCBubyBOIHRhZyIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuZGF0YS5sZW5ndGhfb25fcmVmID0gbG9wOwogICAgICAgICAgICByZXR1cm4gdGhpcy5nZXQoIkNHIik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBmb3IgKHZhciBjMiA9IDA7IGMyIDwgbnVtQ2lnYXJPcHM7ICsrYzIpIHsKICAgICAgICAgICAgICBjaWdvcCA9IGJ5dGVBcnJheS5yZWFkSW50MzJMRShwKTsKICAgICAgICAgICAgICBsb3AgPSBjaWdvcCA+PiA0OwogICAgICAgICAgICAgIG9wID0gQ0lHQVJfREVDT0RFUltjaWdvcCAmIDE1XTsKICAgICAgICAgICAgICBjaWdhcjIgKz0gbG9wICsgb3A7CiAgICAgICAgICAgICAgaWYgKG9wICE9PSAiSCIgJiYgb3AgIT09ICJTIiAmJiBvcCAhPT0gIkkiKSB7CiAgICAgICAgICAgICAgICBscmVmICs9IGxvcDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcCArPSA0OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuZGF0YS5sZW5ndGhfb25fcmVmID0gbHJlZjsKICAgICAgICAgICAgcmV0dXJuIGNpZ2FyMjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJfZmxhZ3MiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZmxhZ3MoKSB7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAga2V5OiAibGVuZ3RoX29uX3JlZiIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGxlbmd0aF9vbl9yZWYoKSB7CiAgICAgICAgICB0aGlzLmdldCgiY2lnYXIiKTsKICAgICAgICAgIHJldHVybiB0aGlzLmRhdGEubGVuZ3RoX29uX3JlZjsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJfbl9jaWdhcl9vcCIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9uX2NpZ2FyX29wKCkgewogICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KCJfZmxhZ19uYyIpICYgNjU1MzU7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAga2V5OiAiX2xfcmVhZF9uYW1lIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2xfcmVhZF9uYW1lKCkgewogICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KCJfYmluX21xX25sIikgJiAyNTU7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAga2V5OiAiX3NlcV9ieXRlcyIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXFfYnl0ZXMoKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5nZXQoInNlcV9sZW5ndGgiKSArIDEgPj4gMTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJnZXRSZWFkQmFzZXMiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRSZWFkQmFzZXMoKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5zZXEoKTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJzZXEiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXEoKSB7CiAgICAgICAgICB2YXIgYnl0ZUFycmF5ID0gdGhpcy5ieXRlcy5ieXRlQXJyYXk7CiAgICAgICAgICB2YXIgcCA9IHRoaXMuYnl0ZXMuc3RhcnQgKyAzNiArIHRoaXMuZ2V0KCJfbF9yZWFkX25hbWUiKSArIHRoaXMuZ2V0KCJfbl9jaWdhcl9vcCIpICogNDsKICAgICAgICAgIHZhciBzZXFCeXRlcyA9IHRoaXMuZ2V0KCJfc2VxX2J5dGVzIik7CiAgICAgICAgICB2YXIgbGVuMiA9IHRoaXMuZ2V0KCJzZXFfbGVuZ3RoIik7CiAgICAgICAgICB2YXIgYnVmID0gIiI7CiAgICAgICAgICB2YXIgaTIgPSAwOwogICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzZXFCeXRlczsgKytqKSB7CiAgICAgICAgICAgIHZhciBzYiA9IGJ5dGVBcnJheVtwICsgal07CiAgICAgICAgICAgIGJ1ZiArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKFNFUVJFVF9ERUNPREVSWyhzYiAmIDI0MCkgPj4gNF0pOwogICAgICAgICAgICBpMisrOwogICAgICAgICAgICBpZiAoaTIgPCBsZW4yKSB7CiAgICAgICAgICAgICAgYnVmICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoU0VRUkVUX0RFQ09ERVJbc2IgJiAxNV0pOwogICAgICAgICAgICAgIGkyKys7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBidWY7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAga2V5OiAiZ2V0UGFpck9yaWVudGF0aW9uIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UGFpck9yaWVudGF0aW9uKCkgewogICAgICAgICAgaWYgKCF0aGlzLmlzU2VnbWVudFVubWFwcGVkKCkgJiYgIXRoaXMuaXNNYXRlVW5tYXBwZWQoKSAmJiB0aGlzLl9yZWZJRCA9PT0gdGhpcy5fbmV4dF9yZWZpZCgpKSB7CiAgICAgICAgICAgIHZhciBzMSA9IHRoaXMuaXNSZXZlcnNlQ29tcGxlbWVudGVkKCkgPyAiUiIgOiAiRiI7CiAgICAgICAgICAgIHZhciBzMiA9IHRoaXMuaXNNYXRlUmV2ZXJzZUNvbXBsZW1lbnRlZCgpID8gIlIiIDogIkYiOwogICAgICAgICAgICB2YXIgbzEgPSAiICI7CiAgICAgICAgICAgIHZhciBvMiA9ICIgIjsKICAgICAgICAgICAgaWYgKHRoaXMuaXNSZWFkMSgpKSB7CiAgICAgICAgICAgICAgbzEgPSAiMSI7CiAgICAgICAgICAgICAgbzIgPSAiMiI7CiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5pc1JlYWQyKCkpIHsKICAgICAgICAgICAgICBvMSA9ICIyIjsKICAgICAgICAgICAgICBvMiA9ICIxIjsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgdG1wID0gW107CiAgICAgICAgICAgIHZhciBpc2l6ZSA9IHRoaXMudGVtcGxhdGVfbGVuZ3RoKCk7CiAgICAgICAgICAgIGlmIChpc2l6ZSA+IDApIHsKICAgICAgICAgICAgICB0bXBbMF0gPSBzMTsKICAgICAgICAgICAgICB0bXBbMV0gPSBvMTsKICAgICAgICAgICAgICB0bXBbMl0gPSBzMjsKICAgICAgICAgICAgICB0bXBbM10gPSBvMjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0bXBbMl0gPSBzMTsKICAgICAgICAgICAgICB0bXBbM10gPSBvMTsKICAgICAgICAgICAgICB0bXBbMF0gPSBzMjsKICAgICAgICAgICAgICB0bXBbMV0gPSBvMjsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdG1wLmpvaW4oIiIpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAga2V5OiAiX2Jpbl9tcV9ubCIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9iaW5fbXFfbmwoKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5ieXRlcy5ieXRlQXJyYXkucmVhZEludDMyTEUodGhpcy5ieXRlcy5zdGFydCArIDEyKTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJfZmxhZ19uYyIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9mbGFnX25jKCkgewogICAgICAgICAgcmV0dXJuIHRoaXMuYnl0ZXMuYnl0ZUFycmF5LnJlYWRJbnQzMkxFKHRoaXMuYnl0ZXMuc3RhcnQgKyAxNik7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAga2V5OiAic2VxX2xlbmd0aCIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNlcV9sZW5ndGgoKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5ieXRlcy5ieXRlQXJyYXkucmVhZEludDMyTEUodGhpcy5ieXRlcy5zdGFydCArIDIwKTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJfbmV4dF9yZWZpZCIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9uZXh0X3JlZmlkKCkgewogICAgICAgICAgcmV0dXJuIHRoaXMuYnl0ZXMuYnl0ZUFycmF5LnJlYWRJbnQzMkxFKHRoaXMuYnl0ZXMuc3RhcnQgKyAyNCk7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAga2V5OiAiX25leHRfcG9zIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX25leHRfcG9zKCkgewogICAgICAgICAgcmV0dXJuIHRoaXMuYnl0ZXMuYnl0ZUFycmF5LnJlYWRJbnQzMkxFKHRoaXMuYnl0ZXMuc3RhcnQgKyAyOCk7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAga2V5OiAidGVtcGxhdGVfbGVuZ3RoIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdGVtcGxhdGVfbGVuZ3RoKCkgewogICAgICAgICAgcmV0dXJuIHRoaXMuYnl0ZXMuYnl0ZUFycmF5LnJlYWRJbnQzMkxFKHRoaXMuYnl0ZXMuc3RhcnQgKyAzMik7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAga2V5OiAidG9KU09OIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdG9KU09OKCkgewogICAgICAgICAgdmFyIF9jb250ZXh0NCwgX3RoaXMyID0gdGhpczsKICAgICAgICAgIHZhciBkYXRhMiA9IHt9OwogICAgICAgICAgKDAsIF9mb3JFYWNoLmRlZmF1bHQpKF9jb250ZXh0NCA9ICgwLCBfa2V5cy5kZWZhdWx0KSh0aGlzKSkuY2FsbChfY29udGV4dDQsIGZ1bmN0aW9uKGspIHsKICAgICAgICAgICAgaWYgKGsuY2hhckF0KDApID09PSAiXyIgfHwgayA9PT0gImJ5dGVzIikgewogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBkYXRhMltrXSA9IF90aGlzMltrXTsKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuIGRhdGEyOwogICAgICAgIH0KICAgICAgfV0pOwogICAgICByZXR1cm4gQmFtUmVjb3JkMjsKICAgIH0oKTsKICAgIGV4cG9ydHMuZGVmYXVsdCA9IEJhbVJlY29yZDsKICB9KShyZWNvcmQpOwogIHZhciBzYW0gPSB7fTsKICB2YXIgdG9BcnJheSA9IHsgZXhwb3J0czoge30gfTsKICB2YXIgaXRlcmFibGVUb0FycmF5ID0geyBleHBvcnRzOiB7fSB9OwogIChmdW5jdGlvbihtb2R1bGUpIHsKICAgIHZhciBfU3ltYm9sID0gc3ltYm9sOwogICAgdmFyIF9nZXRJdGVyYXRvck1ldGhvZCA9IGdldEl0ZXJhdG9yTWV0aG9kJDI7CiAgICB2YXIgX0FycmF5JGZyb20gPSBmcm9tJDE7CiAgICBmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsKICAgICAgaWYgKHR5cGVvZiBfU3ltYm9sICE9PSAidW5kZWZpbmVkIiAmJiBfZ2V0SXRlcmF0b3JNZXRob2QoaXRlcikgIT0gbnVsbCB8fCBpdGVyWyJAQGl0ZXJhdG9yIl0gIT0gbnVsbCkKICAgICAgICByZXR1cm4gX0FycmF5JGZyb20oaXRlcik7CiAgICB9CiAgICBtb2R1bGUuZXhwb3J0cyA9IF9pdGVyYWJsZVRvQXJyYXk7CiAgICBtb2R1bGUuZXhwb3J0c1siZGVmYXVsdCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwogIH0pKGl0ZXJhYmxlVG9BcnJheSk7CiAgKGZ1bmN0aW9uKG1vZHVsZSkgewogICAgdmFyIGFycmF5V2l0aEhvbGVzMiA9IGFycmF5V2l0aEhvbGVzJDEuZXhwb3J0czsKICAgIHZhciBpdGVyYWJsZVRvQXJyYXkkMSA9IGl0ZXJhYmxlVG9BcnJheS5leHBvcnRzOwogICAgdmFyIHVuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5MiA9IHVuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5JDEuZXhwb3J0czsKICAgIHZhciBub25JdGVyYWJsZVJlc3QyID0gbm9uSXRlcmFibGVSZXN0JDEuZXhwb3J0czsKICAgIGZ1bmN0aW9uIF90b0FycmF5KGFycikgewogICAgICByZXR1cm4gYXJyYXlXaXRoSG9sZXMyKGFycikgfHwgaXRlcmFibGVUb0FycmF5JDEoYXJyKSB8fCB1bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheTIoYXJyKSB8fCBub25JdGVyYWJsZVJlc3QyKCk7CiAgICB9CiAgICBtb2R1bGUuZXhwb3J0cyA9IF90b0FycmF5OwogICAgbW9kdWxlLmV4cG9ydHNbImRlZmF1bHQiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKICB9KSh0b0FycmF5KTsKICAoZnVuY3Rpb24oZXhwb3J0cykgewogICAgdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyID0gaW50ZXJvcFJlcXVpcmVEZWZhdWx0JDEuZXhwb3J0czsKICAgIHZhciBfT2JqZWN0JGRlZmluZVByb3BlcnR5ID0gZGVmaW5lUHJvcGVydHkkOTsKICAgIF9PYmplY3QkZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgICAgIHZhbHVlOiB0cnVlCiAgICB9KTsKICAgIGV4cG9ydHMucGFyc2VIZWFkZXJUZXh0ID0gcGFyc2VIZWFkZXJUZXh0OwogICAgdmFyIF9zbGljZWRUb0FycmF5MjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0MihzbGljZWRUb0FycmF5JDEuZXhwb3J0cyk7CiAgICB2YXIgX21hcCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKG1hcCk7CiAgICB2YXIgX3NsaWNlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoc2xpY2UkMSk7CiAgICB2YXIgX3RvQXJyYXkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIodG9BcnJheS5leHBvcnRzKTsKICAgIHZhciBfZm9yRWFjaCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKGZvckVhY2gkMSk7CiAgICBmdW5jdGlvbiBwYXJzZUhlYWRlclRleHQodGV4dCkgewogICAgICB2YXIgbGluZXMgPSB0ZXh0LnNwbGl0KC9ccj9cbi8pOwogICAgICB2YXIgZGF0YTIgPSBbXTsKICAgICAgKDAsIF9mb3JFYWNoLmRlZmF1bHQpKGxpbmVzKS5jYWxsKGxpbmVzLCBmdW5jdGlvbihsaW5lKSB7CiAgICAgICAgdmFyIF9saW5lJHNwbGl0ID0gbGluZS5zcGxpdCgvXHQvKSwgX2xpbmUkc3BsaXQyID0gKDAsIF90b0FycmF5Mi5kZWZhdWx0KShfbGluZSRzcGxpdCksIHRhZyA9IF9saW5lJHNwbGl0MlswXSwgZmllbGRzID0gKDAsIF9zbGljZS5kZWZhdWx0KShfbGluZSRzcGxpdDIpLmNhbGwoX2xpbmUkc3BsaXQyLCAxKTsKICAgICAgICB2YXIgcGFyc2VkRmllbGRzID0gKDAsIF9tYXAuZGVmYXVsdCkoZmllbGRzKS5jYWxsKGZpZWxkcywgZnVuY3Rpb24oZikgewogICAgICAgICAgdmFyIF9mJHNwbGl0ID0gZi5zcGxpdCgiOiIsIDIpLCBfZiRzcGxpdDIgPSAoMCwgX3NsaWNlZFRvQXJyYXkyMi5kZWZhdWx0KShfZiRzcGxpdCwgMiksIGZpZWxkVGFnID0gX2Ykc3BsaXQyWzBdLCB2YWx1ZSA9IF9mJHNwbGl0MlsxXTsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHRhZzogZmllbGRUYWcsCiAgICAgICAgICAgIHZhbHVlCiAgICAgICAgICB9OwogICAgICAgIH0pOwogICAgICAgIGlmICh0YWcpIHsKICAgICAgICAgIGRhdGEyLnB1c2goewogICAgICAgICAgICB0YWc6IHRhZy5zdWJzdHIoMSksCiAgICAgICAgICAgIGRhdGE6IHBhcnNlZEZpZWxkcwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIGRhdGEyOwogICAgfQogIH0pKHNhbSk7CiAgKGZ1bmN0aW9uKGV4cG9ydHMpIHsKICAgIHZhciBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0MiA9IGludGVyb3BSZXF1aXJlRGVmYXVsdCQxLmV4cG9ydHM7CiAgICB2YXIgX09iamVjdCRkZWZpbmVQcm9wZXJ0eSA9IGRlZmluZVByb3BlcnR5JDk7CiAgICBfT2JqZWN0JGRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogICAgICB2YWx1ZTogdHJ1ZQogICAgfSk7CiAgICBleHBvcnRzLmRlZmF1bHQgPSBleHBvcnRzLkJBTV9NQUdJQyA9IHZvaWQgMDsKICAgIHZhciBfbm93ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIobm93KTsKICAgIHZhciBfc29ydCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKHNvcnQpOwogICAgdmFyIF9maWx0ZXIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0MihmaWx0ZXIpOwogICAgdmFyIF9zbGljZWRUb0FycmF5MjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0MihzbGljZWRUb0FycmF5JDEuZXhwb3J0cyk7CiAgICB2YXIgX2ZvckVhY2ggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Mihmb3JFYWNoJDEpOwogICAgdmFyIF9wcm9taXNlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIocHJvbWlzZSk7CiAgICB2YXIgX21hcCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKG1hcCk7CiAgICB2YXIgX3JlZHVjZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKHJlZHVjZSk7CiAgICB2YXIgX2NvbmNhdCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKGNvbmNhdCk7CiAgICB2YXIgX3JlZ2VuZXJhdG9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKHJlZ2VuZXJhdG9yJDEpOwogICAgdmFyIF9zbGljZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKHNsaWNlJDEpOwogICAgdmFyIF9hc3luY1RvR2VuZXJhdG9yMjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Mihhc3luY1RvR2VuZXJhdG9yJDEuZXhwb3J0cyk7CiAgICB2YXIgX2JpbmQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0MihiaW5kKTsKICAgIHZhciBfY2xhc3NDYWxsQ2hlY2syMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKGNsYXNzQ2FsbENoZWNrJDEuZXhwb3J0cyk7CiAgICB2YXIgX2NyZWF0ZUNsYXNzMjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0MihjcmVhdGVDbGFzcyQxLmV4cG9ydHMpOwogICAgdmFyIF9kZWZpbmVQcm9wZXJ0eTIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoZGVmaW5lUHJvcGVydHkkNi5leHBvcnRzKTsKICAgIHZhciBfd3JhcEFzeW5jR2VuZXJhdG9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKHdyYXBBc3luY0dlbmVyYXRvci5leHBvcnRzKTsKICAgIHZhciBfYXdhaXRBc3luY0dlbmVyYXRvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Mihhd2FpdEFzeW5jR2VuZXJhdG9yLmV4cG9ydHMpOwogICAgdmFyIF9hc3luY0dlbmVyYXRvckRlbGVnYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKGFzeW5jR2VuZXJhdG9yRGVsZWdhdGUuZXhwb3J0cyk7CiAgICB2YXIgX2FzeW5jSXRlcmF0b3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoYXN5bmNJdGVyYXRvci5leHBvcnRzKTsKICAgIHZhciBfYWJvcnRhYmxlUHJvbWlzZUNhY2hlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoZGlzdCQyKTsKICAgIHZhciBfYmFpID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoYmFpKTsKICAgIHZhciBfY3NpID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoY3NpKTsKICAgIHZhciBfYnVmZmVyQ3JjID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoYnVmZmVyQ3JjMzIpOwogICAgdmFyIF9iZ3pmRmlsZWhhbmRsZSA9IGRpc3QkMTsKICAgIHZhciBfb2JqZWN0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIob2JqZWN0X2VudHJpZXNQb255ZmlsbCk7CiAgICB2YXIgX3F1aWNrTHJ1ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIocXVpY2tMcnUpOwogICAgdmFyIF9nZW5lcmljRmlsZWhhbmRsZSA9IGRpc3Q7CiAgICB2YXIgX3JlY29yZCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKHJlY29yZCk7CiAgICB2YXIgX3NhbSA9IHNhbTsKICAgIHZhciBfdXRpbCA9IHV0aWw7CiAgICB2YXIgQkFNX01BR0lDID0gMjE4NDAxOTQ7CiAgICBleHBvcnRzLkJBTV9NQUdJQyA9IEJBTV9NQUdJQzsKICAgIHZhciBibG9ja0xlbiA9IDEgPDwgMTY7CiAgICB2YXIgQmFtRmlsZSA9IC8qIEBfX1BVUkVfXyAqLyBmdW5jdGlvbigpIHsKICAgICAgZnVuY3Rpb24gQmFtRmlsZTIoX3JlZikgewogICAgICAgIHZhciBfY29udGV4dDsKICAgICAgICB2YXIgYmFtRmlsZWhhbmRsZSA9IF9yZWYuYmFtRmlsZWhhbmRsZSwgYmFtUGF0aCA9IF9yZWYuYmFtUGF0aCwgYmFtVXJsID0gX3JlZi5iYW1VcmwsIGJhaVBhdGggPSBfcmVmLmJhaVBhdGgsIGJhaUZpbGVoYW5kbGUgPSBfcmVmLmJhaUZpbGVoYW5kbGUsIGJhaVVybCA9IF9yZWYuYmFpVXJsLCBjc2lQYXRoID0gX3JlZi5jc2lQYXRoLCBjc2lGaWxlaGFuZGxlID0gX3JlZi5jc2lGaWxlaGFuZGxlLCBjc2lVcmwgPSBfcmVmLmNzaVVybCwgY2FjaGVTaXplID0gX3JlZi5jYWNoZVNpemUsIGZldGNoU2l6ZUxpbWl0ID0gX3JlZi5mZXRjaFNpemVMaW1pdCwgY2h1bmtTaXplTGltaXQgPSBfcmVmLmNodW5rU2l6ZUxpbWl0LCBfcmVmJHlpZWxkVGhyZWFkVGltZSA9IF9yZWYueWllbGRUaHJlYWRUaW1lLCB5aWVsZFRocmVhZFRpbWUgPSBfcmVmJHlpZWxkVGhyZWFkVGltZSA9PT0gdm9pZCAwID8gMTAwIDogX3JlZiR5aWVsZFRocmVhZFRpbWUsIF9yZWYkcmVuYW1lUmVmU2VxcyA9IF9yZWYucmVuYW1lUmVmU2VxcywgcmVuYW1lUmVmU2VxcyA9IF9yZWYkcmVuYW1lUmVmU2VxcyA9PT0gdm9pZCAwID8gZnVuY3Rpb24obikgewogICAgICAgICAgcmV0dXJuIG47CiAgICAgICAgfSA6IF9yZWYkcmVuYW1lUmVmU2VxczsKICAgICAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMjIuZGVmYXVsdCkodGhpcywgQmFtRmlsZTIpOwogICAgICAgICgwLCBfZGVmaW5lUHJvcGVydHkyMi5kZWZhdWx0KSh0aGlzLCAicmVuYW1lUmVmU2VxIiwgdm9pZCAwKTsKICAgICAgICAoMCwgX2RlZmluZVByb3BlcnR5MjIuZGVmYXVsdCkodGhpcywgImJhbSIsIHZvaWQgMCk7CiAgICAgICAgKDAsIF9kZWZpbmVQcm9wZXJ0eTIyLmRlZmF1bHQpKHRoaXMsICJpbmRleCIsIHZvaWQgMCk7CiAgICAgICAgKDAsIF9kZWZpbmVQcm9wZXJ0eTIyLmRlZmF1bHQpKHRoaXMsICJjaHVua1NpemVMaW1pdCIsIHZvaWQgMCk7CiAgICAgICAgKDAsIF9kZWZpbmVQcm9wZXJ0eTIyLmRlZmF1bHQpKHRoaXMsICJmZXRjaFNpemVMaW1pdCIsIHZvaWQgMCk7CiAgICAgICAgKDAsIF9kZWZpbmVQcm9wZXJ0eTIyLmRlZmF1bHQpKHRoaXMsICJoZWFkZXIiLCB2b2lkIDApOwogICAgICAgICgwLCBfZGVmaW5lUHJvcGVydHkyMi5kZWZhdWx0KSh0aGlzLCAiZmVhdHVyZUNhY2hlIiwgdm9pZCAwKTsKICAgICAgICAoMCwgX2RlZmluZVByb3BlcnR5MjIuZGVmYXVsdCkodGhpcywgImNoclRvSW5kZXgiLCB2b2lkIDApOwogICAgICAgICgwLCBfZGVmaW5lUHJvcGVydHkyMi5kZWZhdWx0KSh0aGlzLCAiaW5kZXhUb0NociIsIHZvaWQgMCk7CiAgICAgICAgKDAsIF9kZWZpbmVQcm9wZXJ0eTIyLmRlZmF1bHQpKHRoaXMsICJ5aWVsZFRocmVhZFRpbWUiLCB2b2lkIDApOwogICAgICAgIHRoaXMucmVuYW1lUmVmU2VxID0gcmVuYW1lUmVmU2VxczsKICAgICAgICBpZiAoYmFtRmlsZWhhbmRsZSkgewogICAgICAgICAgdGhpcy5iYW0gPSBiYW1GaWxlaGFuZGxlOwogICAgICAgIH0gZWxzZSBpZiAoYmFtUGF0aCkgewogICAgICAgICAgdGhpcy5iYW0gPSBuZXcgX2dlbmVyaWNGaWxlaGFuZGxlLkxvY2FsRmlsZShiYW1QYXRoKTsKICAgICAgICB9IGVsc2UgaWYgKGJhbVVybCkgewogICAgICAgICAgdGhpcy5iYW0gPSBuZXcgX2dlbmVyaWNGaWxlaGFuZGxlLlJlbW90ZUZpbGUoYmFtVXJsKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJ1bmFibGUgdG8gaW5pdGlhbGl6ZSBiYW0iKTsKICAgICAgICB9CiAgICAgICAgaWYgKGNzaUZpbGVoYW5kbGUpIHsKICAgICAgICAgIHRoaXMuaW5kZXggPSBuZXcgX2NzaS5kZWZhdWx0KHsKICAgICAgICAgICAgZmlsZWhhbmRsZTogY3NpRmlsZWhhbmRsZQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIGlmIChjc2lQYXRoKSB7CiAgICAgICAgICB0aGlzLmluZGV4ID0gbmV3IF9jc2kuZGVmYXVsdCh7CiAgICAgICAgICAgIGZpbGVoYW5kbGU6IG5ldyBfZ2VuZXJpY0ZpbGVoYW5kbGUuTG9jYWxGaWxlKGNzaVBhdGgpCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgaWYgKGNzaVVybCkgewogICAgICAgICAgdGhpcy5pbmRleCA9IG5ldyBfY3NpLmRlZmF1bHQoewogICAgICAgICAgICBmaWxlaGFuZGxlOiBuZXcgX2dlbmVyaWNGaWxlaGFuZGxlLlJlbW90ZUZpbGUoY3NpVXJsKQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIGlmIChiYWlGaWxlaGFuZGxlKSB7CiAgICAgICAgICB0aGlzLmluZGV4ID0gbmV3IF9iYWkuZGVmYXVsdCh7CiAgICAgICAgICAgIGZpbGVoYW5kbGU6IGJhaUZpbGVoYW5kbGUKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSBpZiAoYmFpUGF0aCkgewogICAgICAgICAgdGhpcy5pbmRleCA9IG5ldyBfYmFpLmRlZmF1bHQoewogICAgICAgICAgICBmaWxlaGFuZGxlOiBuZXcgX2dlbmVyaWNGaWxlaGFuZGxlLkxvY2FsRmlsZShiYWlQYXRoKQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIGlmIChiYWlVcmwpIHsKICAgICAgICAgIHRoaXMuaW5kZXggPSBuZXcgX2JhaS5kZWZhdWx0KHsKICAgICAgICAgICAgZmlsZWhhbmRsZTogbmV3IF9nZW5lcmljRmlsZWhhbmRsZS5SZW1vdGVGaWxlKGJhaVVybCkKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSBpZiAoYmFtUGF0aCkgewogICAgICAgICAgdGhpcy5pbmRleCA9IG5ldyBfYmFpLmRlZmF1bHQoewogICAgICAgICAgICBmaWxlaGFuZGxlOiBuZXcgX2dlbmVyaWNGaWxlaGFuZGxlLkxvY2FsRmlsZSgiIi5jb25jYXQoYmFtUGF0aCwgIi5iYWkiKSkKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSBpZiAoYmFtVXJsKSB7CiAgICAgICAgICB0aGlzLmluZGV4ID0gbmV3IF9iYWkuZGVmYXVsdCh7CiAgICAgICAgICAgIGZpbGVoYW5kbGU6IG5ldyBfZ2VuZXJpY0ZpbGVoYW5kbGUuUmVtb3RlRmlsZSgiIi5jb25jYXQoYmFtVXJsLCAiLmJhaSIpKQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRocm93IG5ldyBFcnJvcigidW5hYmxlIHRvIGluZmVyIGluZGV4IGZvcm1hdCIpOwogICAgICAgIH0KICAgICAgICB0aGlzLmZlYXR1cmVDYWNoZSA9IG5ldyBfYWJvcnRhYmxlUHJvbWlzZUNhY2hlLmRlZmF1bHQoewogICAgICAgICAgY2FjaGU6IG5ldyBfcXVpY2tMcnUuZGVmYXVsdCh7CiAgICAgICAgICAgIG1heFNpemU6IGNhY2hlU2l6ZSAhPT0gdm9pZCAwID8gY2FjaGVTaXplIDogNTAKICAgICAgICAgIH0pLAogICAgICAgICAgZmlsbDogKDAsIF9iaW5kLmRlZmF1bHQpKF9jb250ZXh0ID0gdGhpcy5fcmVhZENodW5rKS5jYWxsKF9jb250ZXh0LCB0aGlzKQogICAgICAgIH0pOwogICAgICAgIHRoaXMuZmV0Y2hTaXplTGltaXQgPSBmZXRjaFNpemVMaW1pdCB8fCA1ZTg7CiAgICAgICAgdGhpcy5jaHVua1NpemVMaW1pdCA9IGNodW5rU2l6ZUxpbWl0IHx8IDNlODsKICAgICAgICB0aGlzLnlpZWxkVGhyZWFkVGltZSA9IHlpZWxkVGhyZWFkVGltZTsKICAgICAgfQogICAgICAoMCwgX2NyZWF0ZUNsYXNzMjIuZGVmYXVsdCkoQmFtRmlsZTIsIFt7CiAgICAgICAga2V5OiAiZ2V0SGVhZGVyIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICB2YXIgX2dldEhlYWRlciA9ICgwLCBfYXN5bmNUb0dlbmVyYXRvcjIyLmRlZmF1bHQpKC8qIEBfX1BVUkVfXyAqLyBfcmVnZW5lcmF0b3IyLmRlZmF1bHQubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgICAgICB2YXIgb3JpZ09wdHMsIG9wdHMsIGluZGV4RGF0YSwgcmV0LCBidWZmZXIyLCByZXMsIGJ5dGVzUmVhZCwgdW5jYmEsIGhlYWRMZW4sIF95aWVsZCR0aGlzJF9yZWFkUmVmUywgY2hyVG9JbmRleCwgaW5kZXhUb0NociwgX2FyZ3MgPSBhcmd1bWVudHM7CiAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3IyLmRlZmF1bHQud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dDIpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICBvcmlnT3B0cyA9IF9hcmdzLmxlbmd0aCA+IDAgJiYgX2FyZ3NbMF0gIT09IHZvaWQgMCA/IF9hcmdzWzBdIDoge307CiAgICAgICAgICAgICAgICAgICAgb3B0cyA9ICgwLCBfdXRpbC5tYWtlT3B0cykob3JpZ09wdHMpOwogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pbmRleC5wYXJzZShvcHRzKTsKICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgIGluZGV4RGF0YSA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgICAgIHJldCA9IGluZGV4RGF0YS5maXJzdERhdGFMaW5lID8gaW5kZXhEYXRhLmZpcnN0RGF0YUxpbmUuYmxvY2tQb3NpdGlvbiArIDY1NTM1IDogdm9pZCAwOwogICAgICAgICAgICAgICAgICAgIGlmICghcmV0KSB7CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE3OwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gOTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5iYW0ucmVhZChCdWZmZXIuYWxsb2MocmV0ICsgYmxvY2tMZW4pLCAwLCByZXQgKyBibG9ja0xlbiwgMCwgb3B0cyk7CiAgICAgICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgICAgICBieXRlc1JlYWQgPSByZXMuYnl0ZXNSZWFkOwogICAgICAgICAgICAgICAgICAgIGJ1ZmZlcjIgPSByZXMuYnVmZmVyOwogICAgICAgICAgICAgICAgICAgIGlmIChieXRlc1JlYWQpIHsKICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJFcnJvciByZWFkaW5nIGhlYWRlciIpOwogICAgICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgICAgIGlmIChieXRlc1JlYWQgPCByZXQpIHsKICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlcjIgPSAoMCwgX3NsaWNlLmRlZmF1bHQpKGJ1ZmZlcjIpLmNhbGwoYnVmZmVyMiwgMCwgYnl0ZXNSZWFkKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgYnVmZmVyMiA9ICgwLCBfc2xpY2UuZGVmYXVsdCkoYnVmZmVyMikuY2FsbChidWZmZXIyLCAwLCByZXQpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDIwOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYmFtLnJlYWRGaWxlKG9wdHMpOwogICAgICAgICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICAgICAgICAgIGJ1ZmZlcjIgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDIyOwogICAgICAgICAgICAgICAgICAgIHJldHVybiAoMCwgX2JnemZGaWxlaGFuZGxlLnVuemlwKShidWZmZXIyKTsKICAgICAgICAgICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgICAgICAgICB1bmNiYSA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgICAgIGlmICghKHVuY2JhLnJlYWRJbnQzMkxFKDApICE9PSBCQU1fTUFHSUMpKSB7CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI1OwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiTm90IGEgQkFNIGZpbGUiKTsKICAgICAgICAgICAgICAgICAgY2FzZSAyNToKICAgICAgICAgICAgICAgICAgICBoZWFkTGVuID0gdW5jYmEucmVhZEludDMyTEUoNCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5oZWFkZXIgPSB1bmNiYS50b1N0cmluZygidXRmOCIsIDgsIDggKyBoZWFkTGVuKTsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI5OwogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZWFkUmVmU2VxcyhoZWFkTGVuICsgOCwgNjU1MzUsIG9wdHMpOwogICAgICAgICAgICAgICAgICBjYXNlIDI5OgogICAgICAgICAgICAgICAgICAgIF95aWVsZCR0aGlzJF9yZWFkUmVmUyA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgICAgIGNoclRvSW5kZXggPSBfeWllbGQkdGhpcyRfcmVhZFJlZlMuY2hyVG9JbmRleDsKICAgICAgICAgICAgICAgICAgICBpbmRleFRvQ2hyID0gX3lpZWxkJHRoaXMkX3JlYWRSZWZTLmluZGV4VG9DaHI7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaHJUb0luZGV4ID0gY2hyVG9JbmRleDsKICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4VG9DaHIgPSBpbmRleFRvQ2hyOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCAoMCwgX3NhbS5wYXJzZUhlYWRlclRleHQpKHRoaXMuaGVhZGVyKSk7CiAgICAgICAgICAgICAgICAgIGNhc2UgMzU6CiAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlLCB0aGlzKTsKICAgICAgICAgIH0pKTsKICAgICAgICAgIGZ1bmN0aW9uIGdldEhlYWRlcigpIHsKICAgICAgICAgICAgcmV0dXJuIF9nZXRIZWFkZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBnZXRIZWFkZXI7CiAgICAgICAgfSgpCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJnZXRIZWFkZXJUZXh0IiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICB2YXIgX2dldEhlYWRlclRleHQgPSAoMCwgX2FzeW5jVG9HZW5lcmF0b3IyMi5kZWZhdWx0KSgvKiBAX19QVVJFX18gKi8gX3JlZ2VuZXJhdG9yMi5kZWZhdWx0Lm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgICAgIHZhciBvcHRzLCBfYXJnczIgPSBhcmd1bWVudHM7CiAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3IyLmRlZmF1bHQud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQzKSB7CiAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgb3B0cyA9IF9hcmdzMi5sZW5ndGggPiAwICYmIF9hcmdzMlswXSAhPT0gdm9pZCAwID8gX2FyZ3MyWzBdIDoge307CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEhlYWRlcihvcHRzKTsKICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCB0aGlzLmhlYWRlcik7CiAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIF9jYWxsZWUyLCB0aGlzKTsKICAgICAgICAgIH0pKTsKICAgICAgICAgIGZ1bmN0aW9uIGdldEhlYWRlclRleHQoKSB7CiAgICAgICAgICAgIHJldHVybiBfZ2V0SGVhZGVyVGV4dC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGdldEhlYWRlclRleHQ7CiAgICAgICAgfSgpCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJfcmVhZFJlZlNlcXMiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbigpIHsKICAgICAgICAgIHZhciBfcmVhZFJlZlNlcXMyID0gKDAsIF9hc3luY1RvR2VuZXJhdG9yMjIuZGVmYXVsdCkoLyogQF9fUFVSRV9fICovIF9yZWdlbmVyYXRvcjIuZGVmYXVsdC5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKHN0YXJ0LCByZWZTZXFCeXRlcykgewogICAgICAgICAgICB2YXIgb3B0cywgcmVzLCBieXRlc1JlYWQsIGJ1ZmZlcjIsIHVuY2JhLCBuUmVmLCBwLCBjaHJUb0luZGV4LCBpbmRleFRvQ2hyLCBpMiwgbE5hbWUsIHJlZk5hbWUsIGxSZWYsIF9hcmdzMyA9IGFyZ3VtZW50czsKICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvcjIuZGVmYXVsdC53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDQpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICBvcHRzID0gX2FyZ3MzLmxlbmd0aCA+IDIgJiYgX2FyZ3MzWzJdICE9PSB2b2lkIDAgPyBfYXJnczNbMl0gOiB7fTsKICAgICAgICAgICAgICAgICAgICBpZiAoIShzdGFydCA+IHJlZlNlcUJ5dGVzKSkgewogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCB0aGlzLl9yZWFkUmVmU2VxcyhzdGFydCwgcmVmU2VxQnl0ZXMgKiAyLCBvcHRzKSk7CiAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYmFtLnJlYWQoQnVmZmVyLmFsbG9jKHJlZlNlcUJ5dGVzICsgYmxvY2tMZW4pLCAwLCByZWZTZXFCeXRlcywgMCwgb3B0cyk7CiAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgICAgICAgICAgICBieXRlc1JlYWQgPSByZXMuYnl0ZXNSZWFkOwogICAgICAgICAgICAgICAgICAgIGJ1ZmZlcjIgPSByZXMuYnVmZmVyOwogICAgICAgICAgICAgICAgICAgIGlmIChieXRlc1JlYWQpIHsKICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJFcnJvciByZWFkaW5nIHJlZnNlcXMgZnJvbSBoZWFkZXIiKTsKICAgICAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgICAgICBpZiAoYnl0ZXNSZWFkIDwgcmVmU2VxQnl0ZXMpIHsKICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlcjIgPSAoMCwgX3NsaWNlLmRlZmF1bHQpKGJ1ZmZlcjIpLmNhbGwoYnVmZmVyMiwgMCwgYnl0ZXNSZWFkKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgYnVmZmVyMiA9ICgwLCBfc2xpY2UuZGVmYXVsdCkoYnVmZmVyMikuY2FsbChidWZmZXIyLCAwLCByZWZTZXFCeXRlcyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgwLCBfYmd6ZkZpbGVoYW5kbGUudW56aXApKGJ1ZmZlcjIpOwogICAgICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgICAgIHVuY2JhID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgblJlZiA9IHVuY2JhLnJlYWRJbnQzMkxFKHN0YXJ0KTsKICAgICAgICAgICAgICAgICAgICBwID0gc3RhcnQgKyA0OwogICAgICAgICAgICAgICAgICAgIGNoclRvSW5kZXggPSB7fTsKICAgICAgICAgICAgICAgICAgICBpbmRleFRvQ2hyID0gW107CiAgICAgICAgICAgICAgICAgICAgaTIgPSAwOwogICAgICAgICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICAgICAgICAgIGlmICghKGkyIDwgblJlZikpIHsKICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMzU7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyMjsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gKDAsIF91dGlsLmFib3J0QnJlYWtQb2ludCkob3B0cy5zaWduYWwpOwogICAgICAgICAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICAgICAgICAgIGxOYW1lID0gdW5jYmEucmVhZEludDMyTEUocCk7CiAgICAgICAgICAgICAgICAgICAgcmVmTmFtZSA9IHVuY2JhLnRvU3RyaW5nKCJ1dGY4IiwgcCArIDQsIHAgKyA0ICsgbE5hbWUgLSAxKTsKICAgICAgICAgICAgICAgICAgICByZWZOYW1lID0gdGhpcy5yZW5hbWVSZWZTZXEocmVmTmFtZSk7CiAgICAgICAgICAgICAgICAgICAgbFJlZiA9IHVuY2JhLnJlYWRJbnQzMkxFKHAgKyBsTmFtZSArIDQpOwogICAgICAgICAgICAgICAgICAgIGNoclRvSW5kZXhbcmVmTmFtZV0gPSBpMjsKICAgICAgICAgICAgICAgICAgICBpbmRleFRvQ2hyLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgcmVmTmFtZSwKICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aDogbFJlZgogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHAgPSBwICsgOCArIGxOYW1lOwogICAgICAgICAgICAgICAgICAgIGlmICghKHAgPiB1bmNiYS5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDMyOwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybigiQkFNIGhlYWRlciBpcyB2ZXJ5IGJpZy4gIFJlLWZldGNoaW5nICIuY29uY2F0KHJlZlNlcUJ5dGVzLCAiIGJ5dGVzLiIpKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgdGhpcy5fcmVhZFJlZlNlcXMoc3RhcnQsIHJlZlNlcUJ5dGVzICogMiwgb3B0cykpOwogICAgICAgICAgICAgICAgICBjYXNlIDMyOgogICAgICAgICAgICAgICAgICAgIGkyICs9IDE7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxOTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgY2FzZSAzNToKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICAgICAgICAgICAgY2hyVG9JbmRleCwKICAgICAgICAgICAgICAgICAgICAgIGluZGV4VG9DaHIKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgY2FzZSAzNjoKICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIF9jYWxsZWUzLCB0aGlzKTsKICAgICAgICAgIH0pKTsKICAgICAgICAgIGZ1bmN0aW9uIF9yZWFkUmVmU2VxcyhfeCwgX3gyKSB7CiAgICAgICAgICAgIHJldHVybiBfcmVhZFJlZlNlcXMyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gX3JlYWRSZWZTZXFzOwogICAgICAgIH0oKQogICAgICB9LCB7CiAgICAgICAga2V5OiAiZ2V0UmVjb3Jkc0ZvclJhbmdlIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICB2YXIgX2dldFJlY29yZHNGb3JSYW5nZSA9ICgwLCBfYXN5bmNUb0dlbmVyYXRvcjIyLmRlZmF1bHQpKC8qIEBfX1BVUkVfXyAqLyBfcmVnZW5lcmF0b3IyLmRlZmF1bHQubWFyayhmdW5jdGlvbiBfY2FsbGVlNChjaHIsIG1pbjIsIG1heDIpIHsKICAgICAgICAgICAgdmFyIG9wdHMsIHJlY29yZHMsIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24sIF9kaWRJdGVyYXRvckVycm9yLCBfaXRlcmF0b3JFcnJvciwgX2l0ZXJhdG9yLCBfc3RlcCwgX3ZhbHVlLCBjaHVuazIsIF9hcmdzNCA9IGFyZ3VtZW50czsKICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvcjIuZGVmYXVsdC53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDUpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICBvcHRzID0gX2FyZ3M0Lmxlbmd0aCA+IDMgJiYgX2FyZ3M0WzNdICE9PSB2b2lkIDAgPyBfYXJnczRbM10gOiB7CiAgICAgICAgICAgICAgICAgICAgICB2aWV3QXNQYWlyczogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICBwYWlyQWNyb3NzQ2hyOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgIG1heEluc2VydFNpemU6IDJlNQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgcmVjb3JkcyA9IFtdOwogICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ1LnByZXYgPSA0OwogICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvciA9ICgwLCBfYXN5bmNJdGVyYXRvcjIuZGVmYXVsdCkodGhpcy5zdHJlYW1SZWNvcmRzRm9yUmFuZ2UoY2hyLCBtaW4yLCBtYXgyLCBvcHRzKSk7CiAgICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9pdGVyYXRvci5uZXh0KCk7CiAgICAgICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgICAgICBfc3RlcCA9IF9jb250ZXh0NS5zZW50OwogICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSBfc3RlcC5kb25lOwogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9zdGVwLnZhbHVlOwogICAgICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgICAgIF92YWx1ZSA9IF9jb250ZXh0NS5zZW50OwogICAgICAgICAgICAgICAgICAgIGlmIChfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDE5OwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGNodW5rMiA9IF92YWx1ZTsKICAgICAgICAgICAgICAgICAgICByZWNvcmRzID0gKDAsIF9jb25jYXQuZGVmYXVsdCkocmVjb3JkcykuY2FsbChyZWNvcmRzLCBjaHVuazIpOwogICAgICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDI1OwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NS5wcmV2ID0gMjE7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ1LnQwID0gX2NvbnRleHQ1WyJjYXRjaCJdKDQpOwogICAgICAgICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3JFcnJvciA9IF9jb250ZXh0NS50MDsKICAgICAgICAgICAgICAgICAgY2FzZSAyNToKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDUucHJldiA9IDI1OwogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NS5wcmV2ID0gMjY7CiAgICAgICAgICAgICAgICAgICAgaWYgKCEoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gJiYgX2l0ZXJhdG9yLnJldHVybiAhPSBudWxsKSkgewogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAzMDsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDMwOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBfaXRlcmF0b3IucmV0dXJuKCk7CiAgICAgICAgICAgICAgICAgIGNhc2UgMzA6CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ1LnByZXYgPSAzMDsKICAgICAgICAgICAgICAgICAgICBpZiAoIV9kaWRJdGVyYXRvckVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDMzOwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yOwogICAgICAgICAgICAgICAgICBjYXNlIDMzOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuZmluaXNoKDMwKTsKICAgICAgICAgICAgICAgICAgY2FzZSAzNDoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmZpbmlzaCgyNSk7CiAgICAgICAgICAgICAgICAgIGNhc2UgMzU6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIsIHJlY29yZHMpOwogICAgICAgICAgICAgICAgICBjYXNlIDM2OgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZTQsIHRoaXMsIFtbNCwgMjEsIDI1LCAzNV0sIFsyNiwgLCAzMCwgMzRdXSk7CiAgICAgICAgICB9KSk7CiAgICAgICAgICBmdW5jdGlvbiBnZXRSZWNvcmRzRm9yUmFuZ2UoX3gzLCBfeDQsIF94NSkgewogICAgICAgICAgICByZXR1cm4gX2dldFJlY29yZHNGb3JSYW5nZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGdldFJlY29yZHNGb3JSYW5nZTsKICAgICAgICB9KCkKICAgICAgfSwgewogICAgICAgIGtleTogInN0cmVhbVJlY29yZHNGb3JSYW5nZSIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHN0cmVhbVJlY29yZHNGb3JSYW5nZShjaHIsIG1pbjIsIG1heDIpIHsKICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgICAgICB2YXIgb3B0cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdm9pZCAwID8gYXJndW1lbnRzWzNdIDogewogICAgICAgICAgICB2aWV3QXNQYWlyczogZmFsc2UsCiAgICAgICAgICAgIHBhaXJBY3Jvc3NDaHI6IGZhbHNlLAogICAgICAgICAgICBtYXhJbnNlcnRTaXplOiAyZTUKICAgICAgICAgIH07CiAgICAgICAgICByZXR1cm4gKDAsIF93cmFwQXN5bmNHZW5lcmF0b3IyLmRlZmF1bHQpKC8qIEBfX1BVUkVfXyAqLyBfcmVnZW5lcmF0b3IyLmRlZmF1bHQubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgICAgICAgdmFyIF9jb250ZXh0NzsKICAgICAgICAgICAgdmFyIGNocklkLCBjaHVua3MsIGkyLCBzaXplLCBfY29udGV4dDYsIHRvdGFsU2l6ZSwgX2NvbnRleHQ4OwogICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yMi5kZWZhdWx0LndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0OSkgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OS5wcmV2ID0gX2NvbnRleHQ5Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIG9wdHMudmlld0FzUGFpcnMgPSBvcHRzLnZpZXdBc1BhaXJzIHx8IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIG9wdHMucGFpckFjcm9zc0NociA9IG9wdHMucGFpckFjcm9zc0NociB8fCBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBvcHRzLm1heEluc2VydFNpemUgPSBvcHRzLm1heEluc2VydFNpemUgIT09IHZvaWQgMCA/IG9wdHMubWF4SW5zZXJ0U2l6ZSA6IDJlNTsKICAgICAgICAgICAgICAgICAgICBjaHJJZCA9IF90aGlzLmNoclRvSW5kZXggJiYgX3RoaXMuY2hyVG9JbmRleFtjaHJdOwogICAgICAgICAgICAgICAgICAgIGlmIChjaHJJZCA+PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgY2h1bmtzID0gW107CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSAxMzsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgwLCBfYXdhaXRBc3luY0dlbmVyYXRvcjIuZGVmYXVsdCkoX3RoaXMuaW5kZXguYmxvY2tzRm9yUmFuZ2UoY2hySWQsIG1pbjIgLSAxLCBtYXgyLCBvcHRzKSk7CiAgICAgICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICAgICAgY2h1bmtzID0gX2NvbnRleHQ5LnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgaWYgKGNodW5rcykgewogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSAxMzsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkVycm9yIGluIGluZGV4IGZldGNoIik7CiAgICAgICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICAgICAgaTIgPSAwOwogICAgICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgICAgIGlmICghKGkyIDwgY2h1bmtzLmxlbmd0aCkpIHsKICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMjM7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSAxNzsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gKDAsIF9hd2FpdEFzeW5jR2VuZXJhdG9yMi5kZWZhdWx0KSgoMCwgX3V0aWwuYWJvcnRCcmVha1BvaW50KShvcHRzLnNpZ25hbCkpOwogICAgICAgICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgICAgICAgIHNpemUgPSBjaHVua3NbaTJdLmZldGNoZWRTaXplKCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKCEoc2l6ZSA+IF90aGlzLmNodW5rU2l6ZUxpbWl0KSkgewogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSAyMDsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKDAsIF9jb25jYXQuZGVmYXVsdCkoX2NvbnRleHQ2ID0gIlRvbyBtYW55IEJBTSBmZWF0dXJlcy4gQkFNIGNodW5rIHNpemUgIi5jb25jYXQoc2l6ZSwgIiBieXRlcyBleGNlZWRzIGNodW5rU2l6ZUxpbWl0IG9mICIpKS5jYWxsKF9jb250ZXh0NiwgX3RoaXMuY2h1bmtTaXplTGltaXQpKTsKICAgICAgICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgICAgICAgICBpMiArPSAxOwogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICAgICAgICAgICAgdG90YWxTaXplID0gKDAsIF9yZWR1Y2UuZGVmYXVsdCkoX2NvbnRleHQ3ID0gKDAsIF9tYXAuZGVmYXVsdCkoY2h1bmtzKS5jYWxsKGNodW5rcywgZnVuY3Rpb24ocykgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHMuZmV0Y2hlZFNpemUoKTsKICAgICAgICAgICAgICAgICAgICB9KSkuY2FsbChfY29udGV4dDcsIGZ1bmN0aW9uKGEsIGIpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhICsgYjsKICAgICAgICAgICAgICAgICAgICB9LCAwKTsKICAgICAgICAgICAgICAgICAgICBpZiAoISh0b3RhbFNpemUgPiBfdGhpcy5mZXRjaFNpemVMaW1pdCkpIHsKICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMjY7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCgwLCBfY29uY2F0LmRlZmF1bHQpKF9jb250ZXh0OCA9ICJkYXRhIHNpemUgb2YgIi5jb25jYXQodG90YWxTaXplLnRvTG9jYWxlU3RyaW5nKCksICIgYnl0ZXMgZXhjZWVkZWQgZmV0Y2ggc2l6ZSBsaW1pdCBvZiAiKSkuY2FsbChfY29udGV4dDgsIF90aGlzLmZldGNoU2l6ZUxpbWl0LnRvTG9jYWxlU3RyaW5nKCksICIgYnl0ZXMiKSk7CiAgICAgICAgICAgICAgICAgIGNhc2UgMjY6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5kZWxlZ2F0ZVlpZWxkKCgwLCBfYXN5bmNHZW5lcmF0b3JEZWxlZ2F0ZTIuZGVmYXVsdCkoKDAsIF9hc3luY0l0ZXJhdG9yMi5kZWZhdWx0KShfdGhpcy5fZmV0Y2hDaHVua0ZlYXR1cmVzKGNodW5rcywgY2hySWQsIG1pbjIsIG1heDIsIG9wdHMpKSwgX2F3YWl0QXN5bmNHZW5lcmF0b3IyLmRlZmF1bHQpLCAidDAiLCAyNyk7CiAgICAgICAgICAgICAgICAgIGNhc2UgMjc6CiAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlNSk7CiAgICAgICAgICB9KSkoKTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJfZmV0Y2hDaHVua0ZlYXR1cmVzIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2ZldGNoQ2h1bmtGZWF0dXJlcyhjaHVua3MsIGNocklkLCBtaW4yLCBtYXgyLCBvcHRzKSB7CiAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgICAgIHJldHVybiAoMCwgX3dyYXBBc3luY0dlbmVyYXRvcjIuZGVmYXVsdCkoLyogQF9fUFVSRV9fICovIF9yZWdlbmVyYXRvcjIuZGVmYXVsdC5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KCkgewogICAgICAgICAgICB2YXIgZmVhdFByb21pc2VzLCBkb25lLCBpMiwgYzIsIF95aWVsZCRfYXdhaXRBc3luY0dlbiwgZGF0YTIsIGNwb3NpdGlvbnMsIGRwb3NpdGlvbnMsIGNodW5rMiwgcHJvbWlzZTIsIF9pMjsKICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvcjIuZGVmYXVsdC53cmFwKGZ1bmN0aW9uIF9jYWxsZWU2JChfY29udGV4dDEwKSB7CiAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMC5wcmV2ID0gX2NvbnRleHQxMC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICBmZWF0UHJvbWlzZXMgPSBbXTsKICAgICAgICAgICAgICAgICAgICBkb25lID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgaTIgPSAwOwogICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgaWYgKCEoaTIgPCBjaHVua3MubGVuZ3RoKSkgewogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMjE7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgYzIgPSBjaHVua3NbaTJdOwogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgwLCBfYXdhaXRBc3luY0dlbmVyYXRvcjIuZGVmYXVsdCkoX3RoaXMyLmZlYXR1cmVDYWNoZS5nZXQoYzIudG9TdHJpbmcoKSwgewogICAgICAgICAgICAgICAgICAgICAgY2h1bms6IGMyLAogICAgICAgICAgICAgICAgICAgICAgb3B0cwogICAgICAgICAgICAgICAgICAgIH0sIG9wdHMuc2lnbmFsKSk7CiAgICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgICBfeWllbGQkX2F3YWl0QXN5bmNHZW4gPSBfY29udGV4dDEwLnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgZGF0YTIgPSBfeWllbGQkX2F3YWl0QXN5bmNHZW4uZGF0YTsKICAgICAgICAgICAgICAgICAgICBjcG9zaXRpb25zID0gX3lpZWxkJF9hd2FpdEFzeW5jR2VuLmNwb3NpdGlvbnM7CiAgICAgICAgICAgICAgICAgICAgZHBvc2l0aW9ucyA9IF95aWVsZCRfYXdhaXRBc3luY0dlbi5kcG9zaXRpb25zOwogICAgICAgICAgICAgICAgICAgIGNodW5rMiA9IF95aWVsZCRfYXdhaXRBc3luY0dlbi5jaHVuazsKICAgICAgICAgICAgICAgICAgICBwcm9taXNlMiA9IF90aGlzMi5yZWFkQmFtRmVhdHVyZXMoZGF0YTIsIGNwb3NpdGlvbnMsIGRwb3NpdGlvbnMsIGNodW5rMikudGhlbihmdW5jdGlvbihyZWNvcmRzKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVjcyA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IHJlY29yZHMubGVuZ3RoOyBfaSArPSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmZWF0dXJlID0gcmVjb3Jkc1tfaV07CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmZWF0dXJlLnNlcV9pZCgpID09PSBjaHJJZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmZWF0dXJlLmdldCgic3RhcnQiKSA+PSBtYXgyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZmVhdHVyZS5nZXQoImVuZCIpID49IG1pbjIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY3MucHVzaChmZWF0dXJlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWNzOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGZlYXRQcm9taXNlcy5wdXNoKHByb21pc2UyKTsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSAxNjsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gKDAsIF9hd2FpdEFzeW5jR2VuZXJhdG9yMi5kZWZhdWx0KShwcm9taXNlMik7CiAgICAgICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgICAgICAgaWYgKCFkb25lKSB7CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSAxODsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5hYnJ1cHQoImJyZWFrIiwgMjEpOwogICAgICAgICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgICAgICAgIGkyKys7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgICAgICAgICAoMCwgX3V0aWwuY2hlY2tBYm9ydFNpZ25hbCkob3B0cy5zaWduYWwpOwogICAgICAgICAgICAgICAgICAgIF9pMiA9IDA7CiAgICAgICAgICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICAgICAgICAgICAgaWYgKCEoX2kyIDwgZmVhdFByb21pc2VzLmxlbmd0aCkpIHsKICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDI5OwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDI2OwogICAgICAgICAgICAgICAgICAgIHJldHVybiBmZWF0UHJvbWlzZXNbX2kyXTsKICAgICAgICAgICAgICAgICAgY2FzZSAyNjoKICAgICAgICAgICAgICAgICAgICBfaTIrKzsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSAyMzsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgY2FzZSAyOToKICAgICAgICAgICAgICAgICAgICAoMCwgX3V0aWwuY2hlY2tBYm9ydFNpZ25hbCkob3B0cy5zaWduYWwpOwogICAgICAgICAgICAgICAgICAgIGlmICghb3B0cy52aWV3QXNQYWlycykgewogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMzM7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMzM7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5mZXRjaFBhaXJzKGNocklkLCBmZWF0UHJvbWlzZXMsIG9wdHMpOwogICAgICAgICAgICAgICAgICBjYXNlIDMzOgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLnN0b3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIF9jYWxsZWU2KTsKICAgICAgICAgIH0pKSgpOwogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIGtleTogImZldGNoUGFpcnMiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbigpIHsKICAgICAgICAgIHZhciBfZmV0Y2hQYWlycyA9ICgwLCBfYXN5bmNUb0dlbmVyYXRvcjIyLmRlZmF1bHQpKC8qIEBfX1BVUkVfXyAqLyBfcmVnZW5lcmF0b3IyLmRlZmF1bHQubWFyayhmdW5jdGlvbiBfY2FsbGVlMTAoY2hySWQsIGZlYXRQcm9taXNlcywgb3B0cykgewogICAgICAgICAgICB2YXIgX3RoaXMzID0gdGhpcywgX2NvbnRleHQxNCwgX2NvbnRleHQxNTsKICAgICAgICAgICAgdmFyIHVubWF0ZWRQYWlycywgcmVhZElkcywgbWF0ZVByb21pc2VzLCBtYXRlQmxvY2tzLCBtYXRlQ2h1bmtzLCBpMiwgbWF0ZVRvdGFsU2l6ZSwgX2NvbnRleHQxNiwgbWF0ZUZlYXRQcm9taXNlcywgbmV3TWF0ZUZlYXRzLCBmZWF0dXJlc1JldCwgbmV3TWF0ZXM7CiAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3IyLmRlZmF1bHQud3JhcChmdW5jdGlvbiBfY2FsbGVlMTAkKF9jb250ZXh0MTgpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDE4LnByZXYgPSBfY29udGV4dDE4Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIHVubWF0ZWRQYWlycyA9IHt9OwogICAgICAgICAgICAgICAgICAgIHJlYWRJZHMgPSB7fTsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDE4Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgICAgIHJldHVybiBfcHJvbWlzZS5kZWZhdWx0LmFsbCgoMCwgX21hcC5kZWZhdWx0KShmZWF0UHJvbWlzZXMpLmNhbGwoZmVhdFByb21pc2VzLCAvKiBAX19QVVJFX18gKi8gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgX3JlZjIgPSAoMCwgX2FzeW5jVG9HZW5lcmF0b3IyMi5kZWZhdWx0KSgvKiBAX19QVVJFX18gKi8gX3JlZ2VuZXJhdG9yMi5kZWZhdWx0Lm1hcmsoZnVuY3Rpb24gX2NhbGxlZTcoZikgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2NvbnRleHQxMTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJldCwgcmVhZE5hbWVzLCBpMywgbmFtZSwgaWQyOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yMi5kZWZhdWx0LndyYXAoZnVuY3Rpb24gX2NhbGxlZTckKF9jb250ZXh0MTIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEyLnByZXYgPSBfY29udGV4dDEyLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTIubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXQgPSBfY29udGV4dDEyLnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE5hbWVzID0ge307CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpMyA9IDA7IGkzIDwgcmV0Lmxlbmd0aDsgaTMrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9IHJldFtpM10ubmFtZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQyID0gcmV0W2kzXS5pZCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZWFkTmFtZXNbbmFtZV0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE5hbWVzW25hbWVdID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWROYW1lc1tuYW1lXSsrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZElkc1tpZDJdID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKDAsIF9mb3JFYWNoLmRlZmF1bHQpKF9jb250ZXh0MTEgPSAoMCwgX29iamVjdC5kZWZhdWx0KShyZWFkTmFtZXMpKS5jYWxsKF9jb250ZXh0MTEsIGZ1bmN0aW9uKF9yZWYzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3JlZjQgPSAoMCwgX3NsaWNlZFRvQXJyYXkyMi5kZWZhdWx0KShfcmVmMywgMiksIGsgPSBfcmVmNFswXSwgdiA9IF9yZWY0WzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYgPT09IDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5tYXRlZFBhaXJzW2tdID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEyLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWU3KTsKICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihfeDkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH0oKSkpOwogICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgbWF0ZVByb21pc2VzID0gW107CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxOC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3Byb21pc2UuZGVmYXVsdC5hbGwoKDAsIF9tYXAuZGVmYXVsdCkoZmVhdFByb21pc2VzKS5jYWxsKGZlYXRQcm9taXNlcywgLyogQF9fUFVSRV9fICovIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIF9yZWY1ID0gKDAsIF9hc3luY1RvR2VuZXJhdG9yMjIuZGVmYXVsdCkoLyogQF9fUFVSRV9fICovIF9yZWdlbmVyYXRvcjIuZGVmYXVsdC5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU4KGYpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJldCwgaTMsIG5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3IyLmRlZmF1bHQud3JhcChmdW5jdGlvbiBfY2FsbGVlOCQoX2NvbnRleHQxMykgewogICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTMucHJldiA9IF9jb250ZXh0MTMubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMy5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldCA9IF9jb250ZXh0MTMuc2VudDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGkzID0gMDsgaTMgPCByZXQubGVuZ3RoOyBpMysrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lID0gcmV0W2kzXS5uYW1lKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodW5tYXRlZFBhaXJzW25hbWVdICYmIChvcHRzLnBhaXJBY3Jvc3NDaHIgfHwgcmV0W2kzXS5fbmV4dF9yZWZpZCgpID09PSBjaHJJZCAmJiBNYXRoLmFicyhyZXRbaTNdLmdldCgic3RhcnQiKSAtIHJldFtpM10uX25leHRfcG9zKCkpIDwgKG9wdHMubWF4SW5zZXJ0U2l6ZSB8fCAyZTUpKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRlUHJvbWlzZXMucHVzaChfdGhpczMuaW5kZXguYmxvY2tzRm9yUmFuZ2UocmV0W2kzXS5fbmV4dF9yZWZpZCgpLCByZXRbaTNdLl9uZXh0X3BvcygpLCByZXRbaTNdLl9uZXh0X3BvcygpICsgMSwgb3B0cykpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEzLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWU4KTsKICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihfeDEwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmNS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9KCkpKTsKICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTgubmV4dCA9IDk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9wcm9taXNlLmRlZmF1bHQuYWxsKG1hdGVQcm9taXNlcyk7CiAgICAgICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgICAgICBtYXRlQmxvY2tzID0gX2NvbnRleHQxOC5zZW50OwogICAgICAgICAgICAgICAgICAgIG1hdGVDaHVua3MgPSBbXTsKICAgICAgICAgICAgICAgICAgICBmb3IgKGkyID0gMDsgaTIgPCBtYXRlQmxvY2tzLmxlbmd0aDsgaTIrKykgewogICAgICAgICAgICAgICAgICAgICAgbWF0ZUNodW5rcyA9ICgwLCBfY29uY2F0LmRlZmF1bHQpKG1hdGVDaHVua3MpLmNhbGwobWF0ZUNodW5rcywgbWF0ZUJsb2Nrc1tpMl0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBtYXRlQ2h1bmtzID0gKDAsIF9maWx0ZXIuZGVmYXVsdCkoX2NvbnRleHQxNCA9ICgwLCBfc29ydC5kZWZhdWx0KShtYXRlQ2h1bmtzKS5jYWxsKG1hdGVDaHVua3MpKS5jYWxsKF9jb250ZXh0MTQsIGZ1bmN0aW9uKGl0ZW0sIHBvcywgYXJ5KSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIXBvcyB8fCBpdGVtLnRvU3RyaW5nKCkgIT09IGFyeVtwb3MgLSAxXS50b1N0cmluZygpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIG1hdGVUb3RhbFNpemUgPSAoMCwgX3JlZHVjZS5kZWZhdWx0KShfY29udGV4dDE1ID0gKDAsIF9tYXAuZGVmYXVsdCkobWF0ZUNodW5rcykuY2FsbChtYXRlQ2h1bmtzLCBmdW5jdGlvbihzKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcy5mZXRjaGVkU2l6ZSgpOwogICAgICAgICAgICAgICAgICAgIH0pKS5jYWxsKF9jb250ZXh0MTUsIGZ1bmN0aW9uKGEsIGIpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhICsgYjsKICAgICAgICAgICAgICAgICAgICB9LCAwKTsKICAgICAgICAgICAgICAgICAgICBpZiAoIShtYXRlVG90YWxTaXplID4gdGhpcy5mZXRjaFNpemVMaW1pdCkpIHsKICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTgubmV4dCA9IDE2OwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigoMCwgX2NvbmNhdC5kZWZhdWx0KShfY29udGV4dDE2ID0gImRhdGEgc2l6ZSBvZiAiLmNvbmNhdChtYXRlVG90YWxTaXplLnRvTG9jYWxlU3RyaW5nKCksICIgYnl0ZXMgZXhjZWVkZWQgZmV0Y2ggc2l6ZSBsaW1pdCBvZiAiKSkuY2FsbChfY29udGV4dDE2LCB0aGlzLmZldGNoU2l6ZUxpbWl0LnRvTG9jYWxlU3RyaW5nKCksICIgYnl0ZXMiKSk7CiAgICAgICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgICAgICAgbWF0ZUZlYXRQcm9taXNlcyA9ICgwLCBfbWFwLmRlZmF1bHQpKG1hdGVDaHVua3MpLmNhbGwobWF0ZUNodW5rcywgLyogQF9fUFVSRV9fICovIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIF9yZWY2ID0gKDAsIF9hc3luY1RvR2VuZXJhdG9yMjIuZGVmYXVsdCkoLyogQF9fUFVSRV9fICovIF9yZWdlbmVyYXRvcjIuZGVmYXVsdC5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU5KGMyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfeWllbGQkX3RoaXMzJGZlYXR1cmUsIGRhdGEyLCBjcG9zaXRpb25zLCBkcG9zaXRpb25zLCBjaHVuazIsIGZlYXRzLCBtYXRlUmVjcywgX2kzLCBmZWF0dXJlOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yMi5kZWZhdWx0LndyYXAoZnVuY3Rpb24gX2NhbGxlZTkkKF9jb250ZXh0MTcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDE3LnByZXYgPSBfY29udGV4dDE3Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTcubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMy5mZWF0dXJlQ2FjaGUuZ2V0KGMyLnRvU3RyaW5nKCksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rOiBjMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdHMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBvcHRzLnNpZ25hbCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfeWllbGQkX3RoaXMzJGZlYXR1cmUgPSBfY29udGV4dDE3LnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTIgPSBfeWllbGQkX3RoaXMzJGZlYXR1cmUuZGF0YTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcG9zaXRpb25zID0gX3lpZWxkJF90aGlzMyRmZWF0dXJlLmNwb3NpdGlvbnM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHBvc2l0aW9ucyA9IF95aWVsZCRfdGhpczMkZmVhdHVyZS5kcG9zaXRpb25zOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rMiA9IF95aWVsZCRfdGhpczMkZmVhdHVyZS5jaHVuazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDE3Lm5leHQgPSA5OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczMucmVhZEJhbUZlYXR1cmVzKGRhdGEyLCBjcG9zaXRpb25zLCBkcG9zaXRpb25zLCBjaHVuazIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHMgPSBfY29udGV4dDE3LnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZVJlY3MgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKF9pMyA9IDA7IF9pMyA8IGZlYXRzLmxlbmd0aDsgX2kzICs9IDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmUgPSBmZWF0c1tfaTNdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVubWF0ZWRQYWlyc1tmZWF0dXJlLmdldCgibmFtZSIpXSAmJiAhcmVhZElkc1tmZWF0dXJlLmlkKCldKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVSZWNzLnB1c2goZmVhdHVyZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE3LmFicnVwdCgicmV0dXJuIiwgbWF0ZVJlY3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE3LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWU5KTsKICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihfeDExKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmNi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9KCkpOwogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTgubmV4dCA9IDE5OwogICAgICAgICAgICAgICAgICAgIHJldHVybiBfcHJvbWlzZS5kZWZhdWx0LmFsbChtYXRlRmVhdFByb21pc2VzKTsKICAgICAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICAgICAgICBuZXdNYXRlRmVhdHMgPSBfY29udGV4dDE4LnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZXNSZXQgPSBbXTsKICAgICAgICAgICAgICAgICAgICBpZiAobmV3TWF0ZUZlYXRzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgbmV3TWF0ZXMgPSAoMCwgX3JlZHVjZS5kZWZhdWx0KShuZXdNYXRlRmVhdHMpLmNhbGwobmV3TWF0ZUZlYXRzLCBmdW5jdGlvbihyZXN1bHQsIGN1cnJlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgwLCBfY29uY2F0LmRlZmF1bHQpKHJlc3VsdCkuY2FsbChyZXN1bHQsIGN1cnJlbnQpOwogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlc1JldCA9ICgwLCBfY29uY2F0LmRlZmF1bHQpKGZlYXR1cmVzUmV0KS5jYWxsKGZlYXR1cmVzUmV0LCBuZXdNYXRlcyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE4LmFicnVwdCgicmV0dXJuIiwgZmVhdHVyZXNSZXQpOwogICAgICAgICAgICAgICAgICBjYXNlIDIzOgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE4LnN0b3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIF9jYWxsZWUxMCwgdGhpcyk7CiAgICAgICAgICB9KSk7CiAgICAgICAgICBmdW5jdGlvbiBmZXRjaFBhaXJzKF94NiwgX3g3LCBfeDgpIHsKICAgICAgICAgICAgcmV0dXJuIF9mZXRjaFBhaXJzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZmV0Y2hQYWlyczsKICAgICAgICB9KCkKICAgICAgfSwgewogICAgICAgIGtleTogIl9yZWFkQ2h1bmsiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbigpIHsKICAgICAgICAgIHZhciBfcmVhZENodW5rMiA9ICgwLCBfYXN5bmNUb0dlbmVyYXRvcjIyLmRlZmF1bHQpKC8qIEBfX1BVUkVfXyAqLyBfcmVnZW5lcmF0b3IyLmRlZmF1bHQubWFyayhmdW5jdGlvbiBfY2FsbGVlMTEoX3JlZjcsIGFib3J0U2lnbmFsKSB7CiAgICAgICAgICAgIHZhciBjaHVuazIsIG9wdHMsIGMyLCBidWZzaXplLCByZXMsIGJ5dGVzUmVhZCwgYnVmZmVyMiwgX3lpZWxkJHVuemlwQ2h1bmtTbGljLCBkYXRhMiwgY3Bvc2l0aW9ucywgZHBvc2l0aW9uczsKICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvcjIuZGVmYXVsdC53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMSQoX2NvbnRleHQxOSkgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTkucHJldiA9IF9jb250ZXh0MTkubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgY2h1bmsyID0gX3JlZjcuY2h1bmssIG9wdHMgPSBfcmVmNy5vcHRzOwogICAgICAgICAgICAgICAgICAgIGMyID0gY2h1bmsyOwogICAgICAgICAgICAgICAgICAgIGJ1ZnNpemUgPSBjMi5mZXRjaGVkU2l6ZSgpOwogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTkubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYmFtLnJlYWQoQnVmZmVyLmFsbG9jKGJ1ZnNpemUpLCAwLCBidWZzaXplLCBjMi5taW52LmJsb2NrUG9zaXRpb24sIG9wdHMpOwogICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQxOS5zZW50OwogICAgICAgICAgICAgICAgICAgIGJ5dGVzUmVhZCA9IHJlcy5ieXRlc1JlYWQ7CiAgICAgICAgICAgICAgICAgICAgYnVmZmVyMiA9IHJlcy5idWZmZXI7CiAgICAgICAgICAgICAgICAgICAgKDAsIF91dGlsLmNoZWNrQWJvcnRTaWduYWwpKGFib3J0U2lnbmFsKTsKICAgICAgICAgICAgICAgICAgICBpZiAoYnl0ZXNSZWFkKSB7CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDE5Lm5leHQgPSAxMTsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxOS5hYnJ1cHQoInJldHVybiIsIFtdKTsKICAgICAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgICAgICBpZiAoYnl0ZXNSZWFkIDwgYnVmc2l6ZSkgewogICAgICAgICAgICAgICAgICAgICAgYnVmZmVyMiA9ICgwLCBfc2xpY2UuZGVmYXVsdCkoYnVmZmVyMikuY2FsbChidWZmZXIyLCAwLCBieXRlc1JlYWQpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICBidWZmZXIyID0gKDAsIF9zbGljZS5kZWZhdWx0KShidWZmZXIyKS5jYWxsKGJ1ZmZlcjIsIDAsIGJ1ZnNpemUpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBfY29udGV4dDE5Lm5leHQgPSAxNDsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gKDAsIF9iZ3pmRmlsZWhhbmRsZS51bnppcENodW5rU2xpY2UpKGJ1ZmZlcjIsIGNodW5rMik7CiAgICAgICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICAgICAgX3lpZWxkJHVuemlwQ2h1bmtTbGljID0gX2NvbnRleHQxOS5zZW50OwogICAgICAgICAgICAgICAgICAgIGRhdGEyID0gX3lpZWxkJHVuemlwQ2h1bmtTbGljLmJ1ZmZlcjsKICAgICAgICAgICAgICAgICAgICBjcG9zaXRpb25zID0gX3lpZWxkJHVuemlwQ2h1bmtTbGljLmNwb3NpdGlvbnM7CiAgICAgICAgICAgICAgICAgICAgZHBvc2l0aW9ucyA9IF95aWVsZCR1bnppcENodW5rU2xpYy5kcG9zaXRpb25zOwogICAgICAgICAgICAgICAgICAgICgwLCBfdXRpbC5jaGVja0Fib3J0U2lnbmFsKShhYm9ydFNpZ25hbCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTkuYWJydXB0KCJyZXR1cm4iLCB7CiAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhMiwKICAgICAgICAgICAgICAgICAgICAgIGNwb3NpdGlvbnMsCiAgICAgICAgICAgICAgICAgICAgICBkcG9zaXRpb25zLAogICAgICAgICAgICAgICAgICAgICAgY2h1bms6IGNodW5rMgogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE5LnN0b3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIF9jYWxsZWUxMSwgdGhpcyk7CiAgICAgICAgICB9KSk7CiAgICAgICAgICBmdW5jdGlvbiBfcmVhZENodW5rKF94MTIsIF94MTMpIHsKICAgICAgICAgICAgcmV0dXJuIF9yZWFkQ2h1bmsyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gX3JlYWRDaHVuazsKICAgICAgICB9KCkKICAgICAgfSwgewogICAgICAgIGtleTogInJlYWRCYW1GZWF0dXJlcyIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgdmFyIF9yZWFkQmFtRmVhdHVyZXMgPSAoMCwgX2FzeW5jVG9HZW5lcmF0b3IyMi5kZWZhdWx0KSgvKiBAX19QVVJFX18gKi8gX3JlZ2VuZXJhdG9yMi5kZWZhdWx0Lm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEyKGJhLCBjcG9zaXRpb25zLCBkcG9zaXRpb25zLCBjaHVuazIpIHsKICAgICAgICAgICAgdmFyIGJsb2NrU3RhcnQsIHNpbmssIHBvcywgbGFzdDIsIGJsb2NrU2l6ZSwgYmxvY2tFbmQsIGZlYXR1cmU7CiAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3IyLmRlZmF1bHQud3JhcChmdW5jdGlvbiBfY2FsbGVlMTIkKF9jb250ZXh0MjApIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIwLnByZXYgPSBfY29udGV4dDIwLm5leHQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIGJsb2NrU3RhcnQgPSAwOwogICAgICAgICAgICAgICAgICAgIHNpbmsgPSBbXTsKICAgICAgICAgICAgICAgICAgICBwb3MgPSAwOwogICAgICAgICAgICAgICAgICAgIGxhc3QyID0gKygwLCBfbm93LmRlZmF1bHQpKCk7CiAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICBpZiAoIShibG9ja1N0YXJ0ICsgNCA8IGJhLmxlbmd0aCkpIHsKICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MjAubmV4dCA9IDE4OwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGJsb2NrU2l6ZSA9IGJhLnJlYWRJbnQzMkxFKGJsb2NrU3RhcnQpOwogICAgICAgICAgICAgICAgICAgIGJsb2NrRW5kID0gYmxvY2tTdGFydCArIDQgKyBibG9ja1NpemUgLSAxOwogICAgICAgICAgICAgICAgICAgIGlmIChkcG9zaXRpb25zKSB7CiAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoYmxvY2tTdGFydCArIGNodW5rMi5taW52LmRhdGFQb3NpdGlvbiA+PSBkcG9zaXRpb25zW3BvcysrXSkgewogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgcG9zLS07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmICghKGJsb2NrRW5kIDwgYmEubGVuZ3RoKSkgewogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyMC5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZSA9IG5ldyBfcmVjb3JkLmRlZmF1bHQoewogICAgICAgICAgICAgICAgICAgICAgYnl0ZXM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgYnl0ZUFycmF5OiBiYSwKICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IGJsb2NrU3RhcnQsCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogYmxvY2tFbmQKICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICBmaWxlT2Zmc2V0OiBjcG9zaXRpb25zID8gY3Bvc2l0aW9uc1twb3NdICogKDEgPDwgOCkgKyAoYmxvY2tTdGFydCAtIGRwb3NpdGlvbnNbcG9zXSkgKyBjaHVuazIubWludi5kYXRhUG9zaXRpb24gKyAxIDogX2J1ZmZlckNyYy5kZWZhdWx0LnNpZ25lZCgoMCwgX3NsaWNlLmRlZmF1bHQpKGJhKS5jYWxsKGJhLCBibG9ja1N0YXJ0LCBibG9ja0VuZCkpCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgc2luay5wdXNoKGZlYXR1cmUpOwogICAgICAgICAgICAgICAgICAgIGlmICghKHRoaXMueWllbGRUaHJlYWRUaW1lICYmICsoMCwgX25vdy5kZWZhdWx0KSgpIC0gbGFzdDIgPiB0aGlzLnlpZWxkVGhyZWFkVGltZSkpIHsKICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MjAubmV4dCA9IDE1OwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MjAubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgICAgIHJldHVybiAoMCwgX3V0aWwudGltZW91dCkoMSk7CiAgICAgICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICAgICAgbGFzdDIgPSArKDAsIF9ub3cuZGVmYXVsdCkoKTsKICAgICAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICAgICAgICBibG9ja1N0YXJ0ID0gYmxvY2tFbmQgKyAxOwogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MjAubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjAuYWJydXB0KCJyZXR1cm4iLCBzaW5rKTsKICAgICAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMC5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlMTIsIHRoaXMpOwogICAgICAgICAgfSkpOwogICAgICAgICAgZnVuY3Rpb24gcmVhZEJhbUZlYXR1cmVzKF94MTQsIF94MTUsIF94MTYsIF94MTcpIHsKICAgICAgICAgICAgcmV0dXJuIF9yZWFkQmFtRmVhdHVyZXMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiByZWFkQmFtRmVhdHVyZXM7CiAgICAgICAgfSgpCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJoYXNSZWZTZXEiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbigpIHsKICAgICAgICAgIHZhciBfaGFzUmVmU2VxID0gKDAsIF9hc3luY1RvR2VuZXJhdG9yMjIuZGVmYXVsdCkoLyogQF9fUFVSRV9fICovIF9yZWdlbmVyYXRvcjIuZGVmYXVsdC5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMyhzZXFOYW1lKSB7CiAgICAgICAgICAgIHZhciByZWZJZDsKICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvcjIuZGVmYXVsdC53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMyQoX2NvbnRleHQyMSkgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MjEucHJldiA9IF9jb250ZXh0MjEubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgcmVmSWQgPSB0aGlzLmNoclRvSW5kZXggJiYgdGhpcy5jaHJUb0luZGV4W3NlcU5hbWVdOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIxLmFicnVwdCgicmV0dXJuIiwgdGhpcy5pbmRleC5oYXNSZWZTZXEocmVmSWQpKTsKICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIxLnN0b3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIF9jYWxsZWUxMywgdGhpcyk7CiAgICAgICAgICB9KSk7CiAgICAgICAgICBmdW5jdGlvbiBoYXNSZWZTZXEoX3gxOCkgewogICAgICAgICAgICByZXR1cm4gX2hhc1JlZlNlcS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGhhc1JlZlNlcTsKICAgICAgICB9KCkKICAgICAgfSwgewogICAgICAgIGtleTogImxpbmVDb3VudCIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgdmFyIF9saW5lQ291bnQgPSAoMCwgX2FzeW5jVG9HZW5lcmF0b3IyMi5kZWZhdWx0KSgvKiBAX19QVVJFX18gKi8gX3JlZ2VuZXJhdG9yMi5kZWZhdWx0Lm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE0KHNlcU5hbWUpIHsKICAgICAgICAgICAgdmFyIHJlZklkOwogICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yMi5kZWZhdWx0LndyYXAoZnVuY3Rpb24gX2NhbGxlZTE0JChfY29udGV4dDIyKSB7CiAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyMi5wcmV2ID0gX2NvbnRleHQyMi5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICByZWZJZCA9IHRoaXMuY2hyVG9JbmRleCAmJiB0aGlzLmNoclRvSW5kZXhbc2VxTmFtZV07CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjIuYWJydXB0KCJyZXR1cm4iLCB0aGlzLmluZGV4LmxpbmVDb3VudChyZWZJZCkpOwogICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjIuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZTE0LCB0aGlzKTsKICAgICAgICAgIH0pKTsKICAgICAgICAgIGZ1bmN0aW9uIGxpbmVDb3VudChfeDE5KSB7CiAgICAgICAgICAgIHJldHVybiBfbGluZUNvdW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gbGluZUNvdW50OwogICAgICAgIH0oKQogICAgICB9LCB7CiAgICAgICAga2V5OiAiaW5kZXhDb3YiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbigpIHsKICAgICAgICAgIHZhciBfaW5kZXhDb3YgPSAoMCwgX2FzeW5jVG9HZW5lcmF0b3IyMi5kZWZhdWx0KSgvKiBAX19QVVJFX18gKi8gX3JlZ2VuZXJhdG9yMi5kZWZhdWx0Lm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE1KHNlcU5hbWUsIHN0YXJ0LCBlbmQpIHsKICAgICAgICAgICAgdmFyIHNlcUlkOwogICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yMi5kZWZhdWx0LndyYXAoZnVuY3Rpb24gX2NhbGxlZTE1JChfY29udGV4dDIzKSB7CiAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyMy5wcmV2ID0gX2NvbnRleHQyMy5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIzLm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmluZGV4LnBhcnNlKCk7CiAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICBzZXFJZCA9IHRoaXMuY2hyVG9JbmRleCAmJiB0aGlzLmNoclRvSW5kZXhbc2VxTmFtZV07CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjMuYWJydXB0KCJyZXR1cm4iLCB0aGlzLmluZGV4LmluZGV4Q292KHNlcUlkLCBzdGFydCwgZW5kKSk7CiAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMy5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlMTUsIHRoaXMpOwogICAgICAgICAgfSkpOwogICAgICAgICAgZnVuY3Rpb24gaW5kZXhDb3YoX3gyMCwgX3gyMSwgX3gyMikgewogICAgICAgICAgICByZXR1cm4gX2luZGV4Q292LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gaW5kZXhDb3Y7CiAgICAgICAgfSgpCiAgICAgIH1dKTsKICAgICAgcmV0dXJuIEJhbUZpbGUyOwogICAgfSgpOwogICAgZXhwb3J0cy5kZWZhdWx0ID0gQmFtRmlsZTsKICB9KShiYW1GaWxlKTsKICB2YXIgaHRzZ2V0ID0ge307CiAgdmFyIG9iamVjdFdpdGhvdXRQcm9wZXJ0aWVzID0geyBleHBvcnRzOiB7fSB9OwogIHZhciBwYXJlbnQkNCA9IGdldE93blByb3BlcnR5U3ltYm9scyQzOwogIHZhciBnZXRPd25Qcm9wZXJ0eVN5bWJvbHMkMSA9IHBhcmVudCQ0OwogIHZhciBnZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPSBnZXRPd25Qcm9wZXJ0eVN5bWJvbHMkMTsKICB2YXIgJCQxID0gX2V4cG9ydDsKICB2YXIgJGluZGV4T2YgPSBhcnJheUluY2x1ZGVzLmluZGV4T2Y7CiAgdmFyIGFycmF5TWV0aG9kSXNTdHJpY3QgPSBhcnJheU1ldGhvZElzU3RyaWN0JDQ7CiAgdmFyIG5hdGl2ZUluZGV4T2YgPSBbXS5pbmRleE9mOwogIHZhciBORUdBVElWRV9aRVJPID0gISFuYXRpdmVJbmRleE9mICYmIDEgLyBbMV0uaW5kZXhPZigxLCAtMCkgPCAwOwogIHZhciBTVFJJQ1RfTUVUSE9EID0gYXJyYXlNZXRob2RJc1N0cmljdCgiaW5kZXhPZiIpOwogICQkMSh7IHRhcmdldDogIkFycmF5IiwgcHJvdG86IHRydWUsIGZvcmNlZDogTkVHQVRJVkVfWkVSTyB8fCAhU1RSSUNUX01FVEhPRCB9LCB7CiAgICBpbmRleE9mOiBmdW5jdGlvbiBpbmRleE9mMihzZWFyY2hFbGVtZW50KSB7CiAgICAgIHJldHVybiBORUdBVElWRV9aRVJPID8gbmF0aXZlSW5kZXhPZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IDAgOiAkaW5kZXhPZih0aGlzLCBzZWFyY2hFbGVtZW50LCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHZvaWQgMCk7CiAgICB9CiAgfSk7CiAgdmFyIGVudHJ5VmlydHVhbCQxID0gZW50cnlWaXJ0dWFsJGE7CiAgdmFyIGluZGV4T2YkNCA9IGVudHJ5VmlydHVhbCQxKCJBcnJheSIpLmluZGV4T2Y7CiAgdmFyIGluZGV4T2YkMyA9IGluZGV4T2YkNDsKICB2YXIgQXJyYXlQcm90b3R5cGUgPSBBcnJheS5wcm90b3R5cGU7CiAgdmFyIGluZGV4T2ZfMSA9IGZ1bmN0aW9uKGl0KSB7CiAgICB2YXIgb3duID0gaXQuaW5kZXhPZjsKICAgIHJldHVybiBpdCA9PT0gQXJyYXlQcm90b3R5cGUgfHwgaXQgaW5zdGFuY2VvZiBBcnJheSAmJiBvd24gPT09IEFycmF5UHJvdG90eXBlLmluZGV4T2YgPyBpbmRleE9mJDMgOiBvd247CiAgfTsKICB2YXIgcGFyZW50JDMgPSBpbmRleE9mXzE7CiAgdmFyIGluZGV4T2YkMiA9IHBhcmVudCQzOwogIHZhciBwYXJlbnQkMiA9IGluZGV4T2YkMjsKICB2YXIgaW5kZXhPZiQxID0gcGFyZW50JDI7CiAgdmFyIGluZGV4T2YgPSBpbmRleE9mJDE7CiAgdmFyIG9iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UgPSB7IGV4cG9ydHM6IHt9IH07CiAgdmFyIHBhcmVudCQxID0ga2V5cyQzOwogIHZhciBrZXlzJDEgPSBwYXJlbnQkMTsKICB2YXIga2V5cyA9IGtleXMkMTsKICAoZnVuY3Rpb24obW9kdWxlKSB7CiAgICB2YXIgX09iamVjdCRrZXlzID0ga2V5czsKICAgIHZhciBfaW5kZXhPZkluc3RhbmNlUHJvcGVydHkgPSBpbmRleE9mOwogICAgZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCkgewogICAgICBpZiAoc291cmNlID09IG51bGwpCiAgICAgICAgcmV0dXJuIHt9OwogICAgICB2YXIgdGFyZ2V0ID0ge307CiAgICAgIHZhciBzb3VyY2VLZXlzID0gX09iamVjdCRrZXlzKHNvdXJjZSk7CiAgICAgIHZhciBrZXksIGkyOwogICAgICBmb3IgKGkyID0gMDsgaTIgPCBzb3VyY2VLZXlzLmxlbmd0aDsgaTIrKykgewogICAgICAgIGtleSA9IHNvdXJjZUtleXNbaTJdOwogICAgICAgIGlmIChfaW5kZXhPZkluc3RhbmNlUHJvcGVydHkoZXhjbHVkZWQpLmNhbGwoZXhjbHVkZWQsIGtleSkgPj0gMCkKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07CiAgICAgIH0KICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIG1vZHVsZS5leHBvcnRzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2U7CiAgICBtb2R1bGUuZXhwb3J0c1siZGVmYXVsdCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwogIH0pKG9iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UpOwogIChmdW5jdGlvbihtb2R1bGUpIHsKICAgIHZhciBfT2JqZWN0JGdldE93blByb3BlcnR5U3ltYm9scyA9IGdldE93blByb3BlcnR5U3ltYm9sczsKICAgIHZhciBfaW5kZXhPZkluc3RhbmNlUHJvcGVydHkgPSBpbmRleE9mOwogICAgdmFyIG9iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UkMSA9IG9iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UuZXhwb3J0czsKICAgIGZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhzb3VyY2UsIGV4Y2x1ZGVkKSB7CiAgICAgIGlmIChzb3VyY2UgPT0gbnVsbCkKICAgICAgICByZXR1cm4ge307CiAgICAgIHZhciB0YXJnZXQgPSBvYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlJDEoc291cmNlLCBleGNsdWRlZCk7CiAgICAgIHZhciBrZXksIGkyOwogICAgICBpZiAoX09iamVjdCRnZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgICAgICB2YXIgc291cmNlU3ltYm9sS2V5cyA9IF9PYmplY3QkZ2V0T3duUHJvcGVydHlTeW1ib2xzKHNvdXJjZSk7CiAgICAgICAgZm9yIChpMiA9IDA7IGkyIDwgc291cmNlU3ltYm9sS2V5cy5sZW5ndGg7IGkyKyspIHsKICAgICAgICAgIGtleSA9IHNvdXJjZVN5bWJvbEtleXNbaTJdOwogICAgICAgICAgaWYgKF9pbmRleE9mSW5zdGFuY2VQcm9wZXJ0eShleGNsdWRlZCkuY2FsbChleGNsdWRlZCwga2V5KSA+PSAwKQogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHNvdXJjZSwga2V5KSkKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgbW9kdWxlLmV4cG9ydHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXM7CiAgICBtb2R1bGUuZXhwb3J0c1siZGVmYXVsdCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwogIH0pKG9iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKTsKICB2YXIgaXNPYmplY3QgPSBpc09iamVjdCRpOwogIHZhciBjbGFzc29mID0gY2xhc3NvZlJhdyQxOwogIHZhciB3ZWxsS25vd25TeW1ib2wkMSA9IHdlbGxLbm93blN5bWJvbCRsOwogIHZhciBNQVRDSCQxID0gd2VsbEtub3duU3ltYm9sJDEoIm1hdGNoIik7CiAgdmFyIGlzUmVnZXhwID0gZnVuY3Rpb24oaXQpIHsKICAgIHZhciBpc1JlZ0V4cDI7CiAgICByZXR1cm4gaXNPYmplY3QoaXQpICYmICgoaXNSZWdFeHAyID0gaXRbTUFUQ0gkMV0pICE9PSB2b2lkIDAgPyAhIWlzUmVnRXhwMiA6IGNsYXNzb2YoaXQpID09ICJSZWdFeHAiKTsKICB9OwogIHZhciBpc1JlZ0V4cCA9IGlzUmVnZXhwOwogIHZhciBub3RBUmVnZXhwID0gZnVuY3Rpb24oaXQpIHsKICAgIGlmIChpc1JlZ0V4cChpdCkpIHsKICAgICAgdGhyb3cgVHlwZUVycm9yKCJUaGUgbWV0aG9kIGRvZXNuJ3QgYWNjZXB0IHJlZ3VsYXIgZXhwcmVzc2lvbnMiKTsKICAgIH0KICAgIHJldHVybiBpdDsKICB9OwogIHZhciB3ZWxsS25vd25TeW1ib2wgPSB3ZWxsS25vd25TeW1ib2wkbDsKICB2YXIgTUFUQ0ggPSB3ZWxsS25vd25TeW1ib2woIm1hdGNoIik7CiAgdmFyIGNvcnJlY3RJc1JlZ2V4cExvZ2ljID0gZnVuY3Rpb24oTUVUSE9EX05BTUUpIHsKICAgIHZhciByZWdleHAgPSAvLi87CiAgICB0cnkgewogICAgICAiLy4vIltNRVRIT0RfTkFNRV0ocmVnZXhwKTsKICAgIH0gY2F0Y2ggKGVycm9yMSkgewogICAgICB0cnkgewogICAgICAgIHJlZ2V4cFtNQVRDSF0gPSBmYWxzZTsKICAgICAgICByZXR1cm4gIi8uLyJbTUVUSE9EX05BTUVdKHJlZ2V4cCk7CiAgICAgIH0gY2F0Y2ggKGVycm9yMikgewogICAgICB9CiAgICB9CiAgICByZXR1cm4gZmFsc2U7CiAgfTsKICB2YXIgJCA9IF9leHBvcnQ7CiAgdmFyIHRvTGVuZ3RoID0gdG9MZW5ndGgkOTsKICB2YXIgdG9TdHJpbmcgPSB0b1N0cmluZyRhOwogIHZhciBub3RBUmVnRXhwID0gbm90QVJlZ2V4cDsKICB2YXIgcmVxdWlyZU9iamVjdENvZXJjaWJsZSA9IHJlcXVpcmVPYmplY3RDb2VyY2libGUkNTsKICB2YXIgY29ycmVjdElzUmVnRXhwTG9naWMgPSBjb3JyZWN0SXNSZWdleHBMb2dpYzsKICB2YXIgJHN0YXJ0c1dpdGggPSAiIi5zdGFydHNXaXRoOwogIHZhciBtaW4gPSBNYXRoLm1pbjsKICB2YXIgQ09SUkVDVF9JU19SRUdFWFBfTE9HSUMgPSBjb3JyZWN0SXNSZWdFeHBMb2dpYygic3RhcnRzV2l0aCIpOwogICQoeyB0YXJnZXQ6ICJTdHJpbmciLCBwcm90bzogdHJ1ZSwgZm9yY2VkOiAhQ09SUkVDVF9JU19SRUdFWFBfTE9HSUMgfSwgewogICAgc3RhcnRzV2l0aDogZnVuY3Rpb24gc3RhcnRzV2l0aDIoc2VhcmNoU3RyaW5nKSB7CiAgICAgIHZhciB0aGF0ID0gdG9TdHJpbmcocmVxdWlyZU9iamVjdENvZXJjaWJsZSh0aGlzKSk7CiAgICAgIG5vdEFSZWdFeHAoc2VhcmNoU3RyaW5nKTsKICAgICAgdmFyIGluZGV4ID0gdG9MZW5ndGgobWluKGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdm9pZCAwLCB0aGF0Lmxlbmd0aCkpOwogICAgICB2YXIgc2VhcmNoID0gdG9TdHJpbmcoc2VhcmNoU3RyaW5nKTsKICAgICAgcmV0dXJuICRzdGFydHNXaXRoID8gJHN0YXJ0c1dpdGguY2FsbCh0aGF0LCBzZWFyY2gsIGluZGV4KSA6IHRoYXQuc2xpY2UoaW5kZXgsIGluZGV4ICsgc2VhcmNoLmxlbmd0aCkgPT09IHNlYXJjaDsKICAgIH0KICB9KTsKICB2YXIgZW50cnlWaXJ0dWFsID0gZW50cnlWaXJ0dWFsJGE7CiAgdmFyIHN0YXJ0c1dpdGgkMyA9IGVudHJ5VmlydHVhbCgiU3RyaW5nIikuc3RhcnRzV2l0aDsKICB2YXIgc3RhcnRzV2l0aCQyID0gc3RhcnRzV2l0aCQzOwogIHZhciBTdHJpbmdQcm90b3R5cGUgPSBTdHJpbmcucHJvdG90eXBlOwogIHZhciBzdGFydHNXaXRoXzEgPSBmdW5jdGlvbihpdCkgewogICAgdmFyIG93biA9IGl0LnN0YXJ0c1dpdGg7CiAgICByZXR1cm4gdHlwZW9mIGl0ID09PSAic3RyaW5nIiB8fCBpdCA9PT0gU3RyaW5nUHJvdG90eXBlIHx8IGl0IGluc3RhbmNlb2YgU3RyaW5nICYmIG93biA9PT0gU3RyaW5nUHJvdG90eXBlLnN0YXJ0c1dpdGggPyBzdGFydHNXaXRoJDIgOiBvd247CiAgfTsKICB2YXIgcGFyZW50ID0gc3RhcnRzV2l0aF8xOwogIHZhciBzdGFydHNXaXRoJDEgPSBwYXJlbnQ7CiAgdmFyIHN0YXJ0c1dpdGggPSBzdGFydHNXaXRoJDE7CiAgKGZ1bmN0aW9uKCkgewogICAgKGZ1bmN0aW9uKHNlbGYyKSB7CiAgICAgIChmdW5jdGlvbihleHBvcnRzKSB7CiAgICAgICAgdmFyIHN1cHBvcnQgPSB7CiAgICAgICAgICBzZWFyY2hQYXJhbXM6ICJVUkxTZWFyY2hQYXJhbXMiIGluIHNlbGYyLAogICAgICAgICAgaXRlcmFibGU6ICJTeW1ib2wiIGluIHNlbGYyICYmICJpdGVyYXRvciIgaW4gU3ltYm9sLAogICAgICAgICAgYmxvYjogIkZpbGVSZWFkZXIiIGluIHNlbGYyICYmICJCbG9iIiBpbiBzZWxmMiAmJiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBuZXcgQmxvYigpOwogICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICB9KCksCiAgICAgICAgICBmb3JtRGF0YTogIkZvcm1EYXRhIiBpbiBzZWxmMiwKICAgICAgICAgIGFycmF5QnVmZmVyOiAiQXJyYXlCdWZmZXIiIGluIHNlbGYyCiAgICAgICAgfTsKICAgICAgICBmdW5jdGlvbiBpc0RhdGFWaWV3KG9iaikgewogICAgICAgICAgcmV0dXJuIG9iaiAmJiBEYXRhVmlldy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihvYmopOwogICAgICAgIH0KICAgICAgICBpZiAoc3VwcG9ydC5hcnJheUJ1ZmZlcikgewogICAgICAgICAgdmFyIHZpZXdDbGFzc2VzID0gWwogICAgICAgICAgICAiW29iamVjdCBJbnQ4QXJyYXldIiwKICAgICAgICAgICAgIltvYmplY3QgVWludDhBcnJheV0iLAogICAgICAgICAgICAiW29iamVjdCBVaW50OENsYW1wZWRBcnJheV0iLAogICAgICAgICAgICAiW29iamVjdCBJbnQxNkFycmF5XSIsCiAgICAgICAgICAgICJbb2JqZWN0IFVpbnQxNkFycmF5XSIsCiAgICAgICAgICAgICJbb2JqZWN0IEludDMyQXJyYXldIiwKICAgICAgICAgICAgIltvYmplY3QgVWludDMyQXJyYXldIiwKICAgICAgICAgICAgIltvYmplY3QgRmxvYXQzMkFycmF5XSIsCiAgICAgICAgICAgICJbb2JqZWN0IEZsb2F0NjRBcnJheV0iCiAgICAgICAgICBdOwogICAgICAgICAgdmFyIGlzQXJyYXlCdWZmZXJWaWV3ID0gQXJyYXlCdWZmZXIuaXNWaWV3IHx8IGZ1bmN0aW9uKG9iaikgewogICAgICAgICAgICByZXR1cm4gb2JqICYmIHZpZXdDbGFzc2VzLmluZGV4T2YoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iaikpID4gLTE7CiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBub3JtYWxpemVOYW1lKG5hbWUpIHsKICAgICAgICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gInN0cmluZyIpIHsKICAgICAgICAgICAgbmFtZSA9IFN0cmluZyhuYW1lKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICgvW15hLXowLTlcLSMkJSYnKisuXl9gfH5dL2kudGVzdChuYW1lKSkgewogICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGNoYXJhY3RlciBpbiBoZWFkZXIgZmllbGQgbmFtZSIpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIG5hbWUudG9Mb3dlckNhc2UoKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gbm9ybWFsaXplVmFsdWUodmFsdWUpIHsKICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICJzdHJpbmciKSB7CiAgICAgICAgICAgIHZhbHVlID0gU3RyaW5nKHZhbHVlKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gaXRlcmF0b3JGb3IoaXRlbXMpIHsKICAgICAgICAgIHZhciBpdGVyYXRvcjIgPSB7CiAgICAgICAgICAgIG5leHQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGl0ZW1zLnNoaWZ0KCk7CiAgICAgICAgICAgICAgcmV0dXJuIHsgZG9uZTogdmFsdWUgPT09IHZvaWQgMCwgdmFsdWUgfTsKICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgICAgIGlmIChzdXBwb3J0Lml0ZXJhYmxlKSB7CiAgICAgICAgICAgIGl0ZXJhdG9yMltTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGl0ZXJhdG9yMjsKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBpdGVyYXRvcjI7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIEhlYWRlcnMoaGVhZGVycykgewogICAgICAgICAgdGhpcy5tYXAgPSB7fTsKICAgICAgICAgIGlmIChoZWFkZXJzIGluc3RhbmNlb2YgSGVhZGVycykgewogICAgICAgICAgICBoZWFkZXJzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHsKICAgICAgICAgICAgICB0aGlzLmFwcGVuZChuYW1lLCB2YWx1ZSk7CiAgICAgICAgICAgIH0sIHRoaXMpOwogICAgICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGhlYWRlcnMpKSB7CiAgICAgICAgICAgIGhlYWRlcnMuZm9yRWFjaChmdW5jdGlvbihoZWFkZXIpIHsKICAgICAgICAgICAgICB0aGlzLmFwcGVuZChoZWFkZXJbMF0sIGhlYWRlclsxXSk7CiAgICAgICAgICAgIH0sIHRoaXMpOwogICAgICAgICAgfSBlbHNlIGlmIChoZWFkZXJzKSB7CiAgICAgICAgICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGhlYWRlcnMpLmZvckVhY2goZnVuY3Rpb24obmFtZSkgewogICAgICAgICAgICAgIHRoaXMuYXBwZW5kKG5hbWUsIGhlYWRlcnNbbmFtZV0pOwogICAgICAgICAgICB9LCB0aGlzKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgSGVhZGVycy5wcm90b3R5cGUuYXBwZW5kID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHsKICAgICAgICAgIG5hbWUgPSBub3JtYWxpemVOYW1lKG5hbWUpOwogICAgICAgICAgdmFsdWUgPSBub3JtYWxpemVWYWx1ZSh2YWx1ZSk7CiAgICAgICAgICB2YXIgb2xkVmFsdWUgPSB0aGlzLm1hcFtuYW1lXTsKICAgICAgICAgIHRoaXMubWFwW25hbWVdID0gb2xkVmFsdWUgPyBvbGRWYWx1ZSArICIsICIgKyB2YWx1ZSA6IHZhbHVlOwogICAgICAgIH07CiAgICAgICAgSGVhZGVycy5wcm90b3R5cGVbImRlbGV0ZSJdID0gZnVuY3Rpb24obmFtZSkgewogICAgICAgICAgZGVsZXRlIHRoaXMubWFwW25vcm1hbGl6ZU5hbWUobmFtZSldOwogICAgICAgIH07CiAgICAgICAgSGVhZGVycy5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24obmFtZSkgewogICAgICAgICAgbmFtZSA9IG5vcm1hbGl6ZU5hbWUobmFtZSk7CiAgICAgICAgICByZXR1cm4gdGhpcy5oYXMobmFtZSkgPyB0aGlzLm1hcFtuYW1lXSA6IG51bGw7CiAgICAgICAgfTsKICAgICAgICBIZWFkZXJzLnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbihuYW1lKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5tYXAuaGFzT3duUHJvcGVydHkobm9ybWFsaXplTmFtZShuYW1lKSk7CiAgICAgICAgfTsKICAgICAgICBIZWFkZXJzLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkgewogICAgICAgICAgdGhpcy5tYXBbbm9ybWFsaXplTmFtZShuYW1lKV0gPSBub3JtYWxpemVWYWx1ZSh2YWx1ZSk7CiAgICAgICAgfTsKICAgICAgICBIZWFkZXJzLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24oY2FsbGJhY2ssIHRoaXNBcmcpIHsKICAgICAgICAgIGZvciAodmFyIG5hbWUgaW4gdGhpcy5tYXApIHsKICAgICAgICAgICAgaWYgKHRoaXMubWFwLmhhc093blByb3BlcnR5KG5hbWUpKSB7CiAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzQXJnLCB0aGlzLm1hcFtuYW1lXSwgbmFtZSwgdGhpcyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIEhlYWRlcnMucHJvdG90eXBlLmtleXMgPSBmdW5jdGlvbigpIHsKICAgICAgICAgIHZhciBpdGVtcyA9IFtdOwogICAgICAgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7CiAgICAgICAgICAgIGl0ZW1zLnB1c2gobmFtZSk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiBpdGVyYXRvckZvcihpdGVtcyk7CiAgICAgICAgfTsKICAgICAgICBIZWFkZXJzLnByb3RvdHlwZS52YWx1ZXMgPSBmdW5jdGlvbigpIHsKICAgICAgICAgIHZhciBpdGVtcyA9IFtdOwogICAgICAgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgICAgICAgIGl0ZW1zLnB1c2godmFsdWUpOwogICAgICAgICAgfSk7CiAgICAgICAgICByZXR1cm4gaXRlcmF0b3JGb3IoaXRlbXMpOwogICAgICAgIH07CiAgICAgICAgSGVhZGVycy5wcm90b3R5cGUuZW50cmllcyA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgdmFyIGl0ZW1zID0gW107CiAgICAgICAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHsKICAgICAgICAgICAgaXRlbXMucHVzaChbbmFtZSwgdmFsdWVdKTsKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuIGl0ZXJhdG9yRm9yKGl0ZW1zKTsKICAgICAgICB9OwogICAgICAgIGlmIChzdXBwb3J0Lml0ZXJhYmxlKSB7CiAgICAgICAgICBIZWFkZXJzLnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdID0gSGVhZGVycy5wcm90b3R5cGUuZW50cmllczsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gY29uc3VtZWQoYm9keSkgewogICAgICAgICAgaWYgKGJvZHkuYm9keVVzZWQpIHsKICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBUeXBlRXJyb3IoIkFscmVhZHkgcmVhZCIpKTsKICAgICAgICAgIH0KICAgICAgICAgIGJvZHkuYm9keVVzZWQgPSB0cnVlOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBmaWxlUmVhZGVyUmVhZHkocmVhZGVyKSB7CiAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICByZXNvbHZlKHJlYWRlci5yZXN1bHQpOwogICAgICAgICAgICB9OwogICAgICAgICAgICByZWFkZXIub25lcnJvciA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgIHJlamVjdChyZWFkZXIuZXJyb3IpOwogICAgICAgICAgICB9OwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIHJlYWRCbG9iQXNBcnJheUJ1ZmZlcjIoYmxvYikgewogICAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgICB2YXIgcHJvbWlzZTIgPSBmaWxlUmVhZGVyUmVhZHkocmVhZGVyKTsKICAgICAgICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihibG9iKTsKICAgICAgICAgIHJldHVybiBwcm9taXNlMjsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gcmVhZEJsb2JBc1RleHQyKGJsb2IpIHsKICAgICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgICAgdmFyIHByb21pc2UyID0gZmlsZVJlYWRlclJlYWR5KHJlYWRlcik7CiAgICAgICAgICByZWFkZXIucmVhZEFzVGV4dChibG9iKTsKICAgICAgICAgIHJldHVybiBwcm9taXNlMjsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gcmVhZEFycmF5QnVmZmVyQXNUZXh0KGJ1ZikgewogICAgICAgICAgdmFyIHZpZXcgPSBuZXcgVWludDhBcnJheShidWYpOwogICAgICAgICAgdmFyIGNoYXJzID0gbmV3IEFycmF5KHZpZXcubGVuZ3RoKTsKICAgICAgICAgIGZvciAodmFyIGkyID0gMDsgaTIgPCB2aWV3Lmxlbmd0aDsgaTIrKykgewogICAgICAgICAgICBjaGFyc1tpMl0gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHZpZXdbaTJdKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBjaGFycy5qb2luKCIiKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gYnVmZmVyQ2xvbmUoYnVmKSB7CiAgICAgICAgICBpZiAoYnVmLnNsaWNlKSB7CiAgICAgICAgICAgIHJldHVybiBidWYuc2xpY2UoMCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB2YXIgdmlldyA9IG5ldyBVaW50OEFycmF5KGJ1Zi5ieXRlTGVuZ3RoKTsKICAgICAgICAgICAgdmlldy5zZXQobmV3IFVpbnQ4QXJyYXkoYnVmKSk7CiAgICAgICAgICAgIHJldHVybiB2aWV3LmJ1ZmZlcjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gQm9keSgpIHsKICAgICAgICAgIHRoaXMuYm9keVVzZWQgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuX2luaXRCb2R5ID0gZnVuY3Rpb24oYm9keSkgewogICAgICAgICAgICB0aGlzLl9ib2R5SW5pdCA9IGJvZHk7CiAgICAgICAgICAgIGlmICghYm9keSkgewogICAgICAgICAgICAgIHRoaXMuX2JvZHlUZXh0ID0gIiI7CiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGJvZHkgPT09ICJzdHJpbmciKSB7CiAgICAgICAgICAgICAgdGhpcy5fYm9keVRleHQgPSBib2R5OwogICAgICAgICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuYmxvYiAmJiBCbG9iLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7CiAgICAgICAgICAgICAgdGhpcy5fYm9keUJsb2IgPSBib2R5OwogICAgICAgICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuZm9ybURhdGEgJiYgRm9ybURhdGEucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHsKICAgICAgICAgICAgICB0aGlzLl9ib2R5Rm9ybURhdGEgPSBib2R5OwogICAgICAgICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuc2VhcmNoUGFyYW1zICYmIFVSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSkgewogICAgICAgICAgICAgIHRoaXMuX2JvZHlUZXh0ID0gYm9keS50b1N0cmluZygpOwogICAgICAgICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuYXJyYXlCdWZmZXIgJiYgc3VwcG9ydC5ibG9iICYmIGlzRGF0YVZpZXcoYm9keSkpIHsKICAgICAgICAgICAgICB0aGlzLl9ib2R5QXJyYXlCdWZmZXIgPSBidWZmZXJDbG9uZShib2R5LmJ1ZmZlcik7CiAgICAgICAgICAgICAgdGhpcy5fYm9keUluaXQgPSBuZXcgQmxvYihbdGhpcy5fYm9keUFycmF5QnVmZmVyXSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5hcnJheUJ1ZmZlciAmJiAoQXJyYXlCdWZmZXIucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkgfHwgaXNBcnJheUJ1ZmZlclZpZXcoYm9keSkpKSB7CiAgICAgICAgICAgICAgdGhpcy5fYm9keUFycmF5QnVmZmVyID0gYnVmZmVyQ2xvbmUoYm9keSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy5fYm9keVRleHQgPSBib2R5ID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGJvZHkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICghdGhpcy5oZWFkZXJzLmdldCgiY29udGVudC10eXBlIikpIHsKICAgICAgICAgICAgICBpZiAodHlwZW9mIGJvZHkgPT09ICJzdHJpbmciKSB7CiAgICAgICAgICAgICAgICB0aGlzLmhlYWRlcnMuc2V0KCJjb250ZW50LXR5cGUiLCAidGV4dC9wbGFpbjtjaGFyc2V0PVVURi04Iik7CiAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5QmxvYiAmJiB0aGlzLl9ib2R5QmxvYi50eXBlKSB7CiAgICAgICAgICAgICAgICB0aGlzLmhlYWRlcnMuc2V0KCJjb250ZW50LXR5cGUiLCB0aGlzLl9ib2R5QmxvYi50eXBlKTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuc2VhcmNoUGFyYW1zICYmIFVSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSkgewogICAgICAgICAgICAgICAgdGhpcy5oZWFkZXJzLnNldCgiY29udGVudC10eXBlIiwgImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PVVURi04Iik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgICAgaWYgKHN1cHBvcnQuYmxvYikgewogICAgICAgICAgICB0aGlzLmJsb2IgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICB2YXIgcmVqZWN0ZWQgPSBjb25zdW1lZCh0aGlzKTsKICAgICAgICAgICAgICBpZiAocmVqZWN0ZWQpIHsKICAgICAgICAgICAgICAgIHJldHVybiByZWplY3RlZDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKHRoaXMuX2JvZHlCbG9iKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2JvZHlCbG9iKTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2JvZHlBcnJheUJ1ZmZlcikgewogICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgQmxvYihbdGhpcy5fYm9keUFycmF5QnVmZmVyXSkpOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUZvcm1EYXRhKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoImNvdWxkIG5vdCByZWFkIEZvcm1EYXRhIGJvZHkgYXMgYmxvYiIpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBCbG9iKFt0aGlzLl9ib2R5VGV4dF0pKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMuYXJyYXlCdWZmZXIgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICBpZiAodGhpcy5fYm9keUFycmF5QnVmZmVyKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gY29uc3VtZWQodGhpcykgfHwgUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2JvZHlBcnJheUJ1ZmZlcik7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmJsb2IoKS50aGVuKHJlYWRCbG9iQXNBcnJheUJ1ZmZlcjIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMudGV4dCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICB2YXIgcmVqZWN0ZWQgPSBjb25zdW1lZCh0aGlzKTsKICAgICAgICAgICAgaWYgKHJlamVjdGVkKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdGVkOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0aGlzLl9ib2R5QmxvYikgewogICAgICAgICAgICAgIHJldHVybiByZWFkQmxvYkFzVGV4dDIodGhpcy5fYm9keUJsb2IpOwogICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2JvZHlBcnJheUJ1ZmZlcikgewogICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVhZEFycmF5QnVmZmVyQXNUZXh0KHRoaXMuX2JvZHlBcnJheUJ1ZmZlcikpOwogICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2JvZHlGb3JtRGF0YSkgewogICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiY291bGQgbm90IHJlYWQgRm9ybURhdGEgYm9keSBhcyB0ZXh0Iik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5VGV4dCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAgICAgICBpZiAoc3VwcG9ydC5mb3JtRGF0YSkgewogICAgICAgICAgICB0aGlzLmZvcm1EYXRhID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudGV4dCgpLnRoZW4oZGVjb2RlKTsKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuanNvbiA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy50ZXh0KCkudGhlbihKU09OLnBhcnNlKTsKICAgICAgICAgIH07CiAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICB9CiAgICAgICAgdmFyIG1ldGhvZHMgPSBbIkRFTEVURSIsICJHRVQiLCAiSEVBRCIsICJPUFRJT05TIiwgIlBPU1QiLCAiUFVUIl07CiAgICAgICAgZnVuY3Rpb24gbm9ybWFsaXplTWV0aG9kKG1ldGhvZCkgewogICAgICAgICAgdmFyIHVwY2FzZWQgPSBtZXRob2QudG9VcHBlckNhc2UoKTsKICAgICAgICAgIHJldHVybiBtZXRob2RzLmluZGV4T2YodXBjYXNlZCkgPiAtMSA/IHVwY2FzZWQgOiBtZXRob2Q7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIFJlcXVlc3QoaW5wdXQsIG9wdGlvbnMpIHsKICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwogICAgICAgICAgdmFyIGJvZHkgPSBvcHRpb25zLmJvZHk7CiAgICAgICAgICBpZiAoaW5wdXQgaW5zdGFuY2VvZiBSZXF1ZXN0KSB7CiAgICAgICAgICAgIGlmIChpbnB1dC5ib2R5VXNlZCkgewogICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkFscmVhZHkgcmVhZCIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMudXJsID0gaW5wdXQudXJsOwogICAgICAgICAgICB0aGlzLmNyZWRlbnRpYWxzID0gaW5wdXQuY3JlZGVudGlhbHM7CiAgICAgICAgICAgIGlmICghb3B0aW9ucy5oZWFkZXJzKSB7CiAgICAgICAgICAgICAgdGhpcy5oZWFkZXJzID0gbmV3IEhlYWRlcnMoaW5wdXQuaGVhZGVycyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5tZXRob2QgPSBpbnB1dC5tZXRob2Q7CiAgICAgICAgICAgIHRoaXMubW9kZSA9IGlucHV0Lm1vZGU7CiAgICAgICAgICAgIHRoaXMuc2lnbmFsID0gaW5wdXQuc2lnbmFsOwogICAgICAgICAgICBpZiAoIWJvZHkgJiYgaW5wdXQuX2JvZHlJbml0ICE9IG51bGwpIHsKICAgICAgICAgICAgICBib2R5ID0gaW5wdXQuX2JvZHlJbml0OwogICAgICAgICAgICAgIGlucHV0LmJvZHlVc2VkID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy51cmwgPSBTdHJpbmcoaW5wdXQpOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy5jcmVkZW50aWFscyA9IG9wdGlvbnMuY3JlZGVudGlhbHMgfHwgdGhpcy5jcmVkZW50aWFscyB8fCAic2FtZS1vcmlnaW4iOwogICAgICAgICAgaWYgKG9wdGlvbnMuaGVhZGVycyB8fCAhdGhpcy5oZWFkZXJzKSB7CiAgICAgICAgICAgIHRoaXMuaGVhZGVycyA9IG5ldyBIZWFkZXJzKG9wdGlvbnMuaGVhZGVycyk7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLm1ldGhvZCA9IG5vcm1hbGl6ZU1ldGhvZChvcHRpb25zLm1ldGhvZCB8fCB0aGlzLm1ldGhvZCB8fCAiR0VUIik7CiAgICAgICAgICB0aGlzLm1vZGUgPSBvcHRpb25zLm1vZGUgfHwgdGhpcy5tb2RlIHx8IG51bGw7CiAgICAgICAgICB0aGlzLnNpZ25hbCA9IG9wdGlvbnMuc2lnbmFsIHx8IHRoaXMuc2lnbmFsOwogICAgICAgICAgdGhpcy5yZWZlcnJlciA9IG51bGw7CiAgICAgICAgICBpZiAoKHRoaXMubWV0aG9kID09PSAiR0VUIiB8fCB0aGlzLm1ldGhvZCA9PT0gIkhFQUQiKSAmJiBib2R5KSB7CiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkJvZHkgbm90IGFsbG93ZWQgZm9yIEdFVCBvciBIRUFEIHJlcXVlc3RzIik7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLl9pbml0Qm9keShib2R5KTsKICAgICAgICB9CiAgICAgICAgUmVxdWVzdC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHsKICAgICAgICAgIHJldHVybiBuZXcgUmVxdWVzdCh0aGlzLCB7IGJvZHk6IHRoaXMuX2JvZHlJbml0IH0pOwogICAgICAgIH07CiAgICAgICAgZnVuY3Rpb24gZGVjb2RlKGJvZHkpIHsKICAgICAgICAgIHZhciBmb3JtID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgICAgICBib2R5LnRyaW0oKS5zcGxpdCgiJiIpLmZvckVhY2goZnVuY3Rpb24oYnl0ZXMpIHsKICAgICAgICAgICAgaWYgKGJ5dGVzKSB7CiAgICAgICAgICAgICAgdmFyIHNwbGl0MiA9IGJ5dGVzLnNwbGl0KCI9Iik7CiAgICAgICAgICAgICAgdmFyIG5hbWUgPSBzcGxpdDIuc2hpZnQoKS5yZXBsYWNlKC9cKy9nLCAiICIpOwogICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHNwbGl0Mi5qb2luKCI9IikucmVwbGFjZSgvXCsvZywgIiAiKTsKICAgICAgICAgICAgICBmb3JtLmFwcGVuZChkZWNvZGVVUklDb21wb25lbnQobmFtZSksIGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiBmb3JtOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBwYXJzZUhlYWRlcnMocmF3SGVhZGVycykgewogICAgICAgICAgdmFyIGhlYWRlcnMgPSBuZXcgSGVhZGVycygpOwogICAgICAgICAgdmFyIHByZVByb2Nlc3NlZEhlYWRlcnMgPSByYXdIZWFkZXJzLnJlcGxhY2UoL1xyP1xuW1x0IF0rL2csICIgIik7CiAgICAgICAgICBwcmVQcm9jZXNzZWRIZWFkZXJzLnNwbGl0KC9ccj9cbi8pLmZvckVhY2goZnVuY3Rpb24obGluZSkgewogICAgICAgICAgICB2YXIgcGFydHMgPSBsaW5lLnNwbGl0KCI6Iik7CiAgICAgICAgICAgIHZhciBrZXkgPSBwYXJ0cy5zaGlmdCgpLnRyaW0oKTsKICAgICAgICAgICAgaWYgKGtleSkgewogICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHBhcnRzLmpvaW4oIjoiKS50cmltKCk7CiAgICAgICAgICAgICAgaGVhZGVycy5hcHBlbmQoa2V5LCB2YWx1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuIGhlYWRlcnM7CiAgICAgICAgfQogICAgICAgIEJvZHkuY2FsbChSZXF1ZXN0LnByb3RvdHlwZSk7CiAgICAgICAgZnVuY3Rpb24gUmVzcG9uc2UoYm9keUluaXQsIG9wdGlvbnMpIHsKICAgICAgICAgIGlmICghb3B0aW9ucykgewogICAgICAgICAgICBvcHRpb25zID0ge307CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLnR5cGUgPSAiZGVmYXVsdCI7CiAgICAgICAgICB0aGlzLnN0YXR1cyA9IG9wdGlvbnMuc3RhdHVzID09PSB2b2lkIDAgPyAyMDAgOiBvcHRpb25zLnN0YXR1czsKICAgICAgICAgIHRoaXMub2sgPSB0aGlzLnN0YXR1cyA+PSAyMDAgJiYgdGhpcy5zdGF0dXMgPCAzMDA7CiAgICAgICAgICB0aGlzLnN0YXR1c1RleHQgPSAic3RhdHVzVGV4dCIgaW4gb3B0aW9ucyA/IG9wdGlvbnMuc3RhdHVzVGV4dCA6ICJPSyI7CiAgICAgICAgICB0aGlzLmhlYWRlcnMgPSBuZXcgSGVhZGVycyhvcHRpb25zLmhlYWRlcnMpOwogICAgICAgICAgdGhpcy51cmwgPSBvcHRpb25zLnVybCB8fCAiIjsKICAgICAgICAgIHRoaXMuX2luaXRCb2R5KGJvZHlJbml0KTsKICAgICAgICB9CiAgICAgICAgQm9keS5jYWxsKFJlc3BvbnNlLnByb3RvdHlwZSk7CiAgICAgICAgUmVzcG9uc2UucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKHRoaXMuX2JvZHlJbml0LCB7CiAgICAgICAgICAgIHN0YXR1czogdGhpcy5zdGF0dXMsCiAgICAgICAgICAgIHN0YXR1c1RleHQ6IHRoaXMuc3RhdHVzVGV4dCwKICAgICAgICAgICAgaGVhZGVyczogbmV3IEhlYWRlcnModGhpcy5oZWFkZXJzKSwKICAgICAgICAgICAgdXJsOiB0aGlzLnVybAogICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgICAgICBSZXNwb25zZS5lcnJvciA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgdmFyIHJlc3BvbnNlID0gbmV3IFJlc3BvbnNlKG51bGwsIHsgc3RhdHVzOiAwLCBzdGF0dXNUZXh0OiAiIiB9KTsKICAgICAgICAgIHJlc3BvbnNlLnR5cGUgPSAiZXJyb3IiOwogICAgICAgICAgcmV0dXJuIHJlc3BvbnNlOwogICAgICAgIH07CiAgICAgICAgdmFyIHJlZGlyZWN0U3RhdHVzZXMgPSBbMzAxLCAzMDIsIDMwMywgMzA3LCAzMDhdOwogICAgICAgIFJlc3BvbnNlLnJlZGlyZWN0ID0gZnVuY3Rpb24odXJsLCBzdGF0dXMpIHsKICAgICAgICAgIGlmIChyZWRpcmVjdFN0YXR1c2VzLmluZGV4T2Yoc3RhdHVzKSA9PT0gLTEpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgc3RhdHVzIGNvZGUiKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UobnVsbCwgeyBzdGF0dXMsIGhlYWRlcnM6IHsgbG9jYXRpb246IHVybCB9IH0pOwogICAgICAgIH07CiAgICAgICAgZXhwb3J0cy5ET01FeGNlcHRpb24gPSBzZWxmMi5ET01FeGNlcHRpb247CiAgICAgICAgdHJ5IHsKICAgICAgICAgIG5ldyBleHBvcnRzLkRPTUV4Y2VwdGlvbigpOwogICAgICAgIH0gY2F0Y2ggKGVycjIpIHsKICAgICAgICAgIGV4cG9ydHMuRE9NRXhjZXB0aW9uID0gZnVuY3Rpb24obWVzc2FnZSwgbmFtZSkgewogICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlOwogICAgICAgICAgICB0aGlzLm5hbWUgPSBuYW1lOwogICAgICAgICAgICB2YXIgZXJyb3IgPSBFcnJvcihtZXNzYWdlKTsKICAgICAgICAgICAgdGhpcy5zdGFjayA9IGVycm9yLnN0YWNrOwogICAgICAgICAgfTsKICAgICAgICAgIGV4cG9ydHMuRE9NRXhjZXB0aW9uLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKTsKICAgICAgICAgIGV4cG9ydHMuRE9NRXhjZXB0aW9uLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGV4cG9ydHMuRE9NRXhjZXB0aW9uOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBmZXRjaDIoaW5wdXQsIGluaXQyKSB7CiAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICAgIHZhciByZXF1ZXN0ID0gbmV3IFJlcXVlc3QoaW5wdXQsIGluaXQyKTsKICAgICAgICAgICAgaWYgKHJlcXVlc3Quc2lnbmFsICYmIHJlcXVlc3Quc2lnbmFsLmFib3J0ZWQpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KG5ldyBleHBvcnRzLkRPTUV4Y2VwdGlvbigiQWJvcnRlZCIsICJBYm9ydEVycm9yIikpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgICAgICAgZnVuY3Rpb24gYWJvcnRYaHIoKSB7CiAgICAgICAgICAgICAgeGhyLmFib3J0KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgIHZhciBvcHRpb25zID0gewogICAgICAgICAgICAgICAgc3RhdHVzOiB4aHIuc3RhdHVzLAogICAgICAgICAgICAgICAgc3RhdHVzVGV4dDogeGhyLnN0YXR1c1RleHQsCiAgICAgICAgICAgICAgICBoZWFkZXJzOiBwYXJzZUhlYWRlcnMoeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpIHx8ICIiKQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgb3B0aW9ucy51cmwgPSAicmVzcG9uc2VVUkwiIGluIHhociA/IHhoci5yZXNwb25zZVVSTCA6IG9wdGlvbnMuaGVhZGVycy5nZXQoIlgtUmVxdWVzdC1VUkwiKTsKICAgICAgICAgICAgICB2YXIgYm9keSA9ICJyZXNwb25zZSIgaW4geGhyID8geGhyLnJlc3BvbnNlIDogeGhyLnJlc3BvbnNlVGV4dDsKICAgICAgICAgICAgICByZXNvbHZlKG5ldyBSZXNwb25zZShib2R5LCBvcHRpb25zKSk7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgcmVqZWN0KG5ldyBUeXBlRXJyb3IoIk5ldHdvcmsgcmVxdWVzdCBmYWlsZWQiKSk7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHhoci5vbnRpbWVvdXQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICByZWplY3QobmV3IFR5cGVFcnJvcigiTmV0d29yayByZXF1ZXN0IGZhaWxlZCIpKTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgeGhyLm9uYWJvcnQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICByZWplY3QobmV3IGV4cG9ydHMuRE9NRXhjZXB0aW9uKCJBYm9ydGVkIiwgIkFib3J0RXJyb3IiKSk7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHhoci5vcGVuKHJlcXVlc3QubWV0aG9kLCByZXF1ZXN0LnVybCwgdHJ1ZSk7CiAgICAgICAgICAgIGlmIChyZXF1ZXN0LmNyZWRlbnRpYWxzID09PSAiaW5jbHVkZSIpIHsKICAgICAgICAgICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTsKICAgICAgICAgICAgfSBlbHNlIGlmIChyZXF1ZXN0LmNyZWRlbnRpYWxzID09PSAib21pdCIpIHsKICAgICAgICAgICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCJyZXNwb25zZVR5cGUiIGluIHhociAmJiBzdXBwb3J0LmJsb2IpIHsKICAgICAgICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gImJsb2IiOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJlcXVlc3QuaGVhZGVycy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7CiAgICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIobmFtZSwgdmFsdWUpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaWYgKHJlcXVlc3Quc2lnbmFsKSB7CiAgICAgICAgICAgICAgcmVxdWVzdC5zaWduYWwuYWRkRXZlbnRMaXN0ZW5lcigiYWJvcnQiLCBhYm9ydFhocik7CiAgICAgICAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09PSA0KSB7CiAgICAgICAgICAgICAgICAgIHJlcXVlc3Quc2lnbmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoImFib3J0IiwgYWJvcnRYaHIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgeGhyLnNlbmQodHlwZW9mIHJlcXVlc3QuX2JvZHlJbml0ID09PSAidW5kZWZpbmVkIiA/IG51bGwgOiByZXF1ZXN0Ll9ib2R5SW5pdCk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgZmV0Y2gyLnBvbHlmaWxsID0gdHJ1ZTsKICAgICAgICBpZiAoIXNlbGYyLmZldGNoKSB7CiAgICAgICAgICBzZWxmMi5mZXRjaCA9IGZldGNoMjsKICAgICAgICAgIHNlbGYyLkhlYWRlcnMgPSBIZWFkZXJzOwogICAgICAgICAgc2VsZjIuUmVxdWVzdCA9IFJlcXVlc3Q7CiAgICAgICAgICBzZWxmMi5SZXNwb25zZSA9IFJlc3BvbnNlOwogICAgICAgIH0KICAgICAgICBleHBvcnRzLkhlYWRlcnMgPSBIZWFkZXJzOwogICAgICAgIGV4cG9ydHMuUmVxdWVzdCA9IFJlcXVlc3Q7CiAgICAgICAgZXhwb3J0cy5SZXNwb25zZSA9IFJlc3BvbnNlOwogICAgICAgIGV4cG9ydHMuZmV0Y2ggPSBmZXRjaDI7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKICAgICAgICByZXR1cm4gZXhwb3J0czsKICAgICAgfSkoe30pOwogICAgfSkodHlwZW9mIHNlbGYgIT09ICJ1bmRlZmluZWQiID8gc2VsZiA6IGNvbW1vbmpzR2xvYmFsKTsKICB9KSgpOwogIChmdW5jdGlvbihleHBvcnRzKSB7CiAgICB2YXIgX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQgPSBpbnRlcm9wUmVxdWlyZVdpbGRjYXJkLmV4cG9ydHM7CiAgICB2YXIgX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIgPSBpbnRlcm9wUmVxdWlyZURlZmF1bHQkMS5leHBvcnRzOwogICAgdmFyIF9PYmplY3QkZGVmaW5lUHJvcGVydHkyID0gZGVmaW5lUHJvcGVydHkkOTsKICAgIF9PYmplY3QkZGVmaW5lUHJvcGVydHkyKGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogICAgICB2YWx1ZTogdHJ1ZQogICAgfSk7CiAgICBleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CiAgICB2YXIgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKG9iamVjdFdpdGhvdXRQcm9wZXJ0aWVzLmV4cG9ydHMpOwogICAgdmFyIF9zdGFydHNXaXRoID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoc3RhcnRzV2l0aCk7CiAgICB2YXIgX21hcCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKG1hcCk7CiAgICB2YXIgX3Byb21pc2UgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Mihwcm9taXNlKTsKICAgIHZhciBfZGVmaW5lUHJvcGVydHkyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKGRlZmluZVByb3BlcnR5JDkpOwogICAgdmFyIF9kZWZpbmVQcm9wZXJ0aWVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKGRlZmluZVByb3BlcnRpZXMpOwogICAgdmFyIF9nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyk7CiAgICB2YXIgX2dldE93blByb3BlcnR5RGVzY3JpcHRvciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKGdldE93blByb3BlcnR5RGVzY3JpcHRvciQzKTsKICAgIHZhciBfZ2V0T3duUHJvcGVydHlTeW1ib2xzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoZ2V0T3duUHJvcGVydHlTeW1ib2xzJDIpOwogICAgdmFyIF9rZXlzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoa2V5cyQyKTsKICAgIHZhciBfY29uc3RydWN0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoY29uc3RydWN0KTsKICAgIHZhciBfZm9yRWFjaCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKGZvckVhY2gkMSk7CiAgICB2YXIgX2ZpbHRlciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKGZpbHRlcik7CiAgICB2YXIgX3JlZ2VuZXJhdG9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKHJlZ2VuZXJhdG9yJDEpOwogICAgdmFyIF9zbGljZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKHNsaWNlJDEpOwogICAgdmFyIF9jb25jYXQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoY29uY2F0KTsKICAgIHZhciBfY2xhc3NDYWxsQ2hlY2syMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKGNsYXNzQ2FsbENoZWNrJDEuZXhwb3J0cyk7CiAgICB2YXIgX2NyZWF0ZUNsYXNzMjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0MihjcmVhdGVDbGFzcyQxLmV4cG9ydHMpOwogICAgdmFyIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoYXNzZXJ0VGhpc0luaXRpYWxpemVkLmV4cG9ydHMpOwogICAgdmFyIF9pbmhlcml0czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Mihpbmhlcml0cy5leHBvcnRzKTsKICAgIHZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Mihwb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuLmV4cG9ydHMpOwogICAgdmFyIF9nZXRQcm90b3R5cGVPZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0MihnZXRQcm90b3R5cGVPZiQ0LmV4cG9ydHMpOwogICAgdmFyIF9kZWZpbmVQcm9wZXJ0eTMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0MihkZWZpbmVQcm9wZXJ0eSQ2LmV4cG9ydHMpOwogICAgdmFyIF9hc3luY1RvR2VuZXJhdG9yMjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Mihhc3luY1RvR2VuZXJhdG9yJDEuZXhwb3J0cyk7CiAgICB2YXIgX3dyYXBBc3luY0dlbmVyYXRvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Mih3cmFwQXN5bmNHZW5lcmF0b3IuZXhwb3J0cyk7CiAgICB2YXIgX2F3YWl0QXN5bmNHZW5lcmF0b3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoYXdhaXRBc3luY0dlbmVyYXRvci5leHBvcnRzKTsKICAgIHZhciBfYXN5bmNJdGVyYXRvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Mihhc3luY0l0ZXJhdG9yLmV4cG9ydHMpOwogICAgdmFyIF9hc3luY0dlbmVyYXRvckRlbGVnYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKGFzeW5jR2VuZXJhdG9yRGVsZWdhdGUuZXhwb3J0cyk7CiAgICB2YXIgX2JhbUZpbGUgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChiYW1GaWxlKTsKICAgIHZhciBfYmd6ZkZpbGVoYW5kbGUgPSBkaXN0JDE7CiAgICB2YXIgX3NhbSA9IHNhbTsKICAgIGZ1bmN0aW9uIG93bktleXMyKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsKICAgICAgdmFyIGtleXMyID0gKDAsIF9rZXlzLmRlZmF1bHQpKG9iamVjdCk7CiAgICAgIGlmIChfZ2V0T3duUHJvcGVydHlTeW1ib2xzLmRlZmF1bHQpIHsKICAgICAgICB2YXIgc3ltYm9sczIgPSAoMCwgX2dldE93blByb3BlcnR5U3ltYm9scy5kZWZhdWx0KShvYmplY3QpOwogICAgICAgIGlmIChlbnVtZXJhYmxlT25seSkKICAgICAgICAgIHN5bWJvbHMyID0gKDAsIF9maWx0ZXIuZGVmYXVsdCkoc3ltYm9sczIpLmNhbGwoc3ltYm9sczIsIGZ1bmN0aW9uKHN5bSkgewogICAgICAgICAgICByZXR1cm4gKDAsIF9nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IuZGVmYXVsdCkob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7CiAgICAgICAgICB9KTsKICAgICAgICBrZXlzMi5wdXNoLmFwcGx5KGtleXMyLCBzeW1ib2xzMik7CiAgICAgIH0KICAgICAgcmV0dXJuIGtleXMyOwogICAgfQogICAgZnVuY3Rpb24gX29iamVjdFNwcmVhZDIodGFyZ2V0KSB7CiAgICAgIGZvciAodmFyIGkyID0gMTsgaTIgPCBhcmd1bWVudHMubGVuZ3RoOyBpMisrKSB7CiAgICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpMl0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpMl0gOiB7fTsKICAgICAgICBpZiAoaTIgJSAyKSB7CiAgICAgICAgICB2YXIgX2NvbnRleHQxMzsKICAgICAgICAgICgwLCBfZm9yRWFjaC5kZWZhdWx0KShfY29udGV4dDEzID0gb3duS2V5czIoT2JqZWN0KHNvdXJjZSksIHRydWUpKS5jYWxsKF9jb250ZXh0MTMsIGZ1bmN0aW9uKGtleSkgewogICAgICAgICAgICAoMCwgX2RlZmluZVByb3BlcnR5My5kZWZhdWx0KSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIGlmIChfZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycy5kZWZhdWx0KSB7CiAgICAgICAgICAoMCwgX2RlZmluZVByb3BlcnRpZXMyLmRlZmF1bHQpKHRhcmdldCwgKDAsIF9nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzLmRlZmF1bHQpKHNvdXJjZSkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgX2NvbnRleHQxNDsKICAgICAgICAgICgwLCBfZm9yRWFjaC5kZWZhdWx0KShfY29udGV4dDE0ID0gb3duS2V5czIoT2JqZWN0KHNvdXJjZSkpKS5jYWxsKF9jb250ZXh0MTQsIGZ1bmN0aW9uKGtleSkgewogICAgICAgICAgICAoMCwgX2RlZmluZVByb3BlcnR5MjIuZGVmYXVsdCkodGFyZ2V0LCBrZXksICgwLCBfZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLmRlZmF1bHQpKHNvdXJjZSwga2V5KSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIGZ1bmN0aW9uIF9jcmVhdGVTdXBlcjIoRGVyaXZlZCkgewogICAgICB2YXIgaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCA9IF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QyKCk7CiAgICAgIHJldHVybiBmdW5jdGlvbiBfY3JlYXRlU3VwZXJJbnRlcm5hbCgpIHsKICAgICAgICB2YXIgU3VwZXIgPSAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KShEZXJpdmVkKSwgcmVzdWx0OwogICAgICAgIGlmIChoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KSB7CiAgICAgICAgICB2YXIgTmV3VGFyZ2V0ID0gKDAsIF9nZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkodGhpcykuY29uc3RydWN0b3I7CiAgICAgICAgICByZXN1bHQgPSAoMCwgX2NvbnN0cnVjdC5kZWZhdWx0KShTdXBlciwgYXJndW1lbnRzLCBOZXdUYXJnZXQpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXN1bHQgPSBTdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMi5kZWZhdWx0KSh0aGlzLCByZXN1bHQpOwogICAgICB9OwogICAgfQogICAgZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdDIoKSB7CiAgICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gInVuZGVmaW5lZCIgfHwgIV9jb25zdHJ1Y3QuZGVmYXVsdCkKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIGlmIChfY29uc3RydWN0LmRlZmF1bHQuc2hhbSkKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIGlmICh0eXBlb2YgUHJveHkgPT09ICJmdW5jdGlvbiIpCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIHRyeSB7CiAgICAgICAgRGF0ZS5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCgoMCwgX2NvbnN0cnVjdC5kZWZhdWx0KShEYXRlLCBbXSwgZnVuY3Rpb24oKSB7CiAgICAgICAgfSkpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBjb25jYXQkMTIoX3gsIF94MikgewogICAgICByZXR1cm4gX2NvbmNhdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfQogICAgZnVuY3Rpb24gX2NvbmNhdCgpIHsKICAgICAgX2NvbmNhdCA9ICgwLCBfYXN5bmNUb0dlbmVyYXRvcjIyLmRlZmF1bHQpKC8qIEBfX1BVUkVfXyAqLyBfcmVnZW5lcmF0b3IyLmRlZmF1bHQubWFyayhmdW5jdGlvbiBfY2FsbGVlNShhcnIsIG9wdHMpIHsKICAgICAgICB2YXIgcmVzOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3IyLmRlZmF1bHQud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQxNikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDE2LnByZXYgPSBfY29udGV4dDE2Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDE2Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIF9wcm9taXNlLmRlZmF1bHQuYWxsKCgwLCBfbWFwLmRlZmF1bHQpKGFycikuY2FsbChhcnIsIC8qIEBfX1BVUkVfXyAqLyBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgdmFyIF9yZWYgPSAoMCwgX2FzeW5jVG9HZW5lcmF0b3IyMi5kZWZhdWx0KSgvKiBAX19QVVJFX18gKi8gX3JlZ2VuZXJhdG9yMi5kZWZhdWx0Lm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoY2h1bmsyKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHVybCwgaGVhZGVycywgcmVzdCwgX3JlczsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yMi5kZWZhdWx0LndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0MTUpIHsKICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxNS5wcmV2ID0gX2NvbnRleHQxNS5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsID0gY2h1bmsyLnVybCwgaGVhZGVycyA9IGNodW5rMi5oZWFkZXJzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoMCwgX3N0YXJ0c1dpdGguZGVmYXVsdCkodXJsKS5jYWxsKHVybCwgImRhdGE6IikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxNS5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNS5hYnJ1cHQoInJldHVybiIsIEJ1ZmZlci5mcm9tKHVybC5zcGxpdCgiLCIpWzFdLCAiYmFzZTY0IikpOwogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3QgPSAoMCwgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzMi5kZWZhdWx0KShoZWFkZXJzLCBbInJlZmVyZXIiXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDE1Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZldGNoKHVybCwgX29iamVjdFNwcmVhZDIoX29iamVjdFNwcmVhZDIoe30sIG9wdHMpLCB7fSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiBfb2JqZWN0U3ByZWFkMihfb2JqZWN0U3ByZWFkMih7fSwgb3B0cy5oZWFkZXJzKSwgcmVzdCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmVzID0gX2NvbnRleHQxNS5zZW50OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9yZXMub2spIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxNS5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJGYWlsZWQgdG8gZmV0Y2ggIi5jb25jYXQoX3Jlcy5zdGF0dXNUZXh0KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTUudDAgPSBCdWZmZXI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDE1Lm5leHQgPSAxNDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVzLmFycmF5QnVmZmVyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTUudDEgPSBfY29udGV4dDE1LnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNS5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0MTUudDAuZnJvbS5jYWxsKF9jb250ZXh0MTUudDAsIF9jb250ZXh0MTUudDEpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNS5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlNCk7CiAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKF94NCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9KCkpKTsKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDE2LnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDE2LnQwID0gKDAsIF9jb25jYXQyLmRlZmF1bHQpKEJ1ZmZlcik7CiAgICAgICAgICAgICAgICBfY29udGV4dDE2LnQxID0gQnVmZmVyOwogICAgICAgICAgICAgICAgX2NvbnRleHQxNi5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIHJldHVybiBfcHJvbWlzZS5kZWZhdWx0LmFsbCgoMCwgX21hcC5kZWZhdWx0KShyZXMpLmNhbGwocmVzLCBmdW5jdGlvbihlbHQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuICgwLCBfYmd6ZkZpbGVoYW5kbGUudW56aXApKGVsdCk7CiAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgX2NvbnRleHQxNi50MiA9IF9jb250ZXh0MTYuc2VudDsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE2LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQxNi50MC5jYWxsLmNhbGwoX2NvbnRleHQxNi50MCwgX2NvbnRleHQxNi50MSwgX2NvbnRleHQxNi50MikpOwogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTYuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTUpOwogICAgICB9KSk7CiAgICAgIHJldHVybiBfY29uY2F0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CiAgICB2YXIgSHRzZ2V0RmlsZSA9IC8qIEBfX1BVUkVfXyAqLyBmdW5jdGlvbihfQmFtRmlsZSkgewogICAgICAoMCwgX2luaGVyaXRzMi5kZWZhdWx0KShIdHNnZXRGaWxlMiwgX0JhbUZpbGUpOwogICAgICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyMihIdHNnZXRGaWxlMik7CiAgICAgIGZ1bmN0aW9uIEh0c2dldEZpbGUyKGFyZ3MpIHsKICAgICAgICB2YXIgX3RoaXMyOwogICAgICAgICgwLCBfY2xhc3NDYWxsQ2hlY2syMi5kZWZhdWx0KSh0aGlzLCBIdHNnZXRGaWxlMik7CiAgICAgICAgX3RoaXMyID0gX3N1cGVyLmNhbGwodGhpcywgewogICAgICAgICAgYmFtRmlsZWhhbmRsZTogIj8iLAogICAgICAgICAgYmFpRmlsZWhhbmRsZTogIj8iCiAgICAgICAgfSk7CiAgICAgICAgKDAsIF9kZWZpbmVQcm9wZXJ0eTMuZGVmYXVsdCkoKDAsIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQyLmRlZmF1bHQpKF90aGlzMiksICJiYXNlVXJsIiwgdm9pZCAwKTsKICAgICAgICAoMCwgX2RlZmluZVByb3BlcnR5My5kZWZhdWx0KSgoMCwgX2Fzc2VydFRoaXNJbml0aWFsaXplZDIuZGVmYXVsdCkoX3RoaXMyKSwgInRyYWNrSWQiLCB2b2lkIDApOwogICAgICAgIF90aGlzMi5iYXNlVXJsID0gYXJncy5iYXNlVXJsOwogICAgICAgIF90aGlzMi50cmFja0lkID0gYXJncy50cmFja0lkOwogICAgICAgIHJldHVybiBfdGhpczI7CiAgICAgIH0KICAgICAgKDAsIF9jcmVhdGVDbGFzczIyLmRlZmF1bHQpKEh0c2dldEZpbGUyLCBbewogICAgICAgIGtleTogInN0cmVhbVJlY29yZHNGb3JSYW5nZSIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHN0cmVhbVJlY29yZHNGb3JSYW5nZShjaHIsIG1pbjIsIG1heDIpIHsKICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgICAgICB2YXIgb3B0cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdm9pZCAwID8gYXJndW1lbnRzWzNdIDogewogICAgICAgICAgICB2aWV3QXNQYWlyczogZmFsc2UsCiAgICAgICAgICAgIHBhaXJBY3Jvc3NDaHI6IGZhbHNlLAogICAgICAgICAgICBtYXhJbnNlcnRTaXplOiAyZTUKICAgICAgICAgIH07CiAgICAgICAgICByZXR1cm4gKDAsIF93cmFwQXN5bmNHZW5lcmF0b3IyLmRlZmF1bHQpKC8qIEBfX1BVUkVfXyAqLyBfcmVnZW5lcmF0b3IyLmRlZmF1bHQubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgICAgICB2YXIgX2NvbnRleHQsIF9jb250ZXh0MiwgX2NvbnRleHQzLCBfY29udGV4dDQsIF9jb250ZXh0NTsKICAgICAgICAgICAgdmFyIGJhc2UsIHVybCwgY2hySWQsIHJlc3VsdCwgZGF0YTIsIHVuY2JhLCBjaHVuazI7CiAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3IyLmRlZmF1bHQud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dDgpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDgucHJldiA9IF9jb250ZXh0OC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICBiYXNlID0gKDAsIF9jb25jYXQyLmRlZmF1bHQpKF9jb250ZXh0ID0gIiIuY29uY2F0KF90aGlzLmJhc2VVcmwsICIvIikpLmNhbGwoX2NvbnRleHQsIF90aGlzLnRyYWNrSWQpOwogICAgICAgICAgICAgICAgICAgIHVybCA9ICgwLCBfY29uY2F0Mi5kZWZhdWx0KShfY29udGV4dDIgPSAoMCwgX2NvbmNhdDIuZGVmYXVsdCkoX2NvbnRleHQzID0gKDAsIF9jb25jYXQyLmRlZmF1bHQpKF9jb250ZXh0NCA9ICIiLmNvbmNhdChiYXNlLCAiP3JlZmVyZW5jZU5hbWU9IikpLmNhbGwoX2NvbnRleHQ0LCBjaHIsICImc3RhcnQ9IikpLmNhbGwoX2NvbnRleHQzLCBtaW4yLCAiJmVuZD0iKSkuY2FsbChfY29udGV4dDIsIG1heDIsICImZm9ybWF0PUJBTSIpOwogICAgICAgICAgICAgICAgICAgIGNocklkID0gX3RoaXMuY2hyVG9JbmRleCAmJiBfdGhpcy5jaHJUb0luZGV4W2Nocl07CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgICAgIHJldHVybiAoMCwgX2F3YWl0QXN5bmNHZW5lcmF0b3IyLmRlZmF1bHQpKGZldGNoKHVybCwgX29iamVjdFNwcmVhZDIoe30sIG9wdHMpKSk7CiAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dDguc2VudDsKICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0Lm9rKSB7CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3VsdC5zdGF0dXNUZXh0KTsKICAgICAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgwLCBfYXdhaXRBc3luY0dlbmVyYXRvcjIuZGVmYXVsdCkocmVzdWx0Lmpzb24oKSk7CiAgICAgICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICAgICAgZGF0YTIgPSBfY29udGV4dDguc2VudDsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgICAgIHJldHVybiAoMCwgX2F3YWl0QXN5bmNHZW5lcmF0b3IyLmRlZmF1bHQpKGNvbmNhdCQxMigoMCwgX3NsaWNlLmRlZmF1bHQpKF9jb250ZXh0NSA9IGRhdGEyLmh0c2dldC51cmxzKS5jYWxsKF9jb250ZXh0NSwgMSksIG9wdHMpKTsKICAgICAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgICAgICB1bmNiYSA9IF9jb250ZXh0OC5zZW50OwogICAgICAgICAgICAgICAgICAgIGNodW5rMiA9IHsKICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlcjogdW5jYmEsCiAgICAgICAgICAgICAgICAgICAgICBjaHVuazogewogICAgICAgICAgICAgICAgICAgICAgICBtaW52OiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVBvc2l0aW9uOiAwCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICB0b1N0cmluZzogZnVuY3Rpb24gdG9TdHJpbmcyKCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2NvbnRleHQ2LCBfY29udGV4dDc7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoMCwgX2NvbmNhdDIuZGVmYXVsdCkoX2NvbnRleHQ2ID0gKDAsIF9jb25jYXQyLmRlZmF1bHQpKF9jb250ZXh0NyA9ICIiLmNvbmNhdChjaHIsICJfIikpLmNhbGwoX2NvbnRleHQ3LCBtaW4yLCAiXyIpKS5jYWxsKF9jb250ZXh0NiwgbWF4Mik7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LmRlbGVnYXRlWWllbGQoKDAsIF9hc3luY0dlbmVyYXRvckRlbGVnYXRlMi5kZWZhdWx0KSgoMCwgX2FzeW5jSXRlcmF0b3IyLmRlZmF1bHQpKF90aGlzLl9mZXRjaENodW5rRmVhdHVyZXMoW2NodW5rMl0sIGNocklkLCBtaW4yLCBtYXgyLCBvcHRzKSksIF9hd2FpdEFzeW5jR2VuZXJhdG9yMi5kZWZhdWx0KSwgInQwIiwgMTYpOwogICAgICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgICAgICB9KSkoKTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJfcmVhZENodW5rIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICB2YXIgX3JlYWRDaHVuazIgPSAoMCwgX2FzeW5jVG9HZW5lcmF0b3IyMi5kZWZhdWx0KSgvKiBAX19QVVJFX18gKi8gX3JlZ2VuZXJhdG9yMi5kZWZhdWx0Lm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIocGFyYW1zKSB7CiAgICAgICAgICAgIHZhciBjaHVuazIsIGJ1ZmZlcjIsIGMyOwogICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yMi5kZWZhdWx0LndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0OSkgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OS5wcmV2ID0gX2NvbnRleHQ5Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIGNodW5rMiA9IHBhcmFtcy5jaHVuazsKICAgICAgICAgICAgICAgICAgICBidWZmZXIyID0gY2h1bmsyLmJ1ZmZlciwgYzIgPSBjaHVuazIuY2h1bms7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGJ1ZmZlcjIsCiAgICAgICAgICAgICAgICAgICAgICBjcG9zaXRpb25zOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgZHBvc2l0aW9uczogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgIGNodW5rOiBjMgogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgICAgICB9KSk7CiAgICAgICAgICBmdW5jdGlvbiBfcmVhZENodW5rKF94MykgewogICAgICAgICAgICByZXR1cm4gX3JlYWRDaHVuazIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBfcmVhZENodW5rOwogICAgICAgIH0oKQogICAgICB9LCB7CiAgICAgICAga2V5OiAiZ2V0SGVhZGVyIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICB2YXIgX2dldEhlYWRlciA9ICgwLCBfYXN5bmNUb0dlbmVyYXRvcjIyLmRlZmF1bHQpKC8qIEBfX1BVUkVfXyAqLyBfcmVnZW5lcmF0b3IyLmRlZmF1bHQubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICAgICAgdmFyIF9jb250ZXh0MTA7CiAgICAgICAgICAgIHZhciBvcHRzLCB1cmwsIHJlc3VsdCwgZGF0YTIsIHVuY2JhLCBoZWFkTGVuLCBoZWFkZXJUZXh0LCBzYW1IZWFkZXIsIGlkVG9OYW1lLCBuYW1lVG9JZCwgc3FMaW5lcywgX2FyZ3MzID0gYXJndW1lbnRzOwogICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yMi5kZWZhdWx0LndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MTIpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEyLnByZXYgPSBfY29udGV4dDEyLm5leHQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIG9wdHMgPSBfYXJnczMubGVuZ3RoID4gMCAmJiBfYXJnczNbMF0gIT09IHZvaWQgMCA/IF9hcmdzM1swXSA6IHt9OwogICAgICAgICAgICAgICAgICAgIHVybCA9ICgwLCBfY29uY2F0Mi5kZWZhdWx0KShfY29udGV4dDEwID0gIiIuY29uY2F0KHRoaXMuYmFzZVVybCwgIi8iKSkuY2FsbChfY29udGV4dDEwLCB0aGlzLnRyYWNrSWQsICI/cmVmZXJlbmNlTmFtZT1uYSZjbGFzcz1oZWFkZXIiKTsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEyLm5leHQgPSA0OwogICAgICAgICAgICAgICAgICAgIHJldHVybiBmZXRjaCh1cmwsIG9wdHMpOwogICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQxMi5zZW50OwogICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQub2spIHsKICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTIubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJGYWlsZWQgdG8gZmV0Y2ggIi5jb25jYXQocmVzdWx0LnN0YXR1c1RleHQpKTsKICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTIubmV4dCA9IDk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5qc29uKCk7CiAgICAgICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgICAgICBkYXRhMiA9IF9jb250ZXh0MTIuc2VudDsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEyLm5leHQgPSAxMjsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29uY2F0JDEyKGRhdGEyLmh0c2dldC51cmxzLCBvcHRzKTsKICAgICAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgICAgICB1bmNiYSA9IF9jb250ZXh0MTIuc2VudDsKICAgICAgICAgICAgICAgICAgICBpZiAoISh1bmNiYS5yZWFkSW50MzJMRSgwKSAhPT0gX2JhbUZpbGUuQkFNX01BR0lDKSkgewogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMi5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJOb3QgYSBCQU0gZmlsZSIpOwogICAgICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgICAgICAgIGhlYWRMZW4gPSB1bmNiYS5yZWFkSW50MzJMRSg0KTsKICAgICAgICAgICAgICAgICAgICBoZWFkZXJUZXh0ID0gdW5jYmEudG9TdHJpbmcoInV0ZjgiLCA4LCA4ICsgaGVhZExlbik7CiAgICAgICAgICAgICAgICAgICAgc2FtSGVhZGVyID0gKDAsIF9zYW0ucGFyc2VIZWFkZXJUZXh0KShoZWFkZXJUZXh0KTsKICAgICAgICAgICAgICAgICAgICBpZFRvTmFtZSA9IFtdOwogICAgICAgICAgICAgICAgICAgIG5hbWVUb0lkID0ge307CiAgICAgICAgICAgICAgICAgICAgc3FMaW5lcyA9ICgwLCBfZmlsdGVyLmRlZmF1bHQpKHNhbUhlYWRlcikuY2FsbChzYW1IZWFkZXIsIGZ1bmN0aW9uKGwpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsLnRhZyA9PT0gIlNRIjsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAoMCwgX2ZvckVhY2guZGVmYXVsdCkoc3FMaW5lcykuY2FsbChzcUxpbmVzLCBmdW5jdGlvbihzcUxpbmUsIHJlZklkKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgX2NvbnRleHQxMTsKICAgICAgICAgICAgICAgICAgICAgICgwLCBfZm9yRWFjaC5kZWZhdWx0KShfY29udGV4dDExID0gc3FMaW5lLmRhdGEpLmNhbGwoX2NvbnRleHQxMSwgZnVuY3Rpb24oaXRlbSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS50YWcgPT09ICJTTiIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVmTmFtZSA9IGl0ZW0udmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZVRvSWRbcmVmTmFtZV0gPSByZWZJZDsKICAgICAgICAgICAgICAgICAgICAgICAgICBpZFRvTmFtZVtyZWZJZF0gPSByZWZOYW1lOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmNoclRvSW5kZXggPSBuYW1lVG9JZDsKICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4VG9DaHIgPSBpZFRvTmFtZTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMi5hYnJ1cHQoInJldHVybiIsIHNhbUhlYWRlcik7CiAgICAgICAgICAgICAgICAgIGNhc2UgMjU6CiAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTIuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZTMsIHRoaXMpOwogICAgICAgICAgfSkpOwogICAgICAgICAgZnVuY3Rpb24gZ2V0SGVhZGVyKCkgewogICAgICAgICAgICByZXR1cm4gX2dldEhlYWRlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGdldEhlYWRlcjsKICAgICAgICB9KCkKICAgICAgfV0pOwogICAgICByZXR1cm4gSHRzZ2V0RmlsZTI7CiAgICB9KF9iYW1GaWxlLmRlZmF1bHQpOwogICAgZXhwb3J0cy5kZWZhdWx0ID0gSHRzZ2V0RmlsZTsKICB9KShodHNnZXQpOwogIChmdW5jdGlvbihleHBvcnRzKSB7CiAgICB2YXIgX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIgPSBpbnRlcm9wUmVxdWlyZURlZmF1bHQkMS5leHBvcnRzOwogICAgdmFyIF9PYmplY3QkZGVmaW5lUHJvcGVydHkgPSBkZWZpbmVQcm9wZXJ0eSQ5OwogICAgX09iamVjdCRkZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICAgICAgdmFsdWU6IHRydWUKICAgIH0pOwogICAgX09iamVjdCRkZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiQkFJIiwgewogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICBnZXQ6IGZ1bmN0aW9uIGdldDIoKSB7CiAgICAgICAgcmV0dXJuIF9iYWkuZGVmYXVsdDsKICAgICAgfQogICAgfSk7CiAgICBfT2JqZWN0JGRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJDU0kiLCB7CiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGdldDogZnVuY3Rpb24gZ2V0MigpIHsKICAgICAgICByZXR1cm4gX2NzaS5kZWZhdWx0OwogICAgICB9CiAgICB9KTsKICAgIF9PYmplY3QkZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIkJhbUZpbGUiLCB7CiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGdldDogZnVuY3Rpb24gZ2V0MigpIHsKICAgICAgICByZXR1cm4gX2JhbUZpbGUuZGVmYXVsdDsKICAgICAgfQogICAgfSk7CiAgICBfT2JqZWN0JGRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJIdHNnZXRGaWxlIiwgewogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICBnZXQ6IGZ1bmN0aW9uIGdldDIoKSB7CiAgICAgICAgcmV0dXJuIF9odHNnZXQuZGVmYXVsdDsKICAgICAgfQogICAgfSk7CiAgICBfT2JqZWN0JGRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJCYW1SZWNvcmQiLCB7CiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGdldDogZnVuY3Rpb24gZ2V0MigpIHsKICAgICAgICByZXR1cm4gX3JlY29yZC5kZWZhdWx0OwogICAgICB9CiAgICB9KTsKICAgIHZhciBfYmFpID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoYmFpKTsKICAgIHZhciBfY3NpID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIoY3NpKTsKICAgIHZhciBfYmFtRmlsZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKGJhbUZpbGUpOwogICAgdmFyIF9odHNnZXQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0MihodHNnZXQpOwogICAgdmFyIF9yZWNvcmQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0MihyZWNvcmQpOwogIH0pKGRpc3QkMyk7CiAgY2xhc3MgUXVpY2tMUlUgZXh0ZW5kcyBNYXAgewogICAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIGlmICghKG9wdGlvbnMubWF4U2l6ZSAmJiBvcHRpb25zLm1heFNpemUgPiAwKSkgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoImBtYXhTaXplYCBtdXN0IGJlIGEgbnVtYmVyIGdyZWF0ZXIgdGhhbiAwIik7CiAgICAgIH0KICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLm1heEFnZSA9PT0gIm51bWJlciIgJiYgb3B0aW9ucy5tYXhBZ2UgPT09IDApIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJgbWF4QWdlYCBtdXN0IGJlIGEgbnVtYmVyIGdyZWF0ZXIgdGhhbiAwIik7CiAgICAgIH0KICAgICAgdGhpcy5tYXhTaXplID0gb3B0aW9ucy5tYXhTaXplOwogICAgICB0aGlzLm1heEFnZSA9IG9wdGlvbnMubWF4QWdlIHx8IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsKICAgICAgdGhpcy5vbkV2aWN0aW9uID0gb3B0aW9ucy5vbkV2aWN0aW9uOwogICAgICB0aGlzLmNhY2hlID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICAgICAgdGhpcy5vbGRDYWNoZSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgICAgIHRoaXMuX3NpemUgPSAwOwogICAgfQogICAgX2VtaXRFdmljdGlvbnMoY2FjaGUpIHsKICAgICAgaWYgKHR5cGVvZiB0aGlzLm9uRXZpY3Rpb24gIT09ICJmdW5jdGlvbiIpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgZm9yIChjb25zdCBba2V5LCBpdGVtXSBvZiBjYWNoZSkgewogICAgICAgIHRoaXMub25FdmljdGlvbihrZXksIGl0ZW0udmFsdWUpOwogICAgICB9CiAgICB9CiAgICBfZGVsZXRlSWZFeHBpcmVkKGtleSwgaXRlbSkgewogICAgICBpZiAodHlwZW9mIGl0ZW0uZXhwaXJ5ID09PSAibnVtYmVyIiAmJiBpdGVtLmV4cGlyeSA8PSBEYXRlLm5vdygpKSB7CiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9uRXZpY3Rpb24gPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgIHRoaXMub25FdmljdGlvbihrZXksIGl0ZW0udmFsdWUpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdGhpcy5kZWxldGUoa2V5KTsKICAgICAgfQogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICBfZ2V0T3JEZWxldGVJZkV4cGlyZWQoa2V5LCBpdGVtKSB7CiAgICAgIGNvbnN0IGRlbGV0ZWQgPSB0aGlzLl9kZWxldGVJZkV4cGlyZWQoa2V5LCBpdGVtKTsKICAgICAgaWYgKGRlbGV0ZWQgPT09IGZhbHNlKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0udmFsdWU7CiAgICAgIH0KICAgIH0KICAgIF9nZXRJdGVtVmFsdWUoa2V5LCBpdGVtKSB7CiAgICAgIHJldHVybiBpdGVtLmV4cGlyeSA/IHRoaXMuX2dldE9yRGVsZXRlSWZFeHBpcmVkKGtleSwgaXRlbSkgOiBpdGVtLnZhbHVlOwogICAgfQogICAgX3BlZWsoa2V5LCBjYWNoZSkgewogICAgICBjb25zdCBpdGVtID0gY2FjaGUuZ2V0KGtleSk7CiAgICAgIHJldHVybiB0aGlzLl9nZXRJdGVtVmFsdWUoa2V5LCBpdGVtKTsKICAgIH0KICAgIF9zZXQoa2V5LCB2YWx1ZSkgewogICAgICB0aGlzLmNhY2hlLnNldChrZXksIHZhbHVlKTsKICAgICAgdGhpcy5fc2l6ZSsrOwogICAgICBpZiAodGhpcy5fc2l6ZSA+PSB0aGlzLm1heFNpemUpIHsKICAgICAgICB0aGlzLl9zaXplID0gMDsKICAgICAgICB0aGlzLl9lbWl0RXZpY3Rpb25zKHRoaXMub2xkQ2FjaGUpOwogICAgICAgIHRoaXMub2xkQ2FjaGUgPSB0aGlzLmNhY2hlOwogICAgICAgIHRoaXMuY2FjaGUgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpOwogICAgICB9CiAgICB9CiAgICBfbW92ZVRvUmVjZW50KGtleSwgaXRlbSkgewogICAgICB0aGlzLm9sZENhY2hlLmRlbGV0ZShrZXkpOwogICAgICB0aGlzLl9zZXQoa2V5LCBpdGVtKTsKICAgIH0KICAgICpfZW50cmllc0FzY2VuZGluZygpIHsKICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHRoaXMub2xkQ2FjaGUpIHsKICAgICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSBpdGVtOwogICAgICAgIGlmICghdGhpcy5jYWNoZS5oYXMoa2V5KSkgewogICAgICAgICAgY29uc3QgZGVsZXRlZCA9IHRoaXMuX2RlbGV0ZUlmRXhwaXJlZChrZXksIHZhbHVlKTsKICAgICAgICAgIGlmIChkZWxldGVkID09PSBmYWxzZSkgewogICAgICAgICAgICB5aWVsZCBpdGVtOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdGhpcy5jYWNoZSkgewogICAgICAgIGNvbnN0IFtrZXksIHZhbHVlXSA9IGl0ZW07CiAgICAgICAgY29uc3QgZGVsZXRlZCA9IHRoaXMuX2RlbGV0ZUlmRXhwaXJlZChrZXksIHZhbHVlKTsKICAgICAgICBpZiAoZGVsZXRlZCA9PT0gZmFsc2UpIHsKICAgICAgICAgIHlpZWxkIGl0ZW07CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBnZXQoa2V5KSB7CiAgICAgIGlmICh0aGlzLmNhY2hlLmhhcyhrZXkpKSB7CiAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuY2FjaGUuZ2V0KGtleSk7CiAgICAgICAgcmV0dXJuIHRoaXMuX2dldEl0ZW1WYWx1ZShrZXksIGl0ZW0pOwogICAgICB9CiAgICAgIGlmICh0aGlzLm9sZENhY2hlLmhhcyhrZXkpKSB7CiAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMub2xkQ2FjaGUuZ2V0KGtleSk7CiAgICAgICAgaWYgKHRoaXMuX2RlbGV0ZUlmRXhwaXJlZChrZXksIGl0ZW0pID09PSBmYWxzZSkgewogICAgICAgICAgdGhpcy5fbW92ZVRvUmVjZW50KGtleSwgaXRlbSk7CiAgICAgICAgICByZXR1cm4gaXRlbS52YWx1ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHNldChrZXksIHZhbHVlLCB7IG1heEFnZSA9IHRoaXMubWF4QWdlIH0gPSB7fSkgewogICAgICBjb25zdCBleHBpcnkgPSB0eXBlb2YgbWF4QWdlID09PSAibnVtYmVyIiAmJiBtYXhBZ2UgIT09IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSA/IERhdGUubm93KCkgKyBtYXhBZ2UgOiB2b2lkIDA7CiAgICAgIGlmICh0aGlzLmNhY2hlLmhhcyhrZXkpKSB7CiAgICAgICAgdGhpcy5jYWNoZS5zZXQoa2V5LCB7CiAgICAgICAgICB2YWx1ZSwKICAgICAgICAgIGV4cGlyeQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuX3NldChrZXksIHsgdmFsdWUsIGV4cGlyeSB9KTsKICAgICAgfQogICAgfQogICAgaGFzKGtleSkgewogICAgICBpZiAodGhpcy5jYWNoZS5oYXMoa2V5KSkgewogICAgICAgIHJldHVybiAhdGhpcy5fZGVsZXRlSWZFeHBpcmVkKGtleSwgdGhpcy5jYWNoZS5nZXQoa2V5KSk7CiAgICAgIH0KICAgICAgaWYgKHRoaXMub2xkQ2FjaGUuaGFzKGtleSkpIHsKICAgICAgICByZXR1cm4gIXRoaXMuX2RlbGV0ZUlmRXhwaXJlZChrZXksIHRoaXMub2xkQ2FjaGUuZ2V0KGtleSkpOwogICAgICB9CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIHBlZWsoa2V5KSB7CiAgICAgIGlmICh0aGlzLmNhY2hlLmhhcyhrZXkpKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuX3BlZWsoa2V5LCB0aGlzLmNhY2hlKTsKICAgICAgfQogICAgICBpZiAodGhpcy5vbGRDYWNoZS5oYXMoa2V5KSkgewogICAgICAgIHJldHVybiB0aGlzLl9wZWVrKGtleSwgdGhpcy5vbGRDYWNoZSk7CiAgICAgIH0KICAgIH0KICAgIGRlbGV0ZShrZXkpIHsKICAgICAgY29uc3QgZGVsZXRlZCA9IHRoaXMuY2FjaGUuZGVsZXRlKGtleSk7CiAgICAgIGlmIChkZWxldGVkKSB7CiAgICAgICAgdGhpcy5fc2l6ZS0tOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLm9sZENhY2hlLmRlbGV0ZShrZXkpIHx8IGRlbGV0ZWQ7CiAgICB9CiAgICBjbGVhcigpIHsKICAgICAgdGhpcy5jYWNoZS5jbGVhcigpOwogICAgICB0aGlzLm9sZENhY2hlLmNsZWFyKCk7CiAgICAgIHRoaXMuX3NpemUgPSAwOwogICAgfQogICAgcmVzaXplKG5ld1NpemUpIHsKICAgICAgaWYgKCEobmV3U2l6ZSAmJiBuZXdTaXplID4gMCkpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJgbWF4U2l6ZWAgbXVzdCBiZSBhIG51bWJlciBncmVhdGVyIHRoYW4gMCIpOwogICAgICB9CiAgICAgIGNvbnN0IGl0ZW1zID0gWy4uLnRoaXMuX2VudHJpZXNBc2NlbmRpbmcoKV07CiAgICAgIGNvbnN0IHJlbW92ZUNvdW50ID0gaXRlbXMubGVuZ3RoIC0gbmV3U2l6ZTsKICAgICAgaWYgKHJlbW92ZUNvdW50IDwgMCkgewogICAgICAgIHRoaXMuY2FjaGUgPSBuZXcgTWFwKGl0ZW1zKTsKICAgICAgICB0aGlzLm9sZENhY2hlID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICAgICAgICB0aGlzLl9zaXplID0gaXRlbXMubGVuZ3RoOwogICAgICB9IGVsc2UgewogICAgICAgIGlmIChyZW1vdmVDb3VudCA+IDApIHsKICAgICAgICAgIHRoaXMuX2VtaXRFdmljdGlvbnMoaXRlbXMuc2xpY2UoMCwgcmVtb3ZlQ291bnQpKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5vbGRDYWNoZSA9IG5ldyBNYXAoaXRlbXMuc2xpY2UocmVtb3ZlQ291bnQpKTsKICAgICAgICB0aGlzLmNhY2hlID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICAgICAgICB0aGlzLl9zaXplID0gMDsKICAgICAgfQogICAgICB0aGlzLm1heFNpemUgPSBuZXdTaXplOwogICAgfQogICAgKmtleXMoKSB7CiAgICAgIGZvciAoY29uc3QgW2tleV0gb2YgdGhpcykgewogICAgICAgIHlpZWxkIGtleTsKICAgICAgfQogICAgfQogICAgKnZhbHVlcygpIHsKICAgICAgZm9yIChjb25zdCBbLCB2YWx1ZV0gb2YgdGhpcykgewogICAgICAgIHlpZWxkIHZhbHVlOwogICAgICB9CiAgICB9CiAgICAqW1N5bWJvbC5pdGVyYXRvcl0oKSB7CiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLmNhY2hlKSB7CiAgICAgICAgY29uc3QgW2tleSwgdmFsdWVdID0gaXRlbTsKICAgICAgICBjb25zdCBkZWxldGVkID0gdGhpcy5fZGVsZXRlSWZFeHBpcmVkKGtleSwgdmFsdWUpOwogICAgICAgIGlmIChkZWxldGVkID09PSBmYWxzZSkgewogICAgICAgICAgeWllbGQgW2tleSwgdmFsdWUudmFsdWVdOwogICAgICAgIH0KICAgICAgfQogICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdGhpcy5vbGRDYWNoZSkgewogICAgICAgIGNvbnN0IFtrZXksIHZhbHVlXSA9IGl0ZW07CiAgICAgICAgaWYgKCF0aGlzLmNhY2hlLmhhcyhrZXkpKSB7CiAgICAgICAgICBjb25zdCBkZWxldGVkID0gdGhpcy5fZGVsZXRlSWZFeHBpcmVkKGtleSwgdmFsdWUpOwogICAgICAgICAgaWYgKGRlbGV0ZWQgPT09IGZhbHNlKSB7CiAgICAgICAgICAgIHlpZWxkIFtrZXksIHZhbHVlLnZhbHVlXTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgICplbnRyaWVzRGVzY2VuZGluZygpIHsKICAgICAgbGV0IGl0ZW1zID0gWy4uLnRoaXMuY2FjaGVdOwogICAgICBmb3IgKGxldCBpMiA9IGl0ZW1zLmxlbmd0aCAtIDE7IGkyID49IDA7IC0taTIpIHsKICAgICAgICBjb25zdCBpdGVtID0gaXRlbXNbaTJdOwogICAgICAgIGNvbnN0IFtrZXksIHZhbHVlXSA9IGl0ZW07CiAgICAgICAgY29uc3QgZGVsZXRlZCA9IHRoaXMuX2RlbGV0ZUlmRXhwaXJlZChrZXksIHZhbHVlKTsKICAgICAgICBpZiAoZGVsZXRlZCA9PT0gZmFsc2UpIHsKICAgICAgICAgIHlpZWxkIFtrZXksIHZhbHVlLnZhbHVlXTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaXRlbXMgPSBbLi4udGhpcy5vbGRDYWNoZV07CiAgICAgIGZvciAobGV0IGkyID0gaXRlbXMubGVuZ3RoIC0gMTsgaTIgPj0gMDsgLS1pMikgewogICAgICAgIGNvbnN0IGl0ZW0gPSBpdGVtc1tpMl07CiAgICAgICAgY29uc3QgW2tleSwgdmFsdWVdID0gaXRlbTsKICAgICAgICBpZiAoIXRoaXMuY2FjaGUuaGFzKGtleSkpIHsKICAgICAgICAgIGNvbnN0IGRlbGV0ZWQgPSB0aGlzLl9kZWxldGVJZkV4cGlyZWQoa2V5LCB2YWx1ZSk7CiAgICAgICAgICBpZiAoZGVsZXRlZCA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgeWllbGQgW2tleSwgdmFsdWUudmFsdWVdOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogICAgKmVudHJpZXNBc2NlbmRpbmcoKSB7CiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIHRoaXMuX2VudHJpZXNBc2NlbmRpbmcoKSkgewogICAgICAgIHlpZWxkIFtrZXksIHZhbHVlLnZhbHVlXTsKICAgICAgfQogICAgfQogICAgZ2V0IHNpemUoKSB7CiAgICAgIGlmICghdGhpcy5fc2l6ZSkgewogICAgICAgIHJldHVybiB0aGlzLm9sZENhY2hlLnNpemU7CiAgICAgIH0KICAgICAgbGV0IG9sZENhY2hlU2l6ZSA9IDA7CiAgICAgIGZvciAoY29uc3Qga2V5IG9mIHRoaXMub2xkQ2FjaGUua2V5cygpKSB7CiAgICAgICAgaWYgKCF0aGlzLmNhY2hlLmhhcyhrZXkpKSB7CiAgICAgICAgICBvbGRDYWNoZVNpemUrKzsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIE1hdGgubWluKHRoaXMuX3NpemUgKyBvbGRDYWNoZVNpemUsIHRoaXMubWF4U2l6ZSk7CiAgICB9CiAgICBlbnRyaWVzKCkgewogICAgICByZXR1cm4gdGhpcy5lbnRyaWVzQXNjZW5kaW5nKCk7CiAgICB9CiAgICBmb3JFYWNoKGNhbGxiYWNrRnVuY3Rpb24sIHRoaXNBcmd1bWVudCA9IHRoaXMpIHsKICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgdGhpcy5lbnRyaWVzQXNjZW5kaW5nKCkpIHsKICAgICAgICBjYWxsYmFja0Z1bmN0aW9uLmNhbGwodGhpc0FyZ3VtZW50LCB2YWx1ZSwga2V5LCB0aGlzKTsKICAgICAgfQogICAgfQogICAgZ2V0IFtTeW1ib2wudG9TdHJpbmdUYWddKCkgewogICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoWy4uLnRoaXMuZW50cmllc0FzY2VuZGluZygpXSk7CiAgICB9CiAgfQogIGZ1bmN0aW9uIGFzY2VuZGluZyhhLCBiKSB7CiAgICByZXR1cm4gYSA8IGIgPyAtMSA6IGEgPiBiID8gMSA6IGEgPj0gYiA/IDAgOiBOYU47CiAgfQogIGZ1bmN0aW9uIGJpc2VjdG9yKGYpIHsKICAgIGxldCBkZWx0YSA9IGY7CiAgICBsZXQgY29tcGFyZSA9IGY7CiAgICBpZiAoZi5sZW5ndGggPT09IDEpIHsKICAgICAgZGVsdGEgPSAoZCwgeCkgPT4gZihkKSAtIHg7CiAgICAgIGNvbXBhcmUgPSBhc2NlbmRpbmdDb21wYXJhdG9yKGYpOwogICAgfQogICAgZnVuY3Rpb24gbGVmdChhLCB4LCBsbywgaGkpIHsKICAgICAgaWYgKGxvID09IG51bGwpCiAgICAgICAgbG8gPSAwOwogICAgICBpZiAoaGkgPT0gbnVsbCkKICAgICAgICBoaSA9IGEubGVuZ3RoOwogICAgICB3aGlsZSAobG8gPCBoaSkgewogICAgICAgIGNvbnN0IG1pZCA9IGxvICsgaGkgPj4+IDE7CiAgICAgICAgaWYgKGNvbXBhcmUoYVttaWRdLCB4KSA8IDApCiAgICAgICAgICBsbyA9IG1pZCArIDE7CiAgICAgICAgZWxzZQogICAgICAgICAgaGkgPSBtaWQ7CiAgICAgIH0KICAgICAgcmV0dXJuIGxvOwogICAgfQogICAgZnVuY3Rpb24gcmlnaHQoYSwgeCwgbG8sIGhpKSB7CiAgICAgIGlmIChsbyA9PSBudWxsKQogICAgICAgIGxvID0gMDsKICAgICAgaWYgKGhpID09IG51bGwpCiAgICAgICAgaGkgPSBhLmxlbmd0aDsKICAgICAgd2hpbGUgKGxvIDwgaGkpIHsKICAgICAgICBjb25zdCBtaWQgPSBsbyArIGhpID4+PiAxOwogICAgICAgIGlmIChjb21wYXJlKGFbbWlkXSwgeCkgPiAwKQogICAgICAgICAgaGkgPSBtaWQ7CiAgICAgICAgZWxzZQogICAgICAgICAgbG8gPSBtaWQgKyAxOwogICAgICB9CiAgICAgIHJldHVybiBsbzsKICAgIH0KICAgIGZ1bmN0aW9uIGNlbnRlcihhLCB4LCBsbywgaGkpIHsKICAgICAgaWYgKGxvID09IG51bGwpCiAgICAgICAgbG8gPSAwOwogICAgICBpZiAoaGkgPT0gbnVsbCkKICAgICAgICBoaSA9IGEubGVuZ3RoOwogICAgICBjb25zdCBpMiA9IGxlZnQoYSwgeCwgbG8sIGhpIC0gMSk7CiAgICAgIHJldHVybiBpMiA+IGxvICYmIGRlbHRhKGFbaTIgLSAxXSwgeCkgPiAtZGVsdGEoYVtpMl0sIHgpID8gaTIgLSAxIDogaTI7CiAgICB9CiAgICByZXR1cm4geyBsZWZ0LCBjZW50ZXIsIHJpZ2h0IH07CiAgfQogIGZ1bmN0aW9uIGFzY2VuZGluZ0NvbXBhcmF0b3IoZikgewogICAgcmV0dXJuIChkLCB4KSA9PiBhc2NlbmRpbmcoZihkKSwgeCk7CiAgfQogIHZhciBFT0wgPSB7fSwgRU9GID0ge30sIFFVT1RFID0gMzQsIE5FV0xJTkUgPSAxMCwgUkVUVVJOID0gMTM7CiAgZnVuY3Rpb24gb2JqZWN0Q29udmVydGVyKGNvbHVtbnMpIHsKICAgIHJldHVybiBuZXcgRnVuY3Rpb24oImQiLCAicmV0dXJuIHsiICsgY29sdW1ucy5tYXAoZnVuY3Rpb24obmFtZSwgaTIpIHsKICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG5hbWUpICsgIjogZFsiICsgaTIgKyAnXSB8fCAiIic7CiAgICB9KS5qb2luKCIsIikgKyAifSIpOwogIH0KICBmdW5jdGlvbiBjdXN0b21Db252ZXJ0ZXIoY29sdW1ucywgZikgewogICAgdmFyIG9iamVjdCA9IG9iamVjdENvbnZlcnRlcihjb2x1bW5zKTsKICAgIHJldHVybiBmdW5jdGlvbihyb3csIGkyKSB7CiAgICAgIHJldHVybiBmKG9iamVjdChyb3cpLCBpMiwgY29sdW1ucyk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBpbmZlckNvbHVtbnMocm93cykgewogICAgdmFyIGNvbHVtblNldCA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpLCBjb2x1bW5zID0gW107CiAgICByb3dzLmZvckVhY2goZnVuY3Rpb24ocm93KSB7CiAgICAgIGZvciAodmFyIGNvbHVtbiBpbiByb3cpIHsKICAgICAgICBpZiAoIShjb2x1bW4gaW4gY29sdW1uU2V0KSkgewogICAgICAgICAgY29sdW1ucy5wdXNoKGNvbHVtblNldFtjb2x1bW5dID0gY29sdW1uKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIGNvbHVtbnM7CiAgfQogIGZ1bmN0aW9uIHBhZCh2YWx1ZSwgd2lkdGgpIHsKICAgIHZhciBzID0gdmFsdWUgKyAiIiwgbGVuZ3RoID0gcy5sZW5ndGg7CiAgICByZXR1cm4gbGVuZ3RoIDwgd2lkdGggPyBuZXcgQXJyYXkod2lkdGggLSBsZW5ndGggKyAxKS5qb2luKDApICsgcyA6IHM7CiAgfQogIGZ1bmN0aW9uIGZvcm1hdFllYXIoeWVhcikgewogICAgcmV0dXJuIHllYXIgPCAwID8gIi0iICsgcGFkKC15ZWFyLCA2KSA6IHllYXIgPiA5OTk5ID8gIisiICsgcGFkKHllYXIsIDYpIDogcGFkKHllYXIsIDQpOwogIH0KICBmdW5jdGlvbiBmb3JtYXREYXRlKGRhdGUpIHsKICAgIHZhciBob3VycyA9IGRhdGUuZ2V0VVRDSG91cnMoKSwgbWludXRlcyA9IGRhdGUuZ2V0VVRDTWludXRlcygpLCBzZWNvbmRzID0gZGF0ZS5nZXRVVENTZWNvbmRzKCksIG1pbGxpc2Vjb25kcyA9IGRhdGUuZ2V0VVRDTWlsbGlzZWNvbmRzKCk7CiAgICByZXR1cm4gaXNOYU4oZGF0ZSkgPyAiSW52YWxpZCBEYXRlIiA6IGZvcm1hdFllYXIoZGF0ZS5nZXRVVENGdWxsWWVhcigpKSArICItIiArIHBhZChkYXRlLmdldFVUQ01vbnRoKCkgKyAxLCAyKSArICItIiArIHBhZChkYXRlLmdldFVUQ0RhdGUoKSwgMikgKyAobWlsbGlzZWNvbmRzID8gIlQiICsgcGFkKGhvdXJzLCAyKSArICI6IiArIHBhZChtaW51dGVzLCAyKSArICI6IiArIHBhZChzZWNvbmRzLCAyKSArICIuIiArIHBhZChtaWxsaXNlY29uZHMsIDMpICsgIloiIDogc2Vjb25kcyA/ICJUIiArIHBhZChob3VycywgMikgKyAiOiIgKyBwYWQobWludXRlcywgMikgKyAiOiIgKyBwYWQoc2Vjb25kcywgMikgKyAiWiIgOiBtaW51dGVzIHx8IGhvdXJzID8gIlQiICsgcGFkKGhvdXJzLCAyKSArICI6IiArIHBhZChtaW51dGVzLCAyKSArICJaIiA6ICIiKTsKICB9CiAgZnVuY3Rpb24gZHN2KGRlbGltaXRlcikgewogICAgdmFyIHJlRm9ybWF0ID0gbmV3IFJlZ0V4cCgnWyInICsgZGVsaW1pdGVyICsgIlxuXHJdIiksIERFTElNSVRFUiA9IGRlbGltaXRlci5jaGFyQ29kZUF0KDApOwogICAgZnVuY3Rpb24gcGFyc2UodGV4dCwgZikgewogICAgICB2YXIgY29udmVydCwgY29sdW1ucywgcm93cyA9IHBhcnNlUm93cyh0ZXh0LCBmdW5jdGlvbihyb3csIGkyKSB7CiAgICAgICAgaWYgKGNvbnZlcnQpCiAgICAgICAgICByZXR1cm4gY29udmVydChyb3csIGkyIC0gMSk7CiAgICAgICAgY29sdW1ucyA9IHJvdywgY29udmVydCA9IGYgPyBjdXN0b21Db252ZXJ0ZXIocm93LCBmKSA6IG9iamVjdENvbnZlcnRlcihyb3cpOwogICAgICB9KTsKICAgICAgcm93cy5jb2x1bW5zID0gY29sdW1ucyB8fCBbXTsKICAgICAgcmV0dXJuIHJvd3M7CiAgICB9CiAgICBmdW5jdGlvbiBwYXJzZVJvd3ModGV4dCwgZikgewogICAgICB2YXIgcm93cyA9IFtdLCBOID0gdGV4dC5sZW5ndGgsIEkgPSAwLCBuID0gMCwgdCwgZW9mID0gTiA8PSAwLCBlb2wgPSBmYWxzZTsKICAgICAgaWYgKHRleHQuY2hhckNvZGVBdChOIC0gMSkgPT09IE5FV0xJTkUpCiAgICAgICAgLS1OOwogICAgICBpZiAodGV4dC5jaGFyQ29kZUF0KE4gLSAxKSA9PT0gUkVUVVJOKQogICAgICAgIC0tTjsKICAgICAgZnVuY3Rpb24gdG9rZW4oKSB7CiAgICAgICAgaWYgKGVvZikKICAgICAgICAgIHJldHVybiBFT0Y7CiAgICAgICAgaWYgKGVvbCkKICAgICAgICAgIHJldHVybiBlb2wgPSBmYWxzZSwgRU9MOwogICAgICAgIHZhciBpMiwgaiA9IEksIGMyOwogICAgICAgIGlmICh0ZXh0LmNoYXJDb2RlQXQoaikgPT09IFFVT1RFKSB7CiAgICAgICAgICB3aGlsZSAoSSsrIDwgTiAmJiB0ZXh0LmNoYXJDb2RlQXQoSSkgIT09IFFVT1RFIHx8IHRleHQuY2hhckNvZGVBdCgrK0kpID09PSBRVU9URSkKICAgICAgICAgICAgOwogICAgICAgICAgaWYgKChpMiA9IEkpID49IE4pCiAgICAgICAgICAgIGVvZiA9IHRydWU7CiAgICAgICAgICBlbHNlIGlmICgoYzIgPSB0ZXh0LmNoYXJDb2RlQXQoSSsrKSkgPT09IE5FV0xJTkUpCiAgICAgICAgICAgIGVvbCA9IHRydWU7CiAgICAgICAgICBlbHNlIGlmIChjMiA9PT0gUkVUVVJOKSB7CiAgICAgICAgICAgIGVvbCA9IHRydWU7CiAgICAgICAgICAgIGlmICh0ZXh0LmNoYXJDb2RlQXQoSSkgPT09IE5FV0xJTkUpCiAgICAgICAgICAgICAgKytJOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHRleHQuc2xpY2UoaiArIDEsIGkyIC0gMSkucmVwbGFjZSgvIiIvZywgJyInKTsKICAgICAgICB9CiAgICAgICAgd2hpbGUgKEkgPCBOKSB7CiAgICAgICAgICBpZiAoKGMyID0gdGV4dC5jaGFyQ29kZUF0KGkyID0gSSsrKSkgPT09IE5FV0xJTkUpCiAgICAgICAgICAgIGVvbCA9IHRydWU7CiAgICAgICAgICBlbHNlIGlmIChjMiA9PT0gUkVUVVJOKSB7CiAgICAgICAgICAgIGVvbCA9IHRydWU7CiAgICAgICAgICAgIGlmICh0ZXh0LmNoYXJDb2RlQXQoSSkgPT09IE5FV0xJTkUpCiAgICAgICAgICAgICAgKytJOwogICAgICAgICAgfSBlbHNlIGlmIChjMiAhPT0gREVMSU1JVEVSKQogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIHJldHVybiB0ZXh0LnNsaWNlKGosIGkyKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGVvZiA9IHRydWUsIHRleHQuc2xpY2UoaiwgTik7CiAgICAgIH0KICAgICAgd2hpbGUgKCh0ID0gdG9rZW4oKSkgIT09IEVPRikgewogICAgICAgIHZhciByb3cgPSBbXTsKICAgICAgICB3aGlsZSAodCAhPT0gRU9MICYmIHQgIT09IEVPRikKICAgICAgICAgIHJvdy5wdXNoKHQpLCB0ID0gdG9rZW4oKTsKICAgICAgICBpZiAoZiAmJiAocm93ID0gZihyb3csIG4rKykpID09IG51bGwpCiAgICAgICAgICBjb250aW51ZTsKICAgICAgICByb3dzLnB1c2gocm93KTsKICAgICAgfQogICAgICByZXR1cm4gcm93czsKICAgIH0KICAgIGZ1bmN0aW9uIHByZWZvcm1hdEJvZHkocm93cywgY29sdW1ucykgewogICAgICByZXR1cm4gcm93cy5tYXAoZnVuY3Rpb24ocm93KSB7CiAgICAgICAgcmV0dXJuIGNvbHVtbnMubWFwKGZ1bmN0aW9uKGNvbHVtbikgewogICAgICAgICAgcmV0dXJuIGZvcm1hdFZhbHVlKHJvd1tjb2x1bW5dKTsKICAgICAgICB9KS5qb2luKGRlbGltaXRlcik7CiAgICAgIH0pOwogICAgfQogICAgZnVuY3Rpb24gZm9ybWF0KHJvd3MsIGNvbHVtbnMpIHsKICAgICAgaWYgKGNvbHVtbnMgPT0gbnVsbCkKICAgICAgICBjb2x1bW5zID0gaW5mZXJDb2x1bW5zKHJvd3MpOwogICAgICByZXR1cm4gW2NvbHVtbnMubWFwKGZvcm1hdFZhbHVlKS5qb2luKGRlbGltaXRlcildLmNvbmNhdChwcmVmb3JtYXRCb2R5KHJvd3MsIGNvbHVtbnMpKS5qb2luKCJcbiIpOwogICAgfQogICAgZnVuY3Rpb24gZm9ybWF0Qm9keShyb3dzLCBjb2x1bW5zKSB7CiAgICAgIGlmIChjb2x1bW5zID09IG51bGwpCiAgICAgICAgY29sdW1ucyA9IGluZmVyQ29sdW1ucyhyb3dzKTsKICAgICAgcmV0dXJuIHByZWZvcm1hdEJvZHkocm93cywgY29sdW1ucykuam9pbigiXG4iKTsKICAgIH0KICAgIGZ1bmN0aW9uIGZvcm1hdFJvd3Mocm93cykgewogICAgICByZXR1cm4gcm93cy5tYXAoZm9ybWF0Um93KS5qb2luKCJcbiIpOwogICAgfQogICAgZnVuY3Rpb24gZm9ybWF0Um93KHJvdykgewogICAgICByZXR1cm4gcm93Lm1hcChmb3JtYXRWYWx1ZSkuam9pbihkZWxpbWl0ZXIpOwogICAgfQogICAgZnVuY3Rpb24gZm9ybWF0VmFsdWUodmFsdWUpIHsKICAgICAgcmV0dXJuIHZhbHVlID09IG51bGwgPyAiIiA6IHZhbHVlIGluc3RhbmNlb2YgRGF0ZSA/IGZvcm1hdERhdGUodmFsdWUpIDogcmVGb3JtYXQudGVzdCh2YWx1ZSArPSAiIikgPyAnIicgKyB2YWx1ZS5yZXBsYWNlKC8iL2csICciIicpICsgJyInIDogdmFsdWU7CiAgICB9CiAgICByZXR1cm4gewogICAgICBwYXJzZSwKICAgICAgcGFyc2VSb3dzLAogICAgICBmb3JtYXQsCiAgICAgIGZvcm1hdEJvZHksCiAgICAgIGZvcm1hdFJvd3MsCiAgICAgIGZvcm1hdFJvdywKICAgICAgZm9ybWF0VmFsdWUKICAgIH07CiAgfQogIHZhciB0c3YgPSBkc3YoIgkiKTsKICB2YXIgdHN2UGFyc2VSb3dzID0gdHN2LnBhcnNlUm93czsKICBjb25zdCBjaHJvbUluZm9CaXNlY3RvciA9IGJpc2VjdG9yKChkKSA9PiBkLnBvcykubGVmdDsKICBjb25zdCBjaHJUb0FicyA9IChjaHJvbSwgY2hyb21Qb3MsIGNocm9tSW5mbykgPT4gY2hyb21JbmZvLmNoclBvc2l0aW9uc1tjaHJvbV0ucG9zICsgY2hyb21Qb3M7CiAgY29uc3QgYWJzVG9DaHIgPSAoYWJzUG9zaXRpb24sIGNocm9tSW5mbykgPT4gewogICAgaWYgKCFjaHJvbUluZm8gfHwgIWNocm9tSW5mby5jdW1Qb3NpdGlvbnMgfHwgIWNocm9tSW5mby5jdW1Qb3NpdGlvbnMubGVuZ3RoKSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfQogICAgbGV0IGluc2VydFBvaW50ID0gY2hyb21JbmZvQmlzZWN0b3IoY2hyb21JbmZvLmN1bVBvc2l0aW9ucywgYWJzUG9zaXRpb24pOwogICAgY29uc3QgbGFzdENociA9IGNocm9tSW5mby5jdW1Qb3NpdGlvbnNbY2hyb21JbmZvLmN1bVBvc2l0aW9ucy5sZW5ndGggLSAxXS5jaHI7CiAgICBjb25zdCBsYXN0TGVuZ3RoID0gY2hyb21JbmZvLmNocm9tTGVuZ3Roc1tsYXN0Q2hyXTsKICAgIGluc2VydFBvaW50IC09IGluc2VydFBvaW50ID4gMCAmJiAxOwogICAgbGV0IGNoclBvc2l0aW9uID0gTWF0aC5mbG9vcihhYnNQb3NpdGlvbiAtIGNocm9tSW5mby5jdW1Qb3NpdGlvbnNbaW5zZXJ0UG9pbnRdLnBvcyk7CiAgICBsZXQgb2Zmc2V0ID0gMDsKICAgIGlmIChjaHJQb3NpdGlvbiA8IDApIHsKICAgICAgb2Zmc2V0ID0gY2hyUG9zaXRpb24gLSAxOwogICAgICBjaHJQb3NpdGlvbiA9IDE7CiAgICB9CiAgICBpZiAoaW5zZXJ0UG9pbnQgPT09IGNocm9tSW5mby5jdW1Qb3NpdGlvbnMubGVuZ3RoIC0gMSAmJiBjaHJQb3NpdGlvbiA+IGxhc3RMZW5ndGgpIHsKICAgICAgb2Zmc2V0ID0gY2hyUG9zaXRpb24gLSBsYXN0TGVuZ3RoOwogICAgICBjaHJQb3NpdGlvbiA9IGxhc3RMZW5ndGg7CiAgICB9CiAgICByZXR1cm4gW2Nocm9tSW5mby5jdW1Qb3NpdGlvbnNbaW5zZXJ0UG9pbnRdLmNociwgY2hyUG9zaXRpb24sIG9mZnNldCwgaW5zZXJ0UG9pbnRdOwogIH07CiAgZnVuY3Rpb24gcGFyc2VDaHJTaXplcyhyb3dzKSB7CiAgICBjb25zdCBpbmZvID0gewogICAgICBjdW1Qb3NpdGlvbnM6IFtdLAogICAgICBjaHJvbUxlbmd0aHM6IHt9LAogICAgICBjaHJQb3NpdGlvbnM6IHt9LAogICAgICB0b3RhbExlbmd0aDogMAogICAgfTsKICAgIHJvd3MuZm9yRWFjaCgoZCwgaTIpID0+IHsKICAgICAgY29uc3QgY2hyID0gZFswXTsKICAgICAgY29uc3QgbGVuZ3RoID0gTnVtYmVyKGRbMV0pOwogICAgICBjb25zdCBjaHJQb3NpdGlvbiA9IHsgaWQ6IGkyLCBjaHIsIHBvczogaW5mby50b3RhbExlbmd0aCB9OwogICAgICBpbmZvLmNoclBvc2l0aW9uc1tjaHJdID0gY2hyUG9zaXRpb247CiAgICAgIGluZm8uY2hyb21MZW5ndGhzW2Nocl0gPSBsZW5ndGg7CiAgICAgIGluZm8uY3VtUG9zaXRpb25zLnB1c2goY2hyUG9zaXRpb24pOwogICAgICBpbmZvLnRvdGFsTGVuZ3RoICs9IGxlbmd0aDsKICAgIH0pOwogICAgcmV0dXJuIGluZm87CiAgfQogIGFzeW5jIGZ1bmN0aW9uIGZldGNoQ2hyb21JbmZvKHVybCkgewogICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwpOwogICAgY29uc3QgY2hySW5mb1RleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7CiAgICBjb25zdCBkYXRhMiA9IHRzdlBhcnNlUm93cyhjaHJJbmZvVGV4dCk7CiAgICBjb25zdCBpbmZvID0gcGFyc2VDaHJTaXplcyhkYXRhMik7CiAgICByZXR1cm4gewogICAgICAuLi5pbmZvLAogICAgICBhYnNUb0NocjogKGFic1BvcykgPT4gaW5mby5jaHJQb3NpdGlvbnMgPyBhYnNUb0NocihhYnNQb3MsIGluZm8pIDogbnVsbCwKICAgICAgY2hyVG9BYnM6IChbY2hyTmFtZSwgY2hyUG9zXSkgPT4gaW5mby5jaHJQb3NpdGlvbnMgPyBjaHJUb0FicyhjaHJOYW1lLCBjaHJQb3MsIGluZm8pIDogbnVsbAogICAgfTsKICB9CiAgY2xhc3MgUmVtb3RlRmlsZSBleHRlbmRzIGRpc3QuUmVtb3RlRmlsZSB7CiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTsKICAgICAgdGhpcy5yZWFkID0gYXN5bmMgKGJ1ZmZlcjIsIG9mZnNldCA9IDAsIGxlbmd0aCwgcG9zaXRpb24gPSAwLCBvcHRzID0ge30pID0+IHsKICAgICAgICBjb25zdCB7IGhlYWRlcnMgPSB7fSwgc2lnbmFsLCBvdmVycmlkZXMgPSB7fSB9ID0gb3B0czsKICAgICAgICBpZiAobGVuZ3RoIDwgSW5maW5pdHkpIHsKICAgICAgICAgIGhlYWRlcnMucmFuZ2UgPSBgYnl0ZXM9JHtwb3NpdGlvbn0tJHtwb3NpdGlvbiArIGxlbmd0aH1gOwogICAgICAgIH0gZWxzZSBpZiAobGVuZ3RoID09PSBJbmZpbml0eSAmJiBwb3NpdGlvbiAhPT0gMCkgewogICAgICAgICAgaGVhZGVycy5yYW5nZSA9IGBieXRlcz0ke3Bvc2l0aW9ufS1gOwogICAgICAgIH0KICAgICAgICBjb25zdCBhcmdzID0gewogICAgICAgICAgLi4udGhpcy5iYXNlT3ZlcnJpZGVzLAogICAgICAgICAgLi4ub3ZlcnJpZGVzLAogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAuLi5oZWFkZXJzLAogICAgICAgICAgICAuLi5vdmVycmlkZXMuaGVhZGVycywKICAgICAgICAgICAgLi4udGhpcy5iYXNlT3ZlcnJpZGVzLmhlYWRlcnMKICAgICAgICAgIH0sCiAgICAgICAgICBtZXRob2Q6ICJHRVQiLAogICAgICAgICAgcmVkaXJlY3Q6ICJmb2xsb3ciLAogICAgICAgICAgbW9kZTogImNvcnMiLAogICAgICAgICAgc2lnbmFsCiAgICAgICAgfTsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuZmV0Y2godGhpcy51cmwsIGFyZ3MpOwogICAgICAgIGlmICghcmVzcG9uc2Uub2spIHsKICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSFRUUCAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fSAke3RoaXMudXJsfWApOwogICAgICAgIH0KICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDAgfHwgcmVzcG9uc2Uuc3RhdHVzID09PSAyMDYpIHsKICAgICAgICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHRoaXMuZ2V0QnVmZmVyRnJvbVJlc3BvbnNlKHJlc3BvbnNlKTsKICAgICAgICAgIGNvbnN0IGJ5dGVzQ29waWVkID0gcmVzcG9uc2VEYXRhLmNvcHkoYnVmZmVyMiwgb2Zmc2V0LCAwLCBNYXRoLm1pbihsZW5ndGgsIHJlc3BvbnNlRGF0YS5sZW5ndGgpKTsKICAgICAgICAgIGNvbnN0IHJlcyA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCJjb250ZW50LXJhbmdlIik7CiAgICAgICAgICBjb25zdCBzaXplTWF0Y2ggPSAvXC8oXGQrKSQvLmV4ZWMocmVzIHx8ICIiKTsKICAgICAgICAgIGlmIChzaXplTWF0Y2ggJiYgc2l6ZU1hdGNoWzFdKSB7CiAgICAgICAgICAgIHRoaXMuX3N0YXQgPSB7IHNpemU6IHBhcnNlSW50KHNpemVNYXRjaFsxXSwgMTApIH07CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4geyBieXRlc1JlYWQ6IGJ5dGVzQ29waWVkLCBidWZmZXI6IGJ1ZmZlcjIgfTsKICAgICAgICB9CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIVFRQICR7cmVzcG9uc2Uuc3RhdHVzfSBmZXRjaGluZyAke3RoaXMudXJsfWApOwogICAgICB9OwogICAgfQogIH0KICBmdW5jdGlvbiBwYXJzZU1EKG1kU3RyaW5nLCB1c2VDb3VudHMpIHsKICAgIGxldCBjdXJyUG9zID0gMDsKICAgIGxldCBjdXJyTnVtID0gMDsKICAgIGxldCBkZWxldGlvbkVuY291bnRlcmVkID0gZmFsc2U7CiAgICBsZXQgYmFtU2VxU2hpZnQgPSAwOwogICAgY29uc3Qgc3Vic3RpdHV0aW9ucyA9IFtdOwogICAgZm9yIChsZXQgaTIgPSAwOyBpMiA8IG1kU3RyaW5nLmxlbmd0aDsgaTIrKykgewogICAgICBpZiAobWRTdHJpbmdbaTJdLm1hdGNoKC9bMC05XS9nKSkgewogICAgICAgIGN1cnJOdW0gPSBjdXJyTnVtICogMTAgKyArbWRTdHJpbmdbaTJdOwogICAgICAgIGRlbGV0aW9uRW5jb3VudGVyZWQgPSBmYWxzZTsKICAgICAgfSBlbHNlIGlmIChtZFN0cmluZ1tpMl0gPT09ICJeIikgewogICAgICAgIGRlbGV0aW9uRW5jb3VudGVyZWQgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIGN1cnJQb3MgKz0gY3Vyck51bTsKICAgICAgICBpZiAodXNlQ291bnRzKSB7CiAgICAgICAgICBzdWJzdGl0dXRpb25zLnB1c2goewogICAgICAgICAgICBsZW5ndGg6IGN1cnJOdW0sCiAgICAgICAgICAgIHR5cGU6IG1kU3RyaW5nW2kyXQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIGlmIChkZWxldGlvbkVuY291bnRlcmVkKSB7CiAgICAgICAgICBiYW1TZXFTaGlmdCAtPSAxOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzdWJzdGl0dXRpb25zLnB1c2goewogICAgICAgICAgICBwb3M6IGN1cnJQb3MsCiAgICAgICAgICAgIGJhc2U6IG1kU3RyaW5nW2kyXSwKICAgICAgICAgICAgbGVuZ3RoOiAxLAogICAgICAgICAgICBiYW1TZXFTaGlmdAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGN1cnJOdW0gPSAwOwogICAgICAgIGN1cnJQb3MgKz0gMTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHN1YnN0aXR1dGlvbnM7CiAgfQogIGZ1bmN0aW9uIGdldFN1YnN0aXR1dGlvbnMoc2VnbWVudCwgc2VxKSB7CiAgICBsZXQgc3Vic3RpdHV0aW9ucyA9IFtdOwogICAgbGV0IHNvZnRDbGlwcGluZ0F0UmVhZFN0YXJ0ID0gbnVsbDsKICAgIGlmIChzZWdtZW50LmNpZ2FyKSB7CiAgICAgIGNvbnN0IGNpZ2FyU3VicyA9IHBhcnNlTUQoc2VnbWVudC5jaWdhciwgdHJ1ZSk7CiAgICAgIGxldCBjdXJyUG9zID0gMDsKICAgICAgZm9yIChjb25zdCBzdWIgb2YgY2lnYXJTdWJzKSB7CiAgICAgICAgaWYgKHN1Yi50eXBlID09PSAiWCIpIHsKICAgICAgICAgIHN1YnN0aXR1dGlvbnMucHVzaCh7CiAgICAgICAgICAgIHBvczogY3VyclBvcywKICAgICAgICAgICAgbGVuZ3RoOiBzdWIubGVuZ3RoLAogICAgICAgICAgICB0eXBlOiAiWCIKICAgICAgICAgIH0pOwogICAgICAgICAgY3VyclBvcyArPSBzdWIubGVuZ3RoOwogICAgICAgIH0gZWxzZSBpZiAoc3ViLnR5cGUgPT09ICJJIikgewogICAgICAgICAgc3Vic3RpdHV0aW9ucy5wdXNoKHsKICAgICAgICAgICAgcG9zOiBjdXJyUG9zLAogICAgICAgICAgICBsZW5ndGg6IHN1Yi5sZW5ndGgsCiAgICAgICAgICAgIHR5cGU6ICJJIgogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIGlmIChzdWIudHlwZSA9PT0gIkQiKSB7CiAgICAgICAgICBzdWJzdGl0dXRpb25zLnB1c2goewogICAgICAgICAgICBwb3M6IGN1cnJQb3MsCiAgICAgICAgICAgIGxlbmd0aDogc3ViLmxlbmd0aCwKICAgICAgICAgICAgdHlwZTogIkQiCiAgICAgICAgICB9KTsKICAgICAgICAgIGN1cnJQb3MgKz0gc3ViLmxlbmd0aDsKICAgICAgICB9IGVsc2UgaWYgKHN1Yi50eXBlID09PSAiTiIpIHsKICAgICAgICAgIHN1YnN0aXR1dGlvbnMucHVzaCh7CiAgICAgICAgICAgIHBvczogY3VyclBvcywKICAgICAgICAgICAgbGVuZ3RoOiBzdWIubGVuZ3RoLAogICAgICAgICAgICB0eXBlOiAiTiIKICAgICAgICAgIH0pOwogICAgICAgICAgY3VyclBvcyArPSBzdWIubGVuZ3RoOwogICAgICAgIH0gZWxzZSBpZiAoc3ViLnR5cGUgPT09ICI9IiB8fCBzdWIudHlwZSA9PT0gIk0iKSB7CiAgICAgICAgICBjdXJyUG9zICs9IHN1Yi5sZW5ndGg7CiAgICAgICAgfSBlbHNlCiAgICAgICAgICA7CiAgICAgIH0KICAgICAgY29uc3QgZmlyc3RTdWIgPSBjaWdhclN1YnNbMF07CiAgICAgIGNvbnN0IGxhc3RTdWIgPSBjaWdhclN1YnNbY2lnYXJTdWJzLmxlbmd0aCAtIDFdOwogICAgICBpZiAoZmlyc3RTdWIudHlwZSA9PT0gIlMiKSB7CiAgICAgICAgc29mdENsaXBwaW5nQXRSZWFkU3RhcnQgPSBmaXJzdFN1YjsKICAgICAgICBzdWJzdGl0dXRpb25zLnB1c2goewogICAgICAgICAgcG9zOiAtZmlyc3RTdWIubGVuZ3RoLAogICAgICAgICAgdHlwZTogIlMiLAogICAgICAgICAgbGVuZ3RoOiBmaXJzdFN1Yi5sZW5ndGgKICAgICAgICB9KTsKICAgICAgfQogICAgICBpZiAobGFzdFN1Yi50eXBlID09PSAiUyIpIHsKICAgICAgICBzdWJzdGl0dXRpb25zLnB1c2goewogICAgICAgICAgcG9zOiBzZWdtZW50LmVuZCAtIHNlZ21lbnQuc3RhcnQsCiAgICAgICAgICBsZW5ndGg6IGxhc3RTdWIubGVuZ3RoLAogICAgICAgICAgdHlwZTogIlMiCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgaWYgKGZpcnN0U3ViLnR5cGUgPT09ICJIIikgewogICAgICAgIHN1YnN0aXR1dGlvbnMucHVzaCh7CiAgICAgICAgICBwb3M6IC1maXJzdFN1Yi5sZW5ndGgsCiAgICAgICAgICB0eXBlOiAiSCIsCiAgICAgICAgICBsZW5ndGg6IGZpcnN0U3ViLmxlbmd0aAogICAgICAgIH0pOwogICAgICB9CiAgICAgIGlmIChsYXN0U3ViLnR5cGUgPT09ICJIIikgewogICAgICAgIHN1YnN0aXR1dGlvbnMucHVzaCh7CiAgICAgICAgICBwb3M6IHNlZ21lbnQuZW5kIC0gc2VnbWVudC5zdGFydCwKICAgICAgICAgIGxlbmd0aDogbGFzdFN1Yi5sZW5ndGgsCiAgICAgICAgICB0eXBlOiAiSCIKICAgICAgICB9KTsKICAgICAgfQogICAgfQogICAgaWYgKHNlZ21lbnQubWQpIHsKICAgICAgY29uc3QgbWRTdWJzdGl0dXRpb25zID0gcGFyc2VNRChzZWdtZW50Lm1kLCBmYWxzZSk7CiAgICAgIG1kU3Vic3RpdHV0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKHN1YnN0aXR1dGlvbikgewogICAgICAgIGxldCBwb3NTdGFydCA9IHN1YnN0aXR1dGlvblsicG9zIl0gKyBzdWJzdGl0dXRpb25bImJhbVNlcVNoaWZ0Il07CiAgICAgICAgbGV0IHBvc0VuZCA9IHBvc1N0YXJ0ICsgc3Vic3RpdHV0aW9uWyJsZW5ndGgiXTsKICAgICAgICBpZiAoc29mdENsaXBwaW5nQXRSZWFkU3RhcnQgIT09IG51bGwpIHsKICAgICAgICAgIHBvc1N0YXJ0ICs9IHNvZnRDbGlwcGluZ0F0UmVhZFN0YXJ0Lmxlbmd0aDsKICAgICAgICAgIHBvc0VuZCArPSBzb2Z0Q2xpcHBpbmdBdFJlYWRTdGFydC5sZW5ndGg7CiAgICAgICAgfQogICAgICAgIHN1YnN0aXR1dGlvblsidmFyaWFudCJdID0gc2VxLnN1YnN0cmluZyhwb3NTdGFydCwgcG9zRW5kKTsKICAgICAgICBkZWxldGUgc3Vic3RpdHV0aW9uWyJiYW1TZXFTaGlmdCJdOwogICAgICB9KTsKICAgICAgc3Vic3RpdHV0aW9ucyA9IG1kU3Vic3RpdHV0aW9ucy5jb25jYXQoc3Vic3RpdHV0aW9ucyk7CiAgICB9CiAgICByZXR1cm4gc3Vic3RpdHV0aW9uczsKICB9CiAgZnVuY3Rpb24gbmF0Y21wKHhSb3csIHlSb3cpIHsKICAgIHZhciBfYSwgX2I7CiAgICBjb25zdCB4ID0geFJvd1swXTsKICAgIGNvbnN0IHkgPSB5Um93WzBdOwogICAgaWYgKHguaW5kZXhPZigiXyIpID49IDApIHsKICAgICAgY29uc3QgeFBhcnRzMiA9IHguc3BsaXQoIl8iKTsKICAgICAgaWYgKHkuaW5kZXhPZigiXyIpID49IDApIHsKICAgICAgICBjb25zdCB5UGFydHMyID0geS5zcGxpdCgiXyIpOwogICAgICAgIHJldHVybiBuYXRjbXAoeFBhcnRzMlsxXSwgeVBhcnRzMlsxXSk7CiAgICAgIH0KICAgICAgcmV0dXJuIDE7CiAgICB9CiAgICBpZiAoeS5pbmRleE9mKCJfIikgPj0gMCkgewogICAgICByZXR1cm4gLTE7CiAgICB9CiAgICBjb25zdCB4UGFydHMgPSBbXTsKICAgIGNvbnN0IHlQYXJ0cyA9IFtdOwogICAgZm9yIChjb25zdCBwYXJ0IG9mIChfYSA9IHgubWF0Y2goLyhcZCt8W15cZF0rKS9nKSkgIT0gbnVsbCA/IF9hIDogW10pIHsKICAgICAgeFBhcnRzLnB1c2goTnVtYmVyLmlzTmFOKHBhcnQpID8gcGFydC50b0xvd2VyQ2FzZSgpIDogK3BhcnQpOwogICAgfQogICAgZm9yIChjb25zdCBwYXJ0IG9mIChfYiA9IHkubWF0Y2goLyhcZCt8W15cZF0rKS9nKSkgIT0gbnVsbCA/IF9iIDogW10pIHsKICAgICAgeFBhcnRzLnB1c2goTnVtYmVyLmlzTmFOKHBhcnQpID8gcGFydC50b0xvd2VyQ2FzZSgpIDogK3BhcnQpOwogICAgfQogICAgZm9yIChjb25zdCBrZXkgb2YgWyJtIiwgInkiLCAieCJdKSB7CiAgICAgIGlmICh5LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoa2V5KSkKICAgICAgICByZXR1cm4gLTE7CiAgICAgIGlmICh4LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoa2V5KSkKICAgICAgICByZXR1cm4gMTsKICAgIH0KICAgIGlmICh4UGFydHMgPCB5UGFydHMpIHsKICAgICAgcmV0dXJuIC0xOwogICAgfSBlbHNlIGlmICh5UGFydHMgPiB4UGFydHMpIHsKICAgICAgcmV0dXJuIDE7CiAgICB9CiAgICByZXR1cm4gMDsKICB9CiAgZnVuY3Rpb24gcGFyc2VDaHJvbXNpemVzUm93cyhkYXRhMikgewogICAgY29uc3QgY3VtVmFsdWVzID0gW107CiAgICBjb25zdCBjaHJvbUxlbmd0aHMgPSB7fTsKICAgIGNvbnN0IGNoclBvc2l0aW9ucyA9IHt9OwogICAgbGV0IHRvdGFsTGVuZ3RoID0gMDsKICAgIGZvciAobGV0IGkyID0gMDsgaTIgPCBkYXRhMi5sZW5ndGg7IGkyKyspIHsKICAgICAgY29uc3QgbGVuZ3RoID0gTnVtYmVyKGRhdGEyW2kyXVsxXSk7CiAgICAgIHRvdGFsTGVuZ3RoICs9IGxlbmd0aDsKICAgICAgY29uc3QgbmV3VmFsdWUgPSB7CiAgICAgICAgaWQ6IGkyLAogICAgICAgIGNocjogZGF0YTJbaTJdWzBdLAogICAgICAgIHBvczogdG90YWxMZW5ndGggLSBsZW5ndGgKICAgICAgfTsKICAgICAgY3VtVmFsdWVzLnB1c2gobmV3VmFsdWUpOwogICAgICBjaHJQb3NpdGlvbnNbbmV3VmFsdWUuY2hyXSA9IG5ld1ZhbHVlOwogICAgICBjaHJvbUxlbmd0aHNbZGF0YTJbaTJdWzBdXSA9IGxlbmd0aDsKICAgIH0KICAgIHJldHVybiB7CiAgICAgIGN1bVBvc2l0aW9uczogY3VtVmFsdWVzLAogICAgICBjaHJQb3NpdGlvbnMsCiAgICAgIHRvdGFsTGVuZ3RoLAogICAgICBjaHJvbUxlbmd0aHMKICAgIH07CiAgfQogIGNvbnN0IGJhbVJlY29yZFRvSnNvbiA9IChiYW1SZWNvcmQsIGNock5hbWUsIGNock9mZnNldCkgPT4gewogICAgY29uc3Qgc2VxID0gYmFtUmVjb3JkLmdldCgic2VxIik7CiAgICBjb25zdCBzZWdtZW50ID0gewogICAgICBpZDogYmFtUmVjb3JkLl9pZCwKICAgICAgbmFtZTogYmFtUmVjb3JkLmdldCgibmFtZSIpLAogICAgICBzdGFydDogK2JhbVJlY29yZC5kYXRhLnN0YXJ0ICsgMSArIGNock9mZnNldCwKICAgICAgZW5kOiArYmFtUmVjb3JkLmRhdGEuZW5kICsgMSArIGNock9mZnNldCwKICAgICAgbWQ6IGJhbVJlY29yZC5nZXQoIk1EIiksCiAgICAgIGNock5hbWUsCiAgICAgIGNock9mZnNldCwKICAgICAgY2lnYXI6IGJhbVJlY29yZC5nZXQoImNpZ2FyIiksCiAgICAgIG1hcHE6IGJhbVJlY29yZC5nZXQoIm1xIiksCiAgICAgIHN0cmFuZDogYmFtUmVjb3JkLmdldCgic3RyYW5kIikgPT09IDEgPyAiKyIgOiAiLSIKICAgIH07CiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihzZWdtZW50LCB7IHN1YnN0aXR1dGlvbnM6IGdldFN1YnN0aXR1dGlvbnMoc2VnbWVudCwgc2VxKSB9KTsKICB9OwogIGNvbnN0IGJhbUZpbGVzID0ge307CiAgY29uc3QgYmFtSGVhZGVycyA9IHt9OwogIGNvbnN0IGNocm9tU2l6ZXMgPSB7fTsKICBjb25zdCBNQVhfVElMRVMgPSAyMDsKICBjb25zdCB0aWxlVmFsdWVzID0gbmV3IFF1aWNrTFJVKHsgbWF4U2l6ZTogTUFYX1RJTEVTIH0pOwogIGNvbnN0IHRpbGVzZXRJbmZvcyA9IHt9OwogIGNvbnN0IGRhdGFDb25mcyA9IHt9OwogIGNvbnN0IGluaXQgPSAodWlkMiwgewogICAgYmFtVXJsLAogICAgYmFpVXJsLAogICAgY2hyb21TaXplc1VybCwKICAgIGxvYWRNYXRlcyA9IGZhbHNlLAogICAgbWF4SW5zZXJ0U2l6ZSA9IDVlMywKICAgIGV4dHJhY3RKdW5jdGlvbiA9IGZhbHNlLAogICAganVuY3Rpb25NaW5Db3ZlcmFnZSA9IDEKICB9KSA9PiB7CiAgICBpZiAoIWJhbUZpbGVzW2JhbVVybF0pIHsKICAgICAgYmFtRmlsZXNbYmFtVXJsXSA9IG5ldyBkaXN0JDMuQmFtRmlsZSh7CiAgICAgICAgYmFtRmlsZWhhbmRsZTogbmV3IFJlbW90ZUZpbGUoYmFtVXJsKSwKICAgICAgICBiYWlGaWxlaGFuZGxlOiBuZXcgUmVtb3RlRmlsZShiYWlVcmwpCiAgICAgIH0pOwogICAgICBiYW1IZWFkZXJzW2JhbVVybF0gPSBiYW1GaWxlc1tiYW1VcmxdLmdldEhlYWRlcigpOwogICAgfQogICAgaWYgKGNocm9tU2l6ZXNVcmwpIHsKICAgICAgY2hyb21TaXplc1tjaHJvbVNpemVzVXJsXSA9IGZldGNoQ2hyb21JbmZvKGNocm9tU2l6ZXNVcmwpOwogICAgfQogICAgZGF0YUNvbmZzW3VpZDJdID0geyBiYW1VcmwsIGNocm9tU2l6ZXNVcmwsIGxvYWRNYXRlcywgbWF4SW5zZXJ0U2l6ZSwgZXh0cmFjdEp1bmN0aW9uLCBqdW5jdGlvbk1pbkNvdmVyYWdlIH07CiAgfTsKICBjb25zdCB0aWxlc2V0SW5mbyA9ICh1aWQyKSA9PiB7CiAgICBpZiAodWlkMiBpbiB0aWxlc2V0SW5mb3MpIHsKICAgICAgcmV0dXJuIHRpbGVzZXRJbmZvc1t1aWQyXTsKICAgIH0KICAgIGNvbnN0IHsgY2hyb21TaXplc1VybCwgYmFtVXJsIH0gPSBkYXRhQ29uZnNbdWlkMl07CiAgICBjb25zdCBwcm9taXNlcyA9IFsKICAgICAgYmFtSGVhZGVyc1tiYW1VcmxdLAogICAgICBjaHJvbVNpemVzVXJsID8gY2hyb21TaXplc1tjaHJvbVNpemVzVXJsXSA6IHZvaWQgMAogICAgXTsKICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbigocmVzKSA9PiB7CiAgICAgIGNvbnN0IG1heWJlSW5mbyA9IHJlc1sxXTsKICAgICAgY29uc3QgVElMRV9TSVpFID0gMTAyNDsKICAgICAgbGV0IGNocm9tSW5mbzsKICAgICAgaWYgKG1heWJlSW5mbykgewogICAgICAgIGNocm9tSW5mbyA9IG1heWJlSW5mbzsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zdCBjaHJvbXMgPSBbXTsKICAgICAgICBjb25zdCBpbmRleFRvQ2hyID0gYmFtRmlsZXNbYmFtVXJsXS5pbmRleFRvQ2hyOwogICAgICAgIGZvciAoY29uc3QgeyByZWZOYW1lOiBjaHJOYW1lLCBsZW5ndGggfSBvZiBpbmRleFRvQ2hyKSB7CiAgICAgICAgICBjaHJvbXMucHVzaChbY2hyTmFtZSwgbGVuZ3RoXSk7CiAgICAgICAgfQogICAgICAgIGNocm9tcy5zb3J0KG5hdGNtcCk7CiAgICAgICAgY2hyb21JbmZvID0gcGFyc2VDaHJvbXNpemVzUm93cyhjaHJvbXMpOwogICAgICB9CiAgICAgIHRpbGVzZXRJbmZvc1t1aWQyXSA9IHsKICAgICAgICB0aWxlX3NpemU6IFRJTEVfU0laRSwKICAgICAgICBiaW5zX3Blcl9kaW1lbnNpb246IFRJTEVfU0laRSwKICAgICAgICBtYXhfem9vbTogTWF0aC5jZWlsKE1hdGgubG9nKGNocm9tSW5mby50b3RhbExlbmd0aCAvIFRJTEVfU0laRSkgLyBNYXRoLmxvZygyKSksCiAgICAgICAgbWF4X3dpZHRoOiBjaHJvbUluZm8udG90YWxMZW5ndGgsCiAgICAgICAgbWluX3BvczogWzBdLAogICAgICAgIG1heF9wb3M6IFtjaHJvbUluZm8udG90YWxMZW5ndGhdLAogICAgICAgIGNocm9tSW5mbwogICAgICB9OwogICAgICByZXR1cm4gdGlsZXNldEluZm9zW3VpZDJdOwogICAgfSk7CiAgfTsKICBjb25zdCB0aWxlID0gYXN5bmMgKHVpZDIsIHosIHgpID0+IHsKICAgIGNvbnN0IE1BWF9USUxFX1dJRFRIID0gMmU1OwogICAgY29uc3QgeyBiYW1VcmwsIGxvYWRNYXRlcyB9ID0gZGF0YUNvbmZzW3VpZDJdOwogICAgY29uc3QgYmFtRmlsZTIgPSBiYW1GaWxlc1tiYW1VcmxdOwogICAgY29uc3QgaW5mbyA9IGF3YWl0IHRpbGVzZXRJbmZvKHVpZDIpOwogICAgaWYgKCEoIm1heF93aWR0aCIgaW4gaW5mbykpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCJ0aWxlc2V0SW5mbyBkb2VzIG5vdCBpbmNsdWRlIGBtYXhfd2lkdGhgLCB3aGljaCBpcyByZXF1aXJlZCBmb3IgdGhlIEdvc2xpbmcgQmFtRGF0YUZldGNoZXIuIik7CiAgICB9CiAgICBjb25zdCB0aWxlV2lkdGggPSAraW5mby5tYXhfd2lkdGggLyAyICoqICt6OwogICAgY29uc3QgcmVjb3JkUHJvbWlzZXMgPSBbXTsKICAgIGlmICh0aWxlV2lkdGggPiBNQVhfVElMRV9XSURUSCkgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHJlc29sdmUoW10pKTsKICAgIH0KICAgIGxldCBtaW5YID0gaW5mby5taW5fcG9zWzBdICsgeCAqIHRpbGVXaWR0aDsKICAgIGNvbnN0IG1heFggPSBpbmZvLm1pbl9wb3NbMF0gKyAoeCArIDEpICogdGlsZVdpZHRoOwogICAgY29uc3QgeyBjaHJvbUxlbmd0aHMsIGN1bVBvc2l0aW9ucyB9ID0gaW5mby5jaHJvbUluZm87CiAgICBjb25zdCBvcHQgPSB7CiAgICAgIHZpZXdBc1BhaXJzOiBsb2FkTWF0ZXMKICAgIH07CiAgICBmb3IgKGxldCBpMiA9IDA7IGkyIDwgY3VtUG9zaXRpb25zLmxlbmd0aDsgaTIrKykgewogICAgICBjb25zdCBjaHJvbU5hbWUgPSBjdW1Qb3NpdGlvbnNbaTJdLmNocjsKICAgICAgY29uc3QgY2hyb21TdGFydCA9IGN1bVBvc2l0aW9uc1tpMl0ucG9zOwogICAgICBjb25zdCBjaHJvbUVuZCA9IGN1bVBvc2l0aW9uc1tpMl0ucG9zICsgY2hyb21MZW5ndGhzW2Nocm9tTmFtZV07CiAgICAgIHRpbGVWYWx1ZXMuc2V0KGAke3VpZDJ9LiR7en0uJHt4fWAsIFtdKTsKICAgICAgaWYgKGNocm9tU3RhcnQgPD0gbWluWCAmJiBtaW5YIDwgY2hyb21FbmQpIHsKICAgICAgICBpZiAobWF4WCA+IGNocm9tRW5kKSB7CiAgICAgICAgICByZWNvcmRQcm9taXNlcy5wdXNoKGJhbUZpbGUyLmdldFJlY29yZHNGb3JSYW5nZShjaHJvbU5hbWUsIG1pblggLSBjaHJvbVN0YXJ0LCBjaHJvbUVuZCAtIGNocm9tU3RhcnQsIG9wdCkudGhlbigocmVjb3JkcykgPT4gewogICAgICAgICAgICBjb25zdCBtYXBwZWRSZWNvcmRzID0gcmVjb3Jkcy5tYXAoKHJlYykgPT4gYmFtUmVjb3JkVG9Kc29uKHJlYywgY2hyb21OYW1lLCBjdW1Qb3NpdGlvbnNbaTJdLnBvcykpOwogICAgICAgICAgICB0aWxlVmFsdWVzLnNldChgJHt1aWQyfS4ke3p9LiR7eH1gLCB0aWxlVmFsdWVzLmdldChgJHt1aWQyfS4ke3p9LiR7eH1gKS5jb25jYXQobWFwcGVkUmVjb3JkcykpOwogICAgICAgICAgICByZXR1cm4gW107CiAgICAgICAgICB9KSk7CiAgICAgICAgICBtaW5YID0gY2hyb21FbmQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnN0IHN0YXJ0UG9zID0gTWF0aC5mbG9vcihtaW5YIC0gY2hyb21TdGFydCk7CiAgICAgICAgICBjb25zdCBlbmRQb3MgPSBNYXRoLmNlaWwobWF4WCAtIGNocm9tU3RhcnQpOwogICAgICAgICAgcmVjb3JkUHJvbWlzZXMucHVzaChiYW1GaWxlMi5nZXRSZWNvcmRzRm9yUmFuZ2UoY2hyb21OYW1lLCBzdGFydFBvcywgZW5kUG9zLCBvcHQpLnRoZW4oKHJlY29yZHMpID0+IHsKICAgICAgICAgICAgY29uc3QgbWFwcGVkUmVjb3JkcyA9IHJlY29yZHMubWFwKChyZWMpID0+IGJhbVJlY29yZFRvSnNvbihyZWMsIGNocm9tTmFtZSwgY3VtUG9zaXRpb25zW2kyXS5wb3MpKTsKICAgICAgICAgICAgdGlsZVZhbHVlcy5zZXQoYCR7dWlkMn0uJHt6fS4ke3h9YCwgdGlsZVZhbHVlcy5nZXQoYCR7dWlkMn0uJHt6fS4ke3h9YCkuY29uY2F0KG1hcHBlZFJlY29yZHMpKTsKICAgICAgICAgICAgcmV0dXJuIFtdOwogICAgICAgICAgfSkpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICByZXR1cm4gUHJvbWlzZS5hbGwocmVjb3JkUHJvbWlzZXMpLnRoZW4oKHZhbHVlcykgPT4gewogICAgICByZXR1cm4gdmFsdWVzLmZsYXQoKTsKICAgIH0pOwogIH07CiAgY29uc3QgZmV0Y2hUaWxlc0RlYm91bmNlZCA9IGFzeW5jICh1aWQyLCB0aWxlSWRzKSA9PiB7CiAgICBjb25zdCB0aWxlcyA9IHt9OwogICAgY29uc3QgdmFsaWRUaWxlSWRzID0gW107CiAgICBjb25zdCB0aWxlUHJvbWlzZXMgPSBbXTsKICAgIGZvciAoY29uc3QgdGlsZUlkIG9mIHRpbGVJZHMpIHsKICAgICAgY29uc3QgcGFydHMgPSB0aWxlSWQuc3BsaXQoIi4iKTsKICAgICAgY29uc3QgeiA9IHBhcnNlSW50KHBhcnRzWzBdLCAxMCk7CiAgICAgIGNvbnN0IHggPSBwYXJzZUludChwYXJ0c1sxXSwgMTApOwogICAgICBpZiAoTnVtYmVyLmlzTmFOKHgpIHx8IE51bWJlci5pc05hTih6KSkgewogICAgICAgIGNvbnNvbGUud2FybigiSW52YWxpZCB0aWxlIHpvb20gb3IgcG9zaXRpb246IiwgeiwgeCk7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KICAgICAgdmFsaWRUaWxlSWRzLnB1c2godGlsZUlkKTsKICAgICAgdGlsZVByb21pc2VzLnB1c2godGlsZSh1aWQyLCB6LCB4KSk7CiAgICB9CiAgICByZXR1cm4gUHJvbWlzZS5hbGwodGlsZVByb21pc2VzKS50aGVuKCh2YWx1ZXMpID0+IHsKICAgICAgdmFsdWVzLmZvckVhY2goKGQsIGkyKSA9PiB7CiAgICAgICAgY29uc3QgdmFsaWRUaWxlSWQgPSB2YWxpZFRpbGVJZHNbaTJdOwogICAgICAgIHRpbGVzW3ZhbGlkVGlsZUlkXSA9IE9iamVjdC5hc3NpZ24oZCwgeyB0aWxlUG9zaXRpb25JZDogdmFsaWRUaWxlSWQgfSk7CiAgICAgIH0pOwogICAgICByZXR1cm4gdGlsZXM7CiAgICB9KTsKICB9OwogIGNvbnN0IGdldFRhYnVsYXJEYXRhID0gKHVpZDIsIHRpbGVJZHMpID0+IHsKICAgIGNvbnN0IGNvbmZpZyA9IGRhdGFDb25mc1t1aWQyXTsKICAgIGNvbnN0IGFsbFNlZ21lbnRzID0ge307CiAgICBmb3IgKGNvbnN0IHRpbGVJZCBvZiB0aWxlSWRzKSB7CiAgICAgIGNvbnN0IHRpbGVWYWx1ZSA9IHRpbGVWYWx1ZXMuZ2V0KGAke3VpZDJ9LiR7dGlsZUlkfWApOwogICAgICBpZiAoIXRpbGVWYWx1ZSkgewogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICAgIGlmICgiZXJyb3IiIGluIHRpbGVWYWx1ZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcih0aWxlVmFsdWUuZXJyb3IpOwogICAgICB9CiAgICAgIGZvciAoY29uc3Qgc2VnbWVudCBvZiB0aWxlVmFsdWUpIHsKICAgICAgICBhbGxTZWdtZW50c1tzZWdtZW50LmlkXSA9IHsKICAgICAgICAgIC4uLnNlZ21lbnQsCiAgICAgICAgICBzdWJzdGl0dXRpb25zOiBKU09OLnN0cmluZ2lmeShzZWdtZW50LnN1YnN0aXR1dGlvbnMpCiAgICAgICAgfTsKICAgICAgfQogICAgfQogICAgY29uc3Qgc2VnbWVudHMgPSBPYmplY3QudmFsdWVzKGFsbFNlZ21lbnRzKTsKICAgIGlmIChjb25maWcubG9hZE1hdGVzKSB7CiAgICAgIGZpbmRNYXRlcyhzZWdtZW50cywgY29uZmlnLm1heEluc2VydFNpemUpOwogICAgfQogICAgbGV0IG91dHB1dDsKICAgIGlmIChjb25maWcuZXh0cmFjdEp1bmN0aW9uKSB7CiAgICAgIG91dHB1dCA9IGZpbmRKdW5jdGlvbnMoc2VnbWVudHMsIGNvbmZpZy5qdW5jdGlvbk1pbkNvdmVyYWdlKTsKICAgIH0gZWxzZSB7CiAgICAgIG91dHB1dCA9IHNlZ21lbnRzOwogICAgfQogICAgY29uc3QgYnVmZmVyMiA9IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShKU09OLnN0cmluZ2lmeShvdXRwdXQpKS5idWZmZXI7CiAgICByZXR1cm4gVHJhbnNmZXIoYnVmZmVyMiwgW2J1ZmZlcjJdKTsKICB9OwogIGNvbnN0IGdyb3VwQnkgPSAoeHMsIGtleSkgPT4geHMucmVkdWNlKChydiwgeCkgPT4gewogICAgKHJ2W3hba2V5XV0gPSBydlt4W2tleV1dIHx8IFtdKS5wdXNoKHgpOwogICAgcmV0dXJuIHJ2OwogIH0sIHt9KTsKICBjb25zdCBmaW5kTWF0ZXMgPSAoc2VnbWVudHMsIG1heEluc2VydFNpemUgPSAwKSA9PiB7CiAgICBjb25zdCBzZWdtZW50c0J5UmVhZE5hbWUgPSBncm91cEJ5KHNlZ21lbnRzLCAibmFtZSIpOwogICAgT2JqZWN0LnZhbHVlcyhzZWdtZW50c0J5UmVhZE5hbWUpLmZvckVhY2goKHNlZ21lbnRHcm91cCkgPT4gewogICAgICBpZiAoc2VnbWVudEdyb3VwLmxlbmd0aCA9PT0gMikgewogICAgICAgIGNvbnN0IHJlYWQgPSBzZWdtZW50R3JvdXBbMF07CiAgICAgICAgY29uc3QgbWF0ZSA9IHNlZ21lbnRHcm91cFsxXTsKICAgICAgICByZWFkLm1hdGVJZHMgPSBbbWF0ZS5pZF07CiAgICAgICAgbWF0ZS5tYXRlSWRzID0gW3JlYWQuaWRdOwogICAgICAgIGNvbnN0IFtsLCByXSA9IFtyZWFkLCBtYXRlXS5zb3J0KChhLCBiKSA9PiArYS5zdGFydCAtICtiLnN0YXJ0KTsKICAgICAgICBjb25zdCBpbnNlcnRTaXplID0gTWF0aC5tYXgoMCwgK3Iuc3RhcnQgLSArbC5lbmQpOwogICAgICAgIGNvbnN0IGxhcmdlSW5zZXJ0U2l6ZSA9IGluc2VydFNpemUgPj0gbWF4SW5zZXJ0U2l6ZTsKICAgICAgICBsZXQgc3ZUeXBlOwogICAgICAgIGlmICghbGFyZ2VJbnNlcnRTaXplKSB7CiAgICAgICAgICBzdlR5cGUgPSAibm9ybWFsIHJlYWQiOwogICAgICAgIH0gZWxzZSBpZiAobC5zdHJhbmQgPT09ICIrIiAmJiByLnN0cmFuZCA9PT0gIi0iKSB7CiAgICAgICAgICBzdlR5cGUgPSAiZGVsZXRpb24gKCstKSI7CiAgICAgICAgfSBlbHNlIGlmIChsLnN0cmFuZCA9PT0gIisiICYmIHIuc3RyYW5kID09PSAiKyIpIHsKICAgICAgICAgIHN2VHlwZSA9ICJpbnZlcnNpb24gKCsrKSI7CiAgICAgICAgfSBlbHNlIGlmIChsLnN0cmFuZCA9PT0gIi0iICYmIHIuc3RyYW5kID09PSAiLSIpIHsKICAgICAgICAgIHN2VHlwZSA9ICJpbnZlcnNpb24gKC0tKSI7CiAgICAgICAgfSBlbHNlIGlmIChsLnN0cmFuZCA9PT0gIi0iICYmIHIuc3RyYW5kID09PSAiKyIpIHsKICAgICAgICAgIHN2VHlwZSA9ICJkdXBsaWNhdGlvbiAoLSspIjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc3ZUeXBlID0gYCgke2wuc3RyYW5kfSR7ci5zdHJhbmR9KWA7CiAgICAgICAgfQogICAgICAgIFtyZWFkLCBtYXRlXS5mb3JFYWNoKChkKSA9PiB7CiAgICAgICAgICBkLmZvdW5kTWF0ZSA9IHRydWU7CiAgICAgICAgICBkLmluc2VydFNpemUgPSBpbnNlcnRTaXplOwogICAgICAgICAgZC5sYXJnZUluc2VydFNpemUgPSBsYXJnZUluc2VydFNpemU7CiAgICAgICAgICBkLnN2VHlwZSA9IHN2VHlwZTsKICAgICAgICAgIGQubnVtTWF0ZXMgPSAyOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHNlZ21lbnRHcm91cC5mb3JFYWNoKChkKSA9PiB7CiAgICAgICAgICBkLm1hdGVJZHMgPSBzZWdtZW50R3JvdXAuZmlsdGVyKChtYXRlKSA9PiBtYXRlLmlkICE9PSBkLmlkKS5tYXAoKG1hdGUpID0+IG1hdGUuaWQpOwogICAgICAgICAgZC5mb3VuZE1hdGUgPSBmYWxzZTsKICAgICAgICAgIGQuaW5zZXJ0U2l6ZSA9IC0xOwogICAgICAgICAgZC5sYXJnZUluc2VydFNpemUgPSBmYWxzZTsKICAgICAgICAgIGQuc3ZUeXBlID0gc2VnbWVudEdyb3VwLmxlbmd0aCA9PT0gMSA/ICJtYXRlcyBub3QgZm91bmQgd2l0aGluIGNocm9tb3NvbWUiIDogIm1vcmUgdGhhbiB0d28gbWF0ZXMiOwogICAgICAgICAgZC5udW1NYXRlcyA9IHNlZ21lbnRHcm91cC5sZW5ndGg7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIHNlZ21lbnRzQnlSZWFkTmFtZTsKICB9OwogIGNvbnN0IGZpbmRKdW5jdGlvbnMgPSAoc2VnbWVudHMsIG1pbkNvdmVyYWdlID0gMCkgPT4gewogICAgY29uc3QganVuY3Rpb25zID0gW107CiAgICBzZWdtZW50cy5mb3JFYWNoKChzZWdtZW50KSA9PiB7CiAgICAgIGNvbnN0IHN1YnN0aXR1dGlvbnMgPSBKU09OLnBhcnNlKHNlZ21lbnQuc3Vic3RpdHV0aW9ucyk7CiAgICAgIHN1YnN0aXR1dGlvbnMuZm9yRWFjaCgoc3ViKSA9PiB7CiAgICAgICAgY29uc3QgZG9uID0gc2VnbWVudC5zdGFydCArIHN1Yi5wb3M7CiAgICAgICAgY29uc3QgYWNjID0gc2VnbWVudC5zdGFydCArIHN1Yi5wb3MgKyBzdWIubGVuZ3RoOwogICAgICAgIGlmIChzZWdtZW50LnN0YXJ0IDwgZG9uICYmIGFjYyA8IHNlZ21lbnQuZW5kKSB7CiAgICAgICAgICBjb25zdCBqID0ganVuY3Rpb25zLmZpbmQoKGQpID0+IGQuc3RhcnQgPT09IGRvbiAmJiBkLmVuZCA9PT0gYWNjKTsKICAgICAgICAgIGlmIChqKSB7CiAgICAgICAgICAgIGouc2NvcmUgKz0gMTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGp1bmN0aW9ucy5wdXNoKHsgc3RhcnQ6IGRvbiwgZW5kOiBhY2MsIHNjb3JlOiAxIH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9KTsKICAgIHJldHVybiBqdW5jdGlvbnMuZmlsdGVyKChkKSA9PiBkLnNjb3JlID49IG1pbkNvdmVyYWdlKTsKICB9OwogIGNvbnN0IHRpbGVGdW5jdGlvbnMgPSB7CiAgICBpbml0LAogICAgdGlsZXNldEluZm8sCiAgICBmZXRjaFRpbGVzRGVib3VuY2VkLAogICAgdGlsZSwKICAgIGdldFRhYnVsYXJEYXRhCiAgfTsKICBleHBvc2UodGlsZUZ1bmN0aW9ucyk7Cn0pKCk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWFzc2V0cy9iYW0td29ya2VyLjMyZTg0YWVhLmpzLm1hcA==\";\nconst blob$1 = typeof window !== \"undefined\" && window.Blob && new Blob([atob(encodedJs$1)], { type: \"text/javascript;charset=utf-8\" });\nfunction WorkerWrapper$1() {\n  const objURL = blob$1 && (window.URL || window.webkitURL).createObjectURL(blob$1);\n  try {\n    return objURL ? new Worker(objURL, {}) : new Worker(\"data:application/javascript;base64,\" + encodedJs$1, { type: \"module\" });\n  } finally {\n    objURL && (window.URL || window.webkitURL).revokeObjectURL(objURL);\n  }\n}\nconst DEBOUNCE_TIME$1 = 200;\nclass BAMDataFetcher {\n  constructor(HGC, dataConfig) {\n    this.dataConfig = dataConfig;\n    this.uid = HGC.libraries.slugid.nice();\n    this.assembly = \"hg38\";\n    this.toFetch = /* @__PURE__ */ new Set();\n    this.worker = spawn(new WorkerWrapper$1()).then(async (worker) => {\n      var _a, _b, _c;\n      const bamUrl = (_a = dataConfig.bamUrl) != null ? _a : dataConfig.url;\n      const workerDataConfig = {\n        ...dataConfig,\n        bamUrl,\n        baiUrl: (_c = (_b = dataConfig.baiUrl) != null ? _b : dataConfig.indexUrl) != null ? _c : `${bamUrl}.bai`\n      };\n      await worker.init(this.uid, workerDataConfig);\n      return worker;\n    });\n  }\n  async tilesetInfo(callback) {\n    (await this.worker).tilesetInfo(this.uid).then(callback);\n  }\n  fetchTilesDebounced(receivedTiles, tileIds) {\n    var _a;\n    const { toFetch } = this;\n    const thisZoomLevel = tileIds[0].split(\".\")[0];\n    const toFetchZoomLevel = toFetch.size ? [...toFetch][0].split(\".\")[0] : null;\n    if (thisZoomLevel !== toFetchZoomLevel) {\n      for (const tileId of this.toFetch) {\n        (_a = this.track) == null ? void 0 : _a.fetching.delete(tileId);\n      }\n      this.toFetch.clear();\n    }\n    tileIds.forEach((x) => this.toFetch.add(x));\n    if (this.fetchTimeout) {\n      clearTimeout(this.fetchTimeout);\n    }\n    this.fetchTimeout = setTimeout(() => {\n      this.sendFetch(receivedTiles, [...this.toFetch]);\n      this.toFetch.clear();\n    }, DEBOUNCE_TIME$1);\n  }\n  async sendFetch(receivedTiles, tileIds) {\n    (await this.worker).fetchTilesDebounced(this.uid, tileIds).then(receivedTiles);\n  }\n  async getTabularData(uid, tileIds) {\n    const buf = await (await this.worker).getTabularData(uid, tileIds);\n    return JSON.parse(new TextDecoder().decode(buf));\n  }\n}\nconst encodedJs = \"KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgdmNmUmVzZXJ2ZWQgPSB7CiAgICBJbmZvRmllbGRzOiB7CiAgICAgIEFBOiB7IE51bWJlcjogMSwgVHlwZTogIlN0cmluZyIsIERlc2NyaXB0aW9uOiAiQW5jZXN0cmFsIGFsbGVsZSIgfSwKICAgICAgQUM6IHsKICAgICAgICBOdW1iZXI6ICJBIiwKICAgICAgICBUeXBlOiAiSW50ZWdlciIsCiAgICAgICAgRGVzY3JpcHRpb246ICJBbGxlbGUgY291bnQgaW4gZ2Vub3R5cGVzLCBmb3IgZWFjaCBBTFQgYWxsZWxlLCBpbiB0aGUgc2FtZSBvcmRlciBhcyBsaXN0ZWQiCiAgICAgIH0sCiAgICAgIEFEOiB7CiAgICAgICAgTnVtYmVyOiAiUiIsCiAgICAgICAgVHlwZTogIkludGVnZXIiLAogICAgICAgIERlc2NyaXB0aW9uOiAiVG90YWwgcmVhZCBkZXB0aCBmb3IgZWFjaCBhbGxlbGUiCiAgICAgIH0sCiAgICAgIEFERjogewogICAgICAgIE51bWJlcjogIlIiLAogICAgICAgIFR5cGU6ICJJbnRlZ2VyIiwKICAgICAgICBEZXNjcmlwdGlvbjogIlJlYWQgZGVwdGggZm9yIGVhY2ggYWxsZWxlIG9uIHRoZSBmb3J3YXJkIHN0cmFuZCIKICAgICAgfSwKICAgICAgQURSOiB7CiAgICAgICAgTnVtYmVyOiAiUiIsCiAgICAgICAgVHlwZTogIkludGVnZXIiLAogICAgICAgIERlc2NyaXB0aW9uOiAiUmVhZCBkZXB0aCBmb3IgZWFjaCBhbGxlbGUgb24gdGhlIHJldmVyc2Ugc3RyYW5kIgogICAgICB9LAogICAgICBBRjogewogICAgICAgIE51bWJlcjogIkEiLAogICAgICAgIFR5cGU6ICJGbG9hdCIsCiAgICAgICAgRGVzY3JpcHRpb246ICJBbGxlbGUgZnJlcXVlbmN5IGZvciBlYWNoIEFMVCBhbGxlbGUgaW4gdGhlIHNhbWUgb3JkZXIgYXMgbGlzdGVkIChlc3RpbWF0ZWQgZnJvbSBwcmltYXJ5IGRhdGEsIG5vdCBjYWxsZWQgZ2Vub3R5cGVzKSIKICAgICAgfSwKICAgICAgQU46IHsKICAgICAgICBOdW1iZXI6IDEsCiAgICAgICAgVHlwZTogIkludGVnZXIiLAogICAgICAgIERlc2NyaXB0aW9uOiAiVG90YWwgbnVtYmVyIG9mIGFsbGVsZXMgaW4gY2FsbGVkIGdlbm90eXBlcyIKICAgICAgfSwKICAgICAgQlE6IHsKICAgICAgICBOdW1iZXI6IDEsCiAgICAgICAgVHlwZTogIkZsb2F0IiwKICAgICAgICBEZXNjcmlwdGlvbjogIlJNUyBiYXNlIHF1YWxpdHkiCiAgICAgIH0sCiAgICAgIENJR0FSOiB7CiAgICAgICAgTnVtYmVyOiAxLAogICAgICAgIFR5cGU6ICJGbG9hdCIsCiAgICAgICAgRGVzY3JpcHRpb246ICJDaWdhciBzdHJpbmcgZGVzY3JpYmluZyBob3cgdG8gYWxpZ24gYW4gYWx0ZXJuYXRlIGFsbGVsZSB0byB0aGUgcmVmZXJlbmNlIGFsbGVsZSIKICAgICAgfSwKICAgICAgREI6IHsKICAgICAgICBOdW1iZXI6IDAsCiAgICAgICAgVHlwZTogIkZsYWciLAogICAgICAgIERlc2NyaXB0aW9uOiAiZGJTTlAgbWVtYmVyc2hpcCIKICAgICAgfSwKICAgICAgRFA6IHsKICAgICAgICBOdW1iZXI6IDEsCiAgICAgICAgVHlwZTogIkludGVnZXIiLAogICAgICAgIERlc2NyaXB0aW9uOiAiY29tYmluZWQgZGVwdGggYWNyb3NzIHNhbXBsZXMiCiAgICAgIH0sCiAgICAgIEVORDogewogICAgICAgIE51bWJlcjogMSwKICAgICAgICBUeXBlOiAiSW50ZWdlciIsCiAgICAgICAgRGVzY3JpcHRpb246ICJFbmQgcG9zaXRpb24gKGZvciB1c2Ugd2l0aCBzeW1ib2xpYyBhbGxlbGVzKSIKICAgICAgfSwKICAgICAgSDI6IHsKICAgICAgICBOdW1iZXI6IDAsCiAgICAgICAgVHlwZTogIkZsYWciLAogICAgICAgIERlc2NyaXB0aW9uOiAiSGFwTWFwMiBtZW1iZXJzaGlwIgogICAgICB9LAogICAgICBIMzogewogICAgICAgIE51bWJlcjogMCwKICAgICAgICBUeXBlOiAiRmxhZyIsCiAgICAgICAgRGVzY3JpcHRpb246ICJIYXBNYXAzIG1lbWJlcnNoaXAiCiAgICAgIH0sCiAgICAgIE1ROiB7CiAgICAgICAgTnVtYmVyOiAxLAogICAgICAgIFR5cGU6IG51bGwsCiAgICAgICAgRGVzY3JpcHRpb246ICJSTVMgbWFwcGluZyBxdWFsaXR5IgogICAgICB9LAogICAgICBNUTA6IHsKICAgICAgICBOdW1iZXI6IDEsCiAgICAgICAgVHlwZTogIkludGVnZXIiLAogICAgICAgIERlc2NyaXB0aW9uOiAiTnVtYmVyIG9mIE1BUFEgPT0gMCByZWFkcyIKICAgICAgfSwKICAgICAgTlM6IHsKICAgICAgICBOdW1iZXI6IDEsCiAgICAgICAgVHlwZTogIkludGVnZXIiLAogICAgICAgIERlc2NyaXB0aW9uOiAiTnVtYmVyIG9mIHNhbXBsZXMgd2l0aCBkYXRhIgogICAgICB9LAogICAgICBTQjogewogICAgICAgIE51bWJlcjogNCwKICAgICAgICBUeXBlOiAiSW50ZWdlciIsCiAgICAgICAgRGVzY3JpcHRpb246ICJTdHJhbmQgYmlhcyIKICAgICAgfSwKICAgICAgU09NQVRJQzogewogICAgICAgIE51bWJlcjogMCwKICAgICAgICBUeXBlOiAiRmxhZyIsCiAgICAgICAgRGVzY3JpcHRpb246ICJTb21hdGljIG11dGF0aW9uIChmb3IgY2FuY2VyIGdlbm9taWNzKSIKICAgICAgfSwKICAgICAgVkFMSURBVEVEOiB7CiAgICAgICAgTnVtYmVyOiAwLAogICAgICAgIFR5cGU6ICJGbGFnIiwKICAgICAgICBEZXNjcmlwdGlvbjogIlZhbGlkYXRlZCBieSBmb2xsb3ctdXAgZXhwZXJpbWVudCIKICAgICAgfSwKICAgICAgIjEwMDBHIjogewogICAgICAgIE51bWJlcjogMCwKICAgICAgICBUeXBlOiAiRmxhZyIsCiAgICAgICAgRGVzY3JpcHRpb246ICIxMDAwIEdlbm9tZXMgbWVtYmVyc2hpcCIKICAgICAgfSwKICAgICAgSU1QUkVDSVNFOiB7CiAgICAgICAgTnVtYmVyOiAwLAogICAgICAgIFR5cGU6ICJGbGFnIiwKICAgICAgICBEZXNjcmlwdGlvbjogIkltcHJlY2lzZSBzdHJ1Y3R1cmFsIHZhcmlhdGlvbiIKICAgICAgfSwKICAgICAgTk9WRUw6IHsKICAgICAgICBOdW1iZXI6IDAsCiAgICAgICAgVHlwZTogIkZsYWciLAogICAgICAgIERlc2NyaXB0aW9uOiAiSW5kaWNhdGVzIGEgbm92ZWwgc3RydWN0dXJhbCB2YXJpYXRpb24iCiAgICAgIH0sCiAgICAgIFNWVFlQRTogewogICAgICAgIE51bWJlcjogMSwKICAgICAgICBUeXBlOiAiU3RyaW5nIiwKICAgICAgICBEZXNjcmlwdGlvbjogIlR5cGUgb2Ygc3RydWN0dXJhbCB2YXJpYW50IgogICAgICB9LAogICAgICBTVkxFTjogewogICAgICAgIE51bWJlcjogbnVsbCwKICAgICAgICBUeXBlOiAiSW50ZWdlciIsCiAgICAgICAgRGVzY3JpcHRpb246ICJEaWZmZXJlbmNlIGluIGxlbmd0aCBiZXR3ZWVuIFJFRiBhbmQgQUxUIGFsbGVsZXMiCiAgICAgIH0sCiAgICAgIENJUE9TOiB7CiAgICAgICAgTnVtYmVyOiAyLAogICAgICAgIFR5cGU6ICJJbnRlZ2VyIiwKICAgICAgICBEZXNjcmlwdGlvbjogIkNvbmZpZGVuY2UgaW50ZXJ2YWwgYXJvdW5kIFBPUyBmb3IgaW1wcmVjaXNlIHZhcmlhbnRzIgogICAgICB9LAogICAgICBDSUVORDogewogICAgICAgIE51bWJlcjogMiwKICAgICAgICBUeXBlOiAiSW50ZWdlciIsCiAgICAgICAgRGVzY3JpcHRpb246ICJDb25maWRlbmNlIGludGVydmFsIGFyb3VuZCBFTkQgZm9yIGltcHJlY2lzZSB2YXJpYW50cyIKICAgICAgfSwKICAgICAgSE9NTEVOOiB7CiAgICAgICAgVHlwZTogIkludGVnZXIiLAogICAgICAgIERlc2NyaXB0aW9uOiAiTGVuZ3RoIG9mIGJhc2UgcGFpciBpZGVudGljYWwgbWljcm8taG9tb2xvZ3kgYXQgZXZlbnQgYnJlYWtwb2ludHMiCiAgICAgIH0sCiAgICAgIEhPTVNFUTogewogICAgICAgIFR5cGU6ICJTdHJpbmciLAogICAgICAgIERlc2NyaXB0aW9uOiAiU2VxdWVuY2Ugb2YgYmFzZSBwYWlyIGlkZW50aWNhbCBtaWNyby1ob21vbG9neSBhdCBldmVudCBicmVha3BvaW50cyIKICAgICAgfSwKICAgICAgQktQVElEOiB7CiAgICAgICAgVHlwZTogIlN0cmluZyIsCiAgICAgICAgRGVzY3JpcHRpb246ICJJRCBvZiB0aGUgYXNzZW1ibGVkIGFsdGVybmF0ZSBhbGxlbGUgaW4gdGhlIGFzc2VtYmx5IGZpbGUiCiAgICAgIH0sCiAgICAgIE1FSU5GTzogewogICAgICAgIE51bWJlcjogNCwKICAgICAgICBUeXBlOiAiU3RyaW5nIiwKICAgICAgICBEZXNjcmlwdGlvbjogIk1vYmlsZSBlbGVtZW50IGluZm8gb2YgdGhlIGZvcm0gTkFNRSxTVEFSVCxFTkQsUE9MQVJJVFkiCiAgICAgIH0sCiAgICAgIE1FVFJBTlM6IHsKICAgICAgICBOdW1iZXI6IDQsCiAgICAgICAgVHlwZTogIlN0cmluZyIsCiAgICAgICAgRGVzY3JpcHRpb246ICJNb2JpbGUgZWxlbWVudCB0cmFuc2R1Y3Rpb24gaW5mbyBvZiB0aGUgZm9ybSBDSFIsU1RBUlQsRU5ELFBPTEFSSVRZIgogICAgICB9LAogICAgICBER1ZJRDogewogICAgICAgIE51bWJlcjogMSwKICAgICAgICBUeXBlOiAiU3RyaW5nIiwKICAgICAgICBEZXNjcmlwdGlvbjogIklEIG9mIHRoaXMgZWxlbWVudCBpbiBEYXRhYmFzZSBvZiBHZW5vbWljIFZhcmlhdGlvbiIKICAgICAgfSwKICAgICAgREJWQVJJRDogewogICAgICAgIE51bWJlcjogMSwKICAgICAgICBUeXBlOiAiU3RyaW5nIiwKICAgICAgICBEZXNjcmlwdGlvbjogIklEIG9mIHRoaXMgZWxlbWVudCBpbiBEQlZBUiIKICAgICAgfSwKICAgICAgREJSSVBJRDogewogICAgICAgIE51bWJlcjogMSwKICAgICAgICBUeXBlOiAiU3RyaW5nIiwKICAgICAgICBEZXNjcmlwdGlvbjogIklEIG9mIHRoaXMgZWxlbWVudCBpbiBEQlJJUCIKICAgICAgfSwKICAgICAgTUFURUlEOiB7CiAgICAgICAgTnVtYmVyOiBudWxsLAogICAgICAgIFR5cGU6ICJTdHJpbmciLAogICAgICAgIERlc2NyaXB0aW9uOiAiSUQgb2YgbWF0ZSBicmVha2VuZHMiCiAgICAgIH0sCiAgICAgIFBBUklEOiB7CiAgICAgICAgTnVtYmVyOiAxLAogICAgICAgIFR5cGU6ICJTdHJpbmciLAogICAgICAgIERlc2NyaXB0aW9uOiAiSUQgb2YgcGFydG5lciBicmVha2VuZCIKICAgICAgfSwKICAgICAgRVZFTlQ6IHsKICAgICAgICBOdW1iZXI6IDEsCiAgICAgICAgVHlwZTogIlN0cmluZyIsCiAgICAgICAgRGVzY3JpcHRpb246ICJJRCBvZiBldmVudCBhc3NvY2lhdGVkIHRvIGJyZWFrZW5kIgogICAgICB9LAogICAgICBDSUxFTjogewogICAgICAgIE51bWJlcjogMiwKICAgICAgICBUeXBlOiAiSW50ZWdlciIsCiAgICAgICAgRGVzY3JpcHRpb246ICJDb25maWRlbmNlIGludGVydmFsIGFyb3VuZCB0aGUgaW5zZXJ0ZWQgbWF0ZXJpYWwgYmV0d2VlbiBicmVha2VuZCIKICAgICAgfSwKICAgICAgRFBBREo6IHsgVHlwZTogIkludGVnZXIiLCBEZXNjcmlwdGlvbjogIlJlYWQgRGVwdGggb2YgYWRqYWNlbmN5IiB9LAogICAgICBDTjogewogICAgICAgIE51bWJlcjogMSwKICAgICAgICBUeXBlOiAiSW50ZWdlciIsCiAgICAgICAgRGVzY3JpcHRpb246ICJDb3B5IG51bWJlciBvZiBzZWdtZW50IGNvbnRhaW5pbmcgYnJlYWtlbmQiCiAgICAgIH0sCiAgICAgIENOQURKOiB7CiAgICAgICAgTnVtYmVyOiBudWxsLAogICAgICAgIFR5cGU6ICJJbnRlZ2VyIiwKICAgICAgICBEZXNjcmlwdGlvbjogIkNvcHkgbnVtYmVyIG9mIGFkamFjZW5jeSIKICAgICAgfSwKICAgICAgQ0lDTjogewogICAgICAgIE51bWJlcjogMiwKICAgICAgICBUeXBlOiAiSW50ZWdlciIsCiAgICAgICAgRGVzY3JpcHRpb246ICJDb25maWRlbmNlIGludGVydmFsIGFyb3VuZCBjb3B5IG51bWJlciBmb3IgdGhlIHNlZ21lbnQiCiAgICAgIH0sCiAgICAgIENJQ05BREo6IHsKICAgICAgICBOdW1iZXI6IG51bGwsCiAgICAgICAgVHlwZTogIkludGVnZXIiLAogICAgICAgIERlc2NyaXB0aW9uOiAiQ29uZmlkZW5jZSBpbnRlcnZhbCBhcm91bmQgY29weSBudW1iZXIgZm9yIHRoZSBhZGphY2VuY3kiCiAgICAgIH0KICAgIH0sCiAgICBHZW5vdHlwZUZpZWxkczogewogICAgICBBRDogewogICAgICAgIE51bWJlcjogIlIiLAogICAgICAgIFR5cGU6ICJJbnRlZ2VyIiwKICAgICAgICBEZXNjcmlwdGlvbjogIlJlYWQgZGVwdGggZm9yIGVhY2ggYWxsZWxlIgogICAgICB9LAogICAgICBBREY6IHsKICAgICAgICBOdW1iZXI6ICJSIiwKICAgICAgICBUeXBlOiAiSW50ZWdlciIsCiAgICAgICAgRGVzY3JpcHRpb246ICJSZWFkIGRlcHRoIGZvciBlYWNoIGFsbGVsZSBvbiB0aGUgZm9yd2FyZCBzdHJhbmQiCiAgICAgIH0sCiAgICAgIEFEUjogewogICAgICAgIE51bWJlcjogIlIiLAogICAgICAgIFR5cGU6ICJJbnRlZ2VyIiwKICAgICAgICBEZXNjcmlwdGlvbjogIlJlYWQgZGVwdGggZm9yIGVhY2ggYWxsZWxlIG9uIHRoZSByZXZlcnNlIHN0cmFuZCIKICAgICAgfSwKICAgICAgRFA6IHsKICAgICAgICBOdW1iZXI6IDEsCiAgICAgICAgVHlwZTogIkludGVnZXIiLAogICAgICAgIERlc2NyaXB0aW9uOiAiUmVhZCBkZXB0aCIKICAgICAgfSwKICAgICAgRUM6IHsKICAgICAgICBOdW1iZXI6ICJBIiwKICAgICAgICBUeXBlOiAiSW50ZWdlciIsCiAgICAgICAgRGVzY3JpcHRpb246ICJFeHBlY3RlZCBhbHRlcm5hdGUgYWxsZWxlIGNvdW50cyIKICAgICAgfSwKICAgICAgRlQ6IHsKICAgICAgICBOdW1iZXI6IDEsCiAgICAgICAgVHlwZTogIlN0cmluZyIsCiAgICAgICAgRGVzY3JpcHRpb246ICdGaWx0ZXIgaW5kaWNhdGluZyBpZiB0aGlzIGdlbm90eXBlIHdhcyAiY2FsbGVkIicKICAgICAgfSwKICAgICAgR0w6IHsKICAgICAgICBOdW1iZXI6ICJHIiwKICAgICAgICBUeXBlOiAiRmxvYXQiLAogICAgICAgIERlc2NyaXB0aW9uOiAiR2Vub3R5cGUgbGlrZWxpaG9vZHMiCiAgICAgIH0sCiAgICAgIEdQOiB7CiAgICAgICAgTnVtYmVyOiAiRyIsCiAgICAgICAgVHlwZTogIkZsb2F0IiwKICAgICAgICBEZXNjcmlwdGlvbjogIkdlbm90eXBlIHBvc3RlcmlvciBwcm9iYWJpbGl0aWVzIgogICAgICB9LAogICAgICBHUTogewogICAgICAgIE51bWJlcjogMSwKICAgICAgICBUeXBlOiAiSW50ZWdlciIsCiAgICAgICAgRGVzY3JpcHRpb246ICJDb25kaXRpb25hbCBnZW5vdHlwZSBxdWFsaXR5IgogICAgICB9LAogICAgICBHVDogewogICAgICAgIE51bWJlcjogMSwKICAgICAgICBUeXBlOiAiU3RyaW5nIiwKICAgICAgICBEZXNjcmlwdGlvbjogIkdlbm90eXBlIgogICAgICB9LAogICAgICBIUTogewogICAgICAgIE51bWJlcjogMiwKICAgICAgICBUeXBlOiAiSW50ZWdlciIsCiAgICAgICAgRGVzY3JpcHRpb246ICJIYXBsb3R5cGUgcXVhbGl0eSIKICAgICAgfSwKICAgICAgTVE6IHsKICAgICAgICBOdW1iZXI6IDEsCiAgICAgICAgVHlwZTogIkludGVnZXIiLAogICAgICAgIERlc2NyaXB0aW9uOiAiUk1TIG1hcHBpbmcgcXVhbGl0eSIKICAgICAgfSwKICAgICAgUEw6IHsKICAgICAgICBOdW1iZXI6ICJHIiwKICAgICAgICBUeXBlOiAiSW50ZWdlciIsCiAgICAgICAgRGVzY3JpcHRpb246ICJQaHJlZC1zY2FsZWQgZ2Vub3R5cGUgbGlrZWxpaG9vZHMgcm91bmRlZCB0byB0aGUgY2xvc2VzdCBpbnRlZ2VyIgogICAgICB9LAogICAgICBQUTogewogICAgICAgIE51bWJlcjogMSwKICAgICAgICBUeXBlOiAiSW50ZWdlciIsCiAgICAgICAgRGVzY3JpcHRpb246ICJQaGFzaW5nIHF1YWxpdHkiCiAgICAgIH0sCiAgICAgIFBTOiB7CiAgICAgICAgTnVtYmVyOiAxLAogICAgICAgIFR5cGU6ICJJbnRlZ2VyIiwKICAgICAgICBEZXNjcmlwdGlvbjogIlBoYXNlIHNldCIKICAgICAgfQogICAgfSwKICAgIEFsdFR5cGVzOiB7CiAgICAgIERFTDogewogICAgICAgIERlc2NyaXB0aW9uOiAiRGVsZXRpb24gcmVsYXRpdmUgdG8gdGhlIHJlZmVyZW5jZSIKICAgICAgfSwKICAgICAgSU5TOiB7CiAgICAgICAgRGVzY3JpcHRpb246ICJJbnNlcnRpb24gb2Ygbm92ZWwgc2VxdWVuY2UgcmVsYXRpdmUgdG8gdGhlIHJlZmVyZW5jZSIKICAgICAgfSwKICAgICAgRFVQOiB7CiAgICAgICAgRGVzY3JpcHRpb246ICJSZWdpb24gb2YgZWxldmF0ZWQgY29weSBudW1iZXIgcmVsYXRpdmUgdG8gdGhlIHJlZmVyZW5jZSIKICAgICAgfSwKICAgICAgSU5WOiB7CiAgICAgICAgRGVzY3JpcHRpb246ICJJbnZlcnNpb24gb2YgcmVmZXJlbmNlIHNlcXVlbmNlIgogICAgICB9LAogICAgICBDTlY6IHsKICAgICAgICBEZXNjcmlwdGlvbjogIkNvcHkgbnVtYmVyIHZhcmlhYmxlIHJlZ2lvbiAobWF5IGJlIGJvdGggZGVsZXRpb24gYW5kIGR1cGxpY2F0aW9uKSIKICAgICAgfSwKICAgICAgIkRVUDpUQU5ERU0iOiB7CiAgICAgICAgRGVzY3JpcHRpb246ICJUYW5kZW0gZHVwbGljYXRpb24iCiAgICAgIH0sCiAgICAgICJERUw6TUUiOiB7CiAgICAgICAgRGVzY3JpcHRpb246ICJEZWxldGlvbiBvZiBtb2JpbGUgZWxlbWVudCByZWxhdGl2ZSB0byB0aGUgcmVmZXJlbmNlIgogICAgICB9LAogICAgICAiSU5TOk1FIjogewogICAgICAgIERlc2NyaXB0aW9uOiAiSW5zZXJ0aW9uIG9mIGEgbW9iaWxlIGVsZW1lbnQgcmVsYXRpdmUgdG8gdGhlIHJlZmVyZW5jZSIKICAgICAgfSwKICAgICAgTk9OX1JFRjogewogICAgICAgIERlc2NyaXB0aW9uOiAiUmVwcmVzZW50cyBhbnkgcG9zc2libGUgYWx0ZXJuYXRpdmUgYWxsZWxlIGF0IHRoaXMgbG9jYXRpb24iCiAgICAgIH0sCiAgICAgICIqIjogewogICAgICAgIERlc2NyaXB0aW9uOiAiUmVwcmVzZW50cyBhbnkgcG9zc2libGUgYWx0ZXJuYXRpdmUgYWxsZWxlIGF0IHRoaXMgbG9jYXRpb24iCiAgICAgIH0KICAgIH0sCiAgICBGaWx0ZXJUeXBlczogewogICAgICBQQVNTOiB7CiAgICAgICAgRGVzY3JpcHRpb246ICJQYXNzZWQgYWxsIGZpbHRlcnMiCiAgICAgIH0KICAgIH0KICB9OwogIGZ1bmN0aW9uIFZhcmlhbnQoc3R1ZmYpIHsKICAgIE9iamVjdC5hc3NpZ24odGhpcywgc3R1ZmYpOwogIH0KICBmdW5jdGlvbiBkZWNvZGVVUklDb21wb25lbnROb1Rocm93KHVyaSkgewogICAgdHJ5IHsKICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudCh1cmkpOwogICAgfSBjYXRjaCAoZSkgewogICAgICByZXR1cm4gdXJpOwogICAgfQogIH0KICBjbGFzcyBWQ0YgewogICAgY29uc3RydWN0b3IoeyBoZWFkZXIgPSAiIiwgc3RyaWN0ID0gdHJ1ZSB9KSB7CiAgICAgIGlmICghaGVhZGVyIHx8ICFoZWFkZXIubGVuZ3RoKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJlbXB0eSBoZWFkZXIgcmVjZWl2ZWQiKTsKICAgICAgfQogICAgICBjb25zdCBoZWFkZXJMaW5lcyA9IGhlYWRlci5zcGxpdCgvW1xyXG5dKy8pLmZpbHRlcigobGluZSkgPT4gbGluZSk7CiAgICAgIGlmICghaGVhZGVyTGluZXMubGVuZ3RoKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJubyBub24tZW1wdHkgaGVhZGVyIGxpbmVzIHNwZWNpZmllZCIpOwogICAgICB9CiAgICAgIHRoaXMuc3RyaWN0ID0gc3RyaWN0OwogICAgICB0aGlzLm1ldGFkYXRhID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgSU5GTzogdmNmUmVzZXJ2ZWQuSW5mb0ZpZWxkcywKICAgICAgICBGT1JNQVQ6IHZjZlJlc2VydmVkLkdlbm90eXBlRmllbGRzLAogICAgICAgIEFMVDogdmNmUmVzZXJ2ZWQuQWx0VHlwZXMsCiAgICAgICAgRklMVEVSOiB2Y2ZSZXNlcnZlZC5GaWx0ZXJUeXBlcwogICAgICB9KSk7CiAgICAgIGxldCBsYXN0TGluZTsKICAgICAgaGVhZGVyTGluZXMuZm9yRWFjaCgobGluZSkgPT4gewogICAgICAgIGlmICghbGluZS5zdGFydHNXaXRoKCIjIikpIHsKICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQmFkIGxpbmUgaW4gaGVhZGVyOgoke2xpbmV9YCk7CiAgICAgICAgfSBlbHNlIGlmIChsaW5lLnN0YXJ0c1dpdGgoIiMjIikpIHsKICAgICAgICAgIHRoaXMuX3BhcnNlTWV0YWRhdGEobGluZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGxhc3RMaW5lID0gbGluZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICBpZiAoIWxhc3RMaW5lKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJObyBmb3JtYXQgbGluZSBmb3VuZCBpbiBoZWFkZXIiKTsKICAgICAgfQogICAgICBjb25zdCBmaWVsZHMgPSBsYXN0TGluZS50cmltKCkuc3BsaXQoIgkiKTsKICAgICAgY29uc3QgdGhpc0hlYWRlciA9IGZpZWxkcy5zbGljZSgwLCA4KTsKICAgICAgY29uc3QgY29ycmVjdEhlYWRlciA9IFsKICAgICAgICAiI0NIUk9NIiwKICAgICAgICAiUE9TIiwKICAgICAgICAiSUQiLAogICAgICAgICJSRUYiLAogICAgICAgICJBTFQiLAogICAgICAgICJRVUFMIiwKICAgICAgICAiRklMVEVSIiwKICAgICAgICAiSU5GTyIKICAgICAgXTsKICAgICAgaWYgKGZpZWxkcy5sZW5ndGggPCA4KSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBWQ0YgaGVhZGVyIG1pc3NpbmcgY29sdW1uczoKJHtsYXN0TGluZX1gKTsKICAgICAgfSBlbHNlIGlmIChmaWVsZHMubGVuZ3RoID09PSA5KSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBWQ0YgaGVhZGVyIGhhcyBGT1JNQVQgYnV0IG5vIHNhbXBsZXM6CiR7bGFzdExpbmV9YCk7CiAgICAgIH0gZWxzZSBpZiAodGhpc0hlYWRlci5sZW5ndGggIT09IGNvcnJlY3RIZWFkZXIubGVuZ3RoIHx8ICF0aGlzSGVhZGVyLmV2ZXJ5KCh2YWx1ZSwgaW5kZXgpID0+IHZhbHVlID09PSBjb3JyZWN0SGVhZGVyW2luZGV4XSkpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFZDRiBjb2x1bW4gaGVhZGVycyBub3QgY29ycmVjdDoKJHtsYXN0TGluZX1gKTsKICAgICAgfQogICAgICB0aGlzLnNhbXBsZXMgPSBmaWVsZHMuc2xpY2UoOSk7CiAgICB9CiAgICBfcGFyc2VHZW5vdHlwZXMoZm9ybWF0LCBwcmVyZXN0KSB7CiAgICAgIGNvbnN0IHJlc3QgPSBwcmVyZXN0LnNwbGl0KCIJIik7CiAgICAgIGNvbnN0IGdlbm90eXBlcyA9IHt9OwogICAgICBjb25zdCBmb3JtYXRLZXlzID0gZm9ybWF0ID09PSBudWxsIHx8IGZvcm1hdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogZm9ybWF0LnNwbGl0KCI6Iik7CiAgICAgIGlmIChmb3JtYXRLZXlzKSB7CiAgICAgICAgdGhpcy5zYW1wbGVzLmZvckVhY2goKHNhbXBsZSwgaW5kZXgpID0+IHsKICAgICAgICAgIGdlbm90eXBlc1tzYW1wbGVdID0ge307CiAgICAgICAgICBmb3JtYXRLZXlzLmZvckVhY2goKGtleSkgPT4gewogICAgICAgICAgICBnZW5vdHlwZXNbc2FtcGxlXVtrZXldID0gbnVsbDsKICAgICAgICAgIH0pOwogICAgICAgICAgcmVzdFtpbmRleF0uc3BsaXQoIjoiKS5maWx0ZXIoKGYpID0+IGYpLmZvckVhY2goKHZhbCwgaW5kZXgyKSA9PiB7CiAgICAgICAgICAgIGxldCB0aGlzVmFsdWU7CiAgICAgICAgICAgIGlmICh2YWwgPT09ICIiIHx8IHZhbCA9PT0gIi4iIHx8IHZhbCA9PT0gdm9pZCAwKSB7CiAgICAgICAgICAgICAgdGhpc1ZhbHVlID0gbnVsbDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBjb25zdCBlbnRyaWVzID0gdmFsLnNwbGl0KCIsIikubWFwKChlbnQpID0+IGVudCA9PT0gIi4iID8gbnVsbCA6IGVudCk7CiAgICAgICAgICAgICAgY29uc3QgdmFsdWVUeXBlID0gdGhpcy5nZXRNZXRhZGF0YSgiRk9STUFUIiwgZm9ybWF0S2V5c1tpbmRleDJdLCAiVHlwZSIpOwogICAgICAgICAgICAgIGlmICh2YWx1ZVR5cGUgPT09ICJJbnRlZ2VyIiB8fCB2YWx1ZVR5cGUgPT09ICJGbG9hdCIpIHsKICAgICAgICAgICAgICAgIHRoaXNWYWx1ZSA9IGVudHJpZXMubWFwKCh2YWwyKSA9PiB2YWwyID8gK3ZhbDIgOiB2YWwyKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpc1ZhbHVlID0gZW50cmllczsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZ2Vub3R5cGVzW3NhbXBsZV1bZm9ybWF0S2V5c1tpbmRleDJdXSA9IHRoaXNWYWx1ZTsKICAgICAgICAgIH0sIHt9KTsKICAgICAgICB9KTsKICAgICAgfQogICAgICByZXR1cm4gZ2Vub3R5cGVzOwogICAgfQogICAgX3BhcnNlTWV0YWRhdGEobGluZSkgewogICAgICBjb25zdCBtYXRjaCA9IGxpbmUudHJpbSgpLm1hdGNoKC9eIyMoLis/KT0oLiopLyk7CiAgICAgIGlmICghbWF0Y2gpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYExpbmUgaXMgbm90IGEgdmFsaWQgbWV0YWRhdGEgbGluZTogJHtsaW5lfWApOwogICAgICB9CiAgICAgIGNvbnN0IFttZXRhS2V5LCBtZXRhVmFsXSA9IG1hdGNoLnNsaWNlKDEsIDMpOwogICAgICBpZiAobWV0YVZhbC5zdGFydHNXaXRoKCI8IikpIHsKICAgICAgICBpZiAoIShtZXRhS2V5IGluIHRoaXMubWV0YWRhdGEpKSB7CiAgICAgICAgICB0aGlzLm1ldGFkYXRhW21ldGFLZXldID0ge307CiAgICAgICAgfQogICAgICAgIGNvbnN0IFtpZCwga2V5VmFsc10gPSB0aGlzLl9wYXJzZVN0cnVjdHVyZWRNZXRhVmFsKG1ldGFWYWwpOwogICAgICAgIHRoaXMubWV0YWRhdGFbbWV0YUtleV1baWRdID0ga2V5VmFsczsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLm1ldGFkYXRhW21ldGFLZXldID0gbWV0YVZhbDsKICAgICAgfQogICAgfQogICAgX3BhcnNlU3RydWN0dXJlZE1ldGFWYWwobWV0YVZhbCkgewogICAgICBjb25zdCBrZXlWYWxzID0gdGhpcy5fcGFyc2VLZXlWYWx1ZShtZXRhVmFsLnJlcGxhY2UoL148fD4kL2csICIiKSwgIiwiKTsKICAgICAgY29uc3QgaWQgPSBrZXlWYWxzLklEOwogICAgICBkZWxldGUga2V5VmFscy5JRDsKICAgICAgaWYgKCJOdW1iZXIiIGluIGtleVZhbHMpIHsKICAgICAgICBpZiAoIU51bWJlci5pc05hTihOdW1iZXIoa2V5VmFscy5OdW1iZXIpKSkgewogICAgICAgICAga2V5VmFscy5OdW1iZXIgPSBOdW1iZXIoa2V5VmFscy5OdW1iZXIpOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gW2lkLCBrZXlWYWxzXTsKICAgIH0KICAgIGdldE1ldGFkYXRhKC4uLmFyZ3MpIHsKICAgICAgbGV0IGZpbHRlcmVkTWV0YWRhdGEgPSB0aGlzLm1ldGFkYXRhOwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpICs9IDEpIHsKICAgICAgICBmaWx0ZXJlZE1ldGFkYXRhID0gZmlsdGVyZWRNZXRhZGF0YVthcmdzW2ldXTsKICAgICAgICBpZiAoIWZpbHRlcmVkTWV0YWRhdGEpIHsKICAgICAgICAgIHJldHVybiBmaWx0ZXJlZE1ldGFkYXRhOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gZmlsdGVyZWRNZXRhZGF0YTsKICAgIH0KICAgIF9wYXJzZUtleVZhbHVlKHN0ciwgcGFpclNlcGFyYXRvciA9ICI7IikgewogICAgICBjb25zdCBkYXRhID0ge307CiAgICAgIGxldCBjdXJyS2V5ID0gIiI7CiAgICAgIGxldCBjdXJyVmFsdWUgPSAiIjsKICAgICAgbGV0IHN0YXRlID0gMTsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpICs9IDEpIHsKICAgICAgICBpZiAoc3RhdGUgPT09IDEpIHsKICAgICAgICAgIGlmIChzdHJbaV0gPT09ICI9IikgewogICAgICAgICAgICBzdGF0ZSA9IDI7CiAgICAgICAgICB9IGVsc2UgaWYgKHN0cltpXSAhPT0gcGFpclNlcGFyYXRvcikgewogICAgICAgICAgICBjdXJyS2V5ICs9IHN0cltpXTsKICAgICAgICAgIH0gZWxzZSBpZiAoY3VyclZhbHVlID09PSAiIikgewogICAgICAgICAgICBkYXRhW2N1cnJLZXldID0gbnVsbDsKICAgICAgICAgICAgY3VycktleSA9ICIiOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoc3RhdGUgPT09IDIpIHsKICAgICAgICAgIGlmIChzdHJbaV0gPT09IHBhaXJTZXBhcmF0b3IpIHsKICAgICAgICAgICAgZGF0YVtjdXJyS2V5XSA9IGN1cnJWYWx1ZTsKICAgICAgICAgICAgY3VycktleSA9ICIiOwogICAgICAgICAgICBjdXJyVmFsdWUgPSAiIjsKICAgICAgICAgICAgc3RhdGUgPSAxOwogICAgICAgICAgfSBlbHNlIGlmIChzdHJbaV0gPT09ICciJykgewogICAgICAgICAgICBzdGF0ZSA9IDM7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjdXJyVmFsdWUgKz0gc3RyW2ldOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoc3RhdGUgPT09IDMpIHsKICAgICAgICAgIGlmIChzdHJbaV0gIT09ICciJykgewogICAgICAgICAgICBjdXJyVmFsdWUgKz0gc3RyW2ldOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc3RhdGUgPSAyOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoc3RhdGUgPT09IDIgfHwgc3RhdGUgPT09IDMpIHsKICAgICAgICBkYXRhW2N1cnJLZXldID0gY3VyclZhbHVlOwogICAgICB9IGVsc2UgaWYgKHN0YXRlID09PSAxKSB7CiAgICAgICAgZGF0YVtjdXJyS2V5XSA9IG51bGw7CiAgICAgIH0KICAgICAgcmV0dXJuIGRhdGE7CiAgICB9CiAgICBwYXJzZUxpbmUobGluZSkgewogICAgICBsaW5lID0gbGluZS50cmltKCk7CiAgICAgIGlmICghbGluZS5sZW5ndGgpIHsKICAgICAgICByZXR1cm4gdm9pZCAwOwogICAgICB9CiAgICAgIGNvbnN0IHBhcnNlciA9IHRoaXM7CiAgICAgIGxldCBjdXJyQ2hhciA9IDA7CiAgICAgIGZvciAobGV0IGN1cnJGaWVsZCA9IDA7IGN1cnJDaGFyIDwgbGluZS5sZW5ndGg7IGN1cnJDaGFyICs9IDEpIHsKICAgICAgICBpZiAobGluZVtjdXJyQ2hhcl0gPT09ICIJIikgewogICAgICAgICAgY3VyckZpZWxkICs9IDE7CiAgICAgICAgfQogICAgICAgIGlmIChjdXJyRmllbGQgPT09IDkpIHsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgICBjb25zdCBmaWVsZHMgPSBsaW5lLnN1YnN0cigwLCBjdXJyQ2hhcikuc3BsaXQoIgkiKTsKICAgICAgY29uc3QgcmVzdCA9IGxpbmUuc3Vic3RyKGN1cnJDaGFyICsgMSk7CiAgICAgIGNvbnN0IFtDSFJPTSwgUE9TLCBJRCwgUkVGLCBBTFQsIFFVQUwsIEZJTFRFUl0gPSBmaWVsZHM7CiAgICAgIGNvbnN0IGNocm9tID0gQ0hST007CiAgICAgIGNvbnN0IHBvcyA9ICtQT1M7CiAgICAgIGNvbnN0IGlkID0gSUQgPT09ICIuIiA/IG51bGwgOiBJRC5zcGxpdCgiOyIpOwogICAgICBjb25zdCByZWYgPSBSRUY7CiAgICAgIGNvbnN0IGFsdCA9IEFMVCA9PT0gIi4iID8gbnVsbCA6IEFMVC5zcGxpdCgiLCIpOwogICAgICBjb25zdCBxdWFsID0gUVVBTCA9PT0gIi4iID8gbnVsbCA6ICtRVUFMOwogICAgICBjb25zdCBmaWx0ZXIgPSBGSUxURVIgPT09ICIuIiA/IG51bGwgOiBGSUxURVIuc3BsaXQoIjsiKTsKICAgICAgaWYgKHRoaXMuc3RyaWN0ICYmIGZpZWxkc1s3XSA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJubyBJTkZPIGZpZWxkIHNwZWNpZmllZCwgbXVzdCBjb250YWluIGF0IGxlYXN0IGEgJy4nICh0dXJuIG9mZiBzdHJpY3QgbW9kZSB0byBhbGxvdykiKTsKICAgICAgfQogICAgICBjb25zdCBpbmZvID0gZmllbGRzWzddID09PSB2b2lkIDAgfHwgZmllbGRzWzddID09PSAiLiIgPyB7fSA6IHRoaXMuX3BhcnNlS2V5VmFsdWUoZmllbGRzWzddKTsKICAgICAgT2JqZWN0LmtleXMoaW5mbykuZm9yRWFjaCgoa2V5KSA9PiB7CiAgICAgICAgbGV0IGl0ZW1zOwogICAgICAgIGlmIChpbmZvW2tleV0pIHsKICAgICAgICAgIGl0ZW1zID0gaW5mb1trZXldLnNwbGl0KCIsIikubWFwKCh2YWwpID0+IHZhbCA9PT0gIi4iID8gbnVsbCA6IHZhbCkubWFwKChmKSA9PiBmID8gZGVjb2RlVVJJQ29tcG9uZW50Tm9UaHJvdyhmKSA6IGYpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpdGVtcyA9IGluZm9ba2V5XTsKICAgICAgICB9CiAgICAgICAgY29uc3QgaXRlbVR5cGUgPSB0aGlzLmdldE1ldGFkYXRhKCJJTkZPIiwga2V5LCAiVHlwZSIpOwogICAgICAgIGlmIChpdGVtVHlwZSkgewogICAgICAgICAgaWYgKGl0ZW1UeXBlID09PSAiSW50ZWdlciIgfHwgaXRlbVR5cGUgPT09ICJGbG9hdCIpIHsKICAgICAgICAgICAgaXRlbXMgPSBpdGVtcy5tYXAoKHZhbCkgPT4gewogICAgICAgICAgICAgIGlmICh2YWwgPT09IG51bGwpIHsKICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gTnVtYmVyKHZhbCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIGlmIChpdGVtVHlwZSA9PT0gIkZsYWciKSB7CiAgICAgICAgICAgIGlmIChpbmZvW2tleV0pIHsKICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYEluZm8gZmllbGQgJHtrZXl9IGlzIGEgRmxhZyBhbmQgc2hvdWxkIG5vdCBoYXZlIGEgdmFsdWUgKGdvdCB2YWx1ZSAke2luZm9ba2V5XX0pYCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgaXRlbXMgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGluZm9ba2V5XSA9IGl0ZW1zOwogICAgICB9KTsKICAgICAgY29uc3QgdmFyaWFudCA9IG5ldyBWYXJpYW50KHsKICAgICAgICBDSFJPTTogY2hyb20sCiAgICAgICAgUE9TOiBwb3MsCiAgICAgICAgQUxUOiBhbHQsCiAgICAgICAgSU5GTzogaW5mbywKICAgICAgICBSRUY6IHJlZiwKICAgICAgICBGSUxURVI6IGZpbHRlciAmJiBmaWx0ZXIubGVuZ3RoID09PSAxICYmIGZpbHRlclswXSA9PT0gIlBBU1MiID8gIlBBU1MiIDogZmlsdGVyLAogICAgICAgIElEOiBpZCwKICAgICAgICBRVUFMOiBxdWFsCiAgICAgIH0pOwogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodmFyaWFudCwgIlNBTVBMRVMiLCB7CiAgICAgICAgZ2V0KCkgewogICAgICAgICAgY29uc3Qgc2FtcGxlcyA9IHBhcnNlci5fcGFyc2VHZW5vdHlwZXMoZmllbGRzWzhdLCByZXN0KTsKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiU0FNUExFUyIsIHsKICAgICAgICAgICAgdmFsdWU6IHNhbXBsZXMsCiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuIHNhbXBsZXM7CiAgICAgICAgfSwKICAgICAgICBjb25maWd1cmFibGU6IHRydWUKICAgICAgfSk7CiAgICAgIHJldHVybiB2YXJpYW50OwogICAgfQogIH0KICB2YXIgY29tbW9uanNHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gInVuZGVmaW5lZCIgPyBnbG9iYWxUaGlzIDogdHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSAidW5kZWZpbmVkIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIiA/IHNlbGYgOiB7fTsKICBmdW5jdGlvbiBnZXREZWZhdWx0RXhwb3J0RnJvbUNqcyh4KSB7CiAgICByZXR1cm4geCAmJiB4Ll9fZXNNb2R1bGUgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHgsICJkZWZhdWx0IikgPyB4WyJkZWZhdWx0Il0gOiB4OwogIH0KICBmdW5jdGlvbiBnZXRBdWdtZW50ZWROYW1lc3BhY2UobikgewogICAgaWYgKG4uX19lc01vZHVsZSkKICAgICAgcmV0dXJuIG47CiAgICB2YXIgYSA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwogICAgT2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbihrKSB7CiAgICAgIHZhciBkID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLCBrKTsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsIGssIGQuZ2V0ID8gZCA6IHsKICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICAgIGdldDogZnVuY3Rpb24oKSB7CiAgICAgICAgICByZXR1cm4gbltrXTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSk7CiAgICByZXR1cm4gYTsKICB9CiAgdmFyIGVzbSA9IHt9OwogIHZhciBBYm9ydGFibGVQcm9taXNlQ2FjaGUkMSA9IHt9OwogIHZhciBhYm9ydGNvbnRyb2xsZXJQb255ZmlsbCA9IHt9OwogIHZhciBjanNQb255ZmlsbCA9IHt9OwogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjanNQb255ZmlsbCwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwogIGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsKICAgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOwogICAgfQogIH0KICBmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07CiAgICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsKICAgICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOwogICAgICBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKQogICAgICAgIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOwogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7CiAgICB9CiAgfQogIGZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsKICAgIGlmIChwcm90b1Byb3BzKQogICAgICBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOwogICAgaWYgKHN0YXRpY1Byb3BzKQogICAgICBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOwogICAgcmV0dXJuIENvbnN0cnVjdG9yOwogIH0KICBmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsKICAgIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uIik7CiAgICB9CiAgICBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsKICAgICAgY29uc3RydWN0b3I6IHsKICAgICAgICB2YWx1ZTogc3ViQ2xhc3MsCiAgICAgICAgd3JpdGFibGU6IHRydWUsCiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlCiAgICAgIH0KICAgIH0pOwogICAgaWYgKHN1cGVyQ2xhc3MpCiAgICAgIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7CiAgfQogIGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7CiAgICBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YyKG8yKSB7CiAgICAgIHJldHVybiBvMi5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8yKTsKICAgIH07CiAgICByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOwogIH0KICBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgewogICAgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZjIobzIsIHAyKSB7CiAgICAgIG8yLl9fcHJvdG9fXyA9IHAyOwogICAgICByZXR1cm4gbzI7CiAgICB9OwogICAgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsKICB9CiAgZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsKICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gInVuZGVmaW5lZCIgfHwgIVJlZmxlY3QuY29uc3RydWN0KQogICAgICByZXR1cm4gZmFsc2U7CiAgICBpZiAoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSkKICAgICAgcmV0dXJuIGZhbHNlOwogICAgaWYgKHR5cGVvZiBQcm94eSA9PT0gImZ1bmN0aW9uIikKICAgICAgcmV0dXJuIHRydWU7CiAgICB0cnkgewogICAgICBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uKCkgewogICAgICB9KSk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfSBjYXRjaCAoZSkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfQogIGZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZjIpIHsKICAgIGlmIChzZWxmMiA9PT0gdm9pZCAwKSB7CiAgICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7CiAgICB9CiAgICByZXR1cm4gc2VsZjI7CiAgfQogIGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYyLCBjYWxsKSB7CiAgICBpZiAoY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBjYWxsID09PSAiZnVuY3Rpb24iKSkgewogICAgICByZXR1cm4gY2FsbDsKICAgIH0KICAgIHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYyKTsKICB9CiAgZnVuY3Rpb24gX2NyZWF0ZVN1cGVyKERlcml2ZWQpIHsKICAgIHZhciBoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpOwogICAgcmV0dXJuIGZ1bmN0aW9uIF9jcmVhdGVTdXBlckludGVybmFsKCkgewogICAgICB2YXIgU3VwZXIgPSBfZ2V0UHJvdG90eXBlT2YoRGVyaXZlZCksIHJlc3VsdDsKICAgICAgaWYgKGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QpIHsKICAgICAgICB2YXIgTmV3VGFyZ2V0ID0gX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yOwogICAgICAgIHJlc3VsdCA9IFJlZmxlY3QuY29uc3RydWN0KFN1cGVyLCBhcmd1bWVudHMsIE5ld1RhcmdldCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVzdWx0ID0gU3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQogICAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgcmVzdWx0KTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIF9zdXBlclByb3BCYXNlKG9iamVjdCwgcHJvcGVydHkpIHsKICAgIHdoaWxlICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpKSB7CiAgICAgIG9iamVjdCA9IF9nZXRQcm90b3R5cGVPZihvYmplY3QpOwogICAgICBpZiAob2JqZWN0ID09PSBudWxsKQogICAgICAgIGJyZWFrOwogICAgfQogICAgcmV0dXJuIG9iamVjdDsKICB9CiAgZnVuY3Rpb24gX2dldCh0YXJnZXQsIHByb3BlcnR5LCByZWNlaXZlcikgewogICAgaWYgKHR5cGVvZiBSZWZsZWN0ICE9PSAidW5kZWZpbmVkIiAmJiBSZWZsZWN0LmdldCkgewogICAgICBfZ2V0ID0gUmVmbGVjdC5nZXQ7CiAgICB9IGVsc2UgewogICAgICBfZ2V0ID0gZnVuY3Rpb24gX2dldDIodGFyZ2V0MiwgcHJvcGVydHkyLCByZWNlaXZlcjIpIHsKICAgICAgICB2YXIgYmFzZSA9IF9zdXBlclByb3BCYXNlKHRhcmdldDIsIHByb3BlcnR5Mik7CiAgICAgICAgaWYgKCFiYXNlKQogICAgICAgICAgcmV0dXJuOwogICAgICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihiYXNlLCBwcm9wZXJ0eTIpOwogICAgICAgIGlmIChkZXNjLmdldCkgewogICAgICAgICAgcmV0dXJuIGRlc2MuZ2V0LmNhbGwocmVjZWl2ZXIyKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGRlc2MudmFsdWU7CiAgICAgIH07CiAgICB9CiAgICByZXR1cm4gX2dldCh0YXJnZXQsIHByb3BlcnR5LCByZWNlaXZlciB8fCB0YXJnZXQpOwogIH0KICB2YXIgRW1pdHRlciA9IC8qIEBfX1BVUkVfXyAqLyBmdW5jdGlvbigpIHsKICAgIGZ1bmN0aW9uIEVtaXR0ZXIyKCkgewogICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRW1pdHRlcjIpOwogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgImxpc3RlbmVycyIsIHsKICAgICAgICB2YWx1ZToge30sCiAgICAgICAgd3JpdGFibGU6IHRydWUsCiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlCiAgICAgIH0pOwogICAgfQogICAgX2NyZWF0ZUNsYXNzKEVtaXR0ZXIyLCBbewogICAgICBrZXk6ICJhZGRFdmVudExpc3RlbmVyIiwKICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXIodHlwZSwgY2FsbGJhY2ssIG9wdGlvbnMpIHsKICAgICAgICBpZiAoISh0eXBlIGluIHRoaXMubGlzdGVuZXJzKSkgewogICAgICAgICAgdGhpcy5saXN0ZW5lcnNbdHlwZV0gPSBbXTsKICAgICAgICB9CiAgICAgICAgdGhpcy5saXN0ZW5lcnNbdHlwZV0ucHVzaCh7CiAgICAgICAgICBjYWxsYmFjaywKICAgICAgICAgIG9wdGlvbnMKICAgICAgICB9KTsKICAgICAgfQogICAgfSwgewogICAgICBrZXk6ICJyZW1vdmVFdmVudExpc3RlbmVyIiwKICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgY2FsbGJhY2spIHsKICAgICAgICBpZiAoISh0eXBlIGluIHRoaXMubGlzdGVuZXJzKSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB2YXIgc3RhY2sgPSB0aGlzLmxpc3RlbmVyc1t0eXBlXTsKICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHN0YWNrLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgICAgaWYgKHN0YWNrW2ldLmNhbGxiYWNrID09PSBjYWxsYmFjaykgewogICAgICAgICAgICBzdGFjay5zcGxpY2UoaSwgMSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0sIHsKICAgICAga2V5OiAiZGlzcGF0Y2hFdmVudCIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNwYXRjaEV2ZW50KGV2ZW50KSB7CiAgICAgICAgaWYgKCEoZXZlbnQudHlwZSBpbiB0aGlzLmxpc3RlbmVycykpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdmFyIHN0YWNrID0gdGhpcy5saXN0ZW5lcnNbZXZlbnQudHlwZV07CiAgICAgICAgdmFyIHN0YWNrVG9DYWxsID0gc3RhY2suc2xpY2UoKTsKICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHN0YWNrVG9DYWxsLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgICAgdmFyIGxpc3RlbmVyID0gc3RhY2tUb0NhbGxbaV07CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBsaXN0ZW5lci5jYWxsYmFjay5jYWxsKHRoaXMsIGV2ZW50KTsKICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbigpIHsKICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChsaXN0ZW5lci5vcHRpb25zICYmIGxpc3RlbmVyLm9wdGlvbnMub25jZSkgewogICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQudHlwZSwgbGlzdGVuZXIuY2FsbGJhY2spOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gIWV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQ7CiAgICAgIH0KICAgIH1dKTsKICAgIHJldHVybiBFbWl0dGVyMjsKICB9KCk7CiAgdmFyIEFib3J0U2lnbmFsJDEgPSAvKiBAX19QVVJFX18gKi8gZnVuY3Rpb24oX0VtaXR0ZXIpIHsKICAgIF9pbmhlcml0cyhBYm9ydFNpZ25hbDIsIF9FbWl0dGVyKTsKICAgIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoQWJvcnRTaWduYWwyKTsKICAgIGZ1bmN0aW9uIEFib3J0U2lnbmFsMigpIHsKICAgICAgdmFyIF90aGlzOwogICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQWJvcnRTaWduYWwyKTsKICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKTsKICAgICAgaWYgKCFfdGhpcy5saXN0ZW5lcnMpIHsKICAgICAgICBFbWl0dGVyLmNhbGwoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpOwogICAgICB9CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgImFib3J0ZWQiLCB7CiAgICAgICAgdmFsdWU6IGZhbHNlLAogICAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogICAgICB9KTsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAib25hYm9ydCIsIHsKICAgICAgICB2YWx1ZTogbnVsbCwKICAgICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgICBjb25maWd1cmFibGU6IHRydWUKICAgICAgfSk7CiAgICAgIHJldHVybiBfdGhpczsKICAgIH0KICAgIF9jcmVhdGVDbGFzcyhBYm9ydFNpZ25hbDIsIFt7CiAgICAgIGtleTogInRvU3RyaW5nIiwKICAgICAgdmFsdWU6IGZ1bmN0aW9uIHRvU3RyaW5nMigpIHsKICAgICAgICByZXR1cm4gIltvYmplY3QgQWJvcnRTaWduYWxdIjsKICAgICAgfQogICAgfSwgewogICAgICBrZXk6ICJkaXNwYXRjaEV2ZW50IiwKICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRpc3BhdGNoRXZlbnQoZXZlbnQpIHsKICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gImFib3J0IikgewogICAgICAgICAgdGhpcy5hYm9ydGVkID0gdHJ1ZTsKICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5vbmFib3J0ID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICAgIHRoaXMub25hYm9ydC5jYWxsKHRoaXMsIGV2ZW50KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgX2dldChfZ2V0UHJvdG90eXBlT2YoQWJvcnRTaWduYWwyLnByb3RvdHlwZSksICJkaXNwYXRjaEV2ZW50IiwgdGhpcykuY2FsbCh0aGlzLCBldmVudCk7CiAgICAgIH0KICAgIH1dKTsKICAgIHJldHVybiBBYm9ydFNpZ25hbDI7CiAgfShFbWl0dGVyKTsKICB2YXIgQWJvcnRDb250cm9sbGVyJDEgPSAvKiBAX19QVVJFX18gKi8gZnVuY3Rpb24oKSB7CiAgICBmdW5jdGlvbiBBYm9ydENvbnRyb2xsZXIyKCkgewogICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQWJvcnRDb250cm9sbGVyMik7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAic2lnbmFsIiwgewogICAgICAgIHZhbHVlOiBuZXcgQWJvcnRTaWduYWwkMSgpLAogICAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogICAgICB9KTsKICAgIH0KICAgIF9jcmVhdGVDbGFzcyhBYm9ydENvbnRyb2xsZXIyLCBbewogICAgICBrZXk6ICJhYm9ydCIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBhYm9ydCgpIHsKICAgICAgICB2YXIgZXZlbnQ7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGV2ZW50ID0gbmV3IEV2ZW50KCJhYm9ydCIpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIGlmICh0eXBlb2YgZG9jdW1lbnQgIT09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICAgIGlmICghZG9jdW1lbnQuY3JlYXRlRXZlbnQpIHsKICAgICAgICAgICAgICBldmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50T2JqZWN0KCk7CiAgICAgICAgICAgICAgZXZlbnQudHlwZSA9ICJhYm9ydCI7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgZXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgiRXZlbnQiKTsKICAgICAgICAgICAgICBldmVudC5pbml0RXZlbnQoImFib3J0IiwgZmFsc2UsIGZhbHNlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZXZlbnQgPSB7CiAgICAgICAgICAgICAgdHlwZTogImFib3J0IiwKICAgICAgICAgICAgICBidWJibGVzOiBmYWxzZSwKICAgICAgICAgICAgICBjYW5jZWxhYmxlOiBmYWxzZQogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0aGlzLnNpZ25hbC5kaXNwYXRjaEV2ZW50KGV2ZW50KTsKICAgICAgfQogICAgfSwgewogICAgICBrZXk6ICJ0b1N0cmluZyIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbiB0b1N0cmluZzIoKSB7CiAgICAgICAgcmV0dXJuICJbb2JqZWN0IEFib3J0Q29udHJvbGxlcl0iOwogICAgICB9CiAgICB9XSk7CiAgICByZXR1cm4gQWJvcnRDb250cm9sbGVyMjsKICB9KCk7CiAgaWYgKHR5cGVvZiBTeW1ib2wgIT09ICJ1bmRlZmluZWQiICYmIFN5bWJvbC50b1N0cmluZ1RhZykgewogICAgQWJvcnRDb250cm9sbGVyJDEucHJvdG90eXBlW1N5bWJvbC50b1N0cmluZ1RhZ10gPSAiQWJvcnRDb250cm9sbGVyIjsKICAgIEFib3J0U2lnbmFsJDEucHJvdG90eXBlW1N5bWJvbC50b1N0cmluZ1RhZ10gPSAiQWJvcnRTaWduYWwiOwogIH0KICBmdW5jdGlvbiBwb2x5ZmlsbE5lZWRlZChzZWxmMikgewogICAgaWYgKHNlbGYyLl9fRk9SQ0VfSU5TVEFMTF9BQk9SVENPTlRST0xMRVJfUE9MWUZJTEwpIHsKICAgICAgY29uc29sZS5sb2coIl9fRk9SQ0VfSU5TVEFMTF9BQk9SVENPTlRST0xMRVJfUE9MWUZJTEw9dHJ1ZSBpcyBzZXQsIHdpbGwgZm9yY2UgaW5zdGFsbCBwb2x5ZmlsbCIpOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIHJldHVybiB0eXBlb2Ygc2VsZjIuUmVxdWVzdCA9PT0gImZ1bmN0aW9uIiAmJiAhc2VsZjIuUmVxdWVzdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkoInNpZ25hbCIpIHx8ICFzZWxmMi5BYm9ydENvbnRyb2xsZXI7CiAgfQogIGZ1bmN0aW9uIGFib3J0YWJsZUZldGNoRGVjb3JhdG9yKHBhdGNoVGFyZ2V0cykgewogICAgaWYgKHR5cGVvZiBwYXRjaFRhcmdldHMgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgcGF0Y2hUYXJnZXRzID0gewogICAgICAgIGZldGNoOiBwYXRjaFRhcmdldHMKICAgICAgfTsKICAgIH0KICAgIHZhciBfcGF0Y2hUYXJnZXRzID0gcGF0Y2hUYXJnZXRzLCBmZXRjaDIgPSBfcGF0Y2hUYXJnZXRzLmZldGNoLCBfcGF0Y2hUYXJnZXRzJFJlcXVlc3QgPSBfcGF0Y2hUYXJnZXRzLlJlcXVlc3QsIE5hdGl2ZVJlcXVlc3QgPSBfcGF0Y2hUYXJnZXRzJFJlcXVlc3QgPT09IHZvaWQgMCA/IGZldGNoMi5SZXF1ZXN0IDogX3BhdGNoVGFyZ2V0cyRSZXF1ZXN0LCBOYXRpdmVBYm9ydENvbnRyb2xsZXIgPSBfcGF0Y2hUYXJnZXRzLkFib3J0Q29udHJvbGxlciwgX3BhdGNoVGFyZ2V0cyRfX0ZPUkNFID0gX3BhdGNoVGFyZ2V0cy5fX0ZPUkNFX0lOU1RBTExfQUJPUlRDT05UUk9MTEVSX1BPTFlGSUxMLCBfX0ZPUkNFX0lOU1RBTExfQUJPUlRDT05UUk9MTEVSX1BPTFlGSUxMID0gX3BhdGNoVGFyZ2V0cyRfX0ZPUkNFID09PSB2b2lkIDAgPyBmYWxzZSA6IF9wYXRjaFRhcmdldHMkX19GT1JDRTsKICAgIGlmICghcG9seWZpbGxOZWVkZWQoewogICAgICBmZXRjaDogZmV0Y2gyLAogICAgICBSZXF1ZXN0OiBOYXRpdmVSZXF1ZXN0LAogICAgICBBYm9ydENvbnRyb2xsZXI6IE5hdGl2ZUFib3J0Q29udHJvbGxlciwKICAgICAgX19GT1JDRV9JTlNUQUxMX0FCT1JUQ09OVFJPTExFUl9QT0xZRklMTAogICAgfSkpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBmZXRjaDogZmV0Y2gyLAogICAgICAgIFJlcXVlc3QKICAgICAgfTsKICAgIH0KICAgIHZhciBSZXF1ZXN0ID0gTmF0aXZlUmVxdWVzdDsKICAgIGlmIChSZXF1ZXN0ICYmICFSZXF1ZXN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSgic2lnbmFsIikgfHwgX19GT1JDRV9JTlNUQUxMX0FCT1JUQ09OVFJPTExFUl9QT0xZRklMTCkgewogICAgICBSZXF1ZXN0ID0gZnVuY3Rpb24gUmVxdWVzdDIoaW5wdXQsIGluaXQyKSB7CiAgICAgICAgdmFyIHNpZ25hbDsKICAgICAgICBpZiAoaW5pdDIgJiYgaW5pdDIuc2lnbmFsKSB7CiAgICAgICAgICBzaWduYWwgPSBpbml0Mi5zaWduYWw7CiAgICAgICAgICBkZWxldGUgaW5pdDIuc2lnbmFsOwogICAgICAgIH0KICAgICAgICB2YXIgcmVxdWVzdCA9IG5ldyBOYXRpdmVSZXF1ZXN0KGlucHV0LCBpbml0Mik7CiAgICAgICAgaWYgKHNpZ25hbCkgewogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHJlcXVlc3QsICJzaWduYWwiLCB7CiAgICAgICAgICAgIHdyaXRhYmxlOiBmYWxzZSwKICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgICAgICAgdmFsdWU6IHNpZ25hbAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiByZXF1ZXN0OwogICAgICB9OwogICAgICBSZXF1ZXN0LnByb3RvdHlwZSA9IE5hdGl2ZVJlcXVlc3QucHJvdG90eXBlOwogICAgfQogICAgdmFyIHJlYWxGZXRjaCA9IGZldGNoMjsKICAgIHZhciBhYm9ydGFibGVGZXRjaCA9IGZ1bmN0aW9uIGFib3J0YWJsZUZldGNoMihpbnB1dCwgaW5pdDIpIHsKICAgICAgdmFyIHNpZ25hbCA9IFJlcXVlc3QgJiYgUmVxdWVzdC5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihpbnB1dCkgPyBpbnB1dC5zaWduYWwgOiBpbml0MiA/IGluaXQyLnNpZ25hbCA6IHZvaWQgMDsKICAgICAgaWYgKHNpZ25hbCkgewogICAgICAgIHZhciBhYm9ydEVycm9yOwogICAgICAgIHRyeSB7CiAgICAgICAgICBhYm9ydEVycm9yID0gbmV3IERPTUV4Y2VwdGlvbigiQWJvcnRlZCIsICJBYm9ydEVycm9yIik7CiAgICAgICAgfSBjYXRjaCAoZXJyMikgewogICAgICAgICAgYWJvcnRFcnJvciA9IG5ldyBFcnJvcigiQWJvcnRlZCIpOwogICAgICAgICAgYWJvcnRFcnJvci5uYW1lID0gIkFib3J0RXJyb3IiOwogICAgICAgIH0KICAgICAgICBpZiAoc2lnbmFsLmFib3J0ZWQpIHsKICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChhYm9ydEVycm9yKTsKICAgICAgICB9CiAgICAgICAgdmFyIGNhbmNlbGxhdGlvbiA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKF8yLCByZWplY3QpIHsKICAgICAgICAgIHNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCJhYm9ydCIsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gcmVqZWN0KGFib3J0RXJyb3IpOwogICAgICAgICAgfSwgewogICAgICAgICAgICBvbmNlOiB0cnVlCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICBpZiAoaW5pdDIgJiYgaW5pdDIuc2lnbmFsKSB7CiAgICAgICAgICBkZWxldGUgaW5pdDIuc2lnbmFsOwogICAgICAgIH0KICAgICAgICByZXR1cm4gUHJvbWlzZS5yYWNlKFtjYW5jZWxsYXRpb24sIHJlYWxGZXRjaChpbnB1dCwgaW5pdDIpXSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlYWxGZXRjaChpbnB1dCwgaW5pdDIpOwogICAgfTsKICAgIHJldHVybiB7CiAgICAgIGZldGNoOiBhYm9ydGFibGVGZXRjaCwKICAgICAgUmVxdWVzdAogICAgfTsKICB9CiAgY2pzUG9ueWZpbGwuQWJvcnRDb250cm9sbGVyID0gQWJvcnRDb250cm9sbGVyJDE7CiAgY2pzUG9ueWZpbGwuQWJvcnRTaWduYWwgPSBBYm9ydFNpZ25hbCQxOwogIGNqc1BvbnlmaWxsLmFib3J0YWJsZUZldGNoID0gYWJvcnRhYmxlRmV0Y2hEZWNvcmF0b3I7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGFib3J0Y29udHJvbGxlclBvbnlmaWxsLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CiAgYWJvcnRjb250cm9sbGVyUG9ueWZpbGwuQWJvcnRTaWduYWwgPSBhYm9ydGNvbnRyb2xsZXJQb255ZmlsbC5BYm9ydENvbnRyb2xsZXIgPSB2b2lkIDA7CiAgY29uc3QgY2pzX3BvbnlmaWxsXzEgPSBjanNQb255ZmlsbDsKICB2YXIgZ2V0R2xvYmFsID0gZnVuY3Rpb24oKSB7CiAgICBpZiAodHlwZW9mIHNlbGYgIT09ICJ1bmRlZmluZWQiKSB7CiAgICAgIHJldHVybiBzZWxmOwogICAgfQogICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiKSB7CiAgICAgIHJldHVybiB3aW5kb3c7CiAgICB9CiAgICBpZiAodHlwZW9mIGNvbW1vbmpzR2xvYmFsICE9PSAidW5kZWZpbmVkIikgewogICAgICByZXR1cm4gY29tbW9uanNHbG9iYWw7CiAgICB9CiAgICB0aHJvdyBuZXcgRXJyb3IoInVuYWJsZSB0byBsb2NhdGUgZ2xvYmFsIG9iamVjdCIpOwogIH07CiAgbGV0IEFib3J0Q29udHJvbGxlciA9IHR5cGVvZiBnZXRHbG9iYWwoKS5BYm9ydENvbnRyb2xsZXIgPT09ICJ1bmRlZmluZWQiID8gY2pzX3BvbnlmaWxsXzEuQWJvcnRDb250cm9sbGVyIDogZ2V0R2xvYmFsKCkuQWJvcnRDb250cm9sbGVyOwogIGFib3J0Y29udHJvbGxlclBvbnlmaWxsLkFib3J0Q29udHJvbGxlciA9IEFib3J0Q29udHJvbGxlcjsKICBsZXQgQWJvcnRTaWduYWwgPSB0eXBlb2YgZ2V0R2xvYmFsKCkuQWJvcnRDb250cm9sbGVyID09PSAidW5kZWZpbmVkIiA/IGNqc19wb255ZmlsbF8xLkFib3J0U2lnbmFsIDogZ2V0R2xvYmFsKCkuQWJvcnRTaWduYWw7CiAgYWJvcnRjb250cm9sbGVyUG9ueWZpbGwuQWJvcnRTaWduYWwgPSBBYm9ydFNpZ25hbDsKICB2YXIgQWdncmVnYXRlQWJvcnRDb250cm9sbGVyJDEgPSB7fTsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQWdncmVnYXRlQWJvcnRDb250cm9sbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKICBjb25zdCBhYm9ydGNvbnRyb2xsZXJfcG9ueWZpbGxfMSQxID0gYWJvcnRjb250cm9sbGVyUG9ueWZpbGw7CiAgY2xhc3MgTnVsbFNpZ25hbCB7CiAgfQogIGNsYXNzIEFnZ3JlZ2F0ZUFib3J0Q29udHJvbGxlciB7CiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5zaWduYWxzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTsKICAgICAgdGhpcy5hYm9ydENvbnRyb2xsZXIgPSBuZXcgYWJvcnRjb250cm9sbGVyX3BvbnlmaWxsXzEkMS5BYm9ydENvbnRyb2xsZXIoKTsKICAgIH0KICAgIGFkZFNpZ25hbChzaWduYWwgPSBuZXcgTnVsbFNpZ25hbCgpKSB7CiAgICAgIGlmICh0aGlzLnNpZ25hbC5hYm9ydGVkKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJjYW5ub3QgYWRkIGEgc2lnbmFsLCBhbHJlYWR5IGFib3J0ZWQhIik7CiAgICAgIH0KICAgICAgdGhpcy5zaWduYWxzLmFkZChzaWduYWwpOwogICAgICBpZiAoc2lnbmFsLmFib3J0ZWQpIHsKICAgICAgICB0aGlzLmhhbmRsZUFib3J0ZWQoc2lnbmFsKTsKICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICBzaWduYWwuYWRkRXZlbnRMaXN0ZW5lcigiYWJvcnQiLCAoKSA9PiB7CiAgICAgICAgICB0aGlzLmhhbmRsZUFib3J0ZWQoc2lnbmFsKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogICAgaGFuZGxlQWJvcnRlZChzaWduYWwpIHsKICAgICAgdGhpcy5zaWduYWxzLmRlbGV0ZShzaWduYWwpOwogICAgICBpZiAodGhpcy5zaWduYWxzLnNpemUgPT09IDApIHsKICAgICAgICB0aGlzLmFib3J0Q29udHJvbGxlci5hYm9ydCgpOwogICAgICB9CiAgICB9CiAgICBnZXQgc2lnbmFsKCkgewogICAgICByZXR1cm4gdGhpcy5hYm9ydENvbnRyb2xsZXIuc2lnbmFsOwogICAgfQogICAgYWJvcnQoKSB7CiAgICAgIHRoaXMuYWJvcnRDb250cm9sbGVyLmFib3J0KCk7CiAgICB9CiAgfQogIEFnZ3JlZ2F0ZUFib3J0Q29udHJvbGxlciQxLmRlZmF1bHQgPSBBZ2dyZWdhdGVBYm9ydENvbnRyb2xsZXI7CiAgdmFyIEFnZ3JlZ2F0ZVN0YXR1c1JlcG9ydGVyJDEgPSB7fTsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQWdncmVnYXRlU3RhdHVzUmVwb3J0ZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwogIGNsYXNzIEFnZ3JlZ2F0ZVN0YXR1c1JlcG9ydGVyIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLmNhbGxiYWNrcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7CiAgICB9CiAgICBhZGRDYWxsYmFjayhjYWxsYmFjayA9ICgpID0+IHsKICAgIH0pIHsKICAgICAgdGhpcy5jYWxsYmFja3MuYWRkKGNhbGxiYWNrKTsKICAgICAgY2FsbGJhY2sodGhpcy5jdXJyZW50TWVzc2FnZSk7CiAgICB9CiAgICBjYWxsYmFjayhtZXNzYWdlKSB7CiAgICAgIHRoaXMuY3VycmVudE1lc3NhZ2UgPSBtZXNzYWdlOwogICAgICB0aGlzLmNhbGxiYWNrcy5mb3JFYWNoKChlbHQpID0+IHsKICAgICAgICBlbHQobWVzc2FnZSk7CiAgICAgIH0pOwogICAgfQogIH0KICBBZ2dyZWdhdGVTdGF0dXNSZXBvcnRlciQxLmRlZmF1bHQgPSBBZ2dyZWdhdGVTdGF0dXNSZXBvcnRlcjsKICB2YXIgX19pbXBvcnREZWZhdWx0JDEgPSBjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2ltcG9ydERlZmF1bHQgfHwgZnVuY3Rpb24obW9kKSB7CiAgICByZXR1cm4gbW9kICYmIG1vZC5fX2VzTW9kdWxlID8gbW9kIDogeyAiZGVmYXVsdCI6IG1vZCB9OwogIH07CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFib3J0YWJsZVByb21pc2VDYWNoZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CiAgY29uc3QgYWJvcnRjb250cm9sbGVyX3BvbnlmaWxsXzEgPSBhYm9ydGNvbnRyb2xsZXJQb255ZmlsbDsKICBjb25zdCBBZ2dyZWdhdGVBYm9ydENvbnRyb2xsZXJfMSA9IF9faW1wb3J0RGVmYXVsdCQxKEFnZ3JlZ2F0ZUFib3J0Q29udHJvbGxlciQxKTsKICBjb25zdCBBZ2dyZWdhdGVTdGF0dXNSZXBvcnRlcl8xID0gX19pbXBvcnREZWZhdWx0JDEoQWdncmVnYXRlU3RhdHVzUmVwb3J0ZXIkMSk7CiAgY2xhc3MgQWJvcnRhYmxlUHJvbWlzZUNhY2hlIHsKICAgIGNvbnN0cnVjdG9yKHsgZmlsbCwgY2FjaGUgfSkgewogICAgICBpZiAodHlwZW9mIGZpbGwgIT09ICJmdW5jdGlvbiIpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJtdXN0IHBhc3MgYSBmaWxsIGZ1bmN0aW9uIik7CiAgICAgIH0KICAgICAgaWYgKHR5cGVvZiBjYWNoZSAhPT0gIm9iamVjdCIpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJtdXN0IHBhc3MgYSBjYWNoZSBvYmplY3QiKTsKICAgICAgfQogICAgICBpZiAodHlwZW9mIGNhY2hlLmdldCAhPT0gImZ1bmN0aW9uIiB8fCB0eXBlb2YgY2FjaGUuc2V0ICE9PSAiZnVuY3Rpb24iIHx8IHR5cGVvZiBjYWNoZS5kZWxldGUgIT09ICJmdW5jdGlvbiIpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJjYWNoZSBtdXN0IGltcGxlbWVudCBnZXQoa2V5KSwgc2V0KGtleSwgdmFsKSwgYW5kIGFuZCBkZWxldGUoa2V5KSIpOwogICAgICB9CiAgICAgIHRoaXMuY2FjaGUgPSBjYWNoZTsKICAgICAgdGhpcy5maWxsQ2FsbGJhY2sgPSBmaWxsOwogICAgfQogICAgc3RhdGljIGlzQWJvcnRFeGNlcHRpb24oZXhjZXB0aW9uKSB7CiAgICAgIHJldHVybiBleGNlcHRpb24ubmFtZSA9PT0gIkFib3J0RXJyb3IiIHx8IGV4Y2VwdGlvbi5jb2RlID09PSAiRVJSX0FCT1JURUQiIHx8IGV4Y2VwdGlvbi5tZXNzYWdlID09PSAiQWJvcnRFcnJvcjogYWJvcnRlZCIgfHwgZXhjZXB0aW9uLm1lc3NhZ2UgPT09ICJFcnJvcjogYWJvcnRlZCI7CiAgICB9CiAgICBldmljdChrZXksIGVudHJ5KSB7CiAgICAgIGlmICh0aGlzLmNhY2hlLmdldChrZXkpID09PSBlbnRyeSkgewogICAgICAgIHRoaXMuY2FjaGUuZGVsZXRlKGtleSk7CiAgICAgIH0KICAgIH0KICAgIGZpbGwoa2V5LCBkYXRhLCBzaWduYWwsIHN0YXR1c0NhbGxiYWNrKSB7CiAgICAgIGNvbnN0IGFib3J0ZXIgPSBuZXcgQWdncmVnYXRlQWJvcnRDb250cm9sbGVyXzEuZGVmYXVsdCgpOwogICAgICBjb25zdCBzdGF0dXNSZXBvcnRlciA9IG5ldyBBZ2dyZWdhdGVTdGF0dXNSZXBvcnRlcl8xLmRlZmF1bHQoKTsKICAgICAgc3RhdHVzUmVwb3J0ZXIuYWRkQ2FsbGJhY2soc3RhdHVzQ2FsbGJhY2spOwogICAgICBjb25zdCBuZXdFbnRyeSA9IHsKICAgICAgICBhYm9ydGVyLAogICAgICAgIHByb21pc2U6IHRoaXMuZmlsbENhbGxiYWNrKGRhdGEsIGFib3J0ZXIuc2lnbmFsLCAobWVzc2FnZSkgPT4gewogICAgICAgICAgc3RhdHVzUmVwb3J0ZXIuY2FsbGJhY2sobWVzc2FnZSk7CiAgICAgICAgfSksCiAgICAgICAgc2V0dGxlZDogZmFsc2UsCiAgICAgICAgc3RhdHVzUmVwb3J0ZXIsCiAgICAgICAgZ2V0IGFib3J0ZWQoKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5hYm9ydGVyLnNpZ25hbC5hYm9ydGVkOwogICAgICAgIH0KICAgICAgfTsKICAgICAgbmV3RW50cnkuYWJvcnRlci5hZGRTaWduYWwoc2lnbmFsKTsKICAgICAgbmV3RW50cnkuYWJvcnRlci5zaWduYWwuYWRkRXZlbnRMaXN0ZW5lcigiYWJvcnQiLCAoKSA9PiB7CiAgICAgICAgaWYgKCFuZXdFbnRyeS5zZXR0bGVkKSB7CiAgICAgICAgICB0aGlzLmV2aWN0KGtleSwgbmV3RW50cnkpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIG5ld0VudHJ5LnByb21pc2UudGhlbigoKSA9PiB7CiAgICAgICAgbmV3RW50cnkuc2V0dGxlZCA9IHRydWU7CiAgICAgIH0sICgpID0+IHsKICAgICAgICBuZXdFbnRyeS5zZXR0bGVkID0gdHJ1ZTsKICAgICAgICB0aGlzLmV2aWN0KGtleSwgbmV3RW50cnkpOwogICAgICB9KS5jYXRjaCgoZSkgPT4gewogICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7CiAgICAgICAgdGhyb3cgZTsKICAgICAgfSk7CiAgICAgIHRoaXMuY2FjaGUuc2V0KGtleSwgbmV3RW50cnkpOwogICAgfQogICAgc3RhdGljIGNoZWNrU2luZ2xlUHJvbWlzZShwcm9taXNlLCBzaWduYWwpIHsKICAgICAgZnVuY3Rpb24gY2hlY2tGb3JTaW5nbGVBYm9ydCgpIHsKICAgICAgICBpZiAoc2lnbmFsICYmIHNpZ25hbC5hYm9ydGVkKSB7CiAgICAgICAgICB0aHJvdyBPYmplY3QuYXNzaWduKG5ldyBFcnJvcigiYWJvcnRlZCIpLCB7IGNvZGU6ICJFUlJfQUJPUlRFRCIgfSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBwcm9taXNlLnRoZW4oKHJlc3VsdCkgPT4gewogICAgICAgIGNoZWNrRm9yU2luZ2xlQWJvcnQoKTsKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICB9LCAoZXJyb3IpID0+IHsKICAgICAgICBjaGVja0ZvclNpbmdsZUFib3J0KCk7CiAgICAgICAgdGhyb3cgZXJyb3I7CiAgICAgIH0pOwogICAgfQogICAgaGFzKGtleSkgewogICAgICByZXR1cm4gdGhpcy5jYWNoZS5oYXMoa2V5KTsKICAgIH0KICAgIGdldChrZXksIGRhdGEsIHNpZ25hbCwgc3RhdHVzQ2FsbGJhY2spIHsKICAgICAgaWYgKCFzaWduYWwgJiYgZGF0YSBpbnN0YW5jZW9mIGFib3J0Y29udHJvbGxlcl9wb255ZmlsbF8xLkFib3J0U2lnbmFsKSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigic2Vjb25kIGdldCBhcmd1bWVudCBhcHBlYXJzIHRvIGJlIGFuIEFib3J0U2lnbmFsLCBwZXJoYXBzIHlvdSBtZWFudCB0byBwYXNzIGBudWxsYCBmb3IgdGhlIGZpbGwgZGF0YT8iKTsKICAgICAgfQogICAgICBjb25zdCBjYWNoZUVudHJ5ID0gdGhpcy5jYWNoZS5nZXQoa2V5KTsKICAgICAgaWYgKGNhY2hlRW50cnkpIHsKICAgICAgICBpZiAoY2FjaGVFbnRyeS5hYm9ydGVkICYmICFjYWNoZUVudHJ5LnNldHRsZWQpIHsKICAgICAgICAgIHRoaXMuZXZpY3Qoa2V5LCBjYWNoZUVudHJ5KTsKICAgICAgICAgIHJldHVybiB0aGlzLmdldChrZXksIGRhdGEsIHNpZ25hbCwgc3RhdHVzQ2FsbGJhY2spOwogICAgICAgIH0KICAgICAgICBpZiAoY2FjaGVFbnRyeS5zZXR0bGVkKSB7CiAgICAgICAgICByZXR1cm4gY2FjaGVFbnRyeS5wcm9taXNlOwogICAgICAgIH0KICAgICAgICBjYWNoZUVudHJ5LmFib3J0ZXIuYWRkU2lnbmFsKHNpZ25hbCk7CiAgICAgICAgY2FjaGVFbnRyeS5zdGF0dXNSZXBvcnRlci5hZGRDYWxsYmFjayhzdGF0dXNDYWxsYmFjayk7CiAgICAgICAgcmV0dXJuIEFib3J0YWJsZVByb21pc2VDYWNoZS5jaGVja1NpbmdsZVByb21pc2UoY2FjaGVFbnRyeS5wcm9taXNlLCBzaWduYWwpOwogICAgICB9CiAgICAgIHRoaXMuZmlsbChrZXksIGRhdGEsIHNpZ25hbCwgc3RhdHVzQ2FsbGJhY2spOwogICAgICByZXR1cm4gQWJvcnRhYmxlUHJvbWlzZUNhY2hlLmNoZWNrU2luZ2xlUHJvbWlzZSh0aGlzLmNhY2hlLmdldChrZXkpLnByb21pc2UsIHNpZ25hbCk7CiAgICB9CiAgICBkZWxldGUoa2V5KSB7CiAgICAgIGNvbnN0IGNhY2hlZEVudHJ5ID0gdGhpcy5jYWNoZS5nZXQoa2V5KTsKICAgICAgaWYgKGNhY2hlZEVudHJ5KSB7CiAgICAgICAgaWYgKCFjYWNoZWRFbnRyeS5zZXR0bGVkKSB7CiAgICAgICAgICBjYWNoZWRFbnRyeS5hYm9ydGVyLmFib3J0KCk7CiAgICAgICAgfQogICAgICAgIHRoaXMuY2FjaGUuZGVsZXRlKGtleSk7CiAgICAgIH0KICAgIH0KICAgIGNsZWFyKCkgewogICAgICBjb25zdCBrZXlJdGVyID0gdGhpcy5jYWNoZS5rZXlzKCk7CiAgICAgIGxldCBkZWxldGVDb3VudCA9IDA7CiAgICAgIGZvciAobGV0IHJlc3VsdCA9IGtleUl0ZXIubmV4dCgpOyAhcmVzdWx0LmRvbmU7IHJlc3VsdCA9IGtleUl0ZXIubmV4dCgpKSB7CiAgICAgICAgdGhpcy5kZWxldGUocmVzdWx0LnZhbHVlKTsKICAgICAgICBkZWxldGVDb3VudCArPSAxOwogICAgICB9CiAgICAgIHJldHVybiBkZWxldGVDb3VudDsKICAgIH0KICB9CiAgQWJvcnRhYmxlUHJvbWlzZUNhY2hlJDEuZGVmYXVsdCA9IEFib3J0YWJsZVByb21pc2VDYWNoZTsKICB2YXIgX19pbXBvcnREZWZhdWx0ID0gY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19pbXBvcnREZWZhdWx0IHx8IGZ1bmN0aW9uKG1vZCkgewogICAgcmV0dXJuIG1vZCAmJiBtb2QuX19lc01vZHVsZSA/IG1vZCA6IHsgImRlZmF1bHQiOiBtb2QgfTsKICB9OwogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlc20sICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKICBjb25zdCBBYm9ydGFibGVQcm9taXNlQ2FjaGVfMSA9IF9faW1wb3J0RGVmYXVsdChBYm9ydGFibGVQcm9taXNlQ2FjaGUkMSk7CiAgdmFyIF9kZWZhdWx0ID0gZXNtLmRlZmF1bHQgPSBBYm9ydGFibGVQcm9taXNlQ2FjaGVfMS5kZWZhdWx0OwogIGNsYXNzIFF1aWNrTFJVIHsKICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkgewogICAgICBpZiAoIShvcHRpb25zLm1heFNpemUgJiYgb3B0aW9ucy5tYXhTaXplID4gMCkpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJgbWF4U2l6ZWAgbXVzdCBiZSBhIG51bWJlciBncmVhdGVyIHRoYW4gMCIpOwogICAgICB9CiAgICAgIHRoaXMubWF4U2l6ZSA9IG9wdGlvbnMubWF4U2l6ZTsKICAgICAgdGhpcy5jYWNoZSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgICAgIHRoaXMub2xkQ2FjaGUgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpOwogICAgICB0aGlzLl9zaXplID0gMDsKICAgIH0KICAgIF9zZXQoa2V5LCB2YWx1ZSkgewogICAgICB0aGlzLmNhY2hlLnNldChrZXksIHZhbHVlKTsKICAgICAgdGhpcy5fc2l6ZSsrOwogICAgICBpZiAodGhpcy5fc2l6ZSA+PSB0aGlzLm1heFNpemUpIHsKICAgICAgICB0aGlzLl9zaXplID0gMDsKICAgICAgICB0aGlzLm9sZENhY2hlID0gdGhpcy5jYWNoZTsKICAgICAgICB0aGlzLmNhY2hlID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICAgICAgfQogICAgfQogICAgZ2V0KGtleSkgewogICAgICBpZiAodGhpcy5jYWNoZS5oYXMoa2V5KSkgewogICAgICAgIHJldHVybiB0aGlzLmNhY2hlLmdldChrZXkpOwogICAgICB9CiAgICAgIGlmICh0aGlzLm9sZENhY2hlLmhhcyhrZXkpKSB7CiAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLm9sZENhY2hlLmdldChrZXkpOwogICAgICAgIHRoaXMub2xkQ2FjaGUuZGVsZXRlKGtleSk7CiAgICAgICAgdGhpcy5fc2V0KGtleSwgdmFsdWUpOwogICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgfQogICAgfQogICAgc2V0KGtleSwgdmFsdWUpIHsKICAgICAgaWYgKHRoaXMuY2FjaGUuaGFzKGtleSkpIHsKICAgICAgICB0aGlzLmNhY2hlLnNldChrZXksIHZhbHVlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLl9zZXQoa2V5LCB2YWx1ZSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICBoYXMoa2V5KSB7CiAgICAgIHJldHVybiB0aGlzLmNhY2hlLmhhcyhrZXkpIHx8IHRoaXMub2xkQ2FjaGUuaGFzKGtleSk7CiAgICB9CiAgICBwZWVrKGtleSkgewogICAgICBpZiAodGhpcy5jYWNoZS5oYXMoa2V5KSkgewogICAgICAgIHJldHVybiB0aGlzLmNhY2hlLmdldChrZXkpOwogICAgICB9CiAgICAgIGlmICh0aGlzLm9sZENhY2hlLmhhcyhrZXkpKSB7CiAgICAgICAgcmV0dXJuIHRoaXMub2xkQ2FjaGUuZ2V0KGtleSk7CiAgICAgIH0KICAgIH0KICAgIGRlbGV0ZShrZXkpIHsKICAgICAgY29uc3QgZGVsZXRlZCA9IHRoaXMuY2FjaGUuZGVsZXRlKGtleSk7CiAgICAgIGlmIChkZWxldGVkKSB7CiAgICAgICAgdGhpcy5fc2l6ZS0tOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLm9sZENhY2hlLmRlbGV0ZShrZXkpIHx8IGRlbGV0ZWQ7CiAgICB9CiAgICBjbGVhcigpIHsKICAgICAgdGhpcy5jYWNoZS5jbGVhcigpOwogICAgICB0aGlzLm9sZENhY2hlLmNsZWFyKCk7CiAgICAgIHRoaXMuX3NpemUgPSAwOwogICAgfQogICAgKmtleXMoKSB7CiAgICAgIGZvciAoY29uc3QgW2tleV0gb2YgdGhpcykgewogICAgICAgIHlpZWxkIGtleTsKICAgICAgfQogICAgfQogICAgKnZhbHVlcygpIHsKICAgICAgZm9yIChjb25zdCBbLCB2YWx1ZV0gb2YgdGhpcykgewogICAgICAgIHlpZWxkIHZhbHVlOwogICAgICB9CiAgICB9CiAgICAqW1N5bWJvbC5pdGVyYXRvcl0oKSB7CiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLmNhY2hlKSB7CiAgICAgICAgeWllbGQgaXRlbTsKICAgICAgfQogICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdGhpcy5vbGRDYWNoZSkgewogICAgICAgIGNvbnN0IFtrZXldID0gaXRlbTsKICAgICAgICBpZiAoIXRoaXMuY2FjaGUuaGFzKGtleSkpIHsKICAgICAgICAgIHlpZWxkIGl0ZW07CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBnZXQgc2l6ZSgpIHsKICAgICAgbGV0IG9sZENhY2hlU2l6ZSA9IDA7CiAgICAgIGZvciAoY29uc3Qga2V5IG9mIHRoaXMub2xkQ2FjaGUua2V5cygpKSB7CiAgICAgICAgaWYgKCF0aGlzLmNhY2hlLmhhcyhrZXkpKSB7CiAgICAgICAgICBvbGRDYWNoZVNpemUrKzsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuX3NpemUgKyBvbGRDYWNoZVNpemU7CiAgICB9CiAgfQogIHZhciBxdWlja0xydSA9IFF1aWNrTFJVOwogIHZhciBkaXN0JDEgPSB7fTsKICB2YXIgaW50ZXJvcFJlcXVpcmVEZWZhdWx0ID0geyBleHBvcnRzOiB7fSB9OwogIChmdW5jdGlvbihtb2R1bGUyKSB7CiAgICBmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0MihvYmopIHsKICAgICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsKICAgICAgICAiZGVmYXVsdCI6IG9iagogICAgICB9OwogICAgfQogICAgbW9kdWxlMi5leHBvcnRzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdDI7CiAgICBtb2R1bGUyLmV4cG9ydHNbImRlZmF1bHQiXSA9IG1vZHVsZTIuZXhwb3J0cywgbW9kdWxlMi5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwogIH0pKGludGVyb3BSZXF1aXJlRGVmYXVsdCk7CiAgdmFyIF9fdml0ZUJyb3dzZXJFeHRlcm5hbCA9IG5ldyBQcm94eSh7fSwgewogICAgZ2V0KCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ01vZHVsZSAiIiBoYXMgYmVlbiBleHRlcm5hbGl6ZWQgZm9yIGJyb3dzZXIgY29tcGF0aWJpbGl0eSBhbmQgY2Fubm90IGJlIGFjY2Vzc2VkIGluIGNsaWVudCBjb2RlLicpOwogICAgfQogIH0pOwogIHZhciBfX3ZpdGVCcm93c2VyRXh0ZXJuYWwkMSA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuZnJlZXplKHsKICAgIF9fcHJvdG9fXzogbnVsbCwKICAgICJkZWZhdWx0IjogX192aXRlQnJvd3NlckV4dGVybmFsCiAgfSk7CiAgdmFyIHJlcXVpcmUkJDUgPSAvKiBAX19QVVJFX18gKi8gZ2V0QXVnbWVudGVkTmFtZXNwYWNlKF9fdml0ZUJyb3dzZXJFeHRlcm5hbCQxKTsKICB2YXIgcmVtb3RlRmlsZSA9IHt9OwogIHZhciBydW50aW1lID0geyBleHBvcnRzOiB7fSB9OwogIChmdW5jdGlvbihtb2R1bGUyKSB7CiAgICB2YXIgcnVudGltZTIgPSBmdW5jdGlvbihleHBvcnRzMikgewogICAgICB2YXIgT3AgPSBPYmplY3QucHJvdG90eXBlOwogICAgICB2YXIgaGFzT3duID0gT3AuaGFzT3duUHJvcGVydHk7CiAgICAgIHZhciB1bmRlZmluZWQkMTsKICAgICAgdmFyICRTeW1ib2wgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iID8gU3ltYm9sIDoge307CiAgICAgIHZhciBpdGVyYXRvclN5bWJvbCA9ICRTeW1ib2wuaXRlcmF0b3IgfHwgIkBAaXRlcmF0b3IiOwogICAgICB2YXIgYXN5bmNJdGVyYXRvclN5bWJvbCA9ICRTeW1ib2wuYXN5bmNJdGVyYXRvciB8fCAiQEBhc3luY0l0ZXJhdG9yIjsKICAgICAgdmFyIHRvU3RyaW5nVGFnU3ltYm9sID0gJFN5bWJvbC50b1N0cmluZ1RhZyB8fCAiQEB0b1N0cmluZ1RhZyI7CiAgICAgIGZ1bmN0aW9uIGRlZmluZShvYmosIGtleSwgdmFsdWUpIHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsKICAgICAgICAgIHZhbHVlLAogICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIG9ialtrZXldOwogICAgICB9CiAgICAgIHRyeSB7CiAgICAgICAgZGVmaW5lKHt9LCAiIik7CiAgICAgIH0gY2F0Y2ggKGVycjIpIHsKICAgICAgICBkZWZpbmUgPSBmdW5jdGlvbihvYmosIGtleSwgdmFsdWUpIHsKICAgICAgICAgIHJldHVybiBvYmpba2V5XSA9IHZhbHVlOwogICAgICAgIH07CiAgICAgIH0KICAgICAgZnVuY3Rpb24gd3JhcChpbm5lckZuLCBvdXRlckZuLCBzZWxmMiwgdHJ5TG9jc0xpc3QpIHsKICAgICAgICB2YXIgcHJvdG9HZW5lcmF0b3IgPSBvdXRlckZuICYmIG91dGVyRm4ucHJvdG90eXBlIGluc3RhbmNlb2YgR2VuZXJhdG9yID8gb3V0ZXJGbiA6IEdlbmVyYXRvcjsKICAgICAgICB2YXIgZ2VuZXJhdG9yID0gT2JqZWN0LmNyZWF0ZShwcm90b0dlbmVyYXRvci5wcm90b3R5cGUpOwogICAgICAgIHZhciBjb250ZXh0ID0gbmV3IENvbnRleHQodHJ5TG9jc0xpc3QgfHwgW10pOwogICAgICAgIGdlbmVyYXRvci5faW52b2tlID0gbWFrZUludm9rZU1ldGhvZChpbm5lckZuLCBzZWxmMiwgY29udGV4dCk7CiAgICAgICAgcmV0dXJuIGdlbmVyYXRvcjsKICAgICAgfQogICAgICBleHBvcnRzMi53cmFwID0gd3JhcDsKICAgICAgZnVuY3Rpb24gdHJ5Q2F0Y2goZm4sIG9iaiwgYXJnKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHJldHVybiB7IHR5cGU6ICJub3JtYWwiLCBhcmc6IGZuLmNhbGwob2JqLCBhcmcpIH07CiAgICAgICAgfSBjYXRjaCAoZXJyMikgewogICAgICAgICAgcmV0dXJuIHsgdHlwZTogInRocm93IiwgYXJnOiBlcnIyIH07CiAgICAgICAgfQogICAgICB9CiAgICAgIHZhciBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0ID0gInN1c3BlbmRlZFN0YXJ0IjsKICAgICAgdmFyIEdlblN0YXRlU3VzcGVuZGVkWWllbGQgPSAic3VzcGVuZGVkWWllbGQiOwogICAgICB2YXIgR2VuU3RhdGVFeGVjdXRpbmcgPSAiZXhlY3V0aW5nIjsKICAgICAgdmFyIEdlblN0YXRlQ29tcGxldGVkID0gImNvbXBsZXRlZCI7CiAgICAgIHZhciBDb250aW51ZVNlbnRpbmVsID0ge307CiAgICAgIGZ1bmN0aW9uIEdlbmVyYXRvcigpIHsKICAgICAgfQogICAgICBmdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvbigpIHsKICAgICAgfQogICAgICBmdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSgpIHsKICAgICAgfQogICAgICB2YXIgSXRlcmF0b3JQcm90b3R5cGUgPSB7fTsKICAgICAgZGVmaW5lKEl0ZXJhdG9yUHJvdG90eXBlLCBpdGVyYXRvclN5bWJvbCwgZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0pOwogICAgICB2YXIgZ2V0UHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Y7CiAgICAgIHZhciBOYXRpdmVJdGVyYXRvclByb3RvdHlwZSA9IGdldFByb3RvICYmIGdldFByb3RvKGdldFByb3RvKHZhbHVlczIoW10pKSk7CiAgICAgIGlmIChOYXRpdmVJdGVyYXRvclByb3RvdHlwZSAmJiBOYXRpdmVJdGVyYXRvclByb3RvdHlwZSAhPT0gT3AgJiYgaGFzT3duLmNhbGwoTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUsIGl0ZXJhdG9yU3ltYm9sKSkgewogICAgICAgIEl0ZXJhdG9yUHJvdG90eXBlID0gTmF0aXZlSXRlcmF0b3JQcm90b3R5cGU7CiAgICAgIH0KICAgICAgdmFyIEdwID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUucHJvdG90eXBlID0gR2VuZXJhdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoSXRlcmF0b3JQcm90b3R5cGUpOwogICAgICBHZW5lcmF0b3JGdW5jdGlvbi5wcm90b3R5cGUgPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZTsKICAgICAgZGVmaW5lKEdwLCAiY29uc3RydWN0b3IiLCBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSk7CiAgICAgIGRlZmluZShHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSwgImNvbnN0cnVjdG9yIiwgR2VuZXJhdG9yRnVuY3Rpb24pOwogICAgICBHZW5lcmF0b3JGdW5jdGlvbi5kaXNwbGF5TmFtZSA9IGRlZmluZShHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSwgdG9TdHJpbmdUYWdTeW1ib2wsICJHZW5lcmF0b3JGdW5jdGlvbiIpOwogICAgICBmdW5jdGlvbiBkZWZpbmVJdGVyYXRvck1ldGhvZHMocHJvdG90eXBlKSB7CiAgICAgICAgWyJuZXh0IiwgInRocm93IiwgInJldHVybiJdLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKSB7CiAgICAgICAgICBkZWZpbmUocHJvdG90eXBlLCBtZXRob2QsIGZ1bmN0aW9uKGFyZykgewogICAgICAgICAgICByZXR1cm4gdGhpcy5faW52b2tlKG1ldGhvZCwgYXJnKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIGV4cG9ydHMyLmlzR2VuZXJhdG9yRnVuY3Rpb24gPSBmdW5jdGlvbihnZW5GdW4pIHsKICAgICAgICB2YXIgY3RvciA9IHR5cGVvZiBnZW5GdW4gPT09ICJmdW5jdGlvbiIgJiYgZ2VuRnVuLmNvbnN0cnVjdG9yOwogICAgICAgIHJldHVybiBjdG9yID8gY3RvciA9PT0gR2VuZXJhdG9yRnVuY3Rpb24gfHwgKGN0b3IuZGlzcGxheU5hbWUgfHwgY3Rvci5uYW1lKSA9PT0gIkdlbmVyYXRvckZ1bmN0aW9uIiA6IGZhbHNlOwogICAgICB9OwogICAgICBleHBvcnRzMi5tYXJrID0gZnVuY3Rpb24oZ2VuRnVuKSB7CiAgICAgICAgaWYgKE9iamVjdC5zZXRQcm90b3R5cGVPZikgewogICAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKGdlbkZ1biwgR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBnZW5GdW4uX19wcm90b19fID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGU7CiAgICAgICAgICBkZWZpbmUoZ2VuRnVuLCB0b1N0cmluZ1RhZ1N5bWJvbCwgIkdlbmVyYXRvckZ1bmN0aW9uIik7CiAgICAgICAgfQogICAgICAgIGdlbkZ1bi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEdwKTsKICAgICAgICByZXR1cm4gZ2VuRnVuOwogICAgICB9OwogICAgICBleHBvcnRzMi5hd3JhcCA9IGZ1bmN0aW9uKGFyZykgewogICAgICAgIHJldHVybiB7IF9fYXdhaXQ6IGFyZyB9OwogICAgICB9OwogICAgICBmdW5jdGlvbiBBc3luY0l0ZXJhdG9yKGdlbmVyYXRvciwgUHJvbWlzZUltcGwpIHsKICAgICAgICBmdW5jdGlvbiBpbnZva2UobWV0aG9kLCBhcmcsIHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKGdlbmVyYXRvclttZXRob2RdLCBnZW5lcmF0b3IsIGFyZyk7CiAgICAgICAgICBpZiAocmVjb3JkLnR5cGUgPT09ICJ0aHJvdyIpIHsKICAgICAgICAgICAgcmVqZWN0KHJlY29yZC5hcmcpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHJlY29yZC5hcmc7CiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHJlc3VsdC52YWx1ZTsKICAgICAgICAgICAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gIm9iamVjdCIgJiYgaGFzT3duLmNhbGwodmFsdWUsICJfX2F3YWl0IikpIHsKICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZUltcGwucmVzb2x2ZSh2YWx1ZS5fX2F3YWl0KS50aGVuKGZ1bmN0aW9uKHZhbHVlMikgewogICAgICAgICAgICAgICAgaW52b2tlKCJuZXh0IiwgdmFsdWUyLCByZXNvbHZlLCByZWplY3QpOwogICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycjIpIHsKICAgICAgICAgICAgICAgIGludm9rZSgidGhyb3ciLCBlcnIyLCByZXNvbHZlLCByZWplY3QpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBQcm9taXNlSW1wbC5yZXNvbHZlKHZhbHVlKS50aGVuKGZ1bmN0aW9uKHVud3JhcHBlZCkgewogICAgICAgICAgICAgIHJlc3VsdC52YWx1ZSA9IHVud3JhcHBlZDsKICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7CiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGludm9rZSgidGhyb3ciLCBlcnJvciwgcmVzb2x2ZSwgcmVqZWN0KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHZhciBwcmV2aW91c1Byb21pc2U7CiAgICAgICAgZnVuY3Rpb24gZW5xdWV1ZShtZXRob2QsIGFyZykgewogICAgICAgICAgZnVuY3Rpb24gY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcoKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZUltcGwoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICAgICAgaW52b2tlKG1ldGhvZCwgYXJnLCByZXNvbHZlLCByZWplY3QpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBwcmV2aW91c1Byb21pc2UgPSBwcmV2aW91c1Byb21pc2UgPyBwcmV2aW91c1Byb21pc2UudGhlbihjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZywgY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcpIDogY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcoKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5faW52b2tlID0gZW5xdWV1ZTsKICAgICAgfQogICAgICBkZWZpbmVJdGVyYXRvck1ldGhvZHMoQXN5bmNJdGVyYXRvci5wcm90b3R5cGUpOwogICAgICBkZWZpbmUoQXN5bmNJdGVyYXRvci5wcm90b3R5cGUsIGFzeW5jSXRlcmF0b3JTeW1ib2wsIGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9KTsKICAgICAgZXhwb3J0czIuQXN5bmNJdGVyYXRvciA9IEFzeW5jSXRlcmF0b3I7CiAgICAgIGV4cG9ydHMyLmFzeW5jID0gZnVuY3Rpb24oaW5uZXJGbiwgb3V0ZXJGbiwgc2VsZjIsIHRyeUxvY3NMaXN0LCBQcm9taXNlSW1wbCkgewogICAgICAgIGlmIChQcm9taXNlSW1wbCA9PT0gdm9pZCAwKQogICAgICAgICAgUHJvbWlzZUltcGwgPSBQcm9taXNlOwogICAgICAgIHZhciBpdGVyID0gbmV3IEFzeW5jSXRlcmF0b3Iod3JhcChpbm5lckZuLCBvdXRlckZuLCBzZWxmMiwgdHJ5TG9jc0xpc3QpLCBQcm9taXNlSW1wbCk7CiAgICAgICAgcmV0dXJuIGV4cG9ydHMyLmlzR2VuZXJhdG9yRnVuY3Rpb24ob3V0ZXJGbikgPyBpdGVyIDogaXRlci5uZXh0KCkudGhlbihmdW5jdGlvbihyZXN1bHQpIHsKICAgICAgICAgIHJldHVybiByZXN1bHQuZG9uZSA/IHJlc3VsdC52YWx1ZSA6IGl0ZXIubmV4dCgpOwogICAgICAgIH0pOwogICAgICB9OwogICAgICBmdW5jdGlvbiBtYWtlSW52b2tlTWV0aG9kKGlubmVyRm4sIHNlbGYyLCBjb250ZXh0KSB7CiAgICAgICAgdmFyIHN0YXRlID0gR2VuU3RhdGVTdXNwZW5kZWRTdGFydDsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gaW52b2tlKG1ldGhvZCwgYXJnKSB7CiAgICAgICAgICBpZiAoc3RhdGUgPT09IEdlblN0YXRlRXhlY3V0aW5nKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiR2VuZXJhdG9yIGlzIGFscmVhZHkgcnVubmluZyIpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZUNvbXBsZXRlZCkgewogICAgICAgICAgICBpZiAobWV0aG9kID09PSAidGhyb3ciKSB7CiAgICAgICAgICAgICAgdGhyb3cgYXJnOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBkb25lUmVzdWx0KCk7CiAgICAgICAgICB9CiAgICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IG1ldGhvZDsKICAgICAgICAgIGNvbnRleHQuYXJnID0gYXJnOwogICAgICAgICAgd2hpbGUgKHRydWUpIHsKICAgICAgICAgICAgdmFyIGRlbGVnYXRlID0gY29udGV4dC5kZWxlZ2F0ZTsKICAgICAgICAgICAgaWYgKGRlbGVnYXRlKSB7CiAgICAgICAgICAgICAgdmFyIGRlbGVnYXRlUmVzdWx0ID0gbWF5YmVJbnZva2VEZWxlZ2F0ZShkZWxlZ2F0ZSwgY29udGV4dCk7CiAgICAgICAgICAgICAgaWYgKGRlbGVnYXRlUmVzdWx0KSB7CiAgICAgICAgICAgICAgICBpZiAoZGVsZWdhdGVSZXN1bHQgPT09IENvbnRpbnVlU2VudGluZWwpCiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgcmV0dXJuIGRlbGVnYXRlUmVzdWx0OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoY29udGV4dC5tZXRob2QgPT09ICJuZXh0IikgewogICAgICAgICAgICAgIGNvbnRleHQuc2VudCA9IGNvbnRleHQuX3NlbnQgPSBjb250ZXh0LmFyZzsKICAgICAgICAgICAgfSBlbHNlIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gInRocm93IikgewogICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gR2VuU3RhdGVTdXNwZW5kZWRTdGFydCkgewogICAgICAgICAgICAgICAgc3RhdGUgPSBHZW5TdGF0ZUNvbXBsZXRlZDsKICAgICAgICAgICAgICAgIHRocm93IGNvbnRleHQuYXJnOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBjb250ZXh0LmRpc3BhdGNoRXhjZXB0aW9uKGNvbnRleHQuYXJnKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gInJldHVybiIpIHsKICAgICAgICAgICAgICBjb250ZXh0LmFicnVwdCgicmV0dXJuIiwgY29udGV4dC5hcmcpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHN0YXRlID0gR2VuU3RhdGVFeGVjdXRpbmc7CiAgICAgICAgICAgIHZhciByZWNvcmQgPSB0cnlDYXRjaChpbm5lckZuLCBzZWxmMiwgY29udGV4dCk7CiAgICAgICAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gIm5vcm1hbCIpIHsKICAgICAgICAgICAgICBzdGF0ZSA9IGNvbnRleHQuZG9uZSA/IEdlblN0YXRlQ29tcGxldGVkIDogR2VuU3RhdGVTdXNwZW5kZWRZaWVsZDsKICAgICAgICAgICAgICBpZiAocmVjb3JkLmFyZyA9PT0gQ29udGludWVTZW50aW5lbCkgewogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICB2YWx1ZTogcmVjb3JkLmFyZywKICAgICAgICAgICAgICAgIGRvbmU6IGNvbnRleHQuZG9uZQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVjb3JkLnR5cGUgPT09ICJ0aHJvdyIpIHsKICAgICAgICAgICAgICBzdGF0ZSA9IEdlblN0YXRlQ29tcGxldGVkOwogICAgICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gInRocm93IjsKICAgICAgICAgICAgICBjb250ZXh0LmFyZyA9IHJlY29yZC5hcmc7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9CiAgICAgIGZ1bmN0aW9uIG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpIHsKICAgICAgICB2YXIgbWV0aG9kID0gZGVsZWdhdGUuaXRlcmF0b3JbY29udGV4dC5tZXRob2RdOwogICAgICAgIGlmIChtZXRob2QgPT09IHVuZGVmaW5lZCQxKSB7CiAgICAgICAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDsKICAgICAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gInRocm93IikgewogICAgICAgICAgICBpZiAoZGVsZWdhdGUuaXRlcmF0b3JbInJldHVybiJdKSB7CiAgICAgICAgICAgICAgY29udGV4dC5tZXRob2QgPSAicmV0dXJuIjsKICAgICAgICAgICAgICBjb250ZXh0LmFyZyA9IHVuZGVmaW5lZCQxOwogICAgICAgICAgICAgIG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpOwogICAgICAgICAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gInRocm93IikgewogICAgICAgICAgICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gInRocm93IjsKICAgICAgICAgICAgY29udGV4dC5hcmcgPSBuZXcgVHlwZUVycm9yKCJUaGUgaXRlcmF0b3IgZG9lcyBub3QgcHJvdmlkZSBhICd0aHJvdycgbWV0aG9kIik7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDsKICAgICAgICB9CiAgICAgICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKG1ldGhvZCwgZGVsZWdhdGUuaXRlcmF0b3IsIGNvbnRleHQuYXJnKTsKICAgICAgICBpZiAocmVjb3JkLnR5cGUgPT09ICJ0aHJvdyIpIHsKICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gInRocm93IjsKICAgICAgICAgIGNvbnRleHQuYXJnID0gcmVjb3JkLmFyZzsKICAgICAgICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsOwogICAgICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7CiAgICAgICAgfQogICAgICAgIHZhciBpbmZvID0gcmVjb3JkLmFyZzsKICAgICAgICBpZiAoIWluZm8pIHsKICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gInRocm93IjsKICAgICAgICAgIGNvbnRleHQuYXJnID0gbmV3IFR5cGVFcnJvcigiaXRlcmF0b3IgcmVzdWx0IGlzIG5vdCBhbiBvYmplY3QiKTsKICAgICAgICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsOwogICAgICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7CiAgICAgICAgfQogICAgICAgIGlmIChpbmZvLmRvbmUpIHsKICAgICAgICAgIGNvbnRleHRbZGVsZWdhdGUucmVzdWx0TmFtZV0gPSBpbmZvLnZhbHVlOwogICAgICAgICAgY29udGV4dC5uZXh0ID0gZGVsZWdhdGUubmV4dExvYzsKICAgICAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCAhPT0gInJldHVybiIpIHsKICAgICAgICAgICAgY29udGV4dC5tZXRob2QgPSAibmV4dCI7CiAgICAgICAgICAgIGNvbnRleHQuYXJnID0gdW5kZWZpbmVkJDE7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBpbmZvOwogICAgICAgIH0KICAgICAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDsKICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDsKICAgICAgfQogICAgICBkZWZpbmVJdGVyYXRvck1ldGhvZHMoR3ApOwogICAgICBkZWZpbmUoR3AsIHRvU3RyaW5nVGFnU3ltYm9sLCAiR2VuZXJhdG9yIik7CiAgICAgIGRlZmluZShHcCwgaXRlcmF0b3JTeW1ib2wsIGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9KTsKICAgICAgZGVmaW5lKEdwLCAidG9TdHJpbmciLCBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gIltvYmplY3QgR2VuZXJhdG9yXSI7CiAgICAgIH0pOwogICAgICBmdW5jdGlvbiBwdXNoVHJ5RW50cnkobG9jcykgewogICAgICAgIHZhciBlbnRyeSA9IHsgdHJ5TG9jOiBsb2NzWzBdIH07CiAgICAgICAgaWYgKDEgaW4gbG9jcykgewogICAgICAgICAgZW50cnkuY2F0Y2hMb2MgPSBsb2NzWzFdOwogICAgICAgIH0KICAgICAgICBpZiAoMiBpbiBsb2NzKSB7CiAgICAgICAgICBlbnRyeS5maW5hbGx5TG9jID0gbG9jc1syXTsKICAgICAgICAgIGVudHJ5LmFmdGVyTG9jID0gbG9jc1szXTsKICAgICAgICB9CiAgICAgICAgdGhpcy50cnlFbnRyaWVzLnB1c2goZW50cnkpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHJlc2V0VHJ5RW50cnkoZW50cnkpIHsKICAgICAgICB2YXIgcmVjb3JkID0gZW50cnkuY29tcGxldGlvbiB8fCB7fTsKICAgICAgICByZWNvcmQudHlwZSA9ICJub3JtYWwiOwogICAgICAgIGRlbGV0ZSByZWNvcmQuYXJnOwogICAgICAgIGVudHJ5LmNvbXBsZXRpb24gPSByZWNvcmQ7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gQ29udGV4dCh0cnlMb2NzTGlzdCkgewogICAgICAgIHRoaXMudHJ5RW50cmllcyA9IFt7IHRyeUxvYzogInJvb3QiIH1dOwogICAgICAgIHRyeUxvY3NMaXN0LmZvckVhY2gocHVzaFRyeUVudHJ5LCB0aGlzKTsKICAgICAgICB0aGlzLnJlc2V0KHRydWUpOwogICAgICB9CiAgICAgIGV4cG9ydHMyLmtleXMgPSBmdW5jdGlvbihvYmplY3QpIHsKICAgICAgICB2YXIga2V5czIgPSBbXTsKICAgICAgICBmb3IgKHZhciBrZXkgaW4gb2JqZWN0KSB7CiAgICAgICAgICBrZXlzMi5wdXNoKGtleSk7CiAgICAgICAgfQogICAgICAgIGtleXMyLnJldmVyc2UoKTsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gbmV4dCgpIHsKICAgICAgICAgIHdoaWxlIChrZXlzMi5sZW5ndGgpIHsKICAgICAgICAgICAgdmFyIGtleTIgPSBrZXlzMi5wb3AoKTsKICAgICAgICAgICAgaWYgKGtleTIgaW4gb2JqZWN0KSB7CiAgICAgICAgICAgICAgbmV4dC52YWx1ZSA9IGtleTI7CiAgICAgICAgICAgICAgbmV4dC5kb25lID0gZmFsc2U7CiAgICAgICAgICAgICAgcmV0dXJuIG5leHQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIG5leHQuZG9uZSA9IHRydWU7CiAgICAgICAgICByZXR1cm4gbmV4dDsKICAgICAgICB9OwogICAgICB9OwogICAgICBmdW5jdGlvbiB2YWx1ZXMyKGl0ZXJhYmxlKSB7CiAgICAgICAgaWYgKGl0ZXJhYmxlKSB7CiAgICAgICAgICB2YXIgaXRlcmF0b3JNZXRob2QgPSBpdGVyYWJsZVtpdGVyYXRvclN5bWJvbF07CiAgICAgICAgICBpZiAoaXRlcmF0b3JNZXRob2QpIHsKICAgICAgICAgICAgcmV0dXJuIGl0ZXJhdG9yTWV0aG9kLmNhbGwoaXRlcmFibGUpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHR5cGVvZiBpdGVyYWJsZS5uZXh0ID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICAgIHJldHVybiBpdGVyYWJsZTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICghaXNOYU4oaXRlcmFibGUubGVuZ3RoKSkgewogICAgICAgICAgICB2YXIgaSA9IC0xLCBuZXh0ID0gZnVuY3Rpb24gbmV4dDIoKSB7CiAgICAgICAgICAgICAgd2hpbGUgKCsraSA8IGl0ZXJhYmxlLmxlbmd0aCkgewogICAgICAgICAgICAgICAgaWYgKGhhc093bi5jYWxsKGl0ZXJhYmxlLCBpKSkgewogICAgICAgICAgICAgICAgICBuZXh0Mi52YWx1ZSA9IGl0ZXJhYmxlW2ldOwogICAgICAgICAgICAgICAgICBuZXh0Mi5kb25lID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgIHJldHVybiBuZXh0MjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgbmV4dDIudmFsdWUgPSB1bmRlZmluZWQkMTsKICAgICAgICAgICAgICBuZXh0Mi5kb25lID0gdHJ1ZTsKICAgICAgICAgICAgICByZXR1cm4gbmV4dDI7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHJldHVybiBuZXh0Lm5leHQgPSBuZXh0OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4geyBuZXh0OiBkb25lUmVzdWx0IH07CiAgICAgIH0KICAgICAgZXhwb3J0czIudmFsdWVzID0gdmFsdWVzMjsKICAgICAgZnVuY3Rpb24gZG9uZVJlc3VsdCgpIHsKICAgICAgICByZXR1cm4geyB2YWx1ZTogdW5kZWZpbmVkJDEsIGRvbmU6IHRydWUgfTsKICAgICAgfQogICAgICBDb250ZXh0LnByb3RvdHlwZSA9IHsKICAgICAgICBjb25zdHJ1Y3RvcjogQ29udGV4dCwKICAgICAgICByZXNldDogZnVuY3Rpb24oc2tpcFRlbXBSZXNldCkgewogICAgICAgICAgdGhpcy5wcmV2ID0gMDsKICAgICAgICAgIHRoaXMubmV4dCA9IDA7CiAgICAgICAgICB0aGlzLnNlbnQgPSB0aGlzLl9zZW50ID0gdW5kZWZpbmVkJDE7CiAgICAgICAgICB0aGlzLmRvbmUgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuZGVsZWdhdGUgPSBudWxsOwogICAgICAgICAgdGhpcy5tZXRob2QgPSAibmV4dCI7CiAgICAgICAgICB0aGlzLmFyZyA9IHVuZGVmaW5lZCQxOwogICAgICAgICAgdGhpcy50cnlFbnRyaWVzLmZvckVhY2gocmVzZXRUcnlFbnRyeSk7CiAgICAgICAgICBpZiAoIXNraXBUZW1wUmVzZXQpIHsKICAgICAgICAgICAgZm9yICh2YXIgbmFtZSBpbiB0aGlzKSB7CiAgICAgICAgICAgICAgaWYgKG5hbWUuY2hhckF0KDApID09PSAidCIgJiYgaGFzT3duLmNhbGwodGhpcywgbmFtZSkgJiYgIWlzTmFOKCtuYW1lLnNsaWNlKDEpKSkgewogICAgICAgICAgICAgICAgdGhpc1tuYW1lXSA9IHVuZGVmaW5lZCQxOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgc3RvcDogZnVuY3Rpb24oKSB7CiAgICAgICAgICB0aGlzLmRvbmUgPSB0cnVlOwogICAgICAgICAgdmFyIHJvb3RFbnRyeSA9IHRoaXMudHJ5RW50cmllc1swXTsKICAgICAgICAgIHZhciByb290UmVjb3JkID0gcm9vdEVudHJ5LmNvbXBsZXRpb247CiAgICAgICAgICBpZiAocm9vdFJlY29yZC50eXBlID09PSAidGhyb3ciKSB7CiAgICAgICAgICAgIHRocm93IHJvb3RSZWNvcmQuYXJnOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHRoaXMucnZhbDsKICAgICAgICB9LAogICAgICAgIGRpc3BhdGNoRXhjZXB0aW9uOiBmdW5jdGlvbihleGNlcHRpb24pIHsKICAgICAgICAgIGlmICh0aGlzLmRvbmUpIHsKICAgICAgICAgICAgdGhyb3cgZXhjZXB0aW9uOwogICAgICAgICAgfQogICAgICAgICAgdmFyIGNvbnRleHQgPSB0aGlzOwogICAgICAgICAgZnVuY3Rpb24gaGFuZGxlKGxvYywgY2F1Z2h0KSB7CiAgICAgICAgICAgIHJlY29yZC50eXBlID0gInRocm93IjsKICAgICAgICAgICAgcmVjb3JkLmFyZyA9IGV4Y2VwdGlvbjsKICAgICAgICAgICAgY29udGV4dC5uZXh0ID0gbG9jOwogICAgICAgICAgICBpZiAoY2F1Z2h0KSB7CiAgICAgICAgICAgICAgY29udGV4dC5tZXRob2QgPSAibmV4dCI7CiAgICAgICAgICAgICAgY29udGV4dC5hcmcgPSB1bmRlZmluZWQkMTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gISFjYXVnaHQ7CiAgICAgICAgICB9CiAgICAgICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7CiAgICAgICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTsKICAgICAgICAgICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb247CiAgICAgICAgICAgIGlmIChlbnRyeS50cnlMb2MgPT09ICJyb290IikgewogICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoImVuZCIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChlbnRyeS50cnlMb2MgPD0gdGhpcy5wcmV2KSB7CiAgICAgICAgICAgICAgdmFyIGhhc0NhdGNoID0gaGFzT3duLmNhbGwoZW50cnksICJjYXRjaExvYyIpOwogICAgICAgICAgICAgIHZhciBoYXNGaW5hbGx5ID0gaGFzT3duLmNhbGwoZW50cnksICJmaW5hbGx5TG9jIik7CiAgICAgICAgICAgICAgaWYgKGhhc0NhdGNoICYmIGhhc0ZpbmFsbHkpIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBlbnRyeS5jYXRjaExvYykgewogICAgICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmNhdGNoTG9jLCB0cnVlKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykgewogICAgICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmZpbmFsbHlMb2MpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gZWxzZSBpZiAoaGFzQ2F0Y2gpIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBlbnRyeS5jYXRjaExvYykgewogICAgICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmNhdGNoTG9jLCB0cnVlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGVsc2UgaWYgKGhhc0ZpbmFsbHkpIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBlbnRyeS5maW5hbGx5TG9jKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuZmluYWxseUxvYyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigidHJ5IHN0YXRlbWVudCB3aXRob3V0IGNhdGNoIG9yIGZpbmFsbHkiKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGFicnVwdDogZnVuY3Rpb24odHlwZSwgYXJnKSB7CiAgICAgICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7CiAgICAgICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTsKICAgICAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA8PSB0aGlzLnByZXYgJiYgaGFzT3duLmNhbGwoZW50cnksICJmaW5hbGx5TG9jIikgJiYgdGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykgewogICAgICAgICAgICAgIHZhciBmaW5hbGx5RW50cnkgPSBlbnRyeTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgaWYgKGZpbmFsbHlFbnRyeSAmJiAodHlwZSA9PT0gImJyZWFrIiB8fCB0eXBlID09PSAiY29udGludWUiKSAmJiBmaW5hbGx5RW50cnkudHJ5TG9jIDw9IGFyZyAmJiBhcmcgPD0gZmluYWxseUVudHJ5LmZpbmFsbHlMb2MpIHsKICAgICAgICAgICAgZmluYWxseUVudHJ5ID0gbnVsbDsKICAgICAgICAgIH0KICAgICAgICAgIHZhciByZWNvcmQgPSBmaW5hbGx5RW50cnkgPyBmaW5hbGx5RW50cnkuY29tcGxldGlvbiA6IHt9OwogICAgICAgICAgcmVjb3JkLnR5cGUgPSB0eXBlOwogICAgICAgICAgcmVjb3JkLmFyZyA9IGFyZzsKICAgICAgICAgIGlmIChmaW5hbGx5RW50cnkpIHsKICAgICAgICAgICAgdGhpcy5tZXRob2QgPSAibmV4dCI7CiAgICAgICAgICAgIHRoaXMubmV4dCA9IGZpbmFsbHlFbnRyeS5maW5hbGx5TG9jOwogICAgICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBsZXRlKHJlY29yZCk7CiAgICAgICAgfSwKICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24ocmVjb3JkLCBhZnRlckxvYykgewogICAgICAgICAgaWYgKHJlY29yZC50eXBlID09PSAidGhyb3ciKSB7CiAgICAgICAgICAgIHRocm93IHJlY29yZC5hcmc7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAocmVjb3JkLnR5cGUgPT09ICJicmVhayIgfHwgcmVjb3JkLnR5cGUgPT09ICJjb250aW51ZSIpIHsKICAgICAgICAgICAgdGhpcy5uZXh0ID0gcmVjb3JkLmFyZzsKICAgICAgICAgIH0gZWxzZSBpZiAocmVjb3JkLnR5cGUgPT09ICJyZXR1cm4iKSB7CiAgICAgICAgICAgIHRoaXMucnZhbCA9IHRoaXMuYXJnID0gcmVjb3JkLmFyZzsKICAgICAgICAgICAgdGhpcy5tZXRob2QgPSAicmV0dXJuIjsKICAgICAgICAgICAgdGhpcy5uZXh0ID0gImVuZCI7CiAgICAgICAgICB9IGVsc2UgaWYgKHJlY29yZC50eXBlID09PSAibm9ybWFsIiAmJiBhZnRlckxvYykgewogICAgICAgICAgICB0aGlzLm5leHQgPSBhZnRlckxvYzsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsOwogICAgICAgIH0sCiAgICAgICAgZmluaXNoOiBmdW5jdGlvbihmaW5hbGx5TG9jKSB7CiAgICAgICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7CiAgICAgICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTsKICAgICAgICAgICAgaWYgKGVudHJ5LmZpbmFsbHlMb2MgPT09IGZpbmFsbHlMb2MpIHsKICAgICAgICAgICAgICB0aGlzLmNvbXBsZXRlKGVudHJ5LmNvbXBsZXRpb24sIGVudHJ5LmFmdGVyTG9jKTsKICAgICAgICAgICAgICByZXNldFRyeUVudHJ5KGVudHJ5KTsKICAgICAgICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgImNhdGNoIjogZnVuY3Rpb24odHJ5TG9jKSB7CiAgICAgICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7CiAgICAgICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTsKICAgICAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA9PT0gdHJ5TG9jKSB7CiAgICAgICAgICAgICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb247CiAgICAgICAgICAgICAgaWYgKHJlY29yZC50eXBlID09PSAidGhyb3ciKSB7CiAgICAgICAgICAgICAgICB2YXIgdGhyb3duID0gcmVjb3JkLmFyZzsKICAgICAgICAgICAgICAgIHJlc2V0VHJ5RW50cnkoZW50cnkpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gdGhyb3duOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoImlsbGVnYWwgY2F0Y2ggYXR0ZW1wdCIpOwogICAgICAgIH0sCiAgICAgICAgZGVsZWdhdGVZaWVsZDogZnVuY3Rpb24oaXRlcmFibGUsIHJlc3VsdE5hbWUsIG5leHRMb2MpIHsKICAgICAgICAgIHRoaXMuZGVsZWdhdGUgPSB7CiAgICAgICAgICAgIGl0ZXJhdG9yOiB2YWx1ZXMyKGl0ZXJhYmxlKSwKICAgICAgICAgICAgcmVzdWx0TmFtZSwKICAgICAgICAgICAgbmV4dExvYwogICAgICAgICAgfTsKICAgICAgICAgIGlmICh0aGlzLm1ldGhvZCA9PT0gIm5leHQiKSB7CiAgICAgICAgICAgIHRoaXMuYXJnID0gdW5kZWZpbmVkJDE7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDsKICAgICAgICB9CiAgICAgIH07CiAgICAgIHJldHVybiBleHBvcnRzMjsKICAgIH0obW9kdWxlMi5leHBvcnRzKTsKICAgIHRyeSB7CiAgICAgIHJlZ2VuZXJhdG9yUnVudGltZSA9IHJ1bnRpbWUyOwogICAgfSBjYXRjaCAoYWNjaWRlbnRhbFN0cmljdE1vZGUpIHsKICAgICAgaWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAib2JqZWN0IikgewogICAgICAgIGdsb2JhbFRoaXMucmVnZW5lcmF0b3JSdW50aW1lID0gcnVudGltZTI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgRnVuY3Rpb24oInIiLCAicmVnZW5lcmF0b3JSdW50aW1lID0gciIpKHJ1bnRpbWUyKTsKICAgICAgfQogICAgfQogIH0pKHJ1bnRpbWUpOwogIHZhciByZWdlbmVyYXRvciA9IHJ1bnRpbWUuZXhwb3J0czsKICB2YXIgYXN5bmNUb0dlbmVyYXRvciA9IHsgZXhwb3J0czoge30gfTsKICAoZnVuY3Rpb24obW9kdWxlMikgewogICAgZnVuY3Rpb24gYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBrZXksIGFyZykgewogICAgICB0cnkgewogICAgICAgIHZhciBpbmZvID0gZ2VuW2tleV0oYXJnKTsKICAgICAgICB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmIChpbmZvLmRvbmUpIHsKICAgICAgICByZXNvbHZlKHZhbHVlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oX25leHQsIF90aHJvdyk7CiAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7CiAgICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgICB2YXIgc2VsZjIgPSB0aGlzLCBhcmdzID0gYXJndW1lbnRzOwogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAgIHZhciBnZW4gPSBmbi5hcHBseShzZWxmMiwgYXJncyk7CiAgICAgICAgICBmdW5jdGlvbiBfbmV4dCh2YWx1ZSkgewogICAgICAgICAgICBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJuZXh0IiwgdmFsdWUpOwogICAgICAgICAgfQogICAgICAgICAgZnVuY3Rpb24gX3Rocm93KGVycjIpIHsKICAgICAgICAgICAgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAidGhyb3ciLCBlcnIyKTsKICAgICAgICAgIH0KICAgICAgICAgIF9uZXh0KHZvaWQgMCk7CiAgICAgICAgfSk7CiAgICAgIH07CiAgICB9CiAgICBtb2R1bGUyLmV4cG9ydHMgPSBfYXN5bmNUb0dlbmVyYXRvcjsKICAgIG1vZHVsZTIuZXhwb3J0c1siZGVmYXVsdCJdID0gbW9kdWxlMi5leHBvcnRzLCBtb2R1bGUyLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7CiAgfSkoYXN5bmNUb0dlbmVyYXRvcik7CiAgdmFyIGNsYXNzQ2FsbENoZWNrID0geyBleHBvcnRzOiB7fSB9OwogIChmdW5jdGlvbihtb2R1bGUyKSB7CiAgICBmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2szKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgewogICAgICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOwogICAgICB9CiAgICB9CiAgICBtb2R1bGUyLmV4cG9ydHMgPSBfY2xhc3NDYWxsQ2hlY2szOwogICAgbW9kdWxlMi5leHBvcnRzWyJkZWZhdWx0Il0gPSBtb2R1bGUyLmV4cG9ydHMsIG1vZHVsZTIuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKICB9KShjbGFzc0NhbGxDaGVjayk7CiAgdmFyIGNyZWF0ZUNsYXNzID0geyBleHBvcnRzOiB7fSB9OwogIChmdW5jdGlvbihtb2R1bGUyKSB7CiAgICBmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllczIodGFyZ2V0LCBwcm9wcykgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsKICAgICAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7CiAgICAgICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOwogICAgICAgIGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpCiAgICAgICAgICBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7CiAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIF9jcmVhdGVDbGFzczMoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7CiAgICAgIGlmIChwcm90b1Byb3BzKQogICAgICAgIF9kZWZpbmVQcm9wZXJ0aWVzMihDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOwogICAgICBpZiAoc3RhdGljUHJvcHMpCiAgICAgICAgX2RlZmluZVByb3BlcnRpZXMyKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7CiAgICAgIHJldHVybiBDb25zdHJ1Y3RvcjsKICAgIH0KICAgIG1vZHVsZTIuZXhwb3J0cyA9IF9jcmVhdGVDbGFzczM7CiAgICBtb2R1bGUyLmV4cG9ydHNbImRlZmF1bHQiXSA9IG1vZHVsZTIuZXhwb3J0cywgbW9kdWxlMi5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwogIH0pKGNyZWF0ZUNsYXNzKTsKICB2YXIgZGVmaW5lUHJvcGVydHkgPSB7IGV4cG9ydHM6IHt9IH07CiAgKGZ1bmN0aW9uKG1vZHVsZTIpIHsKICAgIGZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICAgICAgaWYgKGtleSBpbiBvYmopIHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsKICAgICAgICAgIHZhbHVlLAogICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgb2JqW2tleV0gPSB2YWx1ZTsKICAgICAgfQogICAgICByZXR1cm4gb2JqOwogICAgfQogICAgbW9kdWxlMi5leHBvcnRzID0gX2RlZmluZVByb3BlcnR5OwogICAgbW9kdWxlMi5leHBvcnRzWyJkZWZhdWx0Il0gPSBtb2R1bGUyLmV4cG9ydHMsIG1vZHVsZTIuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKICB9KShkZWZpbmVQcm9wZXJ0eSk7CiAgdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQkNSA9IGludGVyb3BSZXF1aXJlRGVmYXVsdC5leHBvcnRzOwogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyZW1vdGVGaWxlLCAiX19lc01vZHVsZSIsIHsKICAgIHZhbHVlOiB0cnVlCiAgfSk7CiAgcmVtb3RlRmlsZS5kZWZhdWx0ID0gdm9pZCAwOwogIHZhciBfcmVnZW5lcmF0b3IkNSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQkNShyZWdlbmVyYXRvcik7CiAgdmFyIF9hc3luY1RvR2VuZXJhdG9yMiQ1ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdCQ1KGFzeW5jVG9HZW5lcmF0b3IuZXhwb3J0cyk7CiAgdmFyIF9jbGFzc0NhbGxDaGVjazIkNCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQkNShjbGFzc0NhbGxDaGVjay5leHBvcnRzKTsKICB2YXIgX2NyZWF0ZUNsYXNzMiQ0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdCQ1KGNyZWF0ZUNsYXNzLmV4cG9ydHMpOwogIHZhciBfZGVmaW5lUHJvcGVydHkyJDEgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0JDUoZGVmaW5lUHJvcGVydHkuZXhwb3J0cyk7CiAgdmFyIF9maWxlVXJpVG9QYXRoID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdCQ1KHJlcXVpcmUkJDUpOwogIHZhciBfID0gZGlzdCQxOwogIGZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgewogICAgdmFyIGtleXMyID0gT2JqZWN0LmtleXMob2JqZWN0KTsKICAgIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICAgIHZhciBzeW1ib2xzMiA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsKICAgICAgaWYgKGVudW1lcmFibGVPbmx5KQogICAgICAgIHN5bWJvbHMyID0gc3ltYm9sczIuZmlsdGVyKGZ1bmN0aW9uKHN5bSkgewogICAgICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7CiAgICAgICAgfSk7CiAgICAgIGtleXMyLnB1c2guYXBwbHkoa2V5czIsIHN5bWJvbHMyKTsKICAgIH0KICAgIHJldHVybiBrZXlzMjsKICB9CiAgZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsKICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OwogICAgICBpZiAoaSAlIDIpIHsKICAgICAgICBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkgewogICAgICAgICAgKDAsIF9kZWZpbmVQcm9wZXJ0eTIkMS5kZWZhdWx0KSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkgewogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0YXJnZXQ7CiAgfQogIHZhciBteUdsb2JhbCA9IHR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiID8gd2luZG93IDogdHlwZW9mIHNlbGYgIT09ICJ1bmRlZmluZWQiID8gc2VsZiA6IHsKICAgIGZldGNoOiB2b2lkIDAKICB9OwogIHZhciBSZW1vdGVGaWxlJDEgPSAvKiBAX19QVVJFX18gKi8gZnVuY3Rpb24oKSB7CiAgICAoMCwgX2NyZWF0ZUNsYXNzMiQ0LmRlZmF1bHQpKFJlbW90ZUZpbGUyLCBbewogICAgICBrZXk6ICJnZXRCdWZmZXJGcm9tUmVzcG9uc2UiLAogICAgICB2YWx1ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIF9nZXRCdWZmZXJGcm9tUmVzcG9uc2UgPSAoMCwgX2FzeW5jVG9HZW5lcmF0b3IyJDUuZGVmYXVsdCkoLyogQF9fUFVSRV9fICovIF9yZWdlbmVyYXRvciQ1LmRlZmF1bHQubWFyayhmdW5jdGlvbiBfY2FsbGVlKHJlc3BvbnNlKSB7CiAgICAgICAgICB2YXIgcmVzcDsKICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3IkNS5kZWZhdWx0LndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIGlmICghKHR5cGVvZiByZXNwb25zZS5idWZmZXIgPT09ICJmdW5jdGlvbiIpKSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UuYnVmZmVyKCkpOwogICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICBpZiAoISh0eXBlb2YgcmVzcG9uc2UuYXJyYXlCdWZmZXIgPT09ICJmdW5jdGlvbiIpKSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDExOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuYXJyYXlCdWZmZXIoKTsKICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgcmVzcCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIEJ1ZmZlci5mcm9tKHJlc3ApKTsKICAgICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoImludmFsaWQgSFRUUCByZXNwb25zZSBvYmplY3QsIGhhcyBubyBidWZmZXIgbWV0aG9kLCBhbmQgbm8gYXJyYXlCdWZmZXIgbWV0aG9kIik7CiAgICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWUpOwogICAgICAgIH0pKTsKICAgICAgICBmdW5jdGlvbiBnZXRCdWZmZXJGcm9tUmVzcG9uc2UoX3gpIHsKICAgICAgICAgIHJldHVybiBfZ2V0QnVmZmVyRnJvbVJlc3BvbnNlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBnZXRCdWZmZXJGcm9tUmVzcG9uc2U7CiAgICAgIH0oKQogICAgfV0pOwogICAgZnVuY3Rpb24gUmVtb3RlRmlsZTIoc291cmNlKSB7CiAgICAgIHZhciBvcHRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB2b2lkIDAgPyBhcmd1bWVudHNbMV0gOiB7fTsKICAgICAgKDAsIF9jbGFzc0NhbGxDaGVjazIkNC5kZWZhdWx0KSh0aGlzLCBSZW1vdGVGaWxlMik7CiAgICAgICgwLCBfZGVmaW5lUHJvcGVydHkyJDEuZGVmYXVsdCkodGhpcywgInVybCIsIHZvaWQgMCk7CiAgICAgICgwLCBfZGVmaW5lUHJvcGVydHkyJDEuZGVmYXVsdCkodGhpcywgIl9zdGF0Iiwgdm9pZCAwKTsKICAgICAgKDAsIF9kZWZpbmVQcm9wZXJ0eTIkMS5kZWZhdWx0KSh0aGlzLCAiZmV0Y2hJbXBsZW1lbnRhdGlvbiIsIHZvaWQgMCk7CiAgICAgICgwLCBfZGVmaW5lUHJvcGVydHkyJDEuZGVmYXVsdCkodGhpcywgImJhc2VPdmVycmlkZXMiLCB7fSk7CiAgICAgIHRoaXMudXJsID0gc291cmNlOwogICAgICBpZiAoc291cmNlLnN0YXJ0c1dpdGgoImZpbGU6Ly8iKSkgewogICAgICAgIHZhciBwYXRoID0gKDAsIF9maWxlVXJpVG9QYXRoLmRlZmF1bHQpKHNvdXJjZSk7CiAgICAgICAgaWYgKCFwYXRoKSB7CiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJpbnZhbGlkIGZpbGUgdXJsIik7CiAgICAgICAgfQogICAgICAgIHZhciBsb2NhbEZpbGUyID0gbmV3IF8uTG9jYWxGaWxlKHBhdGgpOwogICAgICAgIHRoaXMucmVhZCA9IGxvY2FsRmlsZTIucmVhZC5iaW5kKGxvY2FsRmlsZTIpOwogICAgICAgIHRoaXMucmVhZEZpbGUgPSBsb2NhbEZpbGUyLnJlYWRGaWxlLmJpbmQobG9jYWxGaWxlMik7CiAgICAgICAgdGhpcy5zdGF0ID0gbG9jYWxGaWxlMi5zdGF0LmJpbmQobG9jYWxGaWxlMik7CiAgICAgICAgdGhpcy5mZXRjaEltcGxlbWVudGF0aW9uID0gZnVuY3Rpb24oKSB7CiAgICAgICAgfTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdmFyIGZldGNoMiA9IG9wdHMuZmV0Y2ggfHwgbXlHbG9iYWwuZmV0Y2ggJiYgbXlHbG9iYWwuZmV0Y2guYmluZChteUdsb2JhbCk7CiAgICAgIGlmICghZmV0Y2gyKSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigibm8gZmV0Y2ggZnVuY3Rpb24gc3VwcGxpZWQsIGFuZCBub25lIGZvdW5kIGluIGdsb2JhbCBlbnZpcm9ubWVudCIpOwogICAgICB9CiAgICAgIGlmIChvcHRzLm92ZXJyaWRlcykgewogICAgICAgIHRoaXMuYmFzZU92ZXJyaWRlcyA9IG9wdHMub3ZlcnJpZGVzOwogICAgICB9CiAgICAgIHRoaXMuZmV0Y2hJbXBsZW1lbnRhdGlvbiA9IGZldGNoMjsKICAgIH0KICAgICgwLCBfY3JlYXRlQ2xhc3MyJDQuZGVmYXVsdCkoUmVtb3RlRmlsZTIsIFt7CiAgICAgIGtleTogImZldGNoIiwKICAgICAgdmFsdWU6IGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBfZmV0Y2ggPSAoMCwgX2FzeW5jVG9HZW5lcmF0b3IyJDUuZGVmYXVsdCkoLyogQF9fUFVSRV9fICovIF9yZWdlbmVyYXRvciQ1LmRlZmF1bHQubWFyayhmdW5jdGlvbiBfY2FsbGVlMihpbnB1dCwgaW5pdDIpIHsKICAgICAgICAgIHZhciByZXNwb25zZTsKICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3IkNS5kZWZhdWx0LndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDA7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2hJbXBsZW1lbnRhdGlvbihpbnB1dCwgaW5pdDIpOwogICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE2OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSA2OwogICAgICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDJbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgICAgIGlmICghKF9jb250ZXh0Mi50MC5tZXNzYWdlID09PSAiRmFpbGVkIHRvIGZldGNoIikpIHsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE1OwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybigiZ2VuZXJpYy1maWxlaGFuZGxlOiByZWZldGNoaW5nICIuY29uY2F0KGlucHV0LCAiIHRvIGF0dGVtcHQgdG8gd29yayBhcm91bmQgY2hyb21lIENPUlMgaGVhZGVyIGNhY2hpbmcgYnVnIikpOwogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mZXRjaEltcGxlbWVudGF0aW9uKGlucHV0LCBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGluaXQyKSwge30sIHsKICAgICAgICAgICAgICAgICAgICBjYWNoZTogInJlbG9hZCIKICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxNjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgICAgICB0aHJvdyBfY29udGV4dDIudDA7CiAgICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgcmVzcG9uc2UpOwogICAgICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgX2NhbGxlZTIsIHRoaXMsIFtbMCwgNl1dKTsKICAgICAgICB9KSk7CiAgICAgICAgZnVuY3Rpb24gZmV0Y2gyKF94MiwgX3gzKSB7CiAgICAgICAgICByZXR1cm4gX2ZldGNoLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBmZXRjaDI7CiAgICAgIH0oKQogICAgfSwgewogICAgICBrZXk6ICJyZWFkIiwKICAgICAgdmFsdWU6IGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBfcmVhZCA9ICgwLCBfYXN5bmNUb0dlbmVyYXRvcjIkNS5kZWZhdWx0KSgvKiBAX19QVVJFX18gKi8gX3JlZ2VuZXJhdG9yJDUuZGVmYXVsdC5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKGJ1ZmZlcikgewogICAgICAgICAgdmFyIG9mZnNldCwgbGVuZ3RoLCBwb3NpdGlvbiwgb3B0cywgX29wdHMkaGVhZGVycywgaGVhZGVycywgc2lnbmFsLCBfb3B0cyRvdmVycmlkZXMsIG92ZXJyaWRlcywgYXJncywgcmVzcG9uc2UsIHJlc3BvbnNlRGF0YSwgYnl0ZXNDb3BpZWQsIHJlcywgc2l6ZU1hdGNoLCBfYXJnczMgPSBhcmd1bWVudHM7CiAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yJDUuZGVmYXVsdC53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gX2FyZ3MzLmxlbmd0aCA+IDEgJiYgX2FyZ3MzWzFdICE9PSB2b2lkIDAgPyBfYXJnczNbMV0gOiAwOwogICAgICAgICAgICAgICAgICBsZW5ndGggPSBfYXJnczMubGVuZ3RoID4gMiA/IF9hcmdzM1syXSA6IHZvaWQgMDsKICAgICAgICAgICAgICAgICAgcG9zaXRpb24gPSBfYXJnczMubGVuZ3RoID4gMyAmJiBfYXJnczNbM10gIT09IHZvaWQgMCA/IF9hcmdzM1szXSA6IDA7CiAgICAgICAgICAgICAgICAgIG9wdHMgPSBfYXJnczMubGVuZ3RoID4gNCAmJiBfYXJnczNbNF0gIT09IHZvaWQgMCA/IF9hcmdzM1s0XSA6IHt9OwogICAgICAgICAgICAgICAgICBfb3B0cyRoZWFkZXJzID0gb3B0cy5oZWFkZXJzLCBoZWFkZXJzID0gX29wdHMkaGVhZGVycyA9PT0gdm9pZCAwID8ge30gOiBfb3B0cyRoZWFkZXJzLCBzaWduYWwgPSBvcHRzLnNpZ25hbCwgX29wdHMkb3ZlcnJpZGVzID0gb3B0cy5vdmVycmlkZXMsIG92ZXJyaWRlcyA9IF9vcHRzJG92ZXJyaWRlcyA9PT0gdm9pZCAwID8ge30gOiBfb3B0cyRvdmVycmlkZXM7CiAgICAgICAgICAgICAgICAgIGlmIChsZW5ndGggPCBJbmZpbml0eSkgewogICAgICAgICAgICAgICAgICAgIGhlYWRlcnMucmFuZ2UgPSAiYnl0ZXM9Ii5jb25jYXQocG9zaXRpb24sICItIikuY29uY2F0KHBvc2l0aW9uICsgbGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsZW5ndGggPT09IEluZmluaXR5ICYmIHBvc2l0aW9uICE9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgaGVhZGVycy5yYW5nZSA9ICJieXRlcz0iLmNvbmNhdChwb3NpdGlvbiwgIi0iKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBhcmdzID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRoaXMuYmFzZU92ZXJyaWRlcyksIG92ZXJyaWRlcyksIHt9LCB7CiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGhlYWRlcnMpLCBvdmVycmlkZXMuaGVhZGVycyksIHRoaXMuYmFzZU92ZXJyaWRlcy5oZWFkZXJzKSwKICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJHRVQiLAogICAgICAgICAgICAgICAgICAgIHJlZGlyZWN0OiAiZm9sbG93IiwKICAgICAgICAgICAgICAgICAgICBtb2RlOiAiY29ycyIsCiAgICAgICAgICAgICAgICAgICAgc2lnbmFsCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDk7CiAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZldGNoKHRoaXMudXJsLCBhcmdzKTsKICAgICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMjsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkhUVFAgIi5jb25jYXQocmVzcG9uc2Uuc3RhdHVzLCAiICIpLmNvbmNhdChyZXNwb25zZS5zdGF0dXNUZXh0KSk7CiAgICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgICBpZiAoIShyZXNwb25zZS5zdGF0dXMgPT09IDIwMCAmJiBwb3NpdGlvbiA9PT0gMCB8fCByZXNwb25zZS5zdGF0dXMgPT09IDIwNikpIHsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDIxOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEJ1ZmZlckZyb21SZXNwb25zZShyZXNwb25zZSk7CiAgICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgICAgICByZXNwb25zZURhdGEgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICAgICAgYnl0ZXNDb3BpZWQgPSByZXNwb25zZURhdGEuY29weShidWZmZXIsIG9mZnNldCwgMCwgTWF0aC5taW4obGVuZ3RoLCByZXNwb25zZURhdGEubGVuZ3RoKSk7CiAgICAgICAgICAgICAgICAgIHJlcyA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCJjb250ZW50LXJhbmdlIik7CiAgICAgICAgICAgICAgICAgIHNpemVNYXRjaCA9IC9cLyhcZCspJC8uZXhlYyhyZXMgfHwgIiIpOwogICAgICAgICAgICAgICAgICBpZiAoc2l6ZU1hdGNoICYmIHNpemVNYXRjaFsxXSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuX3N0YXQgPSB7CiAgICAgICAgICAgICAgICAgICAgICBzaXplOiBwYXJzZUludChzaXplTWF0Y2hbMV0sIDEwKQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgICAgICAgICBieXRlc1JlYWQ6IGJ5dGVzQ29waWVkLAogICAgICAgICAgICAgICAgICAgIGJ1ZmZlcgogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgICAgIGlmICghKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSkgewogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjM7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCIke3RoaXMudXJsfSBmZXRjaCByZXR1cm5lZCBzdGF0dXMgMjAwLCBleHBlY3RlZCAyMDYiKTsKICAgICAgICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiSFRUUCAiLmNvbmNhdChyZXNwb25zZS5zdGF0dXMsICIgZmV0Y2hpbmcgIikuY29uY2F0KHRoaXMudXJsKSk7CiAgICAgICAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlMywgdGhpcyk7CiAgICAgICAgfSkpOwogICAgICAgIGZ1bmN0aW9uIHJlYWQoX3g0KSB7CiAgICAgICAgICByZXR1cm4gX3JlYWQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlYWQ7CiAgICAgIH0oKQogICAgfSwgewogICAgICBrZXk6ICJyZWFkRmlsZSIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbigpIHsKICAgICAgICB2YXIgX3JlYWRGaWxlID0gKDAsIF9hc3luY1RvR2VuZXJhdG9yMiQ1LmRlZmF1bHQpKC8qIEBfX1BVUkVfXyAqLyBfcmVnZW5lcmF0b3IkNS5kZWZhdWx0Lm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgICAgICB2YXIgb3B0aW9ucywgZW5jb2RpbmcsIG9wdHMsIF9vcHRzLCBfb3B0cyRoZWFkZXJzMiwgaGVhZGVycywgc2lnbmFsLCBfb3B0cyRvdmVycmlkZXMyLCBvdmVycmlkZXMsIGFyZ3MsIHJlc3BvbnNlLCBfYXJnczQgPSBhcmd1bWVudHM7CiAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yJDUuZGVmYXVsdC53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IF9hcmdzNC5sZW5ndGggPiAwICYmIF9hcmdzNFswXSAhPT0gdm9pZCAwID8gX2FyZ3M0WzBdIDoge307CiAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gInN0cmluZyIpIHsKICAgICAgICAgICAgICAgICAgICBlbmNvZGluZyA9IG9wdGlvbnM7CiAgICAgICAgICAgICAgICAgICAgb3B0cyA9IHt9OwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGVuY29kaW5nID0gb3B0aW9ucy5lbmNvZGluZzsKICAgICAgICAgICAgICAgICAgICBvcHRzID0gb3B0aW9uczsKICAgICAgICAgICAgICAgICAgICBkZWxldGUgb3B0cy5lbmNvZGluZzsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBfb3B0cyA9IG9wdHMsIF9vcHRzJGhlYWRlcnMyID0gX29wdHMuaGVhZGVycywgaGVhZGVycyA9IF9vcHRzJGhlYWRlcnMyID09PSB2b2lkIDAgPyB7fSA6IF9vcHRzJGhlYWRlcnMyLCBzaWduYWwgPSBfb3B0cy5zaWduYWwsIF9vcHRzJG92ZXJyaWRlczIgPSBfb3B0cy5vdmVycmlkZXMsIG92ZXJyaWRlcyA9IF9vcHRzJG92ZXJyaWRlczIgPT09IHZvaWQgMCA/IHt9IDogX29wdHMkb3ZlcnJpZGVzMjsKICAgICAgICAgICAgICAgICAgYXJncyA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7CiAgICAgICAgICAgICAgICAgICAgaGVhZGVycywKICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJHRVQiLAogICAgICAgICAgICAgICAgICAgIHJlZGlyZWN0OiAiZm9sbG93IiwKICAgICAgICAgICAgICAgICAgICBtb2RlOiAiY29ycyIsCiAgICAgICAgICAgICAgICAgICAgc2lnbmFsCiAgICAgICAgICAgICAgICAgIH0sIHRoaXMuYmFzZU92ZXJyaWRlcyksIG92ZXJyaWRlcyk7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2godGhpcy51cmwsIGFyZ3MpOwogICAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0NC5zZW50OwogICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJnZW5lcmljLWZpbGVoYW5kbGUgZmFpbGVkIHRvIGZldGNoIik7CiAgICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICAgIGlmICghKHJlc3BvbnNlLnN0YXR1cyAhPT0gMjAwKSkgewogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgdGhyb3cgT2JqZWN0LmFzc2lnbihuZXcgRXJyb3IoIkhUVFAgIi5jb25jYXQocmVzcG9uc2Uuc3RhdHVzLCAiIGZldGNoaW5nICIpLmNvbmNhdCh0aGlzLnVybCkpLCB7CiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgICBpZiAoIShlbmNvZGluZyA9PT0gInV0ZjgiKSkgewogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsIHJlc3BvbnNlLnRleHQoKSk7CiAgICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgICBpZiAoIWVuY29kaW5nKSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxNTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoInVuc3VwcG9ydGVkIGVuY29kaW5nOiAiLmNvbmNhdChlbmNvZGluZykpOwogICAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsIHRoaXMuZ2V0QnVmZmVyRnJvbVJlc3BvbnNlKHJlc3BvbnNlKSk7CiAgICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlNCwgdGhpcyk7CiAgICAgICAgfSkpOwogICAgICAgIGZ1bmN0aW9uIHJlYWRGaWxlKCkgewogICAgICAgICAgcmV0dXJuIF9yZWFkRmlsZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcmVhZEZpbGU7CiAgICAgIH0oKQogICAgfSwgewogICAgICBrZXk6ICJzdGF0IiwKICAgICAgdmFsdWU6IGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBfc3RhdCA9ICgwLCBfYXN5bmNUb0dlbmVyYXRvcjIkNS5kZWZhdWx0KSgvKiBAX19QVVJFX18gKi8gX3JlZ2VuZXJhdG9yJDUuZGVmYXVsdC5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KCkgewogICAgICAgICAgdmFyIGJ1ZjsKICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3IkNS5kZWZhdWx0LndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICBpZiAodGhpcy5fc3RhdCkgewogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBidWYgPSBCdWZmZXIuYWxsb2NVbnNhZmUoMTApOwogICAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlYWQoYnVmLCAwLCAxMCwgMCk7CiAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9zdGF0KSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigidW5hYmxlIHRvIGRldGVybWluZSBzaXplIG9mIGZpbGUgYXQgIi5jb25jYXQodGhpcy51cmwpKTsKICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIsIHRoaXMuX3N0YXQpOwogICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlNSwgdGhpcyk7CiAgICAgICAgfSkpOwogICAgICAgIGZ1bmN0aW9uIHN0YXQoKSB7CiAgICAgICAgICByZXR1cm4gX3N0YXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHN0YXQ7CiAgICAgIH0oKQogICAgfSwgewogICAgICBrZXk6ICJjbG9zZSIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbigpIHsKICAgICAgICB2YXIgX2Nsb3NlID0gKDAsIF9hc3luY1RvR2VuZXJhdG9yMiQ1LmRlZmF1bHQpKC8qIEBfX1BVUkVfXyAqLyBfcmVnZW5lcmF0b3IkNS5kZWZhdWx0Lm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYoKSB7CiAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yJDUuZGVmYXVsdC53cmFwKGZ1bmN0aW9uIF9jYWxsZWU2JChfY29udGV4dDYpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5hYnJ1cHQoInJldHVybiIpOwogICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlNik7CiAgICAgICAgfSkpOwogICAgICAgIGZ1bmN0aW9uIGNsb3NlKCkgewogICAgICAgICAgcmV0dXJuIF9jbG9zZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gY2xvc2U7CiAgICAgIH0oKQogICAgfV0pOwogICAgcmV0dXJuIFJlbW90ZUZpbGUyOwogIH0oKTsKICByZW1vdGVGaWxlLmRlZmF1bHQgPSBSZW1vdGVGaWxlJDE7CiAgdmFyIGJsb2JGaWxlID0ge307CiAgdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQkNCA9IGludGVyb3BSZXF1aXJlRGVmYXVsdC5leHBvcnRzOwogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShibG9iRmlsZSwgIl9fZXNNb2R1bGUiLCB7CiAgICB2YWx1ZTogdHJ1ZQogIH0pOwogIGJsb2JGaWxlLmRlZmF1bHQgPSB2b2lkIDA7CiAgdmFyIF9yZWdlbmVyYXRvciQ0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdCQ0KHJlZ2VuZXJhdG9yKTsKICB2YXIgX2FzeW5jVG9HZW5lcmF0b3IyJDQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0JDQoYXN5bmNUb0dlbmVyYXRvci5leHBvcnRzKTsKICB2YXIgX2NsYXNzQ2FsbENoZWNrMiQzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdCQ0KGNsYXNzQ2FsbENoZWNrLmV4cG9ydHMpOwogIHZhciBfY3JlYXRlQ2xhc3MyJDMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0JDQoY3JlYXRlQ2xhc3MuZXhwb3J0cyk7CiAgdmFyIF9kZWZpbmVQcm9wZXJ0eTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0JDQoZGVmaW5lUHJvcGVydHkuZXhwb3J0cyk7CiAgZnVuY3Rpb24gcmVhZEJsb2JBc0FycmF5QnVmZmVyKGJsb2IpIHsKICAgIHZhciBmaWxlUmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHsKICAgICAgZmlsZVJlYWRlci5vbmVycm9yID0gZnVuY3Rpb24oKSB7CiAgICAgICAgZmlsZVJlYWRlci5hYm9ydCgpOwogICAgICAgIHJlamVjdChuZXcgRXJyb3IoInByb2JsZW0gcmVhZGluZyBibG9iIikpOwogICAgICB9OwogICAgICBmaWxlUmVhZGVyLm9uYWJvcnQgPSBmdW5jdGlvbigpIHsKICAgICAgICByZWplY3QobmV3IEVycm9yKCJibG9iIHJlYWRpbmcgd2FzIGFib3J0ZWQiKSk7CiAgICAgIH07CiAgICAgIGZpbGVSZWFkZXIub25sb2FkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgaWYgKGZpbGVSZWFkZXIucmVzdWx0ICYmIHR5cGVvZiBmaWxlUmVhZGVyLnJlc3VsdCAhPT0gInN0cmluZyIpIHsKICAgICAgICAgIHJlc29sdmUoZmlsZVJlYWRlci5yZXN1bHQpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZWplY3QobmV3IEVycm9yKCJ1bmtub3duIGVycm9yIHJlYWRpbmcgYmxvYiIpKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIGZpbGVSZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoYmxvYik7CiAgICB9KTsKICB9CiAgZnVuY3Rpb24gcmVhZEJsb2JBc1RleHQoYmxvYikgewogICAgdmFyIGZpbGVSZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgewogICAgICBmaWxlUmVhZGVyLm9uZXJyb3IgPSBmdW5jdGlvbigpIHsKICAgICAgICBmaWxlUmVhZGVyLmFib3J0KCk7CiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcigicHJvYmxlbSByZWFkaW5nIGJsb2IiKSk7CiAgICAgIH07CiAgICAgIGZpbGVSZWFkZXIub25hYm9ydCA9IGZ1bmN0aW9uKCkgewogICAgICAgIHJlamVjdChuZXcgRXJyb3IoImJsb2IgcmVhZGluZyB3YXMgYWJvcnRlZCIpKTsKICAgICAgfTsKICAgICAgZmlsZVJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbigpIHsKICAgICAgICBpZiAoZmlsZVJlYWRlci5yZXN1bHQgJiYgdHlwZW9mIGZpbGVSZWFkZXIucmVzdWx0ID09PSAic3RyaW5nIikgewogICAgICAgICAgcmVzb2x2ZShmaWxlUmVhZGVyLnJlc3VsdCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoInVua25vd24gZXJyb3IgcmVhZGluZyBibG9iIikpOwogICAgICAgIH0KICAgICAgfTsKICAgICAgZmlsZVJlYWRlci5yZWFkQXNUZXh0KGJsb2IpOwogICAgfSk7CiAgfQogIHZhciBCbG9iRmlsZSA9IC8qIEBfX1BVUkVfXyAqLyBmdW5jdGlvbigpIHsKICAgIGZ1bmN0aW9uIEJsb2JGaWxlMihibG9iKSB7CiAgICAgICgwLCBfY2xhc3NDYWxsQ2hlY2syJDMuZGVmYXVsdCkodGhpcywgQmxvYkZpbGUyKTsKICAgICAgKDAsIF9kZWZpbmVQcm9wZXJ0eTIuZGVmYXVsdCkodGhpcywgImJsb2IiLCB2b2lkIDApOwogICAgICAoMCwgX2RlZmluZVByb3BlcnR5Mi5kZWZhdWx0KSh0aGlzLCAic2l6ZSIsIHZvaWQgMCk7CiAgICAgIHRoaXMuYmxvYiA9IGJsb2I7CiAgICAgIHRoaXMuc2l6ZSA9IGJsb2Iuc2l6ZTsKICAgIH0KICAgICgwLCBfY3JlYXRlQ2xhc3MyJDMuZGVmYXVsdCkoQmxvYkZpbGUyLCBbewogICAgICBrZXk6ICJyZWFkIiwKICAgICAgdmFsdWU6IGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBfcmVhZCA9ICgwLCBfYXN5bmNUb0dlbmVyYXRvcjIkNC5kZWZhdWx0KSgvKiBAX19QVVJFX18gKi8gX3JlZ2VuZXJhdG9yJDQuZGVmYXVsdC5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoYnVmZmVyKSB7CiAgICAgICAgICB2YXIgb2Zmc2V0LCBsZW5ndGgsIHBvc2l0aW9uLCBzdGFydCwgZW5kLCByZXN1bHQsIHJlc3VsdEJ1ZmZlciwgYnl0ZXNDb3BpZWQsIF9hcmdzID0gYXJndW1lbnRzOwogICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvciQ0LmRlZmF1bHQud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gX2FyZ3MubGVuZ3RoID4gMSAmJiBfYXJnc1sxXSAhPT0gdm9pZCAwID8gX2FyZ3NbMV0gOiAwOwogICAgICAgICAgICAgICAgICBsZW5ndGggPSBfYXJncy5sZW5ndGggPiAyID8gX2FyZ3NbMl0gOiB2b2lkIDA7CiAgICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gX2FyZ3MubGVuZ3RoID4gMyAmJiBfYXJnc1szXSAhPT0gdm9pZCAwID8gX2FyZ3NbM10gOiAwOwogICAgICAgICAgICAgICAgICBpZiAobGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICAgICAgICAgIGJ5dGVzUmVhZDogMCwKICAgICAgICAgICAgICAgICAgICBidWZmZXIKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gcG9zaXRpb247CiAgICAgICAgICAgICAgICAgIGVuZCA9IHN0YXJ0ICsgbGVuZ3RoOwogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlYWRCbG9iQXNBcnJheUJ1ZmZlcih0aGlzLmJsb2Iuc2xpY2Uoc3RhcnQsIGVuZCkpOwogICAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgICByZXN1bHRCdWZmZXIgPSBCdWZmZXIuZnJvbShyZXN1bHQpOwogICAgICAgICAgICAgICAgICBieXRlc0NvcGllZCA9IHJlc3VsdEJ1ZmZlci5jb3B5KGJ1ZmZlciwgb2Zmc2V0KTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICAgICAgICAgIGJ5dGVzUmVhZDogYnl0ZXNDb3BpZWQsCiAgICAgICAgICAgICAgICAgICAgYnVmZmVyOiByZXN1bHRCdWZmZXIKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWUsIHRoaXMpOwogICAgICAgIH0pKTsKICAgICAgICBmdW5jdGlvbiByZWFkKF94KSB7CiAgICAgICAgICByZXR1cm4gX3JlYWQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlYWQ7CiAgICAgIH0oKQogICAgfSwgewogICAgICBrZXk6ICJyZWFkRmlsZSIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbigpIHsKICAgICAgICB2YXIgX3JlYWRGaWxlID0gKDAsIF9hc3luY1RvR2VuZXJhdG9yMiQ0LmRlZmF1bHQpKC8qIEBfX1BVUkVfXyAqLyBfcmVnZW5lcmF0b3IkNC5kZWZhdWx0Lm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIob3B0aW9ucykgewogICAgICAgICAgdmFyIGVuY29kaW5nLCByZXN1bHQ7CiAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yJDQuZGVmYXVsdC53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAic3RyaW5nIikgewogICAgICAgICAgICAgICAgICAgIGVuY29kaW5nID0gb3B0aW9uczsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBlbmNvZGluZyA9IG9wdGlvbnMgJiYgb3B0aW9ucy5lbmNvZGluZzsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBpZiAoIShlbmNvZGluZyA9PT0gInV0ZjgiKSkgewogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgcmVhZEJsb2JBc1RleHQodGhpcy5ibG9iKSk7CiAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgIGlmICghZW5jb2RpbmcpIHsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJ1bnN1cHBvcnRlZCBlbmNvZGluZzogIi5jb25jYXQoZW5jb2RpbmcpKTsKICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA3OwogICAgICAgICAgICAgICAgICByZXR1cm4gcmVhZEJsb2JBc0FycmF5QnVmZmVyKHRoaXMuYmxvYik7CiAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgQnVmZmVyLmZyb20ocmVzdWx0KSk7CiAgICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWUyLCB0aGlzKTsKICAgICAgICB9KSk7CiAgICAgICAgZnVuY3Rpb24gcmVhZEZpbGUoX3gyKSB7CiAgICAgICAgICByZXR1cm4gX3JlYWRGaWxlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfQogICAgICAgIHJldHVybiByZWFkRmlsZTsKICAgICAgfSgpCiAgICB9LCB7CiAgICAgIGtleTogInN0YXQiLAogICAgICB2YWx1ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIF9zdGF0ID0gKDAsIF9hc3luY1RvR2VuZXJhdG9yMiQ0LmRlZmF1bHQpKC8qIEBfX1BVUkVfXyAqLyBfcmVnZW5lcmF0b3IkNC5kZWZhdWx0Lm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yJDQuZGVmYXVsdC53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgICAgICAgICBzaXplOiB0aGlzLnNpemUKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWUzLCB0aGlzKTsKICAgICAgICB9KSk7CiAgICAgICAgZnVuY3Rpb24gc3RhdCgpIHsKICAgICAgICAgIHJldHVybiBfc3RhdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gc3RhdDsKICAgICAgfSgpCiAgICB9LCB7CiAgICAgIGtleTogImNsb3NlIiwKICAgICAgdmFsdWU6IGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBfY2xvc2UgPSAoMCwgX2FzeW5jVG9HZW5lcmF0b3IyJDQuZGVmYXVsdCkoLyogQF9fUFVSRV9fICovIF9yZWdlbmVyYXRvciQ0LmRlZmF1bHQubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3IkNC5kZWZhdWx0LndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIik7CiAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWU0KTsKICAgICAgICB9KSk7CiAgICAgICAgZnVuY3Rpb24gY2xvc2UoKSB7CiAgICAgICAgICByZXR1cm4gX2Nsb3NlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBjbG9zZTsKICAgICAgfSgpCiAgICB9XSk7CiAgICByZXR1cm4gQmxvYkZpbGUyOwogIH0oKTsKICBibG9iRmlsZS5kZWZhdWx0ID0gQmxvYkZpbGU7CiAgdmFyIGZpbGVoYW5kbGUgPSAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmZyZWV6ZSh7CiAgICBfX3Byb3RvX186IG51bGwKICB9KTsKICB2YXIgcmVxdWlyZSQkNCA9IC8qIEBfX1BVUkVfXyAqLyBnZXRBdWdtZW50ZWROYW1lc3BhY2UoZmlsZWhhbmRsZSk7CiAgKGZ1bmN0aW9uKGV4cG9ydHMyKSB7CiAgICB2YXIgX2ludGVyb3BSZXF1aXJlRGVmYXVsdDIgPSBpbnRlcm9wUmVxdWlyZURlZmF1bHQuZXhwb3J0czsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzMiwgIl9fZXNNb2R1bGUiLCB7CiAgICAgIHZhbHVlOiB0cnVlCiAgICB9KTsKICAgIHZhciBfZXhwb3J0TmFtZXMgPSB7CiAgICAgIG9wZW46IHRydWUsCiAgICAgIGZyb21Vcmw6IHRydWUsCiAgICAgIExvY2FsRmlsZTogdHJ1ZSwKICAgICAgUmVtb3RlRmlsZTogdHJ1ZSwKICAgICAgQmxvYkZpbGU6IHRydWUKICAgIH07CiAgICBleHBvcnRzMi5vcGVuID0gb3BlbjsKICAgIGV4cG9ydHMyLmZyb21VcmwgPSBmcm9tVXJsOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMyLCAiTG9jYWxGaWxlIiwgewogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICByZXR1cm4gX2xvY2FsRmlsZS5kZWZhdWx0OwogICAgICB9CiAgICB9KTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzMiwgIlJlbW90ZUZpbGUiLCB7CiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgIHJldHVybiBfcmVtb3RlRmlsZS5kZWZhdWx0OwogICAgICB9CiAgICB9KTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzMiwgIkJsb2JGaWxlIiwgewogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICByZXR1cm4gX2Jsb2JGaWxlLmRlZmF1bHQ7CiAgICAgIH0KICAgIH0pOwogICAgdmFyIF9sb2NhbEZpbGUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0MihyZXF1aXJlJCQ1KTsKICAgIHZhciBfcmVtb3RlRmlsZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKHJlbW90ZUZpbGUpOwogICAgdmFyIF9ibG9iRmlsZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQyKGJsb2JGaWxlKTsKICAgIHZhciBfZmlsZWhhbmRsZSA9IHJlcXVpcmUkJDQ7CiAgICBPYmplY3Qua2V5cyhfZmlsZWhhbmRsZSkuZm9yRWFjaChmdW5jdGlvbihrZXkpIHsKICAgICAgaWYgKGtleSA9PT0gImRlZmF1bHQiIHx8IGtleSA9PT0gIl9fZXNNb2R1bGUiKQogICAgICAgIHJldHVybjsKICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChfZXhwb3J0TmFtZXMsIGtleSkpCiAgICAgICAgcmV0dXJuOwogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0czIsIGtleSwgewogICAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgICByZXR1cm4gX2ZpbGVoYW5kbGVba2V5XTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSk7CiAgICBmdW5jdGlvbiBmcm9tVXJsKHNvdXJjZSkgewogICAgICB2YXIgb3B0cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdm9pZCAwID8gYXJndW1lbnRzWzFdIDoge307CiAgICAgIHJldHVybiBuZXcgX3JlbW90ZUZpbGUuZGVmYXVsdChzb3VyY2UsIG9wdHMpOwogICAgfQogICAgZnVuY3Rpb24gb3BlbihtYXliZVVybCwgbWF5YmVQYXRoLCBtYXliZUZpbGVoYW5kbGUpIHsKICAgICAgdmFyIG9wdHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHZvaWQgMCA/IGFyZ3VtZW50c1szXSA6IHt9OwogICAgICBpZiAobWF5YmVGaWxlaGFuZGxlICE9PSB2b2lkIDApIHsKICAgICAgICByZXR1cm4gbWF5YmVGaWxlaGFuZGxlOwogICAgICB9CiAgICAgIGlmIChtYXliZVVybCAhPT0gdm9pZCAwKSB7CiAgICAgICAgcmV0dXJuIGZyb21VcmwobWF5YmVVcmwsIG9wdHMpOwogICAgICB9CiAgICAgIGlmIChtYXliZVBhdGggIT09IHZvaWQgMCkgewogICAgICAgIHJldHVybiBuZXcgX2xvY2FsRmlsZS5kZWZhdWx0KG1heWJlUGF0aCwgb3B0cyk7CiAgICAgIH0KICAgICAgdGhyb3cgbmV3IEVycm9yKCJubyB1cmwsIHBhdGgsIG9yIGZpbGVoYW5kbGUgcHJvdmlkZWQsIGNhbm5vdCBvcGVuIik7CiAgICB9CiAgfSkoZGlzdCQxKTsKICB2YXIgc2xpY2VkVG9BcnJheSA9IHsgZXhwb3J0czoge30gfTsKICB2YXIgYXJyYXlXaXRoSG9sZXMgPSB7IGV4cG9ydHM6IHt9IH07CiAgKGZ1bmN0aW9uKG1vZHVsZTIpIHsKICAgIGZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHsKICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkKICAgICAgICByZXR1cm4gYXJyOwogICAgfQogICAgbW9kdWxlMi5leHBvcnRzID0gX2FycmF5V2l0aEhvbGVzOwogICAgbW9kdWxlMi5leHBvcnRzWyJkZWZhdWx0Il0gPSBtb2R1bGUyLmV4cG9ydHMsIG1vZHVsZTIuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKICB9KShhcnJheVdpdGhIb2xlcyk7CiAgdmFyIGl0ZXJhYmxlVG9BcnJheUxpbWl0ID0geyBleHBvcnRzOiB7fSB9OwogIChmdW5jdGlvbihtb2R1bGUyKSB7CiAgICBmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7CiAgICAgIHZhciBfaSA9IGFyciA9PSBudWxsID8gbnVsbCA6IHR5cGVvZiBTeW1ib2wgIT09ICJ1bmRlZmluZWQiICYmIGFycltTeW1ib2wuaXRlcmF0b3JdIHx8IGFyclsiQEBpdGVyYXRvciJdOwogICAgICBpZiAoX2kgPT0gbnVsbCkKICAgICAgICByZXR1cm47CiAgICAgIHZhciBfYXJyID0gW107CiAgICAgIHZhciBfbiA9IHRydWU7CiAgICAgIHZhciBfZCA9IGZhbHNlOwogICAgICB2YXIgX3MsIF9lOwogICAgICB0cnkgewogICAgICAgIGZvciAoX2kgPSBfaS5jYWxsKGFycik7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsKICAgICAgICAgIF9hcnIucHVzaChfcy52YWx1ZSk7CiAgICAgICAgICBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIyKSB7CiAgICAgICAgX2QgPSB0cnVlOwogICAgICAgIF9lID0gZXJyMjsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICB0cnkgewogICAgICAgICAgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0gIT0gbnVsbCkKICAgICAgICAgICAgX2lbInJldHVybiJdKCk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIGlmIChfZCkKICAgICAgICAgICAgdGhyb3cgX2U7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBfYXJyOwogICAgfQogICAgbW9kdWxlMi5leHBvcnRzID0gX2l0ZXJhYmxlVG9BcnJheUxpbWl0OwogICAgbW9kdWxlMi5leHBvcnRzWyJkZWZhdWx0Il0gPSBtb2R1bGUyLmV4cG9ydHMsIG1vZHVsZTIuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKICB9KShpdGVyYWJsZVRvQXJyYXlMaW1pdCk7CiAgdmFyIHVuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5ID0geyBleHBvcnRzOiB7fSB9OwogIHZhciBhcnJheUxpa2VUb0FycmF5ID0geyBleHBvcnRzOiB7fSB9OwogIChmdW5jdGlvbihtb2R1bGUyKSB7CiAgICBmdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgewogICAgICBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkKICAgICAgICBsZW4gPSBhcnIubGVuZ3RoOwogICAgICBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICBhcnIyW2ldID0gYXJyW2ldOwogICAgICB9CiAgICAgIHJldHVybiBhcnIyOwogICAgfQogICAgbW9kdWxlMi5leHBvcnRzID0gX2FycmF5TGlrZVRvQXJyYXk7CiAgICBtb2R1bGUyLmV4cG9ydHNbImRlZmF1bHQiXSA9IG1vZHVsZTIuZXhwb3J0cywgbW9kdWxlMi5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwogIH0pKGFycmF5TGlrZVRvQXJyYXkpOwogIChmdW5jdGlvbihtb2R1bGUyKSB7CiAgICB2YXIgYXJyYXlMaWtlVG9BcnJheSQxID0gYXJyYXlMaWtlVG9BcnJheS5leHBvcnRzOwogICAgZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgewogICAgICBpZiAoIW8pCiAgICAgICAgcmV0dXJuOwogICAgICBpZiAodHlwZW9mIG8gPT09ICJzdHJpbmciKQogICAgICAgIHJldHVybiBhcnJheUxpa2VUb0FycmF5JDEobywgbWluTGVuKTsKICAgICAgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOwogICAgICBpZiAobiA9PT0gIk9iamVjdCIgJiYgby5jb25zdHJ1Y3RvcikKICAgICAgICBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOwogICAgICBpZiAobiA9PT0gIk1hcCIgfHwgbiA9PT0gIlNldCIpCiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20obyk7CiAgICAgIGlmIChuID09PSAiQXJndW1lbnRzIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkKICAgICAgICByZXR1cm4gYXJyYXlMaWtlVG9BcnJheSQxKG8sIG1pbkxlbik7CiAgICB9CiAgICBtb2R1bGUyLmV4cG9ydHMgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXk7CiAgICBtb2R1bGUyLmV4cG9ydHNbImRlZmF1bHQiXSA9IG1vZHVsZTIuZXhwb3J0cywgbW9kdWxlMi5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwogIH0pKHVuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KTsKICB2YXIgbm9uSXRlcmFibGVSZXN0ID0geyBleHBvcnRzOiB7fSB9OwogIChmdW5jdGlvbihtb2R1bGUyKSB7CiAgICBmdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpOwogICAgfQogICAgbW9kdWxlMi5leHBvcnRzID0gX25vbkl0ZXJhYmxlUmVzdDsKICAgIG1vZHVsZTIuZXhwb3J0c1siZGVmYXVsdCJdID0gbW9kdWxlMi5leHBvcnRzLCBtb2R1bGUyLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7CiAgfSkobm9uSXRlcmFibGVSZXN0KTsKICAoZnVuY3Rpb24obW9kdWxlMikgewogICAgdmFyIGFycmF5V2l0aEhvbGVzJDEgPSBhcnJheVdpdGhIb2xlcy5leHBvcnRzOwogICAgdmFyIGl0ZXJhYmxlVG9BcnJheUxpbWl0JDEgPSBpdGVyYWJsZVRvQXJyYXlMaW1pdC5leHBvcnRzOwogICAgdmFyIHVuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5JDEgPSB1bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheS5leHBvcnRzOwogICAgdmFyIG5vbkl0ZXJhYmxlUmVzdCQxID0gbm9uSXRlcmFibGVSZXN0LmV4cG9ydHM7CiAgICBmdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsKICAgICAgcmV0dXJuIGFycmF5V2l0aEhvbGVzJDEoYXJyKSB8fCBpdGVyYWJsZVRvQXJyYXlMaW1pdCQxKGFyciwgaSkgfHwgdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkkMShhcnIsIGkpIHx8IG5vbkl0ZXJhYmxlUmVzdCQxKCk7CiAgICB9CiAgICBtb2R1bGUyLmV4cG9ydHMgPSBfc2xpY2VkVG9BcnJheTsKICAgIG1vZHVsZTIuZXhwb3J0c1siZGVmYXVsdCJdID0gbW9kdWxlMi5leHBvcnRzLCBtb2R1bGUyLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7CiAgfSkoc2xpY2VkVG9BcnJheSk7CiAgdmFyIGNvbW1vbiQxID0ge307CiAgKGZ1bmN0aW9uKGV4cG9ydHMyKSB7CiAgICB2YXIgVFlQRURfT0sgPSB0eXBlb2YgVWludDhBcnJheSAhPT0gInVuZGVmaW5lZCIgJiYgdHlwZW9mIFVpbnQxNkFycmF5ICE9PSAidW5kZWZpbmVkIiAmJiB0eXBlb2YgSW50MzJBcnJheSAhPT0gInVuZGVmaW5lZCI7CiAgICBmdW5jdGlvbiBfaGFzKG9iaiwga2V5KSB7CiAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpOwogICAgfQogICAgZXhwb3J0czIuYXNzaWduID0gZnVuY3Rpb24ob2JqKSB7CiAgICAgIHZhciBzb3VyY2VzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTsKICAgICAgd2hpbGUgKHNvdXJjZXMubGVuZ3RoKSB7CiAgICAgICAgdmFyIHNvdXJjZSA9IHNvdXJjZXMuc2hpZnQoKTsKICAgICAgICBpZiAoIXNvdXJjZSkgewogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQogICAgICAgIGlmICh0eXBlb2Ygc291cmNlICE9PSAib2JqZWN0IikgewogICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzb3VyY2UgKyAibXVzdCBiZSBub24tb2JqZWN0Iik7CiAgICAgICAgfQogICAgICAgIGZvciAodmFyIHAgaW4gc291cmNlKSB7CiAgICAgICAgICBpZiAoX2hhcyhzb3VyY2UsIHApKSB7CiAgICAgICAgICAgIG9ialtwXSA9IHNvdXJjZVtwXTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIG9iajsKICAgIH07CiAgICBleHBvcnRzMi5zaHJpbmtCdWYgPSBmdW5jdGlvbihidWYsIHNpemUpIHsKICAgICAgaWYgKGJ1Zi5sZW5ndGggPT09IHNpemUpIHsKICAgICAgICByZXR1cm4gYnVmOwogICAgICB9CiAgICAgIGlmIChidWYuc3ViYXJyYXkpIHsKICAgICAgICByZXR1cm4gYnVmLnN1YmFycmF5KDAsIHNpemUpOwogICAgICB9CiAgICAgIGJ1Zi5sZW5ndGggPSBzaXplOwogICAgICByZXR1cm4gYnVmOwogICAgfTsKICAgIHZhciBmblR5cGVkID0gewogICAgICBhcnJheVNldDogZnVuY3Rpb24oZGVzdCwgc3JjLCBzcmNfb2ZmcywgbGVuLCBkZXN0X29mZnMpIHsKICAgICAgICBpZiAoc3JjLnN1YmFycmF5ICYmIGRlc3Quc3ViYXJyYXkpIHsKICAgICAgICAgIGRlc3Quc2V0KHNyYy5zdWJhcnJheShzcmNfb2Zmcywgc3JjX29mZnMgKyBsZW4pLCBkZXN0X29mZnMpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgICBkZXN0W2Rlc3Rfb2ZmcyArIGldID0gc3JjW3NyY19vZmZzICsgaV07CiAgICAgICAgfQogICAgICB9LAogICAgICBmbGF0dGVuQ2h1bmtzOiBmdW5jdGlvbihjaHVua3MpIHsKICAgICAgICB2YXIgaSwgbCwgbGVuLCBwb3MsIGNodW5rLCByZXN1bHQ7CiAgICAgICAgbGVuID0gMDsKICAgICAgICBmb3IgKGkgPSAwLCBsID0gY2h1bmtzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgICAgbGVuICs9IGNodW5rc1tpXS5sZW5ndGg7CiAgICAgICAgfQogICAgICAgIHJlc3VsdCA9IG5ldyBVaW50OEFycmF5KGxlbik7CiAgICAgICAgcG9zID0gMDsKICAgICAgICBmb3IgKGkgPSAwLCBsID0gY2h1bmtzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgICAgY2h1bmsgPSBjaHVua3NbaV07CiAgICAgICAgICByZXN1bHQuc2V0KGNodW5rLCBwb3MpOwogICAgICAgICAgcG9zICs9IGNodW5rLmxlbmd0aDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgfQogICAgfTsKICAgIHZhciBmblVudHlwZWQgPSB7CiAgICAgIGFycmF5U2V0OiBmdW5jdGlvbihkZXN0LCBzcmMsIHNyY19vZmZzLCBsZW4sIGRlc3Rfb2ZmcykgewogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICAgIGRlc3RbZGVzdF9vZmZzICsgaV0gPSBzcmNbc3JjX29mZnMgKyBpXTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGZsYXR0ZW5DaHVua3M6IGZ1bmN0aW9uKGNodW5rcykgewogICAgICAgIHJldHVybiBbXS5jb25jYXQuYXBwbHkoW10sIGNodW5rcyk7CiAgICAgIH0KICAgIH07CiAgICBleHBvcnRzMi5zZXRUeXBlZCA9IGZ1bmN0aW9uKG9uKSB7CiAgICAgIGlmIChvbikgewogICAgICAgIGV4cG9ydHMyLkJ1ZjggPSBVaW50OEFycmF5OwogICAgICAgIGV4cG9ydHMyLkJ1ZjE2ID0gVWludDE2QXJyYXk7CiAgICAgICAgZXhwb3J0czIuQnVmMzIgPSBJbnQzMkFycmF5OwogICAgICAgIGV4cG9ydHMyLmFzc2lnbihleHBvcnRzMiwgZm5UeXBlZCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZXhwb3J0czIuQnVmOCA9IEFycmF5OwogICAgICAgIGV4cG9ydHMyLkJ1ZjE2ID0gQXJyYXk7CiAgICAgICAgZXhwb3J0czIuQnVmMzIgPSBBcnJheTsKICAgICAgICBleHBvcnRzMi5hc3NpZ24oZXhwb3J0czIsIGZuVW50eXBlZCk7CiAgICAgIH0KICAgIH07CiAgICBleHBvcnRzMi5zZXRUeXBlZChUWVBFRF9PSyk7CiAgfSkoY29tbW9uJDEpOwogIHZhciBkZWZsYXRlJDQgPSB7fTsKICB2YXIgZGVmbGF0ZSQzID0ge307CiAgdmFyIHRyZWVzJDEgPSB7fTsKICB2YXIgdXRpbHMkNiA9IGNvbW1vbiQxOwogIHZhciBaX0ZJWEVEJDEgPSA0OwogIHZhciBaX0JJTkFSWSA9IDA7CiAgdmFyIFpfVEVYVCA9IDE7CiAgdmFyIFpfVU5LTk9XTiQxID0gMjsKICBmdW5jdGlvbiB6ZXJvJDEoYnVmKSB7CiAgICB2YXIgbGVuID0gYnVmLmxlbmd0aDsKICAgIHdoaWxlICgtLWxlbiA+PSAwKSB7CiAgICAgIGJ1ZltsZW5dID0gMDsKICAgIH0KICB9CiAgdmFyIFNUT1JFRF9CTE9DSyA9IDA7CiAgdmFyIFNUQVRJQ19UUkVFUyA9IDE7CiAgdmFyIERZTl9UUkVFUyA9IDI7CiAgdmFyIE1JTl9NQVRDSCQxID0gMzsKICB2YXIgTUFYX01BVENIJDEgPSAyNTg7CiAgdmFyIExFTkdUSF9DT0RFUyQxID0gMjk7CiAgdmFyIExJVEVSQUxTJDEgPSAyNTY7CiAgdmFyIExfQ09ERVMkMSA9IExJVEVSQUxTJDEgKyAxICsgTEVOR1RIX0NPREVTJDE7CiAgdmFyIERfQ09ERVMkMSA9IDMwOwogIHZhciBCTF9DT0RFUyQxID0gMTk7CiAgdmFyIEhFQVBfU0laRSQxID0gMiAqIExfQ09ERVMkMSArIDE7CiAgdmFyIE1BWF9CSVRTJDEgPSAxNTsKICB2YXIgQnVmX3NpemUgPSAxNjsKICB2YXIgTUFYX0JMX0JJVFMgPSA3OwogIHZhciBFTkRfQkxPQ0sgPSAyNTY7CiAgdmFyIFJFUF8zXzYgPSAxNjsKICB2YXIgUkVQWl8zXzEwID0gMTc7CiAgdmFyIFJFUFpfMTFfMTM4ID0gMTg7CiAgdmFyIGV4dHJhX2xiaXRzID0gWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDEsIDEsIDEsIDEsIDIsIDIsIDIsIDIsIDMsIDMsIDMsIDMsIDQsIDQsIDQsIDQsIDUsIDUsIDUsIDUsIDBdOwogIHZhciBleHRyYV9kYml0cyA9IFswLCAwLCAwLCAwLCAxLCAxLCAyLCAyLCAzLCAzLCA0LCA0LCA1LCA1LCA2LCA2LCA3LCA3LCA4LCA4LCA5LCA5LCAxMCwgMTAsIDExLCAxMSwgMTIsIDEyLCAxMywgMTNdOwogIHZhciBleHRyYV9ibGJpdHMgPSBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMiwgMywgN107CiAgdmFyIGJsX29yZGVyID0gWzE2LCAxNywgMTgsIDAsIDgsIDcsIDksIDYsIDEwLCA1LCAxMSwgNCwgMTIsIDMsIDEzLCAyLCAxNCwgMSwgMTVdOwogIHZhciBESVNUX0NPREVfTEVOID0gNTEyOwogIHZhciBzdGF0aWNfbHRyZWUgPSBuZXcgQXJyYXkoKExfQ09ERVMkMSArIDIpICogMik7CiAgemVybyQxKHN0YXRpY19sdHJlZSk7CiAgdmFyIHN0YXRpY19kdHJlZSA9IG5ldyBBcnJheShEX0NPREVTJDEgKiAyKTsKICB6ZXJvJDEoc3RhdGljX2R0cmVlKTsKICB2YXIgX2Rpc3RfY29kZSA9IG5ldyBBcnJheShESVNUX0NPREVfTEVOKTsKICB6ZXJvJDEoX2Rpc3RfY29kZSk7CiAgdmFyIF9sZW5ndGhfY29kZSA9IG5ldyBBcnJheShNQVhfTUFUQ0gkMSAtIE1JTl9NQVRDSCQxICsgMSk7CiAgemVybyQxKF9sZW5ndGhfY29kZSk7CiAgdmFyIGJhc2VfbGVuZ3RoID0gbmV3IEFycmF5KExFTkdUSF9DT0RFUyQxKTsKICB6ZXJvJDEoYmFzZV9sZW5ndGgpOwogIHZhciBiYXNlX2Rpc3QgPSBuZXcgQXJyYXkoRF9DT0RFUyQxKTsKICB6ZXJvJDEoYmFzZV9kaXN0KTsKICBmdW5jdGlvbiBTdGF0aWNUcmVlRGVzYyhzdGF0aWNfdHJlZSwgZXh0cmFfYml0cywgZXh0cmFfYmFzZSwgZWxlbXMsIG1heF9sZW5ndGgpIHsKICAgIHRoaXMuc3RhdGljX3RyZWUgPSBzdGF0aWNfdHJlZTsKICAgIHRoaXMuZXh0cmFfYml0cyA9IGV4dHJhX2JpdHM7CiAgICB0aGlzLmV4dHJhX2Jhc2UgPSBleHRyYV9iYXNlOwogICAgdGhpcy5lbGVtcyA9IGVsZW1zOwogICAgdGhpcy5tYXhfbGVuZ3RoID0gbWF4X2xlbmd0aDsKICAgIHRoaXMuaGFzX3N0cmVlID0gc3RhdGljX3RyZWUgJiYgc3RhdGljX3RyZWUubGVuZ3RoOwogIH0KICB2YXIgc3RhdGljX2xfZGVzYzsKICB2YXIgc3RhdGljX2RfZGVzYzsKICB2YXIgc3RhdGljX2JsX2Rlc2M7CiAgZnVuY3Rpb24gVHJlZURlc2MoZHluX3RyZWUsIHN0YXRfZGVzYykgewogICAgdGhpcy5keW5fdHJlZSA9IGR5bl90cmVlOwogICAgdGhpcy5tYXhfY29kZSA9IDA7CiAgICB0aGlzLnN0YXRfZGVzYyA9IHN0YXRfZGVzYzsKICB9CiAgZnVuY3Rpb24gZF9jb2RlKGRpc3QyKSB7CiAgICByZXR1cm4gZGlzdDIgPCAyNTYgPyBfZGlzdF9jb2RlW2Rpc3QyXSA6IF9kaXN0X2NvZGVbMjU2ICsgKGRpc3QyID4+PiA3KV07CiAgfQogIGZ1bmN0aW9uIHB1dF9zaG9ydChzLCB3KSB7CiAgICBzLnBlbmRpbmdfYnVmW3MucGVuZGluZysrXSA9IHcgJiAyNTU7CiAgICBzLnBlbmRpbmdfYnVmW3MucGVuZGluZysrXSA9IHcgPj4+IDggJiAyNTU7CiAgfQogIGZ1bmN0aW9uIHNlbmRfYml0cyhzLCB2YWx1ZSwgbGVuZ3RoKSB7CiAgICBpZiAocy5iaV92YWxpZCA+IEJ1Zl9zaXplIC0gbGVuZ3RoKSB7CiAgICAgIHMuYmlfYnVmIHw9IHZhbHVlIDw8IHMuYmlfdmFsaWQgJiA2NTUzNTsKICAgICAgcHV0X3Nob3J0KHMsIHMuYmlfYnVmKTsKICAgICAgcy5iaV9idWYgPSB2YWx1ZSA+PiBCdWZfc2l6ZSAtIHMuYmlfdmFsaWQ7CiAgICAgIHMuYmlfdmFsaWQgKz0gbGVuZ3RoIC0gQnVmX3NpemU7CiAgICB9IGVsc2UgewogICAgICBzLmJpX2J1ZiB8PSB2YWx1ZSA8PCBzLmJpX3ZhbGlkICYgNjU1MzU7CiAgICAgIHMuYmlfdmFsaWQgKz0gbGVuZ3RoOwogICAgfQogIH0KICBmdW5jdGlvbiBzZW5kX2NvZGUocywgYzIsIHRyZWUpIHsKICAgIHNlbmRfYml0cyhzLCB0cmVlW2MyICogMl0sIHRyZWVbYzIgKiAyICsgMV0pOwogIH0KICBmdW5jdGlvbiBiaV9yZXZlcnNlKGNvZGUsIGxlbikgewogICAgdmFyIHJlcyA9IDA7CiAgICBkbyB7CiAgICAgIHJlcyB8PSBjb2RlICYgMTsKICAgICAgY29kZSA+Pj49IDE7CiAgICAgIHJlcyA8PD0gMTsKICAgIH0gd2hpbGUgKC0tbGVuID4gMCk7CiAgICByZXR1cm4gcmVzID4+PiAxOwogIH0KICBmdW5jdGlvbiBiaV9mbHVzaChzKSB7CiAgICBpZiAocy5iaV92YWxpZCA9PT0gMTYpIHsKICAgICAgcHV0X3Nob3J0KHMsIHMuYmlfYnVmKTsKICAgICAgcy5iaV9idWYgPSAwOwogICAgICBzLmJpX3ZhbGlkID0gMDsKICAgIH0gZWxzZSBpZiAocy5iaV92YWxpZCA+PSA4KSB7CiAgICAgIHMucGVuZGluZ19idWZbcy5wZW5kaW5nKytdID0gcy5iaV9idWYgJiAyNTU7CiAgICAgIHMuYmlfYnVmID4+PSA4OwogICAgICBzLmJpX3ZhbGlkIC09IDg7CiAgICB9CiAgfQogIGZ1bmN0aW9uIGdlbl9iaXRsZW4ocywgZGVzYykgewogICAgdmFyIHRyZWUgPSBkZXNjLmR5bl90cmVlOwogICAgdmFyIG1heF9jb2RlID0gZGVzYy5tYXhfY29kZTsKICAgIHZhciBzdHJlZSA9IGRlc2Muc3RhdF9kZXNjLnN0YXRpY190cmVlOwogICAgdmFyIGhhc19zdHJlZSA9IGRlc2Muc3RhdF9kZXNjLmhhc19zdHJlZTsKICAgIHZhciBleHRyYSA9IGRlc2Muc3RhdF9kZXNjLmV4dHJhX2JpdHM7CiAgICB2YXIgYmFzZSA9IGRlc2Muc3RhdF9kZXNjLmV4dHJhX2Jhc2U7CiAgICB2YXIgbWF4X2xlbmd0aCA9IGRlc2Muc3RhdF9kZXNjLm1heF9sZW5ndGg7CiAgICB2YXIgaDsKICAgIHZhciBuLCBtOwogICAgdmFyIGJpdHM7CiAgICB2YXIgeGJpdHM7CiAgICB2YXIgZjsKICAgIHZhciBvdmVyZmxvdyA9IDA7CiAgICBmb3IgKGJpdHMgPSAwOyBiaXRzIDw9IE1BWF9CSVRTJDE7IGJpdHMrKykgewogICAgICBzLmJsX2NvdW50W2JpdHNdID0gMDsKICAgIH0KICAgIHRyZWVbcy5oZWFwW3MuaGVhcF9tYXhdICogMiArIDFdID0gMDsKICAgIGZvciAoaCA9IHMuaGVhcF9tYXggKyAxOyBoIDwgSEVBUF9TSVpFJDE7IGgrKykgewogICAgICBuID0gcy5oZWFwW2hdOwogICAgICBiaXRzID0gdHJlZVt0cmVlW24gKiAyICsgMV0gKiAyICsgMV0gKyAxOwogICAgICBpZiAoYml0cyA+IG1heF9sZW5ndGgpIHsKICAgICAgICBiaXRzID0gbWF4X2xlbmd0aDsKICAgICAgICBvdmVyZmxvdysrOwogICAgICB9CiAgICAgIHRyZWVbbiAqIDIgKyAxXSA9IGJpdHM7CiAgICAgIGlmIChuID4gbWF4X2NvZGUpIHsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICBzLmJsX2NvdW50W2JpdHNdKys7CiAgICAgIHhiaXRzID0gMDsKICAgICAgaWYgKG4gPj0gYmFzZSkgewogICAgICAgIHhiaXRzID0gZXh0cmFbbiAtIGJhc2VdOwogICAgICB9CiAgICAgIGYgPSB0cmVlW24gKiAyXTsKICAgICAgcy5vcHRfbGVuICs9IGYgKiAoYml0cyArIHhiaXRzKTsKICAgICAgaWYgKGhhc19zdHJlZSkgewogICAgICAgIHMuc3RhdGljX2xlbiArPSBmICogKHN0cmVlW24gKiAyICsgMV0gKyB4Yml0cyk7CiAgICAgIH0KICAgIH0KICAgIGlmIChvdmVyZmxvdyA9PT0gMCkgewogICAgICByZXR1cm47CiAgICB9CiAgICBkbyB7CiAgICAgIGJpdHMgPSBtYXhfbGVuZ3RoIC0gMTsKICAgICAgd2hpbGUgKHMuYmxfY291bnRbYml0c10gPT09IDApIHsKICAgICAgICBiaXRzLS07CiAgICAgIH0KICAgICAgcy5ibF9jb3VudFtiaXRzXS0tOwogICAgICBzLmJsX2NvdW50W2JpdHMgKyAxXSArPSAyOwogICAgICBzLmJsX2NvdW50W21heF9sZW5ndGhdLS07CiAgICAgIG92ZXJmbG93IC09IDI7CiAgICB9IHdoaWxlIChvdmVyZmxvdyA+IDApOwogICAgZm9yIChiaXRzID0gbWF4X2xlbmd0aDsgYml0cyAhPT0gMDsgYml0cy0tKSB7CiAgICAgIG4gPSBzLmJsX2NvdW50W2JpdHNdOwogICAgICB3aGlsZSAobiAhPT0gMCkgewogICAgICAgIG0gPSBzLmhlYXBbLS1oXTsKICAgICAgICBpZiAobSA+IG1heF9jb2RlKSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CiAgICAgICAgaWYgKHRyZWVbbSAqIDIgKyAxXSAhPT0gYml0cykgewogICAgICAgICAgcy5vcHRfbGVuICs9IChiaXRzIC0gdHJlZVttICogMiArIDFdKSAqIHRyZWVbbSAqIDJdOwogICAgICAgICAgdHJlZVttICogMiArIDFdID0gYml0czsKICAgICAgICB9CiAgICAgICAgbi0tOwogICAgICB9CiAgICB9CiAgfQogIGZ1bmN0aW9uIGdlbl9jb2Rlcyh0cmVlLCBtYXhfY29kZSwgYmxfY291bnQpIHsKICAgIHZhciBuZXh0X2NvZGUgPSBuZXcgQXJyYXkoTUFYX0JJVFMkMSArIDEpOwogICAgdmFyIGNvZGUgPSAwOwogICAgdmFyIGJpdHM7CiAgICB2YXIgbjsKICAgIGZvciAoYml0cyA9IDE7IGJpdHMgPD0gTUFYX0JJVFMkMTsgYml0cysrKSB7CiAgICAgIG5leHRfY29kZVtiaXRzXSA9IGNvZGUgPSBjb2RlICsgYmxfY291bnRbYml0cyAtIDFdIDw8IDE7CiAgICB9CiAgICBmb3IgKG4gPSAwOyBuIDw9IG1heF9jb2RlOyBuKyspIHsKICAgICAgdmFyIGxlbiA9IHRyZWVbbiAqIDIgKyAxXTsKICAgICAgaWYgKGxlbiA9PT0gMCkgewogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICAgIHRyZWVbbiAqIDJdID0gYmlfcmV2ZXJzZShuZXh0X2NvZGVbbGVuXSsrLCBsZW4pOwogICAgfQogIH0KICBmdW5jdGlvbiB0cl9zdGF0aWNfaW5pdCgpIHsKICAgIHZhciBuOwogICAgdmFyIGJpdHM7CiAgICB2YXIgbGVuZ3RoOwogICAgdmFyIGNvZGU7CiAgICB2YXIgZGlzdDI7CiAgICB2YXIgYmxfY291bnQgPSBuZXcgQXJyYXkoTUFYX0JJVFMkMSArIDEpOwogICAgbGVuZ3RoID0gMDsKICAgIGZvciAoY29kZSA9IDA7IGNvZGUgPCBMRU5HVEhfQ09ERVMkMSAtIDE7IGNvZGUrKykgewogICAgICBiYXNlX2xlbmd0aFtjb2RlXSA9IGxlbmd0aDsKICAgICAgZm9yIChuID0gMDsgbiA8IDEgPDwgZXh0cmFfbGJpdHNbY29kZV07IG4rKykgewogICAgICAgIF9sZW5ndGhfY29kZVtsZW5ndGgrK10gPSBjb2RlOwogICAgICB9CiAgICB9CiAgICBfbGVuZ3RoX2NvZGVbbGVuZ3RoIC0gMV0gPSBjb2RlOwogICAgZGlzdDIgPSAwOwogICAgZm9yIChjb2RlID0gMDsgY29kZSA8IDE2OyBjb2RlKyspIHsKICAgICAgYmFzZV9kaXN0W2NvZGVdID0gZGlzdDI7CiAgICAgIGZvciAobiA9IDA7IG4gPCAxIDw8IGV4dHJhX2RiaXRzW2NvZGVdOyBuKyspIHsKICAgICAgICBfZGlzdF9jb2RlW2Rpc3QyKytdID0gY29kZTsKICAgICAgfQogICAgfQogICAgZGlzdDIgPj49IDc7CiAgICBmb3IgKDsgY29kZSA8IERfQ09ERVMkMTsgY29kZSsrKSB7CiAgICAgIGJhc2VfZGlzdFtjb2RlXSA9IGRpc3QyIDw8IDc7CiAgICAgIGZvciAobiA9IDA7IG4gPCAxIDw8IGV4dHJhX2RiaXRzW2NvZGVdIC0gNzsgbisrKSB7CiAgICAgICAgX2Rpc3RfY29kZVsyNTYgKyBkaXN0MisrXSA9IGNvZGU7CiAgICAgIH0KICAgIH0KICAgIGZvciAoYml0cyA9IDA7IGJpdHMgPD0gTUFYX0JJVFMkMTsgYml0cysrKSB7CiAgICAgIGJsX2NvdW50W2JpdHNdID0gMDsKICAgIH0KICAgIG4gPSAwOwogICAgd2hpbGUgKG4gPD0gMTQzKSB7CiAgICAgIHN0YXRpY19sdHJlZVtuICogMiArIDFdID0gODsKICAgICAgbisrOwogICAgICBibF9jb3VudFs4XSsrOwogICAgfQogICAgd2hpbGUgKG4gPD0gMjU1KSB7CiAgICAgIHN0YXRpY19sdHJlZVtuICogMiArIDFdID0gOTsKICAgICAgbisrOwogICAgICBibF9jb3VudFs5XSsrOwogICAgfQogICAgd2hpbGUgKG4gPD0gMjc5KSB7CiAgICAgIHN0YXRpY19sdHJlZVtuICogMiArIDFdID0gNzsKICAgICAgbisrOwogICAgICBibF9jb3VudFs3XSsrOwogICAgfQogICAgd2hpbGUgKG4gPD0gMjg3KSB7CiAgICAgIHN0YXRpY19sdHJlZVtuICogMiArIDFdID0gODsKICAgICAgbisrOwogICAgICBibF9jb3VudFs4XSsrOwogICAgfQogICAgZ2VuX2NvZGVzKHN0YXRpY19sdHJlZSwgTF9DT0RFUyQxICsgMSwgYmxfY291bnQpOwogICAgZm9yIChuID0gMDsgbiA8IERfQ09ERVMkMTsgbisrKSB7CiAgICAgIHN0YXRpY19kdHJlZVtuICogMiArIDFdID0gNTsKICAgICAgc3RhdGljX2R0cmVlW24gKiAyXSA9IGJpX3JldmVyc2UobiwgNSk7CiAgICB9CiAgICBzdGF0aWNfbF9kZXNjID0gbmV3IFN0YXRpY1RyZWVEZXNjKHN0YXRpY19sdHJlZSwgZXh0cmFfbGJpdHMsIExJVEVSQUxTJDEgKyAxLCBMX0NPREVTJDEsIE1BWF9CSVRTJDEpOwogICAgc3RhdGljX2RfZGVzYyA9IG5ldyBTdGF0aWNUcmVlRGVzYyhzdGF0aWNfZHRyZWUsIGV4dHJhX2RiaXRzLCAwLCBEX0NPREVTJDEsIE1BWF9CSVRTJDEpOwogICAgc3RhdGljX2JsX2Rlc2MgPSBuZXcgU3RhdGljVHJlZURlc2MobmV3IEFycmF5KDApLCBleHRyYV9ibGJpdHMsIDAsIEJMX0NPREVTJDEsIE1BWF9CTF9CSVRTKTsKICB9CiAgZnVuY3Rpb24gaW5pdF9ibG9jayhzKSB7CiAgICB2YXIgbjsKICAgIGZvciAobiA9IDA7IG4gPCBMX0NPREVTJDE7IG4rKykgewogICAgICBzLmR5bl9sdHJlZVtuICogMl0gPSAwOwogICAgfQogICAgZm9yIChuID0gMDsgbiA8IERfQ09ERVMkMTsgbisrKSB7CiAgICAgIHMuZHluX2R0cmVlW24gKiAyXSA9IDA7CiAgICB9CiAgICBmb3IgKG4gPSAwOyBuIDwgQkxfQ09ERVMkMTsgbisrKSB7CiAgICAgIHMuYmxfdHJlZVtuICogMl0gPSAwOwogICAgfQogICAgcy5keW5fbHRyZWVbRU5EX0JMT0NLICogMl0gPSAxOwogICAgcy5vcHRfbGVuID0gcy5zdGF0aWNfbGVuID0gMDsKICAgIHMubGFzdF9saXQgPSBzLm1hdGNoZXMgPSAwOwogIH0KICBmdW5jdGlvbiBiaV93aW5kdXAocykgewogICAgaWYgKHMuYmlfdmFsaWQgPiA4KSB7CiAgICAgIHB1dF9zaG9ydChzLCBzLmJpX2J1Zik7CiAgICB9IGVsc2UgaWYgKHMuYmlfdmFsaWQgPiAwKSB7CiAgICAgIHMucGVuZGluZ19idWZbcy5wZW5kaW5nKytdID0gcy5iaV9idWY7CiAgICB9CiAgICBzLmJpX2J1ZiA9IDA7CiAgICBzLmJpX3ZhbGlkID0gMDsKICB9CiAgZnVuY3Rpb24gY29weV9ibG9jayhzLCBidWYsIGxlbiwgaGVhZGVyKSB7CiAgICBiaV93aW5kdXAocyk7CiAgICBpZiAoaGVhZGVyKSB7CiAgICAgIHB1dF9zaG9ydChzLCBsZW4pOwogICAgICBwdXRfc2hvcnQocywgfmxlbik7CiAgICB9CiAgICB1dGlscyQ2LmFycmF5U2V0KHMucGVuZGluZ19idWYsIHMud2luZG93LCBidWYsIGxlbiwgcy5wZW5kaW5nKTsKICAgIHMucGVuZGluZyArPSBsZW47CiAgfQogIGZ1bmN0aW9uIHNtYWxsZXIodHJlZSwgbiwgbSwgZGVwdGgpIHsKICAgIHZhciBfbjIgPSBuICogMjsKICAgIHZhciBfbTIgPSBtICogMjsKICAgIHJldHVybiB0cmVlW19uMl0gPCB0cmVlW19tMl0gfHwgdHJlZVtfbjJdID09PSB0cmVlW19tMl0gJiYgZGVwdGhbbl0gPD0gZGVwdGhbbV07CiAgfQogIGZ1bmN0aW9uIHBxZG93bmhlYXAocywgdHJlZSwgaykgewogICAgdmFyIHYgPSBzLmhlYXBba107CiAgICB2YXIgaiA9IGsgPDwgMTsKICAgIHdoaWxlIChqIDw9IHMuaGVhcF9sZW4pIHsKICAgICAgaWYgKGogPCBzLmhlYXBfbGVuICYmIHNtYWxsZXIodHJlZSwgcy5oZWFwW2ogKyAxXSwgcy5oZWFwW2pdLCBzLmRlcHRoKSkgewogICAgICAgIGorKzsKICAgICAgfQogICAgICBpZiAoc21hbGxlcih0cmVlLCB2LCBzLmhlYXBbal0sIHMuZGVwdGgpKSB7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgcy5oZWFwW2tdID0gcy5oZWFwW2pdOwogICAgICBrID0gajsKICAgICAgaiA8PD0gMTsKICAgIH0KICAgIHMuaGVhcFtrXSA9IHY7CiAgfQogIGZ1bmN0aW9uIGNvbXByZXNzX2Jsb2NrKHMsIGx0cmVlLCBkdHJlZSkgewogICAgdmFyIGRpc3QyOwogICAgdmFyIGxjOwogICAgdmFyIGx4ID0gMDsKICAgIHZhciBjb2RlOwogICAgdmFyIGV4dHJhOwogICAgaWYgKHMubGFzdF9saXQgIT09IDApIHsKICAgICAgZG8gewogICAgICAgIGRpc3QyID0gcy5wZW5kaW5nX2J1ZltzLmRfYnVmICsgbHggKiAyXSA8PCA4IHwgcy5wZW5kaW5nX2J1ZltzLmRfYnVmICsgbHggKiAyICsgMV07CiAgICAgICAgbGMgPSBzLnBlbmRpbmdfYnVmW3MubF9idWYgKyBseF07CiAgICAgICAgbHgrKzsKICAgICAgICBpZiAoZGlzdDIgPT09IDApIHsKICAgICAgICAgIHNlbmRfY29kZShzLCBsYywgbHRyZWUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb2RlID0gX2xlbmd0aF9jb2RlW2xjXTsKICAgICAgICAgIHNlbmRfY29kZShzLCBjb2RlICsgTElURVJBTFMkMSArIDEsIGx0cmVlKTsKICAgICAgICAgIGV4dHJhID0gZXh0cmFfbGJpdHNbY29kZV07CiAgICAgICAgICBpZiAoZXh0cmEgIT09IDApIHsKICAgICAgICAgICAgbGMgLT0gYmFzZV9sZW5ndGhbY29kZV07CiAgICAgICAgICAgIHNlbmRfYml0cyhzLCBsYywgZXh0cmEpOwogICAgICAgICAgfQogICAgICAgICAgZGlzdDItLTsKICAgICAgICAgIGNvZGUgPSBkX2NvZGUoZGlzdDIpOwogICAgICAgICAgc2VuZF9jb2RlKHMsIGNvZGUsIGR0cmVlKTsKICAgICAgICAgIGV4dHJhID0gZXh0cmFfZGJpdHNbY29kZV07CiAgICAgICAgICBpZiAoZXh0cmEgIT09IDApIHsKICAgICAgICAgICAgZGlzdDIgLT0gYmFzZV9kaXN0W2NvZGVdOwogICAgICAgICAgICBzZW5kX2JpdHMocywgZGlzdDIsIGV4dHJhKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gd2hpbGUgKGx4IDwgcy5sYXN0X2xpdCk7CiAgICB9CiAgICBzZW5kX2NvZGUocywgRU5EX0JMT0NLLCBsdHJlZSk7CiAgfQogIGZ1bmN0aW9uIGJ1aWxkX3RyZWUocywgZGVzYykgewogICAgdmFyIHRyZWUgPSBkZXNjLmR5bl90cmVlOwogICAgdmFyIHN0cmVlID0gZGVzYy5zdGF0X2Rlc2Muc3RhdGljX3RyZWU7CiAgICB2YXIgaGFzX3N0cmVlID0gZGVzYy5zdGF0X2Rlc2MuaGFzX3N0cmVlOwogICAgdmFyIGVsZW1zID0gZGVzYy5zdGF0X2Rlc2MuZWxlbXM7CiAgICB2YXIgbiwgbTsKICAgIHZhciBtYXhfY29kZSA9IC0xOwogICAgdmFyIG5vZGU7CiAgICBzLmhlYXBfbGVuID0gMDsKICAgIHMuaGVhcF9tYXggPSBIRUFQX1NJWkUkMTsKICAgIGZvciAobiA9IDA7IG4gPCBlbGVtczsgbisrKSB7CiAgICAgIGlmICh0cmVlW24gKiAyXSAhPT0gMCkgewogICAgICAgIHMuaGVhcFsrK3MuaGVhcF9sZW5dID0gbWF4X2NvZGUgPSBuOwogICAgICAgIHMuZGVwdGhbbl0gPSAwOwogICAgICB9IGVsc2UgewogICAgICAgIHRyZWVbbiAqIDIgKyAxXSA9IDA7CiAgICAgIH0KICAgIH0KICAgIHdoaWxlIChzLmhlYXBfbGVuIDwgMikgewogICAgICBub2RlID0gcy5oZWFwWysrcy5oZWFwX2xlbl0gPSBtYXhfY29kZSA8IDIgPyArK21heF9jb2RlIDogMDsKICAgICAgdHJlZVtub2RlICogMl0gPSAxOwogICAgICBzLmRlcHRoW25vZGVdID0gMDsKICAgICAgcy5vcHRfbGVuLS07CiAgICAgIGlmIChoYXNfc3RyZWUpIHsKICAgICAgICBzLnN0YXRpY19sZW4gLT0gc3RyZWVbbm9kZSAqIDIgKyAxXTsKICAgICAgfQogICAgfQogICAgZGVzYy5tYXhfY29kZSA9IG1heF9jb2RlOwogICAgZm9yIChuID0gcy5oZWFwX2xlbiA+PiAxOyBuID49IDE7IG4tLSkgewogICAgICBwcWRvd25oZWFwKHMsIHRyZWUsIG4pOwogICAgfQogICAgbm9kZSA9IGVsZW1zOwogICAgZG8gewogICAgICBuID0gcy5oZWFwWzFdOwogICAgICBzLmhlYXBbMV0gPSBzLmhlYXBbcy5oZWFwX2xlbi0tXTsKICAgICAgcHFkb3duaGVhcChzLCB0cmVlLCAxKTsKICAgICAgbSA9IHMuaGVhcFsxXTsKICAgICAgcy5oZWFwWy0tcy5oZWFwX21heF0gPSBuOwogICAgICBzLmhlYXBbLS1zLmhlYXBfbWF4XSA9IG07CiAgICAgIHRyZWVbbm9kZSAqIDJdID0gdHJlZVtuICogMl0gKyB0cmVlW20gKiAyXTsKICAgICAgcy5kZXB0aFtub2RlXSA9IChzLmRlcHRoW25dID49IHMuZGVwdGhbbV0gPyBzLmRlcHRoW25dIDogcy5kZXB0aFttXSkgKyAxOwogICAgICB0cmVlW24gKiAyICsgMV0gPSB0cmVlW20gKiAyICsgMV0gPSBub2RlOwogICAgICBzLmhlYXBbMV0gPSBub2RlKys7CiAgICAgIHBxZG93bmhlYXAocywgdHJlZSwgMSk7CiAgICB9IHdoaWxlIChzLmhlYXBfbGVuID49IDIpOwogICAgcy5oZWFwWy0tcy5oZWFwX21heF0gPSBzLmhlYXBbMV07CiAgICBnZW5fYml0bGVuKHMsIGRlc2MpOwogICAgZ2VuX2NvZGVzKHRyZWUsIG1heF9jb2RlLCBzLmJsX2NvdW50KTsKICB9CiAgZnVuY3Rpb24gc2Nhbl90cmVlKHMsIHRyZWUsIG1heF9jb2RlKSB7CiAgICB2YXIgbjsKICAgIHZhciBwcmV2bGVuID0gLTE7CiAgICB2YXIgY3VybGVuOwogICAgdmFyIG5leHRsZW4gPSB0cmVlWzAgKiAyICsgMV07CiAgICB2YXIgY291bnQgPSAwOwogICAgdmFyIG1heF9jb3VudCA9IDc7CiAgICB2YXIgbWluX2NvdW50ID0gNDsKICAgIGlmIChuZXh0bGVuID09PSAwKSB7CiAgICAgIG1heF9jb3VudCA9IDEzODsKICAgICAgbWluX2NvdW50ID0gMzsKICAgIH0KICAgIHRyZWVbKG1heF9jb2RlICsgMSkgKiAyICsgMV0gPSA2NTUzNTsKICAgIGZvciAobiA9IDA7IG4gPD0gbWF4X2NvZGU7IG4rKykgewogICAgICBjdXJsZW4gPSBuZXh0bGVuOwogICAgICBuZXh0bGVuID0gdHJlZVsobiArIDEpICogMiArIDFdOwogICAgICBpZiAoKytjb3VudCA8IG1heF9jb3VudCAmJiBjdXJsZW4gPT09IG5leHRsZW4pIHsKICAgICAgICBjb250aW51ZTsKICAgICAgfSBlbHNlIGlmIChjb3VudCA8IG1pbl9jb3VudCkgewogICAgICAgIHMuYmxfdHJlZVtjdXJsZW4gKiAyXSArPSBjb3VudDsKICAgICAgfSBlbHNlIGlmIChjdXJsZW4gIT09IDApIHsKICAgICAgICBpZiAoY3VybGVuICE9PSBwcmV2bGVuKSB7CiAgICAgICAgICBzLmJsX3RyZWVbY3VybGVuICogMl0rKzsKICAgICAgICB9CiAgICAgICAgcy5ibF90cmVlW1JFUF8zXzYgKiAyXSsrOwogICAgICB9IGVsc2UgaWYgKGNvdW50IDw9IDEwKSB7CiAgICAgICAgcy5ibF90cmVlW1JFUFpfM18xMCAqIDJdKys7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcy5ibF90cmVlW1JFUFpfMTFfMTM4ICogMl0rKzsKICAgICAgfQogICAgICBjb3VudCA9IDA7CiAgICAgIHByZXZsZW4gPSBjdXJsZW47CiAgICAgIGlmIChuZXh0bGVuID09PSAwKSB7CiAgICAgICAgbWF4X2NvdW50ID0gMTM4OwogICAgICAgIG1pbl9jb3VudCA9IDM7CiAgICAgIH0gZWxzZSBpZiAoY3VybGVuID09PSBuZXh0bGVuKSB7CiAgICAgICAgbWF4X2NvdW50ID0gNjsKICAgICAgICBtaW5fY291bnQgPSAzOwogICAgICB9IGVsc2UgewogICAgICAgIG1heF9jb3VudCA9IDc7CiAgICAgICAgbWluX2NvdW50ID0gNDsKICAgICAgfQogICAgfQogIH0KICBmdW5jdGlvbiBzZW5kX3RyZWUocywgdHJlZSwgbWF4X2NvZGUpIHsKICAgIHZhciBuOwogICAgdmFyIHByZXZsZW4gPSAtMTsKICAgIHZhciBjdXJsZW47CiAgICB2YXIgbmV4dGxlbiA9IHRyZWVbMCAqIDIgKyAxXTsKICAgIHZhciBjb3VudCA9IDA7CiAgICB2YXIgbWF4X2NvdW50ID0gNzsKICAgIHZhciBtaW5fY291bnQgPSA0OwogICAgaWYgKG5leHRsZW4gPT09IDApIHsKICAgICAgbWF4X2NvdW50ID0gMTM4OwogICAgICBtaW5fY291bnQgPSAzOwogICAgfQogICAgZm9yIChuID0gMDsgbiA8PSBtYXhfY29kZTsgbisrKSB7CiAgICAgIGN1cmxlbiA9IG5leHRsZW47CiAgICAgIG5leHRsZW4gPSB0cmVlWyhuICsgMSkgKiAyICsgMV07CiAgICAgIGlmICgrK2NvdW50IDwgbWF4X2NvdW50ICYmIGN1cmxlbiA9PT0gbmV4dGxlbikgewogICAgICAgIGNvbnRpbnVlOwogICAgICB9IGVsc2UgaWYgKGNvdW50IDwgbWluX2NvdW50KSB7CiAgICAgICAgZG8gewogICAgICAgICAgc2VuZF9jb2RlKHMsIGN1cmxlbiwgcy5ibF90cmVlKTsKICAgICAgICB9IHdoaWxlICgtLWNvdW50ICE9PSAwKTsKICAgICAgfSBlbHNlIGlmIChjdXJsZW4gIT09IDApIHsKICAgICAgICBpZiAoY3VybGVuICE9PSBwcmV2bGVuKSB7CiAgICAgICAgICBzZW5kX2NvZGUocywgY3VybGVuLCBzLmJsX3RyZWUpOwogICAgICAgICAgY291bnQtLTsKICAgICAgICB9CiAgICAgICAgc2VuZF9jb2RlKHMsIFJFUF8zXzYsIHMuYmxfdHJlZSk7CiAgICAgICAgc2VuZF9iaXRzKHMsIGNvdW50IC0gMywgMik7CiAgICAgIH0gZWxzZSBpZiAoY291bnQgPD0gMTApIHsKICAgICAgICBzZW5kX2NvZGUocywgUkVQWl8zXzEwLCBzLmJsX3RyZWUpOwogICAgICAgIHNlbmRfYml0cyhzLCBjb3VudCAtIDMsIDMpOwogICAgICB9IGVsc2UgewogICAgICAgIHNlbmRfY29kZShzLCBSRVBaXzExXzEzOCwgcy5ibF90cmVlKTsKICAgICAgICBzZW5kX2JpdHMocywgY291bnQgLSAxMSwgNyk7CiAgICAgIH0KICAgICAgY291bnQgPSAwOwogICAgICBwcmV2bGVuID0gY3VybGVuOwogICAgICBpZiAobmV4dGxlbiA9PT0gMCkgewogICAgICAgIG1heF9jb3VudCA9IDEzODsKICAgICAgICBtaW5fY291bnQgPSAzOwogICAgICB9IGVsc2UgaWYgKGN1cmxlbiA9PT0gbmV4dGxlbikgewogICAgICAgIG1heF9jb3VudCA9IDY7CiAgICAgICAgbWluX2NvdW50ID0gMzsKICAgICAgfSBlbHNlIHsKICAgICAgICBtYXhfY291bnQgPSA3OwogICAgICAgIG1pbl9jb3VudCA9IDQ7CiAgICAgIH0KICAgIH0KICB9CiAgZnVuY3Rpb24gYnVpbGRfYmxfdHJlZShzKSB7CiAgICB2YXIgbWF4X2JsaW5kZXg7CiAgICBzY2FuX3RyZWUocywgcy5keW5fbHRyZWUsIHMubF9kZXNjLm1heF9jb2RlKTsKICAgIHNjYW5fdHJlZShzLCBzLmR5bl9kdHJlZSwgcy5kX2Rlc2MubWF4X2NvZGUpOwogICAgYnVpbGRfdHJlZShzLCBzLmJsX2Rlc2MpOwogICAgZm9yIChtYXhfYmxpbmRleCA9IEJMX0NPREVTJDEgLSAxOyBtYXhfYmxpbmRleCA+PSAzOyBtYXhfYmxpbmRleC0tKSB7CiAgICAgIGlmIChzLmJsX3RyZWVbYmxfb3JkZXJbbWF4X2JsaW5kZXhdICogMiArIDFdICE9PSAwKSB7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KICAgIHMub3B0X2xlbiArPSAzICogKG1heF9ibGluZGV4ICsgMSkgKyA1ICsgNSArIDQ7CiAgICByZXR1cm4gbWF4X2JsaW5kZXg7CiAgfQogIGZ1bmN0aW9uIHNlbmRfYWxsX3RyZWVzKHMsIGxjb2RlcywgZGNvZGVzLCBibGNvZGVzKSB7CiAgICB2YXIgcmFuazI7CiAgICBzZW5kX2JpdHMocywgbGNvZGVzIC0gMjU3LCA1KTsKICAgIHNlbmRfYml0cyhzLCBkY29kZXMgLSAxLCA1KTsKICAgIHNlbmRfYml0cyhzLCBibGNvZGVzIC0gNCwgNCk7CiAgICBmb3IgKHJhbmsyID0gMDsgcmFuazIgPCBibGNvZGVzOyByYW5rMisrKSB7CiAgICAgIHNlbmRfYml0cyhzLCBzLmJsX3RyZWVbYmxfb3JkZXJbcmFuazJdICogMiArIDFdLCAzKTsKICAgIH0KICAgIHNlbmRfdHJlZShzLCBzLmR5bl9sdHJlZSwgbGNvZGVzIC0gMSk7CiAgICBzZW5kX3RyZWUocywgcy5keW5fZHRyZWUsIGRjb2RlcyAtIDEpOwogIH0KICBmdW5jdGlvbiBkZXRlY3RfZGF0YV90eXBlKHMpIHsKICAgIHZhciBibGFja19tYXNrID0gNDA5MzYyNDQ0NzsKICAgIHZhciBuOwogICAgZm9yIChuID0gMDsgbiA8PSAzMTsgbisrLCBibGFja19tYXNrID4+Pj0gMSkgewogICAgICBpZiAoYmxhY2tfbWFzayAmIDEgJiYgcy5keW5fbHRyZWVbbiAqIDJdICE9PSAwKSB7CiAgICAgICAgcmV0dXJuIFpfQklOQVJZOwogICAgICB9CiAgICB9CiAgICBpZiAocy5keW5fbHRyZWVbOSAqIDJdICE9PSAwIHx8IHMuZHluX2x0cmVlWzEwICogMl0gIT09IDAgfHwgcy5keW5fbHRyZWVbMTMgKiAyXSAhPT0gMCkgewogICAgICByZXR1cm4gWl9URVhUOwogICAgfQogICAgZm9yIChuID0gMzI7IG4gPCBMSVRFUkFMUyQxOyBuKyspIHsKICAgICAgaWYgKHMuZHluX2x0cmVlW24gKiAyXSAhPT0gMCkgewogICAgICAgIHJldHVybiBaX1RFWFQ7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBaX0JJTkFSWTsKICB9CiAgdmFyIHN0YXRpY19pbml0X2RvbmUgPSBmYWxzZTsKICBmdW5jdGlvbiBfdHJfaW5pdChzKSB7CiAgICBpZiAoIXN0YXRpY19pbml0X2RvbmUpIHsKICAgICAgdHJfc3RhdGljX2luaXQoKTsKICAgICAgc3RhdGljX2luaXRfZG9uZSA9IHRydWU7CiAgICB9CiAgICBzLmxfZGVzYyA9IG5ldyBUcmVlRGVzYyhzLmR5bl9sdHJlZSwgc3RhdGljX2xfZGVzYyk7CiAgICBzLmRfZGVzYyA9IG5ldyBUcmVlRGVzYyhzLmR5bl9kdHJlZSwgc3RhdGljX2RfZGVzYyk7CiAgICBzLmJsX2Rlc2MgPSBuZXcgVHJlZURlc2Mocy5ibF90cmVlLCBzdGF0aWNfYmxfZGVzYyk7CiAgICBzLmJpX2J1ZiA9IDA7CiAgICBzLmJpX3ZhbGlkID0gMDsKICAgIGluaXRfYmxvY2socyk7CiAgfQogIGZ1bmN0aW9uIF90cl9zdG9yZWRfYmxvY2socywgYnVmLCBzdG9yZWRfbGVuLCBsYXN0KSB7CiAgICBzZW5kX2JpdHMocywgKFNUT1JFRF9CTE9DSyA8PCAxKSArIChsYXN0ID8gMSA6IDApLCAzKTsKICAgIGNvcHlfYmxvY2socywgYnVmLCBzdG9yZWRfbGVuLCB0cnVlKTsKICB9CiAgZnVuY3Rpb24gX3RyX2FsaWduKHMpIHsKICAgIHNlbmRfYml0cyhzLCBTVEFUSUNfVFJFRVMgPDwgMSwgMyk7CiAgICBzZW5kX2NvZGUocywgRU5EX0JMT0NLLCBzdGF0aWNfbHRyZWUpOwogICAgYmlfZmx1c2gocyk7CiAgfQogIGZ1bmN0aW9uIF90cl9mbHVzaF9ibG9jayhzLCBidWYsIHN0b3JlZF9sZW4sIGxhc3QpIHsKICAgIHZhciBvcHRfbGVuYiwgc3RhdGljX2xlbmI7CiAgICB2YXIgbWF4X2JsaW5kZXggPSAwOwogICAgaWYgKHMubGV2ZWwgPiAwKSB7CiAgICAgIGlmIChzLnN0cm0uZGF0YV90eXBlID09PSBaX1VOS05PV04kMSkgewogICAgICAgIHMuc3RybS5kYXRhX3R5cGUgPSBkZXRlY3RfZGF0YV90eXBlKHMpOwogICAgICB9CiAgICAgIGJ1aWxkX3RyZWUocywgcy5sX2Rlc2MpOwogICAgICBidWlsZF90cmVlKHMsIHMuZF9kZXNjKTsKICAgICAgbWF4X2JsaW5kZXggPSBidWlsZF9ibF90cmVlKHMpOwogICAgICBvcHRfbGVuYiA9IHMub3B0X2xlbiArIDMgKyA3ID4+PiAzOwogICAgICBzdGF0aWNfbGVuYiA9IHMuc3RhdGljX2xlbiArIDMgKyA3ID4+PiAzOwogICAgICBpZiAoc3RhdGljX2xlbmIgPD0gb3B0X2xlbmIpIHsKICAgICAgICBvcHRfbGVuYiA9IHN0YXRpY19sZW5iOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBvcHRfbGVuYiA9IHN0YXRpY19sZW5iID0gc3RvcmVkX2xlbiArIDU7CiAgICB9CiAgICBpZiAoc3RvcmVkX2xlbiArIDQgPD0gb3B0X2xlbmIgJiYgYnVmICE9PSAtMSkgewogICAgICBfdHJfc3RvcmVkX2Jsb2NrKHMsIGJ1Ziwgc3RvcmVkX2xlbiwgbGFzdCk7CiAgICB9IGVsc2UgaWYgKHMuc3RyYXRlZ3kgPT09IFpfRklYRUQkMSB8fCBzdGF0aWNfbGVuYiA9PT0gb3B0X2xlbmIpIHsKICAgICAgc2VuZF9iaXRzKHMsIChTVEFUSUNfVFJFRVMgPDwgMSkgKyAobGFzdCA/IDEgOiAwKSwgMyk7CiAgICAgIGNvbXByZXNzX2Jsb2NrKHMsIHN0YXRpY19sdHJlZSwgc3RhdGljX2R0cmVlKTsKICAgIH0gZWxzZSB7CiAgICAgIHNlbmRfYml0cyhzLCAoRFlOX1RSRUVTIDw8IDEpICsgKGxhc3QgPyAxIDogMCksIDMpOwogICAgICBzZW5kX2FsbF90cmVlcyhzLCBzLmxfZGVzYy5tYXhfY29kZSArIDEsIHMuZF9kZXNjLm1heF9jb2RlICsgMSwgbWF4X2JsaW5kZXggKyAxKTsKICAgICAgY29tcHJlc3NfYmxvY2socywgcy5keW5fbHRyZWUsIHMuZHluX2R0cmVlKTsKICAgIH0KICAgIGluaXRfYmxvY2socyk7CiAgICBpZiAobGFzdCkgewogICAgICBiaV93aW5kdXAocyk7CiAgICB9CiAgfQogIGZ1bmN0aW9uIF90cl90YWxseShzLCBkaXN0MiwgbGMpIHsKICAgIHMucGVuZGluZ19idWZbcy5kX2J1ZiArIHMubGFzdF9saXQgKiAyXSA9IGRpc3QyID4+PiA4ICYgMjU1OwogICAgcy5wZW5kaW5nX2J1ZltzLmRfYnVmICsgcy5sYXN0X2xpdCAqIDIgKyAxXSA9IGRpc3QyICYgMjU1OwogICAgcy5wZW5kaW5nX2J1ZltzLmxfYnVmICsgcy5sYXN0X2xpdF0gPSBsYyAmIDI1NTsKICAgIHMubGFzdF9saXQrKzsKICAgIGlmIChkaXN0MiA9PT0gMCkgewogICAgICBzLmR5bl9sdHJlZVtsYyAqIDJdKys7CiAgICB9IGVsc2UgewogICAgICBzLm1hdGNoZXMrKzsKICAgICAgZGlzdDItLTsKICAgICAgcy5keW5fbHRyZWVbKF9sZW5ndGhfY29kZVtsY10gKyBMSVRFUkFMUyQxICsgMSkgKiAyXSsrOwogICAgICBzLmR5bl9kdHJlZVtkX2NvZGUoZGlzdDIpICogMl0rKzsKICAgIH0KICAgIHJldHVybiBzLmxhc3RfbGl0ID09PSBzLmxpdF9idWZzaXplIC0gMTsKICB9CiAgdHJlZXMkMS5fdHJfaW5pdCA9IF90cl9pbml0OwogIHRyZWVzJDEuX3RyX3N0b3JlZF9ibG9jayA9IF90cl9zdG9yZWRfYmxvY2s7CiAgdHJlZXMkMS5fdHJfZmx1c2hfYmxvY2sgPSBfdHJfZmx1c2hfYmxvY2s7CiAgdHJlZXMkMS5fdHJfdGFsbHkgPSBfdHJfdGFsbHk7CiAgdHJlZXMkMS5fdHJfYWxpZ24gPSBfdHJfYWxpZ247CiAgZnVuY3Rpb24gYWRsZXIzMiQyKGFkbGVyLCBidWYsIGxlbiwgcG9zKSB7CiAgICB2YXIgczEgPSBhZGxlciAmIDY1NTM1IHwgMCwgczIgPSBhZGxlciA+Pj4gMTYgJiA2NTUzNSB8IDAsIG4gPSAwOwogICAgd2hpbGUgKGxlbiAhPT0gMCkgewogICAgICBuID0gbGVuID4gMmUzID8gMmUzIDogbGVuOwogICAgICBsZW4gLT0gbjsKICAgICAgZG8gewogICAgICAgIHMxID0gczEgKyBidWZbcG9zKytdIHwgMDsKICAgICAgICBzMiA9IHMyICsgczEgfCAwOwogICAgICB9IHdoaWxlICgtLW4pOwogICAgICBzMSAlPSA2NTUyMTsKICAgICAgczIgJT0gNjU1MjE7CiAgICB9CiAgICByZXR1cm4gczEgfCBzMiA8PCAxNiB8IDA7CiAgfQogIHZhciBhZGxlcjMyXzEgPSBhZGxlcjMyJDI7CiAgZnVuY3Rpb24gbWFrZVRhYmxlKCkgewogICAgdmFyIGMyLCB0YWJsZSA9IFtdOwogICAgZm9yICh2YXIgbiA9IDA7IG4gPCAyNTY7IG4rKykgewogICAgICBjMiA9IG47CiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgODsgaysrKSB7CiAgICAgICAgYzIgPSBjMiAmIDEgPyAzOTg4MjkyMzg0IF4gYzIgPj4+IDEgOiBjMiA+Pj4gMTsKICAgICAgfQogICAgICB0YWJsZVtuXSA9IGMyOwogICAgfQogICAgcmV0dXJuIHRhYmxlOwogIH0KICB2YXIgY3JjVGFibGUgPSBtYWtlVGFibGUoKTsKICBmdW5jdGlvbiBjcmMzMiQyKGNyYywgYnVmLCBsZW4sIHBvcykgewogICAgdmFyIHQgPSBjcmNUYWJsZSwgZW5kID0gcG9zICsgbGVuOwogICAgY3JjIF49IC0xOwogICAgZm9yICh2YXIgaSA9IHBvczsgaSA8IGVuZDsgaSsrKSB7CiAgICAgIGNyYyA9IGNyYyA+Pj4gOCBeIHRbKGNyYyBeIGJ1ZltpXSkgJiAyNTVdOwogICAgfQogICAgcmV0dXJuIGNyYyBeIC0xOwogIH0KICB2YXIgY3JjMzJfMSA9IGNyYzMyJDI7CiAgdmFyIG1lc3NhZ2VzJDEgPSB7CiAgICAyOiAibmVlZCBkaWN0aW9uYXJ5IiwKICAgIDE6ICJzdHJlYW0gZW5kIiwKICAgIDA6ICIiLAogICAgIi0xIjogImZpbGUgZXJyb3IiLAogICAgIi0yIjogInN0cmVhbSBlcnJvciIsCiAgICAiLTMiOiAiZGF0YSBlcnJvciIsCiAgICAiLTQiOiAiaW5zdWZmaWNpZW50IG1lbW9yeSIsCiAgICAiLTUiOiAiYnVmZmVyIGVycm9yIiwKICAgICItNiI6ICJpbmNvbXBhdGlibGUgdmVyc2lvbiIKICB9OwogIHZhciB1dGlscyQ1ID0gY29tbW9uJDE7CiAgdmFyIHRyZWVzID0gdHJlZXMkMTsKICB2YXIgYWRsZXIzMiQxID0gYWRsZXIzMl8xOwogIHZhciBjcmMzMiQxID0gY3JjMzJfMTsKICB2YXIgbXNnJDIgPSBtZXNzYWdlcyQxOwogIHZhciBaX05PX0ZMVVNIJDEgPSAwOwogIHZhciBaX1BBUlRJQUxfRkxVU0ggPSAxOwogIHZhciBaX0ZVTExfRkxVU0ggPSAzOwogIHZhciBaX0ZJTklTSCQyID0gNDsKICB2YXIgWl9CTE9DSyQxID0gNTsKICB2YXIgWl9PSyQyID0gMDsKICB2YXIgWl9TVFJFQU1fRU5EJDIgPSAxOwogIHZhciBaX1NUUkVBTV9FUlJPUiQxID0gLTI7CiAgdmFyIFpfREFUQV9FUlJPUiQxID0gLTM7CiAgdmFyIFpfQlVGX0VSUk9SJDEgPSAtNTsKICB2YXIgWl9ERUZBVUxUX0NPTVBSRVNTSU9OJDEgPSAtMTsKICB2YXIgWl9GSUxURVJFRCA9IDE7CiAgdmFyIFpfSFVGRk1BTl9PTkxZID0gMjsKICB2YXIgWl9STEUgPSAzOwogIHZhciBaX0ZJWEVEID0gNDsKICB2YXIgWl9ERUZBVUxUX1NUUkFURUdZJDEgPSAwOwogIHZhciBaX1VOS05PV04gPSAyOwogIHZhciBaX0RFRkxBVEVEJDIgPSA4OwogIHZhciBNQVhfTUVNX0xFVkVMID0gOTsKICB2YXIgTUFYX1dCSVRTJDEgPSAxNTsKICB2YXIgREVGX01FTV9MRVZFTCA9IDg7CiAgdmFyIExFTkdUSF9DT0RFUyA9IDI5OwogIHZhciBMSVRFUkFMUyA9IDI1NjsKICB2YXIgTF9DT0RFUyA9IExJVEVSQUxTICsgMSArIExFTkdUSF9DT0RFUzsKICB2YXIgRF9DT0RFUyA9IDMwOwogIHZhciBCTF9DT0RFUyA9IDE5OwogIHZhciBIRUFQX1NJWkUgPSAyICogTF9DT0RFUyArIDE7CiAgdmFyIE1BWF9CSVRTID0gMTU7CiAgdmFyIE1JTl9NQVRDSCA9IDM7CiAgdmFyIE1BWF9NQVRDSCA9IDI1ODsKICB2YXIgTUlOX0xPT0tBSEVBRCA9IE1BWF9NQVRDSCArIE1JTl9NQVRDSCArIDE7CiAgdmFyIFBSRVNFVF9ESUNUID0gMzI7CiAgdmFyIElOSVRfU1RBVEUgPSA0MjsKICB2YXIgRVhUUkFfU1RBVEUgPSA2OTsKICB2YXIgTkFNRV9TVEFURSA9IDczOwogIHZhciBDT01NRU5UX1NUQVRFID0gOTE7CiAgdmFyIEhDUkNfU1RBVEUgPSAxMDM7CiAgdmFyIEJVU1lfU1RBVEUgPSAxMTM7CiAgdmFyIEZJTklTSF9TVEFURSA9IDY2NjsKICB2YXIgQlNfTkVFRF9NT1JFID0gMTsKICB2YXIgQlNfQkxPQ0tfRE9ORSA9IDI7CiAgdmFyIEJTX0ZJTklTSF9TVEFSVEVEID0gMzsKICB2YXIgQlNfRklOSVNIX0RPTkUgPSA0OwogIHZhciBPU19DT0RFID0gMzsKICBmdW5jdGlvbiBlcnIoc3RybSwgZXJyb3JDb2RlKSB7CiAgICBzdHJtLm1zZyA9IG1zZyQyW2Vycm9yQ29kZV07CiAgICByZXR1cm4gZXJyb3JDb2RlOwogIH0KICBmdW5jdGlvbiByYW5rKGYpIHsKICAgIHJldHVybiAoZiA8PCAxKSAtIChmID4gNCA/IDkgOiAwKTsKICB9CiAgZnVuY3Rpb24gemVybyhidWYpIHsKICAgIHZhciBsZW4gPSBidWYubGVuZ3RoOwogICAgd2hpbGUgKC0tbGVuID49IDApIHsKICAgICAgYnVmW2xlbl0gPSAwOwogICAgfQogIH0KICBmdW5jdGlvbiBmbHVzaF9wZW5kaW5nKHN0cm0pIHsKICAgIHZhciBzID0gc3RybS5zdGF0ZTsKICAgIHZhciBsZW4gPSBzLnBlbmRpbmc7CiAgICBpZiAobGVuID4gc3RybS5hdmFpbF9vdXQpIHsKICAgICAgbGVuID0gc3RybS5hdmFpbF9vdXQ7CiAgICB9CiAgICBpZiAobGVuID09PSAwKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHV0aWxzJDUuYXJyYXlTZXQoc3RybS5vdXRwdXQsIHMucGVuZGluZ19idWYsIHMucGVuZGluZ19vdXQsIGxlbiwgc3RybS5uZXh0X291dCk7CiAgICBzdHJtLm5leHRfb3V0ICs9IGxlbjsKICAgIHMucGVuZGluZ19vdXQgKz0gbGVuOwogICAgc3RybS50b3RhbF9vdXQgKz0gbGVuOwogICAgc3RybS5hdmFpbF9vdXQgLT0gbGVuOwogICAgcy5wZW5kaW5nIC09IGxlbjsKICAgIGlmIChzLnBlbmRpbmcgPT09IDApIHsKICAgICAgcy5wZW5kaW5nX291dCA9IDA7CiAgICB9CiAgfQogIGZ1bmN0aW9uIGZsdXNoX2Jsb2NrX29ubHkocywgbGFzdCkgewogICAgdHJlZXMuX3RyX2ZsdXNoX2Jsb2NrKHMsIHMuYmxvY2tfc3RhcnQgPj0gMCA/IHMuYmxvY2tfc3RhcnQgOiAtMSwgcy5zdHJzdGFydCAtIHMuYmxvY2tfc3RhcnQsIGxhc3QpOwogICAgcy5ibG9ja19zdGFydCA9IHMuc3Ryc3RhcnQ7CiAgICBmbHVzaF9wZW5kaW5nKHMuc3RybSk7CiAgfQogIGZ1bmN0aW9uIHB1dF9ieXRlKHMsIGIpIHsKICAgIHMucGVuZGluZ19idWZbcy5wZW5kaW5nKytdID0gYjsKICB9CiAgZnVuY3Rpb24gcHV0U2hvcnRNU0IocywgYikgewogICAgcy5wZW5kaW5nX2J1ZltzLnBlbmRpbmcrK10gPSBiID4+PiA4ICYgMjU1OwogICAgcy5wZW5kaW5nX2J1ZltzLnBlbmRpbmcrK10gPSBiICYgMjU1OwogIH0KICBmdW5jdGlvbiByZWFkX2J1ZihzdHJtLCBidWYsIHN0YXJ0LCBzaXplKSB7CiAgICB2YXIgbGVuID0gc3RybS5hdmFpbF9pbjsKICAgIGlmIChsZW4gPiBzaXplKSB7CiAgICAgIGxlbiA9IHNpemU7CiAgICB9CiAgICBpZiAobGVuID09PSAwKSB7CiAgICAgIHJldHVybiAwOwogICAgfQogICAgc3RybS5hdmFpbF9pbiAtPSBsZW47CiAgICB1dGlscyQ1LmFycmF5U2V0KGJ1Ziwgc3RybS5pbnB1dCwgc3RybS5uZXh0X2luLCBsZW4sIHN0YXJ0KTsKICAgIGlmIChzdHJtLnN0YXRlLndyYXAgPT09IDEpIHsKICAgICAgc3RybS5hZGxlciA9IGFkbGVyMzIkMShzdHJtLmFkbGVyLCBidWYsIGxlbiwgc3RhcnQpOwogICAgfSBlbHNlIGlmIChzdHJtLnN0YXRlLndyYXAgPT09IDIpIHsKICAgICAgc3RybS5hZGxlciA9IGNyYzMyJDEoc3RybS5hZGxlciwgYnVmLCBsZW4sIHN0YXJ0KTsKICAgIH0KICAgIHN0cm0ubmV4dF9pbiArPSBsZW47CiAgICBzdHJtLnRvdGFsX2luICs9IGxlbjsKICAgIHJldHVybiBsZW47CiAgfQogIGZ1bmN0aW9uIGxvbmdlc3RfbWF0Y2gocywgY3VyX21hdGNoKSB7CiAgICB2YXIgY2hhaW5fbGVuZ3RoID0gcy5tYXhfY2hhaW5fbGVuZ3RoOwogICAgdmFyIHNjYW4gPSBzLnN0cnN0YXJ0OwogICAgdmFyIG1hdGNoOwogICAgdmFyIGxlbjsKICAgIHZhciBiZXN0X2xlbiA9IHMucHJldl9sZW5ndGg7CiAgICB2YXIgbmljZV9tYXRjaCA9IHMubmljZV9tYXRjaDsKICAgIHZhciBsaW1pdCA9IHMuc3Ryc3RhcnQgPiBzLndfc2l6ZSAtIE1JTl9MT09LQUhFQUQgPyBzLnN0cnN0YXJ0IC0gKHMud19zaXplIC0gTUlOX0xPT0tBSEVBRCkgOiAwOwogICAgdmFyIF93aW4gPSBzLndpbmRvdzsKICAgIHZhciB3bWFzayA9IHMud19tYXNrOwogICAgdmFyIHByZXYgPSBzLnByZXY7CiAgICB2YXIgc3RyZW5kID0gcy5zdHJzdGFydCArIE1BWF9NQVRDSDsKICAgIHZhciBzY2FuX2VuZDEgPSBfd2luW3NjYW4gKyBiZXN0X2xlbiAtIDFdOwogICAgdmFyIHNjYW5fZW5kID0gX3dpbltzY2FuICsgYmVzdF9sZW5dOwogICAgaWYgKHMucHJldl9sZW5ndGggPj0gcy5nb29kX21hdGNoKSB7CiAgICAgIGNoYWluX2xlbmd0aCA+Pj0gMjsKICAgIH0KICAgIGlmIChuaWNlX21hdGNoID4gcy5sb29rYWhlYWQpIHsKICAgICAgbmljZV9tYXRjaCA9IHMubG9va2FoZWFkOwogICAgfQogICAgZG8gewogICAgICBtYXRjaCA9IGN1cl9tYXRjaDsKICAgICAgaWYgKF93aW5bbWF0Y2ggKyBiZXN0X2xlbl0gIT09IHNjYW5fZW5kIHx8IF93aW5bbWF0Y2ggKyBiZXN0X2xlbiAtIDFdICE9PSBzY2FuX2VuZDEgfHwgX3dpblttYXRjaF0gIT09IF93aW5bc2Nhbl0gfHwgX3dpblsrK21hdGNoXSAhPT0gX3dpbltzY2FuICsgMV0pIHsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICBzY2FuICs9IDI7CiAgICAgIG1hdGNoKys7CiAgICAgIGRvIHsKICAgICAgfSB3aGlsZSAoX3dpblsrK3NjYW5dID09PSBfd2luWysrbWF0Y2hdICYmIF93aW5bKytzY2FuXSA9PT0gX3dpblsrK21hdGNoXSAmJiBfd2luWysrc2Nhbl0gPT09IF93aW5bKyttYXRjaF0gJiYgX3dpblsrK3NjYW5dID09PSBfd2luWysrbWF0Y2hdICYmIF93aW5bKytzY2FuXSA9PT0gX3dpblsrK21hdGNoXSAmJiBfd2luWysrc2Nhbl0gPT09IF93aW5bKyttYXRjaF0gJiYgX3dpblsrK3NjYW5dID09PSBfd2luWysrbWF0Y2hdICYmIF93aW5bKytzY2FuXSA9PT0gX3dpblsrK21hdGNoXSAmJiBzY2FuIDwgc3RyZW5kKTsKICAgICAgbGVuID0gTUFYX01BVENIIC0gKHN0cmVuZCAtIHNjYW4pOwogICAgICBzY2FuID0gc3RyZW5kIC0gTUFYX01BVENIOwogICAgICBpZiAobGVuID4gYmVzdF9sZW4pIHsKICAgICAgICBzLm1hdGNoX3N0YXJ0ID0gY3VyX21hdGNoOwogICAgICAgIGJlc3RfbGVuID0gbGVuOwogICAgICAgIGlmIChsZW4gPj0gbmljZV9tYXRjaCkgewogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIHNjYW5fZW5kMSA9IF93aW5bc2NhbiArIGJlc3RfbGVuIC0gMV07CiAgICAgICAgc2Nhbl9lbmQgPSBfd2luW3NjYW4gKyBiZXN0X2xlbl07CiAgICAgIH0KICAgIH0gd2hpbGUgKChjdXJfbWF0Y2ggPSBwcmV2W2N1cl9tYXRjaCAmIHdtYXNrXSkgPiBsaW1pdCAmJiAtLWNoYWluX2xlbmd0aCAhPT0gMCk7CiAgICBpZiAoYmVzdF9sZW4gPD0gcy5sb29rYWhlYWQpIHsKICAgICAgcmV0dXJuIGJlc3RfbGVuOwogICAgfQogICAgcmV0dXJuIHMubG9va2FoZWFkOwogIH0KICBmdW5jdGlvbiBmaWxsX3dpbmRvdyhzKSB7CiAgICB2YXIgX3dfc2l6ZSA9IHMud19zaXplOwogICAgdmFyIHAsIG4sIG0sIG1vcmUsIHN0cjsKICAgIGRvIHsKICAgICAgbW9yZSA9IHMud2luZG93X3NpemUgLSBzLmxvb2thaGVhZCAtIHMuc3Ryc3RhcnQ7CiAgICAgIGlmIChzLnN0cnN0YXJ0ID49IF93X3NpemUgKyAoX3dfc2l6ZSAtIE1JTl9MT09LQUhFQUQpKSB7CiAgICAgICAgdXRpbHMkNS5hcnJheVNldChzLndpbmRvdywgcy53aW5kb3csIF93X3NpemUsIF93X3NpemUsIDApOwogICAgICAgIHMubWF0Y2hfc3RhcnQgLT0gX3dfc2l6ZTsKICAgICAgICBzLnN0cnN0YXJ0IC09IF93X3NpemU7CiAgICAgICAgcy5ibG9ja19zdGFydCAtPSBfd19zaXplOwogICAgICAgIG4gPSBzLmhhc2hfc2l6ZTsKICAgICAgICBwID0gbjsKICAgICAgICBkbyB7CiAgICAgICAgICBtID0gcy5oZWFkWy0tcF07CiAgICAgICAgICBzLmhlYWRbcF0gPSBtID49IF93X3NpemUgPyBtIC0gX3dfc2l6ZSA6IDA7CiAgICAgICAgfSB3aGlsZSAoLS1uKTsKICAgICAgICBuID0gX3dfc2l6ZTsKICAgICAgICBwID0gbjsKICAgICAgICBkbyB7CiAgICAgICAgICBtID0gcy5wcmV2Wy0tcF07CiAgICAgICAgICBzLnByZXZbcF0gPSBtID49IF93X3NpemUgPyBtIC0gX3dfc2l6ZSA6IDA7CiAgICAgICAgfSB3aGlsZSAoLS1uKTsKICAgICAgICBtb3JlICs9IF93X3NpemU7CiAgICAgIH0KICAgICAgaWYgKHMuc3RybS5hdmFpbF9pbiA9PT0gMCkgewogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIG4gPSByZWFkX2J1ZihzLnN0cm0sIHMud2luZG93LCBzLnN0cnN0YXJ0ICsgcy5sb29rYWhlYWQsIG1vcmUpOwogICAgICBzLmxvb2thaGVhZCArPSBuOwogICAgICBpZiAocy5sb29rYWhlYWQgKyBzLmluc2VydCA+PSBNSU5fTUFUQ0gpIHsKICAgICAgICBzdHIgPSBzLnN0cnN0YXJ0IC0gcy5pbnNlcnQ7CiAgICAgICAgcy5pbnNfaCA9IHMud2luZG93W3N0cl07CiAgICAgICAgcy5pbnNfaCA9IChzLmluc19oIDw8IHMuaGFzaF9zaGlmdCBeIHMud2luZG93W3N0ciArIDFdKSAmIHMuaGFzaF9tYXNrOwogICAgICAgIHdoaWxlIChzLmluc2VydCkgewogICAgICAgICAgcy5pbnNfaCA9IChzLmluc19oIDw8IHMuaGFzaF9zaGlmdCBeIHMud2luZG93W3N0ciArIE1JTl9NQVRDSCAtIDFdKSAmIHMuaGFzaF9tYXNrOwogICAgICAgICAgcy5wcmV2W3N0ciAmIHMud19tYXNrXSA9IHMuaGVhZFtzLmluc19oXTsKICAgICAgICAgIHMuaGVhZFtzLmluc19oXSA9IHN0cjsKICAgICAgICAgIHN0cisrOwogICAgICAgICAgcy5pbnNlcnQtLTsKICAgICAgICAgIGlmIChzLmxvb2thaGVhZCArIHMuaW5zZXJ0IDwgTUlOX01BVENIKSB7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSB3aGlsZSAocy5sb29rYWhlYWQgPCBNSU5fTE9PS0FIRUFEICYmIHMuc3RybS5hdmFpbF9pbiAhPT0gMCk7CiAgfQogIGZ1bmN0aW9uIGRlZmxhdGVfc3RvcmVkKHMsIGZsdXNoKSB7CiAgICB2YXIgbWF4X2Jsb2NrX3NpemUgPSA2NTUzNTsKICAgIGlmIChtYXhfYmxvY2tfc2l6ZSA+IHMucGVuZGluZ19idWZfc2l6ZSAtIDUpIHsKICAgICAgbWF4X2Jsb2NrX3NpemUgPSBzLnBlbmRpbmdfYnVmX3NpemUgLSA1OwogICAgfQogICAgZm9yICg7IDsgKSB7CiAgICAgIGlmIChzLmxvb2thaGVhZCA8PSAxKSB7CiAgICAgICAgZmlsbF93aW5kb3cocyk7CiAgICAgICAgaWYgKHMubG9va2FoZWFkID09PSAwICYmIGZsdXNoID09PSBaX05PX0ZMVVNIJDEpIHsKICAgICAgICAgIHJldHVybiBCU19ORUVEX01PUkU7CiAgICAgICAgfQogICAgICAgIGlmIChzLmxvb2thaGVhZCA9PT0gMCkgewogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICAgIHMuc3Ryc3RhcnQgKz0gcy5sb29rYWhlYWQ7CiAgICAgIHMubG9va2FoZWFkID0gMDsKICAgICAgdmFyIG1heF9zdGFydCA9IHMuYmxvY2tfc3RhcnQgKyBtYXhfYmxvY2tfc2l6ZTsKICAgICAgaWYgKHMuc3Ryc3RhcnQgPT09IDAgfHwgcy5zdHJzdGFydCA+PSBtYXhfc3RhcnQpIHsKICAgICAgICBzLmxvb2thaGVhZCA9IHMuc3Ryc3RhcnQgLSBtYXhfc3RhcnQ7CiAgICAgICAgcy5zdHJzdGFydCA9IG1heF9zdGFydDsKICAgICAgICBmbHVzaF9ibG9ja19vbmx5KHMsIGZhbHNlKTsKICAgICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgICAgcmV0dXJuIEJTX05FRURfTU9SRTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKHMuc3Ryc3RhcnQgLSBzLmJsb2NrX3N0YXJ0ID49IHMud19zaXplIC0gTUlOX0xPT0tBSEVBRCkgewogICAgICAgIGZsdXNoX2Jsb2NrX29ubHkocywgZmFsc2UpOwogICAgICAgIGlmIChzLnN0cm0uYXZhaWxfb3V0ID09PSAwKSB7CiAgICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcy5pbnNlcnQgPSAwOwogICAgaWYgKGZsdXNoID09PSBaX0ZJTklTSCQyKSB7CiAgICAgIGZsdXNoX2Jsb2NrX29ubHkocywgdHJ1ZSk7CiAgICAgIGlmIChzLnN0cm0uYXZhaWxfb3V0ID09PSAwKSB7CiAgICAgICAgcmV0dXJuIEJTX0ZJTklTSF9TVEFSVEVEOwogICAgICB9CiAgICAgIHJldHVybiBCU19GSU5JU0hfRE9ORTsKICAgIH0KICAgIGlmIChzLnN0cnN0YXJ0ID4gcy5ibG9ja19zdGFydCkgewogICAgICBmbHVzaF9ibG9ja19vbmx5KHMsIGZhbHNlKTsKICAgICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHsKICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gQlNfTkVFRF9NT1JFOwogIH0KICBmdW5jdGlvbiBkZWZsYXRlX2Zhc3QocywgZmx1c2gpIHsKICAgIHZhciBoYXNoX2hlYWQ7CiAgICB2YXIgYmZsdXNoOwogICAgZm9yICg7IDsgKSB7CiAgICAgIGlmIChzLmxvb2thaGVhZCA8IE1JTl9MT09LQUhFQUQpIHsKICAgICAgICBmaWxsX3dpbmRvdyhzKTsKICAgICAgICBpZiAocy5sb29rYWhlYWQgPCBNSU5fTE9PS0FIRUFEICYmIGZsdXNoID09PSBaX05PX0ZMVVNIJDEpIHsKICAgICAgICAgIHJldHVybiBCU19ORUVEX01PUkU7CiAgICAgICAgfQogICAgICAgIGlmIChzLmxvb2thaGVhZCA9PT0gMCkgewogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICAgIGhhc2hfaGVhZCA9IDA7CiAgICAgIGlmIChzLmxvb2thaGVhZCA+PSBNSU5fTUFUQ0gpIHsKICAgICAgICBzLmluc19oID0gKHMuaW5zX2ggPDwgcy5oYXNoX3NoaWZ0IF4gcy53aW5kb3dbcy5zdHJzdGFydCArIE1JTl9NQVRDSCAtIDFdKSAmIHMuaGFzaF9tYXNrOwogICAgICAgIGhhc2hfaGVhZCA9IHMucHJldltzLnN0cnN0YXJ0ICYgcy53X21hc2tdID0gcy5oZWFkW3MuaW5zX2hdOwogICAgICAgIHMuaGVhZFtzLmluc19oXSA9IHMuc3Ryc3RhcnQ7CiAgICAgIH0KICAgICAgaWYgKGhhc2hfaGVhZCAhPT0gMCAmJiBzLnN0cnN0YXJ0IC0gaGFzaF9oZWFkIDw9IHMud19zaXplIC0gTUlOX0xPT0tBSEVBRCkgewogICAgICAgIHMubWF0Y2hfbGVuZ3RoID0gbG9uZ2VzdF9tYXRjaChzLCBoYXNoX2hlYWQpOwogICAgICB9CiAgICAgIGlmIChzLm1hdGNoX2xlbmd0aCA+PSBNSU5fTUFUQ0gpIHsKICAgICAgICBiZmx1c2ggPSB0cmVlcy5fdHJfdGFsbHkocywgcy5zdHJzdGFydCAtIHMubWF0Y2hfc3RhcnQsIHMubWF0Y2hfbGVuZ3RoIC0gTUlOX01BVENIKTsKICAgICAgICBzLmxvb2thaGVhZCAtPSBzLm1hdGNoX2xlbmd0aDsKICAgICAgICBpZiAocy5tYXRjaF9sZW5ndGggPD0gcy5tYXhfbGF6eV9tYXRjaCAmJiBzLmxvb2thaGVhZCA+PSBNSU5fTUFUQ0gpIHsKICAgICAgICAgIHMubWF0Y2hfbGVuZ3RoLS07CiAgICAgICAgICBkbyB7CiAgICAgICAgICAgIHMuc3Ryc3RhcnQrKzsKICAgICAgICAgICAgcy5pbnNfaCA9IChzLmluc19oIDw8IHMuaGFzaF9zaGlmdCBeIHMud2luZG93W3Muc3Ryc3RhcnQgKyBNSU5fTUFUQ0ggLSAxXSkgJiBzLmhhc2hfbWFzazsKICAgICAgICAgICAgaGFzaF9oZWFkID0gcy5wcmV2W3Muc3Ryc3RhcnQgJiBzLndfbWFza10gPSBzLmhlYWRbcy5pbnNfaF07CiAgICAgICAgICAgIHMuaGVhZFtzLmluc19oXSA9IHMuc3Ryc3RhcnQ7CiAgICAgICAgICB9IHdoaWxlICgtLXMubWF0Y2hfbGVuZ3RoICE9PSAwKTsKICAgICAgICAgIHMuc3Ryc3RhcnQrKzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcy5zdHJzdGFydCArPSBzLm1hdGNoX2xlbmd0aDsKICAgICAgICAgIHMubWF0Y2hfbGVuZ3RoID0gMDsKICAgICAgICAgIHMuaW5zX2ggPSBzLndpbmRvd1tzLnN0cnN0YXJ0XTsKICAgICAgICAgIHMuaW5zX2ggPSAocy5pbnNfaCA8PCBzLmhhc2hfc2hpZnQgXiBzLndpbmRvd1tzLnN0cnN0YXJ0ICsgMV0pICYgcy5oYXNoX21hc2s7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGJmbHVzaCA9IHRyZWVzLl90cl90YWxseShzLCAwLCBzLndpbmRvd1tzLnN0cnN0YXJ0XSk7CiAgICAgICAgcy5sb29rYWhlYWQtLTsKICAgICAgICBzLnN0cnN0YXJ0Kys7CiAgICAgIH0KICAgICAgaWYgKGJmbHVzaCkgewogICAgICAgIGZsdXNoX2Jsb2NrX29ubHkocywgZmFsc2UpOwogICAgICAgIGlmIChzLnN0cm0uYXZhaWxfb3V0ID09PSAwKSB7CiAgICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcy5pbnNlcnQgPSBzLnN0cnN0YXJ0IDwgTUlOX01BVENIIC0gMSA/IHMuc3Ryc3RhcnQgOiBNSU5fTUFUQ0ggLSAxOwogICAgaWYgKGZsdXNoID09PSBaX0ZJTklTSCQyKSB7CiAgICAgIGZsdXNoX2Jsb2NrX29ubHkocywgdHJ1ZSk7CiAgICAgIGlmIChzLnN0cm0uYXZhaWxfb3V0ID09PSAwKSB7CiAgICAgICAgcmV0dXJuIEJTX0ZJTklTSF9TVEFSVEVEOwogICAgICB9CiAgICAgIHJldHVybiBCU19GSU5JU0hfRE9ORTsKICAgIH0KICAgIGlmIChzLmxhc3RfbGl0KSB7CiAgICAgIGZsdXNoX2Jsb2NrX29ubHkocywgZmFsc2UpOwogICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgIHJldHVybiBCU19ORUVEX01PUkU7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBCU19CTE9DS19ET05FOwogIH0KICBmdW5jdGlvbiBkZWZsYXRlX3Nsb3cocywgZmx1c2gpIHsKICAgIHZhciBoYXNoX2hlYWQ7CiAgICB2YXIgYmZsdXNoOwogICAgdmFyIG1heF9pbnNlcnQ7CiAgICBmb3IgKDsgOyApIHsKICAgICAgaWYgKHMubG9va2FoZWFkIDwgTUlOX0xPT0tBSEVBRCkgewogICAgICAgIGZpbGxfd2luZG93KHMpOwogICAgICAgIGlmIChzLmxvb2thaGVhZCA8IE1JTl9MT09LQUhFQUQgJiYgZmx1c2ggPT09IFpfTk9fRkxVU0gkMSkgewogICAgICAgICAgcmV0dXJuIEJTX05FRURfTU9SRTsKICAgICAgICB9CiAgICAgICAgaWYgKHMubG9va2FoZWFkID09PSAwKSB7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KICAgICAgaGFzaF9oZWFkID0gMDsKICAgICAgaWYgKHMubG9va2FoZWFkID49IE1JTl9NQVRDSCkgewogICAgICAgIHMuaW5zX2ggPSAocy5pbnNfaCA8PCBzLmhhc2hfc2hpZnQgXiBzLndpbmRvd1tzLnN0cnN0YXJ0ICsgTUlOX01BVENIIC0gMV0pICYgcy5oYXNoX21hc2s7CiAgICAgICAgaGFzaF9oZWFkID0gcy5wcmV2W3Muc3Ryc3RhcnQgJiBzLndfbWFza10gPSBzLmhlYWRbcy5pbnNfaF07CiAgICAgICAgcy5oZWFkW3MuaW5zX2hdID0gcy5zdHJzdGFydDsKICAgICAgfQogICAgICBzLnByZXZfbGVuZ3RoID0gcy5tYXRjaF9sZW5ndGg7CiAgICAgIHMucHJldl9tYXRjaCA9IHMubWF0Y2hfc3RhcnQ7CiAgICAgIHMubWF0Y2hfbGVuZ3RoID0gTUlOX01BVENIIC0gMTsKICAgICAgaWYgKGhhc2hfaGVhZCAhPT0gMCAmJiBzLnByZXZfbGVuZ3RoIDwgcy5tYXhfbGF6eV9tYXRjaCAmJiBzLnN0cnN0YXJ0IC0gaGFzaF9oZWFkIDw9IHMud19zaXplIC0gTUlOX0xPT0tBSEVBRCkgewogICAgICAgIHMubWF0Y2hfbGVuZ3RoID0gbG9uZ2VzdF9tYXRjaChzLCBoYXNoX2hlYWQpOwogICAgICAgIGlmIChzLm1hdGNoX2xlbmd0aCA8PSA1ICYmIChzLnN0cmF0ZWd5ID09PSBaX0ZJTFRFUkVEIHx8IHMubWF0Y2hfbGVuZ3RoID09PSBNSU5fTUFUQ0ggJiYgcy5zdHJzdGFydCAtIHMubWF0Y2hfc3RhcnQgPiA0MDk2KSkgewogICAgICAgICAgcy5tYXRjaF9sZW5ndGggPSBNSU5fTUFUQ0ggLSAxOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAocy5wcmV2X2xlbmd0aCA+PSBNSU5fTUFUQ0ggJiYgcy5tYXRjaF9sZW5ndGggPD0gcy5wcmV2X2xlbmd0aCkgewogICAgICAgIG1heF9pbnNlcnQgPSBzLnN0cnN0YXJ0ICsgcy5sb29rYWhlYWQgLSBNSU5fTUFUQ0g7CiAgICAgICAgYmZsdXNoID0gdHJlZXMuX3RyX3RhbGx5KHMsIHMuc3Ryc3RhcnQgLSAxIC0gcy5wcmV2X21hdGNoLCBzLnByZXZfbGVuZ3RoIC0gTUlOX01BVENIKTsKICAgICAgICBzLmxvb2thaGVhZCAtPSBzLnByZXZfbGVuZ3RoIC0gMTsKICAgICAgICBzLnByZXZfbGVuZ3RoIC09IDI7CiAgICAgICAgZG8gewogICAgICAgICAgaWYgKCsrcy5zdHJzdGFydCA8PSBtYXhfaW5zZXJ0KSB7CiAgICAgICAgICAgIHMuaW5zX2ggPSAocy5pbnNfaCA8PCBzLmhhc2hfc2hpZnQgXiBzLndpbmRvd1tzLnN0cnN0YXJ0ICsgTUlOX01BVENIIC0gMV0pICYgcy5oYXNoX21hc2s7CiAgICAgICAgICAgIGhhc2hfaGVhZCA9IHMucHJldltzLnN0cnN0YXJ0ICYgcy53X21hc2tdID0gcy5oZWFkW3MuaW5zX2hdOwogICAgICAgICAgICBzLmhlYWRbcy5pbnNfaF0gPSBzLnN0cnN0YXJ0OwogICAgICAgICAgfQogICAgICAgIH0gd2hpbGUgKC0tcy5wcmV2X2xlbmd0aCAhPT0gMCk7CiAgICAgICAgcy5tYXRjaF9hdmFpbGFibGUgPSAwOwogICAgICAgIHMubWF0Y2hfbGVuZ3RoID0gTUlOX01BVENIIC0gMTsKICAgICAgICBzLnN0cnN0YXJ0Kys7CiAgICAgICAgaWYgKGJmbHVzaCkgewogICAgICAgICAgZmx1c2hfYmxvY2tfb25seShzLCBmYWxzZSk7CiAgICAgICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChzLm1hdGNoX2F2YWlsYWJsZSkgewogICAgICAgIGJmbHVzaCA9IHRyZWVzLl90cl90YWxseShzLCAwLCBzLndpbmRvd1tzLnN0cnN0YXJ0IC0gMV0pOwogICAgICAgIGlmIChiZmx1c2gpIHsKICAgICAgICAgIGZsdXNoX2Jsb2NrX29ubHkocywgZmFsc2UpOwogICAgICAgIH0KICAgICAgICBzLnN0cnN0YXJ0Kys7CiAgICAgICAgcy5sb29rYWhlYWQtLTsKICAgICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgICAgcmV0dXJuIEJTX05FRURfTU9SRTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcy5tYXRjaF9hdmFpbGFibGUgPSAxOwogICAgICAgIHMuc3Ryc3RhcnQrKzsKICAgICAgICBzLmxvb2thaGVhZC0tOwogICAgICB9CiAgICB9CiAgICBpZiAocy5tYXRjaF9hdmFpbGFibGUpIHsKICAgICAgYmZsdXNoID0gdHJlZXMuX3RyX3RhbGx5KHMsIDAsIHMud2luZG93W3Muc3Ryc3RhcnQgLSAxXSk7CiAgICAgIHMubWF0Y2hfYXZhaWxhYmxlID0gMDsKICAgIH0KICAgIHMuaW5zZXJ0ID0gcy5zdHJzdGFydCA8IE1JTl9NQVRDSCAtIDEgPyBzLnN0cnN0YXJ0IDogTUlOX01BVENIIC0gMTsKICAgIGlmIChmbHVzaCA9PT0gWl9GSU5JU0gkMikgewogICAgICBmbHVzaF9ibG9ja19vbmx5KHMsIHRydWUpOwogICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgIHJldHVybiBCU19GSU5JU0hfU1RBUlRFRDsKICAgICAgfQogICAgICByZXR1cm4gQlNfRklOSVNIX0RPTkU7CiAgICB9CiAgICBpZiAocy5sYXN0X2xpdCkgewogICAgICBmbHVzaF9ibG9ja19vbmx5KHMsIGZhbHNlKTsKICAgICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHsKICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gQlNfQkxPQ0tfRE9ORTsKICB9CiAgZnVuY3Rpb24gZGVmbGF0ZV9ybGUocywgZmx1c2gpIHsKICAgIHZhciBiZmx1c2g7CiAgICB2YXIgcHJldjsKICAgIHZhciBzY2FuLCBzdHJlbmQ7CiAgICB2YXIgX3dpbiA9IHMud2luZG93OwogICAgZm9yICg7IDsgKSB7CiAgICAgIGlmIChzLmxvb2thaGVhZCA8PSBNQVhfTUFUQ0gpIHsKICAgICAgICBmaWxsX3dpbmRvdyhzKTsKICAgICAgICBpZiAocy5sb29rYWhlYWQgPD0gTUFYX01BVENIICYmIGZsdXNoID09PSBaX05PX0ZMVVNIJDEpIHsKICAgICAgICAgIHJldHVybiBCU19ORUVEX01PUkU7CiAgICAgICAgfQogICAgICAgIGlmIChzLmxvb2thaGVhZCA9PT0gMCkgewogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICAgIHMubWF0Y2hfbGVuZ3RoID0gMDsKICAgICAgaWYgKHMubG9va2FoZWFkID49IE1JTl9NQVRDSCAmJiBzLnN0cnN0YXJ0ID4gMCkgewogICAgICAgIHNjYW4gPSBzLnN0cnN0YXJ0IC0gMTsKICAgICAgICBwcmV2ID0gX3dpbltzY2FuXTsKICAgICAgICBpZiAocHJldiA9PT0gX3dpblsrK3NjYW5dICYmIHByZXYgPT09IF93aW5bKytzY2FuXSAmJiBwcmV2ID09PSBfd2luWysrc2Nhbl0pIHsKICAgICAgICAgIHN0cmVuZCA9IHMuc3Ryc3RhcnQgKyBNQVhfTUFUQ0g7CiAgICAgICAgICBkbyB7CiAgICAgICAgICB9IHdoaWxlIChwcmV2ID09PSBfd2luWysrc2Nhbl0gJiYgcHJldiA9PT0gX3dpblsrK3NjYW5dICYmIHByZXYgPT09IF93aW5bKytzY2FuXSAmJiBwcmV2ID09PSBfd2luWysrc2Nhbl0gJiYgcHJldiA9PT0gX3dpblsrK3NjYW5dICYmIHByZXYgPT09IF93aW5bKytzY2FuXSAmJiBwcmV2ID09PSBfd2luWysrc2Nhbl0gJiYgcHJldiA9PT0gX3dpblsrK3NjYW5dICYmIHNjYW4gPCBzdHJlbmQpOwogICAgICAgICAgcy5tYXRjaF9sZW5ndGggPSBNQVhfTUFUQ0ggLSAoc3RyZW5kIC0gc2Nhbik7CiAgICAgICAgICBpZiAocy5tYXRjaF9sZW5ndGggPiBzLmxvb2thaGVhZCkgewogICAgICAgICAgICBzLm1hdGNoX2xlbmd0aCA9IHMubG9va2FoZWFkOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBpZiAocy5tYXRjaF9sZW5ndGggPj0gTUlOX01BVENIKSB7CiAgICAgICAgYmZsdXNoID0gdHJlZXMuX3RyX3RhbGx5KHMsIDEsIHMubWF0Y2hfbGVuZ3RoIC0gTUlOX01BVENIKTsKICAgICAgICBzLmxvb2thaGVhZCAtPSBzLm1hdGNoX2xlbmd0aDsKICAgICAgICBzLnN0cnN0YXJ0ICs9IHMubWF0Y2hfbGVuZ3RoOwogICAgICAgIHMubWF0Y2hfbGVuZ3RoID0gMDsKICAgICAgfSBlbHNlIHsKICAgICAgICBiZmx1c2ggPSB0cmVlcy5fdHJfdGFsbHkocywgMCwgcy53aW5kb3dbcy5zdHJzdGFydF0pOwogICAgICAgIHMubG9va2FoZWFkLS07CiAgICAgICAgcy5zdHJzdGFydCsrOwogICAgICB9CiAgICAgIGlmIChiZmx1c2gpIHsKICAgICAgICBmbHVzaF9ibG9ja19vbmx5KHMsIGZhbHNlKTsKICAgICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgICAgcmV0dXJuIEJTX05FRURfTU9SRTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHMuaW5zZXJ0ID0gMDsKICAgIGlmIChmbHVzaCA9PT0gWl9GSU5JU0gkMikgewogICAgICBmbHVzaF9ibG9ja19vbmx5KHMsIHRydWUpOwogICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgIHJldHVybiBCU19GSU5JU0hfU1RBUlRFRDsKICAgICAgfQogICAgICByZXR1cm4gQlNfRklOSVNIX0RPTkU7CiAgICB9CiAgICBpZiAocy5sYXN0X2xpdCkgewogICAgICBmbHVzaF9ibG9ja19vbmx5KHMsIGZhbHNlKTsKICAgICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHsKICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gQlNfQkxPQ0tfRE9ORTsKICB9CiAgZnVuY3Rpb24gZGVmbGF0ZV9odWZmKHMsIGZsdXNoKSB7CiAgICB2YXIgYmZsdXNoOwogICAgZm9yICg7IDsgKSB7CiAgICAgIGlmIChzLmxvb2thaGVhZCA9PT0gMCkgewogICAgICAgIGZpbGxfd2luZG93KHMpOwogICAgICAgIGlmIChzLmxvb2thaGVhZCA9PT0gMCkgewogICAgICAgICAgaWYgKGZsdXNoID09PSBaX05PX0ZMVVNIJDEpIHsKICAgICAgICAgICAgcmV0dXJuIEJTX05FRURfTU9SRTsKICAgICAgICAgIH0KICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgICBzLm1hdGNoX2xlbmd0aCA9IDA7CiAgICAgIGJmbHVzaCA9IHRyZWVzLl90cl90YWxseShzLCAwLCBzLndpbmRvd1tzLnN0cnN0YXJ0XSk7CiAgICAgIHMubG9va2FoZWFkLS07CiAgICAgIHMuc3Ryc3RhcnQrKzsKICAgICAgaWYgKGJmbHVzaCkgewogICAgICAgIGZsdXNoX2Jsb2NrX29ubHkocywgZmFsc2UpOwogICAgICAgIGlmIChzLnN0cm0uYXZhaWxfb3V0ID09PSAwKSB7CiAgICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcy5pbnNlcnQgPSAwOwogICAgaWYgKGZsdXNoID09PSBaX0ZJTklTSCQyKSB7CiAgICAgIGZsdXNoX2Jsb2NrX29ubHkocywgdHJ1ZSk7CiAgICAgIGlmIChzLnN0cm0uYXZhaWxfb3V0ID09PSAwKSB7CiAgICAgICAgcmV0dXJuIEJTX0ZJTklTSF9TVEFSVEVEOwogICAgICB9CiAgICAgIHJldHVybiBCU19GSU5JU0hfRE9ORTsKICAgIH0KICAgIGlmIChzLmxhc3RfbGl0KSB7CiAgICAgIGZsdXNoX2Jsb2NrX29ubHkocywgZmFsc2UpOwogICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgIHJldHVybiBCU19ORUVEX01PUkU7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBCU19CTE9DS19ET05FOwogIH0KICBmdW5jdGlvbiBDb25maWcoZ29vZF9sZW5ndGgsIG1heF9sYXp5LCBuaWNlX2xlbmd0aCwgbWF4X2NoYWluLCBmdW5jKSB7CiAgICB0aGlzLmdvb2RfbGVuZ3RoID0gZ29vZF9sZW5ndGg7CiAgICB0aGlzLm1heF9sYXp5ID0gbWF4X2xhenk7CiAgICB0aGlzLm5pY2VfbGVuZ3RoID0gbmljZV9sZW5ndGg7CiAgICB0aGlzLm1heF9jaGFpbiA9IG1heF9jaGFpbjsKICAgIHRoaXMuZnVuYyA9IGZ1bmM7CiAgfQogIHZhciBjb25maWd1cmF0aW9uX3RhYmxlOwogIGNvbmZpZ3VyYXRpb25fdGFibGUgPSBbCiAgICBuZXcgQ29uZmlnKDAsIDAsIDAsIDAsIGRlZmxhdGVfc3RvcmVkKSwKICAgIG5ldyBDb25maWcoNCwgNCwgOCwgNCwgZGVmbGF0ZV9mYXN0KSwKICAgIG5ldyBDb25maWcoNCwgNSwgMTYsIDgsIGRlZmxhdGVfZmFzdCksCiAgICBuZXcgQ29uZmlnKDQsIDYsIDMyLCAzMiwgZGVmbGF0ZV9mYXN0KSwKICAgIG5ldyBDb25maWcoNCwgNCwgMTYsIDE2LCBkZWZsYXRlX3Nsb3cpLAogICAgbmV3IENvbmZpZyg4LCAxNiwgMzIsIDMyLCBkZWZsYXRlX3Nsb3cpLAogICAgbmV3IENvbmZpZyg4LCAxNiwgMTI4LCAxMjgsIGRlZmxhdGVfc2xvdyksCiAgICBuZXcgQ29uZmlnKDgsIDMyLCAxMjgsIDI1NiwgZGVmbGF0ZV9zbG93KSwKICAgIG5ldyBDb25maWcoMzIsIDEyOCwgMjU4LCAxMDI0LCBkZWZsYXRlX3Nsb3cpLAogICAgbmV3IENvbmZpZygzMiwgMjU4LCAyNTgsIDQwOTYsIGRlZmxhdGVfc2xvdykKICBdOwogIGZ1bmN0aW9uIGxtX2luaXQocykgewogICAgcy53aW5kb3dfc2l6ZSA9IDIgKiBzLndfc2l6ZTsKICAgIHplcm8ocy5oZWFkKTsKICAgIHMubWF4X2xhenlfbWF0Y2ggPSBjb25maWd1cmF0aW9uX3RhYmxlW3MubGV2ZWxdLm1heF9sYXp5OwogICAgcy5nb29kX21hdGNoID0gY29uZmlndXJhdGlvbl90YWJsZVtzLmxldmVsXS5nb29kX2xlbmd0aDsKICAgIHMubmljZV9tYXRjaCA9IGNvbmZpZ3VyYXRpb25fdGFibGVbcy5sZXZlbF0ubmljZV9sZW5ndGg7CiAgICBzLm1heF9jaGFpbl9sZW5ndGggPSBjb25maWd1cmF0aW9uX3RhYmxlW3MubGV2ZWxdLm1heF9jaGFpbjsKICAgIHMuc3Ryc3RhcnQgPSAwOwogICAgcy5ibG9ja19zdGFydCA9IDA7CiAgICBzLmxvb2thaGVhZCA9IDA7CiAgICBzLmluc2VydCA9IDA7CiAgICBzLm1hdGNoX2xlbmd0aCA9IHMucHJldl9sZW5ndGggPSBNSU5fTUFUQ0ggLSAxOwogICAgcy5tYXRjaF9hdmFpbGFibGUgPSAwOwogICAgcy5pbnNfaCA9IDA7CiAgfQogIGZ1bmN0aW9uIERlZmxhdGVTdGF0ZSgpIHsKICAgIHRoaXMuc3RybSA9IG51bGw7CiAgICB0aGlzLnN0YXR1cyA9IDA7CiAgICB0aGlzLnBlbmRpbmdfYnVmID0gbnVsbDsKICAgIHRoaXMucGVuZGluZ19idWZfc2l6ZSA9IDA7CiAgICB0aGlzLnBlbmRpbmdfb3V0ID0gMDsKICAgIHRoaXMucGVuZGluZyA9IDA7CiAgICB0aGlzLndyYXAgPSAwOwogICAgdGhpcy5nemhlYWQgPSBudWxsOwogICAgdGhpcy5nemluZGV4ID0gMDsKICAgIHRoaXMubWV0aG9kID0gWl9ERUZMQVRFRCQyOwogICAgdGhpcy5sYXN0X2ZsdXNoID0gLTE7CiAgICB0aGlzLndfc2l6ZSA9IDA7CiAgICB0aGlzLndfYml0cyA9IDA7CiAgICB0aGlzLndfbWFzayA9IDA7CiAgICB0aGlzLndpbmRvdyA9IG51bGw7CiAgICB0aGlzLndpbmRvd19zaXplID0gMDsKICAgIHRoaXMucHJldiA9IG51bGw7CiAgICB0aGlzLmhlYWQgPSBudWxsOwogICAgdGhpcy5pbnNfaCA9IDA7CiAgICB0aGlzLmhhc2hfc2l6ZSA9IDA7CiAgICB0aGlzLmhhc2hfYml0cyA9IDA7CiAgICB0aGlzLmhhc2hfbWFzayA9IDA7CiAgICB0aGlzLmhhc2hfc2hpZnQgPSAwOwogICAgdGhpcy5ibG9ja19zdGFydCA9IDA7CiAgICB0aGlzLm1hdGNoX2xlbmd0aCA9IDA7CiAgICB0aGlzLnByZXZfbWF0Y2ggPSAwOwogICAgdGhpcy5tYXRjaF9hdmFpbGFibGUgPSAwOwogICAgdGhpcy5zdHJzdGFydCA9IDA7CiAgICB0aGlzLm1hdGNoX3N0YXJ0ID0gMDsKICAgIHRoaXMubG9va2FoZWFkID0gMDsKICAgIHRoaXMucHJldl9sZW5ndGggPSAwOwogICAgdGhpcy5tYXhfY2hhaW5fbGVuZ3RoID0gMDsKICAgIHRoaXMubWF4X2xhenlfbWF0Y2ggPSAwOwogICAgdGhpcy5sZXZlbCA9IDA7CiAgICB0aGlzLnN0cmF0ZWd5ID0gMDsKICAgIHRoaXMuZ29vZF9tYXRjaCA9IDA7CiAgICB0aGlzLm5pY2VfbWF0Y2ggPSAwOwogICAgdGhpcy5keW5fbHRyZWUgPSBuZXcgdXRpbHMkNS5CdWYxNihIRUFQX1NJWkUgKiAyKTsKICAgIHRoaXMuZHluX2R0cmVlID0gbmV3IHV0aWxzJDUuQnVmMTYoKDIgKiBEX0NPREVTICsgMSkgKiAyKTsKICAgIHRoaXMuYmxfdHJlZSA9IG5ldyB1dGlscyQ1LkJ1ZjE2KCgyICogQkxfQ09ERVMgKyAxKSAqIDIpOwogICAgemVybyh0aGlzLmR5bl9sdHJlZSk7CiAgICB6ZXJvKHRoaXMuZHluX2R0cmVlKTsKICAgIHplcm8odGhpcy5ibF90cmVlKTsKICAgIHRoaXMubF9kZXNjID0gbnVsbDsKICAgIHRoaXMuZF9kZXNjID0gbnVsbDsKICAgIHRoaXMuYmxfZGVzYyA9IG51bGw7CiAgICB0aGlzLmJsX2NvdW50ID0gbmV3IHV0aWxzJDUuQnVmMTYoTUFYX0JJVFMgKyAxKTsKICAgIHRoaXMuaGVhcCA9IG5ldyB1dGlscyQ1LkJ1ZjE2KDIgKiBMX0NPREVTICsgMSk7CiAgICB6ZXJvKHRoaXMuaGVhcCk7CiAgICB0aGlzLmhlYXBfbGVuID0gMDsKICAgIHRoaXMuaGVhcF9tYXggPSAwOwogICAgdGhpcy5kZXB0aCA9IG5ldyB1dGlscyQ1LkJ1ZjE2KDIgKiBMX0NPREVTICsgMSk7CiAgICB6ZXJvKHRoaXMuZGVwdGgpOwogICAgdGhpcy5sX2J1ZiA9IDA7CiAgICB0aGlzLmxpdF9idWZzaXplID0gMDsKICAgIHRoaXMubGFzdF9saXQgPSAwOwogICAgdGhpcy5kX2J1ZiA9IDA7CiAgICB0aGlzLm9wdF9sZW4gPSAwOwogICAgdGhpcy5zdGF0aWNfbGVuID0gMDsKICAgIHRoaXMubWF0Y2hlcyA9IDA7CiAgICB0aGlzLmluc2VydCA9IDA7CiAgICB0aGlzLmJpX2J1ZiA9IDA7CiAgICB0aGlzLmJpX3ZhbGlkID0gMDsKICB9CiAgZnVuY3Rpb24gZGVmbGF0ZVJlc2V0S2VlcChzdHJtKSB7CiAgICB2YXIgczsKICAgIGlmICghc3RybSB8fCAhc3RybS5zdGF0ZSkgewogICAgICByZXR1cm4gZXJyKHN0cm0sIFpfU1RSRUFNX0VSUk9SJDEpOwogICAgfQogICAgc3RybS50b3RhbF9pbiA9IHN0cm0udG90YWxfb3V0ID0gMDsKICAgIHN0cm0uZGF0YV90eXBlID0gWl9VTktOT1dOOwogICAgcyA9IHN0cm0uc3RhdGU7CiAgICBzLnBlbmRpbmcgPSAwOwogICAgcy5wZW5kaW5nX291dCA9IDA7CiAgICBpZiAocy53cmFwIDwgMCkgewogICAgICBzLndyYXAgPSAtcy53cmFwOwogICAgfQogICAgcy5zdGF0dXMgPSBzLndyYXAgPyBJTklUX1NUQVRFIDogQlVTWV9TVEFURTsKICAgIHN0cm0uYWRsZXIgPSBzLndyYXAgPT09IDIgPyAwIDogMTsKICAgIHMubGFzdF9mbHVzaCA9IFpfTk9fRkxVU0gkMTsKICAgIHRyZWVzLl90cl9pbml0KHMpOwogICAgcmV0dXJuIFpfT0skMjsKICB9CiAgZnVuY3Rpb24gZGVmbGF0ZVJlc2V0KHN0cm0pIHsKICAgIHZhciByZXQgPSBkZWZsYXRlUmVzZXRLZWVwKHN0cm0pOwogICAgaWYgKHJldCA9PT0gWl9PSyQyKSB7CiAgICAgIGxtX2luaXQoc3RybS5zdGF0ZSk7CiAgICB9CiAgICByZXR1cm4gcmV0OwogIH0KICBmdW5jdGlvbiBkZWZsYXRlU2V0SGVhZGVyKHN0cm0sIGhlYWQpIHsKICAgIGlmICghc3RybSB8fCAhc3RybS5zdGF0ZSkgewogICAgICByZXR1cm4gWl9TVFJFQU1fRVJST1IkMTsKICAgIH0KICAgIGlmIChzdHJtLnN0YXRlLndyYXAgIT09IDIpIHsKICAgICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SJDE7CiAgICB9CiAgICBzdHJtLnN0YXRlLmd6aGVhZCA9IGhlYWQ7CiAgICByZXR1cm4gWl9PSyQyOwogIH0KICBmdW5jdGlvbiBkZWZsYXRlSW5pdDIoc3RybSwgbGV2ZWwsIG1ldGhvZCwgd2luZG93Qml0cywgbWVtTGV2ZWwsIHN0cmF0ZWd5KSB7CiAgICBpZiAoIXN0cm0pIHsKICAgICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SJDE7CiAgICB9CiAgICB2YXIgd3JhcCA9IDE7CiAgICBpZiAobGV2ZWwgPT09IFpfREVGQVVMVF9DT01QUkVTU0lPTiQxKSB7CiAgICAgIGxldmVsID0gNjsKICAgIH0KICAgIGlmICh3aW5kb3dCaXRzIDwgMCkgewogICAgICB3cmFwID0gMDsKICAgICAgd2luZG93Qml0cyA9IC13aW5kb3dCaXRzOwogICAgfSBlbHNlIGlmICh3aW5kb3dCaXRzID4gMTUpIHsKICAgICAgd3JhcCA9IDI7CiAgICAgIHdpbmRvd0JpdHMgLT0gMTY7CiAgICB9CiAgICBpZiAobWVtTGV2ZWwgPCAxIHx8IG1lbUxldmVsID4gTUFYX01FTV9MRVZFTCB8fCBtZXRob2QgIT09IFpfREVGTEFURUQkMiB8fCB3aW5kb3dCaXRzIDwgOCB8fCB3aW5kb3dCaXRzID4gMTUgfHwgbGV2ZWwgPCAwIHx8IGxldmVsID4gOSB8fCBzdHJhdGVneSA8IDAgfHwgc3RyYXRlZ3kgPiBaX0ZJWEVEKSB7CiAgICAgIHJldHVybiBlcnIoc3RybSwgWl9TVFJFQU1fRVJST1IkMSk7CiAgICB9CiAgICBpZiAod2luZG93Qml0cyA9PT0gOCkgewogICAgICB3aW5kb3dCaXRzID0gOTsKICAgIH0KICAgIHZhciBzID0gbmV3IERlZmxhdGVTdGF0ZSgpOwogICAgc3RybS5zdGF0ZSA9IHM7CiAgICBzLnN0cm0gPSBzdHJtOwogICAgcy53cmFwID0gd3JhcDsKICAgIHMuZ3poZWFkID0gbnVsbDsKICAgIHMud19iaXRzID0gd2luZG93Qml0czsKICAgIHMud19zaXplID0gMSA8PCBzLndfYml0czsKICAgIHMud19tYXNrID0gcy53X3NpemUgLSAxOwogICAgcy5oYXNoX2JpdHMgPSBtZW1MZXZlbCArIDc7CiAgICBzLmhhc2hfc2l6ZSA9IDEgPDwgcy5oYXNoX2JpdHM7CiAgICBzLmhhc2hfbWFzayA9IHMuaGFzaF9zaXplIC0gMTsKICAgIHMuaGFzaF9zaGlmdCA9IH5+KChzLmhhc2hfYml0cyArIE1JTl9NQVRDSCAtIDEpIC8gTUlOX01BVENIKTsKICAgIHMud2luZG93ID0gbmV3IHV0aWxzJDUuQnVmOChzLndfc2l6ZSAqIDIpOwogICAgcy5oZWFkID0gbmV3IHV0aWxzJDUuQnVmMTYocy5oYXNoX3NpemUpOwogICAgcy5wcmV2ID0gbmV3IHV0aWxzJDUuQnVmMTYocy53X3NpemUpOwogICAgcy5saXRfYnVmc2l6ZSA9IDEgPDwgbWVtTGV2ZWwgKyA2OwogICAgcy5wZW5kaW5nX2J1Zl9zaXplID0gcy5saXRfYnVmc2l6ZSAqIDQ7CiAgICBzLnBlbmRpbmdfYnVmID0gbmV3IHV0aWxzJDUuQnVmOChzLnBlbmRpbmdfYnVmX3NpemUpOwogICAgcy5kX2J1ZiA9IDEgKiBzLmxpdF9idWZzaXplOwogICAgcy5sX2J1ZiA9ICgxICsgMikgKiBzLmxpdF9idWZzaXplOwogICAgcy5sZXZlbCA9IGxldmVsOwogICAgcy5zdHJhdGVneSA9IHN0cmF0ZWd5OwogICAgcy5tZXRob2QgPSBtZXRob2Q7CiAgICByZXR1cm4gZGVmbGF0ZVJlc2V0KHN0cm0pOwogIH0KICBmdW5jdGlvbiBkZWZsYXRlSW5pdChzdHJtLCBsZXZlbCkgewogICAgcmV0dXJuIGRlZmxhdGVJbml0MihzdHJtLCBsZXZlbCwgWl9ERUZMQVRFRCQyLCBNQVhfV0JJVFMkMSwgREVGX01FTV9MRVZFTCwgWl9ERUZBVUxUX1NUUkFURUdZJDEpOwogIH0KICBmdW5jdGlvbiBkZWZsYXRlJDIoc3RybSwgZmx1c2gpIHsKICAgIHZhciBvbGRfZmx1c2gsIHM7CiAgICB2YXIgYmVnLCB2YWw7CiAgICBpZiAoIXN0cm0gfHwgIXN0cm0uc3RhdGUgfHwgZmx1c2ggPiBaX0JMT0NLJDEgfHwgZmx1c2ggPCAwKSB7CiAgICAgIHJldHVybiBzdHJtID8gZXJyKHN0cm0sIFpfU1RSRUFNX0VSUk9SJDEpIDogWl9TVFJFQU1fRVJST1IkMTsKICAgIH0KICAgIHMgPSBzdHJtLnN0YXRlOwogICAgaWYgKCFzdHJtLm91dHB1dCB8fCAhc3RybS5pbnB1dCAmJiBzdHJtLmF2YWlsX2luICE9PSAwIHx8IHMuc3RhdHVzID09PSBGSU5JU0hfU1RBVEUgJiYgZmx1c2ggIT09IFpfRklOSVNIJDIpIHsKICAgICAgcmV0dXJuIGVycihzdHJtLCBzdHJtLmF2YWlsX291dCA9PT0gMCA/IFpfQlVGX0VSUk9SJDEgOiBaX1NUUkVBTV9FUlJPUiQxKTsKICAgIH0KICAgIHMuc3RybSA9IHN0cm07CiAgICBvbGRfZmx1c2ggPSBzLmxhc3RfZmx1c2g7CiAgICBzLmxhc3RfZmx1c2ggPSBmbHVzaDsKICAgIGlmIChzLnN0YXR1cyA9PT0gSU5JVF9TVEFURSkgewogICAgICBpZiAocy53cmFwID09PSAyKSB7CiAgICAgICAgc3RybS5hZGxlciA9IDA7CiAgICAgICAgcHV0X2J5dGUocywgMzEpOwogICAgICAgIHB1dF9ieXRlKHMsIDEzOSk7CiAgICAgICAgcHV0X2J5dGUocywgOCk7CiAgICAgICAgaWYgKCFzLmd6aGVhZCkgewogICAgICAgICAgcHV0X2J5dGUocywgMCk7CiAgICAgICAgICBwdXRfYnl0ZShzLCAwKTsKICAgICAgICAgIHB1dF9ieXRlKHMsIDApOwogICAgICAgICAgcHV0X2J5dGUocywgMCk7CiAgICAgICAgICBwdXRfYnl0ZShzLCAwKTsKICAgICAgICAgIHB1dF9ieXRlKHMsIHMubGV2ZWwgPT09IDkgPyAyIDogcy5zdHJhdGVneSA+PSBaX0hVRkZNQU5fT05MWSB8fCBzLmxldmVsIDwgMiA/IDQgOiAwKTsKICAgICAgICAgIHB1dF9ieXRlKHMsIE9TX0NPREUpOwogICAgICAgICAgcy5zdGF0dXMgPSBCVVNZX1NUQVRFOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBwdXRfYnl0ZShzLCAocy5nemhlYWQudGV4dCA/IDEgOiAwKSArIChzLmd6aGVhZC5oY3JjID8gMiA6IDApICsgKCFzLmd6aGVhZC5leHRyYSA/IDAgOiA0KSArICghcy5nemhlYWQubmFtZSA/IDAgOiA4KSArICghcy5nemhlYWQuY29tbWVudCA/IDAgOiAxNikpOwogICAgICAgICAgcHV0X2J5dGUocywgcy5nemhlYWQudGltZSAmIDI1NSk7CiAgICAgICAgICBwdXRfYnl0ZShzLCBzLmd6aGVhZC50aW1lID4+IDggJiAyNTUpOwogICAgICAgICAgcHV0X2J5dGUocywgcy5nemhlYWQudGltZSA+PiAxNiAmIDI1NSk7CiAgICAgICAgICBwdXRfYnl0ZShzLCBzLmd6aGVhZC50aW1lID4+IDI0ICYgMjU1KTsKICAgICAgICAgIHB1dF9ieXRlKHMsIHMubGV2ZWwgPT09IDkgPyAyIDogcy5zdHJhdGVneSA+PSBaX0hVRkZNQU5fT05MWSB8fCBzLmxldmVsIDwgMiA/IDQgOiAwKTsKICAgICAgICAgIHB1dF9ieXRlKHMsIHMuZ3poZWFkLm9zICYgMjU1KTsKICAgICAgICAgIGlmIChzLmd6aGVhZC5leHRyYSAmJiBzLmd6aGVhZC5leHRyYS5sZW5ndGgpIHsKICAgICAgICAgICAgcHV0X2J5dGUocywgcy5nemhlYWQuZXh0cmEubGVuZ3RoICYgMjU1KTsKICAgICAgICAgICAgcHV0X2J5dGUocywgcy5nemhlYWQuZXh0cmEubGVuZ3RoID4+IDggJiAyNTUpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHMuZ3poZWFkLmhjcmMpIHsKICAgICAgICAgICAgc3RybS5hZGxlciA9IGNyYzMyJDEoc3RybS5hZGxlciwgcy5wZW5kaW5nX2J1Ziwgcy5wZW5kaW5nLCAwKTsKICAgICAgICAgIH0KICAgICAgICAgIHMuZ3ppbmRleCA9IDA7CiAgICAgICAgICBzLnN0YXR1cyA9IEVYVFJBX1NUQVRFOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgaGVhZGVyID0gWl9ERUZMQVRFRCQyICsgKHMud19iaXRzIC0gOCA8PCA0KSA8PCA4OwogICAgICAgIHZhciBsZXZlbF9mbGFncyA9IC0xOwogICAgICAgIGlmIChzLnN0cmF0ZWd5ID49IFpfSFVGRk1BTl9PTkxZIHx8IHMubGV2ZWwgPCAyKSB7CiAgICAgICAgICBsZXZlbF9mbGFncyA9IDA7CiAgICAgICAgfSBlbHNlIGlmIChzLmxldmVsIDwgNikgewogICAgICAgICAgbGV2ZWxfZmxhZ3MgPSAxOwogICAgICAgIH0gZWxzZSBpZiAocy5sZXZlbCA9PT0gNikgewogICAgICAgICAgbGV2ZWxfZmxhZ3MgPSAyOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBsZXZlbF9mbGFncyA9IDM7CiAgICAgICAgfQogICAgICAgIGhlYWRlciB8PSBsZXZlbF9mbGFncyA8PCA2OwogICAgICAgIGlmIChzLnN0cnN0YXJ0ICE9PSAwKSB7CiAgICAgICAgICBoZWFkZXIgfD0gUFJFU0VUX0RJQ1Q7CiAgICAgICAgfQogICAgICAgIGhlYWRlciArPSAzMSAtIGhlYWRlciAlIDMxOwogICAgICAgIHMuc3RhdHVzID0gQlVTWV9TVEFURTsKICAgICAgICBwdXRTaG9ydE1TQihzLCBoZWFkZXIpOwogICAgICAgIGlmIChzLnN0cnN0YXJ0ICE9PSAwKSB7CiAgICAgICAgICBwdXRTaG9ydE1TQihzLCBzdHJtLmFkbGVyID4+PiAxNik7CiAgICAgICAgICBwdXRTaG9ydE1TQihzLCBzdHJtLmFkbGVyICYgNjU1MzUpOwogICAgICAgIH0KICAgICAgICBzdHJtLmFkbGVyID0gMTsKICAgICAgfQogICAgfQogICAgaWYgKHMuc3RhdHVzID09PSBFWFRSQV9TVEFURSkgewogICAgICBpZiAocy5nemhlYWQuZXh0cmEpIHsKICAgICAgICBiZWcgPSBzLnBlbmRpbmc7CiAgICAgICAgd2hpbGUgKHMuZ3ppbmRleCA8IChzLmd6aGVhZC5leHRyYS5sZW5ndGggJiA2NTUzNSkpIHsKICAgICAgICAgIGlmIChzLnBlbmRpbmcgPT09IHMucGVuZGluZ19idWZfc2l6ZSkgewogICAgICAgICAgICBpZiAocy5nemhlYWQuaGNyYyAmJiBzLnBlbmRpbmcgPiBiZWcpIHsKICAgICAgICAgICAgICBzdHJtLmFkbGVyID0gY3JjMzIkMShzdHJtLmFkbGVyLCBzLnBlbmRpbmdfYnVmLCBzLnBlbmRpbmcgLSBiZWcsIGJlZyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZmx1c2hfcGVuZGluZyhzdHJtKTsKICAgICAgICAgICAgYmVnID0gcy5wZW5kaW5nOwogICAgICAgICAgICBpZiAocy5wZW5kaW5nID09PSBzLnBlbmRpbmdfYnVmX3NpemUpIHsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcHV0X2J5dGUocywgcy5nemhlYWQuZXh0cmFbcy5nemluZGV4XSAmIDI1NSk7CiAgICAgICAgICBzLmd6aW5kZXgrKzsKICAgICAgICB9CiAgICAgICAgaWYgKHMuZ3poZWFkLmhjcmMgJiYgcy5wZW5kaW5nID4gYmVnKSB7CiAgICAgICAgICBzdHJtLmFkbGVyID0gY3JjMzIkMShzdHJtLmFkbGVyLCBzLnBlbmRpbmdfYnVmLCBzLnBlbmRpbmcgLSBiZWcsIGJlZyk7CiAgICAgICAgfQogICAgICAgIGlmIChzLmd6aW5kZXggPT09IHMuZ3poZWFkLmV4dHJhLmxlbmd0aCkgewogICAgICAgICAgcy5nemluZGV4ID0gMDsKICAgICAgICAgIHMuc3RhdHVzID0gTkFNRV9TVEFURTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcy5zdGF0dXMgPSBOQU1FX1NUQVRFOwogICAgICB9CiAgICB9CiAgICBpZiAocy5zdGF0dXMgPT09IE5BTUVfU1RBVEUpIHsKICAgICAgaWYgKHMuZ3poZWFkLm5hbWUpIHsKICAgICAgICBiZWcgPSBzLnBlbmRpbmc7CiAgICAgICAgZG8gewogICAgICAgICAgaWYgKHMucGVuZGluZyA9PT0gcy5wZW5kaW5nX2J1Zl9zaXplKSB7CiAgICAgICAgICAgIGlmIChzLmd6aGVhZC5oY3JjICYmIHMucGVuZGluZyA+IGJlZykgewogICAgICAgICAgICAgIHN0cm0uYWRsZXIgPSBjcmMzMiQxKHN0cm0uYWRsZXIsIHMucGVuZGluZ19idWYsIHMucGVuZGluZyAtIGJlZywgYmVnKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmbHVzaF9wZW5kaW5nKHN0cm0pOwogICAgICAgICAgICBiZWcgPSBzLnBlbmRpbmc7CiAgICAgICAgICAgIGlmIChzLnBlbmRpbmcgPT09IHMucGVuZGluZ19idWZfc2l6ZSkgewogICAgICAgICAgICAgIHZhbCA9IDE7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmIChzLmd6aW5kZXggPCBzLmd6aGVhZC5uYW1lLmxlbmd0aCkgewogICAgICAgICAgICB2YWwgPSBzLmd6aGVhZC5uYW1lLmNoYXJDb2RlQXQocy5nemluZGV4KyspICYgMjU1OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFsID0gMDsKICAgICAgICAgIH0KICAgICAgICAgIHB1dF9ieXRlKHMsIHZhbCk7CiAgICAgICAgfSB3aGlsZSAodmFsICE9PSAwKTsKICAgICAgICBpZiAocy5nemhlYWQuaGNyYyAmJiBzLnBlbmRpbmcgPiBiZWcpIHsKICAgICAgICAgIHN0cm0uYWRsZXIgPSBjcmMzMiQxKHN0cm0uYWRsZXIsIHMucGVuZGluZ19idWYsIHMucGVuZGluZyAtIGJlZywgYmVnKTsKICAgICAgICB9CiAgICAgICAgaWYgKHZhbCA9PT0gMCkgewogICAgICAgICAgcy5nemluZGV4ID0gMDsKICAgICAgICAgIHMuc3RhdHVzID0gQ09NTUVOVF9TVEFURTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcy5zdGF0dXMgPSBDT01NRU5UX1NUQVRFOwogICAgICB9CiAgICB9CiAgICBpZiAocy5zdGF0dXMgPT09IENPTU1FTlRfU1RBVEUpIHsKICAgICAgaWYgKHMuZ3poZWFkLmNvbW1lbnQpIHsKICAgICAgICBiZWcgPSBzLnBlbmRpbmc7CiAgICAgICAgZG8gewogICAgICAgICAgaWYgKHMucGVuZGluZyA9PT0gcy5wZW5kaW5nX2J1Zl9zaXplKSB7CiAgICAgICAgICAgIGlmIChzLmd6aGVhZC5oY3JjICYmIHMucGVuZGluZyA+IGJlZykgewogICAgICAgICAgICAgIHN0cm0uYWRsZXIgPSBjcmMzMiQxKHN0cm0uYWRsZXIsIHMucGVuZGluZ19idWYsIHMucGVuZGluZyAtIGJlZywgYmVnKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmbHVzaF9wZW5kaW5nKHN0cm0pOwogICAgICAgICAgICBiZWcgPSBzLnBlbmRpbmc7CiAgICAgICAgICAgIGlmIChzLnBlbmRpbmcgPT09IHMucGVuZGluZ19idWZfc2l6ZSkgewogICAgICAgICAgICAgIHZhbCA9IDE7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmIChzLmd6aW5kZXggPCBzLmd6aGVhZC5jb21tZW50Lmxlbmd0aCkgewogICAgICAgICAgICB2YWwgPSBzLmd6aGVhZC5jb21tZW50LmNoYXJDb2RlQXQocy5nemluZGV4KyspICYgMjU1OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFsID0gMDsKICAgICAgICAgIH0KICAgICAgICAgIHB1dF9ieXRlKHMsIHZhbCk7CiAgICAgICAgfSB3aGlsZSAodmFsICE9PSAwKTsKICAgICAgICBpZiAocy5nemhlYWQuaGNyYyAmJiBzLnBlbmRpbmcgPiBiZWcpIHsKICAgICAgICAgIHN0cm0uYWRsZXIgPSBjcmMzMiQxKHN0cm0uYWRsZXIsIHMucGVuZGluZ19idWYsIHMucGVuZGluZyAtIGJlZywgYmVnKTsKICAgICAgICB9CiAgICAgICAgaWYgKHZhbCA9PT0gMCkgewogICAgICAgICAgcy5zdGF0dXMgPSBIQ1JDX1NUQVRFOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBzLnN0YXR1cyA9IEhDUkNfU1RBVEU7CiAgICAgIH0KICAgIH0KICAgIGlmIChzLnN0YXR1cyA9PT0gSENSQ19TVEFURSkgewogICAgICBpZiAocy5nemhlYWQuaGNyYykgewogICAgICAgIGlmIChzLnBlbmRpbmcgKyAyID4gcy5wZW5kaW5nX2J1Zl9zaXplKSB7CiAgICAgICAgICBmbHVzaF9wZW5kaW5nKHN0cm0pOwogICAgICAgIH0KICAgICAgICBpZiAocy5wZW5kaW5nICsgMiA8PSBzLnBlbmRpbmdfYnVmX3NpemUpIHsKICAgICAgICAgIHB1dF9ieXRlKHMsIHN0cm0uYWRsZXIgJiAyNTUpOwogICAgICAgICAgcHV0X2J5dGUocywgc3RybS5hZGxlciA+PiA4ICYgMjU1KTsKICAgICAgICAgIHN0cm0uYWRsZXIgPSAwOwogICAgICAgICAgcy5zdGF0dXMgPSBCVVNZX1NUQVRFOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBzLnN0YXR1cyA9IEJVU1lfU1RBVEU7CiAgICAgIH0KICAgIH0KICAgIGlmIChzLnBlbmRpbmcgIT09IDApIHsKICAgICAgZmx1c2hfcGVuZGluZyhzdHJtKTsKICAgICAgaWYgKHN0cm0uYXZhaWxfb3V0ID09PSAwKSB7CiAgICAgICAgcy5sYXN0X2ZsdXNoID0gLTE7CiAgICAgICAgcmV0dXJuIFpfT0skMjsKICAgICAgfQogICAgfSBlbHNlIGlmIChzdHJtLmF2YWlsX2luID09PSAwICYmIHJhbmsoZmx1c2gpIDw9IHJhbmsob2xkX2ZsdXNoKSAmJiBmbHVzaCAhPT0gWl9GSU5JU0gkMikgewogICAgICByZXR1cm4gZXJyKHN0cm0sIFpfQlVGX0VSUk9SJDEpOwogICAgfQogICAgaWYgKHMuc3RhdHVzID09PSBGSU5JU0hfU1RBVEUgJiYgc3RybS5hdmFpbF9pbiAhPT0gMCkgewogICAgICByZXR1cm4gZXJyKHN0cm0sIFpfQlVGX0VSUk9SJDEpOwogICAgfQogICAgaWYgKHN0cm0uYXZhaWxfaW4gIT09IDAgfHwgcy5sb29rYWhlYWQgIT09IDAgfHwgZmx1c2ggIT09IFpfTk9fRkxVU0gkMSAmJiBzLnN0YXR1cyAhPT0gRklOSVNIX1NUQVRFKSB7CiAgICAgIHZhciBic3RhdGUgPSBzLnN0cmF0ZWd5ID09PSBaX0hVRkZNQU5fT05MWSA/IGRlZmxhdGVfaHVmZihzLCBmbHVzaCkgOiBzLnN0cmF0ZWd5ID09PSBaX1JMRSA/IGRlZmxhdGVfcmxlKHMsIGZsdXNoKSA6IGNvbmZpZ3VyYXRpb25fdGFibGVbcy5sZXZlbF0uZnVuYyhzLCBmbHVzaCk7CiAgICAgIGlmIChic3RhdGUgPT09IEJTX0ZJTklTSF9TVEFSVEVEIHx8IGJzdGF0ZSA9PT0gQlNfRklOSVNIX0RPTkUpIHsKICAgICAgICBzLnN0YXR1cyA9IEZJTklTSF9TVEFURTsKICAgICAgfQogICAgICBpZiAoYnN0YXRlID09PSBCU19ORUVEX01PUkUgfHwgYnN0YXRlID09PSBCU19GSU5JU0hfU1RBUlRFRCkgewogICAgICAgIGlmIChzdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgICAgcy5sYXN0X2ZsdXNoID0gLTE7CiAgICAgICAgfQogICAgICAgIHJldHVybiBaX09LJDI7CiAgICAgIH0KICAgICAgaWYgKGJzdGF0ZSA9PT0gQlNfQkxPQ0tfRE9ORSkgewogICAgICAgIGlmIChmbHVzaCA9PT0gWl9QQVJUSUFMX0ZMVVNIKSB7CiAgICAgICAgICB0cmVlcy5fdHJfYWxpZ24ocyk7CiAgICAgICAgfSBlbHNlIGlmIChmbHVzaCAhPT0gWl9CTE9DSyQxKSB7CiAgICAgICAgICB0cmVlcy5fdHJfc3RvcmVkX2Jsb2NrKHMsIDAsIDAsIGZhbHNlKTsKICAgICAgICAgIGlmIChmbHVzaCA9PT0gWl9GVUxMX0ZMVVNIKSB7CiAgICAgICAgICAgIHplcm8ocy5oZWFkKTsKICAgICAgICAgICAgaWYgKHMubG9va2FoZWFkID09PSAwKSB7CiAgICAgICAgICAgICAgcy5zdHJzdGFydCA9IDA7CiAgICAgICAgICAgICAgcy5ibG9ja19zdGFydCA9IDA7CiAgICAgICAgICAgICAgcy5pbnNlcnQgPSAwOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZsdXNoX3BlbmRpbmcoc3RybSk7CiAgICAgICAgaWYgKHN0cm0uYXZhaWxfb3V0ID09PSAwKSB7CiAgICAgICAgICBzLmxhc3RfZmx1c2ggPSAtMTsKICAgICAgICAgIHJldHVybiBaX09LJDI7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBpZiAoZmx1c2ggIT09IFpfRklOSVNIJDIpIHsKICAgICAgcmV0dXJuIFpfT0skMjsKICAgIH0KICAgIGlmIChzLndyYXAgPD0gMCkgewogICAgICByZXR1cm4gWl9TVFJFQU1fRU5EJDI7CiAgICB9CiAgICBpZiAocy53cmFwID09PSAyKSB7CiAgICAgIHB1dF9ieXRlKHMsIHN0cm0uYWRsZXIgJiAyNTUpOwogICAgICBwdXRfYnl0ZShzLCBzdHJtLmFkbGVyID4+IDggJiAyNTUpOwogICAgICBwdXRfYnl0ZShzLCBzdHJtLmFkbGVyID4+IDE2ICYgMjU1KTsKICAgICAgcHV0X2J5dGUocywgc3RybS5hZGxlciA+PiAyNCAmIDI1NSk7CiAgICAgIHB1dF9ieXRlKHMsIHN0cm0udG90YWxfaW4gJiAyNTUpOwogICAgICBwdXRfYnl0ZShzLCBzdHJtLnRvdGFsX2luID4+IDggJiAyNTUpOwogICAgICBwdXRfYnl0ZShzLCBzdHJtLnRvdGFsX2luID4+IDE2ICYgMjU1KTsKICAgICAgcHV0X2J5dGUocywgc3RybS50b3RhbF9pbiA+PiAyNCAmIDI1NSk7CiAgICB9IGVsc2UgewogICAgICBwdXRTaG9ydE1TQihzLCBzdHJtLmFkbGVyID4+PiAxNik7CiAgICAgIHB1dFNob3J0TVNCKHMsIHN0cm0uYWRsZXIgJiA2NTUzNSk7CiAgICB9CiAgICBmbHVzaF9wZW5kaW5nKHN0cm0pOwogICAgaWYgKHMud3JhcCA+IDApIHsKICAgICAgcy53cmFwID0gLXMud3JhcDsKICAgIH0KICAgIHJldHVybiBzLnBlbmRpbmcgIT09IDAgPyBaX09LJDIgOiBaX1NUUkVBTV9FTkQkMjsKICB9CiAgZnVuY3Rpb24gZGVmbGF0ZUVuZChzdHJtKSB7CiAgICB2YXIgc3RhdHVzOwogICAgaWYgKCFzdHJtIHx8ICFzdHJtLnN0YXRlKSB7CiAgICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUiQxOwogICAgfQogICAgc3RhdHVzID0gc3RybS5zdGF0ZS5zdGF0dXM7CiAgICBpZiAoc3RhdHVzICE9PSBJTklUX1NUQVRFICYmIHN0YXR1cyAhPT0gRVhUUkFfU1RBVEUgJiYgc3RhdHVzICE9PSBOQU1FX1NUQVRFICYmIHN0YXR1cyAhPT0gQ09NTUVOVF9TVEFURSAmJiBzdGF0dXMgIT09IEhDUkNfU1RBVEUgJiYgc3RhdHVzICE9PSBCVVNZX1NUQVRFICYmIHN0YXR1cyAhPT0gRklOSVNIX1NUQVRFKSB7CiAgICAgIHJldHVybiBlcnIoc3RybSwgWl9TVFJFQU1fRVJST1IkMSk7CiAgICB9CiAgICBzdHJtLnN0YXRlID0gbnVsbDsKICAgIHJldHVybiBzdGF0dXMgPT09IEJVU1lfU1RBVEUgPyBlcnIoc3RybSwgWl9EQVRBX0VSUk9SJDEpIDogWl9PSyQyOwogIH0KICBmdW5jdGlvbiBkZWZsYXRlU2V0RGljdGlvbmFyeShzdHJtLCBkaWN0aW9uYXJ5KSB7CiAgICB2YXIgZGljdExlbmd0aCA9IGRpY3Rpb25hcnkubGVuZ3RoOwogICAgdmFyIHM7CiAgICB2YXIgc3RyLCBuOwogICAgdmFyIHdyYXA7CiAgICB2YXIgYXZhaWw7CiAgICB2YXIgbmV4dDsKICAgIHZhciBpbnB1dDsKICAgIHZhciB0bXBEaWN0OwogICAgaWYgKCFzdHJtIHx8ICFzdHJtLnN0YXRlKSB7CiAgICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUiQxOwogICAgfQogICAgcyA9IHN0cm0uc3RhdGU7CiAgICB3cmFwID0gcy53cmFwOwogICAgaWYgKHdyYXAgPT09IDIgfHwgd3JhcCA9PT0gMSAmJiBzLnN0YXR1cyAhPT0gSU5JVF9TVEFURSB8fCBzLmxvb2thaGVhZCkgewogICAgICByZXR1cm4gWl9TVFJFQU1fRVJST1IkMTsKICAgIH0KICAgIGlmICh3cmFwID09PSAxKSB7CiAgICAgIHN0cm0uYWRsZXIgPSBhZGxlcjMyJDEoc3RybS5hZGxlciwgZGljdGlvbmFyeSwgZGljdExlbmd0aCwgMCk7CiAgICB9CiAgICBzLndyYXAgPSAwOwogICAgaWYgKGRpY3RMZW5ndGggPj0gcy53X3NpemUpIHsKICAgICAgaWYgKHdyYXAgPT09IDApIHsKICAgICAgICB6ZXJvKHMuaGVhZCk7CiAgICAgICAgcy5zdHJzdGFydCA9IDA7CiAgICAgICAgcy5ibG9ja19zdGFydCA9IDA7CiAgICAgICAgcy5pbnNlcnQgPSAwOwogICAgICB9CiAgICAgIHRtcERpY3QgPSBuZXcgdXRpbHMkNS5CdWY4KHMud19zaXplKTsKICAgICAgdXRpbHMkNS5hcnJheVNldCh0bXBEaWN0LCBkaWN0aW9uYXJ5LCBkaWN0TGVuZ3RoIC0gcy53X3NpemUsIHMud19zaXplLCAwKTsKICAgICAgZGljdGlvbmFyeSA9IHRtcERpY3Q7CiAgICAgIGRpY3RMZW5ndGggPSBzLndfc2l6ZTsKICAgIH0KICAgIGF2YWlsID0gc3RybS5hdmFpbF9pbjsKICAgIG5leHQgPSBzdHJtLm5leHRfaW47CiAgICBpbnB1dCA9IHN0cm0uaW5wdXQ7CiAgICBzdHJtLmF2YWlsX2luID0gZGljdExlbmd0aDsKICAgIHN0cm0ubmV4dF9pbiA9IDA7CiAgICBzdHJtLmlucHV0ID0gZGljdGlvbmFyeTsKICAgIGZpbGxfd2luZG93KHMpOwogICAgd2hpbGUgKHMubG9va2FoZWFkID49IE1JTl9NQVRDSCkgewogICAgICBzdHIgPSBzLnN0cnN0YXJ0OwogICAgICBuID0gcy5sb29rYWhlYWQgLSAoTUlOX01BVENIIC0gMSk7CiAgICAgIGRvIHsKICAgICAgICBzLmluc19oID0gKHMuaW5zX2ggPDwgcy5oYXNoX3NoaWZ0IF4gcy53aW5kb3dbc3RyICsgTUlOX01BVENIIC0gMV0pICYgcy5oYXNoX21hc2s7CiAgICAgICAgcy5wcmV2W3N0ciAmIHMud19tYXNrXSA9IHMuaGVhZFtzLmluc19oXTsKICAgICAgICBzLmhlYWRbcy5pbnNfaF0gPSBzdHI7CiAgICAgICAgc3RyKys7CiAgICAgIH0gd2hpbGUgKC0tbik7CiAgICAgIHMuc3Ryc3RhcnQgPSBzdHI7CiAgICAgIHMubG9va2FoZWFkID0gTUlOX01BVENIIC0gMTsKICAgICAgZmlsbF93aW5kb3cocyk7CiAgICB9CiAgICBzLnN0cnN0YXJ0ICs9IHMubG9va2FoZWFkOwogICAgcy5ibG9ja19zdGFydCA9IHMuc3Ryc3RhcnQ7CiAgICBzLmluc2VydCA9IHMubG9va2FoZWFkOwogICAgcy5sb29rYWhlYWQgPSAwOwogICAgcy5tYXRjaF9sZW5ndGggPSBzLnByZXZfbGVuZ3RoID0gTUlOX01BVENIIC0gMTsKICAgIHMubWF0Y2hfYXZhaWxhYmxlID0gMDsKICAgIHN0cm0ubmV4dF9pbiA9IG5leHQ7CiAgICBzdHJtLmlucHV0ID0gaW5wdXQ7CiAgICBzdHJtLmF2YWlsX2luID0gYXZhaWw7CiAgICBzLndyYXAgPSB3cmFwOwogICAgcmV0dXJuIFpfT0skMjsKICB9CiAgZGVmbGF0ZSQzLmRlZmxhdGVJbml0ID0gZGVmbGF0ZUluaXQ7CiAgZGVmbGF0ZSQzLmRlZmxhdGVJbml0MiA9IGRlZmxhdGVJbml0MjsKICBkZWZsYXRlJDMuZGVmbGF0ZVJlc2V0ID0gZGVmbGF0ZVJlc2V0OwogIGRlZmxhdGUkMy5kZWZsYXRlUmVzZXRLZWVwID0gZGVmbGF0ZVJlc2V0S2VlcDsKICBkZWZsYXRlJDMuZGVmbGF0ZVNldEhlYWRlciA9IGRlZmxhdGVTZXRIZWFkZXI7CiAgZGVmbGF0ZSQzLmRlZmxhdGUgPSBkZWZsYXRlJDI7CiAgZGVmbGF0ZSQzLmRlZmxhdGVFbmQgPSBkZWZsYXRlRW5kOwogIGRlZmxhdGUkMy5kZWZsYXRlU2V0RGljdGlvbmFyeSA9IGRlZmxhdGVTZXREaWN0aW9uYXJ5OwogIGRlZmxhdGUkMy5kZWZsYXRlSW5mbyA9ICJwYWtvIGRlZmxhdGUgKGZyb20gTm9kZWNhIHByb2plY3QpIjsKICB2YXIgc3RyaW5ncyQyID0ge307CiAgdmFyIHV0aWxzJDQgPSBjb21tb24kMTsKICB2YXIgU1RSX0FQUExZX09LID0gdHJ1ZTsKICB2YXIgU1RSX0FQUExZX1VJQV9PSyA9IHRydWU7CiAgdHJ5IHsKICAgIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgWzBdKTsKICB9IGNhdGNoIChfXykgewogICAgU1RSX0FQUExZX09LID0gZmFsc2U7CiAgfQogIHRyeSB7CiAgICBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIG5ldyBVaW50OEFycmF5KDEpKTsKICB9IGNhdGNoIChfXykgewogICAgU1RSX0FQUExZX1VJQV9PSyA9IGZhbHNlOwogIH0KICB2YXIgX3V0ZjhsZW4gPSBuZXcgdXRpbHMkNC5CdWY4KDI1Nik7CiAgZm9yICh2YXIgcSA9IDA7IHEgPCAyNTY7IHErKykgewogICAgX3V0ZjhsZW5bcV0gPSBxID49IDI1MiA/IDYgOiBxID49IDI0OCA/IDUgOiBxID49IDI0MCA/IDQgOiBxID49IDIyNCA/IDMgOiBxID49IDE5MiA/IDIgOiAxOwogIH0KICBfdXRmOGxlblsyNTRdID0gX3V0ZjhsZW5bMjU0XSA9IDE7CiAgc3RyaW5ncyQyLnN0cmluZzJidWYgPSBmdW5jdGlvbihzdHIpIHsKICAgIHZhciBidWYsIGMyLCBjMjIsIG1fcG9zLCBpLCBzdHJfbGVuID0gc3RyLmxlbmd0aCwgYnVmX2xlbiA9IDA7CiAgICBmb3IgKG1fcG9zID0gMDsgbV9wb3MgPCBzdHJfbGVuOyBtX3BvcysrKSB7CiAgICAgIGMyID0gc3RyLmNoYXJDb2RlQXQobV9wb3MpOwogICAgICBpZiAoKGMyICYgNjQ1MTIpID09PSA1NTI5NiAmJiBtX3BvcyArIDEgPCBzdHJfbGVuKSB7CiAgICAgICAgYzIyID0gc3RyLmNoYXJDb2RlQXQobV9wb3MgKyAxKTsKICAgICAgICBpZiAoKGMyMiAmIDY0NTEyKSA9PT0gNTYzMjApIHsKICAgICAgICAgIGMyID0gNjU1MzYgKyAoYzIgLSA1NTI5NiA8PCAxMCkgKyAoYzIyIC0gNTYzMjApOwogICAgICAgICAgbV9wb3MrKzsKICAgICAgICB9CiAgICAgIH0KICAgICAgYnVmX2xlbiArPSBjMiA8IDEyOCA/IDEgOiBjMiA8IDIwNDggPyAyIDogYzIgPCA2NTUzNiA/IDMgOiA0OwogICAgfQogICAgYnVmID0gbmV3IHV0aWxzJDQuQnVmOChidWZfbGVuKTsKICAgIGZvciAoaSA9IDAsIG1fcG9zID0gMDsgaSA8IGJ1Zl9sZW47IG1fcG9zKyspIHsKICAgICAgYzIgPSBzdHIuY2hhckNvZGVBdChtX3Bvcyk7CiAgICAgIGlmICgoYzIgJiA2NDUxMikgPT09IDU1Mjk2ICYmIG1fcG9zICsgMSA8IHN0cl9sZW4pIHsKICAgICAgICBjMjIgPSBzdHIuY2hhckNvZGVBdChtX3BvcyArIDEpOwogICAgICAgIGlmICgoYzIyICYgNjQ1MTIpID09PSA1NjMyMCkgewogICAgICAgICAgYzIgPSA2NTUzNiArIChjMiAtIDU1Mjk2IDw8IDEwKSArIChjMjIgLSA1NjMyMCk7CiAgICAgICAgICBtX3BvcysrOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoYzIgPCAxMjgpIHsKICAgICAgICBidWZbaSsrXSA9IGMyOwogICAgICB9IGVsc2UgaWYgKGMyIDwgMjA0OCkgewogICAgICAgIGJ1ZltpKytdID0gMTkyIHwgYzIgPj4+IDY7CiAgICAgICAgYnVmW2krK10gPSAxMjggfCBjMiAmIDYzOwogICAgICB9IGVsc2UgaWYgKGMyIDwgNjU1MzYpIHsKICAgICAgICBidWZbaSsrXSA9IDIyNCB8IGMyID4+PiAxMjsKICAgICAgICBidWZbaSsrXSA9IDEyOCB8IGMyID4+PiA2ICYgNjM7CiAgICAgICAgYnVmW2krK10gPSAxMjggfCBjMiAmIDYzOwogICAgICB9IGVsc2UgewogICAgICAgIGJ1ZltpKytdID0gMjQwIHwgYzIgPj4+IDE4OwogICAgICAgIGJ1ZltpKytdID0gMTI4IHwgYzIgPj4+IDEyICYgNjM7CiAgICAgICAgYnVmW2krK10gPSAxMjggfCBjMiA+Pj4gNiAmIDYzOwogICAgICAgIGJ1ZltpKytdID0gMTI4IHwgYzIgJiA2MzsKICAgICAgfQogICAgfQogICAgcmV0dXJuIGJ1ZjsKICB9OwogIGZ1bmN0aW9uIGJ1ZjJiaW5zdHJpbmcoYnVmLCBsZW4pIHsKICAgIGlmIChsZW4gPCA2NTUzNCkgewogICAgICBpZiAoYnVmLnN1YmFycmF5ICYmIFNUUl9BUFBMWV9VSUFfT0sgfHwgIWJ1Zi5zdWJhcnJheSAmJiBTVFJfQVBQTFlfT0spIHsKICAgICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCB1dGlscyQ0LnNocmlua0J1ZihidWYsIGxlbikpOwogICAgICB9CiAgICB9CiAgICB2YXIgcmVzdWx0ID0gIiI7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgIHJlc3VsdCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSk7CiAgICB9CiAgICByZXR1cm4gcmVzdWx0OwogIH0KICBzdHJpbmdzJDIuYnVmMmJpbnN0cmluZyA9IGZ1bmN0aW9uKGJ1ZikgewogICAgcmV0dXJuIGJ1ZjJiaW5zdHJpbmcoYnVmLCBidWYubGVuZ3RoKTsKICB9OwogIHN0cmluZ3MkMi5iaW5zdHJpbmcyYnVmID0gZnVuY3Rpb24oc3RyKSB7CiAgICB2YXIgYnVmID0gbmV3IHV0aWxzJDQuQnVmOChzdHIubGVuZ3RoKTsKICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBidWYubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsKICAgICAgYnVmW2ldID0gc3RyLmNoYXJDb2RlQXQoaSk7CiAgICB9CiAgICByZXR1cm4gYnVmOwogIH07CiAgc3RyaW5ncyQyLmJ1ZjJzdHJpbmcgPSBmdW5jdGlvbihidWYsIG1heCkgewogICAgdmFyIGksIG91dCwgYzIsIGNfbGVuOwogICAgdmFyIGxlbiA9IG1heCB8fCBidWYubGVuZ3RoOwogICAgdmFyIHV0ZjE2YnVmID0gbmV3IEFycmF5KGxlbiAqIDIpOwogICAgZm9yIChvdXQgPSAwLCBpID0gMDsgaSA8IGxlbjsgKSB7CiAgICAgIGMyID0gYnVmW2krK107CiAgICAgIGlmIChjMiA8IDEyOCkgewogICAgICAgIHV0ZjE2YnVmW291dCsrXSA9IGMyOwogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICAgIGNfbGVuID0gX3V0ZjhsZW5bYzJdOwogICAgICBpZiAoY19sZW4gPiA0KSB7CiAgICAgICAgdXRmMTZidWZbb3V0KytdID0gNjU1MzM7CiAgICAgICAgaSArPSBjX2xlbiAtIDE7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KICAgICAgYzIgJj0gY19sZW4gPT09IDIgPyAzMSA6IGNfbGVuID09PSAzID8gMTUgOiA3OwogICAgICB3aGlsZSAoY19sZW4gPiAxICYmIGkgPCBsZW4pIHsKICAgICAgICBjMiA9IGMyIDw8IDYgfCBidWZbaSsrXSAmIDYzOwogICAgICAgIGNfbGVuLS07CiAgICAgIH0KICAgICAgaWYgKGNfbGVuID4gMSkgewogICAgICAgIHV0ZjE2YnVmW291dCsrXSA9IDY1NTMzOwogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICAgIGlmIChjMiA8IDY1NTM2KSB7CiAgICAgICAgdXRmMTZidWZbb3V0KytdID0gYzI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYzIgLT0gNjU1MzY7CiAgICAgICAgdXRmMTZidWZbb3V0KytdID0gNTUyOTYgfCBjMiA+PiAxMCAmIDEwMjM7CiAgICAgICAgdXRmMTZidWZbb3V0KytdID0gNTYzMjAgfCBjMiAmIDEwMjM7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBidWYyYmluc3RyaW5nKHV0ZjE2YnVmLCBvdXQpOwogIH07CiAgc3RyaW5ncyQyLnV0Zjhib3JkZXIgPSBmdW5jdGlvbihidWYsIG1heCkgewogICAgdmFyIHBvczsKICAgIG1heCA9IG1heCB8fCBidWYubGVuZ3RoOwogICAgaWYgKG1heCA+IGJ1Zi5sZW5ndGgpIHsKICAgICAgbWF4ID0gYnVmLmxlbmd0aDsKICAgIH0KICAgIHBvcyA9IG1heCAtIDE7CiAgICB3aGlsZSAocG9zID49IDAgJiYgKGJ1Zltwb3NdICYgMTkyKSA9PT0gMTI4KSB7CiAgICAgIHBvcy0tOwogICAgfQogICAgaWYgKHBvcyA8IDApIHsKICAgICAgcmV0dXJuIG1heDsKICAgIH0KICAgIGlmIChwb3MgPT09IDApIHsKICAgICAgcmV0dXJuIG1heDsKICAgIH0KICAgIHJldHVybiBwb3MgKyBfdXRmOGxlbltidWZbcG9zXV0gPiBtYXggPyBwb3MgOiBtYXg7CiAgfTsKICBmdW5jdGlvbiBaU3RyZWFtJDIoKSB7CiAgICB0aGlzLmlucHV0ID0gbnVsbDsKICAgIHRoaXMubmV4dF9pbiA9IDA7CiAgICB0aGlzLmF2YWlsX2luID0gMDsKICAgIHRoaXMudG90YWxfaW4gPSAwOwogICAgdGhpcy5vdXRwdXQgPSBudWxsOwogICAgdGhpcy5uZXh0X291dCA9IDA7CiAgICB0aGlzLmF2YWlsX291dCA9IDA7CiAgICB0aGlzLnRvdGFsX291dCA9IDA7CiAgICB0aGlzLm1zZyA9ICIiOwogICAgdGhpcy5zdGF0ZSA9IG51bGw7CiAgICB0aGlzLmRhdGFfdHlwZSA9IDI7CiAgICB0aGlzLmFkbGVyID0gMDsKICB9CiAgdmFyIHpzdHJlYW0gPSBaU3RyZWFtJDI7CiAgdmFyIHpsaWJfZGVmbGF0ZSA9IGRlZmxhdGUkMzsKICB2YXIgdXRpbHMkMyA9IGNvbW1vbiQxOwogIHZhciBzdHJpbmdzJDEgPSBzdHJpbmdzJDI7CiAgdmFyIG1zZyQxID0gbWVzc2FnZXMkMTsKICB2YXIgWlN0cmVhbSQxID0genN0cmVhbTsKICB2YXIgdG9TdHJpbmckMSA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7CiAgdmFyIFpfTk9fRkxVU0ggPSAwOwogIHZhciBaX0ZJTklTSCQxID0gNDsKICB2YXIgWl9PSyQxID0gMDsKICB2YXIgWl9TVFJFQU1fRU5EJDEgPSAxOwogIHZhciBaX1NZTkNfRkxVU0gkMSA9IDI7CiAgdmFyIFpfREVGQVVMVF9DT01QUkVTU0lPTiA9IC0xOwogIHZhciBaX0RFRkFVTFRfU1RSQVRFR1kgPSAwOwogIHZhciBaX0RFRkxBVEVEJDEgPSA4OwogIGZ1bmN0aW9uIERlZmxhdGUob3B0aW9ucykgewogICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIERlZmxhdGUpKQogICAgICByZXR1cm4gbmV3IERlZmxhdGUob3B0aW9ucyk7CiAgICB0aGlzLm9wdGlvbnMgPSB1dGlscyQzLmFzc2lnbih7CiAgICAgIGxldmVsOiBaX0RFRkFVTFRfQ09NUFJFU1NJT04sCiAgICAgIG1ldGhvZDogWl9ERUZMQVRFRCQxLAogICAgICBjaHVua1NpemU6IDE2Mzg0LAogICAgICB3aW5kb3dCaXRzOiAxNSwKICAgICAgbWVtTGV2ZWw6IDgsCiAgICAgIHN0cmF0ZWd5OiBaX0RFRkFVTFRfU1RSQVRFR1ksCiAgICAgIHRvOiAiIgogICAgfSwgb3B0aW9ucyB8fCB7fSk7CiAgICB2YXIgb3B0ID0gdGhpcy5vcHRpb25zOwogICAgaWYgKG9wdC5yYXcgJiYgb3B0LndpbmRvd0JpdHMgPiAwKSB7CiAgICAgIG9wdC53aW5kb3dCaXRzID0gLW9wdC53aW5kb3dCaXRzOwogICAgfSBlbHNlIGlmIChvcHQuZ3ppcCAmJiBvcHQud2luZG93Qml0cyA+IDAgJiYgb3B0LndpbmRvd0JpdHMgPCAxNikgewogICAgICBvcHQud2luZG93Qml0cyArPSAxNjsKICAgIH0KICAgIHRoaXMuZXJyID0gMDsKICAgIHRoaXMubXNnID0gIiI7CiAgICB0aGlzLmVuZGVkID0gZmFsc2U7CiAgICB0aGlzLmNodW5rcyA9IFtdOwogICAgdGhpcy5zdHJtID0gbmV3IFpTdHJlYW0kMSgpOwogICAgdGhpcy5zdHJtLmF2YWlsX291dCA9IDA7CiAgICB2YXIgc3RhdHVzID0gemxpYl9kZWZsYXRlLmRlZmxhdGVJbml0Mih0aGlzLnN0cm0sIG9wdC5sZXZlbCwgb3B0Lm1ldGhvZCwgb3B0LndpbmRvd0JpdHMsIG9wdC5tZW1MZXZlbCwgb3B0LnN0cmF0ZWd5KTsKICAgIGlmIChzdGF0dXMgIT09IFpfT0skMSkgewogICAgICB0aHJvdyBuZXcgRXJyb3IobXNnJDFbc3RhdHVzXSk7CiAgICB9CiAgICBpZiAob3B0LmhlYWRlcikgewogICAgICB6bGliX2RlZmxhdGUuZGVmbGF0ZVNldEhlYWRlcih0aGlzLnN0cm0sIG9wdC5oZWFkZXIpOwogICAgfQogICAgaWYgKG9wdC5kaWN0aW9uYXJ5KSB7CiAgICAgIHZhciBkaWN0OwogICAgICBpZiAodHlwZW9mIG9wdC5kaWN0aW9uYXJ5ID09PSAic3RyaW5nIikgewogICAgICAgIGRpY3QgPSBzdHJpbmdzJDEuc3RyaW5nMmJ1ZihvcHQuZGljdGlvbmFyeSk7CiAgICAgIH0gZWxzZSBpZiAodG9TdHJpbmckMS5jYWxsKG9wdC5kaWN0aW9uYXJ5KSA9PT0gIltvYmplY3QgQXJyYXlCdWZmZXJdIikgewogICAgICAgIGRpY3QgPSBuZXcgVWludDhBcnJheShvcHQuZGljdGlvbmFyeSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZGljdCA9IG9wdC5kaWN0aW9uYXJ5OwogICAgICB9CiAgICAgIHN0YXR1cyA9IHpsaWJfZGVmbGF0ZS5kZWZsYXRlU2V0RGljdGlvbmFyeSh0aGlzLnN0cm0sIGRpY3QpOwogICAgICBpZiAoc3RhdHVzICE9PSBaX09LJDEpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IobXNnJDFbc3RhdHVzXSk7CiAgICAgIH0KICAgICAgdGhpcy5fZGljdF9zZXQgPSB0cnVlOwogICAgfQogIH0KICBEZWZsYXRlLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24oZGF0YSwgbW9kZSkgewogICAgdmFyIHN0cm0gPSB0aGlzLnN0cm07CiAgICB2YXIgY2h1bmtTaXplID0gdGhpcy5vcHRpb25zLmNodW5rU2l6ZTsKICAgIHZhciBzdGF0dXMsIF9tb2RlOwogICAgaWYgKHRoaXMuZW5kZWQpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgX21vZGUgPSBtb2RlID09PSB+fm1vZGUgPyBtb2RlIDogbW9kZSA9PT0gdHJ1ZSA/IFpfRklOSVNIJDEgOiBaX05PX0ZMVVNIOwogICAgaWYgKHR5cGVvZiBkYXRhID09PSAic3RyaW5nIikgewogICAgICBzdHJtLmlucHV0ID0gc3RyaW5ncyQxLnN0cmluZzJidWYoZGF0YSk7CiAgICB9IGVsc2UgaWYgKHRvU3RyaW5nJDEuY2FsbChkYXRhKSA9PT0gIltvYmplY3QgQXJyYXlCdWZmZXJdIikgewogICAgICBzdHJtLmlucHV0ID0gbmV3IFVpbnQ4QXJyYXkoZGF0YSk7CiAgICB9IGVsc2UgewogICAgICBzdHJtLmlucHV0ID0gZGF0YTsKICAgIH0KICAgIHN0cm0ubmV4dF9pbiA9IDA7CiAgICBzdHJtLmF2YWlsX2luID0gc3RybS5pbnB1dC5sZW5ndGg7CiAgICBkbyB7CiAgICAgIGlmIChzdHJtLmF2YWlsX291dCA9PT0gMCkgewogICAgICAgIHN0cm0ub3V0cHV0ID0gbmV3IHV0aWxzJDMuQnVmOChjaHVua1NpemUpOwogICAgICAgIHN0cm0ubmV4dF9vdXQgPSAwOwogICAgICAgIHN0cm0uYXZhaWxfb3V0ID0gY2h1bmtTaXplOwogICAgICB9CiAgICAgIHN0YXR1cyA9IHpsaWJfZGVmbGF0ZS5kZWZsYXRlKHN0cm0sIF9tb2RlKTsKICAgICAgaWYgKHN0YXR1cyAhPT0gWl9TVFJFQU1fRU5EJDEgJiYgc3RhdHVzICE9PSBaX09LJDEpIHsKICAgICAgICB0aGlzLm9uRW5kKHN0YXR1cyk7CiAgICAgICAgdGhpcy5lbmRlZCA9IHRydWU7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGlmIChzdHJtLmF2YWlsX291dCA9PT0gMCB8fCBzdHJtLmF2YWlsX2luID09PSAwICYmIChfbW9kZSA9PT0gWl9GSU5JU0gkMSB8fCBfbW9kZSA9PT0gWl9TWU5DX0ZMVVNIJDEpKSB7CiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy50byA9PT0gInN0cmluZyIpIHsKICAgICAgICAgIHRoaXMub25EYXRhKHN0cmluZ3MkMS5idWYyYmluc3RyaW5nKHV0aWxzJDMuc2hyaW5rQnVmKHN0cm0ub3V0cHV0LCBzdHJtLm5leHRfb3V0KSkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLm9uRGF0YSh1dGlscyQzLnNocmlua0J1ZihzdHJtLm91dHB1dCwgc3RybS5uZXh0X291dCkpOwogICAgICAgIH0KICAgICAgfQogICAgfSB3aGlsZSAoKHN0cm0uYXZhaWxfaW4gPiAwIHx8IHN0cm0uYXZhaWxfb3V0ID09PSAwKSAmJiBzdGF0dXMgIT09IFpfU1RSRUFNX0VORCQxKTsKICAgIGlmIChfbW9kZSA9PT0gWl9GSU5JU0gkMSkgewogICAgICBzdGF0dXMgPSB6bGliX2RlZmxhdGUuZGVmbGF0ZUVuZCh0aGlzLnN0cm0pOwogICAgICB0aGlzLm9uRW5kKHN0YXR1cyk7CiAgICAgIHRoaXMuZW5kZWQgPSB0cnVlOwogICAgICByZXR1cm4gc3RhdHVzID09PSBaX09LJDE7CiAgICB9CiAgICBpZiAoX21vZGUgPT09IFpfU1lOQ19GTFVTSCQxKSB7CiAgICAgIHRoaXMub25FbmQoWl9PSyQxKTsKICAgICAgc3RybS5hdmFpbF9vdXQgPSAwOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIHJldHVybiB0cnVlOwogIH07CiAgRGVmbGF0ZS5wcm90b3R5cGUub25EYXRhID0gZnVuY3Rpb24oY2h1bmspIHsKICAgIHRoaXMuY2h1bmtzLnB1c2goY2h1bmspOwogIH07CiAgRGVmbGF0ZS5wcm90b3R5cGUub25FbmQgPSBmdW5jdGlvbihzdGF0dXMpIHsKICAgIGlmIChzdGF0dXMgPT09IFpfT0skMSkgewogICAgICBpZiAodGhpcy5vcHRpb25zLnRvID09PSAic3RyaW5nIikgewogICAgICAgIHRoaXMucmVzdWx0ID0gdGhpcy5jaHVua3Muam9pbigiIik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5yZXN1bHQgPSB1dGlscyQzLmZsYXR0ZW5DaHVua3ModGhpcy5jaHVua3MpOwogICAgICB9CiAgICB9CiAgICB0aGlzLmNodW5rcyA9IFtdOwogICAgdGhpcy5lcnIgPSBzdGF0dXM7CiAgICB0aGlzLm1zZyA9IHRoaXMuc3RybS5tc2c7CiAgfTsKICBmdW5jdGlvbiBkZWZsYXRlJDEoaW5wdXQsIG9wdGlvbnMpIHsKICAgIHZhciBkZWZsYXRvciA9IG5ldyBEZWZsYXRlKG9wdGlvbnMpOwogICAgZGVmbGF0b3IucHVzaChpbnB1dCwgdHJ1ZSk7CiAgICBpZiAoZGVmbGF0b3IuZXJyKSB7CiAgICAgIHRocm93IGRlZmxhdG9yLm1zZyB8fCBtc2ckMVtkZWZsYXRvci5lcnJdOwogICAgfQogICAgcmV0dXJuIGRlZmxhdG9yLnJlc3VsdDsKICB9CiAgZnVuY3Rpb24gZGVmbGF0ZVJhdyhpbnB1dCwgb3B0aW9ucykgewogICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CiAgICBvcHRpb25zLnJhdyA9IHRydWU7CiAgICByZXR1cm4gZGVmbGF0ZSQxKGlucHV0LCBvcHRpb25zKTsKICB9CiAgZnVuY3Rpb24gZ3ppcChpbnB1dCwgb3B0aW9ucykgewogICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CiAgICBvcHRpb25zLmd6aXAgPSB0cnVlOwogICAgcmV0dXJuIGRlZmxhdGUkMShpbnB1dCwgb3B0aW9ucyk7CiAgfQogIGRlZmxhdGUkNC5EZWZsYXRlID0gRGVmbGF0ZTsKICBkZWZsYXRlJDQuZGVmbGF0ZSA9IGRlZmxhdGUkMTsKICBkZWZsYXRlJDQuZGVmbGF0ZVJhdyA9IGRlZmxhdGVSYXc7CiAgZGVmbGF0ZSQ0Lmd6aXAgPSBnemlwOwogIHZhciBpbmZsYXRlJDQgPSB7fTsKICB2YXIgaW5mbGF0ZSQzID0ge307CiAgdmFyIEJBRCQxID0gMzA7CiAgdmFyIFRZUEUkMSA9IDEyOwogIHZhciBpbmZmYXN0ID0gZnVuY3Rpb24gaW5mbGF0ZV9mYXN0MihzdHJtLCBzdGFydCkgewogICAgdmFyIHN0YXRlOwogICAgdmFyIF9pbjsKICAgIHZhciBsYXN0OwogICAgdmFyIF9vdXQ7CiAgICB2YXIgYmVnOwogICAgdmFyIGVuZDsKICAgIHZhciBkbWF4OwogICAgdmFyIHdzaXplOwogICAgdmFyIHdoYXZlOwogICAgdmFyIHduZXh0OwogICAgdmFyIHNfd2luZG93OwogICAgdmFyIGhvbGQ7CiAgICB2YXIgYml0czsKICAgIHZhciBsY29kZTsKICAgIHZhciBkY29kZTsKICAgIHZhciBsbWFzazsKICAgIHZhciBkbWFzazsKICAgIHZhciBoZXJlOwogICAgdmFyIG9wOwogICAgdmFyIGxlbjsKICAgIHZhciBkaXN0MjsKICAgIHZhciBmcm9tOwogICAgdmFyIGZyb21fc291cmNlOwogICAgdmFyIGlucHV0LCBvdXRwdXQ7CiAgICBzdGF0ZSA9IHN0cm0uc3RhdGU7CiAgICBfaW4gPSBzdHJtLm5leHRfaW47CiAgICBpbnB1dCA9IHN0cm0uaW5wdXQ7CiAgICBsYXN0ID0gX2luICsgKHN0cm0uYXZhaWxfaW4gLSA1KTsKICAgIF9vdXQgPSBzdHJtLm5leHRfb3V0OwogICAgb3V0cHV0ID0gc3RybS5vdXRwdXQ7CiAgICBiZWcgPSBfb3V0IC0gKHN0YXJ0IC0gc3RybS5hdmFpbF9vdXQpOwogICAgZW5kID0gX291dCArIChzdHJtLmF2YWlsX291dCAtIDI1Nyk7CiAgICBkbWF4ID0gc3RhdGUuZG1heDsKICAgIHdzaXplID0gc3RhdGUud3NpemU7CiAgICB3aGF2ZSA9IHN0YXRlLndoYXZlOwogICAgd25leHQgPSBzdGF0ZS53bmV4dDsKICAgIHNfd2luZG93ID0gc3RhdGUud2luZG93OwogICAgaG9sZCA9IHN0YXRlLmhvbGQ7CiAgICBiaXRzID0gc3RhdGUuYml0czsKICAgIGxjb2RlID0gc3RhdGUubGVuY29kZTsKICAgIGRjb2RlID0gc3RhdGUuZGlzdGNvZGU7CiAgICBsbWFzayA9ICgxIDw8IHN0YXRlLmxlbmJpdHMpIC0gMTsKICAgIGRtYXNrID0gKDEgPDwgc3RhdGUuZGlzdGJpdHMpIC0gMTsKICAgIHRvcDoKICAgICAgZG8gewogICAgICAgIGlmIChiaXRzIDwgMTUpIHsKICAgICAgICAgIGhvbGQgKz0gaW5wdXRbX2luKytdIDw8IGJpdHM7CiAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICBob2xkICs9IGlucHV0W19pbisrXSA8PCBiaXRzOwogICAgICAgICAgYml0cyArPSA4OwogICAgICAgIH0KICAgICAgICBoZXJlID0gbGNvZGVbaG9sZCAmIGxtYXNrXTsKICAgICAgICBkb2xlbjoKICAgICAgICAgIGZvciAoOyA7ICkgewogICAgICAgICAgICBvcCA9IGhlcmUgPj4+IDI0OwogICAgICAgICAgICBob2xkID4+Pj0gb3A7CiAgICAgICAgICAgIGJpdHMgLT0gb3A7CiAgICAgICAgICAgIG9wID0gaGVyZSA+Pj4gMTYgJiAyNTU7CiAgICAgICAgICAgIGlmIChvcCA9PT0gMCkgewogICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gaGVyZSAmIDY1NTM1OwogICAgICAgICAgICB9IGVsc2UgaWYgKG9wICYgMTYpIHsKICAgICAgICAgICAgICBsZW4gPSBoZXJlICYgNjU1MzU7CiAgICAgICAgICAgICAgb3AgJj0gMTU7CiAgICAgICAgICAgICAgaWYgKG9wKSB7CiAgICAgICAgICAgICAgICBpZiAoYml0cyA8IG9wKSB7CiAgICAgICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbX2luKytdIDw8IGJpdHM7CiAgICAgICAgICAgICAgICAgIGJpdHMgKz0gODsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGxlbiArPSBob2xkICYgKDEgPDwgb3ApIC0gMTsKICAgICAgICAgICAgICAgIGhvbGQgPj4+PSBvcDsKICAgICAgICAgICAgICAgIGJpdHMgLT0gb3A7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChiaXRzIDwgMTUpIHsKICAgICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbX2luKytdIDw8IGJpdHM7CiAgICAgICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICAgICAgICBob2xkICs9IGlucHV0W19pbisrXSA8PCBiaXRzOwogICAgICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBoZXJlID0gZGNvZGVbaG9sZCAmIGRtYXNrXTsKICAgICAgICAgICAgICBkb2Rpc3Q6CiAgICAgICAgICAgICAgICBmb3IgKDsgOyApIHsKICAgICAgICAgICAgICAgICAgb3AgPSBoZXJlID4+PiAyNDsKICAgICAgICAgICAgICAgICAgaG9sZCA+Pj49IG9wOwogICAgICAgICAgICAgICAgICBiaXRzIC09IG9wOwogICAgICAgICAgICAgICAgICBvcCA9IGhlcmUgPj4+IDE2ICYgMjU1OwogICAgICAgICAgICAgICAgICBpZiAob3AgJiAxNikgewogICAgICAgICAgICAgICAgICAgIGRpc3QyID0gaGVyZSAmIDY1NTM1OwogICAgICAgICAgICAgICAgICAgIG9wICY9IDE1OwogICAgICAgICAgICAgICAgICAgIGlmIChiaXRzIDwgb3ApIHsKICAgICAgICAgICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbX2luKytdIDw8IGJpdHM7CiAgICAgICAgICAgICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoYml0cyA8IG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbX2luKytdIDw8IGJpdHM7CiAgICAgICAgICAgICAgICAgICAgICAgIGJpdHMgKz0gODsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZGlzdDIgKz0gaG9sZCAmICgxIDw8IG9wKSAtIDE7CiAgICAgICAgICAgICAgICAgICAgaWYgKGRpc3QyID4gZG1heCkgewogICAgICAgICAgICAgICAgICAgICAgc3RybS5tc2cgPSAiaW52YWxpZCBkaXN0YW5jZSB0b28gZmFyIGJhY2siOwogICAgICAgICAgICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRCQxOwogICAgICAgICAgICAgICAgICAgICAgYnJlYWsgdG9wOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBob2xkID4+Pj0gb3A7CiAgICAgICAgICAgICAgICAgICAgYml0cyAtPSBvcDsKICAgICAgICAgICAgICAgICAgICBvcCA9IF9vdXQgLSBiZWc7CiAgICAgICAgICAgICAgICAgICAgaWYgKGRpc3QyID4gb3ApIHsKICAgICAgICAgICAgICAgICAgICAgIG9wID0gZGlzdDIgLSBvcDsKICAgICAgICAgICAgICAgICAgICAgIGlmIChvcCA+IHdoYXZlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5zYW5lKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgc3RybS5tc2cgPSAiaW52YWxpZCBkaXN0YW5jZSB0b28gZmFyIGJhY2siOwogICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQkMTsKICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhayB0b3A7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIGZyb20gPSAwOwogICAgICAgICAgICAgICAgICAgICAgZnJvbV9zb3VyY2UgPSBzX3dpbmRvdzsKICAgICAgICAgICAgICAgICAgICAgIGlmICh3bmV4dCA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBmcm9tICs9IHdzaXplIC0gb3A7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcCA8IGxlbikgewogICAgICAgICAgICAgICAgICAgICAgICAgIGxlbiAtPSBvcDsKICAgICAgICAgICAgICAgICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IHNfd2luZG93W2Zyb20rK107CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSB3aGlsZSAoLS1vcCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSA9IF9vdXQgLSBkaXN0MjsKICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tX3NvdXJjZSA9IG91dHB1dDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh3bmV4dCA8IG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gKz0gd3NpemUgKyB3bmV4dCAtIG9wOwogICAgICAgICAgICAgICAgICAgICAgICBvcCAtPSB3bmV4dDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wIDwgbGVuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgbGVuIC09IG9wOwogICAgICAgICAgICAgICAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gc193aW5kb3dbZnJvbSsrXTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9IHdoaWxlICgtLW9wKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAod25leHQgPCBsZW4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wID0gd25leHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZW4gLT0gb3A7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gc193aW5kb3dbZnJvbSsrXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gd2hpbGUgKC0tb3ApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSA9IF9vdXQgLSBkaXN0MjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb21fc291cmNlID0gb3V0cHV0OwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSArPSB3bmV4dCAtIG9wOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAob3AgPCBsZW4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBsZW4gLT0gb3A7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZG8gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBzX3dpbmRvd1tmcm9tKytdOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0gd2hpbGUgKC0tb3ApOwogICAgICAgICAgICAgICAgICAgICAgICAgIGZyb20gPSBfb3V0IC0gZGlzdDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbV9zb3VyY2UgPSBvdXRwdXQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChsZW4gPiAyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gZnJvbV9zb3VyY2VbZnJvbSsrXTsKICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBmcm9tX3NvdXJjZVtmcm9tKytdOwogICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IGZyb21fc291cmNlW2Zyb20rK107CiAgICAgICAgICAgICAgICAgICAgICAgIGxlbiAtPSAzOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgaWYgKGxlbikgewogICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IGZyb21fc291cmNlW2Zyb20rK107CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsZW4gPiAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBmcm9tX3NvdXJjZVtmcm9tKytdOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIGZyb20gPSBfb3V0IC0gZGlzdDI7CiAgICAgICAgICAgICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gb3V0cHV0W2Zyb20rK107CiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gb3V0cHV0W2Zyb20rK107CiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gb3V0cHV0W2Zyb20rK107CiAgICAgICAgICAgICAgICAgICAgICAgIGxlbiAtPSAzOwogICAgICAgICAgICAgICAgICAgICAgfSB3aGlsZSAobGVuID4gMik7CiAgICAgICAgICAgICAgICAgICAgICBpZiAobGVuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gb3V0cHV0W2Zyb20rK107CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsZW4gPiAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBvdXRwdXRbZnJvbSsrXTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgob3AgJiA2NCkgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICBoZXJlID0gZGNvZGVbKGhlcmUgJiA2NTUzNSkgKyAoaG9sZCAmICgxIDw8IG9wKSAtIDEpXTsKICAgICAgICAgICAgICAgICAgICBjb250aW51ZSBkb2Rpc3Q7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgc3RybS5tc2cgPSAiaW52YWxpZCBkaXN0YW5jZSBjb2RlIjsKICAgICAgICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEJDE7CiAgICAgICAgICAgICAgICAgICAgYnJlYWsgdG9wOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgaWYgKChvcCAmIDY0KSA9PT0gMCkgewogICAgICAgICAgICAgIGhlcmUgPSBsY29kZVsoaGVyZSAmIDY1NTM1KSArIChob2xkICYgKDEgPDwgb3ApIC0gMSldOwogICAgICAgICAgICAgIGNvbnRpbnVlIGRvbGVuOwogICAgICAgICAgICB9IGVsc2UgaWYgKG9wICYgMzIpIHsKICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gVFlQRSQxOwogICAgICAgICAgICAgIGJyZWFrIHRvcDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBzdHJtLm1zZyA9ICJpbnZhbGlkIGxpdGVyYWwvbGVuZ3RoIGNvZGUiOwogICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQkMTsKICAgICAgICAgICAgICBicmVhayB0b3A7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgIH0gd2hpbGUgKF9pbiA8IGxhc3QgJiYgX291dCA8IGVuZCk7CiAgICBsZW4gPSBiaXRzID4+IDM7CiAgICBfaW4gLT0gbGVuOwogICAgYml0cyAtPSBsZW4gPDwgMzsKICAgIGhvbGQgJj0gKDEgPDwgYml0cykgLSAxOwogICAgc3RybS5uZXh0X2luID0gX2luOwogICAgc3RybS5uZXh0X291dCA9IF9vdXQ7CiAgICBzdHJtLmF2YWlsX2luID0gX2luIDwgbGFzdCA/IDUgKyAobGFzdCAtIF9pbikgOiA1IC0gKF9pbiAtIGxhc3QpOwogICAgc3RybS5hdmFpbF9vdXQgPSBfb3V0IDwgZW5kID8gMjU3ICsgKGVuZCAtIF9vdXQpIDogMjU3IC0gKF9vdXQgLSBlbmQpOwogICAgc3RhdGUuaG9sZCA9IGhvbGQ7CiAgICBzdGF0ZS5iaXRzID0gYml0czsKICAgIHJldHVybjsKICB9OwogIHZhciB1dGlscyQyID0gY29tbW9uJDE7CiAgdmFyIE1BWEJJVFMgPSAxNTsKICB2YXIgRU5PVUdIX0xFTlMkMSA9IDg1MjsKICB2YXIgRU5PVUdIX0RJU1RTJDEgPSA1OTI7CiAgdmFyIENPREVTJDEgPSAwOwogIHZhciBMRU5TJDEgPSAxOwogIHZhciBESVNUUyQxID0gMjsKICB2YXIgbGJhc2UgPSBbCiAgICAzLAogICAgNCwKICAgIDUsCiAgICA2LAogICAgNywKICAgIDgsCiAgICA5LAogICAgMTAsCiAgICAxMSwKICAgIDEzLAogICAgMTUsCiAgICAxNywKICAgIDE5LAogICAgMjMsCiAgICAyNywKICAgIDMxLAogICAgMzUsCiAgICA0MywKICAgIDUxLAogICAgNTksCiAgICA2NywKICAgIDgzLAogICAgOTksCiAgICAxMTUsCiAgICAxMzEsCiAgICAxNjMsCiAgICAxOTUsCiAgICAyMjcsCiAgICAyNTgsCiAgICAwLAogICAgMAogIF07CiAgdmFyIGxleHQgPSBbCiAgICAxNiwKICAgIDE2LAogICAgMTYsCiAgICAxNiwKICAgIDE2LAogICAgMTYsCiAgICAxNiwKICAgIDE2LAogICAgMTcsCiAgICAxNywKICAgIDE3LAogICAgMTcsCiAgICAxOCwKICAgIDE4LAogICAgMTgsCiAgICAxOCwKICAgIDE5LAogICAgMTksCiAgICAxOSwKICAgIDE5LAogICAgMjAsCiAgICAyMCwKICAgIDIwLAogICAgMjAsCiAgICAyMSwKICAgIDIxLAogICAgMjEsCiAgICAyMSwKICAgIDE2LAogICAgNzIsCiAgICA3OAogIF07CiAgdmFyIGRiYXNlID0gWwogICAgMSwKICAgIDIsCiAgICAzLAogICAgNCwKICAgIDUsCiAgICA3LAogICAgOSwKICAgIDEzLAogICAgMTcsCiAgICAyNSwKICAgIDMzLAogICAgNDksCiAgICA2NSwKICAgIDk3LAogICAgMTI5LAogICAgMTkzLAogICAgMjU3LAogICAgMzg1LAogICAgNTEzLAogICAgNzY5LAogICAgMTAyNSwKICAgIDE1MzcsCiAgICAyMDQ5LAogICAgMzA3MywKICAgIDQwOTcsCiAgICA2MTQ1LAogICAgODE5MywKICAgIDEyMjg5LAogICAgMTYzODUsCiAgICAyNDU3NywKICAgIDAsCiAgICAwCiAgXTsKICB2YXIgZGV4dCA9IFsKICAgIDE2LAogICAgMTYsCiAgICAxNiwKICAgIDE2LAogICAgMTcsCiAgICAxNywKICAgIDE4LAogICAgMTgsCiAgICAxOSwKICAgIDE5LAogICAgMjAsCiAgICAyMCwKICAgIDIxLAogICAgMjEsCiAgICAyMiwKICAgIDIyLAogICAgMjMsCiAgICAyMywKICAgIDI0LAogICAgMjQsCiAgICAyNSwKICAgIDI1LAogICAgMjYsCiAgICAyNiwKICAgIDI3LAogICAgMjcsCiAgICAyOCwKICAgIDI4LAogICAgMjksCiAgICAyOSwKICAgIDY0LAogICAgNjQKICBdOwogIHZhciBpbmZ0cmVlcyA9IGZ1bmN0aW9uIGluZmxhdGVfdGFibGUyKHR5cGUsIGxlbnMsIGxlbnNfaW5kZXgsIGNvZGVzLCB0YWJsZSwgdGFibGVfaW5kZXgsIHdvcmssIG9wdHMpIHsKICAgIHZhciBiaXRzID0gb3B0cy5iaXRzOwogICAgdmFyIGxlbiA9IDA7CiAgICB2YXIgc3ltID0gMDsKICAgIHZhciBtaW4gPSAwLCBtYXggPSAwOwogICAgdmFyIHJvb3QyID0gMDsKICAgIHZhciBjdXJyID0gMDsKICAgIHZhciBkcm9wID0gMDsKICAgIHZhciBsZWZ0ID0gMDsKICAgIHZhciB1c2VkID0gMDsKICAgIHZhciBodWZmID0gMDsKICAgIHZhciBpbmNyOwogICAgdmFyIGZpbGw7CiAgICB2YXIgbG93OwogICAgdmFyIG1hc2s7CiAgICB2YXIgbmV4dDsKICAgIHZhciBiYXNlID0gbnVsbDsKICAgIHZhciBiYXNlX2luZGV4ID0gMDsKICAgIHZhciBlbmQ7CiAgICB2YXIgY291bnQgPSBuZXcgdXRpbHMkMi5CdWYxNihNQVhCSVRTICsgMSk7CiAgICB2YXIgb2ZmcyA9IG5ldyB1dGlscyQyLkJ1ZjE2KE1BWEJJVFMgKyAxKTsKICAgIHZhciBleHRyYSA9IG51bGw7CiAgICB2YXIgZXh0cmFfaW5kZXggPSAwOwogICAgdmFyIGhlcmVfYml0cywgaGVyZV9vcCwgaGVyZV92YWw7CiAgICBmb3IgKGxlbiA9IDA7IGxlbiA8PSBNQVhCSVRTOyBsZW4rKykgewogICAgICBjb3VudFtsZW5dID0gMDsKICAgIH0KICAgIGZvciAoc3ltID0gMDsgc3ltIDwgY29kZXM7IHN5bSsrKSB7CiAgICAgIGNvdW50W2xlbnNbbGVuc19pbmRleCArIHN5bV1dKys7CiAgICB9CiAgICByb290MiA9IGJpdHM7CiAgICBmb3IgKG1heCA9IE1BWEJJVFM7IG1heCA+PSAxOyBtYXgtLSkgewogICAgICBpZiAoY291bnRbbWF4XSAhPT0gMCkgewogICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CiAgICBpZiAocm9vdDIgPiBtYXgpIHsKICAgICAgcm9vdDIgPSBtYXg7CiAgICB9CiAgICBpZiAobWF4ID09PSAwKSB7CiAgICAgIHRhYmxlW3RhYmxlX2luZGV4KytdID0gMSA8PCAyNCB8IDY0IDw8IDE2IHwgMDsKICAgICAgdGFibGVbdGFibGVfaW5kZXgrK10gPSAxIDw8IDI0IHwgNjQgPDwgMTYgfCAwOwogICAgICBvcHRzLmJpdHMgPSAxOwogICAgICByZXR1cm4gMDsKICAgIH0KICAgIGZvciAobWluID0gMTsgbWluIDwgbWF4OyBtaW4rKykgewogICAgICBpZiAoY291bnRbbWluXSAhPT0gMCkgewogICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CiAgICBpZiAocm9vdDIgPCBtaW4pIHsKICAgICAgcm9vdDIgPSBtaW47CiAgICB9CiAgICBsZWZ0ID0gMTsKICAgIGZvciAobGVuID0gMTsgbGVuIDw9IE1BWEJJVFM7IGxlbisrKSB7CiAgICAgIGxlZnQgPDw9IDE7CiAgICAgIGxlZnQgLT0gY291bnRbbGVuXTsKICAgICAgaWYgKGxlZnQgPCAwKSB7CiAgICAgICAgcmV0dXJuIC0xOwogICAgICB9CiAgICB9CiAgICBpZiAobGVmdCA+IDAgJiYgKHR5cGUgPT09IENPREVTJDEgfHwgbWF4ICE9PSAxKSkgewogICAgICByZXR1cm4gLTE7CiAgICB9CiAgICBvZmZzWzFdID0gMDsKICAgIGZvciAobGVuID0gMTsgbGVuIDwgTUFYQklUUzsgbGVuKyspIHsKICAgICAgb2Zmc1tsZW4gKyAxXSA9IG9mZnNbbGVuXSArIGNvdW50W2xlbl07CiAgICB9CiAgICBmb3IgKHN5bSA9IDA7IHN5bSA8IGNvZGVzOyBzeW0rKykgewogICAgICBpZiAobGVuc1tsZW5zX2luZGV4ICsgc3ltXSAhPT0gMCkgewogICAgICAgIHdvcmtbb2Zmc1tsZW5zW2xlbnNfaW5kZXggKyBzeW1dXSsrXSA9IHN5bTsKICAgICAgfQogICAgfQogICAgaWYgKHR5cGUgPT09IENPREVTJDEpIHsKICAgICAgYmFzZSA9IGV4dHJhID0gd29yazsKICAgICAgZW5kID0gMTk7CiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IExFTlMkMSkgewogICAgICBiYXNlID0gbGJhc2U7CiAgICAgIGJhc2VfaW5kZXggLT0gMjU3OwogICAgICBleHRyYSA9IGxleHQ7CiAgICAgIGV4dHJhX2luZGV4IC09IDI1NzsKICAgICAgZW5kID0gMjU2OwogICAgfSBlbHNlIHsKICAgICAgYmFzZSA9IGRiYXNlOwogICAgICBleHRyYSA9IGRleHQ7CiAgICAgIGVuZCA9IC0xOwogICAgfQogICAgaHVmZiA9IDA7CiAgICBzeW0gPSAwOwogICAgbGVuID0gbWluOwogICAgbmV4dCA9IHRhYmxlX2luZGV4OwogICAgY3VyciA9IHJvb3QyOwogICAgZHJvcCA9IDA7CiAgICBsb3cgPSAtMTsKICAgIHVzZWQgPSAxIDw8IHJvb3QyOwogICAgbWFzayA9IHVzZWQgLSAxOwogICAgaWYgKHR5cGUgPT09IExFTlMkMSAmJiB1c2VkID4gRU5PVUdIX0xFTlMkMSB8fCB0eXBlID09PSBESVNUUyQxICYmIHVzZWQgPiBFTk9VR0hfRElTVFMkMSkgewogICAgICByZXR1cm4gMTsKICAgIH0KICAgIGZvciAoOyA7ICkgewogICAgICBoZXJlX2JpdHMgPSBsZW4gLSBkcm9wOwogICAgICBpZiAod29ya1tzeW1dIDwgZW5kKSB7CiAgICAgICAgaGVyZV9vcCA9IDA7CiAgICAgICAgaGVyZV92YWwgPSB3b3JrW3N5bV07CiAgICAgIH0gZWxzZSBpZiAod29ya1tzeW1dID4gZW5kKSB7CiAgICAgICAgaGVyZV9vcCA9IGV4dHJhW2V4dHJhX2luZGV4ICsgd29ya1tzeW1dXTsKICAgICAgICBoZXJlX3ZhbCA9IGJhc2VbYmFzZV9pbmRleCArIHdvcmtbc3ltXV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaGVyZV9vcCA9IDMyICsgNjQ7CiAgICAgICAgaGVyZV92YWwgPSAwOwogICAgICB9CiAgICAgIGluY3IgPSAxIDw8IGxlbiAtIGRyb3A7CiAgICAgIGZpbGwgPSAxIDw8IGN1cnI7CiAgICAgIG1pbiA9IGZpbGw7CiAgICAgIGRvIHsKICAgICAgICBmaWxsIC09IGluY3I7CiAgICAgICAgdGFibGVbbmV4dCArIChodWZmID4+IGRyb3ApICsgZmlsbF0gPSBoZXJlX2JpdHMgPDwgMjQgfCBoZXJlX29wIDw8IDE2IHwgaGVyZV92YWwgfCAwOwogICAgICB9IHdoaWxlIChmaWxsICE9PSAwKTsKICAgICAgaW5jciA9IDEgPDwgbGVuIC0gMTsKICAgICAgd2hpbGUgKGh1ZmYgJiBpbmNyKSB7CiAgICAgICAgaW5jciA+Pj0gMTsKICAgICAgfQogICAgICBpZiAoaW5jciAhPT0gMCkgewogICAgICAgIGh1ZmYgJj0gaW5jciAtIDE7CiAgICAgICAgaHVmZiArPSBpbmNyOwogICAgICB9IGVsc2UgewogICAgICAgIGh1ZmYgPSAwOwogICAgICB9CiAgICAgIHN5bSsrOwogICAgICBpZiAoLS1jb3VudFtsZW5dID09PSAwKSB7CiAgICAgICAgaWYgKGxlbiA9PT0gbWF4KSB7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgbGVuID0gbGVuc1tsZW5zX2luZGV4ICsgd29ya1tzeW1dXTsKICAgICAgfQogICAgICBpZiAobGVuID4gcm9vdDIgJiYgKGh1ZmYgJiBtYXNrKSAhPT0gbG93KSB7CiAgICAgICAgaWYgKGRyb3AgPT09IDApIHsKICAgICAgICAgIGRyb3AgPSByb290MjsKICAgICAgICB9CiAgICAgICAgbmV4dCArPSBtaW47CiAgICAgICAgY3VyciA9IGxlbiAtIGRyb3A7CiAgICAgICAgbGVmdCA9IDEgPDwgY3VycjsKICAgICAgICB3aGlsZSAoY3VyciArIGRyb3AgPCBtYXgpIHsKICAgICAgICAgIGxlZnQgLT0gY291bnRbY3VyciArIGRyb3BdOwogICAgICAgICAgaWYgKGxlZnQgPD0gMCkgewogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIGN1cnIrKzsKICAgICAgICAgIGxlZnQgPDw9IDE7CiAgICAgICAgfQogICAgICAgIHVzZWQgKz0gMSA8PCBjdXJyOwogICAgICAgIGlmICh0eXBlID09PSBMRU5TJDEgJiYgdXNlZCA+IEVOT1VHSF9MRU5TJDEgfHwgdHlwZSA9PT0gRElTVFMkMSAmJiB1c2VkID4gRU5PVUdIX0RJU1RTJDEpIHsKICAgICAgICAgIHJldHVybiAxOwogICAgICAgIH0KICAgICAgICBsb3cgPSBodWZmICYgbWFzazsKICAgICAgICB0YWJsZVtsb3ddID0gcm9vdDIgPDwgMjQgfCBjdXJyIDw8IDE2IHwgbmV4dCAtIHRhYmxlX2luZGV4IHwgMDsKICAgICAgfQogICAgfQogICAgaWYgKGh1ZmYgIT09IDApIHsKICAgICAgdGFibGVbbmV4dCArIGh1ZmZdID0gbGVuIC0gZHJvcCA8PCAyNCB8IDY0IDw8IDE2IHwgMDsKICAgIH0KICAgIG9wdHMuYml0cyA9IHJvb3QyOwogICAgcmV0dXJuIDA7CiAgfTsKICB2YXIgdXRpbHMkMSA9IGNvbW1vbiQxOwogIHZhciBhZGxlcjMyID0gYWRsZXIzMl8xOwogIHZhciBjcmMzMiA9IGNyYzMyXzE7CiAgdmFyIGluZmxhdGVfZmFzdCA9IGluZmZhc3Q7CiAgdmFyIGluZmxhdGVfdGFibGUgPSBpbmZ0cmVlczsKICB2YXIgQ09ERVMgPSAwOwogIHZhciBMRU5TID0gMTsKICB2YXIgRElTVFMgPSAyOwogIHZhciBaX0ZJTklTSCA9IDQ7CiAgdmFyIFpfQkxPQ0sgPSA1OwogIHZhciBaX1RSRUVTID0gNjsKICB2YXIgWl9PSyA9IDA7CiAgdmFyIFpfU1RSRUFNX0VORCA9IDE7CiAgdmFyIFpfTkVFRF9ESUNUID0gMjsKICB2YXIgWl9TVFJFQU1fRVJST1IgPSAtMjsKICB2YXIgWl9EQVRBX0VSUk9SID0gLTM7CiAgdmFyIFpfTUVNX0VSUk9SID0gLTQ7CiAgdmFyIFpfQlVGX0VSUk9SID0gLTU7CiAgdmFyIFpfREVGTEFURUQgPSA4OwogIHZhciBIRUFEID0gMTsKICB2YXIgRkxBR1MgPSAyOwogIHZhciBUSU1FID0gMzsKICB2YXIgT1MgPSA0OwogIHZhciBFWExFTiA9IDU7CiAgdmFyIEVYVFJBID0gNjsKICB2YXIgTkFNRSA9IDc7CiAgdmFyIENPTU1FTlQgPSA4OwogIHZhciBIQ1JDID0gOTsKICB2YXIgRElDVElEID0gMTA7CiAgdmFyIERJQ1QgPSAxMTsKICB2YXIgVFlQRSA9IDEyOwogIHZhciBUWVBFRE8gPSAxMzsKICB2YXIgU1RPUkVEID0gMTQ7CiAgdmFyIENPUFlfID0gMTU7CiAgdmFyIENPUFkgPSAxNjsKICB2YXIgVEFCTEUgPSAxNzsKICB2YXIgTEVOTEVOUyA9IDE4OwogIHZhciBDT0RFTEVOUyA9IDE5OwogIHZhciBMRU5fID0gMjA7CiAgdmFyIExFTiA9IDIxOwogIHZhciBMRU5FWFQgPSAyMjsKICB2YXIgRElTVCA9IDIzOwogIHZhciBESVNURVhUID0gMjQ7CiAgdmFyIE1BVENIID0gMjU7CiAgdmFyIExJVCA9IDI2OwogIHZhciBDSEVDSyA9IDI3OwogIHZhciBMRU5HVEggPSAyODsKICB2YXIgRE9ORSA9IDI5OwogIHZhciBCQUQgPSAzMDsKICB2YXIgTUVNID0gMzE7CiAgdmFyIFNZTkMgPSAzMjsKICB2YXIgRU5PVUdIX0xFTlMgPSA4NTI7CiAgdmFyIEVOT1VHSF9ESVNUUyA9IDU5MjsKICB2YXIgTUFYX1dCSVRTID0gMTU7CiAgdmFyIERFRl9XQklUUyA9IE1BWF9XQklUUzsKICBmdW5jdGlvbiB6c3dhcDMyKHEyKSB7CiAgICByZXR1cm4gKHEyID4+PiAyNCAmIDI1NSkgKyAocTIgPj4+IDggJiA2NTI4MCkgKyAoKHEyICYgNjUyODApIDw8IDgpICsgKChxMiAmIDI1NSkgPDwgMjQpOwogIH0KICBmdW5jdGlvbiBJbmZsYXRlU3RhdGUoKSB7CiAgICB0aGlzLm1vZGUgPSAwOwogICAgdGhpcy5sYXN0ID0gZmFsc2U7CiAgICB0aGlzLndyYXAgPSAwOwogICAgdGhpcy5oYXZlZGljdCA9IGZhbHNlOwogICAgdGhpcy5mbGFncyA9IDA7CiAgICB0aGlzLmRtYXggPSAwOwogICAgdGhpcy5jaGVjayA9IDA7CiAgICB0aGlzLnRvdGFsID0gMDsKICAgIHRoaXMuaGVhZCA9IG51bGw7CiAgICB0aGlzLndiaXRzID0gMDsKICAgIHRoaXMud3NpemUgPSAwOwogICAgdGhpcy53aGF2ZSA9IDA7CiAgICB0aGlzLnduZXh0ID0gMDsKICAgIHRoaXMud2luZG93ID0gbnVsbDsKICAgIHRoaXMuaG9sZCA9IDA7CiAgICB0aGlzLmJpdHMgPSAwOwogICAgdGhpcy5sZW5ndGggPSAwOwogICAgdGhpcy5vZmZzZXQgPSAwOwogICAgdGhpcy5leHRyYSA9IDA7CiAgICB0aGlzLmxlbmNvZGUgPSBudWxsOwogICAgdGhpcy5kaXN0Y29kZSA9IG51bGw7CiAgICB0aGlzLmxlbmJpdHMgPSAwOwogICAgdGhpcy5kaXN0Yml0cyA9IDA7CiAgICB0aGlzLm5jb2RlID0gMDsKICAgIHRoaXMubmxlbiA9IDA7CiAgICB0aGlzLm5kaXN0ID0gMDsKICAgIHRoaXMuaGF2ZSA9IDA7CiAgICB0aGlzLm5leHQgPSBudWxsOwogICAgdGhpcy5sZW5zID0gbmV3IHV0aWxzJDEuQnVmMTYoMzIwKTsKICAgIHRoaXMud29yayA9IG5ldyB1dGlscyQxLkJ1ZjE2KDI4OCk7CiAgICB0aGlzLmxlbmR5biA9IG51bGw7CiAgICB0aGlzLmRpc3RkeW4gPSBudWxsOwogICAgdGhpcy5zYW5lID0gMDsKICAgIHRoaXMuYmFjayA9IDA7CiAgICB0aGlzLndhcyA9IDA7CiAgfQogIGZ1bmN0aW9uIGluZmxhdGVSZXNldEtlZXAoc3RybSkgewogICAgdmFyIHN0YXRlOwogICAgaWYgKCFzdHJtIHx8ICFzdHJtLnN0YXRlKSB7CiAgICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUjsKICAgIH0KICAgIHN0YXRlID0gc3RybS5zdGF0ZTsKICAgIHN0cm0udG90YWxfaW4gPSBzdHJtLnRvdGFsX291dCA9IHN0YXRlLnRvdGFsID0gMDsKICAgIHN0cm0ubXNnID0gIiI7CiAgICBpZiAoc3RhdGUud3JhcCkgewogICAgICBzdHJtLmFkbGVyID0gc3RhdGUud3JhcCAmIDE7CiAgICB9CiAgICBzdGF0ZS5tb2RlID0gSEVBRDsKICAgIHN0YXRlLmxhc3QgPSAwOwogICAgc3RhdGUuaGF2ZWRpY3QgPSAwOwogICAgc3RhdGUuZG1heCA9IDMyNzY4OwogICAgc3RhdGUuaGVhZCA9IG51bGw7CiAgICBzdGF0ZS5ob2xkID0gMDsKICAgIHN0YXRlLmJpdHMgPSAwOwogICAgc3RhdGUubGVuY29kZSA9IHN0YXRlLmxlbmR5biA9IG5ldyB1dGlscyQxLkJ1ZjMyKEVOT1VHSF9MRU5TKTsKICAgIHN0YXRlLmRpc3Rjb2RlID0gc3RhdGUuZGlzdGR5biA9IG5ldyB1dGlscyQxLkJ1ZjMyKEVOT1VHSF9ESVNUUyk7CiAgICBzdGF0ZS5zYW5lID0gMTsKICAgIHN0YXRlLmJhY2sgPSAtMTsKICAgIHJldHVybiBaX09LOwogIH0KICBmdW5jdGlvbiBpbmZsYXRlUmVzZXQoc3RybSkgewogICAgdmFyIHN0YXRlOwogICAgaWYgKCFzdHJtIHx8ICFzdHJtLnN0YXRlKSB7CiAgICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUjsKICAgIH0KICAgIHN0YXRlID0gc3RybS5zdGF0ZTsKICAgIHN0YXRlLndzaXplID0gMDsKICAgIHN0YXRlLndoYXZlID0gMDsKICAgIHN0YXRlLnduZXh0ID0gMDsKICAgIHJldHVybiBpbmZsYXRlUmVzZXRLZWVwKHN0cm0pOwogIH0KICBmdW5jdGlvbiBpbmZsYXRlUmVzZXQyKHN0cm0sIHdpbmRvd0JpdHMpIHsKICAgIHZhciB3cmFwOwogICAgdmFyIHN0YXRlOwogICAgaWYgKCFzdHJtIHx8ICFzdHJtLnN0YXRlKSB7CiAgICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUjsKICAgIH0KICAgIHN0YXRlID0gc3RybS5zdGF0ZTsKICAgIGlmICh3aW5kb3dCaXRzIDwgMCkgewogICAgICB3cmFwID0gMDsKICAgICAgd2luZG93Qml0cyA9IC13aW5kb3dCaXRzOwogICAgfSBlbHNlIHsKICAgICAgd3JhcCA9ICh3aW5kb3dCaXRzID4+IDQpICsgMTsKICAgICAgaWYgKHdpbmRvd0JpdHMgPCA0OCkgewogICAgICAgIHdpbmRvd0JpdHMgJj0gMTU7CiAgICAgIH0KICAgIH0KICAgIGlmICh3aW5kb3dCaXRzICYmICh3aW5kb3dCaXRzIDwgOCB8fCB3aW5kb3dCaXRzID4gMTUpKSB7CiAgICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUjsKICAgIH0KICAgIGlmIChzdGF0ZS53aW5kb3cgIT09IG51bGwgJiYgc3RhdGUud2JpdHMgIT09IHdpbmRvd0JpdHMpIHsKICAgICAgc3RhdGUud2luZG93ID0gbnVsbDsKICAgIH0KICAgIHN0YXRlLndyYXAgPSB3cmFwOwogICAgc3RhdGUud2JpdHMgPSB3aW5kb3dCaXRzOwogICAgcmV0dXJuIGluZmxhdGVSZXNldChzdHJtKTsKICB9CiAgZnVuY3Rpb24gaW5mbGF0ZUluaXQyKHN0cm0sIHdpbmRvd0JpdHMpIHsKICAgIHZhciByZXQ7CiAgICB2YXIgc3RhdGU7CiAgICBpZiAoIXN0cm0pIHsKICAgICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SOwogICAgfQogICAgc3RhdGUgPSBuZXcgSW5mbGF0ZVN0YXRlKCk7CiAgICBzdHJtLnN0YXRlID0gc3RhdGU7CiAgICBzdGF0ZS53aW5kb3cgPSBudWxsOwogICAgcmV0ID0gaW5mbGF0ZVJlc2V0MihzdHJtLCB3aW5kb3dCaXRzKTsKICAgIGlmIChyZXQgIT09IFpfT0spIHsKICAgICAgc3RybS5zdGF0ZSA9IG51bGw7CiAgICB9CiAgICByZXR1cm4gcmV0OwogIH0KICBmdW5jdGlvbiBpbmZsYXRlSW5pdChzdHJtKSB7CiAgICByZXR1cm4gaW5mbGF0ZUluaXQyKHN0cm0sIERFRl9XQklUUyk7CiAgfQogIHZhciB2aXJnaW4gPSB0cnVlOwogIHZhciBsZW5maXgsIGRpc3RmaXg7CiAgZnVuY3Rpb24gZml4ZWR0YWJsZXMoc3RhdGUpIHsKICAgIGlmICh2aXJnaW4pIHsKICAgICAgdmFyIHN5bTsKICAgICAgbGVuZml4ID0gbmV3IHV0aWxzJDEuQnVmMzIoNTEyKTsKICAgICAgZGlzdGZpeCA9IG5ldyB1dGlscyQxLkJ1ZjMyKDMyKTsKICAgICAgc3ltID0gMDsKICAgICAgd2hpbGUgKHN5bSA8IDE0NCkgewogICAgICAgIHN0YXRlLmxlbnNbc3ltKytdID0gODsKICAgICAgfQogICAgICB3aGlsZSAoc3ltIDwgMjU2KSB7CiAgICAgICAgc3RhdGUubGVuc1tzeW0rK10gPSA5OwogICAgICB9CiAgICAgIHdoaWxlIChzeW0gPCAyODApIHsKICAgICAgICBzdGF0ZS5sZW5zW3N5bSsrXSA9IDc7CiAgICAgIH0KICAgICAgd2hpbGUgKHN5bSA8IDI4OCkgewogICAgICAgIHN0YXRlLmxlbnNbc3ltKytdID0gODsKICAgICAgfQogICAgICBpbmZsYXRlX3RhYmxlKExFTlMsIHN0YXRlLmxlbnMsIDAsIDI4OCwgbGVuZml4LCAwLCBzdGF0ZS53b3JrLCB7IGJpdHM6IDkgfSk7CiAgICAgIHN5bSA9IDA7CiAgICAgIHdoaWxlIChzeW0gPCAzMikgewogICAgICAgIHN0YXRlLmxlbnNbc3ltKytdID0gNTsKICAgICAgfQogICAgICBpbmZsYXRlX3RhYmxlKERJU1RTLCBzdGF0ZS5sZW5zLCAwLCAzMiwgZGlzdGZpeCwgMCwgc3RhdGUud29yaywgeyBiaXRzOiA1IH0pOwogICAgICB2aXJnaW4gPSBmYWxzZTsKICAgIH0KICAgIHN0YXRlLmxlbmNvZGUgPSBsZW5maXg7CiAgICBzdGF0ZS5sZW5iaXRzID0gOTsKICAgIHN0YXRlLmRpc3Rjb2RlID0gZGlzdGZpeDsKICAgIHN0YXRlLmRpc3RiaXRzID0gNTsKICB9CiAgZnVuY3Rpb24gdXBkYXRld2luZG93KHN0cm0sIHNyYywgZW5kLCBjb3B5KSB7CiAgICB2YXIgZGlzdDI7CiAgICB2YXIgc3RhdGUgPSBzdHJtLnN0YXRlOwogICAgaWYgKHN0YXRlLndpbmRvdyA9PT0gbnVsbCkgewogICAgICBzdGF0ZS53c2l6ZSA9IDEgPDwgc3RhdGUud2JpdHM7CiAgICAgIHN0YXRlLnduZXh0ID0gMDsKICAgICAgc3RhdGUud2hhdmUgPSAwOwogICAgICBzdGF0ZS53aW5kb3cgPSBuZXcgdXRpbHMkMS5CdWY4KHN0YXRlLndzaXplKTsKICAgIH0KICAgIGlmIChjb3B5ID49IHN0YXRlLndzaXplKSB7CiAgICAgIHV0aWxzJDEuYXJyYXlTZXQoc3RhdGUud2luZG93LCBzcmMsIGVuZCAtIHN0YXRlLndzaXplLCBzdGF0ZS53c2l6ZSwgMCk7CiAgICAgIHN0YXRlLnduZXh0ID0gMDsKICAgICAgc3RhdGUud2hhdmUgPSBzdGF0ZS53c2l6ZTsKICAgIH0gZWxzZSB7CiAgICAgIGRpc3QyID0gc3RhdGUud3NpemUgLSBzdGF0ZS53bmV4dDsKICAgICAgaWYgKGRpc3QyID4gY29weSkgewogICAgICAgIGRpc3QyID0gY29weTsKICAgICAgfQogICAgICB1dGlscyQxLmFycmF5U2V0KHN0YXRlLndpbmRvdywgc3JjLCBlbmQgLSBjb3B5LCBkaXN0Miwgc3RhdGUud25leHQpOwogICAgICBjb3B5IC09IGRpc3QyOwogICAgICBpZiAoY29weSkgewogICAgICAgIHV0aWxzJDEuYXJyYXlTZXQoc3RhdGUud2luZG93LCBzcmMsIGVuZCAtIGNvcHksIGNvcHksIDApOwogICAgICAgIHN0YXRlLnduZXh0ID0gY29weTsKICAgICAgICBzdGF0ZS53aGF2ZSA9IHN0YXRlLndzaXplOwogICAgICB9IGVsc2UgewogICAgICAgIHN0YXRlLnduZXh0ICs9IGRpc3QyOwogICAgICAgIGlmIChzdGF0ZS53bmV4dCA9PT0gc3RhdGUud3NpemUpIHsKICAgICAgICAgIHN0YXRlLnduZXh0ID0gMDsKICAgICAgICB9CiAgICAgICAgaWYgKHN0YXRlLndoYXZlIDwgc3RhdGUud3NpemUpIHsKICAgICAgICAgIHN0YXRlLndoYXZlICs9IGRpc3QyOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIDA7CiAgfQogIGZ1bmN0aW9uIGluZmxhdGUkMihzdHJtLCBmbHVzaCkgewogICAgdmFyIHN0YXRlOwogICAgdmFyIGlucHV0LCBvdXRwdXQ7CiAgICB2YXIgbmV4dDsKICAgIHZhciBwdXQ7CiAgICB2YXIgaGF2ZSwgbGVmdDsKICAgIHZhciBob2xkOwogICAgdmFyIGJpdHM7CiAgICB2YXIgX2luLCBfb3V0OwogICAgdmFyIGNvcHk7CiAgICB2YXIgZnJvbTsKICAgIHZhciBmcm9tX3NvdXJjZTsKICAgIHZhciBoZXJlID0gMDsKICAgIHZhciBoZXJlX2JpdHMsIGhlcmVfb3AsIGhlcmVfdmFsOwogICAgdmFyIGxhc3RfYml0cywgbGFzdF9vcCwgbGFzdF92YWw7CiAgICB2YXIgbGVuOwogICAgdmFyIHJldDsKICAgIHZhciBoYnVmID0gbmV3IHV0aWxzJDEuQnVmOCg0KTsKICAgIHZhciBvcHRzOwogICAgdmFyIG47CiAgICB2YXIgb3JkZXIgPSBbMTYsIDE3LCAxOCwgMCwgOCwgNywgOSwgNiwgMTAsIDUsIDExLCA0LCAxMiwgMywgMTMsIDIsIDE0LCAxLCAxNV07CiAgICBpZiAoIXN0cm0gfHwgIXN0cm0uc3RhdGUgfHwgIXN0cm0ub3V0cHV0IHx8ICFzdHJtLmlucHV0ICYmIHN0cm0uYXZhaWxfaW4gIT09IDApIHsKICAgICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SOwogICAgfQogICAgc3RhdGUgPSBzdHJtLnN0YXRlOwogICAgaWYgKHN0YXRlLm1vZGUgPT09IFRZUEUpIHsKICAgICAgc3RhdGUubW9kZSA9IFRZUEVETzsKICAgIH0KICAgIHB1dCA9IHN0cm0ubmV4dF9vdXQ7CiAgICBvdXRwdXQgPSBzdHJtLm91dHB1dDsKICAgIGxlZnQgPSBzdHJtLmF2YWlsX291dDsKICAgIG5leHQgPSBzdHJtLm5leHRfaW47CiAgICBpbnB1dCA9IHN0cm0uaW5wdXQ7CiAgICBoYXZlID0gc3RybS5hdmFpbF9pbjsKICAgIGhvbGQgPSBzdGF0ZS5ob2xkOwogICAgYml0cyA9IHN0YXRlLmJpdHM7CiAgICBfaW4gPSBoYXZlOwogICAgX291dCA9IGxlZnQ7CiAgICByZXQgPSBaX09LOwogICAgaW5mX2xlYXZlOgogICAgICBmb3IgKDsgOyApIHsKICAgICAgICBzd2l0Y2ggKHN0YXRlLm1vZGUpIHsKICAgICAgICAgIGNhc2UgSEVBRDoKICAgICAgICAgICAgaWYgKHN0YXRlLndyYXAgPT09IDApIHsKICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gVFlQRURPOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHdoaWxlIChiaXRzIDwgMTYpIHsKICAgICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgewogICAgICAgICAgICAgICAgYnJlYWsgaW5mX2xlYXZlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBoYXZlLS07CiAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChzdGF0ZS53cmFwICYgMiAmJiBob2xkID09PSAzNTYxNSkgewogICAgICAgICAgICAgIHN0YXRlLmNoZWNrID0gMDsKICAgICAgICAgICAgICBoYnVmWzBdID0gaG9sZCAmIDI1NTsKICAgICAgICAgICAgICBoYnVmWzFdID0gaG9sZCA+Pj4gOCAmIDI1NTsKICAgICAgICAgICAgICBzdGF0ZS5jaGVjayA9IGNyYzMyKHN0YXRlLmNoZWNrLCBoYnVmLCAyLCAwKTsKICAgICAgICAgICAgICBob2xkID0gMDsKICAgICAgICAgICAgICBiaXRzID0gMDsKICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gRkxBR1M7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc3RhdGUuZmxhZ3MgPSAwOwogICAgICAgICAgICBpZiAoc3RhdGUuaGVhZCkgewogICAgICAgICAgICAgIHN0YXRlLmhlYWQuZG9uZSA9IGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICghKHN0YXRlLndyYXAgJiAxKSB8fCAoKChob2xkICYgMjU1KSA8PCA4KSArIChob2xkID4+IDgpKSAlIDMxKSB7CiAgICAgICAgICAgICAgc3RybS5tc2cgPSAiaW5jb3JyZWN0IGhlYWRlciBjaGVjayI7CiAgICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoKGhvbGQgJiAxNSkgIT09IFpfREVGTEFURUQpIHsKICAgICAgICAgICAgICBzdHJtLm1zZyA9ICJ1bmtub3duIGNvbXByZXNzaW9uIG1ldGhvZCI7CiAgICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBob2xkID4+Pj0gNDsKICAgICAgICAgICAgYml0cyAtPSA0OwogICAgICAgICAgICBsZW4gPSAoaG9sZCAmIDE1KSArIDg7CiAgICAgICAgICAgIGlmIChzdGF0ZS53Yml0cyA9PT0gMCkgewogICAgICAgICAgICAgIHN0YXRlLndiaXRzID0gbGVuOwogICAgICAgICAgICB9IGVsc2UgaWYgKGxlbiA+IHN0YXRlLndiaXRzKSB7CiAgICAgICAgICAgICAgc3RybS5tc2cgPSAiaW52YWxpZCB3aW5kb3cgc2l6ZSI7CiAgICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBzdGF0ZS5kbWF4ID0gMSA8PCBsZW47CiAgICAgICAgICAgIHN0cm0uYWRsZXIgPSBzdGF0ZS5jaGVjayA9IDE7CiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBob2xkICYgNTEyID8gRElDVElEIDogVFlQRTsKICAgICAgICAgICAgaG9sZCA9IDA7CiAgICAgICAgICAgIGJpdHMgPSAwOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgRkxBR1M6CiAgICAgICAgICAgIHdoaWxlIChiaXRzIDwgMTYpIHsKICAgICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgewogICAgICAgICAgICAgICAgYnJlYWsgaW5mX2xlYXZlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBoYXZlLS07CiAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHN0YXRlLmZsYWdzID0gaG9sZDsKICAgICAgICAgICAgaWYgKChzdGF0ZS5mbGFncyAmIDI1NSkgIT09IFpfREVGTEFURUQpIHsKICAgICAgICAgICAgICBzdHJtLm1zZyA9ICJ1bmtub3duIGNvbXByZXNzaW9uIG1ldGhvZCI7CiAgICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoc3RhdGUuZmxhZ3MgJiA1NzM0NCkgewogICAgICAgICAgICAgIHN0cm0ubXNnID0gInVua25vd24gaGVhZGVyIGZsYWdzIHNldCI7CiAgICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoc3RhdGUuaGVhZCkgewogICAgICAgICAgICAgIHN0YXRlLmhlYWQudGV4dCA9IGhvbGQgPj4gOCAmIDE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHN0YXRlLmZsYWdzICYgNTEyKSB7CiAgICAgICAgICAgICAgaGJ1ZlswXSA9IGhvbGQgJiAyNTU7CiAgICAgICAgICAgICAgaGJ1ZlsxXSA9IGhvbGQgPj4+IDggJiAyNTU7CiAgICAgICAgICAgICAgc3RhdGUuY2hlY2sgPSBjcmMzMihzdGF0ZS5jaGVjaywgaGJ1ZiwgMiwgMCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaG9sZCA9IDA7CiAgICAgICAgICAgIGJpdHMgPSAwOwogICAgICAgICAgICBzdGF0ZS5tb2RlID0gVElNRTsKICAgICAgICAgIGNhc2UgVElNRToKICAgICAgICAgICAgd2hpbGUgKGJpdHMgPCAzMikgewogICAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7CiAgICAgICAgICAgICAgICBicmVhayBpbmZfbGVhdmU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGhhdmUtLTsKICAgICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0czsKICAgICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHN0YXRlLmhlYWQpIHsKICAgICAgICAgICAgICBzdGF0ZS5oZWFkLnRpbWUgPSBob2xkOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDUxMikgewogICAgICAgICAgICAgIGhidWZbMF0gPSBob2xkICYgMjU1OwogICAgICAgICAgICAgIGhidWZbMV0gPSBob2xkID4+PiA4ICYgMjU1OwogICAgICAgICAgICAgIGhidWZbMl0gPSBob2xkID4+PiAxNiAmIDI1NTsKICAgICAgICAgICAgICBoYnVmWzNdID0gaG9sZCA+Pj4gMjQgJiAyNTU7CiAgICAgICAgICAgICAgc3RhdGUuY2hlY2sgPSBjcmMzMihzdGF0ZS5jaGVjaywgaGJ1ZiwgNCwgMCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaG9sZCA9IDA7CiAgICAgICAgICAgIGJpdHMgPSAwOwogICAgICAgICAgICBzdGF0ZS5tb2RlID0gT1M7CiAgICAgICAgICBjYXNlIE9TOgogICAgICAgICAgICB3aGlsZSAoYml0cyA8IDE2KSB7CiAgICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsKICAgICAgICAgICAgICAgIGJyZWFrIGluZl9sZWF2ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaGF2ZS0tOwogICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzOwogICAgICAgICAgICAgIGJpdHMgKz0gODsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoc3RhdGUuaGVhZCkgewogICAgICAgICAgICAgIHN0YXRlLmhlYWQueGZsYWdzID0gaG9sZCAmIDI1NTsKICAgICAgICAgICAgICBzdGF0ZS5oZWFkLm9zID0gaG9sZCA+PiA4OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDUxMikgewogICAgICAgICAgICAgIGhidWZbMF0gPSBob2xkICYgMjU1OwogICAgICAgICAgICAgIGhidWZbMV0gPSBob2xkID4+PiA4ICYgMjU1OwogICAgICAgICAgICAgIHN0YXRlLmNoZWNrID0gY3JjMzIoc3RhdGUuY2hlY2ssIGhidWYsIDIsIDApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGhvbGQgPSAwOwogICAgICAgICAgICBiaXRzID0gMDsKICAgICAgICAgICAgc3RhdGUubW9kZSA9IEVYTEVOOwogICAgICAgICAgY2FzZSBFWExFTjoKICAgICAgICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMTAyNCkgewogICAgICAgICAgICAgIHdoaWxlIChiaXRzIDwgMTYpIHsKICAgICAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7CiAgICAgICAgICAgICAgICAgIGJyZWFrIGluZl9sZWF2ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGhhdmUtLTsKICAgICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzOwogICAgICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBzdGF0ZS5sZW5ndGggPSBob2xkOwogICAgICAgICAgICAgIGlmIChzdGF0ZS5oZWFkKSB7CiAgICAgICAgICAgICAgICBzdGF0ZS5oZWFkLmV4dHJhX2xlbiA9IGhvbGQ7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDUxMikgewogICAgICAgICAgICAgICAgaGJ1ZlswXSA9IGhvbGQgJiAyNTU7CiAgICAgICAgICAgICAgICBoYnVmWzFdID0gaG9sZCA+Pj4gOCAmIDI1NTsKICAgICAgICAgICAgICAgIHN0YXRlLmNoZWNrID0gY3JjMzIoc3RhdGUuY2hlY2ssIGhidWYsIDIsIDApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBob2xkID0gMDsKICAgICAgICAgICAgICBiaXRzID0gMDsKICAgICAgICAgICAgfSBlbHNlIGlmIChzdGF0ZS5oZWFkKSB7CiAgICAgICAgICAgICAgc3RhdGUuaGVhZC5leHRyYSA9IG51bGw7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc3RhdGUubW9kZSA9IEVYVFJBOwogICAgICAgICAgY2FzZSBFWFRSQToKICAgICAgICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMTAyNCkgewogICAgICAgICAgICAgIGNvcHkgPSBzdGF0ZS5sZW5ndGg7CiAgICAgICAgICAgICAgaWYgKGNvcHkgPiBoYXZlKSB7CiAgICAgICAgICAgICAgICBjb3B5ID0gaGF2ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKGNvcHkpIHsKICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5oZWFkKSB7CiAgICAgICAgICAgICAgICAgIGxlbiA9IHN0YXRlLmhlYWQuZXh0cmFfbGVuIC0gc3RhdGUubGVuZ3RoOwogICAgICAgICAgICAgICAgICBpZiAoIXN0YXRlLmhlYWQuZXh0cmEpIHsKICAgICAgICAgICAgICAgICAgICBzdGF0ZS5oZWFkLmV4dHJhID0gbmV3IEFycmF5KHN0YXRlLmhlYWQuZXh0cmFfbGVuKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB1dGlscyQxLmFycmF5U2V0KHN0YXRlLmhlYWQuZXh0cmEsIGlucHV0LCBuZXh0LCBjb3B5LCBsZW4pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHN0YXRlLmZsYWdzICYgNTEyKSB7CiAgICAgICAgICAgICAgICAgIHN0YXRlLmNoZWNrID0gY3JjMzIoc3RhdGUuY2hlY2ssIGlucHV0LCBjb3B5LCBuZXh0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGhhdmUgLT0gY29weTsKICAgICAgICAgICAgICAgIG5leHQgKz0gY29weTsKICAgICAgICAgICAgICAgIHN0YXRlLmxlbmd0aCAtPSBjb3B5OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoc3RhdGUubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICBicmVhayBpbmZfbGVhdmU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHN0YXRlLmxlbmd0aCA9IDA7CiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBOQU1FOwogICAgICAgICAgY2FzZSBOQU1FOgogICAgICAgICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAyMDQ4KSB7CiAgICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsKICAgICAgICAgICAgICAgIGJyZWFrIGluZl9sZWF2ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgY29weSA9IDA7CiAgICAgICAgICAgICAgZG8gewogICAgICAgICAgICAgICAgbGVuID0gaW5wdXRbbmV4dCArIGNvcHkrK107CiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuaGVhZCAmJiBsZW4gJiYgc3RhdGUubGVuZ3RoIDwgNjU1MzYpIHsKICAgICAgICAgICAgICAgICAgc3RhdGUuaGVhZC5uYW1lICs9IFN0cmluZy5mcm9tQ2hhckNvZGUobGVuKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IHdoaWxlIChsZW4gJiYgY29weSA8IGhhdmUpOwogICAgICAgICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDUxMikgewogICAgICAgICAgICAgICAgc3RhdGUuY2hlY2sgPSBjcmMzMihzdGF0ZS5jaGVjaywgaW5wdXQsIGNvcHksIG5leHQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBoYXZlIC09IGNvcHk7CiAgICAgICAgICAgICAgbmV4dCArPSBjb3B5OwogICAgICAgICAgICAgIGlmIChsZW4pIHsKICAgICAgICAgICAgICAgIGJyZWFrIGluZl9sZWF2ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdGUuaGVhZCkgewogICAgICAgICAgICAgIHN0YXRlLmhlYWQubmFtZSA9IG51bGw7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc3RhdGUubGVuZ3RoID0gMDsKICAgICAgICAgICAgc3RhdGUubW9kZSA9IENPTU1FTlQ7CiAgICAgICAgICBjYXNlIENPTU1FTlQ6CiAgICAgICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDQwOTYpIHsKICAgICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgewogICAgICAgICAgICAgICAgYnJlYWsgaW5mX2xlYXZlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBjb3B5ID0gMDsKICAgICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICBsZW4gPSBpbnB1dFtuZXh0ICsgY29weSsrXTsKICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5oZWFkICYmIGxlbiAmJiBzdGF0ZS5sZW5ndGggPCA2NTUzNikgewogICAgICAgICAgICAgICAgICBzdGF0ZS5oZWFkLmNvbW1lbnQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShsZW4pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gd2hpbGUgKGxlbiAmJiBjb3B5IDwgaGF2ZSk7CiAgICAgICAgICAgICAgaWYgKHN0YXRlLmZsYWdzICYgNTEyKSB7CiAgICAgICAgICAgICAgICBzdGF0ZS5jaGVjayA9IGNyYzMyKHN0YXRlLmNoZWNrLCBpbnB1dCwgY29weSwgbmV4dCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGhhdmUgLT0gY29weTsKICAgICAgICAgICAgICBuZXh0ICs9IGNvcHk7CiAgICAgICAgICAgICAgaWYgKGxlbikgewogICAgICAgICAgICAgICAgYnJlYWsgaW5mX2xlYXZlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIGlmIChzdGF0ZS5oZWFkKSB7CiAgICAgICAgICAgICAgc3RhdGUuaGVhZC5jb21tZW50ID0gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgICAgICBzdGF0ZS5tb2RlID0gSENSQzsKICAgICAgICAgIGNhc2UgSENSQzoKICAgICAgICAgICAgaWYgKHN0YXRlLmZsYWdzICYgNTEyKSB7CiAgICAgICAgICAgICAgd2hpbGUgKGJpdHMgPCAxNikgewogICAgICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsKICAgICAgICAgICAgICAgICAgYnJlYWsgaW5mX2xlYXZlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaGF2ZS0tOwogICAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChob2xkICE9PSAoc3RhdGUuY2hlY2sgJiA2NTUzNSkpIHsKICAgICAgICAgICAgICAgIHN0cm0ubXNnID0gImhlYWRlciBjcmMgbWlzbWF0Y2giOwogICAgICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBob2xkID0gMDsKICAgICAgICAgICAgICBiaXRzID0gMDsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoc3RhdGUuaGVhZCkgewogICAgICAgICAgICAgIHN0YXRlLmhlYWQuaGNyYyA9IHN0YXRlLmZsYWdzID4+IDkgJiAxOwogICAgICAgICAgICAgIHN0YXRlLmhlYWQuZG9uZSA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc3RybS5hZGxlciA9IHN0YXRlLmNoZWNrID0gMDsKICAgICAgICAgICAgc3RhdGUubW9kZSA9IFRZUEU7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSBESUNUSUQ6CiAgICAgICAgICAgIHdoaWxlIChiaXRzIDwgMzIpIHsKICAgICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgewogICAgICAgICAgICAgICAgYnJlYWsgaW5mX2xlYXZlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBoYXZlLS07CiAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHN0cm0uYWRsZXIgPSBzdGF0ZS5jaGVjayA9IHpzd2FwMzIoaG9sZCk7CiAgICAgICAgICAgIGhvbGQgPSAwOwogICAgICAgICAgICBiaXRzID0gMDsKICAgICAgICAgICAgc3RhdGUubW9kZSA9IERJQ1Q7CiAgICAgICAgICBjYXNlIERJQ1Q6CiAgICAgICAgICAgIGlmIChzdGF0ZS5oYXZlZGljdCA9PT0gMCkgewogICAgICAgICAgICAgIHN0cm0ubmV4dF9vdXQgPSBwdXQ7CiAgICAgICAgICAgICAgc3RybS5hdmFpbF9vdXQgPSBsZWZ0OwogICAgICAgICAgICAgIHN0cm0ubmV4dF9pbiA9IG5leHQ7CiAgICAgICAgICAgICAgc3RybS5hdmFpbF9pbiA9IGhhdmU7CiAgICAgICAgICAgICAgc3RhdGUuaG9sZCA9IGhvbGQ7CiAgICAgICAgICAgICAgc3RhdGUuYml0cyA9IGJpdHM7CiAgICAgICAgICAgICAgcmV0dXJuIFpfTkVFRF9ESUNUOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHN0cm0uYWRsZXIgPSBzdGF0ZS5jaGVjayA9IDE7CiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBUWVBFOwogICAgICAgICAgY2FzZSBUWVBFOgogICAgICAgICAgICBpZiAoZmx1c2ggPT09IFpfQkxPQ0sgfHwgZmx1c2ggPT09IFpfVFJFRVMpIHsKICAgICAgICAgICAgICBicmVhayBpbmZfbGVhdmU7CiAgICAgICAgICAgIH0KICAgICAgICAgIGNhc2UgVFlQRURPOgogICAgICAgICAgICBpZiAoc3RhdGUubGFzdCkgewogICAgICAgICAgICAgIGhvbGQgPj4+PSBiaXRzICYgNzsKICAgICAgICAgICAgICBiaXRzIC09IGJpdHMgJiA3OwogICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBDSEVDSzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICB3aGlsZSAoYml0cyA8IDMpIHsKICAgICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgewogICAgICAgICAgICAgICAgYnJlYWsgaW5mX2xlYXZlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBoYXZlLS07CiAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHN0YXRlLmxhc3QgPSBob2xkICYgMTsKICAgICAgICAgICAgaG9sZCA+Pj49IDE7CiAgICAgICAgICAgIGJpdHMgLT0gMTsKICAgICAgICAgICAgc3dpdGNoIChob2xkICYgMykgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBTVE9SRUQ7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICBmaXhlZHRhYmxlcyhzdGF0ZSk7CiAgICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gTEVOXzsKICAgICAgICAgICAgICAgIGlmIChmbHVzaCA9PT0gWl9UUkVFUykgewogICAgICAgICAgICAgICAgICBob2xkID4+Pj0gMjsKICAgICAgICAgICAgICAgICAgYml0cyAtPSAyOwogICAgICAgICAgICAgICAgICBicmVhayBpbmZfbGVhdmU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gVEFCTEU7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBzdHJtLm1zZyA9ICJpbnZhbGlkIGJsb2NrIHR5cGUiOwogICAgICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDsKICAgICAgICAgICAgfQogICAgICAgICAgICBob2xkID4+Pj0gMjsKICAgICAgICAgICAgYml0cyAtPSAyOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgU1RPUkVEOgogICAgICAgICAgICBob2xkID4+Pj0gYml0cyAmIDc7CiAgICAgICAgICAgIGJpdHMgLT0gYml0cyAmIDc7CiAgICAgICAgICAgIHdoaWxlIChiaXRzIDwgMzIpIHsKICAgICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgewogICAgICAgICAgICAgICAgYnJlYWsgaW5mX2xlYXZlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBoYXZlLS07CiAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICgoaG9sZCAmIDY1NTM1KSAhPT0gKGhvbGQgPj4+IDE2IF4gNjU1MzUpKSB7CiAgICAgICAgICAgICAgc3RybS5tc2cgPSAiaW52YWxpZCBzdG9yZWQgYmxvY2sgbGVuZ3RocyI7CiAgICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBzdGF0ZS5sZW5ndGggPSBob2xkICYgNjU1MzU7CiAgICAgICAgICAgIGhvbGQgPSAwOwogICAgICAgICAgICBiaXRzID0gMDsKICAgICAgICAgICAgc3RhdGUubW9kZSA9IENPUFlfOwogICAgICAgICAgICBpZiAoZmx1c2ggPT09IFpfVFJFRVMpIHsKICAgICAgICAgICAgICBicmVhayBpbmZfbGVhdmU7CiAgICAgICAgICAgIH0KICAgICAgICAgIGNhc2UgQ09QWV86CiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBDT1BZOwogICAgICAgICAgY2FzZSBDT1BZOgogICAgICAgICAgICBjb3B5ID0gc3RhdGUubGVuZ3RoOwogICAgICAgICAgICBpZiAoY29weSkgewogICAgICAgICAgICAgIGlmIChjb3B5ID4gaGF2ZSkgewogICAgICAgICAgICAgICAgY29weSA9IGhhdmU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChjb3B5ID4gbGVmdCkgewogICAgICAgICAgICAgICAgY29weSA9IGxlZnQ7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChjb3B5ID09PSAwKSB7CiAgICAgICAgICAgICAgICBicmVhayBpbmZfbGVhdmU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHV0aWxzJDEuYXJyYXlTZXQob3V0cHV0LCBpbnB1dCwgbmV4dCwgY29weSwgcHV0KTsKICAgICAgICAgICAgICBoYXZlIC09IGNvcHk7CiAgICAgICAgICAgICAgbmV4dCArPSBjb3B5OwogICAgICAgICAgICAgIGxlZnQgLT0gY29weTsKICAgICAgICAgICAgICBwdXQgKz0gY29weTsKICAgICAgICAgICAgICBzdGF0ZS5sZW5ndGggLT0gY29weTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBzdGF0ZS5tb2RlID0gVFlQRTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIFRBQkxFOgogICAgICAgICAgICB3aGlsZSAoYml0cyA8IDE0KSB7CiAgICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsKICAgICAgICAgICAgICAgIGJyZWFrIGluZl9sZWF2ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaGF2ZS0tOwogICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzOwogICAgICAgICAgICAgIGJpdHMgKz0gODsKICAgICAgICAgICAgfQogICAgICAgICAgICBzdGF0ZS5ubGVuID0gKGhvbGQgJiAzMSkgKyAyNTc7CiAgICAgICAgICAgIGhvbGQgPj4+PSA1OwogICAgICAgICAgICBiaXRzIC09IDU7CiAgICAgICAgICAgIHN0YXRlLm5kaXN0ID0gKGhvbGQgJiAzMSkgKyAxOwogICAgICAgICAgICBob2xkID4+Pj0gNTsKICAgICAgICAgICAgYml0cyAtPSA1OwogICAgICAgICAgICBzdGF0ZS5uY29kZSA9IChob2xkICYgMTUpICsgNDsKICAgICAgICAgICAgaG9sZCA+Pj49IDQ7CiAgICAgICAgICAgIGJpdHMgLT0gNDsKICAgICAgICAgICAgaWYgKHN0YXRlLm5sZW4gPiAyODYgfHwgc3RhdGUubmRpc3QgPiAzMCkgewogICAgICAgICAgICAgIHN0cm0ubXNnID0gInRvbyBtYW55IGxlbmd0aCBvciBkaXN0YW5jZSBzeW1ib2xzIjsKICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHN0YXRlLmhhdmUgPSAwOwogICAgICAgICAgICBzdGF0ZS5tb2RlID0gTEVOTEVOUzsKICAgICAgICAgIGNhc2UgTEVOTEVOUzoKICAgICAgICAgICAgd2hpbGUgKHN0YXRlLmhhdmUgPCBzdGF0ZS5uY29kZSkgewogICAgICAgICAgICAgIHdoaWxlIChiaXRzIDwgMykgewogICAgICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsKICAgICAgICAgICAgICAgICAgYnJlYWsgaW5mX2xlYXZlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaGF2ZS0tOwogICAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHN0YXRlLmxlbnNbb3JkZXJbc3RhdGUuaGF2ZSsrXV0gPSBob2xkICYgNzsKICAgICAgICAgICAgICBob2xkID4+Pj0gMzsKICAgICAgICAgICAgICBiaXRzIC09IDM7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgd2hpbGUgKHN0YXRlLmhhdmUgPCAxOSkgewogICAgICAgICAgICAgIHN0YXRlLmxlbnNbb3JkZXJbc3RhdGUuaGF2ZSsrXV0gPSAwOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHN0YXRlLmxlbmNvZGUgPSBzdGF0ZS5sZW5keW47CiAgICAgICAgICAgIHN0YXRlLmxlbmJpdHMgPSA3OwogICAgICAgICAgICBvcHRzID0geyBiaXRzOiBzdGF0ZS5sZW5iaXRzIH07CiAgICAgICAgICAgIHJldCA9IGluZmxhdGVfdGFibGUoQ09ERVMsIHN0YXRlLmxlbnMsIDAsIDE5LCBzdGF0ZS5sZW5jb2RlLCAwLCBzdGF0ZS53b3JrLCBvcHRzKTsKICAgICAgICAgICAgc3RhdGUubGVuYml0cyA9IG9wdHMuYml0czsKICAgICAgICAgICAgaWYgKHJldCkgewogICAgICAgICAgICAgIHN0cm0ubXNnID0gImludmFsaWQgY29kZSBsZW5ndGhzIHNldCI7CiAgICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBzdGF0ZS5oYXZlID0gMDsKICAgICAgICAgICAgc3RhdGUubW9kZSA9IENPREVMRU5TOwogICAgICAgICAgY2FzZSBDT0RFTEVOUzoKICAgICAgICAgICAgd2hpbGUgKHN0YXRlLmhhdmUgPCBzdGF0ZS5ubGVuICsgc3RhdGUubmRpc3QpIHsKICAgICAgICAgICAgICBmb3IgKDsgOyApIHsKICAgICAgICAgICAgICAgIGhlcmUgPSBzdGF0ZS5sZW5jb2RlW2hvbGQgJiAoMSA8PCBzdGF0ZS5sZW5iaXRzKSAtIDFdOwogICAgICAgICAgICAgICAgaGVyZV9iaXRzID0gaGVyZSA+Pj4gMjQ7CiAgICAgICAgICAgICAgICBoZXJlX29wID0gaGVyZSA+Pj4gMTYgJiAyNTU7CiAgICAgICAgICAgICAgICBoZXJlX3ZhbCA9IGhlcmUgJiA2NTUzNTsKICAgICAgICAgICAgICAgIGlmIChoZXJlX2JpdHMgPD0gYml0cykgewogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7CiAgICAgICAgICAgICAgICAgIGJyZWFrIGluZl9sZWF2ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGhhdmUtLTsKICAgICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzOwogICAgICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoaGVyZV92YWwgPCAxNikgewogICAgICAgICAgICAgICAgaG9sZCA+Pj49IGhlcmVfYml0czsKICAgICAgICAgICAgICAgIGJpdHMgLT0gaGVyZV9iaXRzOwogICAgICAgICAgICAgICAgc3RhdGUubGVuc1tzdGF0ZS5oYXZlKytdID0gaGVyZV92YWw7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGlmIChoZXJlX3ZhbCA9PT0gMTYpIHsKICAgICAgICAgICAgICAgICAgbiA9IGhlcmVfYml0cyArIDI7CiAgICAgICAgICAgICAgICAgIHdoaWxlIChiaXRzIDwgbikgewogICAgICAgICAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICBicmVhayBpbmZfbGVhdmU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGhhdmUtLTsKICAgICAgICAgICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0czsKICAgICAgICAgICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgaG9sZCA+Pj49IGhlcmVfYml0czsKICAgICAgICAgICAgICAgICAgYml0cyAtPSBoZXJlX2JpdHM7CiAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5oYXZlID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgc3RybS5tc2cgPSAiaW52YWxpZCBiaXQgbGVuZ3RoIHJlcGVhdCI7CiAgICAgICAgICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBsZW4gPSBzdGF0ZS5sZW5zW3N0YXRlLmhhdmUgLSAxXTsKICAgICAgICAgICAgICAgICAgY29weSA9IDMgKyAoaG9sZCAmIDMpOwogICAgICAgICAgICAgICAgICBob2xkID4+Pj0gMjsKICAgICAgICAgICAgICAgICAgYml0cyAtPSAyOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChoZXJlX3ZhbCA9PT0gMTcpIHsKICAgICAgICAgICAgICAgICAgbiA9IGhlcmVfYml0cyArIDM7CiAgICAgICAgICAgICAgICAgIHdoaWxlIChiaXRzIDwgbikgewogICAgICAgICAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICBicmVhayBpbmZfbGVhdmU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGhhdmUtLTsKICAgICAgICAgICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0czsKICAgICAgICAgICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgaG9sZCA+Pj49IGhlcmVfYml0czsKICAgICAgICAgICAgICAgICAgYml0cyAtPSBoZXJlX2JpdHM7CiAgICAgICAgICAgICAgICAgIGxlbiA9IDA7CiAgICAgICAgICAgICAgICAgIGNvcHkgPSAzICsgKGhvbGQgJiA3KTsKICAgICAgICAgICAgICAgICAgaG9sZCA+Pj49IDM7CiAgICAgICAgICAgICAgICAgIGJpdHMgLT0gMzsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIG4gPSBoZXJlX2JpdHMgKyA3OwogICAgICAgICAgICAgICAgICB3aGlsZSAoYml0cyA8IG4pIHsKICAgICAgICAgICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgYnJlYWsgaW5mX2xlYXZlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBoYXZlLS07CiAgICAgICAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGhvbGQgPj4+PSBoZXJlX2JpdHM7CiAgICAgICAgICAgICAgICAgIGJpdHMgLT0gaGVyZV9iaXRzOwogICAgICAgICAgICAgICAgICBsZW4gPSAwOwogICAgICAgICAgICAgICAgICBjb3B5ID0gMTEgKyAoaG9sZCAmIDEyNyk7CiAgICAgICAgICAgICAgICAgIGhvbGQgPj4+PSA3OwogICAgICAgICAgICAgICAgICBiaXRzIC09IDc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuaGF2ZSArIGNvcHkgPiBzdGF0ZS5ubGVuICsgc3RhdGUubmRpc3QpIHsKICAgICAgICAgICAgICAgICAgc3RybS5tc2cgPSAiaW52YWxpZCBiaXQgbGVuZ3RoIHJlcGVhdCI7CiAgICAgICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgd2hpbGUgKGNvcHktLSkgewogICAgICAgICAgICAgICAgICBzdGF0ZS5sZW5zW3N0YXRlLmhhdmUrK10gPSBsZW47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChzdGF0ZS5tb2RlID09PSBCQUQpIHsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoc3RhdGUubGVuc1syNTZdID09PSAwKSB7CiAgICAgICAgICAgICAgc3RybS5tc2cgPSAiaW52YWxpZCBjb2RlIC0tIG1pc3NpbmcgZW5kLW9mLWJsb2NrIjsKICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHN0YXRlLmxlbmJpdHMgPSA5OwogICAgICAgICAgICBvcHRzID0geyBiaXRzOiBzdGF0ZS5sZW5iaXRzIH07CiAgICAgICAgICAgIHJldCA9IGluZmxhdGVfdGFibGUoTEVOUywgc3RhdGUubGVucywgMCwgc3RhdGUubmxlbiwgc3RhdGUubGVuY29kZSwgMCwgc3RhdGUud29yaywgb3B0cyk7CiAgICAgICAgICAgIHN0YXRlLmxlbmJpdHMgPSBvcHRzLmJpdHM7CiAgICAgICAgICAgIGlmIChyZXQpIHsKICAgICAgICAgICAgICBzdHJtLm1zZyA9ICJpbnZhbGlkIGxpdGVyYWwvbGVuZ3RocyBzZXQiOwogICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc3RhdGUuZGlzdGJpdHMgPSA2OwogICAgICAgICAgICBzdGF0ZS5kaXN0Y29kZSA9IHN0YXRlLmRpc3RkeW47CiAgICAgICAgICAgIG9wdHMgPSB7IGJpdHM6IHN0YXRlLmRpc3RiaXRzIH07CiAgICAgICAgICAgIHJldCA9IGluZmxhdGVfdGFibGUoRElTVFMsIHN0YXRlLmxlbnMsIHN0YXRlLm5sZW4sIHN0YXRlLm5kaXN0LCBzdGF0ZS5kaXN0Y29kZSwgMCwgc3RhdGUud29yaywgb3B0cyk7CiAgICAgICAgICAgIHN0YXRlLmRpc3RiaXRzID0gb3B0cy5iaXRzOwogICAgICAgICAgICBpZiAocmV0KSB7CiAgICAgICAgICAgICAgc3RybS5tc2cgPSAiaW52YWxpZCBkaXN0YW5jZXMgc2V0IjsKICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBMRU5fOwogICAgICAgICAgICBpZiAoZmx1c2ggPT09IFpfVFJFRVMpIHsKICAgICAgICAgICAgICBicmVhayBpbmZfbGVhdmU7CiAgICAgICAgICAgIH0KICAgICAgICAgIGNhc2UgTEVOXzoKICAgICAgICAgICAgc3RhdGUubW9kZSA9IExFTjsKICAgICAgICAgIGNhc2UgTEVOOgogICAgICAgICAgICBpZiAoaGF2ZSA+PSA2ICYmIGxlZnQgPj0gMjU4KSB7CiAgICAgICAgICAgICAgc3RybS5uZXh0X291dCA9IHB1dDsKICAgICAgICAgICAgICBzdHJtLmF2YWlsX291dCA9IGxlZnQ7CiAgICAgICAgICAgICAgc3RybS5uZXh0X2luID0gbmV4dDsKICAgICAgICAgICAgICBzdHJtLmF2YWlsX2luID0gaGF2ZTsKICAgICAgICAgICAgICBzdGF0ZS5ob2xkID0gaG9sZDsKICAgICAgICAgICAgICBzdGF0ZS5iaXRzID0gYml0czsKICAgICAgICAgICAgICBpbmZsYXRlX2Zhc3Qoc3RybSwgX291dCk7CiAgICAgICAgICAgICAgcHV0ID0gc3RybS5uZXh0X291dDsKICAgICAgICAgICAgICBvdXRwdXQgPSBzdHJtLm91dHB1dDsKICAgICAgICAgICAgICBsZWZ0ID0gc3RybS5hdmFpbF9vdXQ7CiAgICAgICAgICAgICAgbmV4dCA9IHN0cm0ubmV4dF9pbjsKICAgICAgICAgICAgICBpbnB1dCA9IHN0cm0uaW5wdXQ7CiAgICAgICAgICAgICAgaGF2ZSA9IHN0cm0uYXZhaWxfaW47CiAgICAgICAgICAgICAgaG9sZCA9IHN0YXRlLmhvbGQ7CiAgICAgICAgICAgICAgYml0cyA9IHN0YXRlLmJpdHM7CiAgICAgICAgICAgICAgaWYgKHN0YXRlLm1vZGUgPT09IFRZUEUpIHsKICAgICAgICAgICAgICAgIHN0YXRlLmJhY2sgPSAtMTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc3RhdGUuYmFjayA9IDA7CiAgICAgICAgICAgIGZvciAoOyA7ICkgewogICAgICAgICAgICAgIGhlcmUgPSBzdGF0ZS5sZW5jb2RlW2hvbGQgJiAoMSA8PCBzdGF0ZS5sZW5iaXRzKSAtIDFdOwogICAgICAgICAgICAgIGhlcmVfYml0cyA9IGhlcmUgPj4+IDI0OwogICAgICAgICAgICAgIGhlcmVfb3AgPSBoZXJlID4+PiAxNiAmIDI1NTsKICAgICAgICAgICAgICBoZXJlX3ZhbCA9IGhlcmUgJiA2NTUzNTsKICAgICAgICAgICAgICBpZiAoaGVyZV9iaXRzIDw9IGJpdHMpIHsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgewogICAgICAgICAgICAgICAgYnJlYWsgaW5mX2xlYXZlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBoYXZlLS07CiAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChoZXJlX29wICYmIChoZXJlX29wICYgMjQwKSA9PT0gMCkgewogICAgICAgICAgICAgIGxhc3RfYml0cyA9IGhlcmVfYml0czsKICAgICAgICAgICAgICBsYXN0X29wID0gaGVyZV9vcDsKICAgICAgICAgICAgICBsYXN0X3ZhbCA9IGhlcmVfdmFsOwogICAgICAgICAgICAgIGZvciAoOyA7ICkgewogICAgICAgICAgICAgICAgaGVyZSA9IHN0YXRlLmxlbmNvZGVbbGFzdF92YWwgKyAoKGhvbGQgJiAoMSA8PCBsYXN0X2JpdHMgKyBsYXN0X29wKSAtIDEpID4+IGxhc3RfYml0cyldOwogICAgICAgICAgICAgICAgaGVyZV9iaXRzID0gaGVyZSA+Pj4gMjQ7CiAgICAgICAgICAgICAgICBoZXJlX29wID0gaGVyZSA+Pj4gMTYgJiAyNTU7CiAgICAgICAgICAgICAgICBoZXJlX3ZhbCA9IGhlcmUgJiA2NTUzNTsKICAgICAgICAgICAgICAgIGlmIChsYXN0X2JpdHMgKyBoZXJlX2JpdHMgPD0gYml0cykgewogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7CiAgICAgICAgICAgICAgICAgIGJyZWFrIGluZl9sZWF2ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGhhdmUtLTsKICAgICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzOwogICAgICAgICAgICAgICAgYml0cyArPSA4OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBob2xkID4+Pj0gbGFzdF9iaXRzOwogICAgICAgICAgICAgIGJpdHMgLT0gbGFzdF9iaXRzOwogICAgICAgICAgICAgIHN0YXRlLmJhY2sgKz0gbGFzdF9iaXRzOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGhvbGQgPj4+PSBoZXJlX2JpdHM7CiAgICAgICAgICAgIGJpdHMgLT0gaGVyZV9iaXRzOwogICAgICAgICAgICBzdGF0ZS5iYWNrICs9IGhlcmVfYml0czsKICAgICAgICAgICAgc3RhdGUubGVuZ3RoID0gaGVyZV92YWw7CiAgICAgICAgICAgIGlmIChoZXJlX29wID09PSAwKSB7CiAgICAgICAgICAgICAgc3RhdGUubW9kZSA9IExJVDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoaGVyZV9vcCAmIDMyKSB7CiAgICAgICAgICAgICAgc3RhdGUuYmFjayA9IC0xOwogICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBUWVBFOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChoZXJlX29wICYgNjQpIHsKICAgICAgICAgICAgICBzdHJtLm1zZyA9ICJpbnZhbGlkIGxpdGVyYWwvbGVuZ3RoIGNvZGUiOwogICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc3RhdGUuZXh0cmEgPSBoZXJlX29wICYgMTU7CiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBMRU5FWFQ7CiAgICAgICAgICBjYXNlIExFTkVYVDoKICAgICAgICAgICAgaWYgKHN0YXRlLmV4dHJhKSB7CiAgICAgICAgICAgICAgbiA9IHN0YXRlLmV4dHJhOwogICAgICAgICAgICAgIHdoaWxlIChiaXRzIDwgbikgewogICAgICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsKICAgICAgICAgICAgICAgICAgYnJlYWsgaW5mX2xlYXZlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaGF2ZS0tOwogICAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHN0YXRlLmxlbmd0aCArPSBob2xkICYgKDEgPDwgc3RhdGUuZXh0cmEpIC0gMTsKICAgICAgICAgICAgICBob2xkID4+Pj0gc3RhdGUuZXh0cmE7CiAgICAgICAgICAgICAgYml0cyAtPSBzdGF0ZS5leHRyYTsKICAgICAgICAgICAgICBzdGF0ZS5iYWNrICs9IHN0YXRlLmV4dHJhOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHN0YXRlLndhcyA9IHN0YXRlLmxlbmd0aDsKICAgICAgICAgICAgc3RhdGUubW9kZSA9IERJU1Q7CiAgICAgICAgICBjYXNlIERJU1Q6CiAgICAgICAgICAgIGZvciAoOyA7ICkgewogICAgICAgICAgICAgIGhlcmUgPSBzdGF0ZS5kaXN0Y29kZVtob2xkICYgKDEgPDwgc3RhdGUuZGlzdGJpdHMpIC0gMV07CiAgICAgICAgICAgICAgaGVyZV9iaXRzID0gaGVyZSA+Pj4gMjQ7CiAgICAgICAgICAgICAgaGVyZV9vcCA9IGhlcmUgPj4+IDE2ICYgMjU1OwogICAgICAgICAgICAgIGhlcmVfdmFsID0gaGVyZSAmIDY1NTM1OwogICAgICAgICAgICAgIGlmIChoZXJlX2JpdHMgPD0gYml0cykgewogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7CiAgICAgICAgICAgICAgICBicmVhayBpbmZfbGVhdmU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGhhdmUtLTsKICAgICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0czsKICAgICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKChoZXJlX29wICYgMjQwKSA9PT0gMCkgewogICAgICAgICAgICAgIGxhc3RfYml0cyA9IGhlcmVfYml0czsKICAgICAgICAgICAgICBsYXN0X29wID0gaGVyZV9vcDsKICAgICAgICAgICAgICBsYXN0X3ZhbCA9IGhlcmVfdmFsOwogICAgICAgICAgICAgIGZvciAoOyA7ICkgewogICAgICAgICAgICAgICAgaGVyZSA9IHN0YXRlLmRpc3Rjb2RlW2xhc3RfdmFsICsgKChob2xkICYgKDEgPDwgbGFzdF9iaXRzICsgbGFzdF9vcCkgLSAxKSA+PiBsYXN0X2JpdHMpXTsKICAgICAgICAgICAgICAgIGhlcmVfYml0cyA9IGhlcmUgPj4+IDI0OwogICAgICAgICAgICAgICAgaGVyZV9vcCA9IGhlcmUgPj4+IDE2ICYgMjU1OwogICAgICAgICAgICAgICAgaGVyZV92YWwgPSBoZXJlICYgNjU1MzU7CiAgICAgICAgICAgICAgICBpZiAobGFzdF9iaXRzICsgaGVyZV9iaXRzIDw9IGJpdHMpIHsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgewogICAgICAgICAgICAgICAgICBicmVhayBpbmZfbGVhdmU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBoYXZlLS07CiAgICAgICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0czsKICAgICAgICAgICAgICAgIGJpdHMgKz0gODsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaG9sZCA+Pj49IGxhc3RfYml0czsKICAgICAgICAgICAgICBiaXRzIC09IGxhc3RfYml0czsKICAgICAgICAgICAgICBzdGF0ZS5iYWNrICs9IGxhc3RfYml0czsKICAgICAgICAgICAgfQogICAgICAgICAgICBob2xkID4+Pj0gaGVyZV9iaXRzOwogICAgICAgICAgICBiaXRzIC09IGhlcmVfYml0czsKICAgICAgICAgICAgc3RhdGUuYmFjayArPSBoZXJlX2JpdHM7CiAgICAgICAgICAgIGlmIChoZXJlX29wICYgNjQpIHsKICAgICAgICAgICAgICBzdHJtLm1zZyA9ICJpbnZhbGlkIGRpc3RhbmNlIGNvZGUiOwogICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc3RhdGUub2Zmc2V0ID0gaGVyZV92YWw7CiAgICAgICAgICAgIHN0YXRlLmV4dHJhID0gaGVyZV9vcCAmIDE1OwogICAgICAgICAgICBzdGF0ZS5tb2RlID0gRElTVEVYVDsKICAgICAgICAgIGNhc2UgRElTVEVYVDoKICAgICAgICAgICAgaWYgKHN0YXRlLmV4dHJhKSB7CiAgICAgICAgICAgICAgbiA9IHN0YXRlLmV4dHJhOwogICAgICAgICAgICAgIHdoaWxlIChiaXRzIDwgbikgewogICAgICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsKICAgICAgICAgICAgICAgICAgYnJlYWsgaW5mX2xlYXZlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaGF2ZS0tOwogICAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHN0YXRlLm9mZnNldCArPSBob2xkICYgKDEgPDwgc3RhdGUuZXh0cmEpIC0gMTsKICAgICAgICAgICAgICBob2xkID4+Pj0gc3RhdGUuZXh0cmE7CiAgICAgICAgICAgICAgYml0cyAtPSBzdGF0ZS5leHRyYTsKICAgICAgICAgICAgICBzdGF0ZS5iYWNrICs9IHN0YXRlLmV4dHJhOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChzdGF0ZS5vZmZzZXQgPiBzdGF0ZS5kbWF4KSB7CiAgICAgICAgICAgICAgc3RybS5tc2cgPSAiaW52YWxpZCBkaXN0YW5jZSB0b28gZmFyIGJhY2siOwogICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc3RhdGUubW9kZSA9IE1BVENIOwogICAgICAgICAgY2FzZSBNQVRDSDoKICAgICAgICAgICAgaWYgKGxlZnQgPT09IDApIHsKICAgICAgICAgICAgICBicmVhayBpbmZfbGVhdmU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29weSA9IF9vdXQgLSBsZWZ0OwogICAgICAgICAgICBpZiAoc3RhdGUub2Zmc2V0ID4gY29weSkgewogICAgICAgICAgICAgIGNvcHkgPSBzdGF0ZS5vZmZzZXQgLSBjb3B5OwogICAgICAgICAgICAgIGlmIChjb3B5ID4gc3RhdGUud2hhdmUpIHsKICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5zYW5lKSB7CiAgICAgICAgICAgICAgICAgIHN0cm0ubXNnID0gImludmFsaWQgZGlzdGFuY2UgdG9vIGZhciBiYWNrIjsKICAgICAgICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChjb3B5ID4gc3RhdGUud25leHQpIHsKICAgICAgICAgICAgICAgIGNvcHkgLT0gc3RhdGUud25leHQ7CiAgICAgICAgICAgICAgICBmcm9tID0gc3RhdGUud3NpemUgLSBjb3B5OwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBmcm9tID0gc3RhdGUud25leHQgLSBjb3B5OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoY29weSA+IHN0YXRlLmxlbmd0aCkgewogICAgICAgICAgICAgICAgY29weSA9IHN0YXRlLmxlbmd0aDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZnJvbV9zb3VyY2UgPSBzdGF0ZS53aW5kb3c7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgZnJvbV9zb3VyY2UgPSBvdXRwdXQ7CiAgICAgICAgICAgICAgZnJvbSA9IHB1dCAtIHN0YXRlLm9mZnNldDsKICAgICAgICAgICAgICBjb3B5ID0gc3RhdGUubGVuZ3RoOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChjb3B5ID4gbGVmdCkgewogICAgICAgICAgICAgIGNvcHkgPSBsZWZ0OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxlZnQgLT0gY29weTsKICAgICAgICAgICAgc3RhdGUubGVuZ3RoIC09IGNvcHk7CiAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICBvdXRwdXRbcHV0KytdID0gZnJvbV9zb3VyY2VbZnJvbSsrXTsKICAgICAgICAgICAgfSB3aGlsZSAoLS1jb3B5KTsKICAgICAgICAgICAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBMRU47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIExJVDoKICAgICAgICAgICAgaWYgKGxlZnQgPT09IDApIHsKICAgICAgICAgICAgICBicmVhayBpbmZfbGVhdmU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgb3V0cHV0W3B1dCsrXSA9IHN0YXRlLmxlbmd0aDsKICAgICAgICAgICAgbGVmdC0tOwogICAgICAgICAgICBzdGF0ZS5tb2RlID0gTEVOOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgQ0hFQ0s6CiAgICAgICAgICAgIGlmIChzdGF0ZS53cmFwKSB7CiAgICAgICAgICAgICAgd2hpbGUgKGJpdHMgPCAzMikgewogICAgICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsKICAgICAgICAgICAgICAgICAgYnJlYWsgaW5mX2xlYXZlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaGF2ZS0tOwogICAgICAgICAgICAgICAgaG9sZCB8PSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF9vdXQgLT0gbGVmdDsKICAgICAgICAgICAgICBzdHJtLnRvdGFsX291dCArPSBfb3V0OwogICAgICAgICAgICAgIHN0YXRlLnRvdGFsICs9IF9vdXQ7CiAgICAgICAgICAgICAgaWYgKF9vdXQpIHsKICAgICAgICAgICAgICAgIHN0cm0uYWRsZXIgPSBzdGF0ZS5jaGVjayA9IHN0YXRlLmZsYWdzID8gY3JjMzIoc3RhdGUuY2hlY2ssIG91dHB1dCwgX291dCwgcHV0IC0gX291dCkgOiBhZGxlcjMyKHN0YXRlLmNoZWNrLCBvdXRwdXQsIF9vdXQsIHB1dCAtIF9vdXQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfb3V0ID0gbGVmdDsKICAgICAgICAgICAgICBpZiAoKHN0YXRlLmZsYWdzID8gaG9sZCA6IHpzd2FwMzIoaG9sZCkpICE9PSBzdGF0ZS5jaGVjaykgewogICAgICAgICAgICAgICAgc3RybS5tc2cgPSAiaW5jb3JyZWN0IGRhdGEgY2hlY2siOwogICAgICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBob2xkID0gMDsKICAgICAgICAgICAgICBiaXRzID0gMDsKICAgICAgICAgICAgfQogICAgICAgICAgICBzdGF0ZS5tb2RlID0gTEVOR1RIOwogICAgICAgICAgY2FzZSBMRU5HVEg6CiAgICAgICAgICAgIGlmIChzdGF0ZS53cmFwICYmIHN0YXRlLmZsYWdzKSB7CiAgICAgICAgICAgICAgd2hpbGUgKGJpdHMgPCAzMikgewogICAgICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsKICAgICAgICAgICAgICAgICAgYnJlYWsgaW5mX2xlYXZlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaGF2ZS0tOwogICAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7CiAgICAgICAgICAgICAgICBiaXRzICs9IDg7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChob2xkICE9PSAoc3RhdGUudG90YWwgJiA0Mjk0OTY3Mjk1KSkgewogICAgICAgICAgICAgICAgc3RybS5tc2cgPSAiaW5jb3JyZWN0IGxlbmd0aCBjaGVjayI7CiAgICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGhvbGQgPSAwOwogICAgICAgICAgICAgIGJpdHMgPSAwOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBET05FOwogICAgICAgICAgY2FzZSBET05FOgogICAgICAgICAgICByZXQgPSBaX1NUUkVBTV9FTkQ7CiAgICAgICAgICAgIGJyZWFrIGluZl9sZWF2ZTsKICAgICAgICAgIGNhc2UgQkFEOgogICAgICAgICAgICByZXQgPSBaX0RBVEFfRVJST1I7CiAgICAgICAgICAgIGJyZWFrIGluZl9sZWF2ZTsKICAgICAgICAgIGNhc2UgTUVNOgogICAgICAgICAgICByZXR1cm4gWl9NRU1fRVJST1I7CiAgICAgICAgICBjYXNlIFNZTkM6CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICByZXR1cm4gWl9TVFJFQU1fRVJST1I7CiAgICAgICAgfQogICAgICB9CiAgICBzdHJtLm5leHRfb3V0ID0gcHV0OwogICAgc3RybS5hdmFpbF9vdXQgPSBsZWZ0OwogICAgc3RybS5uZXh0X2luID0gbmV4dDsKICAgIHN0cm0uYXZhaWxfaW4gPSBoYXZlOwogICAgc3RhdGUuaG9sZCA9IGhvbGQ7CiAgICBzdGF0ZS5iaXRzID0gYml0czsKICAgIGlmIChzdGF0ZS53c2l6ZSB8fCBfb3V0ICE9PSBzdHJtLmF2YWlsX291dCAmJiBzdGF0ZS5tb2RlIDwgQkFEICYmIChzdGF0ZS5tb2RlIDwgQ0hFQ0sgfHwgZmx1c2ggIT09IFpfRklOSVNIKSkgewogICAgICBpZiAodXBkYXRld2luZG93KHN0cm0sIHN0cm0ub3V0cHV0LCBzdHJtLm5leHRfb3V0LCBfb3V0IC0gc3RybS5hdmFpbF9vdXQpKQogICAgICAgIDsKICAgIH0KICAgIF9pbiAtPSBzdHJtLmF2YWlsX2luOwogICAgX291dCAtPSBzdHJtLmF2YWlsX291dDsKICAgIHN0cm0udG90YWxfaW4gKz0gX2luOwogICAgc3RybS50b3RhbF9vdXQgKz0gX291dDsKICAgIHN0YXRlLnRvdGFsICs9IF9vdXQ7CiAgICBpZiAoc3RhdGUud3JhcCAmJiBfb3V0KSB7CiAgICAgIHN0cm0uYWRsZXIgPSBzdGF0ZS5jaGVjayA9IHN0YXRlLmZsYWdzID8gY3JjMzIoc3RhdGUuY2hlY2ssIG91dHB1dCwgX291dCwgc3RybS5uZXh0X291dCAtIF9vdXQpIDogYWRsZXIzMihzdGF0ZS5jaGVjaywgb3V0cHV0LCBfb3V0LCBzdHJtLm5leHRfb3V0IC0gX291dCk7CiAgICB9CiAgICBzdHJtLmRhdGFfdHlwZSA9IHN0YXRlLmJpdHMgKyAoc3RhdGUubGFzdCA/IDY0IDogMCkgKyAoc3RhdGUubW9kZSA9PT0gVFlQRSA/IDEyOCA6IDApICsgKHN0YXRlLm1vZGUgPT09IExFTl8gfHwgc3RhdGUubW9kZSA9PT0gQ09QWV8gPyAyNTYgOiAwKTsKICAgIGlmICgoX2luID09PSAwICYmIF9vdXQgPT09IDAgfHwgZmx1c2ggPT09IFpfRklOSVNIKSAmJiByZXQgPT09IFpfT0spIHsKICAgICAgcmV0ID0gWl9CVUZfRVJST1I7CiAgICB9CiAgICByZXR1cm4gcmV0OwogIH0KICBmdW5jdGlvbiBpbmZsYXRlRW5kKHN0cm0pIHsKICAgIGlmICghc3RybSB8fCAhc3RybS5zdGF0ZSkgewogICAgICByZXR1cm4gWl9TVFJFQU1fRVJST1I7CiAgICB9CiAgICB2YXIgc3RhdGUgPSBzdHJtLnN0YXRlOwogICAgaWYgKHN0YXRlLndpbmRvdykgewogICAgICBzdGF0ZS53aW5kb3cgPSBudWxsOwogICAgfQogICAgc3RybS5zdGF0ZSA9IG51bGw7CiAgICByZXR1cm4gWl9PSzsKICB9CiAgZnVuY3Rpb24gaW5mbGF0ZUdldEhlYWRlcihzdHJtLCBoZWFkKSB7CiAgICB2YXIgc3RhdGU7CiAgICBpZiAoIXN0cm0gfHwgIXN0cm0uc3RhdGUpIHsKICAgICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SOwogICAgfQogICAgc3RhdGUgPSBzdHJtLnN0YXRlOwogICAgaWYgKChzdGF0ZS53cmFwICYgMikgPT09IDApIHsKICAgICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SOwogICAgfQogICAgc3RhdGUuaGVhZCA9IGhlYWQ7CiAgICBoZWFkLmRvbmUgPSBmYWxzZTsKICAgIHJldHVybiBaX09LOwogIH0KICBmdW5jdGlvbiBpbmZsYXRlU2V0RGljdGlvbmFyeShzdHJtLCBkaWN0aW9uYXJ5KSB7CiAgICB2YXIgZGljdExlbmd0aCA9IGRpY3Rpb25hcnkubGVuZ3RoOwogICAgdmFyIHN0YXRlOwogICAgdmFyIGRpY3RpZDsKICAgIHZhciByZXQ7CiAgICBpZiAoIXN0cm0gfHwgIXN0cm0uc3RhdGUpIHsKICAgICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SOwogICAgfQogICAgc3RhdGUgPSBzdHJtLnN0YXRlOwogICAgaWYgKHN0YXRlLndyYXAgIT09IDAgJiYgc3RhdGUubW9kZSAhPT0gRElDVCkgewogICAgICByZXR1cm4gWl9TVFJFQU1fRVJST1I7CiAgICB9CiAgICBpZiAoc3RhdGUubW9kZSA9PT0gRElDVCkgewogICAgICBkaWN0aWQgPSAxOwogICAgICBkaWN0aWQgPSBhZGxlcjMyKGRpY3RpZCwgZGljdGlvbmFyeSwgZGljdExlbmd0aCwgMCk7CiAgICAgIGlmIChkaWN0aWQgIT09IHN0YXRlLmNoZWNrKSB7CiAgICAgICAgcmV0dXJuIFpfREFUQV9FUlJPUjsKICAgICAgfQogICAgfQogICAgcmV0ID0gdXBkYXRld2luZG93KHN0cm0sIGRpY3Rpb25hcnksIGRpY3RMZW5ndGgsIGRpY3RMZW5ndGgpOwogICAgaWYgKHJldCkgewogICAgICBzdGF0ZS5tb2RlID0gTUVNOwogICAgICByZXR1cm4gWl9NRU1fRVJST1I7CiAgICB9CiAgICBzdGF0ZS5oYXZlZGljdCA9IDE7CiAgICByZXR1cm4gWl9PSzsKICB9CiAgaW5mbGF0ZSQzLmluZmxhdGVSZXNldCA9IGluZmxhdGVSZXNldDsKICBpbmZsYXRlJDMuaW5mbGF0ZVJlc2V0MiA9IGluZmxhdGVSZXNldDI7CiAgaW5mbGF0ZSQzLmluZmxhdGVSZXNldEtlZXAgPSBpbmZsYXRlUmVzZXRLZWVwOwogIGluZmxhdGUkMy5pbmZsYXRlSW5pdCA9IGluZmxhdGVJbml0OwogIGluZmxhdGUkMy5pbmZsYXRlSW5pdDIgPSBpbmZsYXRlSW5pdDI7CiAgaW5mbGF0ZSQzLmluZmxhdGUgPSBpbmZsYXRlJDI7CiAgaW5mbGF0ZSQzLmluZmxhdGVFbmQgPSBpbmZsYXRlRW5kOwogIGluZmxhdGUkMy5pbmZsYXRlR2V0SGVhZGVyID0gaW5mbGF0ZUdldEhlYWRlcjsKICBpbmZsYXRlJDMuaW5mbGF0ZVNldERpY3Rpb25hcnkgPSBpbmZsYXRlU2V0RGljdGlvbmFyeTsKICBpbmZsYXRlJDMuaW5mbGF0ZUluZm8gPSAicGFrbyBpbmZsYXRlIChmcm9tIE5vZGVjYSBwcm9qZWN0KSI7CiAgdmFyIGNvbnN0YW50cyQxID0gewogICAgWl9OT19GTFVTSDogMCwKICAgIFpfUEFSVElBTF9GTFVTSDogMSwKICAgIFpfU1lOQ19GTFVTSDogMiwKICAgIFpfRlVMTF9GTFVTSDogMywKICAgIFpfRklOSVNIOiA0LAogICAgWl9CTE9DSzogNSwKICAgIFpfVFJFRVM6IDYsCiAgICBaX09LOiAwLAogICAgWl9TVFJFQU1fRU5EOiAxLAogICAgWl9ORUVEX0RJQ1Q6IDIsCiAgICBaX0VSUk5POiAtMSwKICAgIFpfU1RSRUFNX0VSUk9SOiAtMiwKICAgIFpfREFUQV9FUlJPUjogLTMsCiAgICBaX0JVRl9FUlJPUjogLTUsCiAgICBaX05PX0NPTVBSRVNTSU9OOiAwLAogICAgWl9CRVNUX1NQRUVEOiAxLAogICAgWl9CRVNUX0NPTVBSRVNTSU9OOiA5LAogICAgWl9ERUZBVUxUX0NPTVBSRVNTSU9OOiAtMSwKICAgIFpfRklMVEVSRUQ6IDEsCiAgICBaX0hVRkZNQU5fT05MWTogMiwKICAgIFpfUkxFOiAzLAogICAgWl9GSVhFRDogNCwKICAgIFpfREVGQVVMVF9TVFJBVEVHWTogMCwKICAgIFpfQklOQVJZOiAwLAogICAgWl9URVhUOiAxLAogICAgWl9VTktOT1dOOiAyLAogICAgWl9ERUZMQVRFRDogOAogIH07CiAgZnVuY3Rpb24gR1poZWFkZXIkMSgpIHsKICAgIHRoaXMudGV4dCA9IDA7CiAgICB0aGlzLnRpbWUgPSAwOwogICAgdGhpcy54ZmxhZ3MgPSAwOwogICAgdGhpcy5vcyA9IDA7CiAgICB0aGlzLmV4dHJhID0gbnVsbDsKICAgIHRoaXMuZXh0cmFfbGVuID0gMDsKICAgIHRoaXMubmFtZSA9ICIiOwogICAgdGhpcy5jb21tZW50ID0gIiI7CiAgICB0aGlzLmhjcmMgPSAwOwogICAgdGhpcy5kb25lID0gZmFsc2U7CiAgfQogIHZhciBnemhlYWRlciA9IEdaaGVhZGVyJDE7CiAgdmFyIHpsaWJfaW5mbGF0ZSA9IGluZmxhdGUkMzsKICB2YXIgdXRpbHMgPSBjb21tb24kMTsKICB2YXIgc3RyaW5ncyA9IHN0cmluZ3MkMjsKICB2YXIgYyA9IGNvbnN0YW50cyQxOwogIHZhciBtc2cgPSBtZXNzYWdlcyQxOwogIHZhciBaU3RyZWFtID0genN0cmVhbTsKICB2YXIgR1poZWFkZXIgPSBnemhlYWRlcjsKICB2YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nOwogIGZ1bmN0aW9uIEluZmxhdGUkMShvcHRpb25zKSB7CiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgSW5mbGF0ZSQxKSkKICAgICAgcmV0dXJuIG5ldyBJbmZsYXRlJDEob3B0aW9ucyk7CiAgICB0aGlzLm9wdGlvbnMgPSB1dGlscy5hc3NpZ24oewogICAgICBjaHVua1NpemU6IDE2Mzg0LAogICAgICB3aW5kb3dCaXRzOiAwLAogICAgICB0bzogIiIKICAgIH0sIG9wdGlvbnMgfHwge30pOwogICAgdmFyIG9wdCA9IHRoaXMub3B0aW9uczsKICAgIGlmIChvcHQucmF3ICYmIG9wdC53aW5kb3dCaXRzID49IDAgJiYgb3B0LndpbmRvd0JpdHMgPCAxNikgewogICAgICBvcHQud2luZG93Qml0cyA9IC1vcHQud2luZG93Qml0czsKICAgICAgaWYgKG9wdC53aW5kb3dCaXRzID09PSAwKSB7CiAgICAgICAgb3B0LndpbmRvd0JpdHMgPSAtMTU7CiAgICAgIH0KICAgIH0KICAgIGlmIChvcHQud2luZG93Qml0cyA+PSAwICYmIG9wdC53aW5kb3dCaXRzIDwgMTYgJiYgIShvcHRpb25zICYmIG9wdGlvbnMud2luZG93Qml0cykpIHsKICAgICAgb3B0LndpbmRvd0JpdHMgKz0gMzI7CiAgICB9CiAgICBpZiAob3B0LndpbmRvd0JpdHMgPiAxNSAmJiBvcHQud2luZG93Qml0cyA8IDQ4KSB7CiAgICAgIGlmICgob3B0LndpbmRvd0JpdHMgJiAxNSkgPT09IDApIHsKICAgICAgICBvcHQud2luZG93Qml0cyB8PSAxNTsKICAgICAgfQogICAgfQogICAgdGhpcy5lcnIgPSAwOwogICAgdGhpcy5tc2cgPSAiIjsKICAgIHRoaXMuZW5kZWQgPSBmYWxzZTsKICAgIHRoaXMuY2h1bmtzID0gW107CiAgICB0aGlzLnN0cm0gPSBuZXcgWlN0cmVhbSgpOwogICAgdGhpcy5zdHJtLmF2YWlsX291dCA9IDA7CiAgICB2YXIgc3RhdHVzID0gemxpYl9pbmZsYXRlLmluZmxhdGVJbml0Mih0aGlzLnN0cm0sIG9wdC53aW5kb3dCaXRzKTsKICAgIGlmIChzdGF0dXMgIT09IGMuWl9PSykgewogICAgICB0aHJvdyBuZXcgRXJyb3IobXNnW3N0YXR1c10pOwogICAgfQogICAgdGhpcy5oZWFkZXIgPSBuZXcgR1poZWFkZXIoKTsKICAgIHpsaWJfaW5mbGF0ZS5pbmZsYXRlR2V0SGVhZGVyKHRoaXMuc3RybSwgdGhpcy5oZWFkZXIpOwogICAgaWYgKG9wdC5kaWN0aW9uYXJ5KSB7CiAgICAgIGlmICh0eXBlb2Ygb3B0LmRpY3Rpb25hcnkgPT09ICJzdHJpbmciKSB7CiAgICAgICAgb3B0LmRpY3Rpb25hcnkgPSBzdHJpbmdzLnN0cmluZzJidWYob3B0LmRpY3Rpb25hcnkpOwogICAgICB9IGVsc2UgaWYgKHRvU3RyaW5nLmNhbGwob3B0LmRpY3Rpb25hcnkpID09PSAiW29iamVjdCBBcnJheUJ1ZmZlcl0iKSB7CiAgICAgICAgb3B0LmRpY3Rpb25hcnkgPSBuZXcgVWludDhBcnJheShvcHQuZGljdGlvbmFyeSk7CiAgICAgIH0KICAgICAgaWYgKG9wdC5yYXcpIHsKICAgICAgICBzdGF0dXMgPSB6bGliX2luZmxhdGUuaW5mbGF0ZVNldERpY3Rpb25hcnkodGhpcy5zdHJtLCBvcHQuZGljdGlvbmFyeSk7CiAgICAgICAgaWYgKHN0YXR1cyAhPT0gYy5aX09LKSB7CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IobXNnW3N0YXR1c10pOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KICBJbmZsYXRlJDEucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbihkYXRhLCBtb2RlKSB7CiAgICB2YXIgc3RybSA9IHRoaXMuc3RybTsKICAgIHZhciBjaHVua1NpemUgPSB0aGlzLm9wdGlvbnMuY2h1bmtTaXplOwogICAgdmFyIGRpY3Rpb25hcnkgPSB0aGlzLm9wdGlvbnMuZGljdGlvbmFyeTsKICAgIHZhciBzdGF0dXMsIF9tb2RlOwogICAgdmFyIG5leHRfb3V0X3V0ZjgsIHRhaWwsIHV0ZjhzdHI7CiAgICB2YXIgYWxsb3dCdWZFcnJvciA9IGZhbHNlOwogICAgaWYgKHRoaXMuZW5kZWQpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgX21vZGUgPSBtb2RlID09PSB+fm1vZGUgPyBtb2RlIDogbW9kZSA9PT0gdHJ1ZSA/IGMuWl9GSU5JU0ggOiBjLlpfTk9fRkxVU0g7CiAgICBpZiAodHlwZW9mIGRhdGEgPT09ICJzdHJpbmciKSB7CiAgICAgIHN0cm0uaW5wdXQgPSBzdHJpbmdzLmJpbnN0cmluZzJidWYoZGF0YSk7CiAgICB9IGVsc2UgaWYgKHRvU3RyaW5nLmNhbGwoZGF0YSkgPT09ICJbb2JqZWN0IEFycmF5QnVmZmVyXSIpIHsKICAgICAgc3RybS5pbnB1dCA9IG5ldyBVaW50OEFycmF5KGRhdGEpOwogICAgfSBlbHNlIHsKICAgICAgc3RybS5pbnB1dCA9IGRhdGE7CiAgICB9CiAgICBzdHJtLm5leHRfaW4gPSAwOwogICAgc3RybS5hdmFpbF9pbiA9IHN0cm0uaW5wdXQubGVuZ3RoOwogICAgZG8gewogICAgICBpZiAoc3RybS5hdmFpbF9vdXQgPT09IDApIHsKICAgICAgICBzdHJtLm91dHB1dCA9IG5ldyB1dGlscy5CdWY4KGNodW5rU2l6ZSk7CiAgICAgICAgc3RybS5uZXh0X291dCA9IDA7CiAgICAgICAgc3RybS5hdmFpbF9vdXQgPSBjaHVua1NpemU7CiAgICAgIH0KICAgICAgc3RhdHVzID0gemxpYl9pbmZsYXRlLmluZmxhdGUoc3RybSwgYy5aX05PX0ZMVVNIKTsKICAgICAgaWYgKHN0YXR1cyA9PT0gYy5aX05FRURfRElDVCAmJiBkaWN0aW9uYXJ5KSB7CiAgICAgICAgc3RhdHVzID0gemxpYl9pbmZsYXRlLmluZmxhdGVTZXREaWN0aW9uYXJ5KHRoaXMuc3RybSwgZGljdGlvbmFyeSk7CiAgICAgIH0KICAgICAgaWYgKHN0YXR1cyA9PT0gYy5aX0JVRl9FUlJPUiAmJiBhbGxvd0J1ZkVycm9yID09PSB0cnVlKSB7CiAgICAgICAgc3RhdHVzID0gYy5aX09LOwogICAgICAgIGFsbG93QnVmRXJyb3IgPSBmYWxzZTsKICAgICAgfQogICAgICBpZiAoc3RhdHVzICE9PSBjLlpfU1RSRUFNX0VORCAmJiBzdGF0dXMgIT09IGMuWl9PSykgewogICAgICAgIHRoaXMub25FbmQoc3RhdHVzKTsKICAgICAgICB0aGlzLmVuZGVkID0gdHJ1ZTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgaWYgKHN0cm0ubmV4dF9vdXQpIHsKICAgICAgICBpZiAoc3RybS5hdmFpbF9vdXQgPT09IDAgfHwgc3RhdHVzID09PSBjLlpfU1RSRUFNX0VORCB8fCBzdHJtLmF2YWlsX2luID09PSAwICYmIChfbW9kZSA9PT0gYy5aX0ZJTklTSCB8fCBfbW9kZSA9PT0gYy5aX1NZTkNfRkxVU0gpKSB7CiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnRvID09PSAic3RyaW5nIikgewogICAgICAgICAgICBuZXh0X291dF91dGY4ID0gc3RyaW5ncy51dGY4Ym9yZGVyKHN0cm0ub3V0cHV0LCBzdHJtLm5leHRfb3V0KTsKICAgICAgICAgICAgdGFpbCA9IHN0cm0ubmV4dF9vdXQgLSBuZXh0X291dF91dGY4OwogICAgICAgICAgICB1dGY4c3RyID0gc3RyaW5ncy5idWYyc3RyaW5nKHN0cm0ub3V0cHV0LCBuZXh0X291dF91dGY4KTsKICAgICAgICAgICAgc3RybS5uZXh0X291dCA9IHRhaWw7CiAgICAgICAgICAgIHN0cm0uYXZhaWxfb3V0ID0gY2h1bmtTaXplIC0gdGFpbDsKICAgICAgICAgICAgaWYgKHRhaWwpIHsKICAgICAgICAgICAgICB1dGlscy5hcnJheVNldChzdHJtLm91dHB1dCwgc3RybS5vdXRwdXQsIG5leHRfb3V0X3V0ZjgsIHRhaWwsIDApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMub25EYXRhKHV0ZjhzdHIpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5vbkRhdGEodXRpbHMuc2hyaW5rQnVmKHN0cm0ub3V0cHV0LCBzdHJtLm5leHRfb3V0KSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChzdHJtLmF2YWlsX2luID09PSAwICYmIHN0cm0uYXZhaWxfb3V0ID09PSAwKSB7CiAgICAgICAgYWxsb3dCdWZFcnJvciA9IHRydWU7CiAgICAgIH0KICAgIH0gd2hpbGUgKChzdHJtLmF2YWlsX2luID4gMCB8fCBzdHJtLmF2YWlsX291dCA9PT0gMCkgJiYgc3RhdHVzICE9PSBjLlpfU1RSRUFNX0VORCk7CiAgICBpZiAoc3RhdHVzID09PSBjLlpfU1RSRUFNX0VORCkgewogICAgICBfbW9kZSA9IGMuWl9GSU5JU0g7CiAgICB9CiAgICBpZiAoX21vZGUgPT09IGMuWl9GSU5JU0gpIHsKICAgICAgc3RhdHVzID0gemxpYl9pbmZsYXRlLmluZmxhdGVFbmQodGhpcy5zdHJtKTsKICAgICAgdGhpcy5vbkVuZChzdGF0dXMpOwogICAgICB0aGlzLmVuZGVkID0gdHJ1ZTsKICAgICAgcmV0dXJuIHN0YXR1cyA9PT0gYy5aX09LOwogICAgfQogICAgaWYgKF9tb2RlID09PSBjLlpfU1lOQ19GTFVTSCkgewogICAgICB0aGlzLm9uRW5kKGMuWl9PSyk7CiAgICAgIHN0cm0uYXZhaWxfb3V0ID0gMDsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICByZXR1cm4gdHJ1ZTsKICB9OwogIEluZmxhdGUkMS5wcm90b3R5cGUub25EYXRhID0gZnVuY3Rpb24oY2h1bmspIHsKICAgIHRoaXMuY2h1bmtzLnB1c2goY2h1bmspOwogIH07CiAgSW5mbGF0ZSQxLnByb3RvdHlwZS5vbkVuZCA9IGZ1bmN0aW9uKHN0YXR1cykgewogICAgaWYgKHN0YXR1cyA9PT0gYy5aX09LKSB7CiAgICAgIGlmICh0aGlzLm9wdGlvbnMudG8gPT09ICJzdHJpbmciKSB7CiAgICAgICAgdGhpcy5yZXN1bHQgPSB0aGlzLmNodW5rcy5qb2luKCIiKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnJlc3VsdCA9IHV0aWxzLmZsYXR0ZW5DaHVua3ModGhpcy5jaHVua3MpOwogICAgICB9CiAgICB9CiAgICB0aGlzLmNodW5rcyA9IFtdOwogICAgdGhpcy5lcnIgPSBzdGF0dXM7CiAgICB0aGlzLm1zZyA9IHRoaXMuc3RybS5tc2c7CiAgfTsKICBmdW5jdGlvbiBpbmZsYXRlJDEoaW5wdXQsIG9wdGlvbnMpIHsKICAgIHZhciBpbmZsYXRvciA9IG5ldyBJbmZsYXRlJDEob3B0aW9ucyk7CiAgICBpbmZsYXRvci5wdXNoKGlucHV0LCB0cnVlKTsKICAgIGlmIChpbmZsYXRvci5lcnIpIHsKICAgICAgdGhyb3cgaW5mbGF0b3IubXNnIHx8IG1zZ1tpbmZsYXRvci5lcnJdOwogICAgfQogICAgcmV0dXJuIGluZmxhdG9yLnJlc3VsdDsKICB9CiAgZnVuY3Rpb24gaW5mbGF0ZVJhdyhpbnB1dCwgb3B0aW9ucykgewogICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CiAgICBvcHRpb25zLnJhdyA9IHRydWU7CiAgICByZXR1cm4gaW5mbGF0ZSQxKGlucHV0LCBvcHRpb25zKTsKICB9CiAgaW5mbGF0ZSQ0LkluZmxhdGUgPSBJbmZsYXRlJDE7CiAgaW5mbGF0ZSQ0LmluZmxhdGUgPSBpbmZsYXRlJDE7CiAgaW5mbGF0ZSQ0LmluZmxhdGVSYXcgPSBpbmZsYXRlUmF3OwogIGluZmxhdGUkNC51bmd6aXAgPSBpbmZsYXRlJDE7CiAgdmFyIGFzc2lnbiA9IGNvbW1vbiQxLmFzc2lnbjsKICB2YXIgZGVmbGF0ZSA9IGRlZmxhdGUkNDsKICB2YXIgaW5mbGF0ZSA9IGluZmxhdGUkNDsKICB2YXIgY29uc3RhbnRzID0gY29uc3RhbnRzJDE7CiAgdmFyIHBha28gPSB7fTsKICBhc3NpZ24ocGFrbywgZGVmbGF0ZSwgaW5mbGF0ZSwgY29uc3RhbnRzKTsKICB2YXIgcGFrb18xID0gcGFrbzsKICB2YXIgX2ludGVyb3BSZXF1aXJlRGVmYXVsdCQzID0gaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmV4cG9ydHM7CiAgdmFyIF9yZWdlbmVyYXRvciQzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdCQzKHJlZ2VuZXJhdG9yKTsKICB2YXIgX2FzeW5jVG9HZW5lcmF0b3IyJDMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0JDMoYXN5bmNUb0dlbmVyYXRvci5leHBvcnRzKTsKICB2YXIgX3JlcXVpcmUkMiA9IHBha29fMSwgWl9TWU5DX0ZMVVNIID0gX3JlcXVpcmUkMi5aX1NZTkNfRkxVU0gsIEluZmxhdGUgPSBfcmVxdWlyZSQyLkluZmxhdGU7CiAgZnVuY3Rpb24gdW56aXAkMihfeCkgewogICAgcmV0dXJuIF91bnppcC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH0KICBmdW5jdGlvbiBfdW56aXAoKSB7CiAgICBfdW56aXAgPSAoMCwgX2FzeW5jVG9HZW5lcmF0b3IyJDMuZGVmYXVsdCkoLyogQF9fUFVSRV9fICovIF9yZWdlbmVyYXRvciQzLmRlZmF1bHQubWFyayhmdW5jdGlvbiBfY2FsbGVlKGlucHV0RGF0YSkgewogICAgICB2YXIgc3RybSwgcG9zLCBpLCBjaHVua3MsIGluZmxhdG9yLCByZW1haW5pbmdJbnB1dCwgX2luZmxhdG9yLCByZXN1bHQ7CiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3IkMy5kZWZhdWx0LndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDA7CiAgICAgICAgICAgICAgcG9zID0gMDsKICAgICAgICAgICAgICBpID0gMDsKICAgICAgICAgICAgICBjaHVua3MgPSBbXTsKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIHJlbWFpbmluZ0lucHV0ID0gaW5wdXREYXRhLnNsaWNlKHBvcyk7CiAgICAgICAgICAgICAgaW5mbGF0b3IgPSBuZXcgSW5mbGF0ZSgpOwogICAgICAgICAgICAgIF9pbmZsYXRvciA9IGluZmxhdG9yOwogICAgICAgICAgICAgIHN0cm0gPSBfaW5mbGF0b3Iuc3RybTsKICAgICAgICAgICAgICBpbmZsYXRvci5wdXNoKHJlbWFpbmluZ0lucHV0LCBaX1NZTkNfRkxVU0gpOwogICAgICAgICAgICAgIGlmICghaW5mbGF0b3IuZXJyKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGluZmxhdG9yLm1zZyk7CiAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgcG9zICs9IHN0cm0ubmV4dF9pbjsKICAgICAgICAgICAgICBjaHVua3NbaV0gPSBCdWZmZXIuZnJvbShpbmZsYXRvci5yZXN1bHQpOwogICAgICAgICAgICAgIGkgKz0gMTsKICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICBpZiAoc3RybS5hdmFpbF9pbikgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgcmVzdWx0ID0gQnVmZmVyLmNvbmNhdChjaHVua3MpOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHJlc3VsdCk7CiAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE5OwogICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgaWYgKCFfY29udGV4dC50MC5tZXNzYWdlLm1hdGNoKC9pbmNvcnJlY3QgaGVhZGVyIGNoZWNrLykpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMzsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoInByb2JsZW0gZGVjb21wcmVzc2luZyBibG9jazogaW5jb3JyZWN0IGd6aXAgaGVhZGVyIGNoZWNrIik7CiAgICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMCwgMTldXSk7CiAgICB9KSk7CiAgICByZXR1cm4gX3VuemlwLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfQogIGZ1bmN0aW9uIHVuemlwQ2h1bmskMShfeDIpIHsKICAgIHJldHVybiBfdW56aXBDaHVuay5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH0KICBmdW5jdGlvbiBfdW56aXBDaHVuaygpIHsKICAgIF91bnppcENodW5rID0gKDAsIF9hc3luY1RvR2VuZXJhdG9yMiQzLmRlZmF1bHQpKC8qIEBfX1BVUkVfXyAqLyBfcmVnZW5lcmF0b3IkMy5kZWZhdWx0Lm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoaW5wdXREYXRhKSB7CiAgICAgIHZhciBzdHJtLCBjcG9zLCBkcG9zLCBibG9ja3MsIGNwb3NpdGlvbnMsIGRwb3NpdGlvbnMsIHJlbWFpbmluZ0lucHV0LCBpbmZsYXRvciwgX2J1ZmZlciwgYnVmZmVyOwogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yJDMuZGVmYXVsdC53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDA7CiAgICAgICAgICAgICAgY3BvcyA9IDA7CiAgICAgICAgICAgICAgZHBvcyA9IDA7CiAgICAgICAgICAgICAgYmxvY2tzID0gW107CiAgICAgICAgICAgICAgY3Bvc2l0aW9ucyA9IFtdOwogICAgICAgICAgICAgIGRwb3NpdGlvbnMgPSBbXTsKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIHJlbWFpbmluZ0lucHV0ID0gaW5wdXREYXRhLnNsaWNlKGNwb3MpOwogICAgICAgICAgICAgIGluZmxhdG9yID0gbmV3IEluZmxhdGUoKTsKICAgICAgICAgICAgICBzdHJtID0gaW5mbGF0b3Iuc3RybTsKICAgICAgICAgICAgICBpbmZsYXRvci5wdXNoKHJlbWFpbmluZ0lucHV0LCBaX1NZTkNfRkxVU0gpOwogICAgICAgICAgICAgIGlmICghaW5mbGF0b3IuZXJyKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihpbmZsYXRvci5tc2cpOwogICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIF9idWZmZXIgPSBCdWZmZXIuZnJvbShpbmZsYXRvci5yZXN1bHQpOwogICAgICAgICAgICAgIGJsb2Nrcy5wdXNoKF9idWZmZXIpOwogICAgICAgICAgICAgIGNwb3NpdGlvbnMucHVzaChjcG9zKTsKICAgICAgICAgICAgICBkcG9zaXRpb25zLnB1c2goZHBvcyk7CiAgICAgICAgICAgICAgY3BvcyArPSBzdHJtLm5leHRfaW47CiAgICAgICAgICAgICAgZHBvcyArPSBfYnVmZmVyLmxlbmd0aDsKICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICBpZiAoc3RybS5hdmFpbF9pbikgewogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA2OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICAgIGJ1ZmZlciA9IEJ1ZmZlci5jb25jYXQoYmxvY2tzKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgeyBidWZmZXIsIGNwb3NpdGlvbnMsIGRwb3NpdGlvbnMgfSk7CiAgICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAyMzsKICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDJbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgaWYgKCFfY29udGV4dDIudDAubWVzc2FnZS5tYXRjaCgvaW5jb3JyZWN0IGhlYWRlciBjaGVjay8pKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI3OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigicHJvYmxlbSBkZWNvbXByZXNzaW5nIGJsb2NrOiBpbmNvcnJlY3QgZ3ppcCBoZWFkZXIgY2hlY2siKTsKICAgICAgICAgICAgY2FzZSAyNzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyLCBudWxsLCBbWzAsIDIzXV0pOwogICAgfSkpOwogICAgcmV0dXJuIF91bnppcENodW5rLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfQogIGZ1bmN0aW9uIHVuemlwQ2h1bmtTbGljZSQxKF94MywgX3g0KSB7CiAgICByZXR1cm4gX3VuemlwQ2h1bmtTbGljZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH0KICBmdW5jdGlvbiBfdW56aXBDaHVua1NsaWNlKCkgewogICAgX3VuemlwQ2h1bmtTbGljZSA9ICgwLCBfYXN5bmNUb0dlbmVyYXRvcjIkMy5kZWZhdWx0KSgvKiBAX19QVVJFX18gKi8gX3JlZ2VuZXJhdG9yJDMuZGVmYXVsdC5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKGlucHV0RGF0YSwgY2h1bmspIHsKICAgICAgdmFyIHN0cm0sIGNwb3MsIGRwb3MsIGRlY29tcHJlc3NlZEJsb2NrcywgY3Bvc2l0aW9ucywgZHBvc2l0aW9ucywgcmVtYWluaW5nSW5wdXQsIGluZmxhdG9yLCBfYnVmZmVyMiwgbGVuLCBvcmlnQ3BvcywgYnVmZmVyOwogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yJDMuZGVmYXVsdC53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDA7CiAgICAgICAgICAgICAgY3BvcyA9IGNodW5rLm1pbnYuYmxvY2tQb3NpdGlvbjsKICAgICAgICAgICAgICBkcG9zID0gY2h1bmsubWludi5kYXRhUG9zaXRpb247CiAgICAgICAgICAgICAgZGVjb21wcmVzc2VkQmxvY2tzID0gW107CiAgICAgICAgICAgICAgY3Bvc2l0aW9ucyA9IFtdOwogICAgICAgICAgICAgIGRwb3NpdGlvbnMgPSBbXTsKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIHJlbWFpbmluZ0lucHV0ID0gaW5wdXREYXRhLnNsaWNlKGNwb3MgLSBjaHVuay5taW52LmJsb2NrUG9zaXRpb24pOwogICAgICAgICAgICAgIGluZmxhdG9yID0gbmV3IEluZmxhdGUoKTsKICAgICAgICAgICAgICBzdHJtID0gaW5mbGF0b3Iuc3RybTsKICAgICAgICAgICAgICBpbmZsYXRvci5wdXNoKHJlbWFpbmluZ0lucHV0LCBaX1NZTkNfRkxVU0gpOwogICAgICAgICAgICAgIGlmICghaW5mbGF0b3IuZXJyKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihpbmZsYXRvci5tc2cpOwogICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIF9idWZmZXIyID0gQnVmZmVyLmZyb20oaW5mbGF0b3IucmVzdWx0KTsKICAgICAgICAgICAgICBkZWNvbXByZXNzZWRCbG9ja3MucHVzaChfYnVmZmVyMik7CiAgICAgICAgICAgICAgbGVuID0gX2J1ZmZlcjIubGVuZ3RoOwogICAgICAgICAgICAgIGNwb3NpdGlvbnMucHVzaChjcG9zKTsKICAgICAgICAgICAgICBkcG9zaXRpb25zLnB1c2goZHBvcyk7CiAgICAgICAgICAgICAgaWYgKGRlY29tcHJlc3NlZEJsb2Nrcy5sZW5ndGggPT09IDEgJiYgY2h1bmsubWludi5kYXRhUG9zaXRpb24pIHsKICAgICAgICAgICAgICAgIGRlY29tcHJlc3NlZEJsb2Nrc1swXSA9IGRlY29tcHJlc3NlZEJsb2Nrc1swXS5zbGljZShjaHVuay5taW52LmRhdGFQb3NpdGlvbik7CiAgICAgICAgICAgICAgICBsZW4gPSBkZWNvbXByZXNzZWRCbG9ja3NbMF0ubGVuZ3RoOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBvcmlnQ3BvcyA9IGNwb3M7CiAgICAgICAgICAgICAgY3BvcyArPSBzdHJtLm5leHRfaW47CiAgICAgICAgICAgICAgZHBvcyArPSBsZW47CiAgICAgICAgICAgICAgaWYgKCEob3JpZ0Nwb3MgPj0gY2h1bmsubWF4di5ibG9ja1Bvc2l0aW9uKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyNjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBkZWNvbXByZXNzZWRCbG9ja3NbZGVjb21wcmVzc2VkQmxvY2tzLmxlbmd0aCAtIDFdID0gZGVjb21wcmVzc2VkQmxvY2tzW2RlY29tcHJlc3NlZEJsb2Nrcy5sZW5ndGggLSAxXS5zbGljZSgwLCBjaHVuay5tYXh2LmJsb2NrUG9zaXRpb24gPT09IGNodW5rLm1pbnYuYmxvY2tQb3NpdGlvbiA/IGNodW5rLm1heHYuZGF0YVBvc2l0aW9uIC0gY2h1bmsubWludi5kYXRhUG9zaXRpb24gKyAxIDogY2h1bmsubWF4di5kYXRhUG9zaXRpb24gKyAxKTsKICAgICAgICAgICAgICBjcG9zaXRpb25zLnB1c2goY3Bvcyk7CiAgICAgICAgICAgICAgZHBvc2l0aW9ucy5wdXNoKGRwb3MpOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJicmVhayIsIDI3KTsKICAgICAgICAgICAgY2FzZSAyNjoKICAgICAgICAgICAgICBpZiAoc3RybS5hdmFpbF9pbikgewogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA2OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICBjYXNlIDI3OgogICAgICAgICAgICAgIGJ1ZmZlciA9IEJ1ZmZlci5jb25jYXQoZGVjb21wcmVzc2VkQmxvY2tzKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgeyBidWZmZXIsIGNwb3NpdGlvbnMsIGRwb3NpdGlvbnMgfSk7CiAgICAgICAgICAgIGNhc2UgMzE6CiAgICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSAzMTsKICAgICAgICAgICAgICBfY29udGV4dDMudDAgPSBfY29udGV4dDNbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgaWYgKCFfY29udGV4dDMudDAubWVzc2FnZS5tYXRjaCgvaW5jb3JyZWN0IGhlYWRlciBjaGVjay8pKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM1OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigicHJvYmxlbSBkZWNvbXByZXNzaW5nIGJsb2NrOiBpbmNvcnJlY3QgZ3ppcCBoZWFkZXIgY2hlY2siKTsKICAgICAgICAgICAgY2FzZSAzNToKICAgICAgICAgICAgICB0aHJvdyBfY29udGV4dDMudDA7CiAgICAgICAgICAgIGNhc2UgMzY6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMywgbnVsbCwgW1swLCAzMV1dKTsKICAgIH0pKTsKICAgIHJldHVybiBfdW56aXBDaHVua1NsaWNlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfQogIHZhciB1bnppcFBha28gPSB7CiAgICB1bnppcDogdW56aXAkMiwKICAgIHVuemlwQ2h1bms6IHVuemlwQ2h1bmskMSwKICAgIHVuemlwQ2h1bmtTbGljZTogdW56aXBDaHVua1NsaWNlJDEsCiAgICBwYWtvVW56aXA6IHVuemlwJDIsCiAgICBub2RlVW56aXA6IGZ1bmN0aW9uIG5vZGVVbnppcCgpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCJub2RlVW56aXAgbm90IGltcGxlbWVudGVkLiIpOwogICAgfQogIH07CiAgdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQkMiA9IGludGVyb3BSZXF1aXJlRGVmYXVsdC5leHBvcnRzOwogIHZhciBfcmVnZW5lcmF0b3IkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQkMihyZWdlbmVyYXRvcik7CiAgdmFyIF9hc3luY1RvR2VuZXJhdG9yMiQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdCQyKGFzeW5jVG9HZW5lcmF0b3IuZXhwb3J0cyk7CiAgdmFyIF9jbGFzc0NhbGxDaGVjazIkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQkMihjbGFzc0NhbGxDaGVjay5leHBvcnRzKTsKICB2YXIgX2NyZWF0ZUNsYXNzMiQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdCQyKGNyZWF0ZUNsYXNzLmV4cG9ydHMpOwogIHZhciBmcyA9IHJlcXVpcmUkJDU7CiAgdmFyIExvY2FsRmlsZSQyID0gLyogQF9fUFVSRV9fICovIGZ1bmN0aW9uKCkgewogICAgZnVuY3Rpb24gTG9jYWxGaWxlMihwYXRoKSB7CiAgICAgICgwLCBfY2xhc3NDYWxsQ2hlY2syJDIuZGVmYXVsdCkodGhpcywgTG9jYWxGaWxlMik7CiAgICAgIHRoaXMuZmRQcm9taXNlID0gZnMub3BlbihwYXRoLCAiciIpOwogICAgICB0aGlzLnBhdGggPSBwYXRoOwogICAgfQogICAgKDAsIF9jcmVhdGVDbGFzczIkMi5kZWZhdWx0KShMb2NhbEZpbGUyLCBbeyBrZXk6ICJyZWFkIiwgdmFsdWU6IGZ1bmN0aW9uKCkgewogICAgICB2YXIgX3JlYWQgPSAoMCwgX2FzeW5jVG9HZW5lcmF0b3IyJDIuZGVmYXVsdCkoLyogQF9fUFVSRV9fICovIF9yZWdlbmVyYXRvciQyLmRlZmF1bHQubWFyayhmdW5jdGlvbiBfY2FsbGVlKGJ1Ziwgb2Zmc2V0LCBsZW5ndGgsIHBvc2l0aW9uKSB7CiAgICAgICAgdmFyIGZkLCByZXQ7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvciQyLmRlZmF1bHQud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmRQcm9taXNlOwogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIGZkID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIGZzLnJlYWQoZmQsIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgsIHBvc2l0aW9uKTsKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICByZXQgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgcmV0KTsKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCB0aGlzKTsKICAgICAgfSkpOwogICAgICBmdW5jdGlvbiByZWFkKF94LCBfeDIsIF94MywgX3g0KSB7CiAgICAgICAgcmV0dXJuIF9yZWFkLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlYWQ7CiAgICB9KCkgfSwgeyBrZXk6ICJzdGF0IiwgdmFsdWU6IGZ1bmN0aW9uKCkgewogICAgICB2YXIgX3N0YXQgPSAoMCwgX2FzeW5jVG9HZW5lcmF0b3IyJDIuZGVmYXVsdCkoLyogQF9fUFVSRV9fICovIF9yZWdlbmVyYXRvciQyLmRlZmF1bHQubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgZmQ7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvciQyLmRlZmF1bHQud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mZFByb21pc2U7CiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgZmQgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBmcy5mc3RhdChmZCkpOwogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMiwgdGhpcyk7CiAgICAgIH0pKTsKICAgICAgZnVuY3Rpb24gc3RhdCgpIHsKICAgICAgICByZXR1cm4gX3N0YXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQogICAgICByZXR1cm4gc3RhdDsKICAgIH0oKSB9XSk7CiAgICByZXR1cm4gTG9jYWxGaWxlMjsKICB9KCk7CiAgdmFyIGxvY2FsRmlsZSA9IExvY2FsRmlsZSQyOwogIHZhciBsb25nID0gTG9uZyQxOwogIHZhciB3YXNtID0gbnVsbDsKICB0cnkgewogICAgd2FzbSA9IG5ldyBXZWJBc3NlbWJseS5JbnN0YW5jZShuZXcgV2ViQXNzZW1ibHkuTW9kdWxlKG5ldyBVaW50OEFycmF5KFsKICAgICAgMCwKICAgICAgOTcsCiAgICAgIDExNSwKICAgICAgMTA5LAogICAgICAxLAogICAgICAwLAogICAgICAwLAogICAgICAwLAogICAgICAxLAogICAgICAxMywKICAgICAgMiwKICAgICAgOTYsCiAgICAgIDAsCiAgICAgIDEsCiAgICAgIDEyNywKICAgICAgOTYsCiAgICAgIDQsCiAgICAgIDEyNywKICAgICAgMTI3LAogICAgICAxMjcsCiAgICAgIDEyNywKICAgICAgMSwKICAgICAgMTI3LAogICAgICAzLAogICAgICA3LAogICAgICA2LAogICAgICAwLAogICAgICAxLAogICAgICAxLAogICAgICAxLAogICAgICAxLAogICAgICAxLAogICAgICA2LAogICAgICA2LAogICAgICAxLAogICAgICAxMjcsCiAgICAgIDEsCiAgICAgIDY1LAogICAgICAwLAogICAgICAxMSwKICAgICAgNywKICAgICAgNTAsCiAgICAgIDYsCiAgICAgIDMsCiAgICAgIDEwOSwKICAgICAgMTE3LAogICAgICAxMDgsCiAgICAgIDAsCiAgICAgIDEsCiAgICAgIDUsCiAgICAgIDEwMCwKICAgICAgMTA1LAogICAgICAxMTgsCiAgICAgIDk1LAogICAgICAxMTUsCiAgICAgIDAsCiAgICAgIDIsCiAgICAgIDUsCiAgICAgIDEwMCwKICAgICAgMTA1LAogICAgICAxMTgsCiAgICAgIDk1LAogICAgICAxMTcsCiAgICAgIDAsCiAgICAgIDMsCiAgICAgIDUsCiAgICAgIDExNCwKICAgICAgMTAxLAogICAgICAxMDksCiAgICAgIDk1LAogICAgICAxMTUsCiAgICAgIDAsCiAgICAgIDQsCiAgICAgIDUsCiAgICAgIDExNCwKICAgICAgMTAxLAogICAgICAxMDksCiAgICAgIDk1LAogICAgICAxMTcsCiAgICAgIDAsCiAgICAgIDUsCiAgICAgIDgsCiAgICAgIDEwMywKICAgICAgMTAxLAogICAgICAxMTYsCiAgICAgIDk1LAogICAgICAxMDQsCiAgICAgIDEwNSwKICAgICAgMTAzLAogICAgICAxMDQsCiAgICAgIDAsCiAgICAgIDAsCiAgICAgIDEwLAogICAgICAxOTEsCiAgICAgIDEsCiAgICAgIDYsCiAgICAgIDQsCiAgICAgIDAsCiAgICAgIDM1LAogICAgICAwLAogICAgICAxMSwKICAgICAgMzYsCiAgICAgIDEsCiAgICAgIDEsCiAgICAgIDEyNiwKICAgICAgMzIsCiAgICAgIDAsCiAgICAgIDE3MywKICAgICAgMzIsCiAgICAgIDEsCiAgICAgIDE3MywKICAgICAgNjYsCiAgICAgIDMyLAogICAgICAxMzQsCiAgICAgIDEzMiwKICAgICAgMzIsCiAgICAgIDIsCiAgICAgIDE3MywKICAgICAgMzIsCiAgICAgIDMsCiAgICAgIDE3MywKICAgICAgNjYsCiAgICAgIDMyLAogICAgICAxMzQsCiAgICAgIDEzMiwKICAgICAgMTI2LAogICAgICAzNCwKICAgICAgNCwKICAgICAgNjYsCiAgICAgIDMyLAogICAgICAxMzUsCiAgICAgIDE2NywKICAgICAgMzYsCiAgICAgIDAsCiAgICAgIDMyLAogICAgICA0LAogICAgICAxNjcsCiAgICAgIDExLAogICAgICAzNiwKICAgICAgMSwKICAgICAgMSwKICAgICAgMTI2LAogICAgICAzMiwKICAgICAgMCwKICAgICAgMTczLAogICAgICAzMiwKICAgICAgMSwKICAgICAgMTczLAogICAgICA2NiwKICAgICAgMzIsCiAgICAgIDEzNCwKICAgICAgMTMyLAogICAgICAzMiwKICAgICAgMiwKICAgICAgMTczLAogICAgICAzMiwKICAgICAgMywKICAgICAgMTczLAogICAgICA2NiwKICAgICAgMzIsCiAgICAgIDEzNCwKICAgICAgMTMyLAogICAgICAxMjcsCiAgICAgIDM0LAogICAgICA0LAogICAgICA2NiwKICAgICAgMzIsCiAgICAgIDEzNSwKICAgICAgMTY3LAogICAgICAzNiwKICAgICAgMCwKICAgICAgMzIsCiAgICAgIDQsCiAgICAgIDE2NywKICAgICAgMTEsCiAgICAgIDM2LAogICAgICAxLAogICAgICAxLAogICAgICAxMjYsCiAgICAgIDMyLAogICAgICAwLAogICAgICAxNzMsCiAgICAgIDMyLAogICAgICAxLAogICAgICAxNzMsCiAgICAgIDY2LAogICAgICAzMiwKICAgICAgMTM0LAogICAgICAxMzIsCiAgICAgIDMyLAogICAgICAyLAogICAgICAxNzMsCiAgICAgIDMyLAogICAgICAzLAogICAgICAxNzMsCiAgICAgIDY2LAogICAgICAzMiwKICAgICAgMTM0LAogICAgICAxMzIsCiAgICAgIDEyOCwKICAgICAgMzQsCiAgICAgIDQsCiAgICAgIDY2LAogICAgICAzMiwKICAgICAgMTM1LAogICAgICAxNjcsCiAgICAgIDM2LAogICAgICAwLAogICAgICAzMiwKICAgICAgNCwKICAgICAgMTY3LAogICAgICAxMSwKICAgICAgMzYsCiAgICAgIDEsCiAgICAgIDEsCiAgICAgIDEyNiwKICAgICAgMzIsCiAgICAgIDAsCiAgICAgIDE3MywKICAgICAgMzIsCiAgICAgIDEsCiAgICAgIDE3MywKICAgICAgNjYsCiAgICAgIDMyLAogICAgICAxMzQsCiAgICAgIDEzMiwKICAgICAgMzIsCiAgICAgIDIsCiAgICAgIDE3MywKICAgICAgMzIsCiAgICAgIDMsCiAgICAgIDE3MywKICAgICAgNjYsCiAgICAgIDMyLAogICAgICAxMzQsCiAgICAgIDEzMiwKICAgICAgMTI5LAogICAgICAzNCwKICAgICAgNCwKICAgICAgNjYsCiAgICAgIDMyLAogICAgICAxMzUsCiAgICAgIDE2NywKICAgICAgMzYsCiAgICAgIDAsCiAgICAgIDMyLAogICAgICA0LAogICAgICAxNjcsCiAgICAgIDExLAogICAgICAzNiwKICAgICAgMSwKICAgICAgMSwKICAgICAgMTI2LAogICAgICAzMiwKICAgICAgMCwKICAgICAgMTczLAogICAgICAzMiwKICAgICAgMSwKICAgICAgMTczLAogICAgICA2NiwKICAgICAgMzIsCiAgICAgIDEzNCwKICAgICAgMTMyLAogICAgICAzMiwKICAgICAgMiwKICAgICAgMTczLAogICAgICAzMiwKICAgICAgMywKICAgICAgMTczLAogICAgICA2NiwKICAgICAgMzIsCiAgICAgIDEzNCwKICAgICAgMTMyLAogICAgICAxMzAsCiAgICAgIDM0LAogICAgICA0LAogICAgICA2NiwKICAgICAgMzIsCiAgICAgIDEzNSwKICAgICAgMTY3LAogICAgICAzNiwKICAgICAgMCwKICAgICAgMzIsCiAgICAgIDQsCiAgICAgIDE2NywKICAgICAgMTEKICAgIF0pKSwge30pLmV4cG9ydHM7CiAgfSBjYXRjaCAoZSkgewogIH0KICBmdW5jdGlvbiBMb25nJDEobG93LCBoaWdoLCB1bnNpZ25lZCkgewogICAgdGhpcy5sb3cgPSBsb3cgfCAwOwogICAgdGhpcy5oaWdoID0gaGlnaCB8IDA7CiAgICB0aGlzLnVuc2lnbmVkID0gISF1bnNpZ25lZDsKICB9CiAgTG9uZyQxLnByb3RvdHlwZS5fX2lzTG9uZ19fOwogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShMb25nJDEucHJvdG90eXBlLCAiX19pc0xvbmdfXyIsIHsgdmFsdWU6IHRydWUgfSk7CiAgZnVuY3Rpb24gaXNMb25nKG9iaikgewogICAgcmV0dXJuIChvYmogJiYgb2JqWyJfX2lzTG9uZ19fIl0pID09PSB0cnVlOwogIH0KICBMb25nJDEuaXNMb25nID0gaXNMb25nOwogIHZhciBJTlRfQ0FDSEUgPSB7fTsKICB2YXIgVUlOVF9DQUNIRSA9IHt9OwogIGZ1bmN0aW9uIGZyb21JbnQodmFsdWUsIHVuc2lnbmVkKSB7CiAgICB2YXIgb2JqLCBjYWNoZWRPYmosIGNhY2hlOwogICAgaWYgKHVuc2lnbmVkKSB7CiAgICAgIHZhbHVlID4+Pj0gMDsKICAgICAgaWYgKGNhY2hlID0gMCA8PSB2YWx1ZSAmJiB2YWx1ZSA8IDI1NikgewogICAgICAgIGNhY2hlZE9iaiA9IFVJTlRfQ0FDSEVbdmFsdWVdOwogICAgICAgIGlmIChjYWNoZWRPYmopCiAgICAgICAgICByZXR1cm4gY2FjaGVkT2JqOwogICAgICB9CiAgICAgIG9iaiA9IGZyb21CaXRzKHZhbHVlLCAodmFsdWUgfCAwKSA8IDAgPyAtMSA6IDAsIHRydWUpOwogICAgICBpZiAoY2FjaGUpCiAgICAgICAgVUlOVF9DQUNIRVt2YWx1ZV0gPSBvYmo7CiAgICAgIHJldHVybiBvYmo7CiAgICB9IGVsc2UgewogICAgICB2YWx1ZSB8PSAwOwogICAgICBpZiAoY2FjaGUgPSAtMTI4IDw9IHZhbHVlICYmIHZhbHVlIDwgMTI4KSB7CiAgICAgICAgY2FjaGVkT2JqID0gSU5UX0NBQ0hFW3ZhbHVlXTsKICAgICAgICBpZiAoY2FjaGVkT2JqKQogICAgICAgICAgcmV0dXJuIGNhY2hlZE9iajsKICAgICAgfQogICAgICBvYmogPSBmcm9tQml0cyh2YWx1ZSwgdmFsdWUgPCAwID8gLTEgOiAwLCBmYWxzZSk7CiAgICAgIGlmIChjYWNoZSkKICAgICAgICBJTlRfQ0FDSEVbdmFsdWVdID0gb2JqOwogICAgICByZXR1cm4gb2JqOwogICAgfQogIH0KICBMb25nJDEuZnJvbUludCA9IGZyb21JbnQ7CiAgZnVuY3Rpb24gZnJvbU51bWJlcih2YWx1ZSwgdW5zaWduZWQpIHsKICAgIGlmIChpc05hTih2YWx1ZSkpCiAgICAgIHJldHVybiB1bnNpZ25lZCA/IFVaRVJPIDogWkVSTzsKICAgIGlmICh1bnNpZ25lZCkgewogICAgICBpZiAodmFsdWUgPCAwKQogICAgICAgIHJldHVybiBVWkVSTzsKICAgICAgaWYgKHZhbHVlID49IFRXT19QV1JfNjRfREJMKQogICAgICAgIHJldHVybiBNQVhfVU5TSUdORURfVkFMVUU7CiAgICB9IGVsc2UgewogICAgICBpZiAodmFsdWUgPD0gLVRXT19QV1JfNjNfREJMKQogICAgICAgIHJldHVybiBNSU5fVkFMVUU7CiAgICAgIGlmICh2YWx1ZSArIDEgPj0gVFdPX1BXUl82M19EQkwpCiAgICAgICAgcmV0dXJuIE1BWF9WQUxVRTsKICAgIH0KICAgIGlmICh2YWx1ZSA8IDApCiAgICAgIHJldHVybiBmcm9tTnVtYmVyKC12YWx1ZSwgdW5zaWduZWQpLm5lZygpOwogICAgcmV0dXJuIGZyb21CaXRzKHZhbHVlICUgVFdPX1BXUl8zMl9EQkwgfCAwLCB2YWx1ZSAvIFRXT19QV1JfMzJfREJMIHwgMCwgdW5zaWduZWQpOwogIH0KICBMb25nJDEuZnJvbU51bWJlciA9IGZyb21OdW1iZXI7CiAgZnVuY3Rpb24gZnJvbUJpdHMobG93Qml0cywgaGlnaEJpdHMsIHVuc2lnbmVkKSB7CiAgICByZXR1cm4gbmV3IExvbmckMShsb3dCaXRzLCBoaWdoQml0cywgdW5zaWduZWQpOwogIH0KICBMb25nJDEuZnJvbUJpdHMgPSBmcm9tQml0czsKICB2YXIgcG93X2RibCA9IE1hdGgucG93OwogIGZ1bmN0aW9uIGZyb21TdHJpbmcoc3RyLCB1bnNpZ25lZCwgcmFkaXgpIHsKICAgIGlmIChzdHIubGVuZ3RoID09PSAwKQogICAgICB0aHJvdyBFcnJvcigiZW1wdHkgc3RyaW5nIik7CiAgICBpZiAoc3RyID09PSAiTmFOIiB8fCBzdHIgPT09ICJJbmZpbml0eSIgfHwgc3RyID09PSAiK0luZmluaXR5IiB8fCBzdHIgPT09ICItSW5maW5pdHkiKQogICAgICByZXR1cm4gWkVSTzsKICAgIGlmICh0eXBlb2YgdW5zaWduZWQgPT09ICJudW1iZXIiKSB7CiAgICAgIHJhZGl4ID0gdW5zaWduZWQsIHVuc2lnbmVkID0gZmFsc2U7CiAgICB9IGVsc2UgewogICAgICB1bnNpZ25lZCA9ICEhdW5zaWduZWQ7CiAgICB9CiAgICByYWRpeCA9IHJhZGl4IHx8IDEwOwogICAgaWYgKHJhZGl4IDwgMiB8fCAzNiA8IHJhZGl4KQogICAgICB0aHJvdyBSYW5nZUVycm9yKCJyYWRpeCIpOwogICAgdmFyIHA7CiAgICBpZiAoKHAgPSBzdHIuaW5kZXhPZigiLSIpKSA+IDApCiAgICAgIHRocm93IEVycm9yKCJpbnRlcmlvciBoeXBoZW4iKTsKICAgIGVsc2UgaWYgKHAgPT09IDApIHsKICAgICAgcmV0dXJuIGZyb21TdHJpbmcoc3RyLnN1YnN0cmluZygxKSwgdW5zaWduZWQsIHJhZGl4KS5uZWcoKTsKICAgIH0KICAgIHZhciByYWRpeFRvUG93ZXIgPSBmcm9tTnVtYmVyKHBvd19kYmwocmFkaXgsIDgpKTsKICAgIHZhciByZXN1bHQgPSBaRVJPOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpICs9IDgpIHsKICAgICAgdmFyIHNpemUgPSBNYXRoLm1pbig4LCBzdHIubGVuZ3RoIC0gaSksIHZhbHVlID0gcGFyc2VJbnQoc3RyLnN1YnN0cmluZyhpLCBpICsgc2l6ZSksIHJhZGl4KTsKICAgICAgaWYgKHNpemUgPCA4KSB7CiAgICAgICAgdmFyIHBvd2VyID0gZnJvbU51bWJlcihwb3dfZGJsKHJhZGl4LCBzaXplKSk7CiAgICAgICAgcmVzdWx0ID0gcmVzdWx0Lm11bChwb3dlcikuYWRkKGZyb21OdW1iZXIodmFsdWUpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXN1bHQgPSByZXN1bHQubXVsKHJhZGl4VG9Qb3dlcik7CiAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmFkZChmcm9tTnVtYmVyKHZhbHVlKSk7CiAgICAgIH0KICAgIH0KICAgIHJlc3VsdC51bnNpZ25lZCA9IHVuc2lnbmVkOwogICAgcmV0dXJuIHJlc3VsdDsKICB9CiAgTG9uZyQxLmZyb21TdHJpbmcgPSBmcm9tU3RyaW5nOwogIGZ1bmN0aW9uIGZyb21WYWx1ZSh2YWwsIHVuc2lnbmVkKSB7CiAgICBpZiAodHlwZW9mIHZhbCA9PT0gIm51bWJlciIpCiAgICAgIHJldHVybiBmcm9tTnVtYmVyKHZhbCwgdW5zaWduZWQpOwogICAgaWYgKHR5cGVvZiB2YWwgPT09ICJzdHJpbmciKQogICAgICByZXR1cm4gZnJvbVN0cmluZyh2YWwsIHVuc2lnbmVkKTsKICAgIHJldHVybiBmcm9tQml0cyh2YWwubG93LCB2YWwuaGlnaCwgdHlwZW9mIHVuc2lnbmVkID09PSAiYm9vbGVhbiIgPyB1bnNpZ25lZCA6IHZhbC51bnNpZ25lZCk7CiAgfQogIExvbmckMS5mcm9tVmFsdWUgPSBmcm9tVmFsdWU7CiAgdmFyIFRXT19QV1JfMTZfREJMID0gMSA8PCAxNjsKICB2YXIgVFdPX1BXUl8yNF9EQkwgPSAxIDw8IDI0OwogIHZhciBUV09fUFdSXzMyX0RCTCA9IFRXT19QV1JfMTZfREJMICogVFdPX1BXUl8xNl9EQkw7CiAgdmFyIFRXT19QV1JfNjRfREJMID0gVFdPX1BXUl8zMl9EQkwgKiBUV09fUFdSXzMyX0RCTDsKICB2YXIgVFdPX1BXUl82M19EQkwgPSBUV09fUFdSXzY0X0RCTCAvIDI7CiAgdmFyIFRXT19QV1JfMjQgPSBmcm9tSW50KFRXT19QV1JfMjRfREJMKTsKICB2YXIgWkVSTyA9IGZyb21JbnQoMCk7CiAgTG9uZyQxLlpFUk8gPSBaRVJPOwogIHZhciBVWkVSTyA9IGZyb21JbnQoMCwgdHJ1ZSk7CiAgTG9uZyQxLlVaRVJPID0gVVpFUk87CiAgdmFyIE9ORSA9IGZyb21JbnQoMSk7CiAgTG9uZyQxLk9ORSA9IE9ORTsKICB2YXIgVU9ORSA9IGZyb21JbnQoMSwgdHJ1ZSk7CiAgTG9uZyQxLlVPTkUgPSBVT05FOwogIHZhciBORUdfT05FID0gZnJvbUludCgtMSk7CiAgTG9uZyQxLk5FR19PTkUgPSBORUdfT05FOwogIHZhciBNQVhfVkFMVUUgPSBmcm9tQml0cyg0Mjk0OTY3Mjk1IHwgMCwgMjE0NzQ4MzY0NyB8IDAsIGZhbHNlKTsKICBMb25nJDEuTUFYX1ZBTFVFID0gTUFYX1ZBTFVFOwogIHZhciBNQVhfVU5TSUdORURfVkFMVUUgPSBmcm9tQml0cyg0Mjk0OTY3Mjk1IHwgMCwgNDI5NDk2NzI5NSB8IDAsIHRydWUpOwogIExvbmckMS5NQVhfVU5TSUdORURfVkFMVUUgPSBNQVhfVU5TSUdORURfVkFMVUU7CiAgdmFyIE1JTl9WQUxVRSA9IGZyb21CaXRzKDAsIDIxNDc0ODM2NDggfCAwLCBmYWxzZSk7CiAgTG9uZyQxLk1JTl9WQUxVRSA9IE1JTl9WQUxVRTsKICB2YXIgTG9uZ1Byb3RvdHlwZSA9IExvbmckMS5wcm90b3R5cGU7CiAgTG9uZ1Byb3RvdHlwZS50b0ludCA9IGZ1bmN0aW9uIHRvSW50KCkgewogICAgcmV0dXJuIHRoaXMudW5zaWduZWQgPyB0aGlzLmxvdyA+Pj4gMCA6IHRoaXMubG93OwogIH07CiAgTG9uZ1Byb3RvdHlwZS50b051bWJlciA9IGZ1bmN0aW9uIHRvTnVtYmVyMigpIHsKICAgIGlmICh0aGlzLnVuc2lnbmVkKQogICAgICByZXR1cm4gKHRoaXMuaGlnaCA+Pj4gMCkgKiBUV09fUFdSXzMyX0RCTCArICh0aGlzLmxvdyA+Pj4gMCk7CiAgICByZXR1cm4gdGhpcy5oaWdoICogVFdPX1BXUl8zMl9EQkwgKyAodGhpcy5sb3cgPj4+IDApOwogIH07CiAgTG9uZ1Byb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nMihyYWRpeCkgewogICAgcmFkaXggPSByYWRpeCB8fCAxMDsKICAgIGlmIChyYWRpeCA8IDIgfHwgMzYgPCByYWRpeCkKICAgICAgdGhyb3cgUmFuZ2VFcnJvcigicmFkaXgiKTsKICAgIGlmICh0aGlzLmlzWmVybygpKQogICAgICByZXR1cm4gIjAiOwogICAgaWYgKHRoaXMuaXNOZWdhdGl2ZSgpKSB7CiAgICAgIGlmICh0aGlzLmVxKE1JTl9WQUxVRSkpIHsKICAgICAgICB2YXIgcmFkaXhMb25nID0gZnJvbU51bWJlcihyYWRpeCksIGRpdiA9IHRoaXMuZGl2KHJhZGl4TG9uZyksIHJlbTEgPSBkaXYubXVsKHJhZGl4TG9uZykuc3ViKHRoaXMpOwogICAgICAgIHJldHVybiBkaXYudG9TdHJpbmcocmFkaXgpICsgcmVtMS50b0ludCgpLnRvU3RyaW5nKHJhZGl4KTsKICAgICAgfSBlbHNlCiAgICAgICAgcmV0dXJuICItIiArIHRoaXMubmVnKCkudG9TdHJpbmcocmFkaXgpOwogICAgfQogICAgdmFyIHJhZGl4VG9Qb3dlciA9IGZyb21OdW1iZXIocG93X2RibChyYWRpeCwgNiksIHRoaXMudW5zaWduZWQpLCByZW0gPSB0aGlzOwogICAgdmFyIHJlc3VsdCA9ICIiOwogICAgd2hpbGUgKHRydWUpIHsKICAgICAgdmFyIHJlbURpdiA9IHJlbS5kaXYocmFkaXhUb1Bvd2VyKSwgaW50dmFsID0gcmVtLnN1YihyZW1EaXYubXVsKHJhZGl4VG9Qb3dlcikpLnRvSW50KCkgPj4+IDAsIGRpZ2l0cyA9IGludHZhbC50b1N0cmluZyhyYWRpeCk7CiAgICAgIHJlbSA9IHJlbURpdjsKICAgICAgaWYgKHJlbS5pc1plcm8oKSkKICAgICAgICByZXR1cm4gZGlnaXRzICsgcmVzdWx0OwogICAgICBlbHNlIHsKICAgICAgICB3aGlsZSAoZGlnaXRzLmxlbmd0aCA8IDYpCiAgICAgICAgICBkaWdpdHMgPSAiMCIgKyBkaWdpdHM7CiAgICAgICAgcmVzdWx0ID0gIiIgKyBkaWdpdHMgKyByZXN1bHQ7CiAgICAgIH0KICAgIH0KICB9OwogIExvbmdQcm90b3R5cGUuZ2V0SGlnaEJpdHMgPSBmdW5jdGlvbiBnZXRIaWdoQml0cygpIHsKICAgIHJldHVybiB0aGlzLmhpZ2g7CiAgfTsKICBMb25nUHJvdG90eXBlLmdldEhpZ2hCaXRzVW5zaWduZWQgPSBmdW5jdGlvbiBnZXRIaWdoQml0c1Vuc2lnbmVkKCkgewogICAgcmV0dXJuIHRoaXMuaGlnaCA+Pj4gMDsKICB9OwogIExvbmdQcm90b3R5cGUuZ2V0TG93Qml0cyA9IGZ1bmN0aW9uIGdldExvd0JpdHMoKSB7CiAgICByZXR1cm4gdGhpcy5sb3c7CiAgfTsKICBMb25nUHJvdG90eXBlLmdldExvd0JpdHNVbnNpZ25lZCA9IGZ1bmN0aW9uIGdldExvd0JpdHNVbnNpZ25lZCgpIHsKICAgIHJldHVybiB0aGlzLmxvdyA+Pj4gMDsKICB9OwogIExvbmdQcm90b3R5cGUuZ2V0TnVtQml0c0FicyA9IGZ1bmN0aW9uIGdldE51bUJpdHNBYnMoKSB7CiAgICBpZiAodGhpcy5pc05lZ2F0aXZlKCkpCiAgICAgIHJldHVybiB0aGlzLmVxKE1JTl9WQUxVRSkgPyA2NCA6IHRoaXMubmVnKCkuZ2V0TnVtQml0c0FicygpOwogICAgdmFyIHZhbCA9IHRoaXMuaGlnaCAhPSAwID8gdGhpcy5oaWdoIDogdGhpcy5sb3c7CiAgICBmb3IgKHZhciBiaXQgPSAzMTsgYml0ID4gMDsgYml0LS0pCiAgICAgIGlmICgodmFsICYgMSA8PCBiaXQpICE9IDApCiAgICAgICAgYnJlYWs7CiAgICByZXR1cm4gdGhpcy5oaWdoICE9IDAgPyBiaXQgKyAzMyA6IGJpdCArIDE7CiAgfTsKICBMb25nUHJvdG90eXBlLmlzWmVybyA9IGZ1bmN0aW9uIGlzWmVybygpIHsKICAgIHJldHVybiB0aGlzLmhpZ2ggPT09IDAgJiYgdGhpcy5sb3cgPT09IDA7CiAgfTsKICBMb25nUHJvdG90eXBlLmVxeiA9IExvbmdQcm90b3R5cGUuaXNaZXJvOwogIExvbmdQcm90b3R5cGUuaXNOZWdhdGl2ZSA9IGZ1bmN0aW9uIGlzTmVnYXRpdmUoKSB7CiAgICByZXR1cm4gIXRoaXMudW5zaWduZWQgJiYgdGhpcy5oaWdoIDwgMDsKICB9OwogIExvbmdQcm90b3R5cGUuaXNQb3NpdGl2ZSA9IGZ1bmN0aW9uIGlzUG9zaXRpdmUoKSB7CiAgICByZXR1cm4gdGhpcy51bnNpZ25lZCB8fCB0aGlzLmhpZ2ggPj0gMDsKICB9OwogIExvbmdQcm90b3R5cGUuaXNPZGQgPSBmdW5jdGlvbiBpc09kZCgpIHsKICAgIHJldHVybiAodGhpcy5sb3cgJiAxKSA9PT0gMTsKICB9OwogIExvbmdQcm90b3R5cGUuaXNFdmVuID0gZnVuY3Rpb24gaXNFdmVuKCkgewogICAgcmV0dXJuICh0aGlzLmxvdyAmIDEpID09PSAwOwogIH07CiAgTG9uZ1Byb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiBlcXVhbHMob3RoZXIpIHsKICAgIGlmICghaXNMb25nKG90aGVyKSkKICAgICAgb3RoZXIgPSBmcm9tVmFsdWUob3RoZXIpOwogICAgaWYgKHRoaXMudW5zaWduZWQgIT09IG90aGVyLnVuc2lnbmVkICYmIHRoaXMuaGlnaCA+Pj4gMzEgPT09IDEgJiYgb3RoZXIuaGlnaCA+Pj4gMzEgPT09IDEpCiAgICAgIHJldHVybiBmYWxzZTsKICAgIHJldHVybiB0aGlzLmhpZ2ggPT09IG90aGVyLmhpZ2ggJiYgdGhpcy5sb3cgPT09IG90aGVyLmxvdzsKICB9OwogIExvbmdQcm90b3R5cGUuZXEgPSBMb25nUHJvdG90eXBlLmVxdWFsczsKICBMb25nUHJvdG90eXBlLm5vdEVxdWFscyA9IGZ1bmN0aW9uIG5vdEVxdWFscyhvdGhlcikgewogICAgcmV0dXJuICF0aGlzLmVxKG90aGVyKTsKICB9OwogIExvbmdQcm90b3R5cGUubmVxID0gTG9uZ1Byb3RvdHlwZS5ub3RFcXVhbHM7CiAgTG9uZ1Byb3RvdHlwZS5uZSA9IExvbmdQcm90b3R5cGUubm90RXF1YWxzOwogIExvbmdQcm90b3R5cGUubGVzc1RoYW4gPSBmdW5jdGlvbiBsZXNzVGhhbihvdGhlcikgewogICAgcmV0dXJuIHRoaXMuY29tcChvdGhlcikgPCAwOwogIH07CiAgTG9uZ1Byb3RvdHlwZS5sdCA9IExvbmdQcm90b3R5cGUubGVzc1RoYW47CiAgTG9uZ1Byb3RvdHlwZS5sZXNzVGhhbk9yRXF1YWwgPSBmdW5jdGlvbiBsZXNzVGhhbk9yRXF1YWwob3RoZXIpIHsKICAgIHJldHVybiB0aGlzLmNvbXAob3RoZXIpIDw9IDA7CiAgfTsKICBMb25nUHJvdG90eXBlLmx0ZSA9IExvbmdQcm90b3R5cGUubGVzc1RoYW5PckVxdWFsOwogIExvbmdQcm90b3R5cGUubGUgPSBMb25nUHJvdG90eXBlLmxlc3NUaGFuT3JFcXVhbDsKICBMb25nUHJvdG90eXBlLmdyZWF0ZXJUaGFuID0gZnVuY3Rpb24gZ3JlYXRlclRoYW4ob3RoZXIpIHsKICAgIHJldHVybiB0aGlzLmNvbXAob3RoZXIpID4gMDsKICB9OwogIExvbmdQcm90b3R5cGUuZ3QgPSBMb25nUHJvdG90eXBlLmdyZWF0ZXJUaGFuOwogIExvbmdQcm90b3R5cGUuZ3JlYXRlclRoYW5PckVxdWFsID0gZnVuY3Rpb24gZ3JlYXRlclRoYW5PckVxdWFsKG90aGVyKSB7CiAgICByZXR1cm4gdGhpcy5jb21wKG90aGVyKSA+PSAwOwogIH07CiAgTG9uZ1Byb3RvdHlwZS5ndGUgPSBMb25nUHJvdG90eXBlLmdyZWF0ZXJUaGFuT3JFcXVhbDsKICBMb25nUHJvdG90eXBlLmdlID0gTG9uZ1Byb3RvdHlwZS5ncmVhdGVyVGhhbk9yRXF1YWw7CiAgTG9uZ1Byb3RvdHlwZS5jb21wYXJlID0gZnVuY3Rpb24gY29tcGFyZShvdGhlcikgewogICAgaWYgKCFpc0xvbmcob3RoZXIpKQogICAgICBvdGhlciA9IGZyb21WYWx1ZShvdGhlcik7CiAgICBpZiAodGhpcy5lcShvdGhlcikpCiAgICAgIHJldHVybiAwOwogICAgdmFyIHRoaXNOZWcgPSB0aGlzLmlzTmVnYXRpdmUoKSwgb3RoZXJOZWcgPSBvdGhlci5pc05lZ2F0aXZlKCk7CiAgICBpZiAodGhpc05lZyAmJiAhb3RoZXJOZWcpCiAgICAgIHJldHVybiAtMTsKICAgIGlmICghdGhpc05lZyAmJiBvdGhlck5lZykKICAgICAgcmV0dXJuIDE7CiAgICBpZiAoIXRoaXMudW5zaWduZWQpCiAgICAgIHJldHVybiB0aGlzLnN1YihvdGhlcikuaXNOZWdhdGl2ZSgpID8gLTEgOiAxOwogICAgcmV0dXJuIG90aGVyLmhpZ2ggPj4+IDAgPiB0aGlzLmhpZ2ggPj4+IDAgfHwgb3RoZXIuaGlnaCA9PT0gdGhpcy5oaWdoICYmIG90aGVyLmxvdyA+Pj4gMCA+IHRoaXMubG93ID4+PiAwID8gLTEgOiAxOwogIH07CiAgTG9uZ1Byb3RvdHlwZS5jb21wID0gTG9uZ1Byb3RvdHlwZS5jb21wYXJlOwogIExvbmdQcm90b3R5cGUubmVnYXRlID0gZnVuY3Rpb24gbmVnYXRlKCkgewogICAgaWYgKCF0aGlzLnVuc2lnbmVkICYmIHRoaXMuZXEoTUlOX1ZBTFVFKSkKICAgICAgcmV0dXJuIE1JTl9WQUxVRTsKICAgIHJldHVybiB0aGlzLm5vdCgpLmFkZChPTkUpOwogIH07CiAgTG9uZ1Byb3RvdHlwZS5uZWcgPSBMb25nUHJvdG90eXBlLm5lZ2F0ZTsKICBMb25nUHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIGFkZChhZGRlbmQpIHsKICAgIGlmICghaXNMb25nKGFkZGVuZCkpCiAgICAgIGFkZGVuZCA9IGZyb21WYWx1ZShhZGRlbmQpOwogICAgdmFyIGE0OCA9IHRoaXMuaGlnaCA+Pj4gMTY7CiAgICB2YXIgYTMyID0gdGhpcy5oaWdoICYgNjU1MzU7CiAgICB2YXIgYTE2ID0gdGhpcy5sb3cgPj4+IDE2OwogICAgdmFyIGEwMCA9IHRoaXMubG93ICYgNjU1MzU7CiAgICB2YXIgYjQ4ID0gYWRkZW5kLmhpZ2ggPj4+IDE2OwogICAgdmFyIGIzMiA9IGFkZGVuZC5oaWdoICYgNjU1MzU7CiAgICB2YXIgYjE2ID0gYWRkZW5kLmxvdyA+Pj4gMTY7CiAgICB2YXIgYjAwID0gYWRkZW5kLmxvdyAmIDY1NTM1OwogICAgdmFyIGM0OCA9IDAsIGMzMiA9IDAsIGMxNiA9IDAsIGMwMCA9IDA7CiAgICBjMDAgKz0gYTAwICsgYjAwOwogICAgYzE2ICs9IGMwMCA+Pj4gMTY7CiAgICBjMDAgJj0gNjU1MzU7CiAgICBjMTYgKz0gYTE2ICsgYjE2OwogICAgYzMyICs9IGMxNiA+Pj4gMTY7CiAgICBjMTYgJj0gNjU1MzU7CiAgICBjMzIgKz0gYTMyICsgYjMyOwogICAgYzQ4ICs9IGMzMiA+Pj4gMTY7CiAgICBjMzIgJj0gNjU1MzU7CiAgICBjNDggKz0gYTQ4ICsgYjQ4OwogICAgYzQ4ICY9IDY1NTM1OwogICAgcmV0dXJuIGZyb21CaXRzKGMxNiA8PCAxNiB8IGMwMCwgYzQ4IDw8IDE2IHwgYzMyLCB0aGlzLnVuc2lnbmVkKTsKICB9OwogIExvbmdQcm90b3R5cGUuc3VidHJhY3QgPSBmdW5jdGlvbiBzdWJ0cmFjdChzdWJ0cmFoZW5kKSB7CiAgICBpZiAoIWlzTG9uZyhzdWJ0cmFoZW5kKSkKICAgICAgc3VidHJhaGVuZCA9IGZyb21WYWx1ZShzdWJ0cmFoZW5kKTsKICAgIHJldHVybiB0aGlzLmFkZChzdWJ0cmFoZW5kLm5lZygpKTsKICB9OwogIExvbmdQcm90b3R5cGUuc3ViID0gTG9uZ1Byb3RvdHlwZS5zdWJ0cmFjdDsKICBMb25nUHJvdG90eXBlLm11bHRpcGx5ID0gZnVuY3Rpb24gbXVsdGlwbHkobXVsdGlwbGllcikgewogICAgaWYgKHRoaXMuaXNaZXJvKCkpCiAgICAgIHJldHVybiBaRVJPOwogICAgaWYgKCFpc0xvbmcobXVsdGlwbGllcikpCiAgICAgIG11bHRpcGxpZXIgPSBmcm9tVmFsdWUobXVsdGlwbGllcik7CiAgICBpZiAod2FzbSkgewogICAgICB2YXIgbG93ID0gd2FzbS5tdWwodGhpcy5sb3csIHRoaXMuaGlnaCwgbXVsdGlwbGllci5sb3csIG11bHRpcGxpZXIuaGlnaCk7CiAgICAgIHJldHVybiBmcm9tQml0cyhsb3csIHdhc20uZ2V0X2hpZ2goKSwgdGhpcy51bnNpZ25lZCk7CiAgICB9CiAgICBpZiAobXVsdGlwbGllci5pc1plcm8oKSkKICAgICAgcmV0dXJuIFpFUk87CiAgICBpZiAodGhpcy5lcShNSU5fVkFMVUUpKQogICAgICByZXR1cm4gbXVsdGlwbGllci5pc09kZCgpID8gTUlOX1ZBTFVFIDogWkVSTzsKICAgIGlmIChtdWx0aXBsaWVyLmVxKE1JTl9WQUxVRSkpCiAgICAgIHJldHVybiB0aGlzLmlzT2RkKCkgPyBNSU5fVkFMVUUgOiBaRVJPOwogICAgaWYgKHRoaXMuaXNOZWdhdGl2ZSgpKSB7CiAgICAgIGlmIChtdWx0aXBsaWVyLmlzTmVnYXRpdmUoKSkKICAgICAgICByZXR1cm4gdGhpcy5uZWcoKS5tdWwobXVsdGlwbGllci5uZWcoKSk7CiAgICAgIGVsc2UKICAgICAgICByZXR1cm4gdGhpcy5uZWcoKS5tdWwobXVsdGlwbGllcikubmVnKCk7CiAgICB9IGVsc2UgaWYgKG11bHRpcGxpZXIuaXNOZWdhdGl2ZSgpKQogICAgICByZXR1cm4gdGhpcy5tdWwobXVsdGlwbGllci5uZWcoKSkubmVnKCk7CiAgICBpZiAodGhpcy5sdChUV09fUFdSXzI0KSAmJiBtdWx0aXBsaWVyLmx0KFRXT19QV1JfMjQpKQogICAgICByZXR1cm4gZnJvbU51bWJlcih0aGlzLnRvTnVtYmVyKCkgKiBtdWx0aXBsaWVyLnRvTnVtYmVyKCksIHRoaXMudW5zaWduZWQpOwogICAgdmFyIGE0OCA9IHRoaXMuaGlnaCA+Pj4gMTY7CiAgICB2YXIgYTMyID0gdGhpcy5oaWdoICYgNjU1MzU7CiAgICB2YXIgYTE2ID0gdGhpcy5sb3cgPj4+IDE2OwogICAgdmFyIGEwMCA9IHRoaXMubG93ICYgNjU1MzU7CiAgICB2YXIgYjQ4ID0gbXVsdGlwbGllci5oaWdoID4+PiAxNjsKICAgIHZhciBiMzIgPSBtdWx0aXBsaWVyLmhpZ2ggJiA2NTUzNTsKICAgIHZhciBiMTYgPSBtdWx0aXBsaWVyLmxvdyA+Pj4gMTY7CiAgICB2YXIgYjAwID0gbXVsdGlwbGllci5sb3cgJiA2NTUzNTsKICAgIHZhciBjNDggPSAwLCBjMzIgPSAwLCBjMTYgPSAwLCBjMDAgPSAwOwogICAgYzAwICs9IGEwMCAqIGIwMDsKICAgIGMxNiArPSBjMDAgPj4+IDE2OwogICAgYzAwICY9IDY1NTM1OwogICAgYzE2ICs9IGExNiAqIGIwMDsKICAgIGMzMiArPSBjMTYgPj4+IDE2OwogICAgYzE2ICY9IDY1NTM1OwogICAgYzE2ICs9IGEwMCAqIGIxNjsKICAgIGMzMiArPSBjMTYgPj4+IDE2OwogICAgYzE2ICY9IDY1NTM1OwogICAgYzMyICs9IGEzMiAqIGIwMDsKICAgIGM0OCArPSBjMzIgPj4+IDE2OwogICAgYzMyICY9IDY1NTM1OwogICAgYzMyICs9IGExNiAqIGIxNjsKICAgIGM0OCArPSBjMzIgPj4+IDE2OwogICAgYzMyICY9IDY1NTM1OwogICAgYzMyICs9IGEwMCAqIGIzMjsKICAgIGM0OCArPSBjMzIgPj4+IDE2OwogICAgYzMyICY9IDY1NTM1OwogICAgYzQ4ICs9IGE0OCAqIGIwMCArIGEzMiAqIGIxNiArIGExNiAqIGIzMiArIGEwMCAqIGI0ODsKICAgIGM0OCAmPSA2NTUzNTsKICAgIHJldHVybiBmcm9tQml0cyhjMTYgPDwgMTYgfCBjMDAsIGM0OCA8PCAxNiB8IGMzMiwgdGhpcy51bnNpZ25lZCk7CiAgfTsKICBMb25nUHJvdG90eXBlLm11bCA9IExvbmdQcm90b3R5cGUubXVsdGlwbHk7CiAgTG9uZ1Byb3RvdHlwZS5kaXZpZGUgPSBmdW5jdGlvbiBkaXZpZGUoZGl2aXNvcikgewogICAgaWYgKCFpc0xvbmcoZGl2aXNvcikpCiAgICAgIGRpdmlzb3IgPSBmcm9tVmFsdWUoZGl2aXNvcik7CiAgICBpZiAoZGl2aXNvci5pc1plcm8oKSkKICAgICAgdGhyb3cgRXJyb3IoImRpdmlzaW9uIGJ5IHplcm8iKTsKICAgIGlmICh3YXNtKSB7CiAgICAgIGlmICghdGhpcy51bnNpZ25lZCAmJiB0aGlzLmhpZ2ggPT09IC0yMTQ3NDgzNjQ4ICYmIGRpdmlzb3IubG93ID09PSAtMSAmJiBkaXZpc29yLmhpZ2ggPT09IC0xKSB7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KICAgICAgdmFyIGxvdyA9ICh0aGlzLnVuc2lnbmVkID8gd2FzbS5kaXZfdSA6IHdhc20uZGl2X3MpKHRoaXMubG93LCB0aGlzLmhpZ2gsIGRpdmlzb3IubG93LCBkaXZpc29yLmhpZ2gpOwogICAgICByZXR1cm4gZnJvbUJpdHMobG93LCB3YXNtLmdldF9oaWdoKCksIHRoaXMudW5zaWduZWQpOwogICAgfQogICAgaWYgKHRoaXMuaXNaZXJvKCkpCiAgICAgIHJldHVybiB0aGlzLnVuc2lnbmVkID8gVVpFUk8gOiBaRVJPOwogICAgdmFyIGFwcHJveCwgcmVtLCByZXM7CiAgICBpZiAoIXRoaXMudW5zaWduZWQpIHsKICAgICAgaWYgKHRoaXMuZXEoTUlOX1ZBTFVFKSkgewogICAgICAgIGlmIChkaXZpc29yLmVxKE9ORSkgfHwgZGl2aXNvci5lcShORUdfT05FKSkKICAgICAgICAgIHJldHVybiBNSU5fVkFMVUU7CiAgICAgICAgZWxzZSBpZiAoZGl2aXNvci5lcShNSU5fVkFMVUUpKQogICAgICAgICAgcmV0dXJuIE9ORTsKICAgICAgICBlbHNlIHsKICAgICAgICAgIHZhciBoYWxmVGhpcyA9IHRoaXMuc2hyKDEpOwogICAgICAgICAgYXBwcm94ID0gaGFsZlRoaXMuZGl2KGRpdmlzb3IpLnNobCgxKTsKICAgICAgICAgIGlmIChhcHByb3guZXEoWkVSTykpIHsKICAgICAgICAgICAgcmV0dXJuIGRpdmlzb3IuaXNOZWdhdGl2ZSgpID8gT05FIDogTkVHX09ORTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlbSA9IHRoaXMuc3ViKGRpdmlzb3IubXVsKGFwcHJveCkpOwogICAgICAgICAgICByZXMgPSBhcHByb3guYWRkKHJlbS5kaXYoZGl2aXNvcikpOwogICAgICAgICAgICByZXR1cm4gcmVzOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChkaXZpc29yLmVxKE1JTl9WQUxVRSkpCiAgICAgICAgcmV0dXJuIHRoaXMudW5zaWduZWQgPyBVWkVSTyA6IFpFUk87CiAgICAgIGlmICh0aGlzLmlzTmVnYXRpdmUoKSkgewogICAgICAgIGlmIChkaXZpc29yLmlzTmVnYXRpdmUoKSkKICAgICAgICAgIHJldHVybiB0aGlzLm5lZygpLmRpdihkaXZpc29yLm5lZygpKTsKICAgICAgICByZXR1cm4gdGhpcy5uZWcoKS5kaXYoZGl2aXNvcikubmVnKCk7CiAgICAgIH0gZWxzZSBpZiAoZGl2aXNvci5pc05lZ2F0aXZlKCkpCiAgICAgICAgcmV0dXJuIHRoaXMuZGl2KGRpdmlzb3IubmVnKCkpLm5lZygpOwogICAgICByZXMgPSBaRVJPOwogICAgfSBlbHNlIHsKICAgICAgaWYgKCFkaXZpc29yLnVuc2lnbmVkKQogICAgICAgIGRpdmlzb3IgPSBkaXZpc29yLnRvVW5zaWduZWQoKTsKICAgICAgaWYgKGRpdmlzb3IuZ3QodGhpcykpCiAgICAgICAgcmV0dXJuIFVaRVJPOwogICAgICBpZiAoZGl2aXNvci5ndCh0aGlzLnNocnUoMSkpKQogICAgICAgIHJldHVybiBVT05FOwogICAgICByZXMgPSBVWkVSTzsKICAgIH0KICAgIHJlbSA9IHRoaXM7CiAgICB3aGlsZSAocmVtLmd0ZShkaXZpc29yKSkgewogICAgICBhcHByb3ggPSBNYXRoLm1heCgxLCBNYXRoLmZsb29yKHJlbS50b051bWJlcigpIC8gZGl2aXNvci50b051bWJlcigpKSk7CiAgICAgIHZhciBsb2cyID0gTWF0aC5jZWlsKE1hdGgubG9nKGFwcHJveCkgLyBNYXRoLkxOMiksIGRlbHRhID0gbG9nMiA8PSA0OCA/IDEgOiBwb3dfZGJsKDIsIGxvZzIgLSA0OCksIGFwcHJveFJlcyA9IGZyb21OdW1iZXIoYXBwcm94KSwgYXBwcm94UmVtID0gYXBwcm94UmVzLm11bChkaXZpc29yKTsKICAgICAgd2hpbGUgKGFwcHJveFJlbS5pc05lZ2F0aXZlKCkgfHwgYXBwcm94UmVtLmd0KHJlbSkpIHsKICAgICAgICBhcHByb3ggLT0gZGVsdGE7CiAgICAgICAgYXBwcm94UmVzID0gZnJvbU51bWJlcihhcHByb3gsIHRoaXMudW5zaWduZWQpOwogICAgICAgIGFwcHJveFJlbSA9IGFwcHJveFJlcy5tdWwoZGl2aXNvcik7CiAgICAgIH0KICAgICAgaWYgKGFwcHJveFJlcy5pc1plcm8oKSkKICAgICAgICBhcHByb3hSZXMgPSBPTkU7CiAgICAgIHJlcyA9IHJlcy5hZGQoYXBwcm94UmVzKTsKICAgICAgcmVtID0gcmVtLnN1YihhcHByb3hSZW0pOwogICAgfQogICAgcmV0dXJuIHJlczsKICB9OwogIExvbmdQcm90b3R5cGUuZGl2ID0gTG9uZ1Byb3RvdHlwZS5kaXZpZGU7CiAgTG9uZ1Byb3RvdHlwZS5tb2R1bG8gPSBmdW5jdGlvbiBtb2R1bG8oZGl2aXNvcikgewogICAgaWYgKCFpc0xvbmcoZGl2aXNvcikpCiAgICAgIGRpdmlzb3IgPSBmcm9tVmFsdWUoZGl2aXNvcik7CiAgICBpZiAod2FzbSkgewogICAgICB2YXIgbG93ID0gKHRoaXMudW5zaWduZWQgPyB3YXNtLnJlbV91IDogd2FzbS5yZW1fcykodGhpcy5sb3csIHRoaXMuaGlnaCwgZGl2aXNvci5sb3csIGRpdmlzb3IuaGlnaCk7CiAgICAgIHJldHVybiBmcm9tQml0cyhsb3csIHdhc20uZ2V0X2hpZ2goKSwgdGhpcy51bnNpZ25lZCk7CiAgICB9CiAgICByZXR1cm4gdGhpcy5zdWIodGhpcy5kaXYoZGl2aXNvcikubXVsKGRpdmlzb3IpKTsKICB9OwogIExvbmdQcm90b3R5cGUubW9kID0gTG9uZ1Byb3RvdHlwZS5tb2R1bG87CiAgTG9uZ1Byb3RvdHlwZS5yZW0gPSBMb25nUHJvdG90eXBlLm1vZHVsbzsKICBMb25nUHJvdG90eXBlLm5vdCA9IGZ1bmN0aW9uIG5vdCgpIHsKICAgIHJldHVybiBmcm9tQml0cyh+dGhpcy5sb3csIH50aGlzLmhpZ2gsIHRoaXMudW5zaWduZWQpOwogIH07CiAgTG9uZ1Byb3RvdHlwZS5hbmQgPSBmdW5jdGlvbiBhbmQob3RoZXIpIHsKICAgIGlmICghaXNMb25nKG90aGVyKSkKICAgICAgb3RoZXIgPSBmcm9tVmFsdWUob3RoZXIpOwogICAgcmV0dXJuIGZyb21CaXRzKHRoaXMubG93ICYgb3RoZXIubG93LCB0aGlzLmhpZ2ggJiBvdGhlci5oaWdoLCB0aGlzLnVuc2lnbmVkKTsKICB9OwogIExvbmdQcm90b3R5cGUub3IgPSBmdW5jdGlvbiBvcihvdGhlcikgewogICAgaWYgKCFpc0xvbmcob3RoZXIpKQogICAgICBvdGhlciA9IGZyb21WYWx1ZShvdGhlcik7CiAgICByZXR1cm4gZnJvbUJpdHModGhpcy5sb3cgfCBvdGhlci5sb3csIHRoaXMuaGlnaCB8IG90aGVyLmhpZ2gsIHRoaXMudW5zaWduZWQpOwogIH07CiAgTG9uZ1Byb3RvdHlwZS54b3IgPSBmdW5jdGlvbiB4b3Iob3RoZXIpIHsKICAgIGlmICghaXNMb25nKG90aGVyKSkKICAgICAgb3RoZXIgPSBmcm9tVmFsdWUob3RoZXIpOwogICAgcmV0dXJuIGZyb21CaXRzKHRoaXMubG93IF4gb3RoZXIubG93LCB0aGlzLmhpZ2ggXiBvdGhlci5oaWdoLCB0aGlzLnVuc2lnbmVkKTsKICB9OwogIExvbmdQcm90b3R5cGUuc2hpZnRMZWZ0ID0gZnVuY3Rpb24gc2hpZnRMZWZ0KG51bUJpdHMpIHsKICAgIGlmIChpc0xvbmcobnVtQml0cykpCiAgICAgIG51bUJpdHMgPSBudW1CaXRzLnRvSW50KCk7CiAgICBpZiAoKG51bUJpdHMgJj0gNjMpID09PSAwKQogICAgICByZXR1cm4gdGhpczsKICAgIGVsc2UgaWYgKG51bUJpdHMgPCAzMikKICAgICAgcmV0dXJuIGZyb21CaXRzKHRoaXMubG93IDw8IG51bUJpdHMsIHRoaXMuaGlnaCA8PCBudW1CaXRzIHwgdGhpcy5sb3cgPj4+IDMyIC0gbnVtQml0cywgdGhpcy51bnNpZ25lZCk7CiAgICBlbHNlCiAgICAgIHJldHVybiBmcm9tQml0cygwLCB0aGlzLmxvdyA8PCBudW1CaXRzIC0gMzIsIHRoaXMudW5zaWduZWQpOwogIH07CiAgTG9uZ1Byb3RvdHlwZS5zaGwgPSBMb25nUHJvdG90eXBlLnNoaWZ0TGVmdDsKICBMb25nUHJvdG90eXBlLnNoaWZ0UmlnaHQgPSBmdW5jdGlvbiBzaGlmdFJpZ2h0KG51bUJpdHMpIHsKICAgIGlmIChpc0xvbmcobnVtQml0cykpCiAgICAgIG51bUJpdHMgPSBudW1CaXRzLnRvSW50KCk7CiAgICBpZiAoKG51bUJpdHMgJj0gNjMpID09PSAwKQogICAgICByZXR1cm4gdGhpczsKICAgIGVsc2UgaWYgKG51bUJpdHMgPCAzMikKICAgICAgcmV0dXJuIGZyb21CaXRzKHRoaXMubG93ID4+PiBudW1CaXRzIHwgdGhpcy5oaWdoIDw8IDMyIC0gbnVtQml0cywgdGhpcy5oaWdoID4+IG51bUJpdHMsIHRoaXMudW5zaWduZWQpOwogICAgZWxzZQogICAgICByZXR1cm4gZnJvbUJpdHModGhpcy5oaWdoID4+IG51bUJpdHMgLSAzMiwgdGhpcy5oaWdoID49IDAgPyAwIDogLTEsIHRoaXMudW5zaWduZWQpOwogIH07CiAgTG9uZ1Byb3RvdHlwZS5zaHIgPSBMb25nUHJvdG90eXBlLnNoaWZ0UmlnaHQ7CiAgTG9uZ1Byb3RvdHlwZS5zaGlmdFJpZ2h0VW5zaWduZWQgPSBmdW5jdGlvbiBzaGlmdFJpZ2h0VW5zaWduZWQobnVtQml0cykgewogICAgaWYgKGlzTG9uZyhudW1CaXRzKSkKICAgICAgbnVtQml0cyA9IG51bUJpdHMudG9JbnQoKTsKICAgIG51bUJpdHMgJj0gNjM7CiAgICBpZiAobnVtQml0cyA9PT0gMCkKICAgICAgcmV0dXJuIHRoaXM7CiAgICBlbHNlIHsKICAgICAgdmFyIGhpZ2ggPSB0aGlzLmhpZ2g7CiAgICAgIGlmIChudW1CaXRzIDwgMzIpIHsKICAgICAgICB2YXIgbG93ID0gdGhpcy5sb3c7CiAgICAgICAgcmV0dXJuIGZyb21CaXRzKGxvdyA+Pj4gbnVtQml0cyB8IGhpZ2ggPDwgMzIgLSBudW1CaXRzLCBoaWdoID4+PiBudW1CaXRzLCB0aGlzLnVuc2lnbmVkKTsKICAgICAgfSBlbHNlIGlmIChudW1CaXRzID09PSAzMikKICAgICAgICByZXR1cm4gZnJvbUJpdHMoaGlnaCwgMCwgdGhpcy51bnNpZ25lZCk7CiAgICAgIGVsc2UKICAgICAgICByZXR1cm4gZnJvbUJpdHMoaGlnaCA+Pj4gbnVtQml0cyAtIDMyLCAwLCB0aGlzLnVuc2lnbmVkKTsKICAgIH0KICB9OwogIExvbmdQcm90b3R5cGUuc2hydSA9IExvbmdQcm90b3R5cGUuc2hpZnRSaWdodFVuc2lnbmVkOwogIExvbmdQcm90b3R5cGUuc2hyX3UgPSBMb25nUHJvdG90eXBlLnNoaWZ0UmlnaHRVbnNpZ25lZDsKICBMb25nUHJvdG90eXBlLnRvU2lnbmVkID0gZnVuY3Rpb24gdG9TaWduZWQoKSB7CiAgICBpZiAoIXRoaXMudW5zaWduZWQpCiAgICAgIHJldHVybiB0aGlzOwogICAgcmV0dXJuIGZyb21CaXRzKHRoaXMubG93LCB0aGlzLmhpZ2gsIGZhbHNlKTsKICB9OwogIExvbmdQcm90b3R5cGUudG9VbnNpZ25lZCA9IGZ1bmN0aW9uIHRvVW5zaWduZWQoKSB7CiAgICBpZiAodGhpcy51bnNpZ25lZCkKICAgICAgcmV0dXJuIHRoaXM7CiAgICByZXR1cm4gZnJvbUJpdHModGhpcy5sb3csIHRoaXMuaGlnaCwgdHJ1ZSk7CiAgfTsKICBMb25nUHJvdG90eXBlLnRvQnl0ZXMgPSBmdW5jdGlvbiB0b0J5dGVzKGxlKSB7CiAgICByZXR1cm4gbGUgPyB0aGlzLnRvQnl0ZXNMRSgpIDogdGhpcy50b0J5dGVzQkUoKTsKICB9OwogIExvbmdQcm90b3R5cGUudG9CeXRlc0xFID0gZnVuY3Rpb24gdG9CeXRlc0xFKCkgewogICAgdmFyIGhpID0gdGhpcy5oaWdoLCBsbyA9IHRoaXMubG93OwogICAgcmV0dXJuIFsKICAgICAgbG8gJiAyNTUsCiAgICAgIGxvID4+PiA4ICYgMjU1LAogICAgICBsbyA+Pj4gMTYgJiAyNTUsCiAgICAgIGxvID4+PiAyNCwKICAgICAgaGkgJiAyNTUsCiAgICAgIGhpID4+PiA4ICYgMjU1LAogICAgICBoaSA+Pj4gMTYgJiAyNTUsCiAgICAgIGhpID4+PiAyNAogICAgXTsKICB9OwogIExvbmdQcm90b3R5cGUudG9CeXRlc0JFID0gZnVuY3Rpb24gdG9CeXRlc0JFKCkgewogICAgdmFyIGhpID0gdGhpcy5oaWdoLCBsbyA9IHRoaXMubG93OwogICAgcmV0dXJuIFsKICAgICAgaGkgPj4+IDI0LAogICAgICBoaSA+Pj4gMTYgJiAyNTUsCiAgICAgIGhpID4+PiA4ICYgMjU1LAogICAgICBoaSAmIDI1NSwKICAgICAgbG8gPj4+IDI0LAogICAgICBsbyA+Pj4gMTYgJiAyNTUsCiAgICAgIGxvID4+PiA4ICYgMjU1LAogICAgICBsbyAmIDI1NQogICAgXTsKICB9OwogIExvbmckMS5mcm9tQnl0ZXMgPSBmdW5jdGlvbiBmcm9tQnl0ZXMyKGJ5dGVzLCB1bnNpZ25lZCwgbGUpIHsKICAgIHJldHVybiBsZSA/IExvbmckMS5mcm9tQnl0ZXNMRShieXRlcywgdW5zaWduZWQpIDogTG9uZyQxLmZyb21CeXRlc0JFKGJ5dGVzLCB1bnNpZ25lZCk7CiAgfTsKICBMb25nJDEuZnJvbUJ5dGVzTEUgPSBmdW5jdGlvbiBmcm9tQnl0ZXNMRShieXRlcywgdW5zaWduZWQpIHsKICAgIHJldHVybiBuZXcgTG9uZyQxKGJ5dGVzWzBdIHwgYnl0ZXNbMV0gPDwgOCB8IGJ5dGVzWzJdIDw8IDE2IHwgYnl0ZXNbM10gPDwgMjQsIGJ5dGVzWzRdIHwgYnl0ZXNbNV0gPDwgOCB8IGJ5dGVzWzZdIDw8IDE2IHwgYnl0ZXNbN10gPDwgMjQsIHVuc2lnbmVkKTsKICB9OwogIExvbmckMS5mcm9tQnl0ZXNCRSA9IGZ1bmN0aW9uIGZyb21CeXRlc0JFKGJ5dGVzLCB1bnNpZ25lZCkgewogICAgcmV0dXJuIG5ldyBMb25nJDEoYnl0ZXNbNF0gPDwgMjQgfCBieXRlc1s1XSA8PCAxNiB8IGJ5dGVzWzZdIDw8IDggfCBieXRlc1s3XSwgYnl0ZXNbMF0gPDwgMjQgfCBieXRlc1sxXSA8PCAxNiB8IGJ5dGVzWzJdIDw8IDggfCBieXRlc1szXSwgdW5zaWduZWQpOwogIH07CiAgdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQkMSA9IGludGVyb3BSZXF1aXJlRGVmYXVsdC5leHBvcnRzOwogIHZhciBfcmVnZW5lcmF0b3IkMSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQkMShyZWdlbmVyYXRvcik7CiAgdmFyIF9hc3luY1RvR2VuZXJhdG9yMiQxID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdCQxKGFzeW5jVG9HZW5lcmF0b3IuZXhwb3J0cyk7CiAgdmFyIF9jbGFzc0NhbGxDaGVjazIkMSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQkMShjbGFzc0NhbGxDaGVjay5leHBvcnRzKTsKICB2YXIgX2NyZWF0ZUNsYXNzMiQxID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdCQxKGNyZWF0ZUNsYXNzLmV4cG9ydHMpOwogIHZhciBMb25nID0gbG9uZzsKICB2YXIgTG9jYWxGaWxlJDEgPSBsb2NhbEZpbGU7CiAgdmFyIFVOQ09NUFJFU1NFRF9QT1NJVElPTiA9IDE7CiAgdmFyIEd6aUluZGV4JDEgPSAvKiBAX19QVVJFX18gKi8gZnVuY3Rpb24oKSB7CiAgICBmdW5jdGlvbiBHemlJbmRleDIoX3JlZikgewogICAgICB2YXIgZmlsZWhhbmRsZTIgPSBfcmVmLmZpbGVoYW5kbGUsIHBhdGggPSBfcmVmLnBhdGg7CiAgICAgICgwLCBfY2xhc3NDYWxsQ2hlY2syJDEuZGVmYXVsdCkodGhpcywgR3ppSW5kZXgyKTsKICAgICAgaWYgKGZpbGVoYW5kbGUyKQogICAgICAgIHRoaXMuZmlsZWhhbmRsZSA9IGZpbGVoYW5kbGUyOwogICAgICBlbHNlIGlmIChwYXRoKQogICAgICAgIHRoaXMuZmlsZWhhbmRsZSA9IG5ldyBMb2NhbEZpbGUkMShwYXRoKTsKICAgICAgZWxzZQogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoImVpdGhlciBmaWxlaGFuZGxlIG9yIHBhdGggbXVzdCBiZSBkZWZpbmVkIik7CiAgICB9CiAgICAoMCwgX2NyZWF0ZUNsYXNzMiQxLmRlZmF1bHQpKEd6aUluZGV4MiwgW3sga2V5OiAiX3JlYWRMb25nV2l0aE92ZXJmbG93IiwgdmFsdWU6IGZ1bmN0aW9uIF9yZWFkTG9uZ1dpdGhPdmVyZmxvdyhidWYpIHsKICAgICAgdmFyIG9mZnNldCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdm9pZCAwID8gYXJndW1lbnRzWzFdIDogMDsKICAgICAgdmFyIHVuc2lnbmVkID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB2b2lkIDAgPyBhcmd1bWVudHNbMl0gOiB0cnVlOwogICAgICB2YXIgbG9uZzIgPSBMb25nLmZyb21CeXRlc0xFKGJ1Zi5zbGljZShvZmZzZXQsIG9mZnNldCArIDgpLCB1bnNpZ25lZCk7CiAgICAgIGlmIChsb25nMi5ncmVhdGVyVGhhbihOdW1iZXIuTUFYX1NBRkVfSU5URUdFUikgfHwgbG9uZzIubGVzc1RoYW4oTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIpKQogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoImludGVnZXIgb3ZlcmZsb3ciKTsKICAgICAgcmV0dXJuIGxvbmcyLnRvTnVtYmVyKCk7CiAgICB9IH0sIHsga2V5OiAiX2dldEluZGV4IiwgdmFsdWU6IGZ1bmN0aW9uIF9nZXRJbmRleCgpIHsKICAgICAgaWYgKCF0aGlzLmluZGV4KQogICAgICAgIHRoaXMuaW5kZXggPSB0aGlzLl9yZWFkSW5kZXgoKTsKICAgICAgcmV0dXJuIHRoaXMuaW5kZXg7CiAgICB9IH0sIHsKICAgICAga2V5OiAiX3JlYWRJbmRleCIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbigpIHsKICAgICAgICB2YXIgX3JlYWRJbmRleDIgPSAoMCwgX2FzeW5jVG9HZW5lcmF0b3IyJDEuZGVmYXVsdCkoLyogQF9fUFVSRV9fICovIF9yZWdlbmVyYXRvciQxLmRlZmF1bHQubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgICAgdmFyIGJ1ZiwgbnVtRW50cmllcywgZW50cmllcywgYnVmU2l6ZSwgZW50cnlOdW1iZXIsIGNvbXByZXNzZWRQb3NpdGlvbiwgdW5jb21wcmVzc2VkUG9zaXRpb247CiAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yJDEuZGVmYXVsdC53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICBidWYgPSBCdWZmZXIuYWxsb2NVbnNhZmUoOCk7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5maWxlaGFuZGxlLnJlYWQoYnVmLCAwLCA4LCAwKTsKICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgbnVtRW50cmllcyA9IHRoaXMuX3JlYWRMb25nV2l0aE92ZXJmbG93KGJ1ZiwgMCwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgIGlmIChudW1FbnRyaWVzKSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgW1swLCAwXV0pOwogICAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgICBlbnRyaWVzID0gbmV3IEFycmF5KG51bUVudHJpZXMgKyAxKTsKICAgICAgICAgICAgICAgICAgZW50cmllc1swXSA9IFswLCAwXTsKICAgICAgICAgICAgICAgICAgYnVmU2l6ZSA9IDggKiAyICogbnVtRW50cmllczsKICAgICAgICAgICAgICAgICAgaWYgKCEoYnVmU2l6ZSA+IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSKSkgewogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJpbnRlZ2VyIG92ZXJmbG93Iik7CiAgICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgICBidWYgPSBCdWZmZXIuYWxsb2NVbnNhZmUoYnVmU2l6ZSk7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNDsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmlsZWhhbmRsZS5yZWFkKGJ1ZiwgMCwgYnVmU2l6ZSwgOCk7CiAgICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgICBmb3IgKGVudHJ5TnVtYmVyID0gMDsgZW50cnlOdW1iZXIgPCBudW1FbnRyaWVzOyBlbnRyeU51bWJlciArPSAxKSB7CiAgICAgICAgICAgICAgICAgICAgY29tcHJlc3NlZFBvc2l0aW9uID0gdGhpcy5fcmVhZExvbmdXaXRoT3ZlcmZsb3coYnVmLCBlbnRyeU51bWJlciAqIDE2KTsKICAgICAgICAgICAgICAgICAgICB1bmNvbXByZXNzZWRQb3NpdGlvbiA9IHRoaXMuX3JlYWRMb25nV2l0aE92ZXJmbG93KGJ1ZiwgZW50cnlOdW1iZXIgKiAxNiArIDgpOwogICAgICAgICAgICAgICAgICAgIGVudHJpZXNbZW50cnlOdW1iZXIgKyAxXSA9IFtjb21wcmVzc2VkUG9zaXRpb24sIHVuY29tcHJlc3NlZFBvc2l0aW9uXTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBlbnRyaWVzKTsKICAgICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgX2NhbGxlZSwgdGhpcyk7CiAgICAgICAgfSkpOwogICAgICAgIGZ1bmN0aW9uIF9yZWFkSW5kZXgoKSB7CiAgICAgICAgICByZXR1cm4gX3JlYWRJbmRleDIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIF9yZWFkSW5kZXg7CiAgICAgIH0oKQogICAgfSwgewogICAgICBrZXk6ICJnZXRMYXN0QmxvY2siLAogICAgICB2YWx1ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIF9nZXRMYXN0QmxvY2sgPSAoMCwgX2FzeW5jVG9HZW5lcmF0b3IyJDEuZGVmYXVsdCkoLyogQF9fUFVSRV9fICovIF9yZWdlbmVyYXRvciQxLmRlZmF1bHQubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICAgIHZhciBlbnRyaWVzOwogICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvciQxLmRlZmF1bHQud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dldEluZGV4KCk7CiAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgIGVudHJpZXMgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgICAgaWYgKGVudHJpZXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA1OwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCB2b2lkIDApOwogICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgZW50cmllc1tlbnRyaWVzLmxlbmd0aCAtIDFdKTsKICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgX2NhbGxlZTIsIHRoaXMpOwogICAgICAgIH0pKTsKICAgICAgICBmdW5jdGlvbiBnZXRMYXN0QmxvY2soKSB7CiAgICAgICAgICByZXR1cm4gX2dldExhc3RCbG9jay5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZ2V0TGFzdEJsb2NrOwogICAgICB9KCkKICAgIH0sIHsKICAgICAga2V5OiAiZ2V0UmVsZXZhbnRCbG9ja3NGb3JSZWFkIiwKICAgICAgdmFsdWU6IGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBfZ2V0UmVsZXZhbnRCbG9ja3NGb3JSZWFkID0gKDAsIF9hc3luY1RvR2VuZXJhdG9yMiQxLmRlZmF1bHQpKC8qIEBfX1BVUkVfXyAqLyBfcmVnZW5lcmF0b3IkMS5kZWZhdWx0Lm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMobGVuZ3RoLCBwb3NpdGlvbikgewogICAgICAgICAgdmFyIGVuZFBvc2l0aW9uLCBlbnRyaWVzLCByZWxldmFudCwgY29tcGFyZSwgbG93ZXJCb3VuZCwgdXBwZXJCb3VuZCwgc2VhcmNoUG9zaXRpb24sIGNvbXBhcmlzb24sIGk7CiAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yJDEuZGVmYXVsdC53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgZW5kUG9zaXRpb24gPSBwb3NpdGlvbiArIGxlbmd0aDsKICAgICAgICAgICAgICAgICAgaWYgKCEobGVuZ3RoID09PSAwKSkgewogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgW10pOwogICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRJbmRleCgpOwogICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICBlbnRyaWVzID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgICAgIHJlbGV2YW50ID0gW107CiAgICAgICAgICAgICAgICAgIGNvbXBhcmUgPSBmdW5jdGlvbiBjb21wYXJlMihlbnRyeSwgbmV4dEVudHJ5KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHVuY29tcHJlc3NlZFBvc2l0aW9uID0gZW50cnlbVU5DT01QUkVTU0VEX1BPU0lUSU9OXTsKICAgICAgICAgICAgICAgICAgICB2YXIgbmV4dFVuY29tcHJlc3NlZFBvc2l0aW9uID0gbmV4dEVudHJ5ID8gbmV4dEVudHJ5W1VOQ09NUFJFU1NFRF9QT1NJVElPTl0gOiBJbmZpbml0eTsKICAgICAgICAgICAgICAgICAgICBpZiAodW5jb21wcmVzc2VkUG9zaXRpb24gPD0gcG9zaXRpb24gJiYgbmV4dFVuY29tcHJlc3NlZFBvc2l0aW9uID4gcG9zaXRpb24pIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAodW5jb21wcmVzc2VkUG9zaXRpb24gPCBwb3NpdGlvbikgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTsKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgbG93ZXJCb3VuZCA9IDA7CiAgICAgICAgICAgICAgICAgIHVwcGVyQm91bmQgPSBlbnRyaWVzLmxlbmd0aCAtIDE7CiAgICAgICAgICAgICAgICAgIHNlYXJjaFBvc2l0aW9uID0gTWF0aC5mbG9vcihlbnRyaWVzLmxlbmd0aCAvIDIpOwogICAgICAgICAgICAgICAgICBjb21wYXJpc29uID0gY29tcGFyZShlbnRyaWVzW3NlYXJjaFBvc2l0aW9uXSwgZW50cmllc1tzZWFyY2hQb3NpdGlvbiArIDFdKTsKICAgICAgICAgICAgICAgICAgd2hpbGUgKGNvbXBhcmlzb24gIT09IDApIHsKICAgICAgICAgICAgICAgICAgICBpZiAoY29tcGFyaXNvbiA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgIHVwcGVyQm91bmQgPSBzZWFyY2hQb3NpdGlvbiAtIDE7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjb21wYXJpc29uIDwgMCkgewogICAgICAgICAgICAgICAgICAgICAgbG93ZXJCb3VuZCA9IHNlYXJjaFBvc2l0aW9uICsgMTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgc2VhcmNoUG9zaXRpb24gPSBNYXRoLmNlaWwoKHVwcGVyQm91bmQgLSBsb3dlckJvdW5kKSAvIDIpICsgbG93ZXJCb3VuZDsKICAgICAgICAgICAgICAgICAgICBjb21wYXJpc29uID0gY29tcGFyZShlbnRyaWVzW3NlYXJjaFBvc2l0aW9uXSwgZW50cmllc1tzZWFyY2hQb3NpdGlvbiArIDFdKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICByZWxldmFudC5wdXNoKGVudHJpZXNbc2VhcmNoUG9zaXRpb25dKTsKICAgICAgICAgICAgICAgICAgaSA9IHNlYXJjaFBvc2l0aW9uICsgMTsKICAgICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICAgIGlmICghKGkgPCBlbnRyaWVzLmxlbmd0aCkpIHsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDIyOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHJlbGV2YW50LnB1c2goZW50cmllc1tpXSk7CiAgICAgICAgICAgICAgICAgIGlmICghKGVudHJpZXNbaV1bVU5DT01QUkVTU0VEX1BPU0lUSU9OXSA+PSBlbmRQb3NpdGlvbikpIHsKICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDE5OwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJicmVhayIsIDIyKTsKICAgICAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgICAgIGkgKz0gMTsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxNTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICAgICAgICBpZiAocmVsZXZhbnRbcmVsZXZhbnQubGVuZ3RoIC0gMV1bVU5DT01QUkVTU0VEX1BPU0lUSU9OXSA8IGVuZFBvc2l0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgcmVsZXZhbnQucHVzaChbXSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIHJlbGV2YW50KTsKICAgICAgICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWUzLCB0aGlzKTsKICAgICAgICB9KSk7CiAgICAgICAgZnVuY3Rpb24gZ2V0UmVsZXZhbnRCbG9ja3NGb3JSZWFkKF94LCBfeDIpIHsKICAgICAgICAgIHJldHVybiBfZ2V0UmVsZXZhbnRCbG9ja3NGb3JSZWFkLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBnZXRSZWxldmFudEJsb2Nrc0ZvclJlYWQ7CiAgICAgIH0oKQogICAgfV0pOwogICAgcmV0dXJuIEd6aUluZGV4MjsKICB9KCk7CiAgdmFyIGd6aUluZGV4ID0gR3ppSW5kZXgkMTsKICB2YXIgX2ludGVyb3BSZXF1aXJlRGVmYXVsdCA9IGludGVyb3BSZXF1aXJlRGVmYXVsdC5leHBvcnRzOwogIHZhciBfc2xpY2VkVG9BcnJheTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHNsaWNlZFRvQXJyYXkuZXhwb3J0cyk7CiAgdmFyIF9yZWdlbmVyYXRvciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVnZW5lcmF0b3IpOwogIHZhciBfYXN5bmNUb0dlbmVyYXRvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGFzeW5jVG9HZW5lcmF0b3IuZXhwb3J0cyk7CiAgdmFyIF9jbGFzc0NhbGxDaGVjazIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGNsYXNzQ2FsbENoZWNrLmV4cG9ydHMpOwogIHZhciBfY3JlYXRlQ2xhc3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChjcmVhdGVDbGFzcy5leHBvcnRzKTsKICB2YXIgX3JlcXVpcmUkMSA9IHVuemlwUGFrbywgdW56aXAkMSA9IF9yZXF1aXJlJDEudW56aXA7CiAgdmFyIExvY2FsRmlsZSA9IGxvY2FsRmlsZTsKICB2YXIgR3ppSW5kZXggPSBnemlJbmRleDsKICB2YXIgQmd6RmlsZWhhbmRsZSA9IC8qIEBfX1BVUkVfXyAqLyBmdW5jdGlvbigpIHsKICAgIGZ1bmN0aW9uIEJnekZpbGVoYW5kbGUyKF9yZWYpIHsKICAgICAgdmFyIGZpbGVoYW5kbGUyID0gX3JlZi5maWxlaGFuZGxlLCBwYXRoID0gX3JlZi5wYXRoLCBnemlGaWxlaGFuZGxlID0gX3JlZi5nemlGaWxlaGFuZGxlLCBnemlQYXRoID0gX3JlZi5nemlQYXRoOwogICAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMi5kZWZhdWx0KSh0aGlzLCBCZ3pGaWxlaGFuZGxlMik7CiAgICAgIGlmIChmaWxlaGFuZGxlMikKICAgICAgICB0aGlzLmZpbGVoYW5kbGUgPSBmaWxlaGFuZGxlMjsKICAgICAgZWxzZSBpZiAocGF0aCkKICAgICAgICB0aGlzLmZpbGVoYW5kbGUgPSBuZXcgTG9jYWxGaWxlKHBhdGgpOwogICAgICBlbHNlCiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiZWl0aGVyIGZpbGVoYW5kbGUgb3IgcGF0aCBtdXN0IGJlIGRlZmluZWQiKTsKICAgICAgaWYgKCFnemlGaWxlaGFuZGxlICYmICFnemlQYXRoICYmICFwYXRoKQogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoImVpdGhlciBnemlGaWxlaGFuZGxlIG9yIGd6aVBhdGggbXVzdCBiZSBkZWZpbmVkIik7CiAgICAgIHRoaXMuZ3ppID0gbmV3IEd6aUluZGV4KHsKICAgICAgICBmaWxlaGFuZGxlOiBnemlGaWxlaGFuZGxlLAogICAgICAgIHBhdGg6ICFnemlGaWxlaGFuZGxlICYmICFnemlQYXRoICYmIHBhdGggPyBnemlQYXRoIDogIiIuY29uY2F0KHBhdGgsICIuZ3ppIikKICAgICAgfSk7CiAgICB9CiAgICAoMCwgX2NyZWF0ZUNsYXNzMi5kZWZhdWx0KShCZ3pGaWxlaGFuZGxlMiwgW3sga2V5OiAic3RhdCIsIHZhbHVlOiBmdW5jdGlvbigpIHsKICAgICAgdmFyIF9zdGF0ID0gKDAsIF9hc3luY1RvR2VuZXJhdG9yMi5kZWZhdWx0KSgvKiBAX19QVVJFX18gKi8gX3JlZ2VuZXJhdG9yLmRlZmF1bHQubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBjb21wcmVzc2VkU3RhdDsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yLmRlZmF1bHQud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmlsZWhhbmRsZS5zdGF0KCk7CiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgY29tcHJlc3NlZFN0YXQgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBPYmplY3Q7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MSA9IGNvbXByZXNzZWRTdGF0OwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRVbmNvbXByZXNzZWRGaWxlU2l6ZSgpOwogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQyID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQzID0gdm9pZCAwOwogICAgICAgICAgICAgICAgX2NvbnRleHQudDQgPSB2b2lkIDA7CiAgICAgICAgICAgICAgICBfY29udGV4dC50NSA9IHsgc2l6ZTogX2NvbnRleHQudDIsIGJsb2NrczogX2NvbnRleHQudDMsIGJsa3NpemU6IF9jb250ZXh0LnQ0IH07CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dC50MC5hc3NpZ24uY2FsbChfY29udGV4dC50MCwgX2NvbnRleHQudDEsIF9jb250ZXh0LnQ1KSk7CiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIHRoaXMpOwogICAgICB9KSk7CiAgICAgIGZ1bmN0aW9uIHN0YXQoKSB7CiAgICAgICAgcmV0dXJuIF9zdGF0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KICAgICAgcmV0dXJuIHN0YXQ7CiAgICB9KCkgfSwgeyBrZXk6ICJnZXRVbmNvbXByZXNzZWRGaWxlU2l6ZSIsIHZhbHVlOiBmdW5jdGlvbigpIHsKICAgICAgdmFyIF9nZXRVbmNvbXByZXNzZWRGaWxlU2l6ZSA9ICgwLCBfYXN5bmNUb0dlbmVyYXRvcjIuZGVmYXVsdCkoLyogQF9fUFVSRV9fICovIF9yZWdlbmVyYXRvci5kZWZhdWx0Lm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIF9yZWYyLCBfcmVmMywgdW5jb21wcmVzc2VkUG9zaXRpb24sIF9yZWY0LCBzaXplLCBidWYsIF9yZWY1LCBieXRlc1JlYWQsIGxhc3RCbG9ja1VuY29tcHJlc3NlZFNpemU7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvci5kZWZhdWx0LndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ3ppLmdldExhc3RCbG9jaygpOwogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIF9yZWYyID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICBfcmVmMyA9ICgwLCBfc2xpY2VkVG9BcnJheTIuZGVmYXVsdCkoX3JlZjIsIDIpOwogICAgICAgICAgICAgICAgdW5jb21wcmVzc2VkUG9zaXRpb24gPSBfcmVmM1sxXTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbGVoYW5kbGUuc3RhdCgpOwogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIF9yZWY0ID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICBzaXplID0gX3JlZjQuc2l6ZTsKICAgICAgICAgICAgICAgIGJ1ZiA9IEJ1ZmZlci5hbGxvY1Vuc2FmZSg0KTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5maWxlaGFuZGxlLnJlYWQoYnVmLCAwLCA0LCBzaXplIC0gMjggLSA0KTsKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgX3JlZjUgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIGJ5dGVzUmVhZCA9IF9yZWY1LmJ5dGVzUmVhZDsKICAgICAgICAgICAgICAgIGlmICghKGJ5dGVzUmVhZCAhPT0gNCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxNjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoInJlYWQgZXJyb3IiKTsKICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgbGFzdEJsb2NrVW5jb21wcmVzc2VkU2l6ZSA9IGJ1Zi5yZWFkVUludDMyTEUoMCk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgdW5jb21wcmVzc2VkUG9zaXRpb24gKyBsYXN0QmxvY2tVbmNvbXByZXNzZWRTaXplKTsKICAgICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCB0aGlzKTsKICAgICAgfSkpOwogICAgICBmdW5jdGlvbiBnZXRVbmNvbXByZXNzZWRGaWxlU2l6ZSgpIHsKICAgICAgICByZXR1cm4gX2dldFVuY29tcHJlc3NlZEZpbGVTaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KICAgICAgcmV0dXJuIGdldFVuY29tcHJlc3NlZEZpbGVTaXplOwogICAgfSgpIH0sIHsga2V5OiAiX3JlYWRBbmRVbmNvbXByZXNzQmxvY2siLCB2YWx1ZTogZnVuY3Rpb24oKSB7CiAgICAgIHZhciBfcmVhZEFuZFVuY29tcHJlc3NCbG9jazIgPSAoMCwgX2FzeW5jVG9HZW5lcmF0b3IyLmRlZmF1bHQpKC8qIEBfX1BVUkVfXyAqLyBfcmVnZW5lcmF0b3IuZGVmYXVsdC5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKGJsb2NrQnVmZmVyLCBfcmVmNiwgX3JlZjcpIHsKICAgICAgICB2YXIgX3JlZjgsIGNvbXByZXNzZWRQb3NpdGlvbiwgX3JlZjksIG5leHRDb21wcmVzc2VkUG9zaXRpb24sIG5leHQsIGJsb2NrQ29tcHJlc3NlZExlbmd0aCwgdW56aXBwZWRCdWZmZXI7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvci5kZWZhdWx0LndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX3JlZjggPSAoMCwgX3NsaWNlZFRvQXJyYXkyLmRlZmF1bHQpKF9yZWY2LCAxKSwgY29tcHJlc3NlZFBvc2l0aW9uID0gX3JlZjhbMF07CiAgICAgICAgICAgICAgICBfcmVmOSA9ICgwLCBfc2xpY2VkVG9BcnJheTIuZGVmYXVsdCkoX3JlZjcsIDEpLCBuZXh0Q29tcHJlc3NlZFBvc2l0aW9uID0gX3JlZjlbMF07CiAgICAgICAgICAgICAgICBuZXh0ID0gbmV4dENvbXByZXNzZWRQb3NpdGlvbjsKICAgICAgICAgICAgICAgIGlmIChuZXh0KSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDY7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5maWxlaGFuZGxlLnN0YXQoKTsKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBuZXh0ID0gX2NvbnRleHQzLnNlbnQuc2l6ZTsKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBibG9ja0NvbXByZXNzZWRMZW5ndGggPSBuZXh0IC0gY29tcHJlc3NlZFBvc2l0aW9uOwogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMDsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbGVoYW5kbGUucmVhZChibG9ja0J1ZmZlciwgMCwgYmxvY2tDb21wcmVzc2VkTGVuZ3RoLCBjb21wcmVzc2VkUG9zaXRpb24pOwogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgcmV0dXJuIHVuemlwJDEoYmxvY2tCdWZmZXIuc2xpY2UoMCwgYmxvY2tDb21wcmVzc2VkTGVuZ3RoKSk7CiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgIHVuemlwcGVkQnVmZmVyID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgdW56aXBwZWRCdWZmZXIpOwogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMsIHRoaXMpOwogICAgICB9KSk7CiAgICAgIGZ1bmN0aW9uIF9yZWFkQW5kVW5jb21wcmVzc0Jsb2NrKF94LCBfeDIsIF94MykgewogICAgICAgIHJldHVybiBfcmVhZEFuZFVuY29tcHJlc3NCbG9jazIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQogICAgICByZXR1cm4gX3JlYWRBbmRVbmNvbXByZXNzQmxvY2s7CiAgICB9KCkgfSwgeyBrZXk6ICJyZWFkIiwgdmFsdWU6IGZ1bmN0aW9uKCkgewogICAgICB2YXIgX3JlYWQgPSAoMCwgX2FzeW5jVG9HZW5lcmF0b3IyLmRlZmF1bHQpKC8qIEBfX1BVUkVfXyAqLyBfcmVnZW5lcmF0b3IuZGVmYXVsdC5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KGJ1Ziwgb2Zmc2V0LCBsZW5ndGgsIHBvc2l0aW9uKSB7CiAgICAgICAgdmFyIGJsb2NrUG9zaXRpb25zLCBibG9ja0J1ZmZlciwgZGVzdGluYXRpb25PZmZzZXQsIGJ5dGVzUmVhZCwgYmxvY2tOdW0sIHVuY29tcHJlc3NlZEJ1ZmZlciwgX2Jsb2NrUG9zaXRpb25zJGJsb2NrLCB1bmNvbXByZXNzZWRQb3NpdGlvbiwgc291cmNlT2Zmc2V0LCBzb3VyY2VFbmQ7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvci5kZWZhdWx0LndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ3ppLmdldFJlbGV2YW50QmxvY2tzRm9yUmVhZChsZW5ndGgsIHBvc2l0aW9uKTsKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBibG9ja1Bvc2l0aW9ucyA9IF9jb250ZXh0NC5zZW50OwogICAgICAgICAgICAgICAgYmxvY2tCdWZmZXIgPSBCdWZmZXIuYWxsb2NVbnNhZmUoMzI3NjggKiAyKTsKICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uT2Zmc2V0ID0gb2Zmc2V0OwogICAgICAgICAgICAgICAgYnl0ZXNSZWFkID0gMDsKICAgICAgICAgICAgICAgIGJsb2NrTnVtID0gMDsKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBpZiAoIShibG9ja051bSA8IGJsb2NrUG9zaXRpb25zLmxlbmd0aCAtIDEpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZWFkQW5kVW5jb21wcmVzc0Jsb2NrKGJsb2NrQnVmZmVyLCBibG9ja1Bvc2l0aW9uc1tibG9ja051bV0sIGJsb2NrUG9zaXRpb25zW2Jsb2NrTnVtICsgMV0pOwogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICB1bmNvbXByZXNzZWRCdWZmZXIgPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgICAgICAgIF9ibG9ja1Bvc2l0aW9ucyRibG9jayA9ICgwLCBfc2xpY2VkVG9BcnJheTIuZGVmYXVsdCkoYmxvY2tQb3NpdGlvbnNbYmxvY2tOdW1dLCAyKSwgdW5jb21wcmVzc2VkUG9zaXRpb24gPSBfYmxvY2tQb3NpdGlvbnMkYmxvY2tbMV07CiAgICAgICAgICAgICAgICBzb3VyY2VPZmZzZXQgPSB1bmNvbXByZXNzZWRQb3NpdGlvbiA+PSBwb3NpdGlvbiA/IDAgOiBwb3NpdGlvbiAtIHVuY29tcHJlc3NlZFBvc2l0aW9uOwogICAgICAgICAgICAgICAgc291cmNlRW5kID0gTWF0aC5taW4ocG9zaXRpb24gKyBsZW5ndGgsIHVuY29tcHJlc3NlZFBvc2l0aW9uICsgdW5jb21wcmVzc2VkQnVmZmVyLmxlbmd0aCkgLSB1bmNvbXByZXNzZWRQb3NpdGlvbjsKICAgICAgICAgICAgICAgIGlmIChzb3VyY2VPZmZzZXQgPj0gMCAmJiBzb3VyY2VPZmZzZXQgPCB1bmNvbXByZXNzZWRCdWZmZXIubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIHVuY29tcHJlc3NlZEJ1ZmZlci5jb3B5KGJ1ZiwgZGVzdGluYXRpb25PZmZzZXQsIHNvdXJjZU9mZnNldCwgc291cmNlRW5kKTsKICAgICAgICAgICAgICAgICAgZGVzdGluYXRpb25PZmZzZXQgKz0gc291cmNlRW5kIC0gc291cmNlT2Zmc2V0OwogICAgICAgICAgICAgICAgICBieXRlc1JlYWQgKz0gc291cmNlRW5kIC0gc291cmNlT2Zmc2V0OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICBibG9ja051bSArPSAxOwogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCB7IGJ5dGVzUmVhZCwgYnVmZmVyOiBidWYgfSk7CiAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCwgdGhpcyk7CiAgICAgIH0pKTsKICAgICAgZnVuY3Rpb24gcmVhZChfeDQsIF94NSwgX3g2LCBfeDcpIHsKICAgICAgICByZXR1cm4gX3JlYWQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQogICAgICByZXR1cm4gcmVhZDsKICAgIH0oKSB9XSk7CiAgICByZXR1cm4gQmd6RmlsZWhhbmRsZTI7CiAgfSgpOwogIHZhciBiZ3pGaWxlaGFuZGxlID0gQmd6RmlsZWhhbmRsZTsKICB2YXIgQmd6ZkZpbGVoYW5kbGUgPSBiZ3pGaWxlaGFuZGxlOwogIHZhciBfcmVxdWlyZSA9IHVuemlwUGFrbywgdW56aXAgPSBfcmVxdWlyZS51bnppcCwgdW56aXBDaHVuayA9IF9yZXF1aXJlLnVuemlwQ2h1bmssIHVuemlwQ2h1bmtTbGljZSA9IF9yZXF1aXJlLnVuemlwQ2h1bmtTbGljZTsKICB2YXIgZGlzdCA9IHsgQmd6ZkZpbGVoYW5kbGUsIHVuemlwLCB1bnppcENodW5rLCB1bnppcENodW5rU2xpY2UgfTsKICBmdW5jdGlvbiBsb25nVG9OdW1iZXIobG9uZzIpIHsKICAgIGlmIChsb25nMi5ncmVhdGVyVGhhbihOdW1iZXIuTUFYX1NBRkVfSU5URUdFUikgfHwgbG9uZzIubGVzc1RoYW4oTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIpKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigiaW50ZWdlciBvdmVyZmxvdyIpOwogICAgfQogICAgcmV0dXJuIGxvbmcyLnRvTnVtYmVyKCk7CiAgfQogIGNsYXNzIEFib3J0RXJyb3IgZXh0ZW5kcyBFcnJvciB7CiAgfQogIGZ1bmN0aW9uIGNoZWNrQWJvcnRTaWduYWwoc2lnbmFsKSB7CiAgICBpZiAoIXNpZ25hbCkgewogICAgICByZXR1cm47CiAgICB9CiAgICBpZiAoc2lnbmFsLmFib3J0ZWQpIHsKICAgICAgaWYgKHR5cGVvZiBET01FeGNlcHRpb24gIT09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgdGhyb3cgbmV3IERPTUV4Y2VwdGlvbigiYWJvcnRlZCIsICJBYm9ydEVycm9yIik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgZSA9IG5ldyBBYm9ydEVycm9yKCJhYm9ydGVkIik7CiAgICAgICAgZS5jb2RlID0gIkVSUl9BQk9SVEVEIjsKICAgICAgICB0aHJvdyBlOwogICAgICB9CiAgICB9CiAgfQogIGZ1bmN0aW9uIGNhbk1lcmdlQmxvY2tzKGNodW5rMSwgY2h1bmsyKSB7CiAgICByZXR1cm4gY2h1bmsyLm1pbnYuYmxvY2tQb3NpdGlvbiAtIGNodW5rMS5tYXh2LmJsb2NrUG9zaXRpb24gPCA2NWUzICYmIGNodW5rMi5tYXh2LmJsb2NrUG9zaXRpb24gLSBjaHVuazEubWludi5ibG9ja1Bvc2l0aW9uIDwgNWU2OwogIH0KICBmdW5jdGlvbiBvcHRpbWl6ZUNodW5rcyhjaHVua3MsIGxvd2VzdCkgewogICAgY29uc3QgbWVyZ2VkQ2h1bmtzID0gW107CiAgICBsZXQgbGFzdENodW5rID0gbnVsbDsKICAgIGlmIChjaHVua3MubGVuZ3RoID09PSAwKSB7CiAgICAgIHJldHVybiBjaHVua3M7CiAgICB9CiAgICBjaHVua3Muc29ydChmdW5jdGlvbihjMCwgYzEpIHsKICAgICAgY29uc3QgZGlmID0gYzAubWludi5ibG9ja1Bvc2l0aW9uIC0gYzEubWludi5ibG9ja1Bvc2l0aW9uOwogICAgICBpZiAoZGlmICE9PSAwKSB7CiAgICAgICAgcmV0dXJuIGRpZjsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gYzAubWludi5kYXRhUG9zaXRpb24gLSBjMS5taW52LmRhdGFQb3NpdGlvbjsKICAgICAgfQogICAgfSk7CiAgICBjaHVua3MuZm9yRWFjaCgoY2h1bmspID0+IHsKICAgICAgaWYgKCFsb3dlc3QgfHwgY2h1bmsubWF4di5jb21wYXJlVG8obG93ZXN0KSA+IDApIHsKICAgICAgICBpZiAobGFzdENodW5rID09PSBudWxsKSB7CiAgICAgICAgICBtZXJnZWRDaHVua3MucHVzaChjaHVuayk7CiAgICAgICAgICBsYXN0Q2h1bmsgPSBjaHVuazsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKGNhbk1lcmdlQmxvY2tzKGxhc3RDaHVuaywgY2h1bmspKSB7CiAgICAgICAgICAgIGlmIChjaHVuay5tYXh2LmNvbXBhcmVUbyhsYXN0Q2h1bmsubWF4dikgPiAwKSB7CiAgICAgICAgICAgICAgbGFzdENodW5rLm1heHYgPSBjaHVuay5tYXh2OwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBtZXJnZWRDaHVua3MucHVzaChjaHVuayk7CiAgICAgICAgICAgIGxhc3RDaHVuayA9IGNodW5rOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gbWVyZ2VkQ2h1bmtzOwogIH0KICBjbGFzcyBWaXJ0dWFsT2Zmc2V0IHsKICAgIGNvbnN0cnVjdG9yKGJsb2NrUG9zaXRpb24sIGRhdGFQb3NpdGlvbikgewogICAgICB0aGlzLmJsb2NrUG9zaXRpb24gPSBibG9ja1Bvc2l0aW9uOwogICAgICB0aGlzLmRhdGFQb3NpdGlvbiA9IGRhdGFQb3NpdGlvbjsKICAgIH0KICAgIHRvU3RyaW5nKCkgewogICAgICByZXR1cm4gYCR7dGhpcy5ibG9ja1Bvc2l0aW9ufToke3RoaXMuZGF0YVBvc2l0aW9ufWA7CiAgICB9CiAgICBjb21wYXJlVG8oYikgewogICAgICByZXR1cm4gdGhpcy5ibG9ja1Bvc2l0aW9uIC0gYi5ibG9ja1Bvc2l0aW9uIHx8IHRoaXMuZGF0YVBvc2l0aW9uIC0gYi5kYXRhUG9zaXRpb247CiAgICB9CiAgICBzdGF0aWMgbWluKC4uLmFyZ3MpIHsKICAgICAgbGV0IG1pbjsKICAgICAgbGV0IGkgPSAwOwogICAgICBmb3IgKDsgIW1pbjsgaSArPSAxKSB7CiAgICAgICAgbWluID0gYXJnc1tpXTsKICAgICAgfQogICAgICBmb3IgKDsgaSA8IGFyZ3MubGVuZ3RoOyBpICs9IDEpIHsKICAgICAgICBpZiAobWluLmNvbXBhcmVUbyhhcmdzW2ldKSA+IDApIHsKICAgICAgICAgIG1pbiA9IGFyZ3NbaV07CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBtaW47CiAgICB9CiAgfQogIGZ1bmN0aW9uIGZyb21CeXRlcyhieXRlcywgb2Zmc2V0ID0gMCwgYmlnZW5kaWFuID0gZmFsc2UpIHsKICAgIGlmIChiaWdlbmRpYW4pIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCJiaWctZW5kaWFuIHZpcnR1YWwgZmlsZSBvZmZzZXRzIG5vdCBpbXBsZW1lbnRlZCIpOwogICAgfQogICAgcmV0dXJuIG5ldyBWaXJ0dWFsT2Zmc2V0KGJ5dGVzW29mZnNldCArIDddICogMTA5OTUxMTYyNzc3NiArIGJ5dGVzW29mZnNldCArIDZdICogNDI5NDk2NzI5NiArIGJ5dGVzW29mZnNldCArIDVdICogMTY3NzcyMTYgKyBieXRlc1tvZmZzZXQgKyA0XSAqIDY1NTM2ICsgYnl0ZXNbb2Zmc2V0ICsgM10gKiAyNTYgKyBieXRlc1tvZmZzZXQgKyAyXSwgYnl0ZXNbb2Zmc2V0ICsgMV0gPDwgOCB8IGJ5dGVzW29mZnNldF0pOwogIH0KICBjbGFzcyBDaHVuayB7CiAgICBjb25zdHJ1Y3RvcihtaW52LCBtYXh2LCBiaW4sIGZldGNoZWRTaXplID0gdm9pZCAwKSB7CiAgICAgIHRoaXMubWludiA9IG1pbnY7CiAgICAgIHRoaXMubWF4diA9IG1heHY7CiAgICAgIHRoaXMuYmluID0gYmluOwogICAgICB0aGlzLl9mZXRjaGVkU2l6ZSA9IGZldGNoZWRTaXplOwogICAgfQogICAgdG9VbmlxdWVTdHJpbmcoKSB7CiAgICAgIHJldHVybiBgJHt0aGlzLm1pbnZ9Li4ke3RoaXMubWF4dn0gKGJpbiAke3RoaXMuYmlufSwgZmV0Y2hlZFNpemUgJHt0aGlzLmZldGNoZWRTaXplKCl9KWA7CiAgICB9CiAgICB0b1N0cmluZygpIHsKICAgICAgcmV0dXJuIHRoaXMudG9VbmlxdWVTdHJpbmcoKTsKICAgIH0KICAgIGNvbXBhcmVUbyhiKSB7CiAgICAgIHJldHVybiB0aGlzLm1pbnYuY29tcGFyZVRvKGIubWludikgfHwgdGhpcy5tYXh2LmNvbXBhcmVUbyhiLm1heHYpIHx8IHRoaXMuYmluIC0gYi5iaW47CiAgICB9CiAgICBmZXRjaGVkU2l6ZSgpIHsKICAgICAgaWYgKHRoaXMuX2ZldGNoZWRTaXplICE9PSB2b2lkIDApIHsKICAgICAgICByZXR1cm4gdGhpcy5fZmV0Y2hlZFNpemU7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMubWF4di5ibG9ja1Bvc2l0aW9uICsgKDEgPDwgMTYpIC0gdGhpcy5taW52LmJsb2NrUG9zaXRpb247CiAgICB9CiAgfQogIGNsYXNzIEluZGV4RmlsZSB7CiAgICBjb25zdHJ1Y3Rvcih7IGZpbGVoYW5kbGU6IGZpbGVoYW5kbGUyLCByZW5hbWVSZWZTZXFzID0gKG4pID0+IG4gfSkgewogICAgICB0aGlzLmZpbGVoYW5kbGUgPSBmaWxlaGFuZGxlMjsKICAgICAgdGhpcy5yZW5hbWVSZWZTZXEgPSByZW5hbWVSZWZTZXFzOwogICAgfQogICAgYXN5bmMgZ2V0TWV0YWRhdGEob3B0cyA9IHt9KSB7CiAgICAgIGNvbnN0IHsgaW5kaWNlcywgLi4ucmVzdCB9ID0gYXdhaXQgdGhpcy5wYXJzZShvcHRzKTsKICAgICAgcmV0dXJuIHJlc3Q7CiAgICB9CiAgICBfZmluZEZpcnN0RGF0YShjdXJyZW50RmRsLCB2aXJ0dWFsT2Zmc2V0KSB7CiAgICAgIGlmIChjdXJyZW50RmRsKSB7CiAgICAgICAgcmV0dXJuIGN1cnJlbnRGZGwuY29tcGFyZVRvKHZpcnR1YWxPZmZzZXQpID4gMCA/IHZpcnR1YWxPZmZzZXQgOiBjdXJyZW50RmRsOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB2aXJ0dWFsT2Zmc2V0OwogICAgICB9CiAgICB9CiAgICBhc3luYyBwYXJzZShvcHRzID0ge30pIHsKICAgICAgaWYgKCF0aGlzLl9wYXJzZUNhY2hlKSB7CiAgICAgICAgdGhpcy5fcGFyc2VDYWNoZSA9IG5ldyBfZGVmYXVsdCh7CiAgICAgICAgICBjYWNoZTogbmV3IHF1aWNrTHJ1KHsgbWF4U2l6ZTogMSB9KSwKICAgICAgICAgIGZpbGw6ICgpID0+IHRoaXMuX3BhcnNlKG9wdHMpCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuX3BhcnNlQ2FjaGUuZ2V0KCJpbmRleCIsIG51bGwsIHZvaWQgMCk7CiAgICB9CiAgICBhc3luYyBoYXNSZWZTZXEoc2VxSWQsIG9wdHMgPSB7fSkgewogICAgICByZXR1cm4gISEoKGF3YWl0IHRoaXMucGFyc2Uob3B0cykpLmluZGljZXNbc2VxSWRdIHx8IHt9KS5iaW5JbmRleDsKICAgIH0KICB9CiAgY29uc3QgVEJJX01BR0lDID0gMjE1NzgzMjQ7CiAgY29uc3QgVEFEX0xJRFhfU0hJRlQgPSAxNDsKICBmdW5jdGlvbiByZWcyYmlucyhiZWcsIGVuZCkgewogICAgYmVnICs9IDE7CiAgICBlbmQgLT0gMTsKICAgIHJldHVybiBbCiAgICAgIFswLCAwXSwKICAgICAgWzEgKyAoYmVnID4+IDI2KSwgMSArIChlbmQgPj4gMjYpXSwKICAgICAgWzkgKyAoYmVnID4+IDIzKSwgOSArIChlbmQgPj4gMjMpXSwKICAgICAgWzczICsgKGJlZyA+PiAyMCksIDczICsgKGVuZCA+PiAyMCldLAogICAgICBbNTg1ICsgKGJlZyA+PiAxNyksIDU4NSArIChlbmQgPj4gMTcpXSwKICAgICAgWzQ2ODEgKyAoYmVnID4+IDE0KSwgNDY4MSArIChlbmQgPj4gMTQpXQogICAgXTsKICB9CiAgY2xhc3MgVGFiaXhJbmRleCBleHRlbmRzIEluZGV4RmlsZSB7CiAgICBhc3luYyBsaW5lQ291bnQocmVmTmFtZSwgb3B0cyA9IHt9KSB7CiAgICAgIGNvbnN0IGluZGV4RGF0YSA9IGF3YWl0IHRoaXMucGFyc2Uob3B0cyk7CiAgICAgIGlmICghaW5kZXhEYXRhKSB7CiAgICAgICAgcmV0dXJuIC0xOwogICAgICB9CiAgICAgIGNvbnN0IHJlZklkID0gaW5kZXhEYXRhLnJlZk5hbWVUb0lkW3JlZk5hbWVdOwogICAgICBjb25zdCBpZHggPSBpbmRleERhdGEuaW5kaWNlc1tyZWZJZF07CiAgICAgIGlmICghaWR4KSB7CiAgICAgICAgcmV0dXJuIC0xOwogICAgICB9CiAgICAgIGNvbnN0IHsgc3RhdHMgfSA9IGluZGV4RGF0YS5pbmRpY2VzW3JlZklkXTsKICAgICAgaWYgKHN0YXRzKSB7CiAgICAgICAgcmV0dXJuIHN0YXRzLmxpbmVDb3VudDsKICAgICAgfQogICAgICByZXR1cm4gLTE7CiAgICB9CiAgICBhc3luYyBfcGFyc2Uob3B0cyA9IHt9KSB7CiAgICAgIGNvbnN0IGJ5dGVzID0gYXdhaXQgZGlzdC51bnppcChhd2FpdCB0aGlzLmZpbGVoYW5kbGUucmVhZEZpbGUob3B0cykpOwogICAgICBjaGVja0Fib3J0U2lnbmFsKG9wdHMuc2lnbmFsKTsKICAgICAgaWYgKGJ5dGVzLnJlYWRVSW50MzJMRSgwKSAhPT0gVEJJX01BR0lDKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJOb3QgYSBUQkkgZmlsZSIpOwogICAgICB9CiAgICAgIGNvbnN0IHJlZkNvdW50ID0gYnl0ZXMucmVhZEludDMyTEUoNCk7CiAgICAgIGNvbnN0IGZvcm1hdEZsYWdzID0gYnl0ZXMucmVhZEludDMyTEUoOCk7CiAgICAgIGNvbnN0IGNvb3JkaW5hdGVUeXBlID0gZm9ybWF0RmxhZ3MgJiA2NTUzNiA/ICJ6ZXJvLWJhc2VkLWhhbGYtb3BlbiIgOiAiMS1iYXNlZC1jbG9zZWQiOwogICAgICBjb25zdCBmb3JtYXRPcHRzID0gewogICAgICAgIDA6ICJnZW5lcmljIiwKICAgICAgICAxOiAiU0FNIiwKICAgICAgICAyOiAiVkNGIgogICAgICB9OwogICAgICBjb25zdCBmb3JtYXQgPSBmb3JtYXRPcHRzW2Zvcm1hdEZsYWdzICYgMTVdOwogICAgICBpZiAoIWZvcm1hdCkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgaW52YWxpZCBUYWJpeCBwcmVzZXQgZm9ybWF0IGZsYWdzICR7Zm9ybWF0RmxhZ3N9YCk7CiAgICAgIH0KICAgICAgY29uc3QgY29sdW1uTnVtYmVycyA9IHsKICAgICAgICByZWY6IGJ5dGVzLnJlYWRJbnQzMkxFKDEyKSwKICAgICAgICBzdGFydDogYnl0ZXMucmVhZEludDMyTEUoMTYpLAogICAgICAgIGVuZDogYnl0ZXMucmVhZEludDMyTEUoMjApCiAgICAgIH07CiAgICAgIGNvbnN0IG1ldGFWYWx1ZSA9IGJ5dGVzLnJlYWRJbnQzMkxFKDI0KTsKICAgICAgY29uc3QgZGVwdGggPSA1OwogICAgICBjb25zdCBtYXhCaW5OdW1iZXIgPSAoKDEgPDwgKGRlcHRoICsgMSkgKiAzKSAtIDEpIC8gNzsKICAgICAgY29uc3QgbWF4UmVmTGVuZ3RoID0gMiAqKiAoMTQgKyBkZXB0aCAqIDMpOwogICAgICBjb25zdCBtZXRhQ2hhciA9IG1ldGFWYWx1ZSA/IFN0cmluZy5mcm9tQ2hhckNvZGUobWV0YVZhbHVlKSA6IG51bGw7CiAgICAgIGNvbnN0IHNraXBMaW5lcyA9IGJ5dGVzLnJlYWRJbnQzMkxFKDI4KTsKICAgICAgY29uc3QgbmFtZVNlY3Rpb25MZW5ndGggPSBieXRlcy5yZWFkSW50MzJMRSgzMik7CiAgICAgIGNvbnN0IHsgcmVmTmFtZVRvSWQsIHJlZklkVG9OYW1lIH0gPSB0aGlzLl9wYXJzZU5hbWVCeXRlcyhieXRlcy5zbGljZSgzNiwgMzYgKyBuYW1lU2VjdGlvbkxlbmd0aCkpOwogICAgICBsZXQgY3Vyck9mZnNldCA9IDM2ICsgbmFtZVNlY3Rpb25MZW5ndGg7CiAgICAgIGxldCBmaXJzdERhdGFMaW5lOwogICAgICBjb25zdCBpbmRpY2VzID0gbmV3IEFycmF5KHJlZkNvdW50KS5maWxsKDApLm1hcCgoKSA9PiB7CiAgICAgICAgY29uc3QgYmluQ291bnQgPSBieXRlcy5yZWFkSW50MzJMRShjdXJyT2Zmc2V0KTsKICAgICAgICBjdXJyT2Zmc2V0ICs9IDQ7CiAgICAgICAgY29uc3QgYmluSW5kZXggPSB7fTsKICAgICAgICBsZXQgc3RhdHM7CiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBiaW5Db3VudDsgaiArPSAxKSB7CiAgICAgICAgICBjb25zdCBiaW4gPSBieXRlcy5yZWFkVUludDMyTEUoY3Vyck9mZnNldCk7CiAgICAgICAgICBjdXJyT2Zmc2V0ICs9IDQ7CiAgICAgICAgICBpZiAoYmluID4gbWF4QmluTnVtYmVyICsgMSkgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoInRhYml4IGluZGV4IGNvbnRhaW5zIHRvbyBtYW55IGJpbnMsIHBsZWFzZSB1c2UgYSBDU0kgaW5kZXgiKTsKICAgICAgICAgIH0gZWxzZSBpZiAoYmluID09PSBtYXhCaW5OdW1iZXIgKyAxKSB7CiAgICAgICAgICAgIGNvbnN0IGNodW5rQ291bnQgPSBieXRlcy5yZWFkSW50MzJMRShjdXJyT2Zmc2V0KTsKICAgICAgICAgICAgY3Vyck9mZnNldCArPSA0OwogICAgICAgICAgICBpZiAoY2h1bmtDb3VudCA9PT0gMikgewogICAgICAgICAgICAgIHN0YXRzID0gdGhpcy5wYXJzZVBzZXVkb0JpbihieXRlcywgY3Vyck9mZnNldCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY3Vyck9mZnNldCArPSAxNiAqIGNodW5rQ291bnQ7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zdCBjaHVua0NvdW50ID0gYnl0ZXMucmVhZEludDMyTEUoY3Vyck9mZnNldCk7CiAgICAgICAgICAgIGN1cnJPZmZzZXQgKz0gNDsKICAgICAgICAgICAgY29uc3QgY2h1bmtzID0gbmV3IEFycmF5KGNodW5rQ291bnQpOwogICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IGNodW5rQ291bnQ7IGsgKz0gMSkgewogICAgICAgICAgICAgIGNvbnN0IHUgPSBmcm9tQnl0ZXMoYnl0ZXMsIGN1cnJPZmZzZXQpOwogICAgICAgICAgICAgIGNvbnN0IHYgPSBmcm9tQnl0ZXMoYnl0ZXMsIGN1cnJPZmZzZXQgKyA4KTsKICAgICAgICAgICAgICBjdXJyT2Zmc2V0ICs9IDE2OwogICAgICAgICAgICAgIGZpcnN0RGF0YUxpbmUgPSB0aGlzLl9maW5kRmlyc3REYXRhKGZpcnN0RGF0YUxpbmUsIHUpOwogICAgICAgICAgICAgIGNodW5rc1trXSA9IG5ldyBDaHVuayh1LCB2LCBiaW4pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJpbkluZGV4W2Jpbl0gPSBjaHVua3M7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGNvbnN0IGxpbmVhckNvdW50ID0gYnl0ZXMucmVhZEludDMyTEUoY3Vyck9mZnNldCk7CiAgICAgICAgY3Vyck9mZnNldCArPSA0OwogICAgICAgIGNvbnN0IGxpbmVhckluZGV4ID0gbmV3IEFycmF5KGxpbmVhckNvdW50KTsKICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IGxpbmVhckNvdW50OyBrICs9IDEpIHsKICAgICAgICAgIGxpbmVhckluZGV4W2tdID0gZnJvbUJ5dGVzKGJ5dGVzLCBjdXJyT2Zmc2V0KTsKICAgICAgICAgIGN1cnJPZmZzZXQgKz0gODsKICAgICAgICAgIGZpcnN0RGF0YUxpbmUgPSB0aGlzLl9maW5kRmlyc3REYXRhKGZpcnN0RGF0YUxpbmUsIGxpbmVhckluZGV4W2tdKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHsgYmluSW5kZXgsIGxpbmVhckluZGV4LCBzdGF0cyB9OwogICAgICB9KTsKICAgICAgcmV0dXJuIHsKICAgICAgICBpbmRpY2VzLAogICAgICAgIG1ldGFDaGFyLAogICAgICAgIG1heEJpbk51bWJlciwKICAgICAgICBtYXhSZWZMZW5ndGgsCiAgICAgICAgc2tpcExpbmVzLAogICAgICAgIGZpcnN0RGF0YUxpbmUsCiAgICAgICAgY29sdW1uTnVtYmVycywKICAgICAgICBjb29yZGluYXRlVHlwZSwKICAgICAgICBmb3JtYXQsCiAgICAgICAgcmVmSWRUb05hbWUsCiAgICAgICAgcmVmTmFtZVRvSWQsCiAgICAgICAgbWF4QmxvY2tTaXplOiAxIDw8IDE2CiAgICAgIH07CiAgICB9CiAgICBwYXJzZVBzZXVkb0JpbihieXRlcywgb2Zmc2V0KSB7CiAgICAgIGNvbnN0IGxpbmVDb3VudCA9IGxvbmdUb051bWJlcihsb25nLmZyb21CeXRlc0xFKGJ5dGVzLnNsaWNlKG9mZnNldCArIDE2LCBvZmZzZXQgKyAyNCksIHRydWUpKTsKICAgICAgcmV0dXJuIHsgbGluZUNvdW50IH07CiAgICB9CiAgICBfcGFyc2VOYW1lQnl0ZXMobmFtZXNCeXRlcykgewogICAgICBsZXQgY3VyclJlZklkID0gMDsKICAgICAgbGV0IGN1cnJOYW1lU3RhcnQgPSAwOwogICAgICBjb25zdCByZWZJZFRvTmFtZSA9IFtdOwogICAgICBjb25zdCByZWZOYW1lVG9JZCA9IHt9OwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5hbWVzQnl0ZXMubGVuZ3RoOyBpICs9IDEpIHsKICAgICAgICBpZiAoIW5hbWVzQnl0ZXNbaV0pIHsKICAgICAgICAgIGlmIChjdXJyTmFtZVN0YXJ0IDwgaSkgewogICAgICAgICAgICBsZXQgcmVmTmFtZSA9IG5hbWVzQnl0ZXMudG9TdHJpbmcoInV0ZjgiLCBjdXJyTmFtZVN0YXJ0LCBpKTsKICAgICAgICAgICAgcmVmTmFtZSA9IHRoaXMucmVuYW1lUmVmU2VxKHJlZk5hbWUpOwogICAgICAgICAgICByZWZJZFRvTmFtZVtjdXJyUmVmSWRdID0gcmVmTmFtZTsKICAgICAgICAgICAgcmVmTmFtZVRvSWRbcmVmTmFtZV0gPSBjdXJyUmVmSWQ7CiAgICAgICAgICB9CiAgICAgICAgICBjdXJyTmFtZVN0YXJ0ID0gaSArIDE7CiAgICAgICAgICBjdXJyUmVmSWQgKz0gMTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHsgcmVmTmFtZVRvSWQsIHJlZklkVG9OYW1lIH07CiAgICB9CiAgICBhc3luYyBibG9ja3NGb3JSYW5nZShyZWZOYW1lLCBtaW4sIG1heCwgb3B0cyA9IHt9KSB7CiAgICAgIGlmIChtaW4gPCAwKSB7CiAgICAgICAgbWluID0gMDsKICAgICAgfQogICAgICBjb25zdCBpbmRleERhdGEgPSBhd2FpdCB0aGlzLnBhcnNlKG9wdHMpOwogICAgICBpZiAoIWluZGV4RGF0YSkgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgICBjb25zdCByZWZJZCA9IGluZGV4RGF0YS5yZWZOYW1lVG9JZFtyZWZOYW1lXTsKICAgICAgY29uc3QgYmEgPSBpbmRleERhdGEuaW5kaWNlc1tyZWZJZF07CiAgICAgIGlmICghYmEpIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KICAgICAgY29uc3QgbWluT2Zmc2V0ID0gYmEubGluZWFySW5kZXgubGVuZ3RoID8gYmEubGluZWFySW5kZXhbbWluID4+IFRBRF9MSURYX1NISUZUID49IGJhLmxpbmVhckluZGV4Lmxlbmd0aCA/IGJhLmxpbmVhckluZGV4Lmxlbmd0aCAtIDEgOiBtaW4gPj4gVEFEX0xJRFhfU0hJRlRdIDogbmV3IFZpcnR1YWxPZmZzZXQoMCwgMCk7CiAgICAgIGlmICghbWluT2Zmc2V0KSB7CiAgICAgICAgY29uc29sZS53YXJuKCJxdWVyeWluZyBvdXRzaWRlIG9mIHBvc3NpYmxlIHRhYml4IHJhbmdlIik7CiAgICAgIH0KICAgICAgY29uc3Qgb3ZlcmxhcHBpbmdCaW5zID0gcmVnMmJpbnMobWluLCBtYXgpOwogICAgICBjb25zdCBjaHVua3MgPSBbXTsKICAgICAgZm9yIChjb25zdCBbc3RhcnQsIGVuZF0gb2Ygb3ZlcmxhcHBpbmdCaW5zKSB7CiAgICAgICAgZm9yIChsZXQgYmluID0gc3RhcnQ7IGJpbiA8PSBlbmQ7IGJpbisrKSB7CiAgICAgICAgICBpZiAoYmEuYmluSW5kZXhbYmluXSkgewogICAgICAgICAgICBjb25zdCBiaW5DaHVua3MgPSBiYS5iaW5JbmRleFtiaW5dOwogICAgICAgICAgICBmb3IgKGxldCBjMiA9IDA7IGMyIDwgYmluQ2h1bmtzLmxlbmd0aDsgKytjMikgewogICAgICAgICAgICAgIGNodW5rcy5wdXNoKG5ldyBDaHVuayhiaW5DaHVua3NbYzJdLm1pbnYsIGJpbkNodW5rc1tjMl0ubWF4diwgYmluKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgY29uc3QgbmludHYgPSBiYS5saW5lYXJJbmRleC5sZW5ndGg7CiAgICAgIGxldCBsb3dlc3QgPSBudWxsOwogICAgICBjb25zdCBtaW5MaW4gPSBNYXRoLm1pbihtaW4gPj4gMTQsIG5pbnR2IC0gMSk7CiAgICAgIGNvbnN0IG1heExpbiA9IE1hdGgubWluKG1heCA+PiAxNCwgbmludHYgLSAxKTsKICAgICAgZm9yIChsZXQgaSA9IG1pbkxpbjsgaSA8PSBtYXhMaW47ICsraSkgewogICAgICAgIGNvbnN0IHZwID0gYmEubGluZWFySW5kZXhbaV07CiAgICAgICAgaWYgKHZwKSB7CiAgICAgICAgICBpZiAoIWxvd2VzdCB8fCB2cC5jb21wYXJlVG8obG93ZXN0KSA8IDApIHsKICAgICAgICAgICAgbG93ZXN0ID0gdnA7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBvcHRpbWl6ZUNodW5rcyhjaHVua3MsIGxvd2VzdCk7CiAgICB9CiAgfQogIGNvbnN0IENTSTFfTUFHSUMgPSAyMTU4MjY1OTsKICBjb25zdCBDU0kyX01BR0lDID0gMzgzNTk4NzU7CiAgZnVuY3Rpb24gbHNoaWZ0KG51bSwgYml0cykgewogICAgcmV0dXJuIG51bSAqIDIgKiogYml0czsKICB9CiAgZnVuY3Rpb24gcnNoaWZ0KG51bSwgYml0cykgewogICAgcmV0dXJuIE1hdGguZmxvb3IobnVtIC8gMiAqKiBiaXRzKTsKICB9CiAgY2xhc3MgQ1NJIGV4dGVuZHMgSW5kZXhGaWxlIHsKICAgIGNvbnN0cnVjdG9yKGFyZ3MpIHsKICAgICAgc3VwZXIoYXJncyk7CiAgICAgIHRoaXMubWF4QmluTnVtYmVyID0gMDsKICAgICAgdGhpcy5kZXB0aCA9IDA7CiAgICAgIHRoaXMubWluU2hpZnQgPSAwOwogICAgfQogICAgYXN5bmMgbGluZUNvdW50KHJlZk5hbWUsIG9wdHMgPSB7fSkgewogICAgICBjb25zdCBpbmRleERhdGEgPSBhd2FpdCB0aGlzLnBhcnNlKG9wdHMpOwogICAgICBpZiAoIWluZGV4RGF0YSkgewogICAgICAgIHJldHVybiAtMTsKICAgICAgfQogICAgICBjb25zdCByZWZJZCA9IGluZGV4RGF0YS5yZWZOYW1lVG9JZFtyZWZOYW1lXTsKICAgICAgY29uc3QgaWR4ID0gaW5kZXhEYXRhLmluZGljZXNbcmVmSWRdOwogICAgICBpZiAoIWlkeCkgewogICAgICAgIHJldHVybiAtMTsKICAgICAgfQogICAgICBjb25zdCB7IHN0YXRzIH0gPSBpbmRleERhdGEuaW5kaWNlc1tyZWZJZF07CiAgICAgIGlmIChzdGF0cykgewogICAgICAgIHJldHVybiBzdGF0cy5saW5lQ291bnQ7CiAgICAgIH0KICAgICAgcmV0dXJuIC0xOwogICAgfQogICAgYXN5bmMgaW5kZXhDb3YoKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigiQ1NJIGluZGV4ZXMgZG8gbm90IHN1cHBvcnQgaW5kZXhjb3YiKTsKICAgIH0KICAgIHBhcnNlQXV4RGF0YShieXRlcywgb2Zmc2V0LCBhdXhMZW5ndGgpIHsKICAgICAgaWYgKGF1eExlbmd0aCA8IDMwKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHJlZklkVG9OYW1lOiBbXSwKICAgICAgICAgIHJlZk5hbWVUb0lkOiB7fQogICAgICAgIH07CiAgICAgIH0KICAgICAgY29uc3QgZm9ybWF0RmxhZ3MgPSBieXRlcy5yZWFkSW50MzJMRShvZmZzZXQpOwogICAgICBjb25zdCBjb29yZGluYXRlVHlwZSA9IGZvcm1hdEZsYWdzICYgNjU1MzYgPyAiemVyby1iYXNlZC1oYWxmLW9wZW4iIDogIjEtYmFzZWQtY2xvc2VkIjsKICAgICAgY29uc3QgZm9ybWF0ID0geyAwOiAiZ2VuZXJpYyIsIDE6ICJTQU0iLCAyOiAiVkNGIiB9W2Zvcm1hdEZsYWdzICYgMTVdOwogICAgICBpZiAoIWZvcm1hdCkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgaW52YWxpZCBUYWJpeCBwcmVzZXQgZm9ybWF0IGZsYWdzICR7Zm9ybWF0RmxhZ3N9YCk7CiAgICAgIH0KICAgICAgY29uc3QgY29sdW1uTnVtYmVycyA9IHsKICAgICAgICByZWY6IGJ5dGVzLnJlYWRJbnQzMkxFKG9mZnNldCArIDQpLAogICAgICAgIHN0YXJ0OiBieXRlcy5yZWFkSW50MzJMRShvZmZzZXQgKyA4KSwKICAgICAgICBlbmQ6IGJ5dGVzLnJlYWRJbnQzMkxFKG9mZnNldCArIDEyKQogICAgICB9OwogICAgICBjb25zdCBtZXRhVmFsdWUgPSBieXRlcy5yZWFkSW50MzJMRShvZmZzZXQgKyAxNik7CiAgICAgIGNvbnN0IG1ldGFDaGFyID0gbWV0YVZhbHVlID8gU3RyaW5nLmZyb21DaGFyQ29kZShtZXRhVmFsdWUpIDogIiI7CiAgICAgIGNvbnN0IHNraXBMaW5lcyA9IGJ5dGVzLnJlYWRJbnQzMkxFKG9mZnNldCArIDIwKTsKICAgICAgY29uc3QgbmFtZVNlY3Rpb25MZW5ndGggPSBieXRlcy5yZWFkSW50MzJMRShvZmZzZXQgKyAyNCk7CiAgICAgIGNvbnN0IHsgcmVmSWRUb05hbWUsIHJlZk5hbWVUb0lkIH0gPSB0aGlzLl9wYXJzZU5hbWVCeXRlcyhieXRlcy5zbGljZShvZmZzZXQgKyAyOCwgb2Zmc2V0ICsgMjggKyBuYW1lU2VjdGlvbkxlbmd0aCkpOwogICAgICByZXR1cm4gewogICAgICAgIHJlZklkVG9OYW1lLAogICAgICAgIHJlZk5hbWVUb0lkLAogICAgICAgIHNraXBMaW5lcywKICAgICAgICBtZXRhQ2hhciwKICAgICAgICBjb2x1bW5OdW1iZXJzLAogICAgICAgIGZvcm1hdCwKICAgICAgICBjb29yZGluYXRlVHlwZQogICAgICB9OwogICAgfQogICAgX3BhcnNlTmFtZUJ5dGVzKG5hbWVzQnl0ZXMpIHsKICAgICAgbGV0IGN1cnJSZWZJZCA9IDA7CiAgICAgIGxldCBjdXJyTmFtZVN0YXJ0ID0gMDsKICAgICAgY29uc3QgcmVmSWRUb05hbWUgPSBbXTsKICAgICAgY29uc3QgcmVmTmFtZVRvSWQgPSB7fTsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuYW1lc0J5dGVzLmxlbmd0aDsgaSArPSAxKSB7CiAgICAgICAgaWYgKCFuYW1lc0J5dGVzW2ldKSB7CiAgICAgICAgICBpZiAoY3Vyck5hbWVTdGFydCA8IGkpIHsKICAgICAgICAgICAgbGV0IHJlZk5hbWUgPSBuYW1lc0J5dGVzLnRvU3RyaW5nKCJ1dGY4IiwgY3Vyck5hbWVTdGFydCwgaSk7CiAgICAgICAgICAgIHJlZk5hbWUgPSB0aGlzLnJlbmFtZVJlZlNlcShyZWZOYW1lKTsKICAgICAgICAgICAgcmVmSWRUb05hbWVbY3VyclJlZklkXSA9IHJlZk5hbWU7CiAgICAgICAgICAgIHJlZk5hbWVUb0lkW3JlZk5hbWVdID0gY3VyclJlZklkOwogICAgICAgICAgfQogICAgICAgICAgY3Vyck5hbWVTdGFydCA9IGkgKyAxOwogICAgICAgICAgY3VyclJlZklkICs9IDE7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiB7IHJlZk5hbWVUb0lkLCByZWZJZFRvTmFtZSB9OwogICAgfQogICAgYXN5bmMgX3BhcnNlKG9wdHMgPSB7fSkgewogICAgICBjb25zdCBieXRlcyA9IGF3YWl0IGRpc3QudW56aXAoYXdhaXQgdGhpcy5maWxlaGFuZGxlLnJlYWRGaWxlKG9wdHMpKTsKICAgICAgbGV0IGNzaVZlcnNpb247CiAgICAgIGlmIChieXRlcy5yZWFkVUludDMyTEUoMCkgPT09IENTSTFfTUFHSUMpIHsKICAgICAgICBjc2lWZXJzaW9uID0gMTsKICAgICAgfSBlbHNlIGlmIChieXRlcy5yZWFkVUludDMyTEUoMCkgPT09IENTSTJfTUFHSUMpIHsKICAgICAgICBjc2lWZXJzaW9uID0gMjsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIk5vdCBhIENTSSBmaWxlIik7CiAgICAgIH0KICAgICAgdGhpcy5taW5TaGlmdCA9IGJ5dGVzLnJlYWRJbnQzMkxFKDQpOwogICAgICB0aGlzLmRlcHRoID0gYnl0ZXMucmVhZEludDMyTEUoOCk7CiAgICAgIHRoaXMubWF4QmluTnVtYmVyID0gKCgxIDw8ICh0aGlzLmRlcHRoICsgMSkgKiAzKSAtIDEpIC8gNzsKICAgICAgY29uc3QgbWF4UmVmTGVuZ3RoID0gMiAqKiAodGhpcy5taW5TaGlmdCArIHRoaXMuZGVwdGggKiAzKTsKICAgICAgY29uc3QgYXV4TGVuZ3RoID0gYnl0ZXMucmVhZEludDMyTEUoMTIpOwogICAgICBsZXQgYXV4ID0gewogICAgICAgIHJlZklkVG9OYW1lOiBbXSwKICAgICAgICByZWZOYW1lVG9JZDoge30KICAgICAgfTsKICAgICAgaWYgKGF1eExlbmd0aCkgewogICAgICAgIGF1eCA9IHRoaXMucGFyc2VBdXhEYXRhKGJ5dGVzLCAxNiwgYXV4TGVuZ3RoKTsKICAgICAgfQogICAgICBjb25zdCByZWZDb3VudCA9IGJ5dGVzLnJlYWRJbnQzMkxFKDE2ICsgYXV4TGVuZ3RoKTsKICAgICAgbGV0IGZpcnN0RGF0YUxpbmU7CiAgICAgIGxldCBjdXJyT2Zmc2V0ID0gMTYgKyBhdXhMZW5ndGggKyA0OwogICAgICBjb25zdCBpbmRpY2VzID0gbmV3IEFycmF5KHJlZkNvdW50KS5maWxsKDApLm1hcCgoKSA9PiB7CiAgICAgICAgY29uc3QgYmluQ291bnQgPSBieXRlcy5yZWFkSW50MzJMRShjdXJyT2Zmc2V0KTsKICAgICAgICBjdXJyT2Zmc2V0ICs9IDQ7CiAgICAgICAgY29uc3QgYmluSW5kZXggPSB7fTsKICAgICAgICBsZXQgc3RhdHM7CiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBiaW5Db3VudDsgaiArPSAxKSB7CiAgICAgICAgICBjb25zdCBiaW4gPSBieXRlcy5yZWFkVUludDMyTEUoY3Vyck9mZnNldCk7CiAgICAgICAgICBpZiAoYmluID4gdGhpcy5tYXhCaW5OdW1iZXIpIHsKICAgICAgICAgICAgc3RhdHMgPSB0aGlzLnBhcnNlUHNldWRvQmluKGJ5dGVzLCBjdXJyT2Zmc2V0ICsgNCk7CiAgICAgICAgICAgIGN1cnJPZmZzZXQgKz0gNCArIDggKyA0ICsgMTYgKyAxNjsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvbnN0IGxvZmZzZXQgPSBmcm9tQnl0ZXMoYnl0ZXMsIGN1cnJPZmZzZXQgKyA0KTsKICAgICAgICAgICAgZmlyc3REYXRhTGluZSA9IHRoaXMuX2ZpbmRGaXJzdERhdGEoZmlyc3REYXRhTGluZSwgbG9mZnNldCk7CiAgICAgICAgICAgIGNvbnN0IGNodW5rQ291bnQgPSBieXRlcy5yZWFkSW50MzJMRShjdXJyT2Zmc2V0ICsgMTIpOwogICAgICAgICAgICBjdXJyT2Zmc2V0ICs9IDE2OwogICAgICAgICAgICBjb25zdCBjaHVua3MgPSBuZXcgQXJyYXkoY2h1bmtDb3VudCk7CiAgICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgY2h1bmtDb3VudDsgayArPSAxKSB7CiAgICAgICAgICAgICAgY29uc3QgdSA9IGZyb21CeXRlcyhieXRlcywgY3Vyck9mZnNldCk7CiAgICAgICAgICAgICAgY29uc3QgdiA9IGZyb21CeXRlcyhieXRlcywgY3Vyck9mZnNldCArIDgpOwogICAgICAgICAgICAgIGN1cnJPZmZzZXQgKz0gMTY7CiAgICAgICAgICAgICAgY2h1bmtzW2tdID0gbmV3IENodW5rKHUsIHYsIGJpbik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYmluSW5kZXhbYmluXSA9IGNodW5rczsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHsgYmluSW5kZXgsIHN0YXRzIH07CiAgICAgIH0pOwogICAgICByZXR1cm4gewogICAgICAgIC4uLmF1eCwKICAgICAgICBjc2k6IHRydWUsCiAgICAgICAgcmVmQ291bnQsCiAgICAgICAgbWF4QmxvY2tTaXplOiAxIDw8IDE2LAogICAgICAgIGZpcnN0RGF0YUxpbmUsCiAgICAgICAgY3NpVmVyc2lvbiwKICAgICAgICBpbmRpY2VzLAogICAgICAgIGRlcHRoOiB0aGlzLmRlcHRoLAogICAgICAgIG1heEJpbk51bWJlcjogdGhpcy5tYXhCaW5OdW1iZXIsCiAgICAgICAgbWF4UmVmTGVuZ3RoCiAgICAgIH07CiAgICB9CiAgICBwYXJzZVBzZXVkb0JpbihieXRlcywgb2Zmc2V0KSB7CiAgICAgIGNvbnN0IGxpbmVDb3VudCA9IGxvbmdUb051bWJlcihsb25nLmZyb21CeXRlc0xFKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGJ5dGVzLCBvZmZzZXQgKyAyOCwgb2Zmc2V0ICsgMzYpLCB0cnVlKSk7CiAgICAgIHJldHVybiB7IGxpbmVDb3VudCB9OwogICAgfQogICAgYXN5bmMgYmxvY2tzRm9yUmFuZ2UocmVmTmFtZSwgbWluLCBtYXgsIG9wdHMgPSB7fSkgewogICAgICBpZiAobWluIDwgMCkgewogICAgICAgIG1pbiA9IDA7CiAgICAgIH0KICAgICAgY29uc3QgaW5kZXhEYXRhID0gYXdhaXQgdGhpcy5wYXJzZShvcHRzKTsKICAgICAgaWYgKCFpbmRleERhdGEpIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KICAgICAgY29uc3QgcmVmSWQgPSBpbmRleERhdGEucmVmTmFtZVRvSWRbcmVmTmFtZV07CiAgICAgIGNvbnN0IGJhID0gaW5kZXhEYXRhLmluZGljZXNbcmVmSWRdOwogICAgICBpZiAoIWJhKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICAgIGNvbnN0IG92ZXJsYXBwaW5nQmlucyA9IHRoaXMucmVnMmJpbnMobWluLCBtYXgpOwogICAgICBjb25zdCBjaHVua3MgPSBbXTsKICAgICAgZm9yIChjb25zdCBbc3RhcnQsIGVuZF0gb2Ygb3ZlcmxhcHBpbmdCaW5zKSB7CiAgICAgICAgZm9yIChsZXQgYmluID0gc3RhcnQ7IGJpbiA8PSBlbmQ7IGJpbisrKSB7CiAgICAgICAgICBpZiAoYmEuYmluSW5kZXhbYmluXSkgewogICAgICAgICAgICBjb25zdCBiaW5DaHVua3MgPSBiYS5iaW5JbmRleFtiaW5dOwogICAgICAgICAgICBmb3IgKGxldCBjMiA9IDA7IGMyIDwgYmluQ2h1bmtzLmxlbmd0aDsgKytjMikgewogICAgICAgICAgICAgIGNodW5rcy5wdXNoKG5ldyBDaHVuayhiaW5DaHVua3NbYzJdLm1pbnYsIGJpbkNodW5rc1tjMl0ubWF4diwgYmluKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIG9wdGltaXplQ2h1bmtzKGNodW5rcywgbmV3IFZpcnR1YWxPZmZzZXQoMCwgMCkpOwogICAgfQogICAgcmVnMmJpbnMoYmVnLCBlbmQpIHsKICAgICAgYmVnIC09IDE7CiAgICAgIGlmIChiZWcgPCAxKSB7CiAgICAgICAgYmVnID0gMTsKICAgICAgfQogICAgICBpZiAoZW5kID4gMiAqKiA1MCkgewogICAgICAgIGVuZCA9IDIgKiogMzQ7CiAgICAgIH0KICAgICAgZW5kIC09IDE7CiAgICAgIGxldCBsID0gMDsKICAgICAgbGV0IHQgPSAwOwogICAgICBsZXQgcyA9IHRoaXMubWluU2hpZnQgKyB0aGlzLmRlcHRoICogMzsKICAgICAgY29uc3QgYmlucyA9IFtdOwogICAgICBmb3IgKDsgbCA8PSB0aGlzLmRlcHRoOyBzIC09IDMsIHQgKz0gbHNoaWZ0KDEsIGwgKiAzKSwgbCArPSAxKSB7CiAgICAgICAgY29uc3QgYiA9IHQgKyByc2hpZnQoYmVnLCBzKTsKICAgICAgICBjb25zdCBlID0gdCArIHJzaGlmdChlbmQsIHMpOwogICAgICAgIGlmIChlIC0gYiArIGJpbnMubGVuZ3RoID4gdGhpcy5tYXhCaW5OdW1iZXIpIHsKICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgcXVlcnkgJHtiZWd9LSR7ZW5kfSBpcyB0b28gbGFyZ2UgZm9yIGN1cnJlbnQgYmlubmluZyBzY2hlbWUgKHNoaWZ0ICR7dGhpcy5taW5TaGlmdH0sIGRlcHRoICR7dGhpcy5kZXB0aH0pLCB0cnkgYSBzbWFsbGVyIHF1ZXJ5IG9yIGEgY29hcnNlciBpbmRleCBiaW5uaW5nIHNjaGVtZWApOwogICAgICAgIH0KICAgICAgICBiaW5zLnB1c2goW2IsIGVdKTsKICAgICAgfQogICAgICByZXR1cm4gYmluczsKICAgIH0KICB9CiAgZnVuY3Rpb24gdGltZW91dCh0aW1lKSB7CiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHsKICAgICAgc2V0VGltZW91dChyZXNvbHZlLCB0aW1lKTsKICAgIH0pOwogIH0KICBjbGFzcyBUYWJpeEluZGV4ZWRGaWxlIHsKICAgIGNvbnN0cnVjdG9yKHsgcGF0aCwgZmlsZWhhbmRsZTogZmlsZWhhbmRsZTIsIHRiaVBhdGgsIHRiaUZpbGVoYW5kbGUsIGNzaVBhdGgsIGNzaUZpbGVoYW5kbGUsIGNodW5rU2l6ZUxpbWl0ID0gNWU3LCByZW5hbWVSZWZTZXFzID0gKG4pID0+IG4sIGNodW5rQ2FjaGVTaXplID0gNSAqIDIgKiogMjAgfSkgewogICAgICBpZiAoZmlsZWhhbmRsZTIpIHsKICAgICAgICB0aGlzLmZpbGVoYW5kbGUgPSBmaWxlaGFuZGxlMjsKICAgICAgfSBlbHNlIGlmIChwYXRoKSB7CiAgICAgICAgdGhpcy5maWxlaGFuZGxlID0gbmV3IGRpc3QkMS5Mb2NhbEZpbGUocGF0aCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigibXVzdCBwcm92aWRlIGVpdGhlciBmaWxlaGFuZGxlIG9yIHBhdGgiKTsKICAgICAgfQogICAgICBpZiAodGJpRmlsZWhhbmRsZSkgewogICAgICAgIHRoaXMuaW5kZXggPSBuZXcgVGFiaXhJbmRleCh7CiAgICAgICAgICBmaWxlaGFuZGxlOiB0YmlGaWxlaGFuZGxlLAogICAgICAgICAgcmVuYW1lUmVmU2VxcwogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKGNzaUZpbGVoYW5kbGUpIHsKICAgICAgICB0aGlzLmluZGV4ID0gbmV3IENTSSh7CiAgICAgICAgICBmaWxlaGFuZGxlOiBjc2lGaWxlaGFuZGxlLAogICAgICAgICAgcmVuYW1lUmVmU2VxcwogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKHRiaVBhdGgpIHsKICAgICAgICB0aGlzLmluZGV4ID0gbmV3IFRhYml4SW5kZXgoewogICAgICAgICAgZmlsZWhhbmRsZTogbmV3IGRpc3QkMS5Mb2NhbEZpbGUodGJpUGF0aCksCiAgICAgICAgICByZW5hbWVSZWZTZXFzCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAoY3NpUGF0aCkgewogICAgICAgIHRoaXMuaW5kZXggPSBuZXcgQ1NJKHsKICAgICAgICAgIGZpbGVoYW5kbGU6IG5ldyBkaXN0JDEuTG9jYWxGaWxlKGNzaVBhdGgpLAogICAgICAgICAgcmVuYW1lUmVmU2VxcwogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKHBhdGgpIHsKICAgICAgICB0aGlzLmluZGV4ID0gbmV3IFRhYml4SW5kZXgoewogICAgICAgICAgZmlsZWhhbmRsZTogbmV3IGRpc3QkMS5Mb2NhbEZpbGUoYCR7cGF0aH0udGJpYCksCiAgICAgICAgICByZW5hbWVSZWZTZXFzCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigibXVzdCBwcm92aWRlIG9uZSBvZiB0YmlGaWxlaGFuZGxlLCB0YmlQYXRoLCBjc2lGaWxlaGFuZGxlLCBvciBjc2lQYXRoIik7CiAgICAgIH0KICAgICAgdGhpcy5jaHVua1NpemVMaW1pdCA9IGNodW5rU2l6ZUxpbWl0OwogICAgICB0aGlzLnJlbmFtZVJlZlNlcSA9IHJlbmFtZVJlZlNlcXM7CiAgICAgIHRoaXMuY2h1bmtDYWNoZSA9IG5ldyBfZGVmYXVsdCh7CiAgICAgICAgY2FjaGU6IG5ldyBxdWlja0xydSh7CiAgICAgICAgICBtYXhTaXplOiBNYXRoLmZsb29yKGNodW5rQ2FjaGVTaXplIC8gKDEgPDwgMTYpKQogICAgICAgIH0pLAogICAgICAgIGZpbGw6IHRoaXMucmVhZENodW5rLmJpbmQodGhpcykKICAgICAgfSk7CiAgICB9CiAgICBhc3luYyBnZXRMaW5lcyhyZWZOYW1lLCBzdGFydCwgZW5kLCBvcHRzKSB7CiAgICAgIGxldCBzaWduYWw7CiAgICAgIGxldCBvcHRpb25zID0ge307CiAgICAgIGxldCBjYWxsYmFjazsKICAgICAgaWYgKHR5cGVvZiBvcHRzID09PSAidW5kZWZpbmVkIikgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoImxpbmUgY2FsbGJhY2sgbXVzdCBiZSBwcm92aWRlZCIpOwogICAgICB9CiAgICAgIGlmICh0eXBlb2Ygb3B0cyA9PT0gImZ1bmN0aW9uIikgewogICAgICAgIGNhbGxiYWNrID0gb3B0czsKICAgICAgfSBlbHNlIHsKICAgICAgICBvcHRpb25zID0gb3B0czsKICAgICAgICBjYWxsYmFjayA9IG9wdHMubGluZUNhbGxiYWNrOwogICAgICB9CiAgICAgIGlmIChyZWZOYW1lID09PSB2b2lkIDApIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJtdXN0IHByb3ZpZGUgYSByZWZlcmVuY2Ugc2VxdWVuY2UgbmFtZSIpOwogICAgICB9CiAgICAgIGlmICghY2FsbGJhY2spIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJsaW5lIGNhbGxiYWNrIG11c3QgYmUgcHJvdmlkZWQiKTsKICAgICAgfQogICAgICBjb25zdCBtZXRhZGF0YSA9IGF3YWl0IHRoaXMuaW5kZXguZ2V0TWV0YWRhdGEob3B0aW9ucyk7CiAgICAgIGNoZWNrQWJvcnRTaWduYWwoc2lnbmFsKTsKICAgICAgaWYgKCFzdGFydCkgewogICAgICAgIHN0YXJ0ID0gMDsKICAgICAgfQogICAgICBpZiAoIWVuZCkgewogICAgICAgIGVuZCA9IG1ldGFkYXRhLm1heFJlZkxlbmd0aDsKICAgICAgfQogICAgICBpZiAoIShzdGFydCA8PSBlbmQpKSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiaW52YWxpZCBzdGFydCBhbmQgZW5kIGNvb3JkaW5hdGVzLiBzdGFydCBtdXN0IGJlIGxlc3MgdGhhbiBvciBlcXVhbCB0byBlbmQiKTsKICAgICAgfQogICAgICBpZiAoc3RhcnQgPT09IGVuZCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBjb25zdCBjaHVua3MgPSBhd2FpdCB0aGlzLmluZGV4LmJsb2Nrc0ZvclJhbmdlKHJlZk5hbWUsIHN0YXJ0LCBlbmQsIG9wdGlvbnMpOwogICAgICBjaGVja0Fib3J0U2lnbmFsKHNpZ25hbCk7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2h1bmtzLmxlbmd0aDsgaSArPSAxKSB7CiAgICAgICAgY29uc3Qgc2l6ZSA9IGNodW5rc1tpXS5mZXRjaGVkU2l6ZSgpOwogICAgICAgIGlmIChzaXplID4gdGhpcy5jaHVua1NpemVMaW1pdCkgewogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUb28gbXVjaCBkYXRhLiBDaHVuayBzaXplICR7c2l6ZS50b0xvY2FsZVN0cmluZygpfSBieXRlcyBleGNlZWRzIGNodW5rU2l6ZUxpbWl0IG9mICR7dGhpcy5jaHVua1NpemVMaW1pdC50b0xvY2FsZVN0cmluZygpfS5gKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgbGV0IGxhc3QgPSBEYXRlLm5vdygpOwogICAgICBmb3IgKGxldCBjaHVua051bSA9IDA7IGNodW5rTnVtIDwgY2h1bmtzLmxlbmd0aDsgY2h1bmtOdW0gKz0gMSkgewogICAgICAgIGxldCBwcmV2aW91c1N0YXJ0Q29vcmRpbmF0ZTsKICAgICAgICBjb25zdCBjMiA9IGNodW5rc1tjaHVua051bV07CiAgICAgICAgY29uc3QgeyBidWZmZXIsIGNwb3NpdGlvbnMsIGRwb3NpdGlvbnMgfSA9IGF3YWl0IHRoaXMuY2h1bmtDYWNoZS5nZXQoYzIudG9TdHJpbmcoKSwgYzIsIHNpZ25hbCk7CiAgICAgICAgY29uc3QgbGluZXMgPSAodHlwZW9mIFRleHREZWNvZGVyICE9PSAidW5kZWZpbmVkIiA/IG5ldyBUZXh0RGVjb2RlcigidXRmLTgiKS5kZWNvZGUoYnVmZmVyKSA6IGJ1ZmZlci50b1N0cmluZygpKS5zcGxpdCgiXG4iKTsKICAgICAgICBsaW5lcy5wb3AoKTsKICAgICAgICBjaGVja0Fib3J0U2lnbmFsKHNpZ25hbCk7CiAgICAgICAgbGV0IGJsb2NrU3RhcnQgPSBjMi5taW52LmRhdGFQb3NpdGlvbjsKICAgICAgICBsZXQgcG9zOwogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpICs9IDEpIHsKICAgICAgICAgIGNvbnN0IGxpbmUgPSBsaW5lc1tpXTsKICAgICAgICAgIGZvciAocG9zID0gMDsgYmxvY2tTdGFydCA+PSBkcG9zaXRpb25zW3Bvc107IHBvcyArPSAxKSB7CiAgICAgICAgICB9CiAgICAgICAgICBjb25zdCB7IHN0YXJ0Q29vcmRpbmF0ZSwgb3ZlcmxhcHMgfSA9IHRoaXMuY2hlY2tMaW5lKG1ldGFkYXRhLCByZWZOYW1lLCBzdGFydCwgZW5kLCBsaW5lKTsKICAgICAgICAgIGlmIChwcmV2aW91c1N0YXJ0Q29vcmRpbmF0ZSAhPT0gdm9pZCAwICYmIHN0YXJ0Q29vcmRpbmF0ZSAhPT0gdm9pZCAwICYmIHByZXZpb3VzU3RhcnRDb29yZGluYXRlID4gc3RhcnRDb29yZGluYXRlKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTGluZXMgbm90IHNvcnRlZCBieSBzdGFydCBjb29yZGluYXRlICgke3ByZXZpb3VzU3RhcnRDb29yZGluYXRlfSA+ICR7c3RhcnRDb29yZGluYXRlfSksIHRoaXMgZmlsZSBpcyBub3QgdXNhYmxlIHdpdGggVGFiaXguYCk7CiAgICAgICAgICB9CiAgICAgICAgICBwcmV2aW91c1N0YXJ0Q29vcmRpbmF0ZSA9IHN0YXJ0Q29vcmRpbmF0ZTsKICAgICAgICAgIGlmIChvdmVybGFwcykgewogICAgICAgICAgICBjYWxsYmFjayhsaW5lLnRyaW0oKSwgY3Bvc2l0aW9uc1twb3NdICogKDEgPDwgOCkgKyAoYmxvY2tTdGFydCAtIGRwb3NpdGlvbnNbcG9zXSkpOwogICAgICAgICAgfSBlbHNlIGlmIChzdGFydENvb3JkaW5hdGUgIT09IHZvaWQgMCAmJiBzdGFydENvb3JkaW5hdGUgPj0gZW5kKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIGJsb2NrU3RhcnQgKz0gbGluZS5sZW5ndGggKyAxOwogICAgICAgICAgaWYgKGxhc3QgLSBEYXRlLm5vdygpID4gNTAwKSB7CiAgICAgICAgICAgIGxhc3QgPSBEYXRlLm5vdygpOwogICAgICAgICAgICBjaGVja0Fib3J0U2lnbmFsKHNpZ25hbCk7CiAgICAgICAgICAgIGF3YWl0IHRpbWVvdXQoMSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBhc3luYyBnZXRNZXRhZGF0YShvcHRzID0ge30pIHsKICAgICAgcmV0dXJuIHRoaXMuaW5kZXguZ2V0TWV0YWRhdGEob3B0cyk7CiAgICB9CiAgICBhc3luYyBnZXRIZWFkZXJCdWZmZXIob3B0cyA9IHt9KSB7CiAgICAgIGNvbnN0IHsgZmlyc3REYXRhTGluZSwgbWV0YUNoYXIsIG1heEJsb2NrU2l6ZSB9ID0gYXdhaXQgdGhpcy5nZXRNZXRhZGF0YShvcHRzKTsKICAgICAgY2hlY2tBYm9ydFNpZ25hbChvcHRzLnNpZ25hbCk7CiAgICAgIGNvbnN0IG1heEZldGNoID0gZmlyc3REYXRhTGluZSAmJiBmaXJzdERhdGFMaW5lLmJsb2NrUG9zaXRpb24gPyBmaXJzdERhdGFMaW5lLmJsb2NrUG9zaXRpb24gKyBtYXhCbG9ja1NpemUgOiBtYXhCbG9ja1NpemU7CiAgICAgIGxldCBieXRlcyA9IGF3YWl0IHRoaXMuX3JlYWRSZWdpb24oMCwgbWF4RmV0Y2gsIG9wdHMpOwogICAgICBjaGVja0Fib3J0U2lnbmFsKG9wdHMuc2lnbmFsKTsKICAgICAgdHJ5IHsKICAgICAgICBieXRlcyA9IGF3YWl0IGRpc3QudW56aXAoYnl0ZXMpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgY29uc29sZS5lcnJvcihlKTsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGVycm9yIGRlY29tcHJlc3NpbmcgYmxvY2sgJHtlLmNvZGV9IGF0IDAgKGxlbmd0aCAke21heEZldGNofSkgJHtlfWApOwogICAgICB9CiAgICAgIGlmIChtZXRhQ2hhcikgewogICAgICAgIGxldCBsYXN0TmV3bGluZSA9IC0xOwogICAgICAgIGNvbnN0IG5ld2xpbmVCeXRlID0gIlxuIi5jaGFyQ29kZUF0KDApOwogICAgICAgIGNvbnN0IG1ldGFCeXRlID0gbWV0YUNoYXIuY2hhckNvZGVBdCgwKTsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ5dGVzLmxlbmd0aDsgaSArPSAxKSB7CiAgICAgICAgICBpZiAoaSA9PT0gbGFzdE5ld2xpbmUgKyAxICYmIGJ5dGVzW2ldICE9PSBtZXRhQnl0ZSkgewogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChieXRlc1tpXSA9PT0gbmV3bGluZUJ5dGUpIHsKICAgICAgICAgICAgbGFzdE5ld2xpbmUgPSBpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBieXRlcyA9IGJ5dGVzLnNsaWNlKDAsIGxhc3ROZXdsaW5lICsgMSk7CiAgICAgIH0KICAgICAgcmV0dXJuIGJ5dGVzOwogICAgfQogICAgYXN5bmMgZ2V0SGVhZGVyKG9wdHMgPSB7fSkgewogICAgICBjb25zdCBieXRlcyA9IGF3YWl0IHRoaXMuZ2V0SGVhZGVyQnVmZmVyKG9wdHMpOwogICAgICBjaGVja0Fib3J0U2lnbmFsKG9wdHMuc2lnbmFsKTsKICAgICAgcmV0dXJuIGJ5dGVzLnRvU3RyaW5nKCJ1dGY4Iik7CiAgICB9CiAgICBhc3luYyBnZXRSZWZlcmVuY2VTZXF1ZW5jZU5hbWVzKG9wdHMgPSB7fSkgewogICAgICBjb25zdCBtZXRhZGF0YSA9IGF3YWl0IHRoaXMuZ2V0TWV0YWRhdGEob3B0cyk7CiAgICAgIHJldHVybiBtZXRhZGF0YS5yZWZJZFRvTmFtZTsKICAgIH0KICAgIGNoZWNrTGluZSh7IGNvbHVtbk51bWJlcnMsIG1ldGFDaGFyLCBjb29yZGluYXRlVHlwZSwgZm9ybWF0IH0sIHJlZ2lvblJlZk5hbWUsIHJlZ2lvblN0YXJ0LCByZWdpb25FbmQsIGxpbmUpIHsKICAgICAgaWYgKGxpbmUuY2hhckF0KDApID09PSBtZXRhQ2hhcikgewogICAgICAgIHJldHVybiB7IG92ZXJsYXBzOiBmYWxzZSB9OwogICAgICB9CiAgICAgIGxldCB7IHJlZiwgc3RhcnQsIGVuZCB9ID0gY29sdW1uTnVtYmVyczsKICAgICAgaWYgKCFyZWYpIHsKICAgICAgICByZWYgPSAwOwogICAgICB9CiAgICAgIGlmICghc3RhcnQpIHsKICAgICAgICBzdGFydCA9IDA7CiAgICAgIH0KICAgICAgaWYgKCFlbmQpIHsKICAgICAgICBlbmQgPSAwOwogICAgICB9CiAgICAgIGlmIChmb3JtYXQgPT09ICJWQ0YiKSB7CiAgICAgICAgZW5kID0gODsKICAgICAgfQogICAgICBjb25zdCBtYXhDb2x1bW4gPSBNYXRoLm1heChyZWYsIHN0YXJ0LCBlbmQpOwogICAgICBsZXQgY3VycmVudENvbHVtbk51bWJlciA9IDE7CiAgICAgIGxldCBjdXJyZW50Q29sdW1uU3RhcnQgPSAwOwogICAgICBsZXQgcmVmU2VxID0gIiI7CiAgICAgIGxldCBzdGFydENvb3JkaW5hdGUgPSAtSW5maW5pdHk7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZS5sZW5ndGggKyAxOyBpICs9IDEpIHsKICAgICAgICBpZiAobGluZVtpXSA9PT0gIgkiIHx8IGkgPT09IGxpbmUubGVuZ3RoKSB7CiAgICAgICAgICBpZiAoY3VycmVudENvbHVtbk51bWJlciA9PT0gcmVmKSB7CiAgICAgICAgICAgIGlmICh0aGlzLnJlbmFtZVJlZlNlcShsaW5lLnNsaWNlKGN1cnJlbnRDb2x1bW5TdGFydCwgaSkpICE9PSByZWdpb25SZWZOYW1lKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHsgb3ZlcmxhcHM6IGZhbHNlIH07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudENvbHVtbk51bWJlciA9PT0gc3RhcnQpIHsKICAgICAgICAgICAgc3RhcnRDb29yZGluYXRlID0gcGFyc2VJbnQobGluZS5zbGljZShjdXJyZW50Q29sdW1uU3RhcnQsIGkpLCAxMCk7CiAgICAgICAgICAgIGlmIChjb29yZGluYXRlVHlwZSA9PT0gIjEtYmFzZWQtY2xvc2VkIikgewogICAgICAgICAgICAgIHN0YXJ0Q29vcmRpbmF0ZSAtPSAxOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChzdGFydENvb3JkaW5hdGUgPj0gcmVnaW9uRW5kKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHsgc3RhcnRDb29yZGluYXRlLCBvdmVybGFwczogZmFsc2UgfTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoZW5kID09PSAwIHx8IGVuZCA9PT0gc3RhcnQpIHsKICAgICAgICAgICAgICBpZiAoc3RhcnRDb29yZGluYXRlICsgMSA8PSByZWdpb25TdGFydCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHsgc3RhcnRDb29yZGluYXRlLCBvdmVybGFwczogZmFsc2UgfTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSBpZiAoZm9ybWF0ID09PSAiVkNGIiAmJiBjdXJyZW50Q29sdW1uTnVtYmVyID09PSA0KSB7CiAgICAgICAgICAgIHJlZlNlcSA9IGxpbmUuc2xpY2UoY3VycmVudENvbHVtblN0YXJ0LCBpKTsKICAgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudENvbHVtbk51bWJlciA9PT0gZW5kKSB7CiAgICAgICAgICAgIGxldCBlbmRDb29yZGluYXRlOwogICAgICAgICAgICBpZiAoZm9ybWF0ID09PSAiVkNGIikgewogICAgICAgICAgICAgIGVuZENvb3JkaW5hdGUgPSB0aGlzLl9nZXRWY2ZFbmQoc3RhcnRDb29yZGluYXRlLCByZWZTZXEsIGxpbmUuc2xpY2UoY3VycmVudENvbHVtblN0YXJ0LCBpKSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgZW5kQ29vcmRpbmF0ZSA9IHBhcnNlSW50KGxpbmUuc2xpY2UoY3VycmVudENvbHVtblN0YXJ0LCBpKSwgMTApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChlbmRDb29yZGluYXRlIDw9IHJlZ2lvblN0YXJ0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHsgb3ZlcmxhcHM6IGZhbHNlIH07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGN1cnJlbnRDb2x1bW5TdGFydCA9IGkgKyAxOwogICAgICAgICAgY3VycmVudENvbHVtbk51bWJlciArPSAxOwogICAgICAgICAgaWYgKGN1cnJlbnRDb2x1bW5OdW1iZXIgPiBtYXhDb2x1bW4pIHsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiB7IHN0YXJ0Q29vcmRpbmF0ZSwgb3ZlcmxhcHM6IHRydWUgfTsKICAgIH0KICAgIF9nZXRWY2ZFbmQoc3RhcnRDb29yZGluYXRlLCByZWZTZXEsIGluZm8pIHsKICAgICAgbGV0IGVuZENvb3JkaW5hdGUgPSBzdGFydENvb3JkaW5hdGUgKyByZWZTZXEubGVuZ3RoOwogICAgICBjb25zdCBpc1RSQSA9IGluZm8uaW5kZXhPZigiU1ZUWVBFPVRSQSIpICE9PSAtMTsKICAgICAgaWYgKGluZm9bMF0gIT09ICIuIiAmJiAhaXNUUkEpIHsKICAgICAgICBsZXQgcHJldkNoYXIgPSAiOyI7CiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBpbmZvLmxlbmd0aDsgaiArPSAxKSB7CiAgICAgICAgICBpZiAocHJldkNoYXIgPT09ICI7IiAmJiBpbmZvLnNsaWNlKGosIGogKyA0KSA9PT0gIkVORD0iKSB7CiAgICAgICAgICAgIGxldCB2YWx1ZUVuZCA9IGluZm8uaW5kZXhPZigiOyIsIGopOwogICAgICAgICAgICBpZiAodmFsdWVFbmQgPT09IC0xKSB7CiAgICAgICAgICAgICAgdmFsdWVFbmQgPSBpbmZvLmxlbmd0aDsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbmRDb29yZGluYXRlID0gcGFyc2VJbnQoaW5mby5zbGljZShqICsgNCwgdmFsdWVFbmQpLCAxMCk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgcHJldkNoYXIgPSBpbmZvW2pdOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChpc1RSQSkgewogICAgICAgIHJldHVybiBzdGFydENvb3JkaW5hdGUgKyAxOwogICAgICB9CiAgICAgIHJldHVybiBlbmRDb29yZGluYXRlOwogICAgfQogICAgYXN5bmMgbGluZUNvdW50KHJlZk5hbWUsIG9wdHMgPSB7fSkgewogICAgICByZXR1cm4gdGhpcy5pbmRleC5saW5lQ291bnQocmVmTmFtZSwgb3B0cyk7CiAgICB9CiAgICBhc3luYyBfcmVhZFJlZ2lvbihwb3NpdGlvbiwgY29tcHJlc3NlZFNpemUsIG9wdHMgPSB7fSkgewogICAgICBjb25zdCB7IGJ5dGVzUmVhZCwgYnVmZmVyIH0gPSBhd2FpdCB0aGlzLmZpbGVoYW5kbGUucmVhZChCdWZmZXIuYWxsb2MoY29tcHJlc3NlZFNpemUpLCAwLCBjb21wcmVzc2VkU2l6ZSwgcG9zaXRpb24sIG9wdHMpOwogICAgICByZXR1cm4gYnl0ZXNSZWFkIDwgY29tcHJlc3NlZFNpemUgPyBidWZmZXIuc2xpY2UoMCwgYnl0ZXNSZWFkKSA6IGJ1ZmZlcjsKICAgIH0KICAgIGFzeW5jIHJlYWRDaHVuayhjaHVuaywgb3B0cyA9IHt9KSB7CiAgICAgIGNvbnN0IGNvbXByZXNzZWREYXRhID0gYXdhaXQgdGhpcy5fcmVhZFJlZ2lvbihjaHVuay5taW52LmJsb2NrUG9zaXRpb24sIGNodW5rLmZldGNoZWRTaXplKCksIG9wdHMpOwogICAgICB0cnkgewogICAgICAgIHJldHVybiBkaXN0LnVuemlwQ2h1bmtTbGljZShjb21wcmVzc2VkRGF0YSwgY2h1bmspOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBlcnJvciBkZWNvbXByZXNzaW5nIGNodW5rICR7Y2h1bmsudG9TdHJpbmcoKX0gJHtlfWApOwogICAgICB9CiAgICB9CiAgfQogIHZhciB3b3JrZXIgPSB7fTsKICB2YXIgaXNPYnNlcnZhYmxlID0gKHZhbHVlKSA9PiB7CiAgICBpZiAoIXZhbHVlKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIGlmICh0eXBlb2YgU3ltYm9sLm9ic2VydmFibGUgPT09ICJzeW1ib2wiICYmIHR5cGVvZiB2YWx1ZVtTeW1ib2wub2JzZXJ2YWJsZV0gPT09ICJmdW5jdGlvbiIpIHsKICAgICAgcmV0dXJuIHZhbHVlID09PSB2YWx1ZVtTeW1ib2wub2JzZXJ2YWJsZV0oKTsKICAgIH0KICAgIGlmICh0eXBlb2YgdmFsdWVbIkBAb2JzZXJ2YWJsZSJdID09PSAiZnVuY3Rpb24iKSB7CiAgICAgIHJldHVybiB2YWx1ZSA9PT0gdmFsdWVbIkBAb2JzZXJ2YWJsZSJdKCk7CiAgICB9CiAgICByZXR1cm4gZmFsc2U7CiAgfTsKICB2YXIgY29tbW9uID0ge307CiAgdmFyIHNlcmlhbGl6ZXJzID0ge307CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlcmlhbGl6ZXJzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CiAgc2VyaWFsaXplcnMuRGVmYXVsdFNlcmlhbGl6ZXIgPSBzZXJpYWxpemVycy5leHRlbmRTZXJpYWxpemVyID0gdm9pZCAwOwogIGZ1bmN0aW9uIGV4dGVuZFNlcmlhbGl6ZXIoZXh0ZW5kLCBpbXBsZW1lbnRhdGlvbikgewogICAgY29uc3QgZmFsbGJhY2tEZXNlcmlhbGl6ZXIgPSBleHRlbmQuZGVzZXJpYWxpemUuYmluZChleHRlbmQpOwogICAgY29uc3QgZmFsbGJhY2tTZXJpYWxpemVyID0gZXh0ZW5kLnNlcmlhbGl6ZS5iaW5kKGV4dGVuZCk7CiAgICByZXR1cm4gewogICAgICBkZXNlcmlhbGl6ZShtZXNzYWdlKSB7CiAgICAgICAgcmV0dXJuIGltcGxlbWVudGF0aW9uLmRlc2VyaWFsaXplKG1lc3NhZ2UsIGZhbGxiYWNrRGVzZXJpYWxpemVyKTsKICAgICAgfSwKICAgICAgc2VyaWFsaXplKGlucHV0KSB7CiAgICAgICAgcmV0dXJuIGltcGxlbWVudGF0aW9uLnNlcmlhbGl6ZShpbnB1dCwgZmFsbGJhY2tTZXJpYWxpemVyKTsKICAgICAgfQogICAgfTsKICB9CiAgc2VyaWFsaXplcnMuZXh0ZW5kU2VyaWFsaXplciA9IGV4dGVuZFNlcmlhbGl6ZXI7CiAgY29uc3QgRGVmYXVsdEVycm9yU2VyaWFsaXplciA9IHsKICAgIGRlc2VyaWFsaXplKG1lc3NhZ2UpIHsKICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oRXJyb3IobWVzc2FnZS5tZXNzYWdlKSwgewogICAgICAgIG5hbWU6IG1lc3NhZ2UubmFtZSwKICAgICAgICBzdGFjazogbWVzc2FnZS5zdGFjawogICAgICB9KTsKICAgIH0sCiAgICBzZXJpYWxpemUoZXJyb3IpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBfX2Vycm9yX21hcmtlcjogIiQkZXJyb3IiLAogICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsCiAgICAgICAgbmFtZTogZXJyb3IubmFtZSwKICAgICAgICBzdGFjazogZXJyb3Iuc3RhY2sKICAgICAgfTsKICAgIH0KICB9OwogIGNvbnN0IGlzU2VyaWFsaXplZEVycm9yID0gKHRoaW5nKSA9PiB0aGluZyAmJiB0eXBlb2YgdGhpbmcgPT09ICJvYmplY3QiICYmICJfX2Vycm9yX21hcmtlciIgaW4gdGhpbmcgJiYgdGhpbmcuX19lcnJvcl9tYXJrZXIgPT09ICIkJGVycm9yIjsKICBzZXJpYWxpemVycy5EZWZhdWx0U2VyaWFsaXplciA9IHsKICAgIGRlc2VyaWFsaXplKG1lc3NhZ2UpIHsKICAgICAgaWYgKGlzU2VyaWFsaXplZEVycm9yKG1lc3NhZ2UpKSB7CiAgICAgICAgcmV0dXJuIERlZmF1bHRFcnJvclNlcmlhbGl6ZXIuZGVzZXJpYWxpemUobWVzc2FnZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7CiAgICAgIH0KICAgIH0sCiAgICBzZXJpYWxpemUoaW5wdXQpIHsKICAgICAgaWYgKGlucHV0IGluc3RhbmNlb2YgRXJyb3IpIHsKICAgICAgICByZXR1cm4gRGVmYXVsdEVycm9yU2VyaWFsaXplci5zZXJpYWxpemUoaW5wdXQpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBpbnB1dDsKICAgICAgfQogICAgfQogIH07CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvbW1vbiwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwogIGNvbW1vbi5zZXJpYWxpemUgPSBjb21tb24uZGVzZXJpYWxpemUgPSBjb21tb24ucmVnaXN0ZXJTZXJpYWxpemVyID0gdm9pZCAwOwogIGNvbnN0IHNlcmlhbGl6ZXJzXzEgPSBzZXJpYWxpemVyczsKICBsZXQgcmVnaXN0ZXJlZFNlcmlhbGl6ZXIgPSBzZXJpYWxpemVyc18xLkRlZmF1bHRTZXJpYWxpemVyOwogIGZ1bmN0aW9uIHJlZ2lzdGVyU2VyaWFsaXplcihzZXJpYWxpemVyKSB7CiAgICByZWdpc3RlcmVkU2VyaWFsaXplciA9IHNlcmlhbGl6ZXJzXzEuZXh0ZW5kU2VyaWFsaXplcihyZWdpc3RlcmVkU2VyaWFsaXplciwgc2VyaWFsaXplcik7CiAgfQogIGNvbW1vbi5yZWdpc3RlclNlcmlhbGl6ZXIgPSByZWdpc3RlclNlcmlhbGl6ZXI7CiAgZnVuY3Rpb24gZGVzZXJpYWxpemUobWVzc2FnZSkgewogICAgcmV0dXJuIHJlZ2lzdGVyZWRTZXJpYWxpemVyLmRlc2VyaWFsaXplKG1lc3NhZ2UpOwogIH0KICBjb21tb24uZGVzZXJpYWxpemUgPSBkZXNlcmlhbGl6ZTsKICBmdW5jdGlvbiBzZXJpYWxpemUoaW5wdXQpIHsKICAgIHJldHVybiByZWdpc3RlcmVkU2VyaWFsaXplci5zZXJpYWxpemUoaW5wdXQpOwogIH0KICBjb21tb24uc2VyaWFsaXplID0gc2VyaWFsaXplOwogIHZhciB0cmFuc2ZlcmFibGUgPSB7fTsKICB2YXIgc3ltYm9scyA9IHt9OwogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzeW1ib2xzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CiAgc3ltYm9scy4kd29ya2VyID0gc3ltYm9scy4kdHJhbnNmZXJhYmxlID0gc3ltYm9scy4kdGVybWluYXRlID0gc3ltYm9scy4kZXZlbnRzID0gc3ltYm9scy4kZXJyb3JzID0gdm9pZCAwOwogIHN5bWJvbHMuJGVycm9ycyA9IFN5bWJvbCgidGhyZWFkLmVycm9ycyIpOwogIHN5bWJvbHMuJGV2ZW50cyA9IFN5bWJvbCgidGhyZWFkLmV2ZW50cyIpOwogIHN5bWJvbHMuJHRlcm1pbmF0ZSA9IFN5bWJvbCgidGhyZWFkLnRlcm1pbmF0ZSIpOwogIHN5bWJvbHMuJHRyYW5zZmVyYWJsZSA9IFN5bWJvbCgidGhyZWFkLnRyYW5zZmVyYWJsZSIpOwogIHN5bWJvbHMuJHdvcmtlciA9IFN5bWJvbCgidGhyZWFkLndvcmtlciIpOwogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0cmFuc2ZlcmFibGUsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKICB0cmFuc2ZlcmFibGUuVHJhbnNmZXIgPSB0cmFuc2ZlcmFibGUuaXNUcmFuc2ZlckRlc2NyaXB0b3IgPSB2b2lkIDA7CiAgY29uc3Qgc3ltYm9sc18xID0gc3ltYm9sczsKICBmdW5jdGlvbiBpc1RyYW5zZmVyYWJsZSh0aGluZykgewogICAgaWYgKCF0aGluZyB8fCB0eXBlb2YgdGhpbmcgIT09ICJvYmplY3QiKQogICAgICByZXR1cm4gZmFsc2U7CiAgICByZXR1cm4gdHJ1ZTsKICB9CiAgZnVuY3Rpb24gaXNUcmFuc2ZlckRlc2NyaXB0b3IodGhpbmcpIHsKICAgIHJldHVybiB0aGluZyAmJiB0eXBlb2YgdGhpbmcgPT09ICJvYmplY3QiICYmIHRoaW5nW3N5bWJvbHNfMS4kdHJhbnNmZXJhYmxlXTsKICB9CiAgdHJhbnNmZXJhYmxlLmlzVHJhbnNmZXJEZXNjcmlwdG9yID0gaXNUcmFuc2ZlckRlc2NyaXB0b3I7CiAgZnVuY3Rpb24gVHJhbnNmZXIkMShwYXlsb2FkLCB0cmFuc2ZlcmFibGVzKSB7CiAgICBpZiAoIXRyYW5zZmVyYWJsZXMpIHsKICAgICAgaWYgKCFpc1RyYW5zZmVyYWJsZShwYXlsb2FkKSkKICAgICAgICB0aHJvdyBFcnJvcigpOwogICAgICB0cmFuc2ZlcmFibGVzID0gW3BheWxvYWRdOwogICAgfQogICAgcmV0dXJuIHsKICAgICAgW3N5bWJvbHNfMS4kdHJhbnNmZXJhYmxlXTogdHJ1ZSwKICAgICAgc2VuZDogcGF5bG9hZCwKICAgICAgdHJhbnNmZXJhYmxlcwogICAgfTsKICB9CiAgdHJhbnNmZXJhYmxlLlRyYW5zZmVyID0gVHJhbnNmZXIkMTsKICB2YXIgbWVzc2FnZXMgPSB7fTsKICAoZnVuY3Rpb24oZXhwb3J0czIpIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzMiwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwogICAgZXhwb3J0czIuV29ya2VyTWVzc2FnZVR5cGUgPSBleHBvcnRzMi5NYXN0ZXJNZXNzYWdlVHlwZSA9IHZvaWQgMDsKICAgIChmdW5jdGlvbihNYXN0ZXJNZXNzYWdlVHlwZSkgewogICAgICBNYXN0ZXJNZXNzYWdlVHlwZVsiY2FuY2VsIl0gPSAiY2FuY2VsIjsKICAgICAgTWFzdGVyTWVzc2FnZVR5cGVbInJ1biJdID0gInJ1biI7CiAgICB9KShleHBvcnRzMi5NYXN0ZXJNZXNzYWdlVHlwZSB8fCAoZXhwb3J0czIuTWFzdGVyTWVzc2FnZVR5cGUgPSB7fSkpOwogICAgKGZ1bmN0aW9uKFdvcmtlck1lc3NhZ2VUeXBlKSB7CiAgICAgIFdvcmtlck1lc3NhZ2VUeXBlWyJlcnJvciJdID0gImVycm9yIjsKICAgICAgV29ya2VyTWVzc2FnZVR5cGVbImluaXQiXSA9ICJpbml0IjsKICAgICAgV29ya2VyTWVzc2FnZVR5cGVbInJlc3VsdCJdID0gInJlc3VsdCI7CiAgICAgIFdvcmtlck1lc3NhZ2VUeXBlWyJydW5uaW5nIl0gPSAicnVubmluZyI7CiAgICAgIFdvcmtlck1lc3NhZ2VUeXBlWyJ1bmNhdWdodEVycm9yIl0gPSAidW5jYXVnaHRFcnJvciI7CiAgICB9KShleHBvcnRzMi5Xb3JrZXJNZXNzYWdlVHlwZSB8fCAoZXhwb3J0czIuV29ya2VyTWVzc2FnZVR5cGUgPSB7fSkpOwogIH0pKG1lc3NhZ2VzKTsKICB2YXIgaW1wbGVtZW50YXRpb25fYnJvd3NlciA9IHt9OwogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpbXBsZW1lbnRhdGlvbl9icm93c2VyLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CiAgY29uc3QgaXNXb3JrZXJSdW50aW1lID0gZnVuY3Rpb24gaXNXb3JrZXJSdW50aW1lMigpIHsKICAgIGNvbnN0IGlzV2luZG93Q29udGV4dCA9IHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIiAmJiB0eXBlb2YgV2luZG93ICE9PSAidW5kZWZpbmVkIiAmJiBzZWxmIGluc3RhbmNlb2YgV2luZG93OwogICAgcmV0dXJuIHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIiAmJiBzZWxmLnBvc3RNZXNzYWdlICYmICFpc1dpbmRvd0NvbnRleHQgPyB0cnVlIDogZmFsc2U7CiAgfTsKICBjb25zdCBwb3N0TWVzc2FnZVRvTWFzdGVyID0gZnVuY3Rpb24gcG9zdE1lc3NhZ2VUb01hc3RlcjIoZGF0YSwgdHJhbnNmZXJMaXN0KSB7CiAgICBzZWxmLnBvc3RNZXNzYWdlKGRhdGEsIHRyYW5zZmVyTGlzdCk7CiAgfTsKICBjb25zdCBzdWJzY3JpYmVUb01hc3Rlck1lc3NhZ2VzID0gZnVuY3Rpb24gc3Vic2NyaWJlVG9NYXN0ZXJNZXNzYWdlczIob25NZXNzYWdlKSB7CiAgICBjb25zdCBtZXNzYWdlSGFuZGxlciA9IChtZXNzYWdlRXZlbnQpID0+IHsKICAgICAgb25NZXNzYWdlKG1lc3NhZ2VFdmVudC5kYXRhKTsKICAgIH07CiAgICBjb25zdCB1bnN1YnNjcmliZSA9ICgpID0+IHsKICAgICAgc2VsZi5yZW1vdmVFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwgbWVzc2FnZUhhbmRsZXIpOwogICAgfTsKICAgIHNlbGYuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsIG1lc3NhZ2VIYW5kbGVyKTsKICAgIHJldHVybiB1bnN1YnNjcmliZTsKICB9OwogIGltcGxlbWVudGF0aW9uX2Jyb3dzZXIuZGVmYXVsdCA9IHsKICAgIGlzV29ya2VyUnVudGltZSwKICAgIHBvc3RNZXNzYWdlVG9NYXN0ZXIsCiAgICBzdWJzY3JpYmVUb01hc3Rlck1lc3NhZ2VzCiAgfTsKICAoZnVuY3Rpb24oZXhwb3J0czIpIHsKICAgIHZhciBfX2F3YWl0ZXIgPSBjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2F3YWl0ZXIgfHwgZnVuY3Rpb24odGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7CiAgICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7CiAgICAgICAgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24ocmVzb2x2ZSkgewogICAgICAgICAgcmVzb2x2ZSh2YWx1ZSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsKICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgcmVqZWN0KGUpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgc3RlcChnZW5lcmF0b3JbInRocm93Il0odmFsdWUpKTsKICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgcmVqZWN0KGUpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgewogICAgICAgICAgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7CiAgICAgICAgfQogICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTsKICAgICAgfSk7CiAgICB9OwogICAgdmFyIF9faW1wb3J0RGVmYXVsdDIgPSBjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2ltcG9ydERlZmF1bHQgfHwgZnVuY3Rpb24obW9kKSB7CiAgICAgIHJldHVybiBtb2QgJiYgbW9kLl9fZXNNb2R1bGUgPyBtb2QgOiB7ICJkZWZhdWx0IjogbW9kIH07CiAgICB9OwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMyLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CiAgICBleHBvcnRzMi5leHBvc2UgPSBleHBvcnRzMi5pc1dvcmtlclJ1bnRpbWUgPSBleHBvcnRzMi5UcmFuc2ZlciA9IGV4cG9ydHMyLnJlZ2lzdGVyU2VyaWFsaXplciA9IHZvaWQgMDsKICAgIGNvbnN0IGlzX29ic2VydmFibGVfMSA9IF9faW1wb3J0RGVmYXVsdDIoaXNPYnNlcnZhYmxlKTsKICAgIGNvbnN0IGNvbW1vbl8xID0gY29tbW9uOwogICAgY29uc3QgdHJhbnNmZXJhYmxlXzEgPSB0cmFuc2ZlcmFibGU7CiAgICBjb25zdCBtZXNzYWdlc18xID0gbWVzc2FnZXM7CiAgICBjb25zdCBpbXBsZW1lbnRhdGlvbl8xID0gX19pbXBvcnREZWZhdWx0MihpbXBsZW1lbnRhdGlvbl9icm93c2VyKTsKICAgIHZhciBjb21tb25fMiA9IGNvbW1vbjsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzMiwgInJlZ2lzdGVyU2VyaWFsaXplciIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIGNvbW1vbl8yLnJlZ2lzdGVyU2VyaWFsaXplcjsKICAgIH0gfSk7CiAgICB2YXIgdHJhbnNmZXJhYmxlXzIgPSB0cmFuc2ZlcmFibGU7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0czIsICJUcmFuc2ZlciIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIHRyYW5zZmVyYWJsZV8yLlRyYW5zZmVyOwogICAgfSB9KTsKICAgIGV4cG9ydHMyLmlzV29ya2VyUnVudGltZSA9IGltcGxlbWVudGF0aW9uXzEuZGVmYXVsdC5pc1dvcmtlclJ1bnRpbWU7CiAgICBsZXQgZXhwb3NlQ2FsbGVkID0gZmFsc2U7CiAgICBjb25zdCBhY3RpdmVTdWJzY3JpcHRpb25zID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICAgIGNvbnN0IGlzTWFzdGVySm9iQ2FuY2VsTWVzc2FnZSA9ICh0aGluZykgPT4gdGhpbmcgJiYgdGhpbmcudHlwZSA9PT0gbWVzc2FnZXNfMS5NYXN0ZXJNZXNzYWdlVHlwZS5jYW5jZWw7CiAgICBjb25zdCBpc01hc3RlckpvYlJ1bk1lc3NhZ2UgPSAodGhpbmcpID0+IHRoaW5nICYmIHRoaW5nLnR5cGUgPT09IG1lc3NhZ2VzXzEuTWFzdGVyTWVzc2FnZVR5cGUucnVuOwogICAgY29uc3QgaXNPYnNlcnZhYmxlJDEgPSAodGhpbmcpID0+IGlzX29ic2VydmFibGVfMS5kZWZhdWx0KHRoaW5nKSB8fCBpc1plbk9ic2VydmFibGUodGhpbmcpOwogICAgZnVuY3Rpb24gaXNaZW5PYnNlcnZhYmxlKHRoaW5nKSB7CiAgICAgIHJldHVybiB0aGluZyAmJiB0eXBlb2YgdGhpbmcgPT09ICJvYmplY3QiICYmIHR5cGVvZiB0aGluZy5zdWJzY3JpYmUgPT09ICJmdW5jdGlvbiI7CiAgICB9CiAgICBmdW5jdGlvbiBkZWNvbnN0cnVjdFRyYW5zZmVyKHRoaW5nKSB7CiAgICAgIHJldHVybiB0cmFuc2ZlcmFibGVfMS5pc1RyYW5zZmVyRGVzY3JpcHRvcih0aGluZykgPyB7IHBheWxvYWQ6IHRoaW5nLnNlbmQsIHRyYW5zZmVyYWJsZXM6IHRoaW5nLnRyYW5zZmVyYWJsZXMgfSA6IHsgcGF5bG9hZDogdGhpbmcsIHRyYW5zZmVyYWJsZXM6IHZvaWQgMCB9OwogICAgfQogICAgZnVuY3Rpb24gcG9zdEZ1bmN0aW9uSW5pdE1lc3NhZ2UoKSB7CiAgICAgIGNvbnN0IGluaXRNZXNzYWdlID0gewogICAgICAgIHR5cGU6IG1lc3NhZ2VzXzEuV29ya2VyTWVzc2FnZVR5cGUuaW5pdCwKICAgICAgICBleHBvc2VkOiB7CiAgICAgICAgICB0eXBlOiAiZnVuY3Rpb24iCiAgICAgICAgfQogICAgICB9OwogICAgICBpbXBsZW1lbnRhdGlvbl8xLmRlZmF1bHQucG9zdE1lc3NhZ2VUb01hc3Rlcihpbml0TWVzc2FnZSk7CiAgICB9CiAgICBmdW5jdGlvbiBwb3N0TW9kdWxlSW5pdE1lc3NhZ2UobWV0aG9kTmFtZXMpIHsKICAgICAgY29uc3QgaW5pdE1lc3NhZ2UgPSB7CiAgICAgICAgdHlwZTogbWVzc2FnZXNfMS5Xb3JrZXJNZXNzYWdlVHlwZS5pbml0LAogICAgICAgIGV4cG9zZWQ6IHsKICAgICAgICAgIHR5cGU6ICJtb2R1bGUiLAogICAgICAgICAgbWV0aG9kczogbWV0aG9kTmFtZXMKICAgICAgICB9CiAgICAgIH07CiAgICAgIGltcGxlbWVudGF0aW9uXzEuZGVmYXVsdC5wb3N0TWVzc2FnZVRvTWFzdGVyKGluaXRNZXNzYWdlKTsKICAgIH0KICAgIGZ1bmN0aW9uIHBvc3RKb2JFcnJvck1lc3NhZ2UodWlkLCByYXdFcnJvcikgewogICAgICBjb25zdCB7IHBheWxvYWQ6IGVycm9yLCB0cmFuc2ZlcmFibGVzIH0gPSBkZWNvbnN0cnVjdFRyYW5zZmVyKHJhd0Vycm9yKTsKICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gewogICAgICAgIHR5cGU6IG1lc3NhZ2VzXzEuV29ya2VyTWVzc2FnZVR5cGUuZXJyb3IsCiAgICAgICAgdWlkLAogICAgICAgIGVycm9yOiBjb21tb25fMS5zZXJpYWxpemUoZXJyb3IpCiAgICAgIH07CiAgICAgIGltcGxlbWVudGF0aW9uXzEuZGVmYXVsdC5wb3N0TWVzc2FnZVRvTWFzdGVyKGVycm9yTWVzc2FnZSwgdHJhbnNmZXJhYmxlcyk7CiAgICB9CiAgICBmdW5jdGlvbiBwb3N0Sm9iUmVzdWx0TWVzc2FnZSh1aWQsIGNvbXBsZXRlZCwgcmVzdWx0VmFsdWUpIHsKICAgICAgY29uc3QgeyBwYXlsb2FkLCB0cmFuc2ZlcmFibGVzIH0gPSBkZWNvbnN0cnVjdFRyYW5zZmVyKHJlc3VsdFZhbHVlKTsKICAgICAgY29uc3QgcmVzdWx0TWVzc2FnZSA9IHsKICAgICAgICB0eXBlOiBtZXNzYWdlc18xLldvcmtlck1lc3NhZ2VUeXBlLnJlc3VsdCwKICAgICAgICB1aWQsCiAgICAgICAgY29tcGxldGU6IGNvbXBsZXRlZCA/IHRydWUgOiB2b2lkIDAsCiAgICAgICAgcGF5bG9hZAogICAgICB9OwogICAgICBpbXBsZW1lbnRhdGlvbl8xLmRlZmF1bHQucG9zdE1lc3NhZ2VUb01hc3RlcihyZXN1bHRNZXNzYWdlLCB0cmFuc2ZlcmFibGVzKTsKICAgIH0KICAgIGZ1bmN0aW9uIHBvc3RKb2JTdGFydE1lc3NhZ2UodWlkLCByZXN1bHRUeXBlKSB7CiAgICAgIGNvbnN0IHN0YXJ0TWVzc2FnZSA9IHsKICAgICAgICB0eXBlOiBtZXNzYWdlc18xLldvcmtlck1lc3NhZ2VUeXBlLnJ1bm5pbmcsCiAgICAgICAgdWlkLAogICAgICAgIHJlc3VsdFR5cGUKICAgICAgfTsKICAgICAgaW1wbGVtZW50YXRpb25fMS5kZWZhdWx0LnBvc3RNZXNzYWdlVG9NYXN0ZXIoc3RhcnRNZXNzYWdlKTsKICAgIH0KICAgIGZ1bmN0aW9uIHBvc3RVbmNhdWdodEVycm9yTWVzc2FnZShlcnJvcikgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHsKICAgICAgICAgIHR5cGU6IG1lc3NhZ2VzXzEuV29ya2VyTWVzc2FnZVR5cGUudW5jYXVnaHRFcnJvciwKICAgICAgICAgIGVycm9yOiBjb21tb25fMS5zZXJpYWxpemUoZXJyb3IpCiAgICAgICAgfTsKICAgICAgICBpbXBsZW1lbnRhdGlvbl8xLmRlZmF1bHQucG9zdE1lc3NhZ2VUb01hc3RlcihlcnJvck1lc3NhZ2UpOwogICAgICB9IGNhdGNoIChzdWJFcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoIk5vdCByZXBvcnRpbmcgdW5jYXVnaHQgZXJyb3IgYmFjayB0byBtYXN0ZXIgdGhyZWFkIGFzIGl0IG9jY3VyZWQgd2hpbGUgcmVwb3J0aW5nIGFuIHVuY2F1Z2h0IGVycm9yIGFscmVhZHkuXG5MYXRlc3QgZXJyb3I6Iiwgc3ViRXJyb3IsICJcbk9yaWdpbmFsIGVycm9yOiIsIGVycm9yKTsKICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gcnVuRnVuY3Rpb24oam9iVUlELCBmbiwgYXJncykgewogICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgewogICAgICAgIGxldCBzeW5jUmVzdWx0OwogICAgICAgIHRyeSB7CiAgICAgICAgICBzeW5jUmVzdWx0ID0gZm4oLi4uYXJncyk7CiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgIHJldHVybiBwb3N0Sm9iRXJyb3JNZXNzYWdlKGpvYlVJRCwgZXJyb3IpOwogICAgICAgIH0KICAgICAgICBjb25zdCByZXN1bHRUeXBlID0gaXNPYnNlcnZhYmxlJDEoc3luY1Jlc3VsdCkgPyAib2JzZXJ2YWJsZSIgOiAicHJvbWlzZSI7CiAgICAgICAgcG9zdEpvYlN0YXJ0TWVzc2FnZShqb2JVSUQsIHJlc3VsdFR5cGUpOwogICAgICAgIGlmIChpc09ic2VydmFibGUkMShzeW5jUmVzdWx0KSkgewogICAgICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gc3luY1Jlc3VsdC5zdWJzY3JpYmUoKHZhbHVlKSA9PiBwb3N0Sm9iUmVzdWx0TWVzc2FnZShqb2JVSUQsIGZhbHNlLCBjb21tb25fMS5zZXJpYWxpemUodmFsdWUpKSwgKGVycm9yKSA9PiB7CiAgICAgICAgICAgIHBvc3RKb2JFcnJvck1lc3NhZ2Uoam9iVUlELCBjb21tb25fMS5zZXJpYWxpemUoZXJyb3IpKTsKICAgICAgICAgICAgYWN0aXZlU3Vic2NyaXB0aW9ucy5kZWxldGUoam9iVUlEKTsKICAgICAgICAgIH0sICgpID0+IHsKICAgICAgICAgICAgcG9zdEpvYlJlc3VsdE1lc3NhZ2Uoam9iVUlELCB0cnVlKTsKICAgICAgICAgICAgYWN0aXZlU3Vic2NyaXB0aW9ucy5kZWxldGUoam9iVUlEKTsKICAgICAgICAgIH0pOwogICAgICAgICAgYWN0aXZlU3Vic2NyaXB0aW9ucy5zZXQoam9iVUlELCBzdWJzY3JpcHRpb24pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBjb25zdCByZXN1bHQgPSB5aWVsZCBzeW5jUmVzdWx0OwogICAgICAgICAgICBwb3N0Sm9iUmVzdWx0TWVzc2FnZShqb2JVSUQsIHRydWUsIGNvbW1vbl8xLnNlcmlhbGl6ZShyZXN1bHQpKTsKICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgIHBvc3RKb2JFcnJvck1lc3NhZ2Uoam9iVUlELCBjb21tb25fMS5zZXJpYWxpemUoZXJyb3IpKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfQogICAgZnVuY3Rpb24gZXhwb3NlMihleHBvc2VkKSB7CiAgICAgIGlmICghaW1wbGVtZW50YXRpb25fMS5kZWZhdWx0LmlzV29ya2VyUnVudGltZSgpKSB7CiAgICAgICAgdGhyb3cgRXJyb3IoImV4cG9zZSgpIGNhbGxlZCBpbiB0aGUgbWFzdGVyIHRocmVhZC4iKTsKICAgICAgfQogICAgICBpZiAoZXhwb3NlQ2FsbGVkKSB7CiAgICAgICAgdGhyb3cgRXJyb3IoImV4cG9zZSgpIGNhbGxlZCBtb3JlIHRoYW4gb25jZS4gVGhpcyBpcyBub3QgcG9zc2libGUuIFBhc3MgYW4gb2JqZWN0IHRvIGV4cG9zZSgpIGlmIHlvdSB3YW50IHRvIGV4cG9zZSBtdWx0aXBsZSBmdW5jdGlvbnMuIik7CiAgICAgIH0KICAgICAgZXhwb3NlQ2FsbGVkID0gdHJ1ZTsKICAgICAgaWYgKHR5cGVvZiBleHBvc2VkID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgaW1wbGVtZW50YXRpb25fMS5kZWZhdWx0LnN1YnNjcmliZVRvTWFzdGVyTWVzc2FnZXMoKG1lc3NhZ2VEYXRhKSA9PiB7CiAgICAgICAgICBpZiAoaXNNYXN0ZXJKb2JSdW5NZXNzYWdlKG1lc3NhZ2VEYXRhKSAmJiAhbWVzc2FnZURhdGEubWV0aG9kKSB7CiAgICAgICAgICAgIHJ1bkZ1bmN0aW9uKG1lc3NhZ2VEYXRhLnVpZCwgZXhwb3NlZCwgbWVzc2FnZURhdGEuYXJncy5tYXAoY29tbW9uXzEuZGVzZXJpYWxpemUpKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBwb3N0RnVuY3Rpb25Jbml0TWVzc2FnZSgpOwogICAgICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvc2VkID09PSAib2JqZWN0IiAmJiBleHBvc2VkKSB7CiAgICAgICAgaW1wbGVtZW50YXRpb25fMS5kZWZhdWx0LnN1YnNjcmliZVRvTWFzdGVyTWVzc2FnZXMoKG1lc3NhZ2VEYXRhKSA9PiB7CiAgICAgICAgICBpZiAoaXNNYXN0ZXJKb2JSdW5NZXNzYWdlKG1lc3NhZ2VEYXRhKSAmJiBtZXNzYWdlRGF0YS5tZXRob2QpIHsKICAgICAgICAgICAgcnVuRnVuY3Rpb24obWVzc2FnZURhdGEudWlkLCBleHBvc2VkW21lc3NhZ2VEYXRhLm1ldGhvZF0sIG1lc3NhZ2VEYXRhLmFyZ3MubWFwKGNvbW1vbl8xLmRlc2VyaWFsaXplKSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgY29uc3QgbWV0aG9kTmFtZXMgPSBPYmplY3Qua2V5cyhleHBvc2VkKS5maWx0ZXIoKGtleSkgPT4gdHlwZW9mIGV4cG9zZWRba2V5XSA9PT0gImZ1bmN0aW9uIik7CiAgICAgICAgcG9zdE1vZHVsZUluaXRNZXNzYWdlKG1ldGhvZE5hbWVzKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aHJvdyBFcnJvcihgSW52YWxpZCBhcmd1bWVudCBwYXNzZWQgdG8gZXhwb3NlKCkuIEV4cGVjdGVkIGEgZnVuY3Rpb24gb3IgYW4gb2JqZWN0LCBnb3Q6ICR7ZXhwb3NlZH1gKTsKICAgICAgfQogICAgICBpbXBsZW1lbnRhdGlvbl8xLmRlZmF1bHQuc3Vic2NyaWJlVG9NYXN0ZXJNZXNzYWdlcygobWVzc2FnZURhdGEpID0+IHsKICAgICAgICBpZiAoaXNNYXN0ZXJKb2JDYW5jZWxNZXNzYWdlKG1lc3NhZ2VEYXRhKSkgewogICAgICAgICAgY29uc3Qgam9iVUlEID0gbWVzc2FnZURhdGEudWlkOwogICAgICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gYWN0aXZlU3Vic2NyaXB0aW9ucy5nZXQoam9iVUlEKTsKICAgICAgICAgIGlmIChzdWJzY3JpcHRpb24pIHsKICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7CiAgICAgICAgICAgIGFjdGl2ZVN1YnNjcmlwdGlvbnMuZGVsZXRlKGpvYlVJRCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICAgIGV4cG9ydHMyLmV4cG9zZSA9IGV4cG9zZTI7CiAgICBpZiAodHlwZW9mIHNlbGYgIT09ICJ1bmRlZmluZWQiICYmIHR5cGVvZiBzZWxmLmFkZEV2ZW50TGlzdGVuZXIgPT09ICJmdW5jdGlvbiIgJiYgaW1wbGVtZW50YXRpb25fMS5kZWZhdWx0LmlzV29ya2VyUnVudGltZSgpKSB7CiAgICAgIHNlbGYuYWRkRXZlbnRMaXN0ZW5lcigiZXJyb3IiLCAoZXZlbnQpID0+IHsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHBvc3RVbmNhdWdodEVycm9yTWVzc2FnZShldmVudC5lcnJvciB8fCBldmVudCksIDI1MCk7CiAgICAgIH0pOwogICAgICBzZWxmLmFkZEV2ZW50TGlzdGVuZXIoInVuaGFuZGxlZHJlamVjdGlvbiIsIChldmVudCkgPT4gewogICAgICAgIGNvbnN0IGVycm9yID0gZXZlbnQucmVhc29uOwogICAgICAgIGlmIChlcnJvciAmJiB0eXBlb2YgZXJyb3IubWVzc2FnZSA9PT0gInN0cmluZyIpIHsKICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gcG9zdFVuY2F1Z2h0RXJyb3JNZXNzYWdlKGVycm9yKSwgMjUwKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogICAgaWYgKHR5cGVvZiBwcm9jZXNzICE9PSAidW5kZWZpbmVkIiAmJiB0eXBlb2YgcHJvY2Vzcy5vbiA9PT0gImZ1bmN0aW9uIiAmJiBpbXBsZW1lbnRhdGlvbl8xLmRlZmF1bHQuaXNXb3JrZXJSdW50aW1lKCkpIHsKICAgICAgcHJvY2Vzcy5vbigidW5jYXVnaHRFeGNlcHRpb24iLCAoZXJyb3IpID0+IHsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHBvc3RVbmNhdWdodEVycm9yTWVzc2FnZShlcnJvciksIDI1MCk7CiAgICAgIH0pOwogICAgICBwcm9jZXNzLm9uKCJ1bmhhbmRsZWRSZWplY3Rpb24iLCAoZXJyb3IpID0+IHsKICAgICAgICBpZiAoZXJyb3IgJiYgdHlwZW9mIGVycm9yLm1lc3NhZ2UgPT09ICJzdHJpbmciKSB7CiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHBvc3RVbmNhdWdodEVycm9yTWVzc2FnZShlcnJvciksIDI1MCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9KSh3b3JrZXIpOwogIHZhciBXb3JrZXJDb250ZXh0ID0gLyogQF9fUFVSRV9fICovIGdldERlZmF1bHRFeHBvcnRGcm9tQ2pzKHdvcmtlcik7CiAgY29uc3QgZXhwb3NlID0gV29ya2VyQ29udGV4dC5leHBvc2U7CiAgV29ya2VyQ29udGV4dC5yZWdpc3RlclNlcmlhbGl6ZXI7CiAgY29uc3QgVHJhbnNmZXIgPSBXb3JrZXJDb250ZXh0LlRyYW5zZmVyOwogIHZhciBmcmVlR2xvYmFsID0gdHlwZW9mIGdsb2JhbCA9PSAib2JqZWN0IiAmJiBnbG9iYWwgJiYgZ2xvYmFsLk9iamVjdCA9PT0gT2JqZWN0ICYmIGdsb2JhbDsKICB2YXIgZnJlZUdsb2JhbCQxID0gZnJlZUdsb2JhbDsKICB2YXIgZnJlZVNlbGYgPSB0eXBlb2Ygc2VsZiA9PSAib2JqZWN0IiAmJiBzZWxmICYmIHNlbGYuT2JqZWN0ID09PSBPYmplY3QgJiYgc2VsZjsKICB2YXIgcm9vdCA9IGZyZWVHbG9iYWwkMSB8fCBmcmVlU2VsZiB8fCBGdW5jdGlvbigicmV0dXJuIHRoaXMiKSgpOwogIHZhciByb290JDEgPSByb290OwogIHZhciBTeW1ib2wkMSA9IHJvb3QkMS5TeW1ib2w7CiAgdmFyIFN5bWJvbCQyID0gU3ltYm9sJDE7CiAgdmFyIG9iamVjdFByb3RvJDUgPSBPYmplY3QucHJvdG90eXBlOwogIHZhciBoYXNPd25Qcm9wZXJ0eSQzID0gb2JqZWN0UHJvdG8kNS5oYXNPd25Qcm9wZXJ0eTsKICB2YXIgbmF0aXZlT2JqZWN0VG9TdHJpbmckMSA9IG9iamVjdFByb3RvJDUudG9TdHJpbmc7CiAgdmFyIHN5bVRvU3RyaW5nVGFnJDEgPSBTeW1ib2wkMiA/IFN5bWJvbCQyLnRvU3RyaW5nVGFnIDogdm9pZCAwOwogIGZ1bmN0aW9uIGdldFJhd1RhZyh2YWx1ZSkgewogICAgdmFyIGlzT3duID0gaGFzT3duUHJvcGVydHkkMy5jYWxsKHZhbHVlLCBzeW1Ub1N0cmluZ1RhZyQxKSwgdGFnID0gdmFsdWVbc3ltVG9TdHJpbmdUYWckMV07CiAgICB0cnkgewogICAgICB2YWx1ZVtzeW1Ub1N0cmluZ1RhZyQxXSA9IHZvaWQgMDsKICAgICAgdmFyIHVubWFza2VkID0gdHJ1ZTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgIH0KICAgIHZhciByZXN1bHQgPSBuYXRpdmVPYmplY3RUb1N0cmluZyQxLmNhbGwodmFsdWUpOwogICAgaWYgKHVubWFza2VkKSB7CiAgICAgIGlmIChpc093bikgewogICAgICAgIHZhbHVlW3N5bVRvU3RyaW5nVGFnJDFdID0gdGFnOwogICAgICB9IGVsc2UgewogICAgICAgIGRlbGV0ZSB2YWx1ZVtzeW1Ub1N0cmluZ1RhZyQxXTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHJlc3VsdDsKICB9CiAgdmFyIG9iamVjdFByb3RvJDQgPSBPYmplY3QucHJvdG90eXBlOwogIHZhciBuYXRpdmVPYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvJDQudG9TdHJpbmc7CiAgZnVuY3Rpb24gb2JqZWN0VG9TdHJpbmcodmFsdWUpIHsKICAgIHJldHVybiBuYXRpdmVPYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKTsKICB9CiAgdmFyIG51bGxUYWcgPSAiW29iamVjdCBOdWxsXSIsIHVuZGVmaW5lZFRhZyA9ICJbb2JqZWN0IFVuZGVmaW5lZF0iOwogIHZhciBzeW1Ub1N0cmluZ1RhZyA9IFN5bWJvbCQyID8gU3ltYm9sJDIudG9TdHJpbmdUYWcgOiB2b2lkIDA7CiAgZnVuY3Rpb24gYmFzZUdldFRhZyh2YWx1ZSkgewogICAgaWYgKHZhbHVlID09IG51bGwpIHsKICAgICAgcmV0dXJuIHZhbHVlID09PSB2b2lkIDAgPyB1bmRlZmluZWRUYWcgOiBudWxsVGFnOwogICAgfQogICAgcmV0dXJuIHN5bVRvU3RyaW5nVGFnICYmIHN5bVRvU3RyaW5nVGFnIGluIE9iamVjdCh2YWx1ZSkgPyBnZXRSYXdUYWcodmFsdWUpIDogb2JqZWN0VG9TdHJpbmcodmFsdWUpOwogIH0KICBmdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHsKICAgIHJldHVybiB2YWx1ZSAhPSBudWxsICYmIHR5cGVvZiB2YWx1ZSA9PSAib2JqZWN0IjsKICB9CiAgdmFyIHN5bWJvbFRhZyA9ICJbb2JqZWN0IFN5bWJvbF0iOwogIGZ1bmN0aW9uIGlzU3ltYm9sKHZhbHVlKSB7CiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICJzeW1ib2wiIHx8IGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgYmFzZUdldFRhZyh2YWx1ZSkgPT0gc3ltYm9sVGFnOwogIH0KICBmdW5jdGlvbiBhcnJheU1hcChhcnJheSwgaXRlcmF0ZWUpIHsKICAgIHZhciBpbmRleCA9IC0xLCBsZW5ndGggPSBhcnJheSA9PSBudWxsID8gMCA6IGFycmF5Lmxlbmd0aCwgcmVzdWx0ID0gQXJyYXkobGVuZ3RoKTsKICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7CiAgICAgIHJlc3VsdFtpbmRleF0gPSBpdGVyYXRlZShhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSk7CiAgICB9CiAgICByZXR1cm4gcmVzdWx0OwogIH0KICB2YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7CiAgdmFyIGlzQXJyYXkkMSA9IGlzQXJyYXk7CiAgdmFyIHJlV2hpdGVzcGFjZSA9IC9ccy87CiAgZnVuY3Rpb24gdHJpbW1lZEVuZEluZGV4KHN0cmluZykgewogICAgdmFyIGluZGV4ID0gc3RyaW5nLmxlbmd0aDsKICAgIHdoaWxlIChpbmRleC0tICYmIHJlV2hpdGVzcGFjZS50ZXN0KHN0cmluZy5jaGFyQXQoaW5kZXgpKSkgewogICAgfQogICAgcmV0dXJuIGluZGV4OwogIH0KICB2YXIgcmVUcmltU3RhcnQgPSAvXlxzKy87CiAgZnVuY3Rpb24gYmFzZVRyaW0oc3RyaW5nKSB7CiAgICByZXR1cm4gc3RyaW5nID8gc3RyaW5nLnNsaWNlKDAsIHRyaW1tZWRFbmRJbmRleChzdHJpbmcpICsgMSkucmVwbGFjZShyZVRyaW1TdGFydCwgIiIpIDogc3RyaW5nOwogIH0KICBmdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkgewogICAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7CiAgICByZXR1cm4gdmFsdWUgIT0gbnVsbCAmJiAodHlwZSA9PSAib2JqZWN0IiB8fCB0eXBlID09ICJmdW5jdGlvbiIpOwogIH0KICB2YXIgTkFOID0gMCAvIDA7CiAgdmFyIHJlSXNCYWRIZXggPSAvXlstK10weFswLTlhLWZdKyQvaTsKICB2YXIgcmVJc0JpbmFyeSA9IC9eMGJbMDFdKyQvaTsKICB2YXIgcmVJc09jdGFsID0gL14wb1swLTddKyQvaTsKICB2YXIgZnJlZVBhcnNlSW50ID0gcGFyc2VJbnQ7CiAgZnVuY3Rpb24gdG9OdW1iZXIodmFsdWUpIHsKICAgIGlmICh0eXBlb2YgdmFsdWUgPT0gIm51bWJlciIpIHsKICAgICAgcmV0dXJuIHZhbHVlOwogICAgfQogICAgaWYgKGlzU3ltYm9sKHZhbHVlKSkgewogICAgICByZXR1cm4gTkFOOwogICAgfQogICAgaWYgKGlzT2JqZWN0KHZhbHVlKSkgewogICAgICB2YXIgb3RoZXIgPSB0eXBlb2YgdmFsdWUudmFsdWVPZiA9PSAiZnVuY3Rpb24iID8gdmFsdWUudmFsdWVPZigpIDogdmFsdWU7CiAgICAgIHZhbHVlID0gaXNPYmplY3Qob3RoZXIpID8gb3RoZXIgKyAiIiA6IG90aGVyOwogICAgfQogICAgaWYgKHR5cGVvZiB2YWx1ZSAhPSAic3RyaW5nIikgewogICAgICByZXR1cm4gdmFsdWUgPT09IDAgPyB2YWx1ZSA6ICt2YWx1ZTsKICAgIH0KICAgIHZhbHVlID0gYmFzZVRyaW0odmFsdWUpOwogICAgdmFyIGlzQmluYXJ5ID0gcmVJc0JpbmFyeS50ZXN0KHZhbHVlKTsKICAgIHJldHVybiBpc0JpbmFyeSB8fCByZUlzT2N0YWwudGVzdCh2YWx1ZSkgPyBmcmVlUGFyc2VJbnQodmFsdWUuc2xpY2UoMiksIGlzQmluYXJ5ID8gMiA6IDgpIDogcmVJc0JhZEhleC50ZXN0KHZhbHVlKSA/IE5BTiA6ICt2YWx1ZTsKICB9CiAgdmFyIElORklOSVRZID0gMSAvIDAsIE1BWF9JTlRFR0VSID0gMTc5NzY5MzEzNDg2MjMxNTdlMjkyOwogIGZ1bmN0aW9uIHRvRmluaXRlKHZhbHVlKSB7CiAgICBpZiAoIXZhbHVlKSB7CiAgICAgIHJldHVybiB2YWx1ZSA9PT0gMCA/IHZhbHVlIDogMDsKICAgIH0KICAgIHZhbHVlID0gdG9OdW1iZXIodmFsdWUpOwogICAgaWYgKHZhbHVlID09PSBJTkZJTklUWSB8fCB2YWx1ZSA9PT0gLUlORklOSVRZKSB7CiAgICAgIHZhciBzaWduID0gdmFsdWUgPCAwID8gLTEgOiAxOwogICAgICByZXR1cm4gc2lnbiAqIE1BWF9JTlRFR0VSOwogICAgfQogICAgcmV0dXJuIHZhbHVlID09PSB2YWx1ZSA/IHZhbHVlIDogMDsKICB9CiAgZnVuY3Rpb24gdG9JbnRlZ2VyKHZhbHVlKSB7CiAgICB2YXIgcmVzdWx0ID0gdG9GaW5pdGUodmFsdWUpLCByZW1haW5kZXIgPSByZXN1bHQgJSAxOwogICAgcmV0dXJuIHJlc3VsdCA9PT0gcmVzdWx0ID8gcmVtYWluZGVyID8gcmVzdWx0IC0gcmVtYWluZGVyIDogcmVzdWx0IDogMDsKICB9CiAgdmFyIGFzeW5jVGFnID0gIltvYmplY3QgQXN5bmNGdW5jdGlvbl0iLCBmdW5jVGFnJDEgPSAiW29iamVjdCBGdW5jdGlvbl0iLCBnZW5UYWcgPSAiW29iamVjdCBHZW5lcmF0b3JGdW5jdGlvbl0iLCBwcm94eVRhZyA9ICJbb2JqZWN0IFByb3h5XSI7CiAgZnVuY3Rpb24gaXNGdW5jdGlvbih2YWx1ZSkgewogICAgaWYgKCFpc09iamVjdCh2YWx1ZSkpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgdmFyIHRhZyA9IGJhc2VHZXRUYWcodmFsdWUpOwogICAgcmV0dXJuIHRhZyA9PSBmdW5jVGFnJDEgfHwgdGFnID09IGdlblRhZyB8fCB0YWcgPT0gYXN5bmNUYWcgfHwgdGFnID09IHByb3h5VGFnOwogIH0KICBmdW5jdGlvbiBjb3B5QXJyYXkoc291cmNlLCBhcnJheSkgewogICAgdmFyIGluZGV4ID0gLTEsIGxlbmd0aCA9IHNvdXJjZS5sZW5ndGg7CiAgICBhcnJheSB8fCAoYXJyYXkgPSBBcnJheShsZW5ndGgpKTsKICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7CiAgICAgIGFycmF5W2luZGV4XSA9IHNvdXJjZVtpbmRleF07CiAgICB9CiAgICByZXR1cm4gYXJyYXk7CiAgfQogIHZhciBNQVhfU0FGRV9JTlRFR0VSJDEgPSA5MDA3MTk5MjU0NzQwOTkxOwogIHZhciByZUlzVWludCA9IC9eKD86MHxbMS05XVxkKikkLzsKICBmdW5jdGlvbiBpc0luZGV4KHZhbHVlLCBsZW5ndGgpIHsKICAgIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlOwogICAgbGVuZ3RoID0gbGVuZ3RoID09IG51bGwgPyBNQVhfU0FGRV9JTlRFR0VSJDEgOiBsZW5ndGg7CiAgICByZXR1cm4gISFsZW5ndGggJiYgKHR5cGUgPT0gIm51bWJlciIgfHwgdHlwZSAhPSAic3ltYm9sIiAmJiByZUlzVWludC50ZXN0KHZhbHVlKSkgJiYgKHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPCBsZW5ndGgpOwogIH0KICBmdW5jdGlvbiBlcSh2YWx1ZSwgb3RoZXIpIHsKICAgIHJldHVybiB2YWx1ZSA9PT0gb3RoZXIgfHwgdmFsdWUgIT09IHZhbHVlICYmIG90aGVyICE9PSBvdGhlcjsKICB9CiAgdmFyIE1BWF9TQUZFX0lOVEVHRVIgPSA5MDA3MTk5MjU0NzQwOTkxOwogIGZ1bmN0aW9uIGlzTGVuZ3RoKHZhbHVlKSB7CiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICJudW1iZXIiICYmIHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPD0gTUFYX1NBRkVfSU5URUdFUjsKICB9CiAgZnVuY3Rpb24gaXNBcnJheUxpa2UodmFsdWUpIHsKICAgIHJldHVybiB2YWx1ZSAhPSBudWxsICYmIGlzTGVuZ3RoKHZhbHVlLmxlbmd0aCkgJiYgIWlzRnVuY3Rpb24odmFsdWUpOwogIH0KICBmdW5jdGlvbiBpc0l0ZXJhdGVlQ2FsbCh2YWx1ZSwgaW5kZXgsIG9iamVjdCkgewogICAgaWYgKCFpc09iamVjdChvYmplY3QpKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIHZhciB0eXBlID0gdHlwZW9mIGluZGV4OwogICAgaWYgKHR5cGUgPT0gIm51bWJlciIgPyBpc0FycmF5TGlrZShvYmplY3QpICYmIGlzSW5kZXgoaW5kZXgsIG9iamVjdC5sZW5ndGgpIDogdHlwZSA9PSAic3RyaW5nIiAmJiBpbmRleCBpbiBvYmplY3QpIHsKICAgICAgcmV0dXJuIGVxKG9iamVjdFtpbmRleF0sIHZhbHVlKTsKICAgIH0KICAgIHJldHVybiBmYWxzZTsKICB9CiAgdmFyIG9iamVjdFByb3RvJDMgPSBPYmplY3QucHJvdG90eXBlOwogIGZ1bmN0aW9uIGlzUHJvdG90eXBlKHZhbHVlKSB7CiAgICB2YXIgQ3RvciA9IHZhbHVlICYmIHZhbHVlLmNvbnN0cnVjdG9yLCBwcm90byA9IHR5cGVvZiBDdG9yID09ICJmdW5jdGlvbiIgJiYgQ3Rvci5wcm90b3R5cGUgfHwgb2JqZWN0UHJvdG8kMzsKICAgIHJldHVybiB2YWx1ZSA9PT0gcHJvdG87CiAgfQogIGZ1bmN0aW9uIGJhc2VUaW1lcyhuLCBpdGVyYXRlZSkgewogICAgdmFyIGluZGV4ID0gLTEsIHJlc3VsdCA9IEFycmF5KG4pOwogICAgd2hpbGUgKCsraW5kZXggPCBuKSB7CiAgICAgIHJlc3VsdFtpbmRleF0gPSBpdGVyYXRlZShpbmRleCk7CiAgICB9CiAgICByZXR1cm4gcmVzdWx0OwogIH0KICB2YXIgYXJnc1RhZyQxID0gIltvYmplY3QgQXJndW1lbnRzXSI7CiAgZnVuY3Rpb24gYmFzZUlzQXJndW1lbnRzKHZhbHVlKSB7CiAgICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBiYXNlR2V0VGFnKHZhbHVlKSA9PSBhcmdzVGFnJDE7CiAgfQogIHZhciBvYmplY3RQcm90byQyID0gT2JqZWN0LnByb3RvdHlwZTsKICB2YXIgaGFzT3duUHJvcGVydHkkMiA9IG9iamVjdFByb3RvJDIuaGFzT3duUHJvcGVydHk7CiAgdmFyIHByb3BlcnR5SXNFbnVtZXJhYmxlID0gb2JqZWN0UHJvdG8kMi5wcm9wZXJ0eUlzRW51bWVyYWJsZTsKICB2YXIgaXNBcmd1bWVudHMgPSBiYXNlSXNBcmd1bWVudHMoZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gYXJndW1lbnRzOwogIH0oKSkgPyBiYXNlSXNBcmd1bWVudHMgOiBmdW5jdGlvbih2YWx1ZSkgewogICAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgaGFzT3duUHJvcGVydHkkMi5jYWxsKHZhbHVlLCAiY2FsbGVlIikgJiYgIXByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwodmFsdWUsICJjYWxsZWUiKTsKICB9OwogIHZhciBpc0FyZ3VtZW50cyQxID0gaXNBcmd1bWVudHM7CiAgZnVuY3Rpb24gc3R1YkZhbHNlKCkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KICB2YXIgZnJlZUV4cG9ydHMkMSA9IHR5cGVvZiBleHBvcnRzID09ICJvYmplY3QiICYmIGV4cG9ydHMgJiYgIWV4cG9ydHMubm9kZVR5cGUgJiYgZXhwb3J0czsKICB2YXIgZnJlZU1vZHVsZSQxID0gZnJlZUV4cG9ydHMkMSAmJiB0eXBlb2YgbW9kdWxlID09ICJvYmplY3QiICYmIG1vZHVsZSAmJiAhbW9kdWxlLm5vZGVUeXBlICYmIG1vZHVsZTsKICB2YXIgbW9kdWxlRXhwb3J0cyQxID0gZnJlZU1vZHVsZSQxICYmIGZyZWVNb2R1bGUkMS5leHBvcnRzID09PSBmcmVlRXhwb3J0cyQxOwogIHZhciBCdWZmZXIkMSA9IG1vZHVsZUV4cG9ydHMkMSA/IHJvb3QkMS5CdWZmZXIgOiB2b2lkIDA7CiAgdmFyIG5hdGl2ZUlzQnVmZmVyID0gQnVmZmVyJDEgPyBCdWZmZXIkMS5pc0J1ZmZlciA6IHZvaWQgMDsKICB2YXIgaXNCdWZmZXIgPSBuYXRpdmVJc0J1ZmZlciB8fCBzdHViRmFsc2U7CiAgdmFyIGlzQnVmZmVyJDEgPSBpc0J1ZmZlcjsKICB2YXIgYXJnc1RhZyA9ICJbb2JqZWN0IEFyZ3VtZW50c10iLCBhcnJheVRhZyA9ICJbb2JqZWN0IEFycmF5XSIsIGJvb2xUYWcgPSAiW29iamVjdCBCb29sZWFuXSIsIGRhdGVUYWcgPSAiW29iamVjdCBEYXRlXSIsIGVycm9yVGFnID0gIltvYmplY3QgRXJyb3JdIiwgZnVuY1RhZyA9ICJbb2JqZWN0IEZ1bmN0aW9uXSIsIG1hcFRhZyA9ICJbb2JqZWN0IE1hcF0iLCBudW1iZXJUYWcgPSAiW29iamVjdCBOdW1iZXJdIiwgb2JqZWN0VGFnID0gIltvYmplY3QgT2JqZWN0XSIsIHJlZ2V4cFRhZyA9ICJbb2JqZWN0IFJlZ0V4cF0iLCBzZXRUYWcgPSAiW29iamVjdCBTZXRdIiwgc3RyaW5nVGFnID0gIltvYmplY3QgU3RyaW5nXSIsIHdlYWtNYXBUYWcgPSAiW29iamVjdCBXZWFrTWFwXSI7CiAgdmFyIGFycmF5QnVmZmVyVGFnID0gIltvYmplY3QgQXJyYXlCdWZmZXJdIiwgZGF0YVZpZXdUYWcgPSAiW29iamVjdCBEYXRhVmlld10iLCBmbG9hdDMyVGFnID0gIltvYmplY3QgRmxvYXQzMkFycmF5XSIsIGZsb2F0NjRUYWcgPSAiW29iamVjdCBGbG9hdDY0QXJyYXldIiwgaW50OFRhZyA9ICJbb2JqZWN0IEludDhBcnJheV0iLCBpbnQxNlRhZyA9ICJbb2JqZWN0IEludDE2QXJyYXldIiwgaW50MzJUYWcgPSAiW29iamVjdCBJbnQzMkFycmF5XSIsIHVpbnQ4VGFnID0gIltvYmplY3QgVWludDhBcnJheV0iLCB1aW50OENsYW1wZWRUYWcgPSAiW29iamVjdCBVaW50OENsYW1wZWRBcnJheV0iLCB1aW50MTZUYWcgPSAiW29iamVjdCBVaW50MTZBcnJheV0iLCB1aW50MzJUYWcgPSAiW29iamVjdCBVaW50MzJBcnJheV0iOwogIHZhciB0eXBlZEFycmF5VGFncyA9IHt9OwogIHR5cGVkQXJyYXlUYWdzW2Zsb2F0MzJUYWddID0gdHlwZWRBcnJheVRhZ3NbZmxvYXQ2NFRhZ10gPSB0eXBlZEFycmF5VGFnc1tpbnQ4VGFnXSA9IHR5cGVkQXJyYXlUYWdzW2ludDE2VGFnXSA9IHR5cGVkQXJyYXlUYWdzW2ludDMyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW3VpbnQ4VGFnXSA9IHR5cGVkQXJyYXlUYWdzW3VpbnQ4Q2xhbXBlZFRhZ10gPSB0eXBlZEFycmF5VGFnc1t1aW50MTZUYWddID0gdHlwZWRBcnJheVRhZ3NbdWludDMyVGFnXSA9IHRydWU7CiAgdHlwZWRBcnJheVRhZ3NbYXJnc1RhZ10gPSB0eXBlZEFycmF5VGFnc1thcnJheVRhZ10gPSB0eXBlZEFycmF5VGFnc1thcnJheUJ1ZmZlclRhZ10gPSB0eXBlZEFycmF5VGFnc1tib29sVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2RhdGFWaWV3VGFnXSA9IHR5cGVkQXJyYXlUYWdzW2RhdGVUYWddID0gdHlwZWRBcnJheVRhZ3NbZXJyb3JUYWddID0gdHlwZWRBcnJheVRhZ3NbZnVuY1RhZ10gPSB0eXBlZEFycmF5VGFnc1ttYXBUYWddID0gdHlwZWRBcnJheVRhZ3NbbnVtYmVyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW29iamVjdFRhZ10gPSB0eXBlZEFycmF5VGFnc1tyZWdleHBUYWddID0gdHlwZWRBcnJheVRhZ3Nbc2V0VGFnXSA9IHR5cGVkQXJyYXlUYWdzW3N0cmluZ1RhZ10gPSB0eXBlZEFycmF5VGFnc1t3ZWFrTWFwVGFnXSA9IGZhbHNlOwogIGZ1bmN0aW9uIGJhc2VJc1R5cGVkQXJyYXkodmFsdWUpIHsKICAgIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIGlzTGVuZ3RoKHZhbHVlLmxlbmd0aCkgJiYgISF0eXBlZEFycmF5VGFnc1tiYXNlR2V0VGFnKHZhbHVlKV07CiAgfQogIGZ1bmN0aW9uIGJhc2VVbmFyeShmdW5jKSB7CiAgICByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHsKICAgICAgcmV0dXJuIGZ1bmModmFsdWUpOwogICAgfTsKICB9CiAgdmFyIGZyZWVFeHBvcnRzID0gdHlwZW9mIGV4cG9ydHMgPT0gIm9iamVjdCIgJiYgZXhwb3J0cyAmJiAhZXhwb3J0cy5ub2RlVHlwZSAmJiBleHBvcnRzOwogIHZhciBmcmVlTW9kdWxlID0gZnJlZUV4cG9ydHMgJiYgdHlwZW9mIG1vZHVsZSA9PSAib2JqZWN0IiAmJiBtb2R1bGUgJiYgIW1vZHVsZS5ub2RlVHlwZSAmJiBtb2R1bGU7CiAgdmFyIG1vZHVsZUV4cG9ydHMgPSBmcmVlTW9kdWxlICYmIGZyZWVNb2R1bGUuZXhwb3J0cyA9PT0gZnJlZUV4cG9ydHM7CiAgdmFyIGZyZWVQcm9jZXNzID0gbW9kdWxlRXhwb3J0cyAmJiBmcmVlR2xvYmFsJDEucHJvY2VzczsKICB2YXIgbm9kZVV0aWwgPSBmdW5jdGlvbigpIHsKICAgIHRyeSB7CiAgICAgIHZhciB0eXBlcyA9IGZyZWVNb2R1bGUgJiYgZnJlZU1vZHVsZS5yZXF1aXJlICYmIGZyZWVNb2R1bGUucmVxdWlyZSgidXRpbCIpLnR5cGVzOwogICAgICBpZiAodHlwZXMpIHsKICAgICAgICByZXR1cm4gdHlwZXM7CiAgICAgIH0KICAgICAgcmV0dXJuIGZyZWVQcm9jZXNzICYmIGZyZWVQcm9jZXNzLmJpbmRpbmcgJiYgZnJlZVByb2Nlc3MuYmluZGluZygidXRpbCIpOwogICAgfSBjYXRjaCAoZSkgewogICAgfQogIH0oKTsKICB2YXIgbm9kZVV0aWwkMSA9IG5vZGVVdGlsOwogIHZhciBub2RlSXNUeXBlZEFycmF5ID0gbm9kZVV0aWwkMSAmJiBub2RlVXRpbCQxLmlzVHlwZWRBcnJheTsKICB2YXIgaXNUeXBlZEFycmF5ID0gbm9kZUlzVHlwZWRBcnJheSA/IGJhc2VVbmFyeShub2RlSXNUeXBlZEFycmF5KSA6IGJhc2VJc1R5cGVkQXJyYXk7CiAgdmFyIGlzVHlwZWRBcnJheSQxID0gaXNUeXBlZEFycmF5OwogIHZhciBvYmplY3RQcm90byQxID0gT2JqZWN0LnByb3RvdHlwZTsKICB2YXIgaGFzT3duUHJvcGVydHkkMSA9IG9iamVjdFByb3RvJDEuaGFzT3duUHJvcGVydHk7CiAgZnVuY3Rpb24gYXJyYXlMaWtlS2V5cyh2YWx1ZSwgaW5oZXJpdGVkKSB7CiAgICB2YXIgaXNBcnIgPSBpc0FycmF5JDEodmFsdWUpLCBpc0FyZyA9ICFpc0FyciAmJiBpc0FyZ3VtZW50cyQxKHZhbHVlKSwgaXNCdWZmID0gIWlzQXJyICYmICFpc0FyZyAmJiBpc0J1ZmZlciQxKHZhbHVlKSwgaXNUeXBlID0gIWlzQXJyICYmICFpc0FyZyAmJiAhaXNCdWZmICYmIGlzVHlwZWRBcnJheSQxKHZhbHVlKSwgc2tpcEluZGV4ZXMgPSBpc0FyciB8fCBpc0FyZyB8fCBpc0J1ZmYgfHwgaXNUeXBlLCByZXN1bHQgPSBza2lwSW5kZXhlcyA/IGJhc2VUaW1lcyh2YWx1ZS5sZW5ndGgsIFN0cmluZykgOiBbXSwgbGVuZ3RoID0gcmVzdWx0Lmxlbmd0aDsKICAgIGZvciAodmFyIGtleSBpbiB2YWx1ZSkgewogICAgICBpZiAoKGluaGVyaXRlZCB8fCBoYXNPd25Qcm9wZXJ0eSQxLmNhbGwodmFsdWUsIGtleSkpICYmICEoc2tpcEluZGV4ZXMgJiYgKGtleSA9PSAibGVuZ3RoIiB8fCBpc0J1ZmYgJiYgKGtleSA9PSAib2Zmc2V0IiB8fCBrZXkgPT0gInBhcmVudCIpIHx8IGlzVHlwZSAmJiAoa2V5ID09ICJidWZmZXIiIHx8IGtleSA9PSAiYnl0ZUxlbmd0aCIgfHwga2V5ID09ICJieXRlT2Zmc2V0IikgfHwgaXNJbmRleChrZXksIGxlbmd0aCkpKSkgewogICAgICAgIHJlc3VsdC5wdXNoKGtleSk7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiByZXN1bHQ7CiAgfQogIGZ1bmN0aW9uIG92ZXJBcmcoZnVuYywgdHJhbnNmb3JtKSB7CiAgICByZXR1cm4gZnVuY3Rpb24oYXJnKSB7CiAgICAgIHJldHVybiBmdW5jKHRyYW5zZm9ybShhcmcpKTsKICAgIH07CiAgfQogIHZhciBuYXRpdmVLZXlzID0gb3ZlckFyZyhPYmplY3Qua2V5cywgT2JqZWN0KTsKICB2YXIgbmF0aXZlS2V5cyQxID0gbmF0aXZlS2V5czsKICB2YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlOwogIHZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5OwogIGZ1bmN0aW9uIGJhc2VLZXlzKG9iamVjdCkgewogICAgaWYgKCFpc1Byb3RvdHlwZShvYmplY3QpKSB7CiAgICAgIHJldHVybiBuYXRpdmVLZXlzJDEob2JqZWN0KTsKICAgIH0KICAgIHZhciByZXN1bHQgPSBbXTsKICAgIGZvciAodmFyIGtleSBpbiBPYmplY3Qob2JqZWN0KSkgewogICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSkgJiYga2V5ICE9ICJjb25zdHJ1Y3RvciIpIHsKICAgICAgICByZXN1bHQucHVzaChrZXkpOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gcmVzdWx0OwogIH0KICBmdW5jdGlvbiBrZXlzKG9iamVjdCkgewogICAgcmV0dXJuIGlzQXJyYXlMaWtlKG9iamVjdCkgPyBhcnJheUxpa2VLZXlzKG9iamVjdCkgOiBiYXNlS2V5cyhvYmplY3QpOwogIH0KICBmdW5jdGlvbiBiYXNlQ2xhbXAobnVtYmVyLCBsb3dlciwgdXBwZXIpIHsKICAgIGlmIChudW1iZXIgPT09IG51bWJlcikgewogICAgICBpZiAodXBwZXIgIT09IHZvaWQgMCkgewogICAgICAgIG51bWJlciA9IG51bWJlciA8PSB1cHBlciA/IG51bWJlciA6IHVwcGVyOwogICAgICB9CiAgICAgIGlmIChsb3dlciAhPT0gdm9pZCAwKSB7CiAgICAgICAgbnVtYmVyID0gbnVtYmVyID49IGxvd2VyID8gbnVtYmVyIDogbG93ZXI7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBudW1iZXI7CiAgfQogIGZ1bmN0aW9uIGJhc2VWYWx1ZXMob2JqZWN0LCBwcm9wcykgewogICAgcmV0dXJuIGFycmF5TWFwKHByb3BzLCBmdW5jdGlvbihrZXkpIHsKICAgICAgcmV0dXJuIG9iamVjdFtrZXldOwogICAgfSk7CiAgfQogIGZ1bmN0aW9uIHZhbHVlcyhvYmplY3QpIHsKICAgIHJldHVybiBvYmplY3QgPT0gbnVsbCA/IFtdIDogYmFzZVZhbHVlcyhvYmplY3QsIGtleXMob2JqZWN0KSk7CiAgfQogIHZhciBuYXRpdmVGbG9vciA9IE1hdGguZmxvb3IsIG5hdGl2ZVJhbmRvbSA9IE1hdGgucmFuZG9tOwogIGZ1bmN0aW9uIGJhc2VSYW5kb20obG93ZXIsIHVwcGVyKSB7CiAgICByZXR1cm4gbG93ZXIgKyBuYXRpdmVGbG9vcihuYXRpdmVSYW5kb20oKSAqICh1cHBlciAtIGxvd2VyICsgMSkpOwogIH0KICBmdW5jdGlvbiBzaHVmZmxlU2VsZihhcnJheSwgc2l6ZSkgewogICAgdmFyIGluZGV4ID0gLTEsIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCwgbGFzdEluZGV4ID0gbGVuZ3RoIC0gMTsKICAgIHNpemUgPSBzaXplID09PSB2b2lkIDAgPyBsZW5ndGggOiBzaXplOwogICAgd2hpbGUgKCsraW5kZXggPCBzaXplKSB7CiAgICAgIHZhciByYW5kID0gYmFzZVJhbmRvbShpbmRleCwgbGFzdEluZGV4KSwgdmFsdWUgPSBhcnJheVtyYW5kXTsKICAgICAgYXJyYXlbcmFuZF0gPSBhcnJheVtpbmRleF07CiAgICAgIGFycmF5W2luZGV4XSA9IHZhbHVlOwogICAgfQogICAgYXJyYXkubGVuZ3RoID0gc2l6ZTsKICAgIHJldHVybiBhcnJheTsKICB9CiAgZnVuY3Rpb24gYXJyYXlTYW1wbGVTaXplKGFycmF5LCBuKSB7CiAgICByZXR1cm4gc2h1ZmZsZVNlbGYoY29weUFycmF5KGFycmF5KSwgYmFzZUNsYW1wKG4sIDAsIGFycmF5Lmxlbmd0aCkpOwogIH0KICBmdW5jdGlvbiBiYXNlU2FtcGxlU2l6ZShjb2xsZWN0aW9uLCBuKSB7CiAgICB2YXIgYXJyYXkgPSB2YWx1ZXMoY29sbGVjdGlvbik7CiAgICByZXR1cm4gc2h1ZmZsZVNlbGYoYXJyYXksIGJhc2VDbGFtcChuLCAwLCBhcnJheS5sZW5ndGgpKTsKICB9CiAgZnVuY3Rpb24gc2FtcGxlU2l6ZShjb2xsZWN0aW9uLCBuLCBndWFyZCkgewogICAgaWYgKGd1YXJkID8gaXNJdGVyYXRlZUNhbGwoY29sbGVjdGlvbiwgbiwgZ3VhcmQpIDogbiA9PT0gdm9pZCAwKSB7CiAgICAgIG4gPSAxOwogICAgfSBlbHNlIHsKICAgICAgbiA9IHRvSW50ZWdlcihuKTsKICAgIH0KICAgIHZhciBmdW5jID0gaXNBcnJheSQxKGNvbGxlY3Rpb24pID8gYXJyYXlTYW1wbGVTaXplIDogYmFzZVNhbXBsZVNpemU7CiAgICByZXR1cm4gZnVuYyhjb2xsZWN0aW9uLCBuKTsKICB9CiAgZnVuY3Rpb24gYXNjZW5kaW5nKGEsIGIpIHsKICAgIHJldHVybiBhIDwgYiA/IC0xIDogYSA+IGIgPyAxIDogYSA+PSBiID8gMCA6IE5hTjsKICB9CiAgZnVuY3Rpb24gYmlzZWN0b3IoZikgewogICAgbGV0IGRlbHRhID0gZjsKICAgIGxldCBjb21wYXJlID0gZjsKICAgIGlmIChmLmxlbmd0aCA9PT0gMSkgewogICAgICBkZWx0YSA9IChkLCB4KSA9PiBmKGQpIC0geDsKICAgICAgY29tcGFyZSA9IGFzY2VuZGluZ0NvbXBhcmF0b3IoZik7CiAgICB9CiAgICBmdW5jdGlvbiBsZWZ0KGEsIHgsIGxvLCBoaSkgewogICAgICBpZiAobG8gPT0gbnVsbCkKICAgICAgICBsbyA9IDA7CiAgICAgIGlmIChoaSA9PSBudWxsKQogICAgICAgIGhpID0gYS5sZW5ndGg7CiAgICAgIHdoaWxlIChsbyA8IGhpKSB7CiAgICAgICAgY29uc3QgbWlkID0gbG8gKyBoaSA+Pj4gMTsKICAgICAgICBpZiAoY29tcGFyZShhW21pZF0sIHgpIDwgMCkKICAgICAgICAgIGxvID0gbWlkICsgMTsKICAgICAgICBlbHNlCiAgICAgICAgICBoaSA9IG1pZDsKICAgICAgfQogICAgICByZXR1cm4gbG87CiAgICB9CiAgICBmdW5jdGlvbiByaWdodChhLCB4LCBsbywgaGkpIHsKICAgICAgaWYgKGxvID09IG51bGwpCiAgICAgICAgbG8gPSAwOwogICAgICBpZiAoaGkgPT0gbnVsbCkKICAgICAgICBoaSA9IGEubGVuZ3RoOwogICAgICB3aGlsZSAobG8gPCBoaSkgewogICAgICAgIGNvbnN0IG1pZCA9IGxvICsgaGkgPj4+IDE7CiAgICAgICAgaWYgKGNvbXBhcmUoYVttaWRdLCB4KSA+IDApCiAgICAgICAgICBoaSA9IG1pZDsKICAgICAgICBlbHNlCiAgICAgICAgICBsbyA9IG1pZCArIDE7CiAgICAgIH0KICAgICAgcmV0dXJuIGxvOwogICAgfQogICAgZnVuY3Rpb24gY2VudGVyKGEsIHgsIGxvLCBoaSkgewogICAgICBpZiAobG8gPT0gbnVsbCkKICAgICAgICBsbyA9IDA7CiAgICAgIGlmIChoaSA9PSBudWxsKQogICAgICAgIGhpID0gYS5sZW5ndGg7CiAgICAgIGNvbnN0IGkgPSBsZWZ0KGEsIHgsIGxvLCBoaSAtIDEpOwogICAgICByZXR1cm4gaSA+IGxvICYmIGRlbHRhKGFbaSAtIDFdLCB4KSA+IC1kZWx0YShhW2ldLCB4KSA/IGkgLSAxIDogaTsKICAgIH0KICAgIHJldHVybiB7IGxlZnQsIGNlbnRlciwgcmlnaHQgfTsKICB9CiAgZnVuY3Rpb24gYXNjZW5kaW5nQ29tcGFyYXRvcihmKSB7CiAgICByZXR1cm4gKGQsIHgpID0+IGFzY2VuZGluZyhmKGQpLCB4KTsKICB9CiAgdmFyIEVPTCA9IHt9LCBFT0YgPSB7fSwgUVVPVEUgPSAzNCwgTkVXTElORSA9IDEwLCBSRVRVUk4gPSAxMzsKICBmdW5jdGlvbiBvYmplY3RDb252ZXJ0ZXIoY29sdW1ucykgewogICAgcmV0dXJuIG5ldyBGdW5jdGlvbigiZCIsICJyZXR1cm4geyIgKyBjb2x1bW5zLm1hcChmdW5jdGlvbihuYW1lLCBpKSB7CiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShuYW1lKSArICI6IGRbIiArIGkgKyAnXSB8fCAiIic7CiAgICB9KS5qb2luKCIsIikgKyAifSIpOwogIH0KICBmdW5jdGlvbiBjdXN0b21Db252ZXJ0ZXIoY29sdW1ucywgZikgewogICAgdmFyIG9iamVjdCA9IG9iamVjdENvbnZlcnRlcihjb2x1bW5zKTsKICAgIHJldHVybiBmdW5jdGlvbihyb3csIGkpIHsKICAgICAgcmV0dXJuIGYob2JqZWN0KHJvdyksIGksIGNvbHVtbnMpOwogICAgfTsKICB9CiAgZnVuY3Rpb24gaW5mZXJDb2x1bW5zKHJvd3MpIHsKICAgIHZhciBjb2x1bW5TZXQgPSAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmNyZWF0ZShudWxsKSwgY29sdW1ucyA9IFtdOwogICAgcm93cy5mb3JFYWNoKGZ1bmN0aW9uKHJvdykgewogICAgICBmb3IgKHZhciBjb2x1bW4gaW4gcm93KSB7CiAgICAgICAgaWYgKCEoY29sdW1uIGluIGNvbHVtblNldCkpIHsKICAgICAgICAgIGNvbHVtbnMucHVzaChjb2x1bW5TZXRbY29sdW1uXSA9IGNvbHVtbik7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICAgIHJldHVybiBjb2x1bW5zOwogIH0KICBmdW5jdGlvbiBwYWQodmFsdWUsIHdpZHRoKSB7CiAgICB2YXIgcyA9IHZhbHVlICsgIiIsIGxlbmd0aCA9IHMubGVuZ3RoOwogICAgcmV0dXJuIGxlbmd0aCA8IHdpZHRoID8gbmV3IEFycmF5KHdpZHRoIC0gbGVuZ3RoICsgMSkuam9pbigwKSArIHMgOiBzOwogIH0KICBmdW5jdGlvbiBmb3JtYXRZZWFyKHllYXIpIHsKICAgIHJldHVybiB5ZWFyIDwgMCA/ICItIiArIHBhZCgteWVhciwgNikgOiB5ZWFyID4gOTk5OSA/ICIrIiArIHBhZCh5ZWFyLCA2KSA6IHBhZCh5ZWFyLCA0KTsKICB9CiAgZnVuY3Rpb24gZm9ybWF0RGF0ZShkYXRlKSB7CiAgICB2YXIgaG91cnMgPSBkYXRlLmdldFVUQ0hvdXJzKCksIG1pbnV0ZXMgPSBkYXRlLmdldFVUQ01pbnV0ZXMoKSwgc2Vjb25kcyA9IGRhdGUuZ2V0VVRDU2Vjb25kcygpLCBtaWxsaXNlY29uZHMgPSBkYXRlLmdldFVUQ01pbGxpc2Vjb25kcygpOwogICAgcmV0dXJuIGlzTmFOKGRhdGUpID8gIkludmFsaWQgRGF0ZSIgOiBmb3JtYXRZZWFyKGRhdGUuZ2V0VVRDRnVsbFllYXIoKSkgKyAiLSIgKyBwYWQoZGF0ZS5nZXRVVENNb250aCgpICsgMSwgMikgKyAiLSIgKyBwYWQoZGF0ZS5nZXRVVENEYXRlKCksIDIpICsgKG1pbGxpc2Vjb25kcyA/ICJUIiArIHBhZChob3VycywgMikgKyAiOiIgKyBwYWQobWludXRlcywgMikgKyAiOiIgKyBwYWQoc2Vjb25kcywgMikgKyAiLiIgKyBwYWQobWlsbGlzZWNvbmRzLCAzKSArICJaIiA6IHNlY29uZHMgPyAiVCIgKyBwYWQoaG91cnMsIDIpICsgIjoiICsgcGFkKG1pbnV0ZXMsIDIpICsgIjoiICsgcGFkKHNlY29uZHMsIDIpICsgIloiIDogbWludXRlcyB8fCBob3VycyA/ICJUIiArIHBhZChob3VycywgMikgKyAiOiIgKyBwYWQobWludXRlcywgMikgKyAiWiIgOiAiIik7CiAgfQogIGZ1bmN0aW9uIGRzdihkZWxpbWl0ZXIpIHsKICAgIHZhciByZUZvcm1hdCA9IG5ldyBSZWdFeHAoJ1siJyArIGRlbGltaXRlciArICJcblxyXSIpLCBERUxJTUlURVIgPSBkZWxpbWl0ZXIuY2hhckNvZGVBdCgwKTsKICAgIGZ1bmN0aW9uIHBhcnNlKHRleHQsIGYpIHsKICAgICAgdmFyIGNvbnZlcnQsIGNvbHVtbnMsIHJvd3MgPSBwYXJzZVJvd3ModGV4dCwgZnVuY3Rpb24ocm93LCBpKSB7CiAgICAgICAgaWYgKGNvbnZlcnQpCiAgICAgICAgICByZXR1cm4gY29udmVydChyb3csIGkgLSAxKTsKICAgICAgICBjb2x1bW5zID0gcm93LCBjb252ZXJ0ID0gZiA/IGN1c3RvbUNvbnZlcnRlcihyb3csIGYpIDogb2JqZWN0Q29udmVydGVyKHJvdyk7CiAgICAgIH0pOwogICAgICByb3dzLmNvbHVtbnMgPSBjb2x1bW5zIHx8IFtdOwogICAgICByZXR1cm4gcm93czsKICAgIH0KICAgIGZ1bmN0aW9uIHBhcnNlUm93cyh0ZXh0LCBmKSB7CiAgICAgIHZhciByb3dzID0gW10sIE4gPSB0ZXh0Lmxlbmd0aCwgSSA9IDAsIG4gPSAwLCB0LCBlb2YgPSBOIDw9IDAsIGVvbCA9IGZhbHNlOwogICAgICBpZiAodGV4dC5jaGFyQ29kZUF0KE4gLSAxKSA9PT0gTkVXTElORSkKICAgICAgICAtLU47CiAgICAgIGlmICh0ZXh0LmNoYXJDb2RlQXQoTiAtIDEpID09PSBSRVRVUk4pCiAgICAgICAgLS1OOwogICAgICBmdW5jdGlvbiB0b2tlbigpIHsKICAgICAgICBpZiAoZW9mKQogICAgICAgICAgcmV0dXJuIEVPRjsKICAgICAgICBpZiAoZW9sKQogICAgICAgICAgcmV0dXJuIGVvbCA9IGZhbHNlLCBFT0w7CiAgICAgICAgdmFyIGksIGogPSBJLCBjMjsKICAgICAgICBpZiAodGV4dC5jaGFyQ29kZUF0KGopID09PSBRVU9URSkgewogICAgICAgICAgd2hpbGUgKEkrKyA8IE4gJiYgdGV4dC5jaGFyQ29kZUF0KEkpICE9PSBRVU9URSB8fCB0ZXh0LmNoYXJDb2RlQXQoKytJKSA9PT0gUVVPVEUpCiAgICAgICAgICAgIDsKICAgICAgICAgIGlmICgoaSA9IEkpID49IE4pCiAgICAgICAgICAgIGVvZiA9IHRydWU7CiAgICAgICAgICBlbHNlIGlmICgoYzIgPSB0ZXh0LmNoYXJDb2RlQXQoSSsrKSkgPT09IE5FV0xJTkUpCiAgICAgICAgICAgIGVvbCA9IHRydWU7CiAgICAgICAgICBlbHNlIGlmIChjMiA9PT0gUkVUVVJOKSB7CiAgICAgICAgICAgIGVvbCA9IHRydWU7CiAgICAgICAgICAgIGlmICh0ZXh0LmNoYXJDb2RlQXQoSSkgPT09IE5FV0xJTkUpCiAgICAgICAgICAgICAgKytJOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHRleHQuc2xpY2UoaiArIDEsIGkgLSAxKS5yZXBsYWNlKC8iIi9nLCAnIicpOwogICAgICAgIH0KICAgICAgICB3aGlsZSAoSSA8IE4pIHsKICAgICAgICAgIGlmICgoYzIgPSB0ZXh0LmNoYXJDb2RlQXQoaSA9IEkrKykpID09PSBORVdMSU5FKQogICAgICAgICAgICBlb2wgPSB0cnVlOwogICAgICAgICAgZWxzZSBpZiAoYzIgPT09IFJFVFVSTikgewogICAgICAgICAgICBlb2wgPSB0cnVlOwogICAgICAgICAgICBpZiAodGV4dC5jaGFyQ29kZUF0KEkpID09PSBORVdMSU5FKQogICAgICAgICAgICAgICsrSTsKICAgICAgICAgIH0gZWxzZSBpZiAoYzIgIT09IERFTElNSVRFUikKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICByZXR1cm4gdGV4dC5zbGljZShqLCBpKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGVvZiA9IHRydWUsIHRleHQuc2xpY2UoaiwgTik7CiAgICAgIH0KICAgICAgd2hpbGUgKCh0ID0gdG9rZW4oKSkgIT09IEVPRikgewogICAgICAgIHZhciByb3cgPSBbXTsKICAgICAgICB3aGlsZSAodCAhPT0gRU9MICYmIHQgIT09IEVPRikKICAgICAgICAgIHJvdy5wdXNoKHQpLCB0ID0gdG9rZW4oKTsKICAgICAgICBpZiAoZiAmJiAocm93ID0gZihyb3csIG4rKykpID09IG51bGwpCiAgICAgICAgICBjb250aW51ZTsKICAgICAgICByb3dzLnB1c2gocm93KTsKICAgICAgfQogICAgICByZXR1cm4gcm93czsKICAgIH0KICAgIGZ1bmN0aW9uIHByZWZvcm1hdEJvZHkocm93cywgY29sdW1ucykgewogICAgICByZXR1cm4gcm93cy5tYXAoZnVuY3Rpb24ocm93KSB7CiAgICAgICAgcmV0dXJuIGNvbHVtbnMubWFwKGZ1bmN0aW9uKGNvbHVtbikgewogICAgICAgICAgcmV0dXJuIGZvcm1hdFZhbHVlKHJvd1tjb2x1bW5dKTsKICAgICAgICB9KS5qb2luKGRlbGltaXRlcik7CiAgICAgIH0pOwogICAgfQogICAgZnVuY3Rpb24gZm9ybWF0KHJvd3MsIGNvbHVtbnMpIHsKICAgICAgaWYgKGNvbHVtbnMgPT0gbnVsbCkKICAgICAgICBjb2x1bW5zID0gaW5mZXJDb2x1bW5zKHJvd3MpOwogICAgICByZXR1cm4gW2NvbHVtbnMubWFwKGZvcm1hdFZhbHVlKS5qb2luKGRlbGltaXRlcildLmNvbmNhdChwcmVmb3JtYXRCb2R5KHJvd3MsIGNvbHVtbnMpKS5qb2luKCJcbiIpOwogICAgfQogICAgZnVuY3Rpb24gZm9ybWF0Qm9keShyb3dzLCBjb2x1bW5zKSB7CiAgICAgIGlmIChjb2x1bW5zID09IG51bGwpCiAgICAgICAgY29sdW1ucyA9IGluZmVyQ29sdW1ucyhyb3dzKTsKICAgICAgcmV0dXJuIHByZWZvcm1hdEJvZHkocm93cywgY29sdW1ucykuam9pbigiXG4iKTsKICAgIH0KICAgIGZ1bmN0aW9uIGZvcm1hdFJvd3Mocm93cykgewogICAgICByZXR1cm4gcm93cy5tYXAoZm9ybWF0Um93KS5qb2luKCJcbiIpOwogICAgfQogICAgZnVuY3Rpb24gZm9ybWF0Um93KHJvdykgewogICAgICByZXR1cm4gcm93Lm1hcChmb3JtYXRWYWx1ZSkuam9pbihkZWxpbWl0ZXIpOwogICAgfQogICAgZnVuY3Rpb24gZm9ybWF0VmFsdWUodmFsdWUpIHsKICAgICAgcmV0dXJuIHZhbHVlID09IG51bGwgPyAiIiA6IHZhbHVlIGluc3RhbmNlb2YgRGF0ZSA/IGZvcm1hdERhdGUodmFsdWUpIDogcmVGb3JtYXQudGVzdCh2YWx1ZSArPSAiIikgPyAnIicgKyB2YWx1ZS5yZXBsYWNlKC8iL2csICciIicpICsgJyInIDogdmFsdWU7CiAgICB9CiAgICByZXR1cm4gewogICAgICBwYXJzZSwKICAgICAgcGFyc2VSb3dzLAogICAgICBmb3JtYXQsCiAgICAgIGZvcm1hdEJvZHksCiAgICAgIGZvcm1hdFJvd3MsCiAgICAgIGZvcm1hdFJvdywKICAgICAgZm9ybWF0VmFsdWUKICAgIH07CiAgfQogIHZhciB0c3YgPSBkc3YoIgkiKTsKICB2YXIgdHN2UGFyc2VSb3dzID0gdHN2LnBhcnNlUm93czsKICBjb25zdCBjaHJvbUluZm9CaXNlY3RvciA9IGJpc2VjdG9yKChkKSA9PiBkLnBvcykubGVmdDsKICBjb25zdCBjaHJUb0FicyA9IChjaHJvbSwgY2hyb21Qb3MsIGNocm9tSW5mbykgPT4gY2hyb21JbmZvLmNoclBvc2l0aW9uc1tjaHJvbV0ucG9zICsgY2hyb21Qb3M7CiAgY29uc3QgYWJzVG9DaHIgPSAoYWJzUG9zaXRpb24sIGNocm9tSW5mbykgPT4gewogICAgaWYgKCFjaHJvbUluZm8gfHwgIWNocm9tSW5mby5jdW1Qb3NpdGlvbnMgfHwgIWNocm9tSW5mby5jdW1Qb3NpdGlvbnMubGVuZ3RoKSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfQogICAgbGV0IGluc2VydFBvaW50ID0gY2hyb21JbmZvQmlzZWN0b3IoY2hyb21JbmZvLmN1bVBvc2l0aW9ucywgYWJzUG9zaXRpb24pOwogICAgY29uc3QgbGFzdENociA9IGNocm9tSW5mby5jdW1Qb3NpdGlvbnNbY2hyb21JbmZvLmN1bVBvc2l0aW9ucy5sZW5ndGggLSAxXS5jaHI7CiAgICBjb25zdCBsYXN0TGVuZ3RoID0gY2hyb21JbmZvLmNocm9tTGVuZ3Roc1tsYXN0Q2hyXTsKICAgIGluc2VydFBvaW50IC09IGluc2VydFBvaW50ID4gMCAmJiAxOwogICAgbGV0IGNoclBvc2l0aW9uID0gTWF0aC5mbG9vcihhYnNQb3NpdGlvbiAtIGNocm9tSW5mby5jdW1Qb3NpdGlvbnNbaW5zZXJ0UG9pbnRdLnBvcyk7CiAgICBsZXQgb2Zmc2V0ID0gMDsKICAgIGlmIChjaHJQb3NpdGlvbiA8IDApIHsKICAgICAgb2Zmc2V0ID0gY2hyUG9zaXRpb24gLSAxOwogICAgICBjaHJQb3NpdGlvbiA9IDE7CiAgICB9CiAgICBpZiAoaW5zZXJ0UG9pbnQgPT09IGNocm9tSW5mby5jdW1Qb3NpdGlvbnMubGVuZ3RoIC0gMSAmJiBjaHJQb3NpdGlvbiA+IGxhc3RMZW5ndGgpIHsKICAgICAgb2Zmc2V0ID0gY2hyUG9zaXRpb24gLSBsYXN0TGVuZ3RoOwogICAgICBjaHJQb3NpdGlvbiA9IGxhc3RMZW5ndGg7CiAgICB9CiAgICByZXR1cm4gW2Nocm9tSW5mby5jdW1Qb3NpdGlvbnNbaW5zZXJ0UG9pbnRdLmNociwgY2hyUG9zaXRpb24sIG9mZnNldCwgaW5zZXJ0UG9pbnRdOwogIH07CiAgZnVuY3Rpb24gcGFyc2VDaHJTaXplcyhyb3dzKSB7CiAgICBjb25zdCBpbmZvID0gewogICAgICBjdW1Qb3NpdGlvbnM6IFtdLAogICAgICBjaHJvbUxlbmd0aHM6IHt9LAogICAgICBjaHJQb3NpdGlvbnM6IHt9LAogICAgICB0b3RhbExlbmd0aDogMAogICAgfTsKICAgIHJvd3MuZm9yRWFjaCgoZCwgaSkgPT4gewogICAgICBjb25zdCBjaHIgPSBkWzBdOwogICAgICBjb25zdCBsZW5ndGggPSBOdW1iZXIoZFsxXSk7CiAgICAgIGNvbnN0IGNoclBvc2l0aW9uID0geyBpZDogaSwgY2hyLCBwb3M6IGluZm8udG90YWxMZW5ndGggfTsKICAgICAgaW5mby5jaHJQb3NpdGlvbnNbY2hyXSA9IGNoclBvc2l0aW9uOwogICAgICBpbmZvLmNocm9tTGVuZ3Roc1tjaHJdID0gbGVuZ3RoOwogICAgICBpbmZvLmN1bVBvc2l0aW9ucy5wdXNoKGNoclBvc2l0aW9uKTsKICAgICAgaW5mby50b3RhbExlbmd0aCArPSBsZW5ndGg7CiAgICB9KTsKICAgIHJldHVybiBpbmZvOwogIH0KICBhc3luYyBmdW5jdGlvbiBmZXRjaENocm9tSW5mbyh1cmwpIHsKICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsKTsKICAgIGNvbnN0IGNockluZm9UZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpOwogICAgY29uc3QgZGF0YSA9IHRzdlBhcnNlUm93cyhjaHJJbmZvVGV4dCk7CiAgICBjb25zdCBpbmZvID0gcGFyc2VDaHJTaXplcyhkYXRhKTsKICAgIHJldHVybiB7CiAgICAgIC4uLmluZm8sCiAgICAgIGFic1RvQ2hyOiAoYWJzUG9zKSA9PiBpbmZvLmNoclBvc2l0aW9ucyA/IGFic1RvQ2hyKGFic1BvcywgaW5mbykgOiBudWxsLAogICAgICBjaHJUb0FiczogKFtjaHJOYW1lLCBjaHJQb3NdKSA9PiBpbmZvLmNoclBvc2l0aW9ucyA/IGNoclRvQWJzKGNock5hbWUsIGNoclBvcywgaW5mbykgOiBudWxsCiAgICB9OwogIH0KICBjbGFzcyBSZW1vdGVGaWxlIGV4dGVuZHMgZGlzdCQxLlJlbW90ZUZpbGUgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7CiAgICAgIHRoaXMucmVhZCA9IGFzeW5jIChidWZmZXIsIG9mZnNldCA9IDAsIGxlbmd0aCwgcG9zaXRpb24gPSAwLCBvcHRzID0ge30pID0+IHsKICAgICAgICBjb25zdCB7IGhlYWRlcnMgPSB7fSwgc2lnbmFsLCBvdmVycmlkZXMgPSB7fSB9ID0gb3B0czsKICAgICAgICBpZiAobGVuZ3RoIDwgSW5maW5pdHkpIHsKICAgICAgICAgIGhlYWRlcnMucmFuZ2UgPSBgYnl0ZXM9JHtwb3NpdGlvbn0tJHtwb3NpdGlvbiArIGxlbmd0aH1gOwogICAgICAgIH0gZWxzZSBpZiAobGVuZ3RoID09PSBJbmZpbml0eSAmJiBwb3NpdGlvbiAhPT0gMCkgewogICAgICAgICAgaGVhZGVycy5yYW5nZSA9IGBieXRlcz0ke3Bvc2l0aW9ufS1gOwogICAgICAgIH0KICAgICAgICBjb25zdCBhcmdzID0gewogICAgICAgICAgLi4udGhpcy5iYXNlT3ZlcnJpZGVzLAogICAgICAgICAgLi4ub3ZlcnJpZGVzLAogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAuLi5oZWFkZXJzLAogICAgICAgICAgICAuLi5vdmVycmlkZXMuaGVhZGVycywKICAgICAgICAgICAgLi4udGhpcy5iYXNlT3ZlcnJpZGVzLmhlYWRlcnMKICAgICAgICAgIH0sCiAgICAgICAgICBtZXRob2Q6ICJHRVQiLAogICAgICAgICAgcmVkaXJlY3Q6ICJmb2xsb3ciLAogICAgICAgICAgbW9kZTogImNvcnMiLAogICAgICAgICAgc2lnbmFsCiAgICAgICAgfTsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuZmV0Y2godGhpcy51cmwsIGFyZ3MpOwogICAgICAgIGlmICghcmVzcG9uc2Uub2spIHsKICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSFRUUCAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fSAke3RoaXMudXJsfWApOwogICAgICAgIH0KICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDAgfHwgcmVzcG9uc2Uuc3RhdHVzID09PSAyMDYpIHsKICAgICAgICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHRoaXMuZ2V0QnVmZmVyRnJvbVJlc3BvbnNlKHJlc3BvbnNlKTsKICAgICAgICAgIGNvbnN0IGJ5dGVzQ29waWVkID0gcmVzcG9uc2VEYXRhLmNvcHkoYnVmZmVyLCBvZmZzZXQsIDAsIE1hdGgubWluKGxlbmd0aCwgcmVzcG9uc2VEYXRhLmxlbmd0aCkpOwogICAgICAgICAgY29uc3QgcmVzID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoImNvbnRlbnQtcmFuZ2UiKTsKICAgICAgICAgIGNvbnN0IHNpemVNYXRjaCA9IC9cLyhcZCspJC8uZXhlYyhyZXMgfHwgIiIpOwogICAgICAgICAgaWYgKHNpemVNYXRjaCAmJiBzaXplTWF0Y2hbMV0pIHsKICAgICAgICAgICAgdGhpcy5fc3RhdCA9IHsgc2l6ZTogcGFyc2VJbnQoc2l6ZU1hdGNoWzFdLCAxMCkgfTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiB7IGJ5dGVzUmVhZDogYnl0ZXNDb3BpZWQsIGJ1ZmZlciB9OwogICAgICAgIH0KICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEhUVFAgJHtyZXNwb25zZS5zdGF0dXN9IGZldGNoaW5nICR7dGhpcy51cmx9YCk7CiAgICAgIH07CiAgICB9CiAgfQogIGNvbnN0IHZjZkZpbGVzID0ge307CiAgY29uc3QgdmNmSGVhZGVycyA9IHt9OwogIGNvbnN0IHRiaVZDRlBhcnNlcnMgPSB7fTsKICBjb25zdCBjaHJvbVNpemVzID0ge307CiAgY29uc3QgY2hyb21JbmZvcyA9IHt9OwogIGNvbnN0IHRpbGVWYWx1ZXMgPSB7fTsKICBjb25zdCB0aWxlc2V0SW5mb3MgPSB7fTsKICBjb25zdCBkYXRhQ29uZnMgPSB7fTsKICBjb25zdCBpbml0ID0gKHVpZCwgdmNmVXJsLCB0YmlVcmwsIGNocm9tU2l6ZXNVcmwsIHNhbXBsZUxlbmd0aCkgPT4gewogICAgdmFyIF9hOwogICAgaWYgKCF2Y2ZGaWxlc1t2Y2ZVcmxdKSB7CiAgICAgIHZjZkZpbGVzW3ZjZlVybF0gPSBuZXcgVGFiaXhJbmRleGVkRmlsZSh7CiAgICAgICAgZmlsZWhhbmRsZTogbmV3IFJlbW90ZUZpbGUodmNmVXJsKSwKICAgICAgICB0YmlGaWxlaGFuZGxlOiBuZXcgUmVtb3RlRmlsZSh0YmlVcmwpCiAgICAgIH0pOwogICAgICB2Y2ZIZWFkZXJzW3ZjZlVybF0gPSB2Y2ZGaWxlc1t2Y2ZVcmxdLmdldEhlYWRlcigpOwogICAgfQogICAgaWYgKGNocm9tU2l6ZXNVcmwpIHsKICAgICAgY2hyb21TaXplc1tjaHJvbVNpemVzVXJsXSA9IChfYSA9IGNocm9tU2l6ZXNbY2hyb21TaXplc1VybF0pICE9IG51bGwgPyBfYSA6IGZldGNoQ2hyb21JbmZvKGNocm9tU2l6ZXNVcmwpOwogICAgfQogICAgZGF0YUNvbmZzW3VpZF0gPSB7IHZjZlVybCwgY2hyb21TaXplc1VybCwgc2FtcGxlTGVuZ3RoIH07CiAgfTsKICBjb25zdCB0aWxlc2V0SW5mbyA9ICh1aWQpID0+IHsKICAgIGNvbnN0IHsgY2hyb21TaXplc1VybCwgdmNmVXJsIH0gPSBkYXRhQ29uZnNbdWlkXTsKICAgIGNvbnN0IHByb21pc2VzID0gW3ZjZkhlYWRlcnNbdmNmVXJsXSwgY2hyb21TaXplc1tjaHJvbVNpemVzVXJsXV07CiAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oKFtoZWFkZXIsIGNocm9tSW5mb10pID0+IHsKICAgICAgaWYgKCF0YmlWQ0ZQYXJzZXJzW3ZjZlVybF0pIHsKICAgICAgICB0YmlWQ0ZQYXJzZXJzW3ZjZlVybF0gPSBuZXcgVkNGKHsgaGVhZGVyIH0pOwogICAgICB9CiAgICAgIGNvbnN0IFRJTEVfU0laRSA9IDEwMjQ7CiAgICAgIGNocm9tSW5mb3NbY2hyb21TaXplc1VybF0gPSBjaHJvbUluZm87CiAgICAgIGNvbnN0IHJldFZhbCA9IHsKICAgICAgICB0aWxlX3NpemU6IFRJTEVfU0laRSwKICAgICAgICBtYXhfem9vbTogTWF0aC5jZWlsKE1hdGgubG9nKGNocm9tSW5mby50b3RhbExlbmd0aCAvIFRJTEVfU0laRSkgLyBNYXRoLmxvZygyKSksCiAgICAgICAgbWF4X3dpZHRoOiBjaHJvbUluZm8udG90YWxMZW5ndGgsCiAgICAgICAgbWluX3BvczogWzBdLAogICAgICAgIG1heF9wb3M6IFtjaHJvbUluZm8udG90YWxMZW5ndGhdCiAgICAgIH07CiAgICAgIHRpbGVzZXRJbmZvc1t1aWRdID0gcmV0VmFsOwogICAgICByZXR1cm4gcmV0VmFsOwogICAgfSk7CiAgfTsKICBjb25zdCBnZXRNdXRhdGlvblR5cGUgPSAocmVmLCBhbHQpID0+IHsKICAgIGlmICghYWx0KQogICAgICByZXR1cm4gInVua25vd24iOwogICAgaWYgKHJlZi5sZW5ndGggPT09IGFsdC5sZW5ndGgpCiAgICAgIHJldHVybiAic3Vic3RpdHV0aW9uIjsKICAgIGlmIChyZWYubGVuZ3RoID4gYWx0Lmxlbmd0aCkKICAgICAgcmV0dXJuICJkZWxldGlvbiI7CiAgICBpZiAocmVmLmxlbmd0aCA8IGFsdC5sZW5ndGgpCiAgICAgIHJldHVybiAiaW5zZXJ0aW9uIjsKICAgIHJldHVybiAidW5rbm93biI7CiAgfTsKICBjb25zdCBnZXRTdWJzdGl0dXRpb25UeXBlID0gKHJlZiwgYWx0KSA9PiB7CiAgICBzd2l0Y2ggKHJlZiArIGFsdCkgewogICAgICBjYXNlICJDQSI6CiAgICAgIGNhc2UgIkdUIjoKICAgICAgICByZXR1cm4gIkM+QSI7CiAgICAgIGNhc2UgIkNHIjoKICAgICAgY2FzZSAiR0MiOgogICAgICAgIHJldHVybiAiQz5HIjsKICAgICAgY2FzZSAiQ1QiOgogICAgICBjYXNlICJHQSI6CiAgICAgICAgcmV0dXJuICJDPlQiOwogICAgICBjYXNlICJUQSI6CiAgICAgIGNhc2UgIkFUIjoKICAgICAgICByZXR1cm4gIlQ+QSI7CiAgICAgIGNhc2UgIlRDIjoKICAgICAgY2FzZSAiQUciOgogICAgICAgIHJldHVybiAiVD5DIjsKICAgICAgY2FzZSAiVEciOgogICAgICBjYXNlICJBQyI6CiAgICAgICAgcmV0dXJuICJUPkciOwogICAgICBkZWZhdWx0OgogICAgICAgIHJldHVybiAidW5rbm93biI7CiAgICB9CiAgfTsKICBjb25zdCB0aWxlID0gYXN5bmMgKHVpZCwgeiwgeCkgPT4gewogICAgY29uc3QgeyBjaHJvbVNpemVzVXJsLCB2Y2ZVcmwgfSA9IGRhdGFDb25mc1t1aWRdOwogICAgaWYgKCF2Y2ZIZWFkZXJzW3ZjZlVybF0pCiAgICAgIHJldHVybiBbXTsKICAgIGNvbnN0IENBQ0hFX0tFWSA9IGAke3VpZH0uJHt6fS4ke3h9YDsKICAgIHRpbGVWYWx1ZXNbQ0FDSEVfS0VZXSA9IFtdOwogICAgY29uc3QgdHNJbmZvID0gYXdhaXQgdGlsZXNldEluZm8odWlkKTsKICAgIGNvbnN0IHJlY29yZFByb21pc2VzID0gW107CiAgICBjb25zdCB0aWxlV2lkdGggPSArdHNJbmZvLm1heF93aWR0aCAvIDIgKiogK3o7CiAgICBjb25zdCBtaW5YID0gdHNJbmZvLm1pbl9wb3NbMF0gKyB4ICogdGlsZVdpZHRoOwogICAgY29uc3QgbWF4WCA9IHRzSW5mby5taW5fcG9zWzBdICsgKHggKyAxKSAqIHRpbGVXaWR0aDsKICAgIGxldCBjdXJNaW5YID0gbWluWDsKICAgIGNvbnN0IHsgY2hyb21MZW5ndGhzLCBjdW1Qb3NpdGlvbnMgfSA9IGNocm9tSW5mb3NbY2hyb21TaXplc1VybF07CiAgICBjb25zdCB0YmlWQ0ZQYXJzZXIgPSB0YmlWQ0ZQYXJzZXJzW3ZjZlVybF07CiAgICBjdW1Qb3NpdGlvbnMuZm9yRWFjaCgoY3VtUG9zKSA9PiB7CiAgICAgIGNvbnN0IGNocm9tTmFtZSA9IGN1bVBvcy5jaHI7CiAgICAgIGNvbnN0IGNocm9tU3RhcnQgPSBjdW1Qb3MucG9zOwogICAgICBjb25zdCBjaHJvbUVuZCA9IGN1bVBvcy5wb3MgKyBjaHJvbUxlbmd0aHNbY2hyb21OYW1lXTsKICAgICAgY29uc3QgcGFyc2VMaW5lU3RvcmVEYXRhID0gKGxpbmUsIHByZXZQb3MpID0+IHsKICAgICAgICBjb25zdCB2Y2ZSZWNvcmQgPSB0YmlWQ0ZQYXJzZXIucGFyc2VMaW5lKGxpbmUpOwogICAgICAgIGNvbnN0IFBPUyA9IGN1bVBvcy5wb3MgKyB2Y2ZSZWNvcmQuUE9TICsgMTsKICAgICAgICBsZXQgQUxUOwogICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZjZlJlY29yZC5BTFQpICYmIHZjZlJlY29yZC5BTFQubGVuZ3RoID4gMCkgewogICAgICAgICAgQUxUID0gdmNmUmVjb3JkLkFMVFswXTsKICAgICAgICB9CiAgICAgICAgY29uc3QgRElTVFBSRVYgPSAhcHJldlBvcyA/IG51bGwgOiB2Y2ZSZWNvcmQuUE9TIC0gcHJldlBvczsKICAgICAgICBjb25zdCBESVNUUFJFVkxPR0UgPSAhcHJldlBvcyA/IG51bGwgOiBNYXRoLmxvZyh2Y2ZSZWNvcmQuUE9TIC0gcHJldlBvcyk7CiAgICAgICAgY29uc3QgTVVUVFlQRSA9IGdldE11dGF0aW9uVHlwZSh2Y2ZSZWNvcmQuUkVGLCBBTFQpOwogICAgICAgIGNvbnN0IFNVQlRZUEUgPSBnZXRTdWJzdGl0dXRpb25UeXBlKHZjZlJlY29yZC5SRUYsIEFMVCk7CiAgICAgICAgY29uc3QgUE9TRU5EID0gUE9TICsgdmNmUmVjb3JkLlJFRi5sZW5ndGg7CiAgICAgICAgY29uc3QgZGF0YSA9IHsKICAgICAgICAgIC4uLnZjZlJlY29yZCwKICAgICAgICAgIEFMVCwKICAgICAgICAgIE1VVFRZUEUsCiAgICAgICAgICBTVUJUWVBFLAogICAgICAgICAgSU5GTzogSlNPTi5zdHJpbmdpZnkodmNmUmVjb3JkLklORk8pLAogICAgICAgICAgT1JJR0lOQUxQT1M6IHZjZlJlY29yZC5QT1MsCiAgICAgICAgICBQT1MsCiAgICAgICAgICBQT1NFTkQsCiAgICAgICAgICBESVNUUFJFViwKICAgICAgICAgIERJU1RQUkVWTE9HRQogICAgICAgIH07CiAgICAgICAgT2JqZWN0LmtleXModmNmUmVjb3JkLklORk8pLmZvckVhY2goKGtleSkgPT4gewogICAgICAgICAgY29uc3QgdmFsID0gdmNmUmVjb3JkLklORk9ba2V5XTsKICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbCkpCiAgICAgICAgICAgIHJldHVybiBba2V5LCB2YWxbMF1dOwogICAgICAgICAgcmV0dXJuIFtrZXksIHZhbF07CiAgICAgICAgfSk7CiAgICAgICAgdGlsZVZhbHVlc1tDQUNIRV9LRVldID0gdGlsZVZhbHVlc1tDQUNIRV9LRVldLmNvbmNhdChbZGF0YV0pOwogICAgICAgIHJldHVybiB2Y2ZSZWNvcmQuUE9TOwogICAgICB9OwogICAgICBsZXQgc3RhcnRQb3MsIGVuZFBvczsKICAgICAgaWYgKGNocm9tU3RhcnQgPD0gY3VyTWluWCAmJiBjdXJNaW5YIDwgY2hyb21FbmQpIHsKICAgICAgICBsZXQgcHJldlBPUzsKICAgICAgICBpZiAobWF4WCA+IGNocm9tRW5kKSB7CiAgICAgICAgICBzdGFydFBvcyA9IGN1ck1pblggLSBjaHJvbVN0YXJ0OwogICAgICAgICAgZW5kUG9zID0gY2hyb21FbmQgLSBjaHJvbVN0YXJ0OwogICAgICAgICAgcmVjb3JkUHJvbWlzZXMucHVzaCh2Y2ZGaWxlc1t2Y2ZVcmxdLmdldExpbmVzKGNocm9tTmFtZSwgc3RhcnRQb3MsIGVuZFBvcywgKGxpbmUpID0+IHsKICAgICAgICAgICAgcHJldlBPUyA9IHBhcnNlTGluZVN0b3JlRGF0YShsaW5lLCBwcmV2UE9TKTsKICAgICAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgICAgfSkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzdGFydFBvcyA9IE1hdGguZmxvb3IoY3VyTWluWCAtIGNocm9tU3RhcnQpOwogICAgICAgICAgZW5kUG9zID0gTWF0aC5jZWlsKG1heFggLSBjaHJvbVN0YXJ0KTsKICAgICAgICAgIHJlY29yZFByb21pc2VzLnB1c2godmNmRmlsZXNbdmNmVXJsXS5nZXRMaW5lcyhjaHJvbU5hbWUsIHN0YXJ0UG9zLCBlbmRQb3MsIChsaW5lKSA9PiB7CiAgICAgICAgICAgIHByZXZQT1MgPSBwYXJzZUxpbmVTdG9yZURhdGEobGluZSwgcHJldlBPUyk7CiAgICAgICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICAgIH0pKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgY3VyTWluWCA9IGNocm9tRW5kOwogICAgICB9CiAgICB9KTsKICAgIHJldHVybiBQcm9taXNlLmFsbChyZWNvcmRQcm9taXNlcykudGhlbigodmFsdWVzMikgPT4gdmFsdWVzMi5mbGF0KCkpOwogIH07CiAgY29uc3QgZmV0Y2hUaWxlc0RlYm91bmNlZCA9IGFzeW5jICh1aWQsIHRpbGVJZHMpID0+IHsKICAgIGNvbnN0IHRpbGVzID0ge307CiAgICBjb25zdCB2YWxpZFRpbGVJZHMgPSBbXTsKICAgIGNvbnN0IHRpbGVQcm9taXNlcyA9IFtdOwogICAgZm9yIChjb25zdCB0aWxlSWQgb2YgdGlsZUlkcykgewogICAgICBjb25zdCBwYXJ0cyA9IHRpbGVJZC5zcGxpdCgiLiIpOwogICAgICBjb25zdCB6ID0gcGFyc2VJbnQocGFydHNbMF0sIDEwKTsKICAgICAgY29uc3QgeCA9IHBhcnNlSW50KHBhcnRzWzFdLCAxMCk7CiAgICAgIGlmIChOdW1iZXIuaXNOYU4oeCkgfHwgTnVtYmVyLmlzTmFOKHopKSB7CiAgICAgICAgY29uc29sZS53YXJuKCJJbnZhbGlkIHRpbGUgem9vbSBvciBwb3NpdGlvbjoiLCB6LCB4KTsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICB2YWxpZFRpbGVJZHMucHVzaCh0aWxlSWQpOwogICAgICB0aWxlUHJvbWlzZXMucHVzaCh0aWxlKHVpZCwgeiwgeCkpOwogICAgfQogICAgcmV0dXJuIFByb21pc2UuYWxsKHRpbGVQcm9taXNlcykudGhlbigodmFsdWVzMikgPT4gewogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlczIubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCB2YWxpZFRpbGVJZCA9IHZhbGlkVGlsZUlkc1tpXTsKICAgICAgICB0aWxlc1t2YWxpZFRpbGVJZF0gPSB2YWx1ZXMyW2ldOwogICAgICAgIHRpbGVzW3ZhbGlkVGlsZUlkXS50aWxlUG9zaXRpb25JZCA9IHZhbGlkVGlsZUlkOwogICAgICB9CiAgICAgIHJldHVybiB0aWxlczsKICAgIH0pOwogIH07CiAgY29uc3QgZ2V0VGFidWxhckRhdGEgPSAodWlkLCB0aWxlSWRzKSA9PiB7CiAgICBjb25zdCBkYXRhID0gW107CiAgICB0aWxlSWRzLmZvckVhY2goKHRpbGVJZCkgPT4gewogICAgICBjb25zdCBwYXJ0cyA9IHRpbGVJZC5zcGxpdCgiLiIpOwogICAgICBjb25zdCB6ID0gcGFyc2VJbnQocGFydHNbMF0sIDEwKTsKICAgICAgY29uc3QgeCA9IHBhcnNlSW50KHBhcnRzWzFdLCAxMCk7CiAgICAgIGNvbnN0IHRpbGVWYWx1ZSA9IHRpbGVWYWx1ZXNbYCR7dWlkfS4ke3p9LiR7eH1gXTsKICAgICAgaWYgKCF0aWxlVmFsdWUpIHsKICAgICAgICBjb25zb2xlLndhcm4oYE5vIHRpbGUgZGF0YSBjb25zdHJ1Y3RlZCAoJHt0aWxlSWR9KWApOwogICAgICB9CiAgICAgIGRhdGEucHVzaCh0aWxlVmFsdWUpOwogICAgfSk7CiAgICBsZXQgb3V0cHV0ID0gT2JqZWN0LnZhbHVlcyhkYXRhKS5mbGF0KCk7CiAgICBjb25zdCBzYW1wbGVMZW5ndGggPSBkYXRhQ29uZnNbdWlkXS5zYW1wbGVMZW5ndGg7CiAgICBpZiAob3V0cHV0Lmxlbmd0aCA+PSBzYW1wbGVMZW5ndGgpIHsKICAgICAgY29uc3QgaGlnaFByaW9yaXR5ID0gb3V0cHV0LnNvcnQoKGEsIGIpID0+IHsKICAgICAgICB2YXIgX2EsIF9iOwogICAgICAgIHJldHVybiAtKChfYSA9IGEuRElTVFBSRVYpICE9IG51bGwgPyBfYSA6IDApICsgKChfYiA9IGIuRElTVFBSRVYpICE9IG51bGwgPyBfYiA6IDApOwogICAgICB9KS5zbGljZSgwLCBzYW1wbGVMZW5ndGggLyAyKTsKICAgICAgb3V0cHV0ID0gc2FtcGxlU2l6ZShvdXRwdXQsIHNhbXBsZUxlbmd0aCAvIDIpLmNvbmNhdChoaWdoUHJpb3JpdHkpOwogICAgfQogICAgY29uc3QgYnVmZmVyID0gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKEpTT04uc3RyaW5naWZ5KG91dHB1dCkpLmJ1ZmZlcjsKICAgIHJldHVybiBUcmFuc2ZlcihidWZmZXIsIFtidWZmZXJdKTsKICB9OwogIGNvbnN0IHRpbGVGdW5jdGlvbnMgPSB7CiAgICBpbml0LAogICAgdGlsZXNldEluZm8sCiAgICBmZXRjaFRpbGVzRGVib3VuY2VkLAogICAgdGlsZSwKICAgIGdldFRhYnVsYXJEYXRhCiAgfTsKICBleHBvc2UodGlsZUZ1bmN0aW9ucyk7Cn0pKCk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWFzc2V0cy92Y2Ytd29ya2VyLmEzMmJiNTY0LmpzLm1hcA==\";\nconst blob = typeof window !== \"undefined\" && window.Blob && new Blob([atob(encodedJs)], { type: \"text/javascript;charset=utf-8\" });\nfunction WorkerWrapper() {\n  const objURL = blob && (window.URL || window.webkitURL).createObjectURL(blob);\n  try {\n    return objURL ? new Worker(objURL, {}) : new Worker(\"data:application/javascript;base64,\" + encodedJs, { type: \"module\" });\n  } finally {\n    objURL && (window.URL || window.webkitURL).revokeObjectURL(objURL);\n  }\n}\nconst DEBOUNCE_TIME = 200;\nclass GoslingVcfData {\n  constructor(HGC, dataConfig) {\n    this.dataConfig = dataConfig;\n    this.uid = HGC.libraries.slugid.nice();\n    this.prevRequestTime = 0;\n    this.assembly = dataConfig.assembly;\n    this.toFetch = /* @__PURE__ */ new Set();\n    this.worker = spawn(new WorkerWrapper()).then(async (worker) => {\n      var _a;\n      await worker.init(this.uid, dataConfig.url, dataConfig.indexUrl, GET_CHROM_SIZES(this.assembly).path, (_a = dataConfig.sampleLength) != null ? _a : 1e3);\n      return worker;\n    });\n  }\n  async tilesetInfo(callback) {\n    (await this.worker).tilesetInfo(this.uid).then(callback);\n  }\n  fetchTilesDebounced(receivedTiles, tileIds) {\n    this.track.drawLoadingCue();\n    tileIds.forEach((tileId) => this.toFetch.add(tileId));\n    if (this.fetchTimeout) {\n      clearTimeout(this.fetchTimeout);\n    }\n    this.fetchTimeout = setTimeout(() => {\n      this.sendFetch(receivedTiles, [...this.toFetch]);\n      this.toFetch.clear();\n    }, DEBOUNCE_TIME);\n  }\n  async sendFetch(receivedTiles, tileIds) {\n    (await this.worker).fetchTilesDebounced(this.uid, tileIds).then(receivedTiles);\n  }\n  async getTabularData(uid, tileIds) {\n    const buf = await (await this.worker).getTabularData(uid, tileIds);\n    return JSON.parse(new TextDecoder().decode(buf));\n  }\n}\nconst HIDDEN_BRUSH_EDGE_SIZE = 3;\nconst BRUSH_STYLE_DEFAULT = {\n  color: \"#777\",\n  stroke: \"#777\",\n  strokeWidth: 1,\n  strokeOpacity: 0.7,\n  opacity: 0.3\n};\nclass LinearBrushModel {\n  constructor(selection, hgLibraries, onBrush, style = {}) {\n    this.range = null;\n    this.prevExtent = [0, 0];\n    this.data = this.rangeToData(0, 0);\n    this.offset = [0, 0];\n    this.size = 0;\n    this.externals = {\n      d3Selection: hgLibraries.d3Selection,\n      d3Drag: hgLibraries.d3Drag\n    };\n    this.style = Object.assign({}, BRUSH_STYLE_DEFAULT, style);\n    this.brushSelection = selection.selectAll(\".genomic-range-brush\").data(this.data).enter().append(\"rect\").attr(\"class\", \"genomic-range-brush\").call(this.onDrag());\n    this.onBrush = onBrush;\n  }\n  getRange() {\n    return this.range;\n  }\n  setSize(size) {\n    this.size = size;\n    return this;\n  }\n  setOffset(offsetX, offsetY) {\n    this.offset = [offsetX, offsetY];\n    return this;\n  }\n  updateRange(range2) {\n    if (range2) {\n      this.range = [Math.min(...range2), Math.max(...range2)];\n      this.data = this.rangeToData(...this.range);\n    } else {\n      this.range = null;\n    }\n    return this;\n  }\n  drawBrush(skipApiTrigger = false) {\n    const [x, y] = this.offset;\n    const height = this.size;\n    const getWidth = (d) => Math.abs(d.end - d.start);\n    this.brushSelection.data(this.data).attr(\"transform\", (d) => `translate(${x + d.start}, ${y + 1})`).attr(\"width\", (d) => `${getWidth(d)}px`).attr(\"height\", `${height - 2}px`).attr(\"fill\", this.style.color).attr(\"stroke\", this.style.stroke).attr(\"stroke-width\", `${this.style.strokeWidth}px`).attr(\"fill-opacity\", (d) => d.type === \"body\" ? this.style.opacity : 0).attr(\"stroke-opacity\", (d) => d.type === \"body\" ? this.style.strokeOpacity : 0).attr(\"cursor\", (d) => d.cursor);\n    this.onBrush(this.getRange(), skipApiTrigger);\n    return this;\n  }\n  enable() {\n    this.brushSelection.attr(\"pointer-events\", \"all\");\n    return this;\n  }\n  disable() {\n    this.brushSelection.attr(\"pointer-events\", \"none\");\n    return this;\n  }\n  visible() {\n    this.brushSelection.attr(\"visibility\", \"visible\");\n    return this;\n  }\n  hidden() {\n    this.brushSelection.attr(\"visibility\", \"hidden\");\n    return this;\n  }\n  clear() {\n    this.updateRange(null).drawBrush().hidden().disable();\n    return this;\n  }\n  remove() {\n    this.brushSelection.remove();\n    return this;\n  }\n  rangeToData(start, end) {\n    return [\n      {\n        type: \"body\",\n        cursor: \"grab\",\n        start,\n        end\n      },\n      {\n        type: \"start\",\n        cursor: \"ew-resize\",\n        start: start - HIDDEN_BRUSH_EDGE_SIZE,\n        end: start\n      },\n      {\n        type: \"end\",\n        cursor: \"ew-resize\",\n        start: end,\n        end: end + HIDDEN_BRUSH_EDGE_SIZE\n      }\n    ];\n  }\n  onDrag() {\n    const started = () => {\n      this.startEvent = this.externals.d3Selection.event.sourceEvent;\n      this.prevExtent = this.range;\n    };\n    const dragged = (d) => {\n      var _a;\n      const delta = this.externals.d3Selection.event.sourceEvent.layerX - this.startEvent.layerX;\n      let [s, e] = (_a = this.prevExtent) != null ? _a : [0, 0];\n      if (d.type === \"body\") {\n        s += delta;\n        e += delta;\n      } else if (d.type === \"start\") {\n        s += delta;\n      } else if (d.type === \"end\") {\n        e += delta;\n      }\n      this.updateRange([s, e]).drawBrush();\n    };\n    return this.externals.d3Drag.drag().on(\"start\", started).on(\"drag\", dragged);\n  }\n}\nfunction usePrereleaseRendering(spec) {\n  var _a, _b;\n  return ((_a = spec.data) == null ? void 0 : _a.type) === \"bam\" || ((_b = spec.data) == null ? void 0 : _b.type) === \"vcf\";\n}\nconst DEFAULT_MOUSE_EVENT_STYLE = {\n  stroke: \"black\",\n  strokeWidth: 1,\n  strokeOpacity: 1,\n  color: \"none\",\n  opacity: 1,\n  arrange: \"front\"\n};\nfunction GoslingTrack(HGC, ...args) {\n  if (!new.target) {\n    throw new Error('Uncaught TypeError: Class constructor cannot be invoked without \"new\"');\n  }\n  const { tileProxy } = HGC.services;\n  class GoslingTrackClass extends HGC.tracks.BarTrack {\n    constructor(params) {\n      var _a, _b, _c, _d, _e, _f, _g, _h;\n      const [context2, options] = params;\n      if (usePrereleaseRendering(options.spec)) {\n        try {\n          if (((_a = options.spec.data) == null ? void 0 : _a.type) === \"bam\") {\n            context2.dataFetcher = new BAMDataFetcher(HGC, context2.dataConfig);\n          } else if (((_b = options.spec.data) == null ? void 0 : _b.type) === \"vcf\") {\n            context2.dataFetcher = new GoslingVcfData(HGC, context2.dataConfig);\n          }\n        } catch (e) {\n          console.warn(\"Error loading tabular data-fetcher\", e);\n        }\n      }\n      super(context2, options);\n      context2.dataFetcher.track = this;\n      this.context = context2;\n      this.viewUid = context2.viewUid;\n      if (\"overlay\" in this.options.spec) {\n        this.options.spec.overlay = this.options.spec.overlay.map((o) => {\n          return { ...o, _renderingId: v1() };\n        });\n      } else {\n        this.options.spec._renderingId = v1();\n      }\n      this.tileSize = (_d = (_c = this.tilesetInfo) == null ? void 0 : _c.tile_size) != null ? _d : 1024;\n      this.drawnAtScale = HGC.libraries.d3Scale.scaleLinear();\n      this.scalableGraphics = {};\n      const { valid, errorMessages } = validateTrack(this.options.spec);\n      if (!valid) {\n        console.warn(\"The specification of the following track is invalid\", errorMessages, this.options.spec);\n      }\n      this.extent = { min: Number.MAX_SAFE_INTEGER, max: Number.MIN_SAFE_INTEGER };\n      this.pMouseHover = new HGC.libraries.PIXI.Graphics();\n      this.pMouseSelection = new HGC.libraries.PIXI.Graphics();\n      this.pMain.addChild(this.pMouseHover);\n      this.pMain.addChild(this.pMouseSelection);\n      this.gLegend = HGC.libraries.d3Selection.select(this.context.svgElement).append(\"g\");\n      this.isRangeBrushActivated = false;\n      this.pMask.interactive = true;\n      this.gBrush = HGC.libraries.d3Selection.select(this.context.svgElement).append(\"g\");\n      this.mRangeBrush = new LinearBrushModel(this.gBrush, HGC.libraries, this.onRangeBrush.bind(this), (_e = this.options.spec.style) == null ? void 0 : _e.brush);\n      this.pMask.mousedown = (e) => this.onMouseDown(e.data.getLocalPosition(this.pMain).x, e.data.getLocalPosition(this.pMain).y, e.data.originalEvent.altKey);\n      this.pMask.mouseup = (e) => this.onMouseUp(e.data.getLocalPosition(this.pMain).x, e.data.getLocalPosition(this.pMain).y);\n      this.pMask.mousemove = (e) => this.onMouseMove(e.data.getLocalPosition(this.pMain).x);\n      this.pMask.mouseout = () => this.onMouseOut();\n      this.flipText = this.options.spec.orientation === \"vertical\";\n      if (this.hideMousePosition) {\n        this.hideMousePosition();\n        this.hideMousePosition = void 0;\n      }\n      if (((_f = this.options) == null ? void 0 : _f.showMousePosition) && !this.hideMousePosition) {\n        this.hideMousePosition = HGC.utils.showMousePosition(this, Is2DTrack(resolveSuperposedTracks(this.options.spec)[0]), this.isShowGlobalMousePosition());\n      }\n      this.pLabel.removeChild(this.trackNotFoundText);\n      const loadingTextStyle = getTextStyle({ color: \"black\", size: 12 });\n      this.loadingTextStyleObj = new HGC.libraries.PIXI.TextStyle(loadingTextStyle);\n      this.loadingTextBg = new HGC.libraries.PIXI.Graphics();\n      this.loadingText = new HGC.libraries.PIXI.Text(\"\", loadingTextStyle);\n      this.loadingText.anchor.x = 1;\n      this.loadingText.anchor.y = 1;\n      this.pLabel.addChild(this.loadingTextBg);\n      this.pLabel.addChild(this.loadingText);\n      this.svgData = [];\n      this.textGraphics = [];\n      this.textsBeingUsed = 0;\n      this.loadingStatus = { loading: 0, processing: 0, rendering: 0 };\n      HGC.libraries.PIXI.GRAPHICS_CURVES.adaptive = (_h = (_g = this.options.spec.style) == null ? void 0 : _g.enableSmoothPath) != null ? _h : false;\n      if (HGC.libraries.PIXI.GRAPHICS_CURVES.adaptive) {\n        HGC.libraries.PIXI.GRAPHICS_CURVES.maxLength = 1;\n        HGC.libraries.PIXI.GRAPHICS_CURVES.maxSegments = 2048 * 10;\n      }\n    }\n    draw() {\n      var _a, _b;\n      this.clearMouseEventData();\n      this.svgData = [];\n      this.textsBeingUsed = 0;\n      (_a = this.pMouseHover) == null ? void 0 : _a.clear();\n      const processTilesAndDraw = () => {\n        this.preprocessAllTiles();\n        super.draw();\n        this.prevVisibleAndFetchedTiles = this.visibleAndFetchedTiles();\n      };\n      if ((this.dataFetcher instanceof BAMDataFetcher || this.dataFetcher instanceof GoslingVcfData) && !isEqual(this.visibleAndFetchedTiles(), this.prevVisibleAndFetchedTiles)) {\n        this.updateTileAsync(this.dataFetcher, processTilesAndDraw);\n      } else {\n        processTilesAndDraw();\n      }\n      (_b = this.mRangeBrush) == null ? void 0 : _b.drawBrush(true);\n    }\n    initTile(tile) {\n      this.drawTile(tile);\n    }\n    updateTile() {\n    }\n    renderTile() {\n    }\n    drawTile(tile) {\n      tile.drawnAtScale = this._xScale.copy();\n      if (!tile.goslingModels) {\n        return;\n      }\n      tile.graphics.clear();\n      tile.graphics.removeChildren();\n      tile.goslingModels.forEach((model) => {\n        const trackWidth = this.dimensions[0];\n        const zoomLevel = this._xScale.invert(trackWidth) - this._xScale.invert(0);\n        if (!model.trackVisibility({ zoomLevel })) {\n          return;\n        }\n        drawPreEmbellishment(HGC, this, tile, model, this.options.theme);\n        drawMark(HGC, this, tile, model);\n        drawPostEmbellishment(HGC, this, tile, model, this.options.theme);\n      });\n      this.forceDraw();\n    }\n    rerender(newOptions) {\n      this.options = newOptions;\n      if (this.options.spec.layout === \"circular\") {\n        this.mRangeBrush.remove();\n      }\n      this.clearMouseEventData();\n      this.svgData = [];\n      this.textsBeingUsed = 0;\n      this.preprocessAllTiles(true);\n      this.draw();\n      this.forceDraw();\n    }\n    clearMouseEventData() {\n      const models = this.visibleAndFetchedTiles().map((tile) => {\n        var _a;\n        return (_a = tile.goslingModels) != null ? _a : [];\n      }).flat();\n      models.forEach((model) => model.getMouseEventModel().clear());\n    }\n    remove() {\n      super.remove();\n      if (this.gLegend) {\n        this.gLegend.remove();\n        this.gLegend = null;\n      }\n      this.mRangeBrush.remove();\n    }\n    setDimensions(newDimensions) {\n      this.oldDimensions = this.dimensions;\n      super.setDimensions(newDimensions);\n      this.mRangeBrush.setSize(newDimensions[1]);\n    }\n    setPosition(newPosition) {\n      super.setPosition(newPosition);\n      [this.pMain.position.x, this.pMain.position.y] = this.position;\n      this.mRangeBrush.setOffset(...newPosition);\n    }\n    forceDraw() {\n      this.animate();\n    }\n    zoomed(newXScale, newYScale) {\n      const range2 = this.mRangeBrush.getRange();\n      this.mRangeBrush.updateRange(range2 ? [newXScale(this._xScale.invert(range2[0])), newXScale(this._xScale.invert(range2[1]))] : null);\n      this.xScale(newXScale);\n      this.yScale(newYScale);\n      this.refreshTiles();\n      this.draw();\n      this.forceDraw();\n    }\n    async updateTileAsync(tabularDataFetcher, callback) {\n      this.xDomain = this._xScale.domain();\n      this.xRange = this._xScale.range();\n      this.drawLoadingCue();\n      const tabularData = await tabularDataFetcher.getTabularData(this.dataFetcher.uid, Object.values(this.fetchedTiles).map((x) => x.remoteId));\n      this.drawLoadingCue();\n      const tiles = this.visibleAndFetchedTiles();\n      if (tiles == null ? void 0 : tiles[0]) {\n        const tile = tiles[0];\n        tile.tileData.tabularData = tabularData;\n        const [refTile] = HGC.utils.trackUtils.calculate1DVisibleTiles(this.tilesetInfo, this._xScale);\n        tile.tileData.zoomLevel = refTile[0];\n        tile.tileData.tilePos = [refTile[1]];\n      }\n      this.drawLoadingCue();\n      callback();\n      this.drawLoadingCue();\n    }\n    scaleScalableGraphics(graphics, xScale, drawnAtScale) {\n      const drawnAtScaleExtent = drawnAtScale.domain()[1] - drawnAtScale.domain()[0];\n      const xScaleExtent = xScale.domain()[1] - xScale.domain()[0];\n      const tileK = drawnAtScaleExtent / xScaleExtent;\n      const newRange = xScale.domain().map(drawnAtScale);\n      const posOffset = newRange[0];\n      graphics.forEach((g) => {\n        g.scale.x = tileK;\n        g.position.x = -posOffset * tileK;\n      });\n    }\n    visibleAndFetchedIds() {\n      return Object.keys(this.fetchedTiles).filter((x) => this.visibleTileIds.has(x));\n    }\n    visibleAndFetchedTiles() {\n      return this.visibleAndFetchedIds().map((x) => this.fetchedTiles[x]);\n    }\n    calculateVisibleTiles() {\n      var _a;\n      if (usePrereleaseRendering(this.options.spec)) {\n        const tiles = HGC.utils.trackUtils.calculate1DVisibleTiles(this.tilesetInfo, this._xScale);\n        for (const tile of tiles) {\n          const { tileWidth } = this.getTilePosAndDimensions(tile[0], [tile[1], tile[1]], this.tilesetInfo.tile_size);\n          const DEFAULT_MAX_TILE_WIDTH = ((_a = this.options.spec.data) == null ? void 0 : _a.type) === \"bam\" ? 2e4 : Number.MAX_SAFE_INTEGER;\n          if (tileWidth > (this.tilesetInfo.max_tile_width || DEFAULT_MAX_TILE_WIDTH)) {\n            this.forceDraw();\n            return;\n          }\n          this.forceDraw();\n        }\n        this.setVisibleTiles(tiles);\n      } else {\n        if (!this.tilesetInfo) {\n          return;\n        }\n        this.zoomLevel = this.calculateZoomLevel();\n        if (this.tilesetInfo.resolutions) {\n          const sortedResolutions = this.tilesetInfo.resolutions.map((x) => +x).sort((a, b) => b - a);\n          this.xTiles = tileProxy.calculateTilesFromResolution(sortedResolutions[this.zoomLevel], this._xScale, this.tilesetInfo.min_pos[0], this.tilesetInfo.max_pos[0]);\n          if (Is2DTrack(resolveSuperposedTracks(this.options.spec)[0])) {\n            this.yTiles = tileProxy.calculateTilesFromResolution(sortedResolutions[this.zoomLevel], this._yScale, this.tilesetInfo.min_pos[0], this.tilesetInfo.max_pos[0]);\n          }\n          const tiles = this.tilesToId(this.xTiles, this.yTiles, this.zoomLevel);\n          this.setVisibleTiles(tiles);\n        } else {\n          this.xTiles = tileProxy.calculateTiles(this.zoomLevel, this.relevantScale(), this.tilesetInfo.min_pos[0], this.tilesetInfo.max_pos[0], this.tilesetInfo.max_zoom, this.tilesetInfo.max_width);\n          if (Is2DTrack(resolveSuperposedTracks(this.options.spec)[0])) {\n            this.yTiles = tileProxy.calculateTiles(this.zoomLevel, this._yScale, this.tilesetInfo.min_pos[1], this.tilesetInfo.max_pos[1], this.tilesetInfo.max_zoom, this.tilesetInfo.max_width1 || this.tilesetInfo.max_width);\n          }\n          const tiles = this.tilesToId(this.xTiles, this.yTiles, this.zoomLevel);\n          this.setVisibleTiles(tiles);\n        }\n      }\n    }\n    getTilePosAndDimensions(zoomLevel, tilePos, binsPerTileIn) {\n      const binsPerTile = binsPerTileIn || this.tilesetInfo.bins_per_dimension || 256;\n      if (this.tilesetInfo.resolutions) {\n        const sortedResolutions = this.tilesetInfo.resolutions.map((x) => +x).sort((a, b) => b - a);\n        const chosenResolution = sortedResolutions[zoomLevel];\n        const [xTilePos, yTilePos] = tilePos;\n        const tileWidth = chosenResolution * binsPerTile;\n        const tileHeight = tileWidth;\n        const tileX = tileWidth * xTilePos;\n        const tileY = tileHeight * yTilePos;\n        return {\n          tileX,\n          tileY,\n          tileWidth,\n          tileHeight\n        };\n      } else {\n        const [xTilePos, yTilePos] = tilePos;\n        const minX = this.tilesetInfo.min_pos[0];\n        const minY = this.tilesetInfo.min_pos[1];\n        const tileWidth = this.tilesetInfo.max_width / 2 ** zoomLevel;\n        const tileHeight = this.tilesetInfo.max_width / 2 ** zoomLevel;\n        const tileX = minX + xTilePos * tileWidth;\n        const tileY = minY + yTilePos * tileHeight;\n        return {\n          tileX,\n          tileY,\n          tileWidth,\n          tileHeight\n        };\n      }\n    }\n    tilesToId(xTiles, yTiles, zoomLevel) {\n      if (xTiles && !yTiles) {\n        return xTiles.map((x) => [zoomLevel, x]);\n      } else {\n        const tiles = [];\n        xTiles.forEach((x) => yTiles.forEach((y) => tiles.push([zoomLevel, x, y])));\n        return tiles;\n      }\n    }\n    drawLoadingCue() {\n      if (this.fetching.size) {\n        const margin = 6;\n        const text = `Fetching... ${Array.from(this.fetching).join(\" \")}`;\n        this.loadingText.text = text;\n        this.loadingText.x = this.position[0] + this.dimensions[0] - margin / 2;\n        this.loadingText.y = this.position[1] + this.dimensions[1] - margin / 2;\n        const metric = HGC.libraries.PIXI.TextMetrics.measureText(text, this.loadingTextStyleObj);\n        const { width: w, height: h } = metric;\n        this.loadingTextBg.clear();\n        this.loadingTextBg.lineStyle(1, colorToHex(\"grey\"), 1, 0.5);\n        this.loadingTextBg.beginFill(colorToHex(\"white\"), 0.8);\n        this.loadingTextBg.drawRect(this.position[0] + this.dimensions[0] - w - margin - 1, this.position[1] + this.dimensions[1] - h - margin - 1, w + margin, h + margin);\n        this.loadingText.visible = true;\n        this.loadingTextBg.visible = true;\n      } else {\n        this.loadingText.visible = false;\n        this.loadingTextBg.visible = false;\n      }\n    }\n    reorganizeTileInfo() {\n      var _a, _b;\n      const tiles = this.visibleAndFetchedTiles();\n      this.tileSize = (_b = (_a = this.tilesetInfo) == null ? void 0 : _a.tile_size) != null ? _b : 1024;\n      tiles.forEach((t) => {\n        t.gos = {};\n        const keys = Object.keys(t.tileData).filter((d) => !+d && d !== \"0\");\n        keys.forEach((k) => {\n          t.gos[k] = t.tileData[k];\n        });\n        t.gos.raw = Array.from(t.tileData);\n      });\n    }\n    updateScaleOffsetFromOriginalSpec(_renderingId, scaleOffset, channelKey) {\n      resolveSuperposedTracks(this.options.spec).map((spec) => {\n        if (spec._renderingId === _renderingId) {\n          const channel = spec[channelKey];\n          if (IsChannelDeep(channel)) {\n            channel.scaleOffset = scaleOffset;\n          }\n        }\n      });\n    }\n    shareScaleOffsetAcrossTracksAndTiles(scaleOffset, channelKey) {\n      const models = [];\n      this.visibleAndFetchedTiles().forEach((tile) => {\n        models.push(...tile.goslingModels);\n      });\n      models.forEach((d) => {\n        const channel = d.spec()[channelKey];\n        if (IsChannelDeep(channel)) {\n          channel.scaleOffset = scaleOffset;\n        }\n        const channelOriginal = d.originalSpec()[channelKey];\n        if (IsChannelDeep(channelOriginal)) {\n          channelOriginal.scaleOffset = scaleOffset;\n        }\n      });\n    }\n    shouldCombineTiles() {\n      var _a, _b, _c, _d, _e, _f;\n      return ((_a = this.options.spec.dataTransform) == null ? void 0 : _a.find((t) => t.type === \"displace\")) && ((_c = (_b = this.visibleAndFetchedTiles()) == null ? void 0 : _b[0]) == null ? void 0 : _c.tileData) && !((_e = (_d = this.visibleAndFetchedTiles()) == null ? void 0 : _d[0]) == null ? void 0 : _e.tileData.dense) || ((_f = this.options.spec.data) == null ? void 0 : _f.type) === \"bam\";\n    }\n    combineAllTilesIfNeeded() {\n      var _a, _b, _c;\n      if (!this.shouldCombineTiles()) {\n        return;\n      }\n      const tiles = this.visibleAndFetchedTiles();\n      if (!tiles || tiles.length === 0) {\n        return;\n      }\n      this.tileSize = ((_b = (_a = this.tilesetInfo) == null ? void 0 : _a.tile_size) != null ? _b : 1024) * tiles.length;\n      let newData = [];\n      tiles.forEach((t, i) => {\n        newData = [...newData, ...t.tileData];\n        t.mergedToAnotherTile = i !== 0;\n      });\n      tiles[0].gos.raw = newData;\n      if ((_c = tiles[0].gos.raw[0]) == null ? void 0 : _c.uid) {\n        tiles[0].gos.raw = uniqBy(tiles[0].gos.raw, \"uid\");\n      }\n    }\n    preprocessAllTiles(force = false) {\n      const models = [];\n      this.reorganizeTileInfo();\n      this.combineAllTilesIfNeeded();\n      this.visibleAndFetchedTiles().forEach((tile) => {\n        if (force) {\n          tile.goslingModels = [];\n        }\n        const tileModels = this.preprocessTile(tile);\n        tileModels == null ? void 0 : tileModels.forEach((m) => {\n          models.push(m);\n        });\n      });\n      shareScaleAcrossTracks(models);\n      const flatTileData = [].concat(...models.map((d) => d.data()));\n      if (flatTileData.length !== 0) {\n        publish(\"rawData\", { id: this.viewUid, data: flatTileData });\n      }\n    }\n    preprocessTile(tile) {\n      if (tile.mergedToAnotherTile) {\n        tile.goslingModels = [];\n        return;\n      }\n      if (tile.goslingModels && tile.goslingModels.length !== 0) {\n        return tile.goslingModels;\n      }\n      if (!tile.gos.tilePos) {\n        return;\n      }\n      tile.goslingModels = [];\n      const spec = JSON.parse(JSON.stringify(this.options.spec));\n      const [trackWidth, trackHeight] = this.dimensions;\n      resolveSuperposedTracks(spec).forEach((resolved) => {\n        var _a;\n        if (resolved.mark === \"brush\") {\n          return;\n        }\n        if (!tile.gos.tabularData) {\n          const { tileX, tileY, tileWidth, tileHeight } = this.getTilePosAndDimensions(tile.gos.zoomLevel, tile.gos.tilePos, this.tilesetInfo.bins_per_dimension || ((_a = this.tilesetInfo) == null ? void 0 : _a.tile_size));\n          tile.gos.tabularData = getTabularData(resolved, {\n            ...tile.gos,\n            tileX,\n            tileY,\n            tileWidth,\n            tileHeight,\n            tileSize: this.tileSize\n          });\n        }\n        tile.gos.tabularDataFiltered = Array.from(tile.gos.tabularData);\n        if (resolved.dataTransform) {\n          resolved.dataTransform.forEach((t) => {\n            switch (t.type) {\n              case \"filter\":\n                tile.gos.tabularDataFiltered = filterData(t, tile.gos.tabularDataFiltered);\n                break;\n              case \"concat\":\n                tile.gos.tabularDataFiltered = concatString(t, tile.gos.tabularDataFiltered);\n                break;\n              case \"replace\":\n                tile.gos.tabularDataFiltered = replaceString(t, tile.gos.tabularDataFiltered);\n                break;\n              case \"log\":\n                tile.gos.tabularDataFiltered = calculateData(t, tile.gos.tabularDataFiltered);\n                break;\n              case \"exonSplit\":\n                tile.gos.tabularDataFiltered = splitExon(t, tile.gos.tabularDataFiltered, resolved.assembly);\n                break;\n              case \"genomicLength\":\n                tile.gos.tabularDataFiltered = calculateGenomicLength(t, tile.gos.tabularDataFiltered);\n                break;\n              case \"svType\":\n                tile.gos.tabularDataFiltered = inferSvType(t, tile.gos.tabularDataFiltered);\n                break;\n              case \"coverage\":\n                tile.gos.tabularDataFiltered = aggregateCoverage(t, tile.gos.tabularDataFiltered, this._xScale.copy());\n                break;\n              case \"subjson\":\n                tile.gos.tabularDataFiltered = parseSubJSON(t, tile.gos.tabularDataFiltered);\n                break;\n              case \"displace\":\n                tile.gos.tabularDataFiltered = displace(t, tile.gos.tabularDataFiltered, this._xScale.copy());\n                break;\n            }\n          });\n        }\n        try {\n          if (PubSub$1) {\n            const NUM_OF_ROWS_IN_PREVIEW = 100;\n            const numOrRows = tile.gos.tabularDataFiltered.length;\n            PubSub$1.publish(\"data-preview\", {\n              id: this.viewUid,\n              dataConfig: JSON.stringify({ data: resolved.data }),\n              data: NUM_OF_ROWS_IN_PREVIEW > numOrRows ? tile.gos.tabularDataFiltered : sampleSize(tile.gos.tabularDataFiltered, NUM_OF_ROWS_IN_PREVIEW)\n            });\n          }\n        } catch (e) {\n        }\n        const axisSize = IsXAxis(resolved) ? HIGLASS_AXIS_SIZE : 0;\n        const [w, h] = [trackWidth, trackHeight + axisSize];\n        const circularFactor = Math.min(w, h) / Math.min(resolved.width, resolved.height);\n        if (resolved.innerRadius) {\n          resolved.innerRadius = resolved.innerRadius * circularFactor;\n        }\n        if (resolved.outerRadius) {\n          resolved.outerRadius = resolved.outerRadius * circularFactor;\n        }\n        resolved.width = w;\n        resolved.height = h;\n        const gm = new GoslingTrackModel(resolved, tile.gos.tabularDataFiltered, this.options.theme);\n        tile.goslingModels.push(gm);\n      });\n      return tile.goslingModels;\n    }\n    getIndicesOfVisibleDataInTile(tile) {\n      var _a, _b, _c;\n      const visible = this._xScale.range();\n      if (!this.tilesetInfo)\n        return [null, null];\n      const { tileX, tileWidth } = this.getTilePosAndDimensions(tile.gos.zoomLevel, tile.gos.tilePos, this.tilesetInfo.bins_per_dimension || ((_a = this.tilesetInfo) == null ? void 0 : _a.tile_size));\n      const tileXScale = HGC.libraries.d3Scale.scaleLinear().domain([0, ((_b = this.tilesetInfo) == null ? void 0 : _b.tile_size) || ((_c = this.tilesetInfo) == null ? void 0 : _c.bins_per_dimension)]).range([tileX, tileX + tileWidth]);\n      const start = Math.max(0, Math.round(tileXScale.invert(this._xScale.invert(visible[0]))));\n      const end = Math.min(tile.gos.dense.length, Math.round(tileXScale.invert(this._xScale.invert(visible[1]))));\n      return [start, end];\n    }\n    minVisibleValue() {\n    }\n    maxVisibleValue() {\n    }\n    exportSVG() {\n    }\n    getElementsWithinMouse(mouseX, mouseY) {\n      var _a;\n      const models = this.visibleAndFetchedTiles().map((tile) => {\n        var _a2;\n        return (_a2 = tile.goslingModels) != null ? _a2 : [];\n      }).flat();\n      const mouseEvents = (_a = this.options.spec.experimental) == null ? void 0 : _a.mouseEvents;\n      const multiHovering = IsMouseEventsDeep(mouseEvents) && mouseEvents.enableMouseOverOnMultipleMarks;\n      const idField = IsMouseEventsDeep(mouseEvents) && mouseEvents.groupMarksByField;\n      const mergedCapturedElements = models.map((model) => model.getMouseEventModel().findAll(mouseX, mouseY, true)).flat();\n      if (!multiHovering) {\n        mergedCapturedElements.splice(1, mergedCapturedElements.length - 1);\n      }\n      if (mergedCapturedElements.length !== 0 && idField) {\n        const source = Array.from(mergedCapturedElements);\n        models.forEach((model) => {\n          const siblings = model.getMouseEventModel().getSiblings(source, idField);\n          mergedCapturedElements.push(...siblings);\n        });\n      }\n      return mergedCapturedElements;\n    }\n    highlightMarks(g, marks, style) {\n      g.lineStyle(style.strokeWidth, colorToHex(style.stroke), style.strokeOpacity, 0.5);\n      g.beginFill(colorToHex(style.color), style.color === \"none\" ? 0 : style.opacity);\n      marks.forEach((d) => {\n        if (d.type === \"point\") {\n          const [x, y, r = 3] = d.polygon;\n          g.drawCircle(x, y, r);\n        } else if (d.type === \"line\") {\n          g.moveTo(d.polygon[0], d.polygon[1]);\n          flatArrayToPairArray(d.polygon).map((d2) => g.lineTo(d2[0], d2[1]));\n        } else {\n          g.drawPolygon(d.polygon);\n        }\n      });\n    }\n    onRangeBrush(range2, skipApiTrigger = false) {\n      var _a, _b, _c, _d;\n      this.pMouseSelection.clear();\n      if (range2 === null) {\n        if (!skipApiTrigger) {\n          publish(\"rangeSelect\", { id: this.viewUid, genomicRange: null, data: [] });\n        }\n        return;\n      }\n      const [startX, endX] = range2;\n      const models = this.visibleAndFetchedTiles().map((tile) => {\n        var _a2;\n        return (_a2 = tile.goslingModels) != null ? _a2 : [];\n      }).flat();\n      let capturedElements = models.map((model) => model.getMouseEventModel().findAllWithinRange(startX, endX, true)).flat();\n      const mouseEvents = (_a = this.options.spec.experimental) == null ? void 0 : _a.mouseEvents;\n      const idField = IsMouseEventsDeep(mouseEvents) && mouseEvents.groupMarksByField;\n      if (capturedElements.length !== 0 && idField) {\n        models.forEach((model) => {\n          const siblings = model.getMouseEventModel().getSiblings(capturedElements, idField);\n          const siblingIds = Array.from(new Set(siblings.map((d) => d.value[idField])));\n          capturedElements = capturedElements.filter((d) => siblingIds.indexOf(d.value[idField]) === -1);\n        });\n      }\n      if (capturedElements.length !== 0) {\n        const g = this.pMouseSelection;\n        if (((_c = (_b = this.options.spec.style) == null ? void 0 : _b.select) == null ? void 0 : _c.arrange) !== \"behind\") {\n          this.pMain.removeChild(g);\n          this.pMain.addChild(g);\n        }\n        this.highlightMarks(g, capturedElements, Object.assign({}, DEFAULT_MOUSE_EVENT_STYLE, (_d = this.options.spec.style) == null ? void 0 : _d.select));\n      }\n      if (!skipApiTrigger) {\n        const genomicRange = [\n          getRelativeGenomicPosition(Math.floor(this._xScale.invert(startX))),\n          getRelativeGenomicPosition(Math.floor(this._xScale.invert(endX)))\n        ];\n        publish(\"rangeSelect\", {\n          id: this.viewUid,\n          genomicRange,\n          data: capturedElements.map((d) => d.value)\n        });\n      }\n      this.forceDraw();\n    }\n    onMouseDown(mouseX, mouseY, isAltPressed) {\n      var _a;\n      this.mouseDownX = mouseX;\n      this.mouseDownY = mouseY;\n      const mouseEvents = (_a = this.options.spec.experimental) == null ? void 0 : _a.mouseEvents;\n      const rangeSelectEnabled = !!mouseEvents || IsMouseEventsDeep(mouseEvents) && !!mouseEvents.rangeSelect;\n      this.isRangeBrushActivated = rangeSelectEnabled && isAltPressed;\n      this.pMouseHover.clear();\n    }\n    onMouseMove(mouseX) {\n      if (this.options.spec.layout === \"circular\") {\n        return;\n      }\n      if (this.isRangeBrushActivated) {\n        this.mRangeBrush.updateRange([mouseX, this.mouseDownX]).drawBrush().visible().disable();\n      }\n    }\n    onMouseUp(mouseX, mouseY) {\n      var _a;\n      const mouseEvents = (_a = this.options.spec.experimental) == null ? void 0 : _a.mouseEvents;\n      const clickEnabled = !!mouseEvents || IsMouseEventsDeep(mouseEvents) && !!mouseEvents.click;\n      const isDrag = Math.sqrt((this.mouseDownX - mouseX) ** 2 + (this.mouseDownY - mouseY) ** 2) > 1;\n      if (!this.isRangeBrushActivated && !isDrag) {\n        this.mRangeBrush.clear();\n        this.pMouseSelection.clear();\n      } else {\n        this.mRangeBrush.enable();\n      }\n      this.isRangeBrushActivated = false;\n      if (!this.tilesetInfo) {\n        return;\n      }\n      if (!isDrag && clickEnabled) {\n        const genomicPosition = getRelativeGenomicPosition(Math.floor(this._xScale.invert(mouseX)));\n        const capturedElements = this.getElementsWithinMouse(mouseX, mouseY);\n        if (capturedElements.length !== 0) {\n          publish(\"click\", {\n            id: this.viewUid,\n            genomicPosition,\n            data: capturedElements.map((d) => d.value)\n          });\n        }\n      }\n    }\n    onMouseOut() {\n      this.isRangeBrushActivated = false;\n      document.body.style.cursor = \"default\";\n      this.pMouseHover.clear();\n    }\n    getMouseOverHtml(mouseX, mouseY) {\n      var _a, _b, _c, _d, _e;\n      if (this.isRangeBrushActivated) {\n        return;\n      }\n      if (!this.tilesetInfo) {\n        return;\n      }\n      this.pMouseHover.clear();\n      const genomicPosition = getRelativeGenomicPosition(Math.floor(this._xScale.invert(mouseX)));\n      const capturedElements = this.getElementsWithinMouse(mouseX, mouseY);\n      if (capturedElements.length !== 0) {\n        document.body.style.cursor = \"pointer\";\n      } else {\n        document.body.style.cursor = \"default\";\n      }\n      if (capturedElements.length !== 0) {\n        const mouseEvents = (_a = this.options.spec.experimental) == null ? void 0 : _a.mouseEvents;\n        const mouseOverEnabled = !!mouseEvents || IsMouseEventsDeep(mouseEvents) && !!mouseEvents.mouseOver;\n        if (mouseOverEnabled) {\n          const g = this.pMouseHover;\n          if (((_c = (_b = this.options.spec.style) == null ? void 0 : _b.mouseOver) == null ? void 0 : _c.arrange) !== \"behind\") {\n            this.pMain.removeChild(g);\n            this.pMain.addChild(g);\n          }\n          this.highlightMarks(g, capturedElements, Object.assign({}, DEFAULT_MOUSE_EVENT_STYLE, (_d = this.options.spec.style) == null ? void 0 : _d.mouseOver));\n          publish(\"mouseOver\", {\n            id: this.viewUid,\n            genomicPosition,\n            data: capturedElements.map((d) => d.value)\n          });\n        }\n        const models = this.visibleAndFetchedTiles().map((tile) => {\n          var _a2;\n          return (_a2 = tile.goslingModels) != null ? _a2 : [];\n        }).flat();\n        const firstTooltipSpec = (_e = models.find((m) => {\n          var _a2;\n          return m.spec().tooltip && ((_a2 = m.spec().tooltip) == null ? void 0 : _a2.length) !== 0;\n        })) == null ? void 0 : _e.spec().tooltip;\n        if (firstTooltipSpec) {\n          let content = firstTooltipSpec.map((d) => {\n            var _a2;\n            const rawValue = capturedElements[0].value[d.field];\n            let value = rawValue;\n            if (d.type === \"quantitative\" && d.format) {\n              value = HGC.libraries.d3Format.format(d.format)(+rawValue);\n            } else if (d.type === \"genomic\") {\n              const { chromosome, position } = getRelativeGenomicPosition(+rawValue);\n              value = `${chromosome}:${HGC.libraries.d3Format.format(\",\")(position)}`;\n            }\n            return `<tr><td style='padding: 4px 8px'>${(_a2 = d.alt) != null ? _a2 : d.field}</td><td style='padding: 4px 8px'><b>${value}</b></td></tr>`;\n          }).join(\"\");\n          content = `<table style='text-align: left; margin-top: 12px'>${content}</table>`;\n          if (capturedElements.length > 1) {\n            content += `<div style='padding: 4px 8px; margin-top: 4px; text-align: center; color: grey'>${capturedElements.length - 1} Additional Selections...</div>`;\n          }\n          return `<div>${content}</div>`;\n        }\n      }\n    }\n  }\n  return new GoslingTrackClass(args);\n}\nconst goslingIcon = `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 400 400\" width={30} height={30}>\n    <rect style={{ fill: 'none' }} width=\"400\" height=\"400\" />\n    <circle cx=\"110.62\" cy=\"129.64\" r=\"41.69\" />\n    <circle style={{ fill: '#fff' }} cx=\"124.14\" cy=\"114.12\" r=\"10.76\" />\n    <circle cx=\"288.56\" cy=\"129.64\" r=\"41.69\" />\n    <circle style={{ fill: '#fff' }} cx=\"302.07\" cy=\"114.12\" r=\"10.76\" />\n    <path\n        style={{ fill: '#e18241' }}\n        d=\"M313.1,241.64l8.61-22.09a430.11,430.11,0,0,0-88-15.87L224,225.63A384.54,384.54,0,0,1,313.1,241.64Z\"\n    />\n    <path\n        style={{ fill: '#e18241' }}\n        d=\"M208.63,260.53a299.77,299.77,0,0,1,90.56,16.79L308,254.79a371.68,371.68,0,0,0-90-15.47Z\"\n    />\n    <path\n        style={{ fill: '#e18241' }}\n        d=\"M174.4,225.56l-9-22a431.34,431.34,0,0,0-88,15.43l8.9,22A385.08,385.08,0,0,1,174.4,225.56Z\"\n    />\n    <path\n        style={{ fill: '#e18241' }}\n        d=\"M100.71,276.35a300.51,300.51,0,0,1,87.91-15.82L180,239.29a372.51,372.51,0,0,0-88.3,14.76Z\"\n    />\n    <path\n        style={{ fill: '#e18241' }}\n        d=\"M106.52,290.71c27.53,13.92,59.05,21.34,92.05,21.34h0c33.68,0,65.83-7.72,93.75-22.2a291.31,291.31,0,0,0-186.33-.4Z\"\n    />\n</svg>`;\nGoslingTrack.config = {\n  type: \"gosling-track\",\n  datatype: [\"multivec\", \"epilogos\"],\n  rotatable: true,\n  local: false,\n  orientation: \"1d-horizontal\",\n  thumbnail: new DOMParser().parseFromString(goslingIcon, \"text/xml\").documentElement,\n  availableOptions: [\n    \"labelPosition\",\n    \"labelColor\",\n    \"labelTextOpacity\",\n    \"labelBackgroundOpacity\",\n    \"trackBorderWidth\",\n    \"trackBorderColor\",\n    \"trackType\",\n    \"scaledHeight\",\n    \"backgroundColor\",\n    \"barBorder\",\n    \"sortLargestOnTop\",\n    \"theme\",\n    \"axisPositionHorizontal\"\n  ],\n  defaultOptions: {\n    labelPosition: \"none\",\n    labelColor: \"black\",\n    labelTextOpacity: 0.4,\n    trackBorderWidth: 0,\n    trackBorderColor: \"black\",\n    backgroundColor: \"white\",\n    barBorder: false,\n    sortLargestOnTop: true,\n    axisPositionHorizontal: \"left\",\n    theme: \"light\"\n  }\n};\nlet once = false;\nfunction init() {\n  if (once)\n    return;\n  higlassRegister({\n    name: \"GoslingTrack\",\n    track: GoslingTrack,\n    config: GoslingTrack.config\n  });\n  higlassRegister({\n    name: \"Gosling2DTrack\",\n    track: GoslingTrack,\n    config: {\n      ...GoslingTrack.config,\n      type: \"gosling-2d-track\",\n      orientation: \"2d\"\n    }\n  });\n  higlassRegister({\n    name: \"AxisTrack\",\n    track: AxisTrack,\n    config: AxisTrack.config\n  });\n  higlassRegister({\n    name: \"TextTrack\",\n    track: TextTrack,\n    config: TextTrack.config\n  });\n  higlassRegister({\n    name: \"BrushTrack\",\n    track: BrushTrack,\n    config: BrushTrack.config\n  });\n  higlassRegister({ dataFetcher: CSVDataFetcher, config: CSVDataFetcher.config }, { pluginType: \"dataFetcher\" });\n  higlassRegister({ dataFetcher: RawDataFetcher, config: RawDataFetcher.config }, { pluginType: \"dataFetcher\" });\n  higlassRegister({ dataFetcher: BBIDataFetcher, config: BBIDataFetcher.config }, { pluginType: \"dataFetcher\" });\n  once = true;\n}\nfunction getBoundingBox(trackInfos) {\n  let width = 0;\n  let height = 0;\n  trackInfos.forEach((_) => {\n    const w = _.boundingBox.x + _.boundingBox.width;\n    const h = _.boundingBox.y + _.boundingBox.height;\n    if (height < h) {\n      height = h;\n    }\n    if (width < w) {\n      width = w;\n    }\n  });\n  return { width, height };\n}\nfunction getRelativeTrackInfo(spec, theme) {\n  var _a, _b;\n  let trackInfos = [];\n  traverseAndCollectTrackInfo(spec, trackInfos);\n  const size = getBoundingBox(trackInfos);\n  if (spec.title || spec.subtitle) {\n    const titleHeight = (spec.title ? ((_a = theme.root.titleFontSize) != null ? _a : 18) + DEWFAULT_TITLE_PADDING_ON_TOP_AND_BOTTOM : 0) + (spec.subtitle ? ((_b = theme.root.subtitleFontSize) != null ? _b : 14) + DEWFAULT_TITLE_PADDING_ON_TOP_AND_BOTTOM : 0);\n    const marginBottom = 4;\n    size.height += titleHeight + marginBottom;\n    size.height = size.height + (8 - size.height % 8);\n    trackInfos.forEach((_) => {\n      _.boundingBox.y += titleHeight + marginBottom;\n    });\n    trackInfos = [\n      {\n        track: getTextTrack({ width: size.width, height: titleHeight }, spec.title, spec.subtitle),\n        boundingBox: { x: 0, y: 0, width: size.width, height: titleHeight },\n        layout: { x: 0, y: 0, w: 12, h: titleHeight / size.height * 12 }\n      },\n      ...trackInfos\n    ];\n  } else {\n    size.height = size.height + (8 - size.height % 8);\n  }\n  const pixelPreciseMarginPadding = !(typeof spec.responsiveSize !== \"object\" ? spec.responsiveSize : spec.responsiveSize.height);\n  trackInfos.forEach((_) => {\n    _.layout.x = _.boundingBox.x / size.width * 12;\n    _.layout.w = _.boundingBox.width / size.width * 12;\n    _.layout.y = pixelPreciseMarginPadding ? _.boundingBox.y : _.boundingBox.y / size.height * 12;\n    _.layout.h = pixelPreciseMarginPadding ? _.boundingBox.height : _.boundingBox.height / size.height * 12;\n  });\n  return { trackInfos, size };\n}\nfunction traverseAndCollectTrackInfo(spec, output, dx = 0, dy = 0, circularRootNotFound = true) {\n  let cumWidth = 0;\n  let cumHeight = 0;\n  let allChildCircularLayout = true;\n  let traversedAtLeastOnce = false;\n  traverseTracksAndViews(spec, (tv) => {\n    traversedAtLeastOnce = true;\n    if (tv.layout !== \"circular\") {\n      allChildCircularLayout = false;\n    }\n  });\n  let noChildConcatArrangement = true;\n  traverseViewArrangements(spec, (a) => {\n    if (a.arrangement === \"vertical\" || a.arrangement === \"horizontal\") {\n      noChildConcatArrangement = false;\n    }\n  });\n  const isThisCircularRoot = circularRootNotFound && allChildCircularLayout && traversedAtLeastOnce && noChildConcatArrangement && (\"views\" in spec && (spec.arrangement === \"parallel\" || spec.arrangement === \"serial\") || \"tracks\" in spec);\n  const numTracksBeforeInsert = output.length;\n  if (\"tracks\" in spec) {\n    const tracks = spec.tracks;\n    if (spec.orientation === \"vertical\") {\n      cumHeight = Math.max(...tracks.map((d) => d.height));\n      tracks.forEach((track, i, array) => {\n        if (getNumOfXAxes([track]) === 1) {\n          track.width += HIGLASS_AXIS_SIZE;\n        }\n        track.height = cumHeight;\n        output.push({\n          track,\n          boundingBox: {\n            x: dx + cumWidth,\n            y: dy,\n            width: track.width,\n            height: cumHeight\n          },\n          layout: { x: 0, y: 0, w: 0, h: 0 }\n        });\n        if (array[i + 1] && array[i + 1].overlayOnPreviousTrack)\n          ;\n        else {\n          cumWidth += track.width;\n          if (i !== array.length - 1) {\n            cumWidth += spec.spacing !== void 0 ? spec.spacing : 0;\n          }\n        }\n      });\n    } else {\n      cumWidth = Math.max(...tracks.map((d) => d.width));\n      tracks.forEach((track, i, array) => {\n        if (getNumOfXAxes([track]) === 1) {\n          track.height += HIGLASS_AXIS_SIZE;\n        }\n        if (Is2DTrack(resolveSuperposedTracks(track)[0]) && getNumOfYAxes([track]) === 1) {\n          cumWidth += HIGLASS_AXIS_SIZE;\n        }\n        track.width = cumWidth;\n        output.push({\n          track,\n          boundingBox: {\n            x: dx,\n            y: dy + cumHeight,\n            width: cumWidth,\n            height: track.height\n          },\n          layout: { x: 0, y: 0, w: 0, h: 0 }\n        });\n        if (array[i + 1] && array[i + 1].overlayOnPreviousTrack)\n          ;\n        else {\n          cumHeight += track.height;\n          if (i !== array.length - 1) {\n            cumHeight += spec.spacing !== void 0 ? spec.spacing : 0;\n          }\n        }\n      });\n    }\n  } else {\n    if (spec.arrangement === \"parallel\" || spec.arrangement === \"vertical\") {\n      const spacing = spec.spacing !== void 0 ? spec.spacing : DEFAULT_VIEW_SPACING;\n      spec.views.forEach((v, i, array) => {\n        var _a, _b, _c, _d, _e;\n        const viewBB = traverseAndCollectTrackInfo(v, output, dx + ((_a = v.xOffset) != null ? _a : 0), dy + ((_b = v.yOffset) != null ? _b : 0) + cumHeight, !isThisCircularRoot && circularRootNotFound);\n        if (cumWidth < ((_c = v.xOffset) != null ? _c : 0) + viewBB.width) {\n          cumWidth = ((_d = v.xOffset) != null ? _d : 0) + viewBB.width;\n        }\n        if (i !== array.length - 1) {\n          cumHeight += spacing;\n        }\n        cumHeight += ((_e = v.yOffset) != null ? _e : 0) + viewBB.height;\n      });\n    } else if (spec.arrangement === \"serial\" || spec.arrangement === \"horizontal\") {\n      spec.views.forEach((v, i, array) => {\n        var _a, _b, _c, _d, _e;\n        const spacing = spec.spacing !== void 0 ? spec.spacing : DEFAULT_VIEW_SPACING;\n        const viewBB = traverseAndCollectTrackInfo(v, output, dx + ((_a = v.xOffset) != null ? _a : 0) + cumWidth, dy + ((_b = v.yOffset) != null ? _b : 0), !isThisCircularRoot && circularRootNotFound);\n        if (cumHeight < ((_c = v.xOffset) != null ? _c : 0) + viewBB.height) {\n          cumHeight = ((_d = v.xOffset) != null ? _d : 0) + viewBB.height;\n        }\n        if (i !== array.length - 1) {\n          cumWidth += spacing;\n        }\n        cumWidth += ((_e = v.xOffset) != null ? _e : 0) + viewBB.width;\n      });\n    }\n  }\n  if (isThisCircularRoot) {\n    const cTracks = output.slice(numTracksBeforeInsert);\n    const ifMultipleViews = \"views\" in spec && (spec.arrangement === \"parallel\" || spec.arrangement === \"serial\") && spec.views.length > 1;\n    const SPACING = spec.spacing !== void 0 ? spec.spacing : DEFAULT_VIEW_SPACING;\n    const PADDING = DEFAULT_CIRCULAR_VIEW_PADDING;\n    const INNER_RADIUS = spec.centerRadius !== void 0 ? spec.centerRadius : DEFAULT_INNER_RADIUS_PROP;\n    const TOTAL_RADIUS = cumWidth / 2 + PADDING;\n    const TOTAL_RING_SIZE = TOTAL_RADIUS * (1 - INNER_RADIUS);\n    cTracks.forEach((t, i) => {\n      var _a, _b;\n      t.track.layout = \"circular\";\n      t.track.outerRadius = TOTAL_RADIUS - PADDING - (t.boundingBox.y - dy) / cumHeight * TOTAL_RING_SIZE;\n      t.track.innerRadius = TOTAL_RADIUS - PADDING - (t.boundingBox.y + t.boundingBox.height - dy) / cumHeight * TOTAL_RING_SIZE;\n      const spacingAngle = SPACING / cumWidth * 360;\n      t.track.startAngle = spacingAngle + (t.boundingBox.x - dx) / cumWidth * (cumWidth - SPACING) / cumWidth * 360;\n      t.track.endAngle = (t.boundingBox.x + t.boundingBox.width - dx) / cumWidth * (cumWidth - SPACING) / cumWidth * 360;\n      t.boundingBox.x = dx + ((_a = t.track.xOffset) != null ? _a : 0);\n      t.boundingBox.y = dy + ((_b = t.track.yOffset) != null ? _b : 0);\n      t.boundingBox.height = t.track.height = t.boundingBox.width = t.track.width = TOTAL_RADIUS * 2;\n      if (i !== 0) {\n        t.track.overlayOnPreviousTrack = true;\n      }\n      if (ifMultipleViews) {\n        if (IsOverlaidTrack(t.track)) {\n          t.track.overlay = t.track.overlay.filter((o) => o.mark !== \"brush\");\n        }\n      }\n    });\n    cumHeight = TOTAL_RADIUS * 2;\n  }\n  spec._assignedWidth = cumWidth;\n  spec._assignedHeight = cumHeight;\n  return { x: dx, y: dy, width: cumWidth, height: cumHeight };\n}\nfunction getNumOfXAxes(tracks) {\n  return tracks.filter((t) => IsXAxis(t)).length;\n}\nfunction getNumOfYAxes(tracks) {\n  return tracks.filter((t) => IsYAxis(t)).length;\n}\nconst getTextTrack = (size, title2, subtitle) => {\n  return JSON.parse(JSON.stringify({\n    mark: \"header\",\n    width: size.width,\n    height: size.height,\n    title: title2,\n    subtitle\n  }));\n};\nfunction parseServerAndTilesetUidFromUrl(url) {\n  if (!url.includes(\"tileset_info/?d=\") || !url.includes(\"https:\") && !url.includes(\"http:\")) {\n    return { server: void 0, tilesetUid: void 0 };\n  }\n  const server = url.split(\"tileset_info/?d=\")[0];\n  const tilesetUid = url.split(\"tileset_info/?d=\")[1];\n  return { server, tilesetUid };\n}\nfunction goslingToHiGlass(hgModel, gosTrack, bb, layout, theme) {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n;\n  const firstResolvedSpec = resolveSuperposedTracks(gosTrack)[0];\n  if (!firstResolvedSpec.id) {\n    firstResolvedSpec.id = v4();\n  }\n  const assembly = firstResolvedSpec.assembly;\n  if (IsDataDeep(firstResolvedSpec.data)) {\n    let server, tilesetUid;\n    if (IsDataDeepTileset(firstResolvedSpec.data)) {\n      const parsed = parseServerAndTilesetUidFromUrl(firstResolvedSpec.data.url);\n      server = parsed.server;\n      tilesetUid = parsed.tilesetUid;\n    }\n    const genomicChannel = getGenomicChannelFromTrack(firstResolvedSpec);\n    const genomicChannelKey = getGenomicChannelKeyFromTrack(firstResolvedSpec);\n    const isXGenomic = genomicChannelKey === \"x\" || genomicChannelKey === \"xe\";\n    const xDomain = isXGenomic && IsChannelDeep(genomicChannel) ? genomicChannel.domain : void 0;\n    const yDomain = Is2DTrack(firstResolvedSpec) && IsChannelDeep(firstResolvedSpec.y) ? firstResolvedSpec.y.domain : void 0;\n    const width = bb.width - (firstResolvedSpec.layout !== \"circular\" && firstResolvedSpec.orientation === \"vertical\" && IsXAxis(firstResolvedSpec) ? HIGLASS_AXIS_SIZE : 0);\n    const height = bb.height - (firstResolvedSpec.layout !== \"circular\" && firstResolvedSpec.orientation === \"horizontal\" && IsXAxis(firstResolvedSpec) ? HIGLASS_AXIS_SIZE : 0);\n    const hgTrack = {\n      uid: `${firstResolvedSpec.id}-track`,\n      type: Is2DTrack(firstResolvedSpec) ? \"gosling-2d-track\" : \"gosling-track\",\n      server,\n      tilesetUid,\n      width,\n      height,\n      options: {\n        showMousePosition: firstResolvedSpec.layout === \"circular\" ? false : theme.root.showMousePosition,\n        mousePositionColor: theme.root.mousePositionColor,\n        name: firstResolvedSpec.layout === \"linear\" ? firstResolvedSpec.title : \" \",\n        labelPosition: firstResolvedSpec.title ? theme.track.titleAlign === \"left\" ? \"topLeft\" : \"topRight\" : \"none\",\n        labelShowResolution: false,\n        labelColor: theme.track.titleColor,\n        labelBackgroundColor: theme.track.titleBackground,\n        labelBackgroundOpacity: 0.5,\n        labelTextOpacity: 1,\n        labelLeftMargin: 1,\n        labelTopMargin: 1,\n        labelRightMargin: 0,\n        labelBottomMargin: 0,\n        backgroundColor: \"transparent\",\n        spec: { ...gosTrack },\n        theme\n      }\n    };\n    if (firstResolvedSpec.data && IsDataDeep(firstResolvedSpec.data)) {\n      const dataType = firstResolvedSpec.data.type;\n      if (dataType === \"csv\" || dataType === \"json\" || dataType === \"bigwig\" || dataType === \"bam\" || dataType === \"vcf\") {\n        hgTrack.data = { ...firstResolvedSpec.data, assembly };\n      } else if (dataType === \"experimentalPlugin\") {\n        hgTrack.data = { ...firstResolvedSpec.data.options, type: firstResolvedSpec.data.name, assembly };\n      }\n    }\n    if (IsHiGlassMatrix(firstResolvedSpec)) {\n      hgTrack.type = \"heatmap\";\n      const colorStr = IsChannelDeep(firstResolvedSpec.color) && typeof firstResolvedSpec.color.range === \"string\" ? firstResolvedSpec.color.range : \"viridis\";\n      hgTrack.options.colorRange = getHiGlassColorRange(colorStr);\n      hgTrack.options.trackBorderWidth = (_b = (_a = firstResolvedSpec.style) == null ? void 0 : _a.outlineWidth) != null ? _b : theme.track.outlineWidth;\n      hgTrack.options.trackBorderColor = (_d = (_c = firstResolvedSpec.style) == null ? void 0 : _c.outline) != null ? _d : theme.track.outline;\n      hgTrack.options.extent = (_f = (_e = firstResolvedSpec.style) == null ? void 0 : _e.matrixExtent) != null ? _f : \"full\";\n      hgTrack.options.colorbarPosition = ((_g = firstResolvedSpec.color) == null ? void 0 : _g.legend) ? hgTrack.options.extent === \"lower-left\" ? \"bottomLeft\" : \"topRight\" : \"hidden\";\n    }\n    if (firstResolvedSpec.overlayOnPreviousTrack) {\n      hgModel.setViewOrientation(firstResolvedSpec.orientation).addTrackToCombined(hgTrack);\n    } else {\n      hgModel.setViewOrientation(firstResolvedSpec.orientation).setAssembly(assembly).addDefaultView(firstResolvedSpec.id, assembly).setDomain(xDomain, yDomain != null ? yDomain : xDomain).adjustDomain(firstResolvedSpec.orientation, width, height).setMainTrack(hgTrack).addTrackSourceServers(server).setZoomFixed(firstResolvedSpec.static === true).setZoomLimits((_h = firstResolvedSpec.zoomLimits) != null ? _h : [1, null]).setLayout(layout);\n    }\n    const getAxisNarrowType = (c, orientation = \"horizontal\", width2, height2) => {\n      const narrowSizeThreshold = 400;\n      const narrowerSizeThreshold = 200;\n      if (orientation === \"horizontal\") {\n        if (c === \"x\" && width2 <= narrowerSizeThreshold || c === \"y\" && height2 <= narrowerSizeThreshold) {\n          return \"narrower\";\n        } else if (c === \"x\" && width2 <= narrowSizeThreshold || c === \"y\" && height2 <= narrowSizeThreshold) {\n          return \"narrow\";\n        } else {\n          return \"regular\";\n        }\n      } else {\n        if (c === \"x\" && height2 <= narrowerSizeThreshold || c === \"y\" && width2 <= narrowerSizeThreshold) {\n          return \"narrower\";\n        } else if (c === \"x\" && height2 <= narrowSizeThreshold || c === \"y\" && width2 <= narrowSizeThreshold) {\n          return \"narrow\";\n        } else {\n          return \"regular\";\n        }\n      }\n    };\n    [\"x\", \"y\"].forEach((c) => {\n      const channel = firstResolvedSpec[c];\n      if (IsChannelDeep(channel) && \"axis\" in channel && channel.axis && channel.axis !== \"none\" && channel.type === \"genomic\") {\n        const narrowType = getAxisNarrowType(c, gosTrack.orientation, bb.width, bb.height);\n        hgModel.setAxisTrack(channel.axis, narrowType, {\n          id: `${firstResolvedSpec.id}-${channel.axis}-axis`,\n          layout: firstResolvedSpec.layout,\n          innerRadius: channel.axis === \"top\" ? firstResolvedSpec.outerRadius - HIGLASS_AXIS_SIZE : firstResolvedSpec.innerRadius,\n          outerRadius: channel.axis === \"top\" ? firstResolvedSpec.outerRadius : firstResolvedSpec.innerRadius + HIGLASS_AXIS_SIZE,\n          width: firstResolvedSpec.width,\n          height: firstResolvedSpec.height,\n          startAngle: firstResolvedSpec.startAngle,\n          endAngle: firstResolvedSpec.endAngle,\n          theme\n        });\n      }\n    });\n    hgModel.validateSpec(true);\n  } else if (firstResolvedSpec.mark === \"header\") {\n    hgModel.addDefaultView(`${firstResolvedSpec.id}-title`).setLayout(layout);\n    if (typeof firstResolvedSpec.title === \"string\") {\n      hgModel.setTextTrack(bb.width, ((_i = theme.root.titleFontSize) != null ? _i : 18) + DEWFAULT_TITLE_PADDING_ON_TOP_AND_BOTTOM, firstResolvedSpec.title, theme.root.titleColor, (_j = theme.root.titleFontSize) != null ? _j : 18, theme.root.titleFontWeight, theme.root.titleAlign, theme.root.titleBackgroundColor, (_k = theme.root.titleFontFamily) != null ? _k : DEFAULT_TEXT_STYLE.fontFamily);\n    }\n    if (typeof firstResolvedSpec.subtitle === \"string\") {\n      hgModel.setTextTrack(bb.width, ((_l = theme.root.subtitleFontSize) != null ? _l : 14) + DEWFAULT_TITLE_PADDING_ON_TOP_AND_BOTTOM, firstResolvedSpec.subtitle, theme.root.subtitleColor, (_m = theme.root.subtitleFontSize) != null ? _m : 14, theme.root.subtitleFontWeight, theme.root.subtitleAlign, theme.root.subtitleBackgroundColor, (_n = theme.root.subtitleFontFamily) != null ? _n : DEFAULT_TEXT_STYLE.fontFamily);\n    }\n  }\n  return hgModel;\n}\nfunction getLinkingInfo(hgModel) {\n  const linkingInfo = [];\n  hgModel.spec().views.forEach((v) => {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o;\n    const viewId = v.uid;\n    let spec = (_e = (_d = (_c = (_b = (_a = v.tracks.center) == null ? void 0 : _a[0]) == null ? void 0 : _b.contents) == null ? void 0 : _c[0]) == null ? void 0 : _d.options) == null ? void 0 : _e.spec;\n    if (!spec) {\n      spec = (_j = (_i = (_h = (_g = (_f = v.tracks.left) == null ? void 0 : _f[0]) == null ? void 0 : _g.contents) == null ? void 0 : _h[0]) == null ? void 0 : _i.options) == null ? void 0 : _j.spec;\n      if (!spec) {\n        spec = (_o = (_n = (_m = (_l = (_k = v.tracks.left) == null ? void 0 : _k[1]) == null ? void 0 : _l.contents) == null ? void 0 : _m[0]) == null ? void 0 : _n.options) == null ? void 0 : _o.spec;\n      }\n    }\n    if (!viewId || !spec)\n      return;\n    const resolved = resolveSuperposedTracks(spec);\n    resolved.forEach((spec2) => {\n      SUPPORTED_CHANNELS.forEach((cKey) => {\n        var _a2, _b2, _c2, _d2;\n        const channel = spec2[cKey];\n        if (IsChannelDeep(channel) && \"linkingId\" in channel && channel.linkingId) {\n          linkingInfo.push({\n            layout: spec2.layout === \"circular\" ? \"circular\" : \"linear\",\n            viewId,\n            linkId: channel.linkingId,\n            isBrush: spec2.mark === \"brush\",\n            style: {\n              color: (_a2 = spec2.color) == null ? void 0 : _a2.value,\n              stroke: (_b2 = spec2.stroke) == null ? void 0 : _b2.value,\n              strokeWidth: (_c2 = spec2.strokeWidth) == null ? void 0 : _c2.value,\n              opacity: (_d2 = spec2.opacity) == null ? void 0 : _d2.value,\n              startAngle: spec2.startAngle,\n              endAngle: spec2.endAngle,\n              innerRadius: spec2.innerRadius,\n              outerRadius: spec2.outerRadius\n            }\n          });\n          return;\n        }\n      });\n    });\n  });\n  return linkingInfo;\n}\nfunction renderHiGlass(spec, trackInfos, setHg, theme) {\n  if (trackInfos.length === 0) {\n    return;\n  }\n  const hgModel = new HiGlassModel();\n  trackInfos.forEach((tb) => {\n    const { track, boundingBox: bb, layout } = tb;\n    goslingToHiGlass(hgModel, track, bb, layout, theme);\n  });\n  const linkingInfos = getLinkingInfo(hgModel);\n  linkingInfos.filter((d) => d.isBrush).forEach((info) => {\n    var _a;\n    hgModel.addBrush(info.layout, info.viewId, theme, (_a = linkingInfos.find((d) => !d.isBrush && d.linkId === info.linkId)) == null ? void 0 : _a.viewId, info.style);\n  });\n  linkingInfos.filter((d) => !d.isBrush).forEach((d) => {\n    hgModel.spec().zoomLocks.locksByViewUid[d.viewId] = d.linkId;\n    hgModel.spec().locationLocks.locksByViewUid[d.viewId] = d.linkId;\n  });\n  const uniqueLinkIds = Array.from(new Set(linkingInfos.map((d) => d.linkId)));\n  uniqueLinkIds.forEach((linkId) => {\n    hgModel.spec().zoomLocks.locksDict[linkId] = { uid: linkId };\n    hgModel.spec().locationLocks.locksDict[linkId] = { uid: linkId };\n    linkingInfos.filter((d) => !d.isBrush).filter((d) => d.linkId === linkId).forEach((d) => {\n      hgModel.spec().zoomLocks.locksDict[linkId][d.viewId] = [1246253105e-1, 1246253105e-1, 249250.621];\n      hgModel.spec().locationLocks.locksDict[linkId][d.viewId] = [1246253105e-1, 1246253105e-1, 249250.621];\n    });\n  });\n  setHg(hgModel.spec(), getBoundingBox(trackInfos), spec);\n}\nfunction manageResponsiveSpecs(spec, wFactor, hFactor, parentWidth, parentHeight) {\n  if (typeof spec._assignedWidth === \"undefined\" || typeof spec._assignedHeight === \"undefined\") {\n    console.warn(\"Responsive spec cannot be used when width and height of a view is not determined yet.\");\n    return false;\n  }\n  let replaced = false;\n  const { responsiveSpec } = spec;\n  const width = spec._assignedWidth * wFactor;\n  const height = spec._assignedHeight * hFactor;\n  const dimensions = { width, height, aspectRatio: width / height };\n  const parentDimensions = { width: parentWidth, height: parentHeight, aspectRatio: parentWidth / parentHeight };\n  if (responsiveSpec) {\n    responsiveSpec.forEach((specAndCondition) => {\n      const { spec: alternativeSpec, selectivity } = specAndCondition;\n      if (isSelectResponsiveSpec(selectivity, dimensions, parentDimensions) && !replaced) {\n        Object.keys(alternativeSpec).forEach((k) => {\n          spec[k] = alternativeSpec[k];\n        });\n        delete spec.responsiveSpec;\n        replaced = true;\n        return;\n      }\n    });\n  }\n  if (\"views\" in spec) {\n    spec.views.forEach((view) => {\n      replaced = manageResponsiveSpecs(view, wFactor, hFactor, parentWidth, parentHeight) || replaced;\n    });\n  }\n  return replaced;\n}\nfunction isSelectResponsiveSpec(conditions, assignedDimensions, parentDimensions) {\n  if (conditions.length === 0)\n    return false;\n  let isSelect = true;\n  conditions.forEach((condition) => {\n    const { measure, operation, threshold, target } = condition;\n    isSelect = isSelect && logicalComparison((target === \"container\" ? parentDimensions : assignedDimensions)[measure], operation, threshold) === 1;\n  });\n  return isSelect;\n}\nfunction compile(spec, setHg, templates, theme, containerStatus) {\n  var _a, _b;\n  const specCopy = JSON.parse(JSON.stringify(spec));\n  overrideDataTemplates(specCopy);\n  replaceTrackTemplates(specCopy, templates);\n  traverseToFixSpecDownstream(specCopy);\n  const trackInfosAndSize = getRelativeTrackInfo(specCopy, theme);\n  let { trackInfos } = trackInfosAndSize;\n  const { size } = trackInfosAndSize;\n  const isResponsiveWidth = typeof spec.responsiveSize === \"object\" && ((_a = spec.responsiveSize) == null ? void 0 : _a.width) || spec.responsiveSize;\n  const isResponsiveHeight = typeof spec.responsiveSize === \"object\" && ((_b = spec.responsiveSize) == null ? void 0 : _b.height) || spec.responsiveSize;\n  const wFactor = isResponsiveWidth && containerStatus.containerSize ? containerStatus.containerSize.width / size.width : 1;\n  const hFactor = isResponsiveHeight && containerStatus.containerSize ? containerStatus.containerSize.height / size.height : 1;\n  const pWidth = containerStatus.containerParentSize ? containerStatus.containerParentSize.width : Number.MAX_SAFE_INTEGER;\n  const pHeight = containerStatus.containerParentSize ? containerStatus.containerParentSize.height : Number.MAX_SAFE_INTEGER;\n  const replaced = manageResponsiveSpecs(specCopy, wFactor, hFactor, pWidth, pHeight);\n  if (replaced) {\n    traverseToFixSpecDownstream(specCopy);\n    trackInfos = getRelativeTrackInfo(specCopy, theme).trackInfos;\n  }\n  renderHiGlass(JSON.parse(JSON.stringify(specCopy)), trackInfos, setHg, theme);\n}\ninit();\nconst HiGlassComponentWrapper = forwardRef((props, ref2) => {\n  var _a;\n  const [wrapperDivId, setWrapperDivId] = useState((_a = props.id) != null ? _a : v4());\n  useEffect(() => {\n    var _a2;\n    setWrapperDivId((_a2 = props.id) != null ? _a2 : v4());\n  }, [props.id]);\n  const viewConfig = props.viewConfig || {};\n  const pixelPreciseMarginPadding = false;\n  const higlassComponent = useMemo(() => /* @__PURE__ */ React.createElement(HiGlassComponent, {\n    ref: ref2,\n    options: {\n      pixelPreciseMarginPadding,\n      containerPaddingX: 0,\n      containerPaddingY: 0,\n      viewMarginTop: 0,\n      viewMarginBottom: 0,\n      viewMarginLeft: 0,\n      viewMarginRight: 0,\n      viewPaddingTop: 0,\n      viewPaddingBottom: 0,\n      viewPaddingLeft: 0,\n      viewPaddingRight: 0,\n      sizeMode: \"bounded\",\n      rangeSelectionOnAlt: true\n    },\n    viewConfig\n  }), [viewConfig, pixelPreciseMarginPadding]);\n  const {\n    padding = 60,\n    margin = 0,\n    border = \"none\",\n    background,\n    alt = \"Gosling visualization\"\n  } = props.options || {};\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\"div\", {\n    id: wrapperDivId,\n    className: `gosling-component ${props.className || \"\"}`,\n    style: {\n      position: \"relative\",\n      padding,\n      margin,\n      border,\n      background,\n      width: props.options.responsiveWidth ? `calc(100% - ${padding * 2}px)` : props.size.width,\n      height: props.options.responsiveHeight ? `calc(100% - ${padding * 2}px)` : props.size.height,\n      textAlign: \"left\"\n    },\n    \"aria-label\": alt,\n    role: \"graphics-document\",\n    \"aria-roledescription\": \"visualization\"\n  }, /* @__PURE__ */ React.createElement(\"div\", {\n    key: JSON.stringify(viewConfig),\n    id: \"higlass-wrapper\",\n    className: \"higlass-wrapper\",\n    style: {\n      position: \"relative\",\n      display: \"block\",\n      background,\n      margin: 0,\n      padding: 0,\n      width: props.options.responsiveWidth ? \"100%\" : props.size.width,\n      height: props.options.responsiveHeight ? \"100%\" : props.size.height\n    }\n  }, higlassComponent)));\n});\nHiGlassComponentWrapper.displayName = \"HiGlassComponentWrapper\";\nvar ResizeSensor$1 = { exports: {} };\n(function(module, exports) {\n  (function(root, factory2) {\n    {\n      module.exports = factory2();\n    }\n  })(typeof window !== \"undefined\" ? window : commonjsGlobal, function() {\n    if (typeof window === \"undefined\") {\n      return null;\n    }\n    var globalWindow = typeof window != \"undefined\" && window.Math == Math ? window : typeof self != \"undefined\" && self.Math == Math ? self : Function(\"return this\")();\n    var requestAnimationFrame2 = globalWindow.requestAnimationFrame || globalWindow.mozRequestAnimationFrame || globalWindow.webkitRequestAnimationFrame || function(fn) {\n      return globalWindow.setTimeout(fn, 20);\n    };\n    var cancelAnimationFrame2 = globalWindow.cancelAnimationFrame || globalWindow.mozCancelAnimationFrame || globalWindow.webkitCancelAnimationFrame || function(timer2) {\n      globalWindow.clearTimeout(timer2);\n    };\n    function forEachElement(elements, callback) {\n      var elementsType = Object.prototype.toString.call(elements);\n      var isCollectionTyped = elementsType === \"[object Array]\" || elementsType === \"[object NodeList]\" || elementsType === \"[object HTMLCollection]\" || elementsType === \"[object Object]\" || typeof jQuery !== \"undefined\" && elements instanceof jQuery || typeof Elements !== \"undefined\" && elements instanceof Elements;\n      var i = 0, j = elements.length;\n      if (isCollectionTyped) {\n        for (; i < j; i++) {\n          callback(elements[i]);\n        }\n      } else {\n        callback(elements);\n      }\n    }\n    function getElementSize(element) {\n      if (!element.getBoundingClientRect) {\n        return {\n          width: element.offsetWidth,\n          height: element.offsetHeight\n        };\n      }\n      var rect = element.getBoundingClientRect();\n      return {\n        width: Math.round(rect.width),\n        height: Math.round(rect.height)\n      };\n    }\n    function setStyle(element, style) {\n      Object.keys(style).forEach(function(key) {\n        element.style[key] = style[key];\n      });\n    }\n    var ResizeSensor2 = function(element, callback) {\n      var lastAnimationFrameForInvisibleCheck = 0;\n      function EventQueue() {\n        var q = [];\n        this.add = function(ev) {\n          q.push(ev);\n        };\n        var i, j;\n        this.call = function(sizeInfo) {\n          for (i = 0, j = q.length; i < j; i++) {\n            q[i].call(this, sizeInfo);\n          }\n        };\n        this.remove = function(ev) {\n          var newQueue = [];\n          for (i = 0, j = q.length; i < j; i++) {\n            if (q[i] !== ev)\n              newQueue.push(q[i]);\n          }\n          q = newQueue;\n        };\n        this.length = function() {\n          return q.length;\n        };\n      }\n      function attachResizeEvent(element2, resized) {\n        if (!element2)\n          return;\n        if (element2.resizedAttached) {\n          element2.resizedAttached.add(resized);\n          return;\n        }\n        element2.resizedAttached = new EventQueue();\n        element2.resizedAttached.add(resized);\n        element2.resizeSensor = document.createElement(\"div\");\n        element2.resizeSensor.dir = \"ltr\";\n        element2.resizeSensor.className = \"resize-sensor\";\n        var style = {\n          pointerEvents: \"none\",\n          position: \"absolute\",\n          left: \"0px\",\n          top: \"0px\",\n          right: \"0px\",\n          bottom: \"0px\",\n          overflow: \"hidden\",\n          zIndex: \"-1\",\n          visibility: \"hidden\",\n          maxWidth: \"100%\"\n        };\n        var styleChild = {\n          position: \"absolute\",\n          left: \"0px\",\n          top: \"0px\",\n          transition: \"0s\"\n        };\n        setStyle(element2.resizeSensor, style);\n        var expand2 = document.createElement(\"div\");\n        expand2.className = \"resize-sensor-expand\";\n        setStyle(expand2, style);\n        var expandChild = document.createElement(\"div\");\n        setStyle(expandChild, styleChild);\n        expand2.appendChild(expandChild);\n        var shrink = document.createElement(\"div\");\n        shrink.className = \"resize-sensor-shrink\";\n        setStyle(shrink, style);\n        var shrinkChild = document.createElement(\"div\");\n        setStyle(shrinkChild, styleChild);\n        setStyle(shrinkChild, { width: \"200%\", height: \"200%\" });\n        shrink.appendChild(shrinkChild);\n        element2.resizeSensor.appendChild(expand2);\n        element2.resizeSensor.appendChild(shrink);\n        element2.appendChild(element2.resizeSensor);\n        var computedStyle = window.getComputedStyle(element2);\n        var position = computedStyle ? computedStyle.getPropertyValue(\"position\") : null;\n        if (position !== \"absolute\" && position !== \"relative\" && position !== \"fixed\" && position !== \"sticky\") {\n          element2.style.position = \"relative\";\n        }\n        var dirty = false;\n        var rafId = 0;\n        var size = getElementSize(element2);\n        var lastWidth = 0;\n        var lastHeight = 0;\n        var initialHiddenCheck = true;\n        lastAnimationFrameForInvisibleCheck = 0;\n        var resetExpandShrink = function() {\n          var width = element2.offsetWidth;\n          var height = element2.offsetHeight;\n          expandChild.style.width = width + 10 + \"px\";\n          expandChild.style.height = height + 10 + \"px\";\n          expand2.scrollLeft = width + 10;\n          expand2.scrollTop = height + 10;\n          shrink.scrollLeft = width + 10;\n          shrink.scrollTop = height + 10;\n        };\n        var reset = function() {\n          if (initialHiddenCheck) {\n            var invisible = element2.offsetWidth === 0 && element2.offsetHeight === 0;\n            if (invisible) {\n              if (!lastAnimationFrameForInvisibleCheck) {\n                lastAnimationFrameForInvisibleCheck = requestAnimationFrame2(function() {\n                  lastAnimationFrameForInvisibleCheck = 0;\n                  reset();\n                });\n              }\n              return;\n            } else {\n              initialHiddenCheck = false;\n            }\n          }\n          resetExpandShrink();\n        };\n        element2.resizeSensor.resetSensor = reset;\n        var onResized = function() {\n          rafId = 0;\n          if (!dirty)\n            return;\n          lastWidth = size.width;\n          lastHeight = size.height;\n          if (element2.resizedAttached) {\n            element2.resizedAttached.call(size);\n          }\n        };\n        var onScroll = function() {\n          size = getElementSize(element2);\n          dirty = size.width !== lastWidth || size.height !== lastHeight;\n          if (dirty && !rafId) {\n            rafId = requestAnimationFrame2(onResized);\n          }\n          reset();\n        };\n        var addEvent = function(el, name2, cb) {\n          if (el.attachEvent) {\n            el.attachEvent(\"on\" + name2, cb);\n          } else {\n            el.addEventListener(name2, cb);\n          }\n        };\n        addEvent(expand2, \"scroll\", onScroll);\n        addEvent(shrink, \"scroll\", onScroll);\n        lastAnimationFrameForInvisibleCheck = requestAnimationFrame2(function() {\n          lastAnimationFrameForInvisibleCheck = 0;\n          reset();\n        });\n      }\n      forEachElement(element, function(elem) {\n        attachResizeEvent(elem, callback);\n      });\n      this.detach = function(ev) {\n        if (!lastAnimationFrameForInvisibleCheck) {\n          cancelAnimationFrame2(lastAnimationFrameForInvisibleCheck);\n          lastAnimationFrameForInvisibleCheck = 0;\n        }\n        ResizeSensor2.detach(element, ev);\n      };\n      this.reset = function() {\n        element.resizeSensor.resetSensor();\n      };\n    };\n    ResizeSensor2.reset = function(element) {\n      forEachElement(element, function(elem) {\n        elem.resizeSensor.resetSensor();\n      });\n    };\n    ResizeSensor2.detach = function(element, ev) {\n      forEachElement(element, function(elem) {\n        if (!elem)\n          return;\n        if (elem.resizedAttached && typeof ev === \"function\") {\n          elem.resizedAttached.remove(ev);\n          if (elem.resizedAttached.length())\n            return;\n        }\n        if (elem.resizeSensor) {\n          if (elem.contains(elem.resizeSensor)) {\n            elem.removeChild(elem.resizeSensor);\n          }\n          delete elem.resizeSensor;\n          delete elem.resizedAttached;\n        }\n      });\n    };\n    if (typeof MutationObserver !== \"undefined\") {\n      var observer = new MutationObserver(function(mutations) {\n        for (var i in mutations) {\n          if (mutations.hasOwnProperty(i)) {\n            var items2 = mutations[i].addedNodes;\n            for (var j = 0; j < items2.length; j++) {\n              if (items2[j].resizeSensor) {\n                ResizeSensor2.reset(items2[j]);\n              }\n            }\n          }\n        }\n      });\n      document.addEventListener(\"DOMContentLoaded\", function(event) {\n        observer.observe(document.body, {\n          childList: true,\n          subtree: true\n        });\n      });\n    }\n    return ResizeSensor2;\n  });\n})(ResizeSensor$1);\nvar ResizeSensor = ResizeSensor$1.exports;\nfunction traverseViewsInViewConfig(viewConf, callback) {\n  if (viewConf && viewConf.views && Array.isArray(viewConf.views)) {\n    viewConf.views.forEach((view) => {\n      if (view && view.uid) {\n        callback(view);\n      }\n    });\n  }\n}\nfunction createApi(hg, hgSpec, theme) {\n  const getCanvas = (options) => {\n    var _a, _b;\n    const resolution = (_a = options == null ? void 0 : options.resolution) != null ? _a : 4;\n    const transparentBackground = (_b = options == null ? void 0 : options.transparentBackground) != null ? _b : false;\n    const renderer = hg.pixiRenderer;\n    const renderTexture = PIXI.RenderTexture.create({\n      width: renderer.width / 2,\n      height: renderer.height / 2,\n      resolution\n    });\n    renderer.render(hg.pixiStage, renderTexture);\n    const canvas = renderer.plugins.extract.canvas(renderTexture);\n    const canvasWithBg = document.createElement(\"canvas\");\n    canvasWithBg.width = canvas.width;\n    canvasWithBg.height = canvas.height;\n    const ctx = canvasWithBg.getContext(\"2d\");\n    if (!transparentBackground) {\n      ctx.fillStyle = theme.root.background;\n      ctx.fillRect(0, 0, canvasWithBg.width, canvasWithBg.height);\n    }\n    ctx.drawImage(canvas, 0, 0);\n    return {\n      canvas: canvasWithBg,\n      resolution,\n      canvasWidth: canvas.width,\n      canvasHeight: canvas.height\n    };\n  };\n  return {\n    subscribe,\n    unsubscribe,\n    zoomTo: (viewId, position, padding = 0, duration = 1e3) => {\n      var _a, _b, _c, _d;\n      if (!position.includes(\"chr\")) {\n        console.warn(\"Genomic interval you entered is not in a correct form.\");\n        return;\n      }\n      const chr = position.split(\":\")[0];\n      const chrStart = (_b = (_a = GET_CHROM_SIZES().interval) == null ? void 0 : _a[chr]) == null ? void 0 : _b[0];\n      if (!chr || typeof chrStart === void 0) {\n        console.warn(\"Chromosome name is not valid\", chr);\n        return;\n      }\n      const [s, e] = (_d = (_c = position.split(\":\")[1]) == null ? void 0 : _c.split(\"-\")) != null ? _d : [0, GET_CHROM_SIZES().size[chr]];\n      const start = +s + chrStart - padding;\n      const end = +e + chrStart + padding;\n      hg.api.zoomTo(viewId, start, end, start, end, duration);\n    },\n    zoomToExtent: (viewId, duration = 1e3) => {\n      const [start, end] = [0, GET_CHROM_SIZES().total];\n      hg.api.zoomTo(viewId, start, end, start, end, duration);\n    },\n    zoomToGene: (viewId, gene, padding = 0, duration = 1e3) => {\n      hg.api.zoomToGene(viewId, gene, padding, duration);\n    },\n    suggestGene: (viewId, keyword2, callback) => {\n      hg.api.suggestGene(viewId, keyword2, callback);\n    },\n    getViewIds: () => {\n      if (!hgSpec)\n        return [];\n      const ids = [];\n      traverseViewsInViewConfig(hgSpec, (view) => {\n        if (view.uid)\n          ids.push(view.uid);\n      });\n      return ids;\n    },\n    getCanvas,\n    exportPng: (transparentBackground) => {\n      const { canvas } = getCanvas({ resolution: 4, transparentBackground });\n      canvas.toBlob((blob2) => {\n        const a = document.createElement(\"a\");\n        document.body.append(a);\n        a.download = \"gosling-visualization\";\n        a.href = URL.createObjectURL(blob2);\n        a.click();\n        a.remove();\n      }, \"image/png\");\n    },\n    exportPdf: async (transparentBackground) => {\n      const { jsPDF } = await import(\"jspdf\");\n      const { canvas } = getCanvas({ resolution: 4, transparentBackground });\n      const imgData = canvas.toDataURL(\"image/jpeg\", 1);\n      const pdf = new jsPDF({\n        orientation: canvas.width < canvas.height ? \"p\" : \"l\",\n        unit: \"pt\",\n        format: [canvas.width, canvas.height]\n      });\n      pdf.addImage(imgData, \"JPEG\", 0, 0, canvas.width, canvas.height);\n      pdf.save(\"gosling-visualization.pdf\");\n    }\n  };\n}\nvar lodash = { exports: {} };\n/**\n * @license\n * Lodash <https://lodash.com/>\n * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n(function(module, exports) {\n  (function() {\n    var undefined$1;\n    var VERSION = \"4.17.21\";\n    var LARGE_ARRAY_SIZE = 200;\n    var CORE_ERROR_TEXT = \"Unsupported core-js use. Try https://npms.io/search?q=ponyfill.\", FUNC_ERROR_TEXT = \"Expected a function\", INVALID_TEMPL_VAR_ERROR_TEXT = \"Invalid `variable` option passed into `_.template`\";\n    var HASH_UNDEFINED = \"__lodash_hash_undefined__\";\n    var MAX_MEMOIZE_SIZE = 500;\n    var PLACEHOLDER = \"__lodash_placeholder__\";\n    var CLONE_DEEP_FLAG = 1, CLONE_FLAT_FLAG = 2, CLONE_SYMBOLS_FLAG = 4;\n    var COMPARE_PARTIAL_FLAG = 1, COMPARE_UNORDERED_FLAG = 2;\n    var WRAP_BIND_FLAG = 1, WRAP_BIND_KEY_FLAG = 2, WRAP_CURRY_BOUND_FLAG = 4, WRAP_CURRY_FLAG = 8, WRAP_CURRY_RIGHT_FLAG = 16, WRAP_PARTIAL_FLAG = 32, WRAP_PARTIAL_RIGHT_FLAG = 64, WRAP_ARY_FLAG = 128, WRAP_REARG_FLAG = 256, WRAP_FLIP_FLAG = 512;\n    var DEFAULT_TRUNC_LENGTH = 30, DEFAULT_TRUNC_OMISSION = \"...\";\n    var HOT_COUNT = 800, HOT_SPAN = 16;\n    var LAZY_FILTER_FLAG = 1, LAZY_MAP_FLAG = 2, LAZY_WHILE_FLAG = 3;\n    var INFINITY = 1 / 0, MAX_SAFE_INTEGER = 9007199254740991, MAX_INTEGER = 17976931348623157e292, NAN = 0 / 0;\n    var MAX_ARRAY_LENGTH = 4294967295, MAX_ARRAY_INDEX = MAX_ARRAY_LENGTH - 1, HALF_MAX_ARRAY_LENGTH = MAX_ARRAY_LENGTH >>> 1;\n    var wrapFlags = [\n      [\"ary\", WRAP_ARY_FLAG],\n      [\"bind\", WRAP_BIND_FLAG],\n      [\"bindKey\", WRAP_BIND_KEY_FLAG],\n      [\"curry\", WRAP_CURRY_FLAG],\n      [\"curryRight\", WRAP_CURRY_RIGHT_FLAG],\n      [\"flip\", WRAP_FLIP_FLAG],\n      [\"partial\", WRAP_PARTIAL_FLAG],\n      [\"partialRight\", WRAP_PARTIAL_RIGHT_FLAG],\n      [\"rearg\", WRAP_REARG_FLAG]\n    ];\n    var argsTag = \"[object Arguments]\", arrayTag = \"[object Array]\", asyncTag = \"[object AsyncFunction]\", boolTag = \"[object Boolean]\", dateTag = \"[object Date]\", domExcTag = \"[object DOMException]\", errorTag = \"[object Error]\", funcTag = \"[object Function]\", genTag = \"[object GeneratorFunction]\", mapTag = \"[object Map]\", numberTag = \"[object Number]\", nullTag = \"[object Null]\", objectTag = \"[object Object]\", promiseTag = \"[object Promise]\", proxyTag = \"[object Proxy]\", regexpTag = \"[object RegExp]\", setTag = \"[object Set]\", stringTag = \"[object String]\", symbolTag = \"[object Symbol]\", undefinedTag = \"[object Undefined]\", weakMapTag = \"[object WeakMap]\", weakSetTag = \"[object WeakSet]\";\n    var arrayBufferTag = \"[object ArrayBuffer]\", dataViewTag = \"[object DataView]\", float32Tag = \"[object Float32Array]\", float64Tag = \"[object Float64Array]\", int8Tag = \"[object Int8Array]\", int16Tag = \"[object Int16Array]\", int32Tag = \"[object Int32Array]\", uint8Tag = \"[object Uint8Array]\", uint8ClampedTag = \"[object Uint8ClampedArray]\", uint16Tag = \"[object Uint16Array]\", uint32Tag = \"[object Uint32Array]\";\n    var reEmptyStringLeading = /\\b__p \\+= '';/g, reEmptyStringMiddle = /\\b(__p \\+=) '' \\+/g, reEmptyStringTrailing = /(__e\\(.*?\\)|\\b__t\\)) \\+\\n'';/g;\n    var reEscapedHtml = /&(?:amp|lt|gt|quot|#39);/g, reUnescapedHtml = /[&<>\"']/g, reHasEscapedHtml = RegExp(reEscapedHtml.source), reHasUnescapedHtml = RegExp(reUnescapedHtml.source);\n    var reEscape = /<%-([\\s\\S]+?)%>/g, reEvaluate = /<%([\\s\\S]+?)%>/g, reInterpolate = /<%=([\\s\\S]+?)%>/g;\n    var reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/, reIsPlainProp = /^\\w*$/, rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n    var reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g, reHasRegExpChar = RegExp(reRegExpChar.source);\n    var reTrimStart = /^\\s+/;\n    var reWhitespace = /\\s/;\n    var reWrapComment = /\\{(?:\\n\\/\\* \\[wrapped with .+\\] \\*\\/)?\\n?/, reWrapDetails = /\\{\\n\\/\\* \\[wrapped with (.+)\\] \\*/, reSplitDetails = /,? & /;\n    var reAsciiWord = /[^\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\x7f]+/g;\n    var reForbiddenIdentifierChars = /[()=,{}\\[\\]\\/\\s]/;\n    var reEscapeChar = /\\\\(\\\\)?/g;\n    var reEsTemplate = /\\$\\{([^\\\\}]*(?:\\\\.[^\\\\}]*)*)\\}/g;\n    var reFlags = /\\w*$/;\n    var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n    var reIsBinary = /^0b[01]+$/i;\n    var reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n    var reIsOctal = /^0o[0-7]+$/i;\n    var reIsUint = /^(?:0|[1-9]\\d*)$/;\n    var reLatin = /[\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f]/g;\n    var reNoMatch = /($^)/;\n    var reUnescapedString = /['\\n\\r\\u2028\\u2029\\\\]/g;\n    var rsAstralRange = \"\\\\ud800-\\\\udfff\", rsComboMarksRange = \"\\\\u0300-\\\\u036f\", reComboHalfMarksRange = \"\\\\ufe20-\\\\ufe2f\", rsComboSymbolsRange = \"\\\\u20d0-\\\\u20ff\", rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange, rsDingbatRange = \"\\\\u2700-\\\\u27bf\", rsLowerRange = \"a-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xff\", rsMathOpRange = \"\\\\xac\\\\xb1\\\\xd7\\\\xf7\", rsNonCharRange = \"\\\\x00-\\\\x2f\\\\x3a-\\\\x40\\\\x5b-\\\\x60\\\\x7b-\\\\xbf\", rsPunctuationRange = \"\\\\u2000-\\\\u206f\", rsSpaceRange = \" \\\\t\\\\x0b\\\\f\\\\xa0\\\\ufeff\\\\n\\\\r\\\\u2028\\\\u2029\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000\", rsUpperRange = \"A-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde\", rsVarRange = \"\\\\ufe0e\\\\ufe0f\", rsBreakRange = rsMathOpRange + rsNonCharRange + rsPunctuationRange + rsSpaceRange;\n    var rsApos = \"['\\u2019]\", rsAstral = \"[\" + rsAstralRange + \"]\", rsBreak = \"[\" + rsBreakRange + \"]\", rsCombo = \"[\" + rsComboRange + \"]\", rsDigits = \"\\\\d+\", rsDingbat = \"[\" + rsDingbatRange + \"]\", rsLower = \"[\" + rsLowerRange + \"]\", rsMisc = \"[^\" + rsAstralRange + rsBreakRange + rsDigits + rsDingbatRange + rsLowerRange + rsUpperRange + \"]\", rsFitz = \"\\\\ud83c[\\\\udffb-\\\\udfff]\", rsModifier = \"(?:\" + rsCombo + \"|\" + rsFitz + \")\", rsNonAstral = \"[^\" + rsAstralRange + \"]\", rsRegional = \"(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}\", rsSurrPair = \"[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]\", rsUpper = \"[\" + rsUpperRange + \"]\", rsZWJ = \"\\\\u200d\";\n    var rsMiscLower = \"(?:\" + rsLower + \"|\" + rsMisc + \")\", rsMiscUpper = \"(?:\" + rsUpper + \"|\" + rsMisc + \")\", rsOptContrLower = \"(?:\" + rsApos + \"(?:d|ll|m|re|s|t|ve))?\", rsOptContrUpper = \"(?:\" + rsApos + \"(?:D|LL|M|RE|S|T|VE))?\", reOptMod = rsModifier + \"?\", rsOptVar = \"[\" + rsVarRange + \"]?\", rsOptJoin = \"(?:\" + rsZWJ + \"(?:\" + [rsNonAstral, rsRegional, rsSurrPair].join(\"|\") + \")\" + rsOptVar + reOptMod + \")*\", rsOrdLower = \"\\\\d*(?:1st|2nd|3rd|(?![123])\\\\dth)(?=\\\\b|[A-Z_])\", rsOrdUpper = \"\\\\d*(?:1ST|2ND|3RD|(?![123])\\\\dTH)(?=\\\\b|[a-z_])\", rsSeq = rsOptVar + reOptMod + rsOptJoin, rsEmoji = \"(?:\" + [rsDingbat, rsRegional, rsSurrPair].join(\"|\") + \")\" + rsSeq, rsSymbol = \"(?:\" + [rsNonAstral + rsCombo + \"?\", rsCombo, rsRegional, rsSurrPair, rsAstral].join(\"|\") + \")\";\n    var reApos = RegExp(rsApos, \"g\");\n    var reComboMark = RegExp(rsCombo, \"g\");\n    var reUnicode = RegExp(rsFitz + \"(?=\" + rsFitz + \")|\" + rsSymbol + rsSeq, \"g\");\n    var reUnicodeWord = RegExp([\n      rsUpper + \"?\" + rsLower + \"+\" + rsOptContrLower + \"(?=\" + [rsBreak, rsUpper, \"$\"].join(\"|\") + \")\",\n      rsMiscUpper + \"+\" + rsOptContrUpper + \"(?=\" + [rsBreak, rsUpper + rsMiscLower, \"$\"].join(\"|\") + \")\",\n      rsUpper + \"?\" + rsMiscLower + \"+\" + rsOptContrLower,\n      rsUpper + \"+\" + rsOptContrUpper,\n      rsOrdUpper,\n      rsOrdLower,\n      rsDigits,\n      rsEmoji\n    ].join(\"|\"), \"g\");\n    var reHasUnicode = RegExp(\"[\" + rsZWJ + rsAstralRange + rsComboRange + rsVarRange + \"]\");\n    var reHasUnicodeWord = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;\n    var contextProps = [\n      \"Array\",\n      \"Buffer\",\n      \"DataView\",\n      \"Date\",\n      \"Error\",\n      \"Float32Array\",\n      \"Float64Array\",\n      \"Function\",\n      \"Int8Array\",\n      \"Int16Array\",\n      \"Int32Array\",\n      \"Map\",\n      \"Math\",\n      \"Object\",\n      \"Promise\",\n      \"RegExp\",\n      \"Set\",\n      \"String\",\n      \"Symbol\",\n      \"TypeError\",\n      \"Uint8Array\",\n      \"Uint8ClampedArray\",\n      \"Uint16Array\",\n      \"Uint32Array\",\n      \"WeakMap\",\n      \"_\",\n      \"clearTimeout\",\n      \"isFinite\",\n      \"parseInt\",\n      \"setTimeout\"\n    ];\n    var templateCounter = -1;\n    var typedArrayTags = {};\n    typedArrayTags[float32Tag] = typedArrayTags[float64Tag] = typedArrayTags[int8Tag] = typedArrayTags[int16Tag] = typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] = typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] = typedArrayTags[uint32Tag] = true;\n    typedArrayTags[argsTag] = typedArrayTags[arrayTag] = typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] = typedArrayTags[dataViewTag] = typedArrayTags[dateTag] = typedArrayTags[errorTag] = typedArrayTags[funcTag] = typedArrayTags[mapTag] = typedArrayTags[numberTag] = typedArrayTags[objectTag] = typedArrayTags[regexpTag] = typedArrayTags[setTag] = typedArrayTags[stringTag] = typedArrayTags[weakMapTag] = false;\n    var cloneableTags = {};\n    cloneableTags[argsTag] = cloneableTags[arrayTag] = cloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] = cloneableTags[boolTag] = cloneableTags[dateTag] = cloneableTags[float32Tag] = cloneableTags[float64Tag] = cloneableTags[int8Tag] = cloneableTags[int16Tag] = cloneableTags[int32Tag] = cloneableTags[mapTag] = cloneableTags[numberTag] = cloneableTags[objectTag] = cloneableTags[regexpTag] = cloneableTags[setTag] = cloneableTags[stringTag] = cloneableTags[symbolTag] = cloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] = cloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\n    cloneableTags[errorTag] = cloneableTags[funcTag] = cloneableTags[weakMapTag] = false;\n    var deburredLetters = {\n      \"\\xC0\": \"A\",\n      \"\\xC1\": \"A\",\n      \"\\xC2\": \"A\",\n      \"\\xC3\": \"A\",\n      \"\\xC4\": \"A\",\n      \"\\xC5\": \"A\",\n      \"\\xE0\": \"a\",\n      \"\\xE1\": \"a\",\n      \"\\xE2\": \"a\",\n      \"\\xE3\": \"a\",\n      \"\\xE4\": \"a\",\n      \"\\xE5\": \"a\",\n      \"\\xC7\": \"C\",\n      \"\\xE7\": \"c\",\n      \"\\xD0\": \"D\",\n      \"\\xF0\": \"d\",\n      \"\\xC8\": \"E\",\n      \"\\xC9\": \"E\",\n      \"\\xCA\": \"E\",\n      \"\\xCB\": \"E\",\n      \"\\xE8\": \"e\",\n      \"\\xE9\": \"e\",\n      \"\\xEA\": \"e\",\n      \"\\xEB\": \"e\",\n      \"\\xCC\": \"I\",\n      \"\\xCD\": \"I\",\n      \"\\xCE\": \"I\",\n      \"\\xCF\": \"I\",\n      \"\\xEC\": \"i\",\n      \"\\xED\": \"i\",\n      \"\\xEE\": \"i\",\n      \"\\xEF\": \"i\",\n      \"\\xD1\": \"N\",\n      \"\\xF1\": \"n\",\n      \"\\xD2\": \"O\",\n      \"\\xD3\": \"O\",\n      \"\\xD4\": \"O\",\n      \"\\xD5\": \"O\",\n      \"\\xD6\": \"O\",\n      \"\\xD8\": \"O\",\n      \"\\xF2\": \"o\",\n      \"\\xF3\": \"o\",\n      \"\\xF4\": \"o\",\n      \"\\xF5\": \"o\",\n      \"\\xF6\": \"o\",\n      \"\\xF8\": \"o\",\n      \"\\xD9\": \"U\",\n      \"\\xDA\": \"U\",\n      \"\\xDB\": \"U\",\n      \"\\xDC\": \"U\",\n      \"\\xF9\": \"u\",\n      \"\\xFA\": \"u\",\n      \"\\xFB\": \"u\",\n      \"\\xFC\": \"u\",\n      \"\\xDD\": \"Y\",\n      \"\\xFD\": \"y\",\n      \"\\xFF\": \"y\",\n      \"\\xC6\": \"Ae\",\n      \"\\xE6\": \"ae\",\n      \"\\xDE\": \"Th\",\n      \"\\xFE\": \"th\",\n      \"\\xDF\": \"ss\",\n      \"\\u0100\": \"A\",\n      \"\\u0102\": \"A\",\n      \"\\u0104\": \"A\",\n      \"\\u0101\": \"a\",\n      \"\\u0103\": \"a\",\n      \"\\u0105\": \"a\",\n      \"\\u0106\": \"C\",\n      \"\\u0108\": \"C\",\n      \"\\u010A\": \"C\",\n      \"\\u010C\": \"C\",\n      \"\\u0107\": \"c\",\n      \"\\u0109\": \"c\",\n      \"\\u010B\": \"c\",\n      \"\\u010D\": \"c\",\n      \"\\u010E\": \"D\",\n      \"\\u0110\": \"D\",\n      \"\\u010F\": \"d\",\n      \"\\u0111\": \"d\",\n      \"\\u0112\": \"E\",\n      \"\\u0114\": \"E\",\n      \"\\u0116\": \"E\",\n      \"\\u0118\": \"E\",\n      \"\\u011A\": \"E\",\n      \"\\u0113\": \"e\",\n      \"\\u0115\": \"e\",\n      \"\\u0117\": \"e\",\n      \"\\u0119\": \"e\",\n      \"\\u011B\": \"e\",\n      \"\\u011C\": \"G\",\n      \"\\u011E\": \"G\",\n      \"\\u0120\": \"G\",\n      \"\\u0122\": \"G\",\n      \"\\u011D\": \"g\",\n      \"\\u011F\": \"g\",\n      \"\\u0121\": \"g\",\n      \"\\u0123\": \"g\",\n      \"\\u0124\": \"H\",\n      \"\\u0126\": \"H\",\n      \"\\u0125\": \"h\",\n      \"\\u0127\": \"h\",\n      \"\\u0128\": \"I\",\n      \"\\u012A\": \"I\",\n      \"\\u012C\": \"I\",\n      \"\\u012E\": \"I\",\n      \"\\u0130\": \"I\",\n      \"\\u0129\": \"i\",\n      \"\\u012B\": \"i\",\n      \"\\u012D\": \"i\",\n      \"\\u012F\": \"i\",\n      \"\\u0131\": \"i\",\n      \"\\u0134\": \"J\",\n      \"\\u0135\": \"j\",\n      \"\\u0136\": \"K\",\n      \"\\u0137\": \"k\",\n      \"\\u0138\": \"k\",\n      \"\\u0139\": \"L\",\n      \"\\u013B\": \"L\",\n      \"\\u013D\": \"L\",\n      \"\\u013F\": \"L\",\n      \"\\u0141\": \"L\",\n      \"\\u013A\": \"l\",\n      \"\\u013C\": \"l\",\n      \"\\u013E\": \"l\",\n      \"\\u0140\": \"l\",\n      \"\\u0142\": \"l\",\n      \"\\u0143\": \"N\",\n      \"\\u0145\": \"N\",\n      \"\\u0147\": \"N\",\n      \"\\u014A\": \"N\",\n      \"\\u0144\": \"n\",\n      \"\\u0146\": \"n\",\n      \"\\u0148\": \"n\",\n      \"\\u014B\": \"n\",\n      \"\\u014C\": \"O\",\n      \"\\u014E\": \"O\",\n      \"\\u0150\": \"O\",\n      \"\\u014D\": \"o\",\n      \"\\u014F\": \"o\",\n      \"\\u0151\": \"o\",\n      \"\\u0154\": \"R\",\n      \"\\u0156\": \"R\",\n      \"\\u0158\": \"R\",\n      \"\\u0155\": \"r\",\n      \"\\u0157\": \"r\",\n      \"\\u0159\": \"r\",\n      \"\\u015A\": \"S\",\n      \"\\u015C\": \"S\",\n      \"\\u015E\": \"S\",\n      \"\\u0160\": \"S\",\n      \"\\u015B\": \"s\",\n      \"\\u015D\": \"s\",\n      \"\\u015F\": \"s\",\n      \"\\u0161\": \"s\",\n      \"\\u0162\": \"T\",\n      \"\\u0164\": \"T\",\n      \"\\u0166\": \"T\",\n      \"\\u0163\": \"t\",\n      \"\\u0165\": \"t\",\n      \"\\u0167\": \"t\",\n      \"\\u0168\": \"U\",\n      \"\\u016A\": \"U\",\n      \"\\u016C\": \"U\",\n      \"\\u016E\": \"U\",\n      \"\\u0170\": \"U\",\n      \"\\u0172\": \"U\",\n      \"\\u0169\": \"u\",\n      \"\\u016B\": \"u\",\n      \"\\u016D\": \"u\",\n      \"\\u016F\": \"u\",\n      \"\\u0171\": \"u\",\n      \"\\u0173\": \"u\",\n      \"\\u0174\": \"W\",\n      \"\\u0175\": \"w\",\n      \"\\u0176\": \"Y\",\n      \"\\u0177\": \"y\",\n      \"\\u0178\": \"Y\",\n      \"\\u0179\": \"Z\",\n      \"\\u017B\": \"Z\",\n      \"\\u017D\": \"Z\",\n      \"\\u017A\": \"z\",\n      \"\\u017C\": \"z\",\n      \"\\u017E\": \"z\",\n      \"\\u0132\": \"IJ\",\n      \"\\u0133\": \"ij\",\n      \"\\u0152\": \"Oe\",\n      \"\\u0153\": \"oe\",\n      \"\\u0149\": \"'n\",\n      \"\\u017F\": \"s\"\n    };\n    var htmlEscapes = {\n      \"&\": \"&amp;\",\n      \"<\": \"&lt;\",\n      \">\": \"&gt;\",\n      '\"': \"&quot;\",\n      \"'\": \"&#39;\"\n    };\n    var htmlUnescapes = {\n      \"&amp;\": \"&\",\n      \"&lt;\": \"<\",\n      \"&gt;\": \">\",\n      \"&quot;\": '\"',\n      \"&#39;\": \"'\"\n    };\n    var stringEscapes = {\n      \"\\\\\": \"\\\\\",\n      \"'\": \"'\",\n      \"\\n\": \"n\",\n      \"\\r\": \"r\",\n      \"\\u2028\": \"u2028\",\n      \"\\u2029\": \"u2029\"\n    };\n    var freeParseFloat = parseFloat, freeParseInt = parseInt;\n    var freeGlobal = typeof commonjsGlobal == \"object\" && commonjsGlobal && commonjsGlobal.Object === Object && commonjsGlobal;\n    var freeSelf = typeof self == \"object\" && self && self.Object === Object && self;\n    var root = freeGlobal || freeSelf || Function(\"return this\")();\n    var freeExports = exports && !exports.nodeType && exports;\n    var freeModule = freeExports && true && module && !module.nodeType && module;\n    var moduleExports = freeModule && freeModule.exports === freeExports;\n    var freeProcess = moduleExports && freeGlobal.process;\n    var nodeUtil = function() {\n      try {\n        var types = freeModule && freeModule.require && freeModule.require(\"util\").types;\n        if (types) {\n          return types;\n        }\n        return freeProcess && freeProcess.binding && freeProcess.binding(\"util\");\n      } catch (e) {\n      }\n    }();\n    var nodeIsArrayBuffer = nodeUtil && nodeUtil.isArrayBuffer, nodeIsDate = nodeUtil && nodeUtil.isDate, nodeIsMap = nodeUtil && nodeUtil.isMap, nodeIsRegExp = nodeUtil && nodeUtil.isRegExp, nodeIsSet = nodeUtil && nodeUtil.isSet, nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n    function apply(func, thisArg, args) {\n      switch (args.length) {\n        case 0:\n          return func.call(thisArg);\n        case 1:\n          return func.call(thisArg, args[0]);\n        case 2:\n          return func.call(thisArg, args[0], args[1]);\n        case 3:\n          return func.call(thisArg, args[0], args[1], args[2]);\n      }\n      return func.apply(thisArg, args);\n    }\n    function arrayAggregator(array, setter, iteratee, accumulator) {\n      var index = -1, length = array == null ? 0 : array.length;\n      while (++index < length) {\n        var value = array[index];\n        setter(accumulator, value, iteratee(value), array);\n      }\n      return accumulator;\n    }\n    function arrayEach(array, iteratee) {\n      var index = -1, length = array == null ? 0 : array.length;\n      while (++index < length) {\n        if (iteratee(array[index], index, array) === false) {\n          break;\n        }\n      }\n      return array;\n    }\n    function arrayEachRight(array, iteratee) {\n      var length = array == null ? 0 : array.length;\n      while (length--) {\n        if (iteratee(array[length], length, array) === false) {\n          break;\n        }\n      }\n      return array;\n    }\n    function arrayEvery(array, predicate) {\n      var index = -1, length = array == null ? 0 : array.length;\n      while (++index < length) {\n        if (!predicate(array[index], index, array)) {\n          return false;\n        }\n      }\n      return true;\n    }\n    function arrayFilter(array, predicate) {\n      var index = -1, length = array == null ? 0 : array.length, resIndex = 0, result = [];\n      while (++index < length) {\n        var value = array[index];\n        if (predicate(value, index, array)) {\n          result[resIndex++] = value;\n        }\n      }\n      return result;\n    }\n    function arrayIncludes(array, value) {\n      var length = array == null ? 0 : array.length;\n      return !!length && baseIndexOf(array, value, 0) > -1;\n    }\n    function arrayIncludesWith(array, value, comparator) {\n      var index = -1, length = array == null ? 0 : array.length;\n      while (++index < length) {\n        if (comparator(value, array[index])) {\n          return true;\n        }\n      }\n      return false;\n    }\n    function arrayMap(array, iteratee) {\n      var index = -1, length = array == null ? 0 : array.length, result = Array(length);\n      while (++index < length) {\n        result[index] = iteratee(array[index], index, array);\n      }\n      return result;\n    }\n    function arrayPush(array, values) {\n      var index = -1, length = values.length, offset = array.length;\n      while (++index < length) {\n        array[offset + index] = values[index];\n      }\n      return array;\n    }\n    function arrayReduce(array, iteratee, accumulator, initAccum) {\n      var index = -1, length = array == null ? 0 : array.length;\n      if (initAccum && length) {\n        accumulator = array[++index];\n      }\n      while (++index < length) {\n        accumulator = iteratee(accumulator, array[index], index, array);\n      }\n      return accumulator;\n    }\n    function arrayReduceRight(array, iteratee, accumulator, initAccum) {\n      var length = array == null ? 0 : array.length;\n      if (initAccum && length) {\n        accumulator = array[--length];\n      }\n      while (length--) {\n        accumulator = iteratee(accumulator, array[length], length, array);\n      }\n      return accumulator;\n    }\n    function arraySome(array, predicate) {\n      var index = -1, length = array == null ? 0 : array.length;\n      while (++index < length) {\n        if (predicate(array[index], index, array)) {\n          return true;\n        }\n      }\n      return false;\n    }\n    var asciiSize = baseProperty(\"length\");\n    function asciiToArray(string) {\n      return string.split(\"\");\n    }\n    function asciiWords(string) {\n      return string.match(reAsciiWord) || [];\n    }\n    function baseFindKey(collection, predicate, eachFunc) {\n      var result;\n      eachFunc(collection, function(value, key, collection2) {\n        if (predicate(value, key, collection2)) {\n          result = key;\n          return false;\n        }\n      });\n      return result;\n    }\n    function baseFindIndex(array, predicate, fromIndex, fromRight) {\n      var length = array.length, index = fromIndex + (fromRight ? 1 : -1);\n      while (fromRight ? index-- : ++index < length) {\n        if (predicate(array[index], index, array)) {\n          return index;\n        }\n      }\n      return -1;\n    }\n    function baseIndexOf(array, value, fromIndex) {\n      return value === value ? strictIndexOf(array, value, fromIndex) : baseFindIndex(array, baseIsNaN, fromIndex);\n    }\n    function baseIndexOfWith(array, value, fromIndex, comparator) {\n      var index = fromIndex - 1, length = array.length;\n      while (++index < length) {\n        if (comparator(array[index], value)) {\n          return index;\n        }\n      }\n      return -1;\n    }\n    function baseIsNaN(value) {\n      return value !== value;\n    }\n    function baseMean(array, iteratee) {\n      var length = array == null ? 0 : array.length;\n      return length ? baseSum(array, iteratee) / length : NAN;\n    }\n    function baseProperty(key) {\n      return function(object) {\n        return object == null ? undefined$1 : object[key];\n      };\n    }\n    function basePropertyOf(object) {\n      return function(key) {\n        return object == null ? undefined$1 : object[key];\n      };\n    }\n    function baseReduce(collection, iteratee, accumulator, initAccum, eachFunc) {\n      eachFunc(collection, function(value, index, collection2) {\n        accumulator = initAccum ? (initAccum = false, value) : iteratee(accumulator, value, index, collection2);\n      });\n      return accumulator;\n    }\n    function baseSortBy(array, comparer) {\n      var length = array.length;\n      array.sort(comparer);\n      while (length--) {\n        array[length] = array[length].value;\n      }\n      return array;\n    }\n    function baseSum(array, iteratee) {\n      var result, index = -1, length = array.length;\n      while (++index < length) {\n        var current = iteratee(array[index]);\n        if (current !== undefined$1) {\n          result = result === undefined$1 ? current : result + current;\n        }\n      }\n      return result;\n    }\n    function baseTimes(n, iteratee) {\n      var index = -1, result = Array(n);\n      while (++index < n) {\n        result[index] = iteratee(index);\n      }\n      return result;\n    }\n    function baseToPairs(object, props) {\n      return arrayMap(props, function(key) {\n        return [key, object[key]];\n      });\n    }\n    function baseTrim(string) {\n      return string ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, \"\") : string;\n    }\n    function baseUnary(func) {\n      return function(value) {\n        return func(value);\n      };\n    }\n    function baseValues(object, props) {\n      return arrayMap(props, function(key) {\n        return object[key];\n      });\n    }\n    function cacheHas(cache2, key) {\n      return cache2.has(key);\n    }\n    function charsStartIndex(strSymbols, chrSymbols) {\n      var index = -1, length = strSymbols.length;\n      while (++index < length && baseIndexOf(chrSymbols, strSymbols[index], 0) > -1) {\n      }\n      return index;\n    }\n    function charsEndIndex(strSymbols, chrSymbols) {\n      var index = strSymbols.length;\n      while (index-- && baseIndexOf(chrSymbols, strSymbols[index], 0) > -1) {\n      }\n      return index;\n    }\n    function countHolders(array, placeholder) {\n      var length = array.length, result = 0;\n      while (length--) {\n        if (array[length] === placeholder) {\n          ++result;\n        }\n      }\n      return result;\n    }\n    var deburrLetter = basePropertyOf(deburredLetters);\n    var escapeHtmlChar = basePropertyOf(htmlEscapes);\n    function escapeStringChar(chr) {\n      return \"\\\\\" + stringEscapes[chr];\n    }\n    function getValue(object, key) {\n      return object == null ? undefined$1 : object[key];\n    }\n    function hasUnicode(string) {\n      return reHasUnicode.test(string);\n    }\n    function hasUnicodeWord(string) {\n      return reHasUnicodeWord.test(string);\n    }\n    function iteratorToArray(iterator2) {\n      var data2, result = [];\n      while (!(data2 = iterator2.next()).done) {\n        result.push(data2.value);\n      }\n      return result;\n    }\n    function mapToArray(map2) {\n      var index = -1, result = Array(map2.size);\n      map2.forEach(function(value, key) {\n        result[++index] = [key, value];\n      });\n      return result;\n    }\n    function overArg(func, transform) {\n      return function(arg) {\n        return func(transform(arg));\n      };\n    }\n    function replaceHolders(array, placeholder) {\n      var index = -1, length = array.length, resIndex = 0, result = [];\n      while (++index < length) {\n        var value = array[index];\n        if (value === placeholder || value === PLACEHOLDER) {\n          array[index] = PLACEHOLDER;\n          result[resIndex++] = index;\n        }\n      }\n      return result;\n    }\n    function setToArray(set) {\n      var index = -1, result = Array(set.size);\n      set.forEach(function(value) {\n        result[++index] = value;\n      });\n      return result;\n    }\n    function setToPairs(set) {\n      var index = -1, result = Array(set.size);\n      set.forEach(function(value) {\n        result[++index] = [value, value];\n      });\n      return result;\n    }\n    function strictIndexOf(array, value, fromIndex) {\n      var index = fromIndex - 1, length = array.length;\n      while (++index < length) {\n        if (array[index] === value) {\n          return index;\n        }\n      }\n      return -1;\n    }\n    function strictLastIndexOf(array, value, fromIndex) {\n      var index = fromIndex + 1;\n      while (index--) {\n        if (array[index] === value) {\n          return index;\n        }\n      }\n      return index;\n    }\n    function stringSize(string) {\n      return hasUnicode(string) ? unicodeSize(string) : asciiSize(string);\n    }\n    function stringToArray(string) {\n      return hasUnicode(string) ? unicodeToArray(string) : asciiToArray(string);\n    }\n    function trimmedEndIndex(string) {\n      var index = string.length;\n      while (index-- && reWhitespace.test(string.charAt(index))) {\n      }\n      return index;\n    }\n    var unescapeHtmlChar = basePropertyOf(htmlUnescapes);\n    function unicodeSize(string) {\n      var result = reUnicode.lastIndex = 0;\n      while (reUnicode.test(string)) {\n        ++result;\n      }\n      return result;\n    }\n    function unicodeToArray(string) {\n      return string.match(reUnicode) || [];\n    }\n    function unicodeWords(string) {\n      return string.match(reUnicodeWord) || [];\n    }\n    var runInContext = function runInContext2(context2) {\n      context2 = context2 == null ? root : _.defaults(root.Object(), context2, _.pick(root, contextProps));\n      var Array2 = context2.Array, Date2 = context2.Date, Error2 = context2.Error, Function2 = context2.Function, Math2 = context2.Math, Object2 = context2.Object, RegExp2 = context2.RegExp, String2 = context2.String, TypeError2 = context2.TypeError;\n      var arrayProto = Array2.prototype, funcProto = Function2.prototype, objectProto = Object2.prototype;\n      var coreJsData = context2[\"__core-js_shared__\"];\n      var funcToString = funcProto.toString;\n      var hasOwnProperty = objectProto.hasOwnProperty;\n      var idCounter = 0;\n      var maskSrcKey = function() {\n        var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || \"\");\n        return uid ? \"Symbol(src)_1.\" + uid : \"\";\n      }();\n      var nativeObjectToString = objectProto.toString;\n      var objectCtorString = funcToString.call(Object2);\n      var oldDash = root._;\n      var reIsNative = RegExp2(\"^\" + funcToString.call(hasOwnProperty).replace(reRegExpChar, \"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, \"$1.*?\") + \"$\");\n      var Buffer2 = moduleExports ? context2.Buffer : undefined$1, Symbol2 = context2.Symbol, Uint8Array2 = context2.Uint8Array, allocUnsafe = Buffer2 ? Buffer2.allocUnsafe : undefined$1, getPrototype = overArg(Object2.getPrototypeOf, Object2), objectCreate = Object2.create, propertyIsEnumerable = objectProto.propertyIsEnumerable, splice = arrayProto.splice, spreadableSymbol = Symbol2 ? Symbol2.isConcatSpreadable : undefined$1, symIterator = Symbol2 ? Symbol2.iterator : undefined$1, symToStringTag = Symbol2 ? Symbol2.toStringTag : undefined$1;\n      var defineProperty2 = function() {\n        try {\n          var func = getNative(Object2, \"defineProperty\");\n          func({}, \"\", {});\n          return func;\n        } catch (e) {\n        }\n      }();\n      var ctxClearTimeout = context2.clearTimeout !== root.clearTimeout && context2.clearTimeout, ctxNow = Date2 && Date2.now !== root.Date.now && Date2.now, ctxSetTimeout = context2.setTimeout !== root.setTimeout && context2.setTimeout;\n      var nativeCeil = Math2.ceil, nativeFloor = Math2.floor, nativeGetSymbols = Object2.getOwnPropertySymbols, nativeIsBuffer = Buffer2 ? Buffer2.isBuffer : undefined$1, nativeIsFinite = context2.isFinite, nativeJoin = arrayProto.join, nativeKeys = overArg(Object2.keys, Object2), nativeMax = Math2.max, nativeMin = Math2.min, nativeNow = Date2.now, nativeParseInt = context2.parseInt, nativeRandom = Math2.random, nativeReverse = arrayProto.reverse;\n      var DataView = getNative(context2, \"DataView\"), Map2 = getNative(context2, \"Map\"), Promise2 = getNative(context2, \"Promise\"), Set2 = getNative(context2, \"Set\"), WeakMap = getNative(context2, \"WeakMap\"), nativeCreate = getNative(Object2, \"create\");\n      var metaMap = WeakMap && new WeakMap();\n      var realNames = {};\n      var dataViewCtorString = toSource(DataView), mapCtorString = toSource(Map2), promiseCtorString = toSource(Promise2), setCtorString = toSource(Set2), weakMapCtorString = toSource(WeakMap);\n      var symbolProto = Symbol2 ? Symbol2.prototype : undefined$1, symbolValueOf = symbolProto ? symbolProto.valueOf : undefined$1, symbolToString = symbolProto ? symbolProto.toString : undefined$1;\n      function lodash2(value) {\n        if (isObjectLike(value) && !isArray2(value) && !(value instanceof LazyWrapper)) {\n          if (value instanceof LodashWrapper) {\n            return value;\n          }\n          if (hasOwnProperty.call(value, \"__wrapped__\")) {\n            return wrapperClone(value);\n          }\n        }\n        return new LodashWrapper(value);\n      }\n      var baseCreate = function() {\n        function object() {\n        }\n        return function(proto) {\n          if (!isObject2(proto)) {\n            return {};\n          }\n          if (objectCreate) {\n            return objectCreate(proto);\n          }\n          object.prototype = proto;\n          var result2 = new object();\n          object.prototype = undefined$1;\n          return result2;\n        };\n      }();\n      function baseLodash() {\n      }\n      function LodashWrapper(value, chainAll) {\n        this.__wrapped__ = value;\n        this.__actions__ = [];\n        this.__chain__ = !!chainAll;\n        this.__index__ = 0;\n        this.__values__ = undefined$1;\n      }\n      lodash2.templateSettings = {\n        \"escape\": reEscape,\n        \"evaluate\": reEvaluate,\n        \"interpolate\": reInterpolate,\n        \"variable\": \"\",\n        \"imports\": {\n          \"_\": lodash2\n        }\n      };\n      lodash2.prototype = baseLodash.prototype;\n      lodash2.prototype.constructor = lodash2;\n      LodashWrapper.prototype = baseCreate(baseLodash.prototype);\n      LodashWrapper.prototype.constructor = LodashWrapper;\n      function LazyWrapper(value) {\n        this.__wrapped__ = value;\n        this.__actions__ = [];\n        this.__dir__ = 1;\n        this.__filtered__ = false;\n        this.__iteratees__ = [];\n        this.__takeCount__ = MAX_ARRAY_LENGTH;\n        this.__views__ = [];\n      }\n      function lazyClone() {\n        var result2 = new LazyWrapper(this.__wrapped__);\n        result2.__actions__ = copyArray(this.__actions__);\n        result2.__dir__ = this.__dir__;\n        result2.__filtered__ = this.__filtered__;\n        result2.__iteratees__ = copyArray(this.__iteratees__);\n        result2.__takeCount__ = this.__takeCount__;\n        result2.__views__ = copyArray(this.__views__);\n        return result2;\n      }\n      function lazyReverse() {\n        if (this.__filtered__) {\n          var result2 = new LazyWrapper(this);\n          result2.__dir__ = -1;\n          result2.__filtered__ = true;\n        } else {\n          result2 = this.clone();\n          result2.__dir__ *= -1;\n        }\n        return result2;\n      }\n      function lazyValue() {\n        var array = this.__wrapped__.value(), dir = this.__dir__, isArr = isArray2(array), isRight = dir < 0, arrLength = isArr ? array.length : 0, view = getView(0, arrLength, this.__views__), start = view.start, end = view.end, length = end - start, index = isRight ? end : start - 1, iteratees = this.__iteratees__, iterLength = iteratees.length, resIndex = 0, takeCount = nativeMin(length, this.__takeCount__);\n        if (!isArr || !isRight && arrLength == length && takeCount == length) {\n          return baseWrapperValue(array, this.__actions__);\n        }\n        var result2 = [];\n        outer:\n          while (length-- && resIndex < takeCount) {\n            index += dir;\n            var iterIndex = -1, value = array[index];\n            while (++iterIndex < iterLength) {\n              var data2 = iteratees[iterIndex], iteratee2 = data2.iteratee, type2 = data2.type, computed = iteratee2(value);\n              if (type2 == LAZY_MAP_FLAG) {\n                value = computed;\n              } else if (!computed) {\n                if (type2 == LAZY_FILTER_FLAG) {\n                  continue outer;\n                } else {\n                  break outer;\n                }\n              }\n            }\n            result2[resIndex++] = value;\n          }\n        return result2;\n      }\n      LazyWrapper.prototype = baseCreate(baseLodash.prototype);\n      LazyWrapper.prototype.constructor = LazyWrapper;\n      function Hash(entries) {\n        var index = -1, length = entries == null ? 0 : entries.length;\n        this.clear();\n        while (++index < length) {\n          var entry = entries[index];\n          this.set(entry[0], entry[1]);\n        }\n      }\n      function hashClear() {\n        this.__data__ = nativeCreate ? nativeCreate(null) : {};\n        this.size = 0;\n      }\n      function hashDelete(key) {\n        var result2 = this.has(key) && delete this.__data__[key];\n        this.size -= result2 ? 1 : 0;\n        return result2;\n      }\n      function hashGet(key) {\n        var data2 = this.__data__;\n        if (nativeCreate) {\n          var result2 = data2[key];\n          return result2 === HASH_UNDEFINED ? undefined$1 : result2;\n        }\n        return hasOwnProperty.call(data2, key) ? data2[key] : undefined$1;\n      }\n      function hashHas(key) {\n        var data2 = this.__data__;\n        return nativeCreate ? data2[key] !== undefined$1 : hasOwnProperty.call(data2, key);\n      }\n      function hashSet(key, value) {\n        var data2 = this.__data__;\n        this.size += this.has(key) ? 0 : 1;\n        data2[key] = nativeCreate && value === undefined$1 ? HASH_UNDEFINED : value;\n        return this;\n      }\n      Hash.prototype.clear = hashClear;\n      Hash.prototype[\"delete\"] = hashDelete;\n      Hash.prototype.get = hashGet;\n      Hash.prototype.has = hashHas;\n      Hash.prototype.set = hashSet;\n      function ListCache(entries) {\n        var index = -1, length = entries == null ? 0 : entries.length;\n        this.clear();\n        while (++index < length) {\n          var entry = entries[index];\n          this.set(entry[0], entry[1]);\n        }\n      }\n      function listCacheClear() {\n        this.__data__ = [];\n        this.size = 0;\n      }\n      function listCacheDelete(key) {\n        var data2 = this.__data__, index = assocIndexOf(data2, key);\n        if (index < 0) {\n          return false;\n        }\n        var lastIndex = data2.length - 1;\n        if (index == lastIndex) {\n          data2.pop();\n        } else {\n          splice.call(data2, index, 1);\n        }\n        --this.size;\n        return true;\n      }\n      function listCacheGet(key) {\n        var data2 = this.__data__, index = assocIndexOf(data2, key);\n        return index < 0 ? undefined$1 : data2[index][1];\n      }\n      function listCacheHas(key) {\n        return assocIndexOf(this.__data__, key) > -1;\n      }\n      function listCacheSet(key, value) {\n        var data2 = this.__data__, index = assocIndexOf(data2, key);\n        if (index < 0) {\n          ++this.size;\n          data2.push([key, value]);\n        } else {\n          data2[index][1] = value;\n        }\n        return this;\n      }\n      ListCache.prototype.clear = listCacheClear;\n      ListCache.prototype[\"delete\"] = listCacheDelete;\n      ListCache.prototype.get = listCacheGet;\n      ListCache.prototype.has = listCacheHas;\n      ListCache.prototype.set = listCacheSet;\n      function MapCache(entries) {\n        var index = -1, length = entries == null ? 0 : entries.length;\n        this.clear();\n        while (++index < length) {\n          var entry = entries[index];\n          this.set(entry[0], entry[1]);\n        }\n      }\n      function mapCacheClear() {\n        this.size = 0;\n        this.__data__ = {\n          \"hash\": new Hash(),\n          \"map\": new (Map2 || ListCache)(),\n          \"string\": new Hash()\n        };\n      }\n      function mapCacheDelete(key) {\n        var result2 = getMapData(this, key)[\"delete\"](key);\n        this.size -= result2 ? 1 : 0;\n        return result2;\n      }\n      function mapCacheGet(key) {\n        return getMapData(this, key).get(key);\n      }\n      function mapCacheHas(key) {\n        return getMapData(this, key).has(key);\n      }\n      function mapCacheSet(key, value) {\n        var data2 = getMapData(this, key), size2 = data2.size;\n        data2.set(key, value);\n        this.size += data2.size == size2 ? 0 : 1;\n        return this;\n      }\n      MapCache.prototype.clear = mapCacheClear;\n      MapCache.prototype[\"delete\"] = mapCacheDelete;\n      MapCache.prototype.get = mapCacheGet;\n      MapCache.prototype.has = mapCacheHas;\n      MapCache.prototype.set = mapCacheSet;\n      function SetCache(values2) {\n        var index = -1, length = values2 == null ? 0 : values2.length;\n        this.__data__ = new MapCache();\n        while (++index < length) {\n          this.add(values2[index]);\n        }\n      }\n      function setCacheAdd(value) {\n        this.__data__.set(value, HASH_UNDEFINED);\n        return this;\n      }\n      function setCacheHas(value) {\n        return this.__data__.has(value);\n      }\n      SetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\n      SetCache.prototype.has = setCacheHas;\n      function Stack(entries) {\n        var data2 = this.__data__ = new ListCache(entries);\n        this.size = data2.size;\n      }\n      function stackClear() {\n        this.__data__ = new ListCache();\n        this.size = 0;\n      }\n      function stackDelete(key) {\n        var data2 = this.__data__, result2 = data2[\"delete\"](key);\n        this.size = data2.size;\n        return result2;\n      }\n      function stackGet(key) {\n        return this.__data__.get(key);\n      }\n      function stackHas(key) {\n        return this.__data__.has(key);\n      }\n      function stackSet(key, value) {\n        var data2 = this.__data__;\n        if (data2 instanceof ListCache) {\n          var pairs2 = data2.__data__;\n          if (!Map2 || pairs2.length < LARGE_ARRAY_SIZE - 1) {\n            pairs2.push([key, value]);\n            this.size = ++data2.size;\n            return this;\n          }\n          data2 = this.__data__ = new MapCache(pairs2);\n        }\n        data2.set(key, value);\n        this.size = data2.size;\n        return this;\n      }\n      Stack.prototype.clear = stackClear;\n      Stack.prototype[\"delete\"] = stackDelete;\n      Stack.prototype.get = stackGet;\n      Stack.prototype.has = stackHas;\n      Stack.prototype.set = stackSet;\n      function arrayLikeKeys(value, inherited) {\n        var isArr = isArray2(value), isArg = !isArr && isArguments(value), isBuff = !isArr && !isArg && isBuffer(value), isType = !isArr && !isArg && !isBuff && isTypedArray(value), skipIndexes = isArr || isArg || isBuff || isType, result2 = skipIndexes ? baseTimes(value.length, String2) : [], length = result2.length;\n        for (var key in value) {\n          if ((inherited || hasOwnProperty.call(value, key)) && !(skipIndexes && (key == \"length\" || isBuff && (key == \"offset\" || key == \"parent\") || isType && (key == \"buffer\" || key == \"byteLength\" || key == \"byteOffset\") || isIndex(key, length)))) {\n            result2.push(key);\n          }\n        }\n        return result2;\n      }\n      function arraySample(array) {\n        var length = array.length;\n        return length ? array[baseRandom(0, length - 1)] : undefined$1;\n      }\n      function arraySampleSize(array, n) {\n        return shuffleSelf(copyArray(array), baseClamp(n, 0, array.length));\n      }\n      function arrayShuffle(array) {\n        return shuffleSelf(copyArray(array));\n      }\n      function assignMergeValue(object, key, value) {\n        if (value !== undefined$1 && !eq(object[key], value) || value === undefined$1 && !(key in object)) {\n          baseAssignValue(object, key, value);\n        }\n      }\n      function assignValue(object, key, value) {\n        var objValue = object[key];\n        if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) || value === undefined$1 && !(key in object)) {\n          baseAssignValue(object, key, value);\n        }\n      }\n      function assocIndexOf(array, key) {\n        var length = array.length;\n        while (length--) {\n          if (eq(array[length][0], key)) {\n            return length;\n          }\n        }\n        return -1;\n      }\n      function baseAggregator(collection, setter, iteratee2, accumulator) {\n        baseEach(collection, function(value, key, collection2) {\n          setter(accumulator, value, iteratee2(value), collection2);\n        });\n        return accumulator;\n      }\n      function baseAssign(object, source) {\n        return object && copyObject(source, keys(source), object);\n      }\n      function baseAssignIn(object, source) {\n        return object && copyObject(source, keysIn(source), object);\n      }\n      function baseAssignValue(object, key, value) {\n        if (key == \"__proto__\" && defineProperty2) {\n          defineProperty2(object, key, {\n            \"configurable\": true,\n            \"enumerable\": true,\n            \"value\": value,\n            \"writable\": true\n          });\n        } else {\n          object[key] = value;\n        }\n      }\n      function baseAt(object, paths) {\n        var index = -1, length = paths.length, result2 = Array2(length), skip2 = object == null;\n        while (++index < length) {\n          result2[index] = skip2 ? undefined$1 : get(object, paths[index]);\n        }\n        return result2;\n      }\n      function baseClamp(number, lower, upper) {\n        if (number === number) {\n          if (upper !== undefined$1) {\n            number = number <= upper ? number : upper;\n          }\n          if (lower !== undefined$1) {\n            number = number >= lower ? number : lower;\n          }\n        }\n        return number;\n      }\n      function baseClone(value, bitmask, customizer, key, object, stack) {\n        var result2, isDeep = bitmask & CLONE_DEEP_FLAG, isFlat = bitmask & CLONE_FLAT_FLAG, isFull = bitmask & CLONE_SYMBOLS_FLAG;\n        if (customizer) {\n          result2 = object ? customizer(value, key, object, stack) : customizer(value);\n        }\n        if (result2 !== undefined$1) {\n          return result2;\n        }\n        if (!isObject2(value)) {\n          return value;\n        }\n        var isArr = isArray2(value);\n        if (isArr) {\n          result2 = initCloneArray(value);\n          if (!isDeep) {\n            return copyArray(value, result2);\n          }\n        } else {\n          var tag = getTag(value), isFunc = tag == funcTag || tag == genTag;\n          if (isBuffer(value)) {\n            return cloneBuffer(value, isDeep);\n          }\n          if (tag == objectTag || tag == argsTag || isFunc && !object) {\n            result2 = isFlat || isFunc ? {} : initCloneObject(value);\n            if (!isDeep) {\n              return isFlat ? copySymbolsIn(value, baseAssignIn(result2, value)) : copySymbols(value, baseAssign(result2, value));\n            }\n          } else {\n            if (!cloneableTags[tag]) {\n              return object ? value : {};\n            }\n            result2 = initCloneByTag(value, tag, isDeep);\n          }\n        }\n        stack || (stack = new Stack());\n        var stacked = stack.get(value);\n        if (stacked) {\n          return stacked;\n        }\n        stack.set(value, result2);\n        if (isSet(value)) {\n          value.forEach(function(subValue) {\n            result2.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n          });\n        } else if (isMap(value)) {\n          value.forEach(function(subValue, key2) {\n            result2.set(key2, baseClone(subValue, bitmask, customizer, key2, value, stack));\n          });\n        }\n        var keysFunc = isFull ? isFlat ? getAllKeysIn : getAllKeys : isFlat ? keysIn : keys;\n        var props = isArr ? undefined$1 : keysFunc(value);\n        arrayEach(props || value, function(subValue, key2) {\n          if (props) {\n            key2 = subValue;\n            subValue = value[key2];\n          }\n          assignValue(result2, key2, baseClone(subValue, bitmask, customizer, key2, value, stack));\n        });\n        return result2;\n      }\n      function baseConforms(source) {\n        var props = keys(source);\n        return function(object) {\n          return baseConformsTo(object, source, props);\n        };\n      }\n      function baseConformsTo(object, source, props) {\n        var length = props.length;\n        if (object == null) {\n          return !length;\n        }\n        object = Object2(object);\n        while (length--) {\n          var key = props[length], predicate = source[key], value = object[key];\n          if (value === undefined$1 && !(key in object) || !predicate(value)) {\n            return false;\n          }\n        }\n        return true;\n      }\n      function baseDelay(func, wait, args) {\n        if (typeof func != \"function\") {\n          throw new TypeError2(FUNC_ERROR_TEXT);\n        }\n        return setTimeout2(function() {\n          func.apply(undefined$1, args);\n        }, wait);\n      }\n      function baseDifference(array, values2, iteratee2, comparator) {\n        var index = -1, includes2 = arrayIncludes, isCommon = true, length = array.length, result2 = [], valuesLength = values2.length;\n        if (!length) {\n          return result2;\n        }\n        if (iteratee2) {\n          values2 = arrayMap(values2, baseUnary(iteratee2));\n        }\n        if (comparator) {\n          includes2 = arrayIncludesWith;\n          isCommon = false;\n        } else if (values2.length >= LARGE_ARRAY_SIZE) {\n          includes2 = cacheHas;\n          isCommon = false;\n          values2 = new SetCache(values2);\n        }\n        outer:\n          while (++index < length) {\n            var value = array[index], computed = iteratee2 == null ? value : iteratee2(value);\n            value = comparator || value !== 0 ? value : 0;\n            if (isCommon && computed === computed) {\n              var valuesIndex = valuesLength;\n              while (valuesIndex--) {\n                if (values2[valuesIndex] === computed) {\n                  continue outer;\n                }\n              }\n              result2.push(value);\n            } else if (!includes2(values2, computed, comparator)) {\n              result2.push(value);\n            }\n          }\n        return result2;\n      }\n      var baseEach = createBaseEach(baseForOwn);\n      var baseEachRight = createBaseEach(baseForOwnRight, true);\n      function baseEvery(collection, predicate) {\n        var result2 = true;\n        baseEach(collection, function(value, index, collection2) {\n          result2 = !!predicate(value, index, collection2);\n          return result2;\n        });\n        return result2;\n      }\n      function baseExtremum(array, iteratee2, comparator) {\n        var index = -1, length = array.length;\n        while (++index < length) {\n          var value = array[index], current = iteratee2(value);\n          if (current != null && (computed === undefined$1 ? current === current && !isSymbol(current) : comparator(current, computed))) {\n            var computed = current, result2 = value;\n          }\n        }\n        return result2;\n      }\n      function baseFill(array, value, start, end) {\n        var length = array.length;\n        start = toInteger(start);\n        if (start < 0) {\n          start = -start > length ? 0 : length + start;\n        }\n        end = end === undefined$1 || end > length ? length : toInteger(end);\n        if (end < 0) {\n          end += length;\n        }\n        end = start > end ? 0 : toLength(end);\n        while (start < end) {\n          array[start++] = value;\n        }\n        return array;\n      }\n      function baseFilter(collection, predicate) {\n        var result2 = [];\n        baseEach(collection, function(value, index, collection2) {\n          if (predicate(value, index, collection2)) {\n            result2.push(value);\n          }\n        });\n        return result2;\n      }\n      function baseFlatten(array, depth, predicate, isStrict, result2) {\n        var index = -1, length = array.length;\n        predicate || (predicate = isFlattenable);\n        result2 || (result2 = []);\n        while (++index < length) {\n          var value = array[index];\n          if (depth > 0 && predicate(value)) {\n            if (depth > 1) {\n              baseFlatten(value, depth - 1, predicate, isStrict, result2);\n            } else {\n              arrayPush(result2, value);\n            }\n          } else if (!isStrict) {\n            result2[result2.length] = value;\n          }\n        }\n        return result2;\n      }\n      var baseFor = createBaseFor();\n      var baseForRight = createBaseFor(true);\n      function baseForOwn(object, iteratee2) {\n        return object && baseFor(object, iteratee2, keys);\n      }\n      function baseForOwnRight(object, iteratee2) {\n        return object && baseForRight(object, iteratee2, keys);\n      }\n      function baseFunctions(object, props) {\n        return arrayFilter(props, function(key) {\n          return isFunction2(object[key]);\n        });\n      }\n      function baseGet(object, path) {\n        path = castPath(path, object);\n        var index = 0, length = path.length;\n        while (object != null && index < length) {\n          object = object[toKey(path[index++])];\n        }\n        return index && index == length ? object : undefined$1;\n      }\n      function baseGetAllKeys(object, keysFunc, symbolsFunc) {\n        var result2 = keysFunc(object);\n        return isArray2(object) ? result2 : arrayPush(result2, symbolsFunc(object));\n      }\n      function baseGetTag(value) {\n        if (value == null) {\n          return value === undefined$1 ? undefinedTag : nullTag;\n        }\n        return symToStringTag && symToStringTag in Object2(value) ? getRawTag(value) : objectToString(value);\n      }\n      function baseGt(value, other) {\n        return value > other;\n      }\n      function baseHas(object, key) {\n        return object != null && hasOwnProperty.call(object, key);\n      }\n      function baseHasIn(object, key) {\n        return object != null && key in Object2(object);\n      }\n      function baseInRange(number, start, end) {\n        return number >= nativeMin(start, end) && number < nativeMax(start, end);\n      }\n      function baseIntersection(arrays, iteratee2, comparator) {\n        var includes2 = comparator ? arrayIncludesWith : arrayIncludes, length = arrays[0].length, othLength = arrays.length, othIndex = othLength, caches = Array2(othLength), maxLength = Infinity, result2 = [];\n        while (othIndex--) {\n          var array = arrays[othIndex];\n          if (othIndex && iteratee2) {\n            array = arrayMap(array, baseUnary(iteratee2));\n          }\n          maxLength = nativeMin(array.length, maxLength);\n          caches[othIndex] = !comparator && (iteratee2 || length >= 120 && array.length >= 120) ? new SetCache(othIndex && array) : undefined$1;\n        }\n        array = arrays[0];\n        var index = -1, seen = caches[0];\n        outer:\n          while (++index < length && result2.length < maxLength) {\n            var value = array[index], computed = iteratee2 ? iteratee2(value) : value;\n            value = comparator || value !== 0 ? value : 0;\n            if (!(seen ? cacheHas(seen, computed) : includes2(result2, computed, comparator))) {\n              othIndex = othLength;\n              while (--othIndex) {\n                var cache2 = caches[othIndex];\n                if (!(cache2 ? cacheHas(cache2, computed) : includes2(arrays[othIndex], computed, comparator))) {\n                  continue outer;\n                }\n              }\n              if (seen) {\n                seen.push(computed);\n              }\n              result2.push(value);\n            }\n          }\n        return result2;\n      }\n      function baseInverter(object, setter, iteratee2, accumulator) {\n        baseForOwn(object, function(value, key, object2) {\n          setter(accumulator, iteratee2(value), key, object2);\n        });\n        return accumulator;\n      }\n      function baseInvoke(object, path, args) {\n        path = castPath(path, object);\n        object = parent(object, path);\n        var func = object == null ? object : object[toKey(last2(path))];\n        return func == null ? undefined$1 : apply(func, object, args);\n      }\n      function baseIsArguments(value) {\n        return isObjectLike(value) && baseGetTag(value) == argsTag;\n      }\n      function baseIsArrayBuffer(value) {\n        return isObjectLike(value) && baseGetTag(value) == arrayBufferTag;\n      }\n      function baseIsDate(value) {\n        return isObjectLike(value) && baseGetTag(value) == dateTag;\n      }\n      function baseIsEqual(value, other, bitmask, customizer, stack) {\n        if (value === other) {\n          return true;\n        }\n        if (value == null || other == null || !isObjectLike(value) && !isObjectLike(other)) {\n          return value !== value && other !== other;\n        }\n        return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n      }\n      function baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n        var objIsArr = isArray2(object), othIsArr = isArray2(other), objTag = objIsArr ? arrayTag : getTag(object), othTag = othIsArr ? arrayTag : getTag(other);\n        objTag = objTag == argsTag ? objectTag : objTag;\n        othTag = othTag == argsTag ? objectTag : othTag;\n        var objIsObj = objTag == objectTag, othIsObj = othTag == objectTag, isSameTag = objTag == othTag;\n        if (isSameTag && isBuffer(object)) {\n          if (!isBuffer(other)) {\n            return false;\n          }\n          objIsArr = true;\n          objIsObj = false;\n        }\n        if (isSameTag && !objIsObj) {\n          stack || (stack = new Stack());\n          return objIsArr || isTypedArray(object) ? equalArrays(object, other, bitmask, customizer, equalFunc, stack) : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n        }\n        if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n          var objIsWrapped = objIsObj && hasOwnProperty.call(object, \"__wrapped__\"), othIsWrapped = othIsObj && hasOwnProperty.call(other, \"__wrapped__\");\n          if (objIsWrapped || othIsWrapped) {\n            var objUnwrapped = objIsWrapped ? object.value() : object, othUnwrapped = othIsWrapped ? other.value() : other;\n            stack || (stack = new Stack());\n            return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n          }\n        }\n        if (!isSameTag) {\n          return false;\n        }\n        stack || (stack = new Stack());\n        return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n      }\n      function baseIsMap(value) {\n        return isObjectLike(value) && getTag(value) == mapTag;\n      }\n      function baseIsMatch(object, source, matchData, customizer) {\n        var index = matchData.length, length = index, noCustomizer = !customizer;\n        if (object == null) {\n          return !length;\n        }\n        object = Object2(object);\n        while (index--) {\n          var data2 = matchData[index];\n          if (noCustomizer && data2[2] ? data2[1] !== object[data2[0]] : !(data2[0] in object)) {\n            return false;\n          }\n        }\n        while (++index < length) {\n          data2 = matchData[index];\n          var key = data2[0], objValue = object[key], srcValue = data2[1];\n          if (noCustomizer && data2[2]) {\n            if (objValue === undefined$1 && !(key in object)) {\n              return false;\n            }\n          } else {\n            var stack = new Stack();\n            if (customizer) {\n              var result2 = customizer(objValue, srcValue, key, object, source, stack);\n            }\n            if (!(result2 === undefined$1 ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack) : result2)) {\n              return false;\n            }\n          }\n        }\n        return true;\n      }\n      function baseIsNative(value) {\n        if (!isObject2(value) || isMasked(value)) {\n          return false;\n        }\n        var pattern2 = isFunction2(value) ? reIsNative : reIsHostCtor;\n        return pattern2.test(toSource(value));\n      }\n      function baseIsRegExp(value) {\n        return isObjectLike(value) && baseGetTag(value) == regexpTag;\n      }\n      function baseIsSet(value) {\n        return isObjectLike(value) && getTag(value) == setTag;\n      }\n      function baseIsTypedArray(value) {\n        return isObjectLike(value) && isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n      }\n      function baseIteratee(value) {\n        if (typeof value == \"function\") {\n          return value;\n        }\n        if (value == null) {\n          return identity2;\n        }\n        if (typeof value == \"object\") {\n          return isArray2(value) ? baseMatchesProperty(value[0], value[1]) : baseMatches(value);\n        }\n        return property(value);\n      }\n      function baseKeys(object) {\n        if (!isPrototype(object)) {\n          return nativeKeys(object);\n        }\n        var result2 = [];\n        for (var key in Object2(object)) {\n          if (hasOwnProperty.call(object, key) && key != \"constructor\") {\n            result2.push(key);\n          }\n        }\n        return result2;\n      }\n      function baseKeysIn(object) {\n        if (!isObject2(object)) {\n          return nativeKeysIn(object);\n        }\n        var isProto = isPrototype(object), result2 = [];\n        for (var key in object) {\n          if (!(key == \"constructor\" && (isProto || !hasOwnProperty.call(object, key)))) {\n            result2.push(key);\n          }\n        }\n        return result2;\n      }\n      function baseLt(value, other) {\n        return value < other;\n      }\n      function baseMap(collection, iteratee2) {\n        var index = -1, result2 = isArrayLike2(collection) ? Array2(collection.length) : [];\n        baseEach(collection, function(value, key, collection2) {\n          result2[++index] = iteratee2(value, key, collection2);\n        });\n        return result2;\n      }\n      function baseMatches(source) {\n        var matchData = getMatchData(source);\n        if (matchData.length == 1 && matchData[0][2]) {\n          return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n        }\n        return function(object) {\n          return object === source || baseIsMatch(object, source, matchData);\n        };\n      }\n      function baseMatchesProperty(path, srcValue) {\n        if (isKey(path) && isStrictComparable(srcValue)) {\n          return matchesStrictComparable(toKey(path), srcValue);\n        }\n        return function(object) {\n          var objValue = get(object, path);\n          return objValue === undefined$1 && objValue === srcValue ? hasIn(object, path) : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);\n        };\n      }\n      function baseMerge(object, source, srcIndex, customizer, stack) {\n        if (object === source) {\n          return;\n        }\n        baseFor(source, function(srcValue, key) {\n          stack || (stack = new Stack());\n          if (isObject2(srcValue)) {\n            baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n          } else {\n            var newValue = customizer ? customizer(safeGet(object, key), srcValue, key + \"\", object, source, stack) : undefined$1;\n            if (newValue === undefined$1) {\n              newValue = srcValue;\n            }\n            assignMergeValue(object, key, newValue);\n          }\n        }, keysIn);\n      }\n      function baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n        var objValue = safeGet(object, key), srcValue = safeGet(source, key), stacked = stack.get(srcValue);\n        if (stacked) {\n          assignMergeValue(object, key, stacked);\n          return;\n        }\n        var newValue = customizer ? customizer(objValue, srcValue, key + \"\", object, source, stack) : undefined$1;\n        var isCommon = newValue === undefined$1;\n        if (isCommon) {\n          var isArr = isArray2(srcValue), isBuff = !isArr && isBuffer(srcValue), isTyped = !isArr && !isBuff && isTypedArray(srcValue);\n          newValue = srcValue;\n          if (isArr || isBuff || isTyped) {\n            if (isArray2(objValue)) {\n              newValue = objValue;\n            } else if (isArrayLikeObject(objValue)) {\n              newValue = copyArray(objValue);\n            } else if (isBuff) {\n              isCommon = false;\n              newValue = cloneBuffer(srcValue, true);\n            } else if (isTyped) {\n              isCommon = false;\n              newValue = cloneTypedArray(srcValue, true);\n            } else {\n              newValue = [];\n            }\n          } else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n            newValue = objValue;\n            if (isArguments(objValue)) {\n              newValue = toPlainObject(objValue);\n            } else if (!isObject2(objValue) || isFunction2(objValue)) {\n              newValue = initCloneObject(srcValue);\n            }\n          } else {\n            isCommon = false;\n          }\n        }\n        if (isCommon) {\n          stack.set(srcValue, newValue);\n          mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n          stack[\"delete\"](srcValue);\n        }\n        assignMergeValue(object, key, newValue);\n      }\n      function baseNth(array, n) {\n        var length = array.length;\n        if (!length) {\n          return;\n        }\n        n += n < 0 ? length : 0;\n        return isIndex(n, length) ? array[n] : undefined$1;\n      }\n      function baseOrderBy(collection, iteratees, orders) {\n        if (iteratees.length) {\n          iteratees = arrayMap(iteratees, function(iteratee2) {\n            if (isArray2(iteratee2)) {\n              return function(value) {\n                return baseGet(value, iteratee2.length === 1 ? iteratee2[0] : iteratee2);\n              };\n            }\n            return iteratee2;\n          });\n        } else {\n          iteratees = [identity2];\n        }\n        var index = -1;\n        iteratees = arrayMap(iteratees, baseUnary(getIteratee()));\n        var result2 = baseMap(collection, function(value, key, collection2) {\n          var criteria = arrayMap(iteratees, function(iteratee2) {\n            return iteratee2(value);\n          });\n          return { \"criteria\": criteria, \"index\": ++index, \"value\": value };\n        });\n        return baseSortBy(result2, function(object, other) {\n          return compareMultiple(object, other, orders);\n        });\n      }\n      function basePick(object, paths) {\n        return basePickBy(object, paths, function(value, path) {\n          return hasIn(object, path);\n        });\n      }\n      function basePickBy(object, paths, predicate) {\n        var index = -1, length = paths.length, result2 = {};\n        while (++index < length) {\n          var path = paths[index], value = baseGet(object, path);\n          if (predicate(value, path)) {\n            baseSet(result2, castPath(path, object), value);\n          }\n        }\n        return result2;\n      }\n      function basePropertyDeep(path) {\n        return function(object) {\n          return baseGet(object, path);\n        };\n      }\n      function basePullAll(array, values2, iteratee2, comparator) {\n        var indexOf2 = comparator ? baseIndexOfWith : baseIndexOf, index = -1, length = values2.length, seen = array;\n        if (array === values2) {\n          values2 = copyArray(values2);\n        }\n        if (iteratee2) {\n          seen = arrayMap(array, baseUnary(iteratee2));\n        }\n        while (++index < length) {\n          var fromIndex = 0, value = values2[index], computed = iteratee2 ? iteratee2(value) : value;\n          while ((fromIndex = indexOf2(seen, computed, fromIndex, comparator)) > -1) {\n            if (seen !== array) {\n              splice.call(seen, fromIndex, 1);\n            }\n            splice.call(array, fromIndex, 1);\n          }\n        }\n        return array;\n      }\n      function basePullAt(array, indexes) {\n        var length = array ? indexes.length : 0, lastIndex = length - 1;\n        while (length--) {\n          var index = indexes[length];\n          if (length == lastIndex || index !== previous) {\n            var previous = index;\n            if (isIndex(index)) {\n              splice.call(array, index, 1);\n            } else {\n              baseUnset(array, index);\n            }\n          }\n        }\n        return array;\n      }\n      function baseRandom(lower, upper) {\n        return lower + nativeFloor(nativeRandom() * (upper - lower + 1));\n      }\n      function baseRange(start, end, step, fromRight) {\n        var index = -1, length = nativeMax(nativeCeil((end - start) / (step || 1)), 0), result2 = Array2(length);\n        while (length--) {\n          result2[fromRight ? length : ++index] = start;\n          start += step;\n        }\n        return result2;\n      }\n      function baseRepeat(string, n) {\n        var result2 = \"\";\n        if (!string || n < 1 || n > MAX_SAFE_INTEGER) {\n          return result2;\n        }\n        do {\n          if (n % 2) {\n            result2 += string;\n          }\n          n = nativeFloor(n / 2);\n          if (n) {\n            string += string;\n          }\n        } while (n);\n        return result2;\n      }\n      function baseRest(func, start) {\n        return setToString(overRest(func, start, identity2), func + \"\");\n      }\n      function baseSample(collection) {\n        return arraySample(values(collection));\n      }\n      function baseSampleSize(collection, n) {\n        var array = values(collection);\n        return shuffleSelf(array, baseClamp(n, 0, array.length));\n      }\n      function baseSet(object, path, value, customizer) {\n        if (!isObject2(object)) {\n          return object;\n        }\n        path = castPath(path, object);\n        var index = -1, length = path.length, lastIndex = length - 1, nested = object;\n        while (nested != null && ++index < length) {\n          var key = toKey(path[index]), newValue = value;\n          if (key === \"__proto__\" || key === \"constructor\" || key === \"prototype\") {\n            return object;\n          }\n          if (index != lastIndex) {\n            var objValue = nested[key];\n            newValue = customizer ? customizer(objValue, key, nested) : undefined$1;\n            if (newValue === undefined$1) {\n              newValue = isObject2(objValue) ? objValue : isIndex(path[index + 1]) ? [] : {};\n            }\n          }\n          assignValue(nested, key, newValue);\n          nested = nested[key];\n        }\n        return object;\n      }\n      var baseSetData = !metaMap ? identity2 : function(func, data2) {\n        metaMap.set(func, data2);\n        return func;\n      };\n      var baseSetToString = !defineProperty2 ? identity2 : function(func, string) {\n        return defineProperty2(func, \"toString\", {\n          \"configurable\": true,\n          \"enumerable\": false,\n          \"value\": constant(string),\n          \"writable\": true\n        });\n      };\n      function baseShuffle(collection) {\n        return shuffleSelf(values(collection));\n      }\n      function baseSlice(array, start, end) {\n        var index = -1, length = array.length;\n        if (start < 0) {\n          start = -start > length ? 0 : length + start;\n        }\n        end = end > length ? length : end;\n        if (end < 0) {\n          end += length;\n        }\n        length = start > end ? 0 : end - start >>> 0;\n        start >>>= 0;\n        var result2 = Array2(length);\n        while (++index < length) {\n          result2[index] = array[index + start];\n        }\n        return result2;\n      }\n      function baseSome(collection, predicate) {\n        var result2;\n        baseEach(collection, function(value, index, collection2) {\n          result2 = predicate(value, index, collection2);\n          return !result2;\n        });\n        return !!result2;\n      }\n      function baseSortedIndex(array, value, retHighest) {\n        var low = 0, high = array == null ? low : array.length;\n        if (typeof value == \"number\" && value === value && high <= HALF_MAX_ARRAY_LENGTH) {\n          while (low < high) {\n            var mid = low + high >>> 1, computed = array[mid];\n            if (computed !== null && !isSymbol(computed) && (retHighest ? computed <= value : computed < value)) {\n              low = mid + 1;\n            } else {\n              high = mid;\n            }\n          }\n          return high;\n        }\n        return baseSortedIndexBy(array, value, identity2, retHighest);\n      }\n      function baseSortedIndexBy(array, value, iteratee2, retHighest) {\n        var low = 0, high = array == null ? 0 : array.length;\n        if (high === 0) {\n          return 0;\n        }\n        value = iteratee2(value);\n        var valIsNaN = value !== value, valIsNull = value === null, valIsSymbol = isSymbol(value), valIsUndefined = value === undefined$1;\n        while (low < high) {\n          var mid = nativeFloor((low + high) / 2), computed = iteratee2(array[mid]), othIsDefined = computed !== undefined$1, othIsNull = computed === null, othIsReflexive = computed === computed, othIsSymbol = isSymbol(computed);\n          if (valIsNaN) {\n            var setLow = retHighest || othIsReflexive;\n          } else if (valIsUndefined) {\n            setLow = othIsReflexive && (retHighest || othIsDefined);\n          } else if (valIsNull) {\n            setLow = othIsReflexive && othIsDefined && (retHighest || !othIsNull);\n          } else if (valIsSymbol) {\n            setLow = othIsReflexive && othIsDefined && !othIsNull && (retHighest || !othIsSymbol);\n          } else if (othIsNull || othIsSymbol) {\n            setLow = false;\n          } else {\n            setLow = retHighest ? computed <= value : computed < value;\n          }\n          if (setLow) {\n            low = mid + 1;\n          } else {\n            high = mid;\n          }\n        }\n        return nativeMin(high, MAX_ARRAY_INDEX);\n      }\n      function baseSortedUniq(array, iteratee2) {\n        var index = -1, length = array.length, resIndex = 0, result2 = [];\n        while (++index < length) {\n          var value = array[index], computed = iteratee2 ? iteratee2(value) : value;\n          if (!index || !eq(computed, seen)) {\n            var seen = computed;\n            result2[resIndex++] = value === 0 ? 0 : value;\n          }\n        }\n        return result2;\n      }\n      function baseToNumber(value) {\n        if (typeof value == \"number\") {\n          return value;\n        }\n        if (isSymbol(value)) {\n          return NAN;\n        }\n        return +value;\n      }\n      function baseToString(value) {\n        if (typeof value == \"string\") {\n          return value;\n        }\n        if (isArray2(value)) {\n          return arrayMap(value, baseToString) + \"\";\n        }\n        if (isSymbol(value)) {\n          return symbolToString ? symbolToString.call(value) : \"\";\n        }\n        var result2 = value + \"\";\n        return result2 == \"0\" && 1 / value == -INFINITY ? \"-0\" : result2;\n      }\n      function baseUniq(array, iteratee2, comparator) {\n        var index = -1, includes2 = arrayIncludes, length = array.length, isCommon = true, result2 = [], seen = result2;\n        if (comparator) {\n          isCommon = false;\n          includes2 = arrayIncludesWith;\n        } else if (length >= LARGE_ARRAY_SIZE) {\n          var set2 = iteratee2 ? null : createSet(array);\n          if (set2) {\n            return setToArray(set2);\n          }\n          isCommon = false;\n          includes2 = cacheHas;\n          seen = new SetCache();\n        } else {\n          seen = iteratee2 ? [] : result2;\n        }\n        outer:\n          while (++index < length) {\n            var value = array[index], computed = iteratee2 ? iteratee2(value) : value;\n            value = comparator || value !== 0 ? value : 0;\n            if (isCommon && computed === computed) {\n              var seenIndex = seen.length;\n              while (seenIndex--) {\n                if (seen[seenIndex] === computed) {\n                  continue outer;\n                }\n              }\n              if (iteratee2) {\n                seen.push(computed);\n              }\n              result2.push(value);\n            } else if (!includes2(seen, computed, comparator)) {\n              if (seen !== result2) {\n                seen.push(computed);\n              }\n              result2.push(value);\n            }\n          }\n        return result2;\n      }\n      function baseUnset(object, path) {\n        path = castPath(path, object);\n        object = parent(object, path);\n        return object == null || delete object[toKey(last2(path))];\n      }\n      function baseUpdate(object, path, updater, customizer) {\n        return baseSet(object, path, updater(baseGet(object, path)), customizer);\n      }\n      function baseWhile(array, predicate, isDrop, fromRight) {\n        var length = array.length, index = fromRight ? length : -1;\n        while ((fromRight ? index-- : ++index < length) && predicate(array[index], index, array)) {\n        }\n        return isDrop ? baseSlice(array, fromRight ? 0 : index, fromRight ? index + 1 : length) : baseSlice(array, fromRight ? index + 1 : 0, fromRight ? length : index);\n      }\n      function baseWrapperValue(value, actions) {\n        var result2 = value;\n        if (result2 instanceof LazyWrapper) {\n          result2 = result2.value();\n        }\n        return arrayReduce(actions, function(result3, action) {\n          return action.func.apply(action.thisArg, arrayPush([result3], action.args));\n        }, result2);\n      }\n      function baseXor(arrays, iteratee2, comparator) {\n        var length = arrays.length;\n        if (length < 2) {\n          return length ? baseUniq(arrays[0]) : [];\n        }\n        var index = -1, result2 = Array2(length);\n        while (++index < length) {\n          var array = arrays[index], othIndex = -1;\n          while (++othIndex < length) {\n            if (othIndex != index) {\n              result2[index] = baseDifference(result2[index] || array, arrays[othIndex], iteratee2, comparator);\n            }\n          }\n        }\n        return baseUniq(baseFlatten(result2, 1), iteratee2, comparator);\n      }\n      function baseZipObject(props, values2, assignFunc) {\n        var index = -1, length = props.length, valsLength = values2.length, result2 = {};\n        while (++index < length) {\n          var value = index < valsLength ? values2[index] : undefined$1;\n          assignFunc(result2, props[index], value);\n        }\n        return result2;\n      }\n      function castArrayLikeObject(value) {\n        return isArrayLikeObject(value) ? value : [];\n      }\n      function castFunction(value) {\n        return typeof value == \"function\" ? value : identity2;\n      }\n      function castPath(value, object) {\n        if (isArray2(value)) {\n          return value;\n        }\n        return isKey(value, object) ? [value] : stringToPath(toString2(value));\n      }\n      var castRest = baseRest;\n      function castSlice(array, start, end) {\n        var length = array.length;\n        end = end === undefined$1 ? length : end;\n        return !start && end >= length ? array : baseSlice(array, start, end);\n      }\n      var clearTimeout2 = ctxClearTimeout || function(id) {\n        return root.clearTimeout(id);\n      };\n      function cloneBuffer(buffer2, isDeep) {\n        if (isDeep) {\n          return buffer2.slice();\n        }\n        var length = buffer2.length, result2 = allocUnsafe ? allocUnsafe(length) : new buffer2.constructor(length);\n        buffer2.copy(result2);\n        return result2;\n      }\n      function cloneArrayBuffer(arrayBuffer) {\n        var result2 = new arrayBuffer.constructor(arrayBuffer.byteLength);\n        new Uint8Array2(result2).set(new Uint8Array2(arrayBuffer));\n        return result2;\n      }\n      function cloneDataView(dataView, isDeep) {\n        var buffer2 = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n        return new dataView.constructor(buffer2, dataView.byteOffset, dataView.byteLength);\n      }\n      function cloneRegExp(regexp) {\n        var result2 = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n        result2.lastIndex = regexp.lastIndex;\n        return result2;\n      }\n      function cloneSymbol(symbol) {\n        return symbolValueOf ? Object2(symbolValueOf.call(symbol)) : {};\n      }\n      function cloneTypedArray(typedArray, isDeep) {\n        var buffer2 = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n        return new typedArray.constructor(buffer2, typedArray.byteOffset, typedArray.length);\n      }\n      function compareAscending(value, other) {\n        if (value !== other) {\n          var valIsDefined = value !== undefined$1, valIsNull = value === null, valIsReflexive = value === value, valIsSymbol = isSymbol(value);\n          var othIsDefined = other !== undefined$1, othIsNull = other === null, othIsReflexive = other === other, othIsSymbol = isSymbol(other);\n          if (!othIsNull && !othIsSymbol && !valIsSymbol && value > other || valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol || valIsNull && othIsDefined && othIsReflexive || !valIsDefined && othIsReflexive || !valIsReflexive) {\n            return 1;\n          }\n          if (!valIsNull && !valIsSymbol && !othIsSymbol && value < other || othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol || othIsNull && valIsDefined && valIsReflexive || !othIsDefined && valIsReflexive || !othIsReflexive) {\n            return -1;\n          }\n        }\n        return 0;\n      }\n      function compareMultiple(object, other, orders) {\n        var index = -1, objCriteria = object.criteria, othCriteria = other.criteria, length = objCriteria.length, ordersLength = orders.length;\n        while (++index < length) {\n          var result2 = compareAscending(objCriteria[index], othCriteria[index]);\n          if (result2) {\n            if (index >= ordersLength) {\n              return result2;\n            }\n            var order = orders[index];\n            return result2 * (order == \"desc\" ? -1 : 1);\n          }\n        }\n        return object.index - other.index;\n      }\n      function composeArgs(args, partials, holders, isCurried) {\n        var argsIndex = -1, argsLength = args.length, holdersLength = holders.length, leftIndex = -1, leftLength = partials.length, rangeLength = nativeMax(argsLength - holdersLength, 0), result2 = Array2(leftLength + rangeLength), isUncurried = !isCurried;\n        while (++leftIndex < leftLength) {\n          result2[leftIndex] = partials[leftIndex];\n        }\n        while (++argsIndex < holdersLength) {\n          if (isUncurried || argsIndex < argsLength) {\n            result2[holders[argsIndex]] = args[argsIndex];\n          }\n        }\n        while (rangeLength--) {\n          result2[leftIndex++] = args[argsIndex++];\n        }\n        return result2;\n      }\n      function composeArgsRight(args, partials, holders, isCurried) {\n        var argsIndex = -1, argsLength = args.length, holdersIndex = -1, holdersLength = holders.length, rightIndex = -1, rightLength = partials.length, rangeLength = nativeMax(argsLength - holdersLength, 0), result2 = Array2(rangeLength + rightLength), isUncurried = !isCurried;\n        while (++argsIndex < rangeLength) {\n          result2[argsIndex] = args[argsIndex];\n        }\n        var offset = argsIndex;\n        while (++rightIndex < rightLength) {\n          result2[offset + rightIndex] = partials[rightIndex];\n        }\n        while (++holdersIndex < holdersLength) {\n          if (isUncurried || argsIndex < argsLength) {\n            result2[offset + holders[holdersIndex]] = args[argsIndex++];\n          }\n        }\n        return result2;\n      }\n      function copyArray(source, array) {\n        var index = -1, length = source.length;\n        array || (array = Array2(length));\n        while (++index < length) {\n          array[index] = source[index];\n        }\n        return array;\n      }\n      function copyObject(source, props, object, customizer) {\n        var isNew = !object;\n        object || (object = {});\n        var index = -1, length = props.length;\n        while (++index < length) {\n          var key = props[index];\n          var newValue = customizer ? customizer(object[key], source[key], key, object, source) : undefined$1;\n          if (newValue === undefined$1) {\n            newValue = source[key];\n          }\n          if (isNew) {\n            baseAssignValue(object, key, newValue);\n          } else {\n            assignValue(object, key, newValue);\n          }\n        }\n        return object;\n      }\n      function copySymbols(source, object) {\n        return copyObject(source, getSymbols(source), object);\n      }\n      function copySymbolsIn(source, object) {\n        return copyObject(source, getSymbolsIn(source), object);\n      }\n      function createAggregator(setter, initializer) {\n        return function(collection, iteratee2) {\n          var func = isArray2(collection) ? arrayAggregator : baseAggregator, accumulator = initializer ? initializer() : {};\n          return func(collection, setter, getIteratee(iteratee2, 2), accumulator);\n        };\n      }\n      function createAssigner(assigner) {\n        return baseRest(function(object, sources) {\n          var index = -1, length = sources.length, customizer = length > 1 ? sources[length - 1] : undefined$1, guard = length > 2 ? sources[2] : undefined$1;\n          customizer = assigner.length > 3 && typeof customizer == \"function\" ? (length--, customizer) : undefined$1;\n          if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n            customizer = length < 3 ? undefined$1 : customizer;\n            length = 1;\n          }\n          object = Object2(object);\n          while (++index < length) {\n            var source = sources[index];\n            if (source) {\n              assigner(object, source, index, customizer);\n            }\n          }\n          return object;\n        });\n      }\n      function createBaseEach(eachFunc, fromRight) {\n        return function(collection, iteratee2) {\n          if (collection == null) {\n            return collection;\n          }\n          if (!isArrayLike2(collection)) {\n            return eachFunc(collection, iteratee2);\n          }\n          var length = collection.length, index = fromRight ? length : -1, iterable = Object2(collection);\n          while (fromRight ? index-- : ++index < length) {\n            if (iteratee2(iterable[index], index, iterable) === false) {\n              break;\n            }\n          }\n          return collection;\n        };\n      }\n      function createBaseFor(fromRight) {\n        return function(object, iteratee2, keysFunc) {\n          var index = -1, iterable = Object2(object), props = keysFunc(object), length = props.length;\n          while (length--) {\n            var key = props[fromRight ? length : ++index];\n            if (iteratee2(iterable[key], key, iterable) === false) {\n              break;\n            }\n          }\n          return object;\n        };\n      }\n      function createBind(func, bitmask, thisArg) {\n        var isBind = bitmask & WRAP_BIND_FLAG, Ctor = createCtor(func);\n        function wrapper() {\n          var fn = this && this !== root && this instanceof wrapper ? Ctor : func;\n          return fn.apply(isBind ? thisArg : this, arguments);\n        }\n        return wrapper;\n      }\n      function createCaseFirst(methodName) {\n        return function(string) {\n          string = toString2(string);\n          var strSymbols = hasUnicode(string) ? stringToArray(string) : undefined$1;\n          var chr = strSymbols ? strSymbols[0] : string.charAt(0);\n          var trailing = strSymbols ? castSlice(strSymbols, 1).join(\"\") : string.slice(1);\n          return chr[methodName]() + trailing;\n        };\n      }\n      function createCompounder(callback) {\n        return function(string) {\n          return arrayReduce(words(deburr(string).replace(reApos, \"\")), callback, \"\");\n        };\n      }\n      function createCtor(Ctor) {\n        return function() {\n          var args = arguments;\n          switch (args.length) {\n            case 0:\n              return new Ctor();\n            case 1:\n              return new Ctor(args[0]);\n            case 2:\n              return new Ctor(args[0], args[1]);\n            case 3:\n              return new Ctor(args[0], args[1], args[2]);\n            case 4:\n              return new Ctor(args[0], args[1], args[2], args[3]);\n            case 5:\n              return new Ctor(args[0], args[1], args[2], args[3], args[4]);\n            case 6:\n              return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5]);\n            case 7:\n              return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5], args[6]);\n          }\n          var thisBinding = baseCreate(Ctor.prototype), result2 = Ctor.apply(thisBinding, args);\n          return isObject2(result2) ? result2 : thisBinding;\n        };\n      }\n      function createCurry(func, bitmask, arity) {\n        var Ctor = createCtor(func);\n        function wrapper() {\n          var length = arguments.length, args = Array2(length), index = length, placeholder = getHolder(wrapper);\n          while (index--) {\n            args[index] = arguments[index];\n          }\n          var holders = length < 3 && args[0] !== placeholder && args[length - 1] !== placeholder ? [] : replaceHolders(args, placeholder);\n          length -= holders.length;\n          if (length < arity) {\n            return createRecurry(func, bitmask, createHybrid, wrapper.placeholder, undefined$1, args, holders, undefined$1, undefined$1, arity - length);\n          }\n          var fn = this && this !== root && this instanceof wrapper ? Ctor : func;\n          return apply(fn, this, args);\n        }\n        return wrapper;\n      }\n      function createFind(findIndexFunc) {\n        return function(collection, predicate, fromIndex) {\n          var iterable = Object2(collection);\n          if (!isArrayLike2(collection)) {\n            var iteratee2 = getIteratee(predicate, 3);\n            collection = keys(collection);\n            predicate = function(key) {\n              return iteratee2(iterable[key], key, iterable);\n            };\n          }\n          var index = findIndexFunc(collection, predicate, fromIndex);\n          return index > -1 ? iterable[iteratee2 ? collection[index] : index] : undefined$1;\n        };\n      }\n      function createFlow(fromRight) {\n        return flatRest(function(funcs) {\n          var length = funcs.length, index = length, prereq = LodashWrapper.prototype.thru;\n          if (fromRight) {\n            funcs.reverse();\n          }\n          while (index--) {\n            var func = funcs[index];\n            if (typeof func != \"function\") {\n              throw new TypeError2(FUNC_ERROR_TEXT);\n            }\n            if (prereq && !wrapper && getFuncName(func) == \"wrapper\") {\n              var wrapper = new LodashWrapper([], true);\n            }\n          }\n          index = wrapper ? index : length;\n          while (++index < length) {\n            func = funcs[index];\n            var funcName = getFuncName(func), data2 = funcName == \"wrapper\" ? getData2(func) : undefined$1;\n            if (data2 && isLaziable(data2[0]) && data2[1] == (WRAP_ARY_FLAG | WRAP_CURRY_FLAG | WRAP_PARTIAL_FLAG | WRAP_REARG_FLAG) && !data2[4].length && data2[9] == 1) {\n              wrapper = wrapper[getFuncName(data2[0])].apply(wrapper, data2[3]);\n            } else {\n              wrapper = func.length == 1 && isLaziable(func) ? wrapper[funcName]() : wrapper.thru(func);\n            }\n          }\n          return function() {\n            var args = arguments, value = args[0];\n            if (wrapper && args.length == 1 && isArray2(value)) {\n              return wrapper.plant(value).value();\n            }\n            var index2 = 0, result2 = length ? funcs[index2].apply(this, args) : value;\n            while (++index2 < length) {\n              result2 = funcs[index2].call(this, result2);\n            }\n            return result2;\n          };\n        });\n      }\n      function createHybrid(func, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary2, arity) {\n        var isAry = bitmask & WRAP_ARY_FLAG, isBind = bitmask & WRAP_BIND_FLAG, isBindKey = bitmask & WRAP_BIND_KEY_FLAG, isCurried = bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG), isFlip = bitmask & WRAP_FLIP_FLAG, Ctor = isBindKey ? undefined$1 : createCtor(func);\n        function wrapper() {\n          var length = arguments.length, args = Array2(length), index = length;\n          while (index--) {\n            args[index] = arguments[index];\n          }\n          if (isCurried) {\n            var placeholder = getHolder(wrapper), holdersCount = countHolders(args, placeholder);\n          }\n          if (partials) {\n            args = composeArgs(args, partials, holders, isCurried);\n          }\n          if (partialsRight) {\n            args = composeArgsRight(args, partialsRight, holdersRight, isCurried);\n          }\n          length -= holdersCount;\n          if (isCurried && length < arity) {\n            var newHolders = replaceHolders(args, placeholder);\n            return createRecurry(func, bitmask, createHybrid, wrapper.placeholder, thisArg, args, newHolders, argPos, ary2, arity - length);\n          }\n          var thisBinding = isBind ? thisArg : this, fn = isBindKey ? thisBinding[func] : func;\n          length = args.length;\n          if (argPos) {\n            args = reorder(args, argPos);\n          } else if (isFlip && length > 1) {\n            args.reverse();\n          }\n          if (isAry && ary2 < length) {\n            args.length = ary2;\n          }\n          if (this && this !== root && this instanceof wrapper) {\n            fn = Ctor || createCtor(fn);\n          }\n          return fn.apply(thisBinding, args);\n        }\n        return wrapper;\n      }\n      function createInverter(setter, toIteratee) {\n        return function(object, iteratee2) {\n          return baseInverter(object, setter, toIteratee(iteratee2), {});\n        };\n      }\n      function createMathOperation(operator, defaultValue) {\n        return function(value, other) {\n          var result2;\n          if (value === undefined$1 && other === undefined$1) {\n            return defaultValue;\n          }\n          if (value !== undefined$1) {\n            result2 = value;\n          }\n          if (other !== undefined$1) {\n            if (result2 === undefined$1) {\n              return other;\n            }\n            if (typeof value == \"string\" || typeof other == \"string\") {\n              value = baseToString(value);\n              other = baseToString(other);\n            } else {\n              value = baseToNumber(value);\n              other = baseToNumber(other);\n            }\n            result2 = operator(value, other);\n          }\n          return result2;\n        };\n      }\n      function createOver(arrayFunc) {\n        return flatRest(function(iteratees) {\n          iteratees = arrayMap(iteratees, baseUnary(getIteratee()));\n          return baseRest(function(args) {\n            var thisArg = this;\n            return arrayFunc(iteratees, function(iteratee2) {\n              return apply(iteratee2, thisArg, args);\n            });\n          });\n        });\n      }\n      function createPadding(length, chars) {\n        chars = chars === undefined$1 ? \" \" : baseToString(chars);\n        var charsLength = chars.length;\n        if (charsLength < 2) {\n          return charsLength ? baseRepeat(chars, length) : chars;\n        }\n        var result2 = baseRepeat(chars, nativeCeil(length / stringSize(chars)));\n        return hasUnicode(chars) ? castSlice(stringToArray(result2), 0, length).join(\"\") : result2.slice(0, length);\n      }\n      function createPartial(func, bitmask, thisArg, partials) {\n        var isBind = bitmask & WRAP_BIND_FLAG, Ctor = createCtor(func);\n        function wrapper() {\n          var argsIndex = -1, argsLength = arguments.length, leftIndex = -1, leftLength = partials.length, args = Array2(leftLength + argsLength), fn = this && this !== root && this instanceof wrapper ? Ctor : func;\n          while (++leftIndex < leftLength) {\n            args[leftIndex] = partials[leftIndex];\n          }\n          while (argsLength--) {\n            args[leftIndex++] = arguments[++argsIndex];\n          }\n          return apply(fn, isBind ? thisArg : this, args);\n        }\n        return wrapper;\n      }\n      function createRange(fromRight) {\n        return function(start, end, step) {\n          if (step && typeof step != \"number\" && isIterateeCall(start, end, step)) {\n            end = step = undefined$1;\n          }\n          start = toFinite(start);\n          if (end === undefined$1) {\n            end = start;\n            start = 0;\n          } else {\n            end = toFinite(end);\n          }\n          step = step === undefined$1 ? start < end ? 1 : -1 : toFinite(step);\n          return baseRange(start, end, step, fromRight);\n        };\n      }\n      function createRelationalOperation(operator) {\n        return function(value, other) {\n          if (!(typeof value == \"string\" && typeof other == \"string\")) {\n            value = toNumber2(value);\n            other = toNumber2(other);\n          }\n          return operator(value, other);\n        };\n      }\n      function createRecurry(func, bitmask, wrapFunc, placeholder, thisArg, partials, holders, argPos, ary2, arity) {\n        var isCurry = bitmask & WRAP_CURRY_FLAG, newHolders = isCurry ? holders : undefined$1, newHoldersRight = isCurry ? undefined$1 : holders, newPartials = isCurry ? partials : undefined$1, newPartialsRight = isCurry ? undefined$1 : partials;\n        bitmask |= isCurry ? WRAP_PARTIAL_FLAG : WRAP_PARTIAL_RIGHT_FLAG;\n        bitmask &= ~(isCurry ? WRAP_PARTIAL_RIGHT_FLAG : WRAP_PARTIAL_FLAG);\n        if (!(bitmask & WRAP_CURRY_BOUND_FLAG)) {\n          bitmask &= ~(WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG);\n        }\n        var newData = [\n          func,\n          bitmask,\n          thisArg,\n          newPartials,\n          newHolders,\n          newPartialsRight,\n          newHoldersRight,\n          argPos,\n          ary2,\n          arity\n        ];\n        var result2 = wrapFunc.apply(undefined$1, newData);\n        if (isLaziable(func)) {\n          setData(result2, newData);\n        }\n        result2.placeholder = placeholder;\n        return setWrapToString(result2, func, bitmask);\n      }\n      function createRound(methodName) {\n        var func = Math2[methodName];\n        return function(number, precision) {\n          number = toNumber2(number);\n          precision = precision == null ? 0 : nativeMin(toInteger(precision), 292);\n          if (precision && nativeIsFinite(number)) {\n            var pair = (toString2(number) + \"e\").split(\"e\"), value = func(pair[0] + \"e\" + (+pair[1] + precision));\n            pair = (toString2(value) + \"e\").split(\"e\");\n            return +(pair[0] + \"e\" + (+pair[1] - precision));\n          }\n          return func(number);\n        };\n      }\n      var createSet = !(Set2 && 1 / setToArray(new Set2([, -0]))[1] == INFINITY) ? noop2 : function(values2) {\n        return new Set2(values2);\n      };\n      function createToPairs(keysFunc) {\n        return function(object) {\n          var tag = getTag(object);\n          if (tag == mapTag) {\n            return mapToArray(object);\n          }\n          if (tag == setTag) {\n            return setToPairs(object);\n          }\n          return baseToPairs(object, keysFunc(object));\n        };\n      }\n      function createWrap(func, bitmask, thisArg, partials, holders, argPos, ary2, arity) {\n        var isBindKey = bitmask & WRAP_BIND_KEY_FLAG;\n        if (!isBindKey && typeof func != \"function\") {\n          throw new TypeError2(FUNC_ERROR_TEXT);\n        }\n        var length = partials ? partials.length : 0;\n        if (!length) {\n          bitmask &= ~(WRAP_PARTIAL_FLAG | WRAP_PARTIAL_RIGHT_FLAG);\n          partials = holders = undefined$1;\n        }\n        ary2 = ary2 === undefined$1 ? ary2 : nativeMax(toInteger(ary2), 0);\n        arity = arity === undefined$1 ? arity : toInteger(arity);\n        length -= holders ? holders.length : 0;\n        if (bitmask & WRAP_PARTIAL_RIGHT_FLAG) {\n          var partialsRight = partials, holdersRight = holders;\n          partials = holders = undefined$1;\n        }\n        var data2 = isBindKey ? undefined$1 : getData2(func);\n        var newData = [\n          func,\n          bitmask,\n          thisArg,\n          partials,\n          holders,\n          partialsRight,\n          holdersRight,\n          argPos,\n          ary2,\n          arity\n        ];\n        if (data2) {\n          mergeData(newData, data2);\n        }\n        func = newData[0];\n        bitmask = newData[1];\n        thisArg = newData[2];\n        partials = newData[3];\n        holders = newData[4];\n        arity = newData[9] = newData[9] === undefined$1 ? isBindKey ? 0 : func.length : nativeMax(newData[9] - length, 0);\n        if (!arity && bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG)) {\n          bitmask &= ~(WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG);\n        }\n        if (!bitmask || bitmask == WRAP_BIND_FLAG) {\n          var result2 = createBind(func, bitmask, thisArg);\n        } else if (bitmask == WRAP_CURRY_FLAG || bitmask == WRAP_CURRY_RIGHT_FLAG) {\n          result2 = createCurry(func, bitmask, arity);\n        } else if ((bitmask == WRAP_PARTIAL_FLAG || bitmask == (WRAP_BIND_FLAG | WRAP_PARTIAL_FLAG)) && !holders.length) {\n          result2 = createPartial(func, bitmask, thisArg, partials);\n        } else {\n          result2 = createHybrid.apply(undefined$1, newData);\n        }\n        var setter = data2 ? baseSetData : setData;\n        return setWrapToString(setter(result2, newData), func, bitmask);\n      }\n      function customDefaultsAssignIn(objValue, srcValue, key, object) {\n        if (objValue === undefined$1 || eq(objValue, objectProto[key]) && !hasOwnProperty.call(object, key)) {\n          return srcValue;\n        }\n        return objValue;\n      }\n      function customDefaultsMerge(objValue, srcValue, key, object, source, stack) {\n        if (isObject2(objValue) && isObject2(srcValue)) {\n          stack.set(srcValue, objValue);\n          baseMerge(objValue, srcValue, undefined$1, customDefaultsMerge, stack);\n          stack[\"delete\"](srcValue);\n        }\n        return objValue;\n      }\n      function customOmitClone(value) {\n        return isPlainObject(value) ? undefined$1 : value;\n      }\n      function equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n        var isPartial = bitmask & COMPARE_PARTIAL_FLAG, arrLength = array.length, othLength = other.length;\n        if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n          return false;\n        }\n        var arrStacked = stack.get(array);\n        var othStacked = stack.get(other);\n        if (arrStacked && othStacked) {\n          return arrStacked == other && othStacked == array;\n        }\n        var index = -1, result2 = true, seen = bitmask & COMPARE_UNORDERED_FLAG ? new SetCache() : undefined$1;\n        stack.set(array, other);\n        stack.set(other, array);\n        while (++index < arrLength) {\n          var arrValue = array[index], othValue = other[index];\n          if (customizer) {\n            var compared = isPartial ? customizer(othValue, arrValue, index, other, array, stack) : customizer(arrValue, othValue, index, array, other, stack);\n          }\n          if (compared !== undefined$1) {\n            if (compared) {\n              continue;\n            }\n            result2 = false;\n            break;\n          }\n          if (seen) {\n            if (!arraySome(other, function(othValue2, othIndex) {\n              if (!cacheHas(seen, othIndex) && (arrValue === othValue2 || equalFunc(arrValue, othValue2, bitmask, customizer, stack))) {\n                return seen.push(othIndex);\n              }\n            })) {\n              result2 = false;\n              break;\n            }\n          } else if (!(arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n            result2 = false;\n            break;\n          }\n        }\n        stack[\"delete\"](array);\n        stack[\"delete\"](other);\n        return result2;\n      }\n      function equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n        switch (tag) {\n          case dataViewTag:\n            if (object.byteLength != other.byteLength || object.byteOffset != other.byteOffset) {\n              return false;\n            }\n            object = object.buffer;\n            other = other.buffer;\n          case arrayBufferTag:\n            if (object.byteLength != other.byteLength || !equalFunc(new Uint8Array2(object), new Uint8Array2(other))) {\n              return false;\n            }\n            return true;\n          case boolTag:\n          case dateTag:\n          case numberTag:\n            return eq(+object, +other);\n          case errorTag:\n            return object.name == other.name && object.message == other.message;\n          case regexpTag:\n          case stringTag:\n            return object == other + \"\";\n          case mapTag:\n            var convert = mapToArray;\n          case setTag:\n            var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n            convert || (convert = setToArray);\n            if (object.size != other.size && !isPartial) {\n              return false;\n            }\n            var stacked = stack.get(object);\n            if (stacked) {\n              return stacked == other;\n            }\n            bitmask |= COMPARE_UNORDERED_FLAG;\n            stack.set(object, other);\n            var result2 = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n            stack[\"delete\"](object);\n            return result2;\n          case symbolTag:\n            if (symbolValueOf) {\n              return symbolValueOf.call(object) == symbolValueOf.call(other);\n            }\n        }\n        return false;\n      }\n      function equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n        var isPartial = bitmask & COMPARE_PARTIAL_FLAG, objProps = getAllKeys(object), objLength = objProps.length, othProps = getAllKeys(other), othLength = othProps.length;\n        if (objLength != othLength && !isPartial) {\n          return false;\n        }\n        var index = objLength;\n        while (index--) {\n          var key = objProps[index];\n          if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n            return false;\n          }\n        }\n        var objStacked = stack.get(object);\n        var othStacked = stack.get(other);\n        if (objStacked && othStacked) {\n          return objStacked == other && othStacked == object;\n        }\n        var result2 = true;\n        stack.set(object, other);\n        stack.set(other, object);\n        var skipCtor = isPartial;\n        while (++index < objLength) {\n          key = objProps[index];\n          var objValue = object[key], othValue = other[key];\n          if (customizer) {\n            var compared = isPartial ? customizer(othValue, objValue, key, other, object, stack) : customizer(objValue, othValue, key, object, other, stack);\n          }\n          if (!(compared === undefined$1 ? objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack) : compared)) {\n            result2 = false;\n            break;\n          }\n          skipCtor || (skipCtor = key == \"constructor\");\n        }\n        if (result2 && !skipCtor) {\n          var objCtor = object.constructor, othCtor = other.constructor;\n          if (objCtor != othCtor && (\"constructor\" in object && \"constructor\" in other) && !(typeof objCtor == \"function\" && objCtor instanceof objCtor && typeof othCtor == \"function\" && othCtor instanceof othCtor)) {\n            result2 = false;\n          }\n        }\n        stack[\"delete\"](object);\n        stack[\"delete\"](other);\n        return result2;\n      }\n      function flatRest(func) {\n        return setToString(overRest(func, undefined$1, flatten), func + \"\");\n      }\n      function getAllKeys(object) {\n        return baseGetAllKeys(object, keys, getSymbols);\n      }\n      function getAllKeysIn(object) {\n        return baseGetAllKeys(object, keysIn, getSymbolsIn);\n      }\n      var getData2 = !metaMap ? noop2 : function(func) {\n        return metaMap.get(func);\n      };\n      function getFuncName(func) {\n        var result2 = func.name + \"\", array = realNames[result2], length = hasOwnProperty.call(realNames, result2) ? array.length : 0;\n        while (length--) {\n          var data2 = array[length], otherFunc = data2.func;\n          if (otherFunc == null || otherFunc == func) {\n            return data2.name;\n          }\n        }\n        return result2;\n      }\n      function getHolder(func) {\n        var object = hasOwnProperty.call(lodash2, \"placeholder\") ? lodash2 : func;\n        return object.placeholder;\n      }\n      function getIteratee() {\n        var result2 = lodash2.iteratee || iteratee;\n        result2 = result2 === iteratee ? baseIteratee : result2;\n        return arguments.length ? result2(arguments[0], arguments[1]) : result2;\n      }\n      function getMapData(map3, key) {\n        var data2 = map3.__data__;\n        return isKeyable(key) ? data2[typeof key == \"string\" ? \"string\" : \"hash\"] : data2.map;\n      }\n      function getMatchData(object) {\n        var result2 = keys(object), length = result2.length;\n        while (length--) {\n          var key = result2[length], value = object[key];\n          result2[length] = [key, value, isStrictComparable(value)];\n        }\n        return result2;\n      }\n      function getNative(object, key) {\n        var value = getValue(object, key);\n        return baseIsNative(value) ? value : undefined$1;\n      }\n      function getRawTag(value) {\n        var isOwn = hasOwnProperty.call(value, symToStringTag), tag = value[symToStringTag];\n        try {\n          value[symToStringTag] = undefined$1;\n          var unmasked = true;\n        } catch (e) {\n        }\n        var result2 = nativeObjectToString.call(value);\n        if (unmasked) {\n          if (isOwn) {\n            value[symToStringTag] = tag;\n          } else {\n            delete value[symToStringTag];\n          }\n        }\n        return result2;\n      }\n      var getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n        if (object == null) {\n          return [];\n        }\n        object = Object2(object);\n        return arrayFilter(nativeGetSymbols(object), function(symbol) {\n          return propertyIsEnumerable.call(object, symbol);\n        });\n      };\n      var getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n        var result2 = [];\n        while (object) {\n          arrayPush(result2, getSymbols(object));\n          object = getPrototype(object);\n        }\n        return result2;\n      };\n      var getTag = baseGetTag;\n      if (DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag || Map2 && getTag(new Map2()) != mapTag || Promise2 && getTag(Promise2.resolve()) != promiseTag || Set2 && getTag(new Set2()) != setTag || WeakMap && getTag(new WeakMap()) != weakMapTag) {\n        getTag = function(value) {\n          var result2 = baseGetTag(value), Ctor = result2 == objectTag ? value.constructor : undefined$1, ctorString = Ctor ? toSource(Ctor) : \"\";\n          if (ctorString) {\n            switch (ctorString) {\n              case dataViewCtorString:\n                return dataViewTag;\n              case mapCtorString:\n                return mapTag;\n              case promiseCtorString:\n                return promiseTag;\n              case setCtorString:\n                return setTag;\n              case weakMapCtorString:\n                return weakMapTag;\n            }\n          }\n          return result2;\n        };\n      }\n      function getView(start, end, transforms) {\n        var index = -1, length = transforms.length;\n        while (++index < length) {\n          var data2 = transforms[index], size2 = data2.size;\n          switch (data2.type) {\n            case \"drop\":\n              start += size2;\n              break;\n            case \"dropRight\":\n              end -= size2;\n              break;\n            case \"take\":\n              end = nativeMin(end, start + size2);\n              break;\n            case \"takeRight\":\n              start = nativeMax(start, end - size2);\n              break;\n          }\n        }\n        return { \"start\": start, \"end\": end };\n      }\n      function getWrapDetails(source) {\n        var match = source.match(reWrapDetails);\n        return match ? match[1].split(reSplitDetails) : [];\n      }\n      function hasPath(object, path, hasFunc) {\n        path = castPath(path, object);\n        var index = -1, length = path.length, result2 = false;\n        while (++index < length) {\n          var key = toKey(path[index]);\n          if (!(result2 = object != null && hasFunc(object, key))) {\n            break;\n          }\n          object = object[key];\n        }\n        if (result2 || ++index != length) {\n          return result2;\n        }\n        length = object == null ? 0 : object.length;\n        return !!length && isLength(length) && isIndex(key, length) && (isArray2(object) || isArguments(object));\n      }\n      function initCloneArray(array) {\n        var length = array.length, result2 = new array.constructor(length);\n        if (length && typeof array[0] == \"string\" && hasOwnProperty.call(array, \"index\")) {\n          result2.index = array.index;\n          result2.input = array.input;\n        }\n        return result2;\n      }\n      function initCloneObject(object) {\n        return typeof object.constructor == \"function\" && !isPrototype(object) ? baseCreate(getPrototype(object)) : {};\n      }\n      function initCloneByTag(object, tag, isDeep) {\n        var Ctor = object.constructor;\n        switch (tag) {\n          case arrayBufferTag:\n            return cloneArrayBuffer(object);\n          case boolTag:\n          case dateTag:\n            return new Ctor(+object);\n          case dataViewTag:\n            return cloneDataView(object, isDeep);\n          case float32Tag:\n          case float64Tag:\n          case int8Tag:\n          case int16Tag:\n          case int32Tag:\n          case uint8Tag:\n          case uint8ClampedTag:\n          case uint16Tag:\n          case uint32Tag:\n            return cloneTypedArray(object, isDeep);\n          case mapTag:\n            return new Ctor();\n          case numberTag:\n          case stringTag:\n            return new Ctor(object);\n          case regexpTag:\n            return cloneRegExp(object);\n          case setTag:\n            return new Ctor();\n          case symbolTag:\n            return cloneSymbol(object);\n        }\n      }\n      function insertWrapDetails(source, details) {\n        var length = details.length;\n        if (!length) {\n          return source;\n        }\n        var lastIndex = length - 1;\n        details[lastIndex] = (length > 1 ? \"& \" : \"\") + details[lastIndex];\n        details = details.join(length > 2 ? \", \" : \" \");\n        return source.replace(reWrapComment, \"{\\n/* [wrapped with \" + details + \"] */\\n\");\n      }\n      function isFlattenable(value) {\n        return isArray2(value) || isArguments(value) || !!(spreadableSymbol && value && value[spreadableSymbol]);\n      }\n      function isIndex(value, length) {\n        var type2 = typeof value;\n        length = length == null ? MAX_SAFE_INTEGER : length;\n        return !!length && (type2 == \"number\" || type2 != \"symbol\" && reIsUint.test(value)) && (value > -1 && value % 1 == 0 && value < length);\n      }\n      function isIterateeCall(value, index, object) {\n        if (!isObject2(object)) {\n          return false;\n        }\n        var type2 = typeof index;\n        if (type2 == \"number\" ? isArrayLike2(object) && isIndex(index, object.length) : type2 == \"string\" && index in object) {\n          return eq(object[index], value);\n        }\n        return false;\n      }\n      function isKey(value, object) {\n        if (isArray2(value)) {\n          return false;\n        }\n        var type2 = typeof value;\n        if (type2 == \"number\" || type2 == \"symbol\" || type2 == \"boolean\" || value == null || isSymbol(value)) {\n          return true;\n        }\n        return reIsPlainProp.test(value) || !reIsDeepProp.test(value) || object != null && value in Object2(object);\n      }\n      function isKeyable(value) {\n        var type2 = typeof value;\n        return type2 == \"string\" || type2 == \"number\" || type2 == \"symbol\" || type2 == \"boolean\" ? value !== \"__proto__\" : value === null;\n      }\n      function isLaziable(func) {\n        var funcName = getFuncName(func), other = lodash2[funcName];\n        if (typeof other != \"function\" || !(funcName in LazyWrapper.prototype)) {\n          return false;\n        }\n        if (func === other) {\n          return true;\n        }\n        var data2 = getData2(other);\n        return !!data2 && func === data2[0];\n      }\n      function isMasked(func) {\n        return !!maskSrcKey && maskSrcKey in func;\n      }\n      var isMaskable = coreJsData ? isFunction2 : stubFalse;\n      function isPrototype(value) {\n        var Ctor = value && value.constructor, proto = typeof Ctor == \"function\" && Ctor.prototype || objectProto;\n        return value === proto;\n      }\n      function isStrictComparable(value) {\n        return value === value && !isObject2(value);\n      }\n      function matchesStrictComparable(key, srcValue) {\n        return function(object) {\n          if (object == null) {\n            return false;\n          }\n          return object[key] === srcValue && (srcValue !== undefined$1 || key in Object2(object));\n        };\n      }\n      function memoizeCapped(func) {\n        var result2 = memoize(func, function(key) {\n          if (cache2.size === MAX_MEMOIZE_SIZE) {\n            cache2.clear();\n          }\n          return key;\n        });\n        var cache2 = result2.cache;\n        return result2;\n      }\n      function mergeData(data2, source) {\n        var bitmask = data2[1], srcBitmask = source[1], newBitmask = bitmask | srcBitmask, isCommon = newBitmask < (WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG | WRAP_ARY_FLAG);\n        var isCombo = srcBitmask == WRAP_ARY_FLAG && bitmask == WRAP_CURRY_FLAG || srcBitmask == WRAP_ARY_FLAG && bitmask == WRAP_REARG_FLAG && data2[7].length <= source[8] || srcBitmask == (WRAP_ARY_FLAG | WRAP_REARG_FLAG) && source[7].length <= source[8] && bitmask == WRAP_CURRY_FLAG;\n        if (!(isCommon || isCombo)) {\n          return data2;\n        }\n        if (srcBitmask & WRAP_BIND_FLAG) {\n          data2[2] = source[2];\n          newBitmask |= bitmask & WRAP_BIND_FLAG ? 0 : WRAP_CURRY_BOUND_FLAG;\n        }\n        var value = source[3];\n        if (value) {\n          var partials = data2[3];\n          data2[3] = partials ? composeArgs(partials, value, source[4]) : value;\n          data2[4] = partials ? replaceHolders(data2[3], PLACEHOLDER) : source[4];\n        }\n        value = source[5];\n        if (value) {\n          partials = data2[5];\n          data2[5] = partials ? composeArgsRight(partials, value, source[6]) : value;\n          data2[6] = partials ? replaceHolders(data2[5], PLACEHOLDER) : source[6];\n        }\n        value = source[7];\n        if (value) {\n          data2[7] = value;\n        }\n        if (srcBitmask & WRAP_ARY_FLAG) {\n          data2[8] = data2[8] == null ? source[8] : nativeMin(data2[8], source[8]);\n        }\n        if (data2[9] == null) {\n          data2[9] = source[9];\n        }\n        data2[0] = source[0];\n        data2[1] = newBitmask;\n        return data2;\n      }\n      function nativeKeysIn(object) {\n        var result2 = [];\n        if (object != null) {\n          for (var key in Object2(object)) {\n            result2.push(key);\n          }\n        }\n        return result2;\n      }\n      function objectToString(value) {\n        return nativeObjectToString.call(value);\n      }\n      function overRest(func, start, transform2) {\n        start = nativeMax(start === undefined$1 ? func.length - 1 : start, 0);\n        return function() {\n          var args = arguments, index = -1, length = nativeMax(args.length - start, 0), array = Array2(length);\n          while (++index < length) {\n            array[index] = args[start + index];\n          }\n          index = -1;\n          var otherArgs = Array2(start + 1);\n          while (++index < start) {\n            otherArgs[index] = args[index];\n          }\n          otherArgs[start] = transform2(array);\n          return apply(func, this, otherArgs);\n        };\n      }\n      function parent(object, path) {\n        return path.length < 2 ? object : baseGet(object, baseSlice(path, 0, -1));\n      }\n      function reorder(array, indexes) {\n        var arrLength = array.length, length = nativeMin(indexes.length, arrLength), oldArray = copyArray(array);\n        while (length--) {\n          var index = indexes[length];\n          array[length] = isIndex(index, arrLength) ? oldArray[index] : undefined$1;\n        }\n        return array;\n      }\n      function safeGet(object, key) {\n        if (key === \"constructor\" && typeof object[key] === \"function\") {\n          return;\n        }\n        if (key == \"__proto__\") {\n          return;\n        }\n        return object[key];\n      }\n      var setData = shortOut(baseSetData);\n      var setTimeout2 = ctxSetTimeout || function(func, wait) {\n        return root.setTimeout(func, wait);\n      };\n      var setToString = shortOut(baseSetToString);\n      function setWrapToString(wrapper, reference, bitmask) {\n        var source = reference + \"\";\n        return setToString(wrapper, insertWrapDetails(source, updateWrapDetails(getWrapDetails(source), bitmask)));\n      }\n      function shortOut(func) {\n        var count2 = 0, lastCalled = 0;\n        return function() {\n          var stamp = nativeNow(), remaining = HOT_SPAN - (stamp - lastCalled);\n          lastCalled = stamp;\n          if (remaining > 0) {\n            if (++count2 >= HOT_COUNT) {\n              return arguments[0];\n            }\n          } else {\n            count2 = 0;\n          }\n          return func.apply(undefined$1, arguments);\n        };\n      }\n      function shuffleSelf(array, size2) {\n        var index = -1, length = array.length, lastIndex = length - 1;\n        size2 = size2 === undefined$1 ? length : size2;\n        while (++index < size2) {\n          var rand = baseRandom(index, lastIndex), value = array[rand];\n          array[rand] = array[index];\n          array[index] = value;\n        }\n        array.length = size2;\n        return array;\n      }\n      var stringToPath = memoizeCapped(function(string) {\n        var result2 = [];\n        if (string.charCodeAt(0) === 46) {\n          result2.push(\"\");\n        }\n        string.replace(rePropName, function(match, number, quote, subString) {\n          result2.push(quote ? subString.replace(reEscapeChar, \"$1\") : number || match);\n        });\n        return result2;\n      });\n      function toKey(value) {\n        if (typeof value == \"string\" || isSymbol(value)) {\n          return value;\n        }\n        var result2 = value + \"\";\n        return result2 == \"0\" && 1 / value == -INFINITY ? \"-0\" : result2;\n      }\n      function toSource(func) {\n        if (func != null) {\n          try {\n            return funcToString.call(func);\n          } catch (e) {\n          }\n          try {\n            return func + \"\";\n          } catch (e) {\n          }\n        }\n        return \"\";\n      }\n      function updateWrapDetails(details, bitmask) {\n        arrayEach(wrapFlags, function(pair) {\n          var value = \"_.\" + pair[0];\n          if (bitmask & pair[1] && !arrayIncludes(details, value)) {\n            details.push(value);\n          }\n        });\n        return details.sort();\n      }\n      function wrapperClone(wrapper) {\n        if (wrapper instanceof LazyWrapper) {\n          return wrapper.clone();\n        }\n        var result2 = new LodashWrapper(wrapper.__wrapped__, wrapper.__chain__);\n        result2.__actions__ = copyArray(wrapper.__actions__);\n        result2.__index__ = wrapper.__index__;\n        result2.__values__ = wrapper.__values__;\n        return result2;\n      }\n      function chunk(array, size2, guard) {\n        if (guard ? isIterateeCall(array, size2, guard) : size2 === undefined$1) {\n          size2 = 1;\n        } else {\n          size2 = nativeMax(toInteger(size2), 0);\n        }\n        var length = array == null ? 0 : array.length;\n        if (!length || size2 < 1) {\n          return [];\n        }\n        var index = 0, resIndex = 0, result2 = Array2(nativeCeil(length / size2));\n        while (index < length) {\n          result2[resIndex++] = baseSlice(array, index, index += size2);\n        }\n        return result2;\n      }\n      function compact(array) {\n        var index = -1, length = array == null ? 0 : array.length, resIndex = 0, result2 = [];\n        while (++index < length) {\n          var value = array[index];\n          if (value) {\n            result2[resIndex++] = value;\n          }\n        }\n        return result2;\n      }\n      function concat2() {\n        var length = arguments.length;\n        if (!length) {\n          return [];\n        }\n        var args = Array2(length - 1), array = arguments[0], index = length;\n        while (index--) {\n          args[index - 1] = arguments[index];\n        }\n        return arrayPush(isArray2(array) ? copyArray(array) : [array], baseFlatten(args, 1));\n      }\n      var difference = baseRest(function(array, values2) {\n        return isArrayLikeObject(array) ? baseDifference(array, baseFlatten(values2, 1, isArrayLikeObject, true)) : [];\n      });\n      var differenceBy = baseRest(function(array, values2) {\n        var iteratee2 = last2(values2);\n        if (isArrayLikeObject(iteratee2)) {\n          iteratee2 = undefined$1;\n        }\n        return isArrayLikeObject(array) ? baseDifference(array, baseFlatten(values2, 1, isArrayLikeObject, true), getIteratee(iteratee2, 2)) : [];\n      });\n      var differenceWith = baseRest(function(array, values2) {\n        var comparator = last2(values2);\n        if (isArrayLikeObject(comparator)) {\n          comparator = undefined$1;\n        }\n        return isArrayLikeObject(array) ? baseDifference(array, baseFlatten(values2, 1, isArrayLikeObject, true), undefined$1, comparator) : [];\n      });\n      function drop(array, n, guard) {\n        var length = array == null ? 0 : array.length;\n        if (!length) {\n          return [];\n        }\n        n = guard || n === undefined$1 ? 1 : toInteger(n);\n        return baseSlice(array, n < 0 ? 0 : n, length);\n      }\n      function dropRight(array, n, guard) {\n        var length = array == null ? 0 : array.length;\n        if (!length) {\n          return [];\n        }\n        n = guard || n === undefined$1 ? 1 : toInteger(n);\n        n = length - n;\n        return baseSlice(array, 0, n < 0 ? 0 : n);\n      }\n      function dropRightWhile(array, predicate) {\n        return array && array.length ? baseWhile(array, getIteratee(predicate, 3), true, true) : [];\n      }\n      function dropWhile(array, predicate) {\n        return array && array.length ? baseWhile(array, getIteratee(predicate, 3), true) : [];\n      }\n      function fill(array, value, start, end) {\n        var length = array == null ? 0 : array.length;\n        if (!length) {\n          return [];\n        }\n        if (start && typeof start != \"number\" && isIterateeCall(array, value, start)) {\n          start = 0;\n          end = length;\n        }\n        return baseFill(array, value, start, end);\n      }\n      function findIndex2(array, predicate, fromIndex) {\n        var length = array == null ? 0 : array.length;\n        if (!length) {\n          return -1;\n        }\n        var index = fromIndex == null ? 0 : toInteger(fromIndex);\n        if (index < 0) {\n          index = nativeMax(length + index, 0);\n        }\n        return baseFindIndex(array, getIteratee(predicate, 3), index);\n      }\n      function findLastIndex(array, predicate, fromIndex) {\n        var length = array == null ? 0 : array.length;\n        if (!length) {\n          return -1;\n        }\n        var index = length - 1;\n        if (fromIndex !== undefined$1) {\n          index = toInteger(fromIndex);\n          index = fromIndex < 0 ? nativeMax(length + index, 0) : nativeMin(index, length - 1);\n        }\n        return baseFindIndex(array, getIteratee(predicate, 3), index, true);\n      }\n      function flatten(array) {\n        var length = array == null ? 0 : array.length;\n        return length ? baseFlatten(array, 1) : [];\n      }\n      function flattenDeep(array) {\n        var length = array == null ? 0 : array.length;\n        return length ? baseFlatten(array, INFINITY) : [];\n      }\n      function flattenDepth(array, depth) {\n        var length = array == null ? 0 : array.length;\n        if (!length) {\n          return [];\n        }\n        depth = depth === undefined$1 ? 1 : toInteger(depth);\n        return baseFlatten(array, depth);\n      }\n      function fromPairs(pairs2) {\n        var index = -1, length = pairs2 == null ? 0 : pairs2.length, result2 = {};\n        while (++index < length) {\n          var pair = pairs2[index];\n          result2[pair[0]] = pair[1];\n        }\n        return result2;\n      }\n      function head(array) {\n        return array && array.length ? array[0] : undefined$1;\n      }\n      function indexOf(array, value, fromIndex) {\n        var length = array == null ? 0 : array.length;\n        if (!length) {\n          return -1;\n        }\n        var index = fromIndex == null ? 0 : toInteger(fromIndex);\n        if (index < 0) {\n          index = nativeMax(length + index, 0);\n        }\n        return baseIndexOf(array, value, index);\n      }\n      function initial(array) {\n        var length = array == null ? 0 : array.length;\n        return length ? baseSlice(array, 0, -1) : [];\n      }\n      var intersection = baseRest(function(arrays) {\n        var mapped = arrayMap(arrays, castArrayLikeObject);\n        return mapped.length && mapped[0] === arrays[0] ? baseIntersection(mapped) : [];\n      });\n      var intersectionBy = baseRest(function(arrays) {\n        var iteratee2 = last2(arrays), mapped = arrayMap(arrays, castArrayLikeObject);\n        if (iteratee2 === last2(mapped)) {\n          iteratee2 = undefined$1;\n        } else {\n          mapped.pop();\n        }\n        return mapped.length && mapped[0] === arrays[0] ? baseIntersection(mapped, getIteratee(iteratee2, 2)) : [];\n      });\n      var intersectionWith = baseRest(function(arrays) {\n        var comparator = last2(arrays), mapped = arrayMap(arrays, castArrayLikeObject);\n        comparator = typeof comparator == \"function\" ? comparator : undefined$1;\n        if (comparator) {\n          mapped.pop();\n        }\n        return mapped.length && mapped[0] === arrays[0] ? baseIntersection(mapped, undefined$1, comparator) : [];\n      });\n      function join(array, separator) {\n        return array == null ? \"\" : nativeJoin.call(array, separator);\n      }\n      function last2(array) {\n        var length = array == null ? 0 : array.length;\n        return length ? array[length - 1] : undefined$1;\n      }\n      function lastIndexOf(array, value, fromIndex) {\n        var length = array == null ? 0 : array.length;\n        if (!length) {\n          return -1;\n        }\n        var index = length;\n        if (fromIndex !== undefined$1) {\n          index = toInteger(fromIndex);\n          index = index < 0 ? nativeMax(length + index, 0) : nativeMin(index, length - 1);\n        }\n        return value === value ? strictLastIndexOf(array, value, index) : baseFindIndex(array, baseIsNaN, index, true);\n      }\n      function nth(array, n) {\n        return array && array.length ? baseNth(array, toInteger(n)) : undefined$1;\n      }\n      var pull = baseRest(pullAll);\n      function pullAll(array, values2) {\n        return array && array.length && values2 && values2.length ? basePullAll(array, values2) : array;\n      }\n      function pullAllBy(array, values2, iteratee2) {\n        return array && array.length && values2 && values2.length ? basePullAll(array, values2, getIteratee(iteratee2, 2)) : array;\n      }\n      function pullAllWith(array, values2, comparator) {\n        return array && array.length && values2 && values2.length ? basePullAll(array, values2, undefined$1, comparator) : array;\n      }\n      var pullAt = flatRest(function(array, indexes) {\n        var length = array == null ? 0 : array.length, result2 = baseAt(array, indexes);\n        basePullAt(array, arrayMap(indexes, function(index) {\n          return isIndex(index, length) ? +index : index;\n        }).sort(compareAscending));\n        return result2;\n      });\n      function remove(array, predicate) {\n        var result2 = [];\n        if (!(array && array.length)) {\n          return result2;\n        }\n        var index = -1, indexes = [], length = array.length;\n        predicate = getIteratee(predicate, 3);\n        while (++index < length) {\n          var value = array[index];\n          if (predicate(value, index, array)) {\n            result2.push(value);\n            indexes.push(index);\n          }\n        }\n        basePullAt(array, indexes);\n        return result2;\n      }\n      function reverse(array) {\n        return array == null ? array : nativeReverse.call(array);\n      }\n      function slice(array, start, end) {\n        var length = array == null ? 0 : array.length;\n        if (!length) {\n          return [];\n        }\n        if (end && typeof end != \"number\" && isIterateeCall(array, start, end)) {\n          start = 0;\n          end = length;\n        } else {\n          start = start == null ? 0 : toInteger(start);\n          end = end === undefined$1 ? length : toInteger(end);\n        }\n        return baseSlice(array, start, end);\n      }\n      function sortedIndex(array, value) {\n        return baseSortedIndex(array, value);\n      }\n      function sortedIndexBy(array, value, iteratee2) {\n        return baseSortedIndexBy(array, value, getIteratee(iteratee2, 2));\n      }\n      function sortedIndexOf(array, value) {\n        var length = array == null ? 0 : array.length;\n        if (length) {\n          var index = baseSortedIndex(array, value);\n          if (index < length && eq(array[index], value)) {\n            return index;\n          }\n        }\n        return -1;\n      }\n      function sortedLastIndex(array, value) {\n        return baseSortedIndex(array, value, true);\n      }\n      function sortedLastIndexBy(array, value, iteratee2) {\n        return baseSortedIndexBy(array, value, getIteratee(iteratee2, 2), true);\n      }\n      function sortedLastIndexOf(array, value) {\n        var length = array == null ? 0 : array.length;\n        if (length) {\n          var index = baseSortedIndex(array, value, true) - 1;\n          if (eq(array[index], value)) {\n            return index;\n          }\n        }\n        return -1;\n      }\n      function sortedUniq(array) {\n        return array && array.length ? baseSortedUniq(array) : [];\n      }\n      function sortedUniqBy(array, iteratee2) {\n        return array && array.length ? baseSortedUniq(array, getIteratee(iteratee2, 2)) : [];\n      }\n      function tail(array) {\n        var length = array == null ? 0 : array.length;\n        return length ? baseSlice(array, 1, length) : [];\n      }\n      function take2(array, n, guard) {\n        if (!(array && array.length)) {\n          return [];\n        }\n        n = guard || n === undefined$1 ? 1 : toInteger(n);\n        return baseSlice(array, 0, n < 0 ? 0 : n);\n      }\n      function takeRight(array, n, guard) {\n        var length = array == null ? 0 : array.length;\n        if (!length) {\n          return [];\n        }\n        n = guard || n === undefined$1 ? 1 : toInteger(n);\n        n = length - n;\n        return baseSlice(array, n < 0 ? 0 : n, length);\n      }\n      function takeRightWhile(array, predicate) {\n        return array && array.length ? baseWhile(array, getIteratee(predicate, 3), false, true) : [];\n      }\n      function takeWhile2(array, predicate) {\n        return array && array.length ? baseWhile(array, getIteratee(predicate, 3)) : [];\n      }\n      var union = baseRest(function(arrays) {\n        return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true));\n      });\n      var unionBy = baseRest(function(arrays) {\n        var iteratee2 = last2(arrays);\n        if (isArrayLikeObject(iteratee2)) {\n          iteratee2 = undefined$1;\n        }\n        return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true), getIteratee(iteratee2, 2));\n      });\n      var unionWith = baseRest(function(arrays) {\n        var comparator = last2(arrays);\n        comparator = typeof comparator == \"function\" ? comparator : undefined$1;\n        return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true), undefined$1, comparator);\n      });\n      function uniq(array) {\n        return array && array.length ? baseUniq(array) : [];\n      }\n      function uniqBy2(array, iteratee2) {\n        return array && array.length ? baseUniq(array, getIteratee(iteratee2, 2)) : [];\n      }\n      function uniqWith(array, comparator) {\n        comparator = typeof comparator == \"function\" ? comparator : undefined$1;\n        return array && array.length ? baseUniq(array, undefined$1, comparator) : [];\n      }\n      function unzip(array) {\n        if (!(array && array.length)) {\n          return [];\n        }\n        var length = 0;\n        array = arrayFilter(array, function(group2) {\n          if (isArrayLikeObject(group2)) {\n            length = nativeMax(group2.length, length);\n            return true;\n          }\n        });\n        return baseTimes(length, function(index) {\n          return arrayMap(array, baseProperty(index));\n        });\n      }\n      function unzipWith(array, iteratee2) {\n        if (!(array && array.length)) {\n          return [];\n        }\n        var result2 = unzip(array);\n        if (iteratee2 == null) {\n          return result2;\n        }\n        return arrayMap(result2, function(group2) {\n          return apply(iteratee2, undefined$1, group2);\n        });\n      }\n      var without = baseRest(function(array, values2) {\n        return isArrayLikeObject(array) ? baseDifference(array, values2) : [];\n      });\n      var xor2 = baseRest(function(arrays) {\n        return baseXor(arrayFilter(arrays, isArrayLikeObject));\n      });\n      var xorBy = baseRest(function(arrays) {\n        var iteratee2 = last2(arrays);\n        if (isArrayLikeObject(iteratee2)) {\n          iteratee2 = undefined$1;\n        }\n        return baseXor(arrayFilter(arrays, isArrayLikeObject), getIteratee(iteratee2, 2));\n      });\n      var xorWith = baseRest(function(arrays) {\n        var comparator = last2(arrays);\n        comparator = typeof comparator == \"function\" ? comparator : undefined$1;\n        return baseXor(arrayFilter(arrays, isArrayLikeObject), undefined$1, comparator);\n      });\n      var zip2 = baseRest(unzip);\n      function zipObject(props, values2) {\n        return baseZipObject(props || [], values2 || [], assignValue);\n      }\n      function zipObjectDeep(props, values2) {\n        return baseZipObject(props || [], values2 || [], baseSet);\n      }\n      var zipWith = baseRest(function(arrays) {\n        var length = arrays.length, iteratee2 = length > 1 ? arrays[length - 1] : undefined$1;\n        iteratee2 = typeof iteratee2 == \"function\" ? (arrays.pop(), iteratee2) : undefined$1;\n        return unzipWith(arrays, iteratee2);\n      });\n      function chain(value) {\n        var result2 = lodash2(value);\n        result2.__chain__ = true;\n        return result2;\n      }\n      function tap2(value, interceptor) {\n        interceptor(value);\n        return value;\n      }\n      function thru(value, interceptor) {\n        return interceptor(value);\n      }\n      var wrapperAt = flatRest(function(paths) {\n        var length = paths.length, start = length ? paths[0] : 0, value = this.__wrapped__, interceptor = function(object) {\n          return baseAt(object, paths);\n        };\n        if (length > 1 || this.__actions__.length || !(value instanceof LazyWrapper) || !isIndex(start)) {\n          return this.thru(interceptor);\n        }\n        value = value.slice(start, +start + (length ? 1 : 0));\n        value.__actions__.push({\n          \"func\": thru,\n          \"args\": [interceptor],\n          \"thisArg\": undefined$1\n        });\n        return new LodashWrapper(value, this.__chain__).thru(function(array) {\n          if (length && !array.length) {\n            array.push(undefined$1);\n          }\n          return array;\n        });\n      });\n      function wrapperChain() {\n        return chain(this);\n      }\n      function wrapperCommit() {\n        return new LodashWrapper(this.value(), this.__chain__);\n      }\n      function wrapperNext() {\n        if (this.__values__ === undefined$1) {\n          this.__values__ = toArray2(this.value());\n        }\n        var done = this.__index__ >= this.__values__.length, value = done ? undefined$1 : this.__values__[this.__index__++];\n        return { \"done\": done, \"value\": value };\n      }\n      function wrapperToIterator() {\n        return this;\n      }\n      function wrapperPlant(value) {\n        var result2, parent2 = this;\n        while (parent2 instanceof baseLodash) {\n          var clone2 = wrapperClone(parent2);\n          clone2.__index__ = 0;\n          clone2.__values__ = undefined$1;\n          if (result2) {\n            previous.__wrapped__ = clone2;\n          } else {\n            result2 = clone2;\n          }\n          var previous = clone2;\n          parent2 = parent2.__wrapped__;\n        }\n        previous.__wrapped__ = value;\n        return result2;\n      }\n      function wrapperReverse() {\n        var value = this.__wrapped__;\n        if (value instanceof LazyWrapper) {\n          var wrapped = value;\n          if (this.__actions__.length) {\n            wrapped = new LazyWrapper(this);\n          }\n          wrapped = wrapped.reverse();\n          wrapped.__actions__.push({\n            \"func\": thru,\n            \"args\": [reverse],\n            \"thisArg\": undefined$1\n          });\n          return new LodashWrapper(wrapped, this.__chain__);\n        }\n        return this.thru(reverse);\n      }\n      function wrapperValue() {\n        return baseWrapperValue(this.__wrapped__, this.__actions__);\n      }\n      var countBy = createAggregator(function(result2, value, key) {\n        if (hasOwnProperty.call(result2, key)) {\n          ++result2[key];\n        } else {\n          baseAssignValue(result2, key, 1);\n        }\n      });\n      function every2(collection, predicate, guard) {\n        var func = isArray2(collection) ? arrayEvery : baseEvery;\n        if (guard && isIterateeCall(collection, predicate, guard)) {\n          predicate = undefined$1;\n        }\n        return func(collection, getIteratee(predicate, 3));\n      }\n      function filter2(collection, predicate) {\n        var func = isArray2(collection) ? arrayFilter : baseFilter;\n        return func(collection, getIteratee(predicate, 3));\n      }\n      var find2 = createFind(findIndex2);\n      var findLast = createFind(findLastIndex);\n      function flatMap2(collection, iteratee2) {\n        return baseFlatten(map2(collection, iteratee2), 1);\n      }\n      function flatMapDeep(collection, iteratee2) {\n        return baseFlatten(map2(collection, iteratee2), INFINITY);\n      }\n      function flatMapDepth(collection, iteratee2, depth) {\n        depth = depth === undefined$1 ? 1 : toInteger(depth);\n        return baseFlatten(map2(collection, iteratee2), depth);\n      }\n      function forEach(collection, iteratee2) {\n        var func = isArray2(collection) ? arrayEach : baseEach;\n        return func(collection, getIteratee(iteratee2, 3));\n      }\n      function forEachRight(collection, iteratee2) {\n        var func = isArray2(collection) ? arrayEachRight : baseEachRight;\n        return func(collection, getIteratee(iteratee2, 3));\n      }\n      var groupBy2 = createAggregator(function(result2, value, key) {\n        if (hasOwnProperty.call(result2, key)) {\n          result2[key].push(value);\n        } else {\n          baseAssignValue(result2, key, [value]);\n        }\n      });\n      function includes(collection, value, fromIndex, guard) {\n        collection = isArrayLike2(collection) ? collection : values(collection);\n        fromIndex = fromIndex && !guard ? toInteger(fromIndex) : 0;\n        var length = collection.length;\n        if (fromIndex < 0) {\n          fromIndex = nativeMax(length + fromIndex, 0);\n        }\n        return isString(collection) ? fromIndex <= length && collection.indexOf(value, fromIndex) > -1 : !!length && baseIndexOf(collection, value, fromIndex) > -1;\n      }\n      var invokeMap = baseRest(function(collection, path, args) {\n        var index = -1, isFunc = typeof path == \"function\", result2 = isArrayLike2(collection) ? Array2(collection.length) : [];\n        baseEach(collection, function(value) {\n          result2[++index] = isFunc ? apply(path, value, args) : baseInvoke(value, path, args);\n        });\n        return result2;\n      });\n      var keyBy = createAggregator(function(result2, value, key) {\n        baseAssignValue(result2, key, value);\n      });\n      function map2(collection, iteratee2) {\n        var func = isArray2(collection) ? arrayMap : baseMap;\n        return func(collection, getIteratee(iteratee2, 3));\n      }\n      function orderBy(collection, iteratees, orders, guard) {\n        if (collection == null) {\n          return [];\n        }\n        if (!isArray2(iteratees)) {\n          iteratees = iteratees == null ? [] : [iteratees];\n        }\n        orders = guard ? undefined$1 : orders;\n        if (!isArray2(orders)) {\n          orders = orders == null ? [] : [orders];\n        }\n        return baseOrderBy(collection, iteratees, orders);\n      }\n      var partition2 = createAggregator(function(result2, value, key) {\n        result2[key ? 0 : 1].push(value);\n      }, function() {\n        return [[], []];\n      });\n      function reduce2(collection, iteratee2, accumulator) {\n        var func = isArray2(collection) ? arrayReduce : baseReduce, initAccum = arguments.length < 3;\n        return func(collection, getIteratee(iteratee2, 4), accumulator, initAccum, baseEach);\n      }\n      function reduceRight(collection, iteratee2, accumulator) {\n        var func = isArray2(collection) ? arrayReduceRight : baseReduce, initAccum = arguments.length < 3;\n        return func(collection, getIteratee(iteratee2, 4), accumulator, initAccum, baseEachRight);\n      }\n      function reject(collection, predicate) {\n        var func = isArray2(collection) ? arrayFilter : baseFilter;\n        return func(collection, negate2(getIteratee(predicate, 3)));\n      }\n      function sample2(collection) {\n        var func = isArray2(collection) ? arraySample : baseSample;\n        return func(collection);\n      }\n      function sampleSize2(collection, n, guard) {\n        if (guard ? isIterateeCall(collection, n, guard) : n === undefined$1) {\n          n = 1;\n        } else {\n          n = toInteger(n);\n        }\n        var func = isArray2(collection) ? arraySampleSize : baseSampleSize;\n        return func(collection, n);\n      }\n      function shuffle(collection) {\n        var func = isArray2(collection) ? arrayShuffle : baseShuffle;\n        return func(collection);\n      }\n      function size(collection) {\n        if (collection == null) {\n          return 0;\n        }\n        if (isArrayLike2(collection)) {\n          return isString(collection) ? stringSize(collection) : collection.length;\n        }\n        var tag = getTag(collection);\n        if (tag == mapTag || tag == setTag) {\n          return collection.size;\n        }\n        return baseKeys(collection).length;\n      }\n      function some(collection, predicate, guard) {\n        var func = isArray2(collection) ? arraySome : baseSome;\n        if (guard && isIterateeCall(collection, predicate, guard)) {\n          predicate = undefined$1;\n        }\n        return func(collection, getIteratee(predicate, 3));\n      }\n      var sortBy = baseRest(function(collection, iteratees) {\n        if (collection == null) {\n          return [];\n        }\n        var length = iteratees.length;\n        if (length > 1 && isIterateeCall(collection, iteratees[0], iteratees[1])) {\n          iteratees = [];\n        } else if (length > 2 && isIterateeCall(iteratees[0], iteratees[1], iteratees[2])) {\n          iteratees = [iteratees[0]];\n        }\n        return baseOrderBy(collection, baseFlatten(iteratees, 1), []);\n      });\n      var now = ctxNow || function() {\n        return root.Date.now();\n      };\n      function after(n, func) {\n        if (typeof func != \"function\") {\n          throw new TypeError2(FUNC_ERROR_TEXT);\n        }\n        n = toInteger(n);\n        return function() {\n          if (--n < 1) {\n            return func.apply(this, arguments);\n          }\n        };\n      }\n      function ary(func, n, guard) {\n        n = guard ? undefined$1 : n;\n        n = func && n == null ? func.length : n;\n        return createWrap(func, WRAP_ARY_FLAG, undefined$1, undefined$1, undefined$1, undefined$1, n);\n      }\n      function before(n, func) {\n        var result2;\n        if (typeof func != \"function\") {\n          throw new TypeError2(FUNC_ERROR_TEXT);\n        }\n        n = toInteger(n);\n        return function() {\n          if (--n > 0) {\n            result2 = func.apply(this, arguments);\n          }\n          if (n <= 1) {\n            func = undefined$1;\n          }\n          return result2;\n        };\n      }\n      var bind = baseRest(function(func, thisArg, partials) {\n        var bitmask = WRAP_BIND_FLAG;\n        if (partials.length) {\n          var holders = replaceHolders(partials, getHolder(bind));\n          bitmask |= WRAP_PARTIAL_FLAG;\n        }\n        return createWrap(func, bitmask, thisArg, partials, holders);\n      });\n      var bindKey = baseRest(function(object, key, partials) {\n        var bitmask = WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG;\n        if (partials.length) {\n          var holders = replaceHolders(partials, getHolder(bindKey));\n          bitmask |= WRAP_PARTIAL_FLAG;\n        }\n        return createWrap(key, bitmask, object, partials, holders);\n      });\n      function curry(func, arity, guard) {\n        arity = guard ? undefined$1 : arity;\n        var result2 = createWrap(func, WRAP_CURRY_FLAG, undefined$1, undefined$1, undefined$1, undefined$1, undefined$1, arity);\n        result2.placeholder = curry.placeholder;\n        return result2;\n      }\n      function curryRight(func, arity, guard) {\n        arity = guard ? undefined$1 : arity;\n        var result2 = createWrap(func, WRAP_CURRY_RIGHT_FLAG, undefined$1, undefined$1, undefined$1, undefined$1, undefined$1, arity);\n        result2.placeholder = curryRight.placeholder;\n        return result2;\n      }\n      function debounce2(func, wait, options) {\n        var lastArgs, lastThis, maxWait, result2, timerId, lastCallTime, lastInvokeTime = 0, leading = false, maxing = false, trailing = true;\n        if (typeof func != \"function\") {\n          throw new TypeError2(FUNC_ERROR_TEXT);\n        }\n        wait = toNumber2(wait) || 0;\n        if (isObject2(options)) {\n          leading = !!options.leading;\n          maxing = \"maxWait\" in options;\n          maxWait = maxing ? nativeMax(toNumber2(options.maxWait) || 0, wait) : maxWait;\n          trailing = \"trailing\" in options ? !!options.trailing : trailing;\n        }\n        function invokeFunc(time2) {\n          var args = lastArgs, thisArg = lastThis;\n          lastArgs = lastThis = undefined$1;\n          lastInvokeTime = time2;\n          result2 = func.apply(thisArg, args);\n          return result2;\n        }\n        function leadingEdge(time2) {\n          lastInvokeTime = time2;\n          timerId = setTimeout2(timerExpired, wait);\n          return leading ? invokeFunc(time2) : result2;\n        }\n        function remainingWait(time2) {\n          var timeSinceLastCall = time2 - lastCallTime, timeSinceLastInvoke = time2 - lastInvokeTime, timeWaiting = wait - timeSinceLastCall;\n          return maxing ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke) : timeWaiting;\n        }\n        function shouldInvoke(time2) {\n          var timeSinceLastCall = time2 - lastCallTime, timeSinceLastInvoke = time2 - lastInvokeTime;\n          return lastCallTime === undefined$1 || timeSinceLastCall >= wait || timeSinceLastCall < 0 || maxing && timeSinceLastInvoke >= maxWait;\n        }\n        function timerExpired() {\n          var time2 = now();\n          if (shouldInvoke(time2)) {\n            return trailingEdge(time2);\n          }\n          timerId = setTimeout2(timerExpired, remainingWait(time2));\n        }\n        function trailingEdge(time2) {\n          timerId = undefined$1;\n          if (trailing && lastArgs) {\n            return invokeFunc(time2);\n          }\n          lastArgs = lastThis = undefined$1;\n          return result2;\n        }\n        function cancel() {\n          if (timerId !== undefined$1) {\n            clearTimeout2(timerId);\n          }\n          lastInvokeTime = 0;\n          lastArgs = lastCallTime = lastThis = timerId = undefined$1;\n        }\n        function flush() {\n          return timerId === undefined$1 ? result2 : trailingEdge(now());\n        }\n        function debounced() {\n          var time2 = now(), isInvoking = shouldInvoke(time2);\n          lastArgs = arguments;\n          lastThis = this;\n          lastCallTime = time2;\n          if (isInvoking) {\n            if (timerId === undefined$1) {\n              return leadingEdge(lastCallTime);\n            }\n            if (maxing) {\n              clearTimeout2(timerId);\n              timerId = setTimeout2(timerExpired, wait);\n              return invokeFunc(lastCallTime);\n            }\n          }\n          if (timerId === undefined$1) {\n            timerId = setTimeout2(timerExpired, wait);\n          }\n          return result2;\n        }\n        debounced.cancel = cancel;\n        debounced.flush = flush;\n        return debounced;\n      }\n      var defer2 = baseRest(function(func, args) {\n        return baseDelay(func, 1, args);\n      });\n      var delay2 = baseRest(function(func, wait, args) {\n        return baseDelay(func, toNumber2(wait) || 0, args);\n      });\n      function flip(func) {\n        return createWrap(func, WRAP_FLIP_FLAG);\n      }\n      function memoize(func, resolver) {\n        if (typeof func != \"function\" || resolver != null && typeof resolver != \"function\") {\n          throw new TypeError2(FUNC_ERROR_TEXT);\n        }\n        var memoized = function() {\n          var args = arguments, key = resolver ? resolver.apply(this, args) : args[0], cache2 = memoized.cache;\n          if (cache2.has(key)) {\n            return cache2.get(key);\n          }\n          var result2 = func.apply(this, args);\n          memoized.cache = cache2.set(key, result2) || cache2;\n          return result2;\n        };\n        memoized.cache = new (memoize.Cache || MapCache)();\n        return memoized;\n      }\n      memoize.Cache = MapCache;\n      function negate2(predicate) {\n        if (typeof predicate != \"function\") {\n          throw new TypeError2(FUNC_ERROR_TEXT);\n        }\n        return function() {\n          var args = arguments;\n          switch (args.length) {\n            case 0:\n              return !predicate.call(this);\n            case 1:\n              return !predicate.call(this, args[0]);\n            case 2:\n              return !predicate.call(this, args[0], args[1]);\n            case 3:\n              return !predicate.call(this, args[0], args[1], args[2]);\n          }\n          return !predicate.apply(this, args);\n        };\n      }\n      function once2(func) {\n        return before(2, func);\n      }\n      var overArgs = castRest(function(func, transforms) {\n        transforms = transforms.length == 1 && isArray2(transforms[0]) ? arrayMap(transforms[0], baseUnary(getIteratee())) : arrayMap(baseFlatten(transforms, 1), baseUnary(getIteratee()));\n        var funcsLength = transforms.length;\n        return baseRest(function(args) {\n          var index = -1, length = nativeMin(args.length, funcsLength);\n          while (++index < length) {\n            args[index] = transforms[index].call(this, args[index]);\n          }\n          return apply(func, this, args);\n        });\n      });\n      var partial = baseRest(function(func, partials) {\n        var holders = replaceHolders(partials, getHolder(partial));\n        return createWrap(func, WRAP_PARTIAL_FLAG, undefined$1, partials, holders);\n      });\n      var partialRight = baseRest(function(func, partials) {\n        var holders = replaceHolders(partials, getHolder(partialRight));\n        return createWrap(func, WRAP_PARTIAL_RIGHT_FLAG, undefined$1, partials, holders);\n      });\n      var rearg = flatRest(function(func, indexes) {\n        return createWrap(func, WRAP_REARG_FLAG, undefined$1, undefined$1, undefined$1, indexes);\n      });\n      function rest(func, start) {\n        if (typeof func != \"function\") {\n          throw new TypeError2(FUNC_ERROR_TEXT);\n        }\n        start = start === undefined$1 ? start : toInteger(start);\n        return baseRest(func, start);\n      }\n      function spread(func, start) {\n        if (typeof func != \"function\") {\n          throw new TypeError2(FUNC_ERROR_TEXT);\n        }\n        start = start == null ? 0 : nativeMax(toInteger(start), 0);\n        return baseRest(function(args) {\n          var array = args[start], otherArgs = castSlice(args, 0, start);\n          if (array) {\n            arrayPush(otherArgs, array);\n          }\n          return apply(func, this, otherArgs);\n        });\n      }\n      function throttle2(func, wait, options) {\n        var leading = true, trailing = true;\n        if (typeof func != \"function\") {\n          throw new TypeError2(FUNC_ERROR_TEXT);\n        }\n        if (isObject2(options)) {\n          leading = \"leading\" in options ? !!options.leading : leading;\n          trailing = \"trailing\" in options ? !!options.trailing : trailing;\n        }\n        return debounce2(func, wait, {\n          \"leading\": leading,\n          \"maxWait\": wait,\n          \"trailing\": trailing\n        });\n      }\n      function unary(func) {\n        return ary(func, 1);\n      }\n      function wrap(value, wrapper) {\n        return partial(castFunction(wrapper), value);\n      }\n      function castArray() {\n        if (!arguments.length) {\n          return [];\n        }\n        var value = arguments[0];\n        return isArray2(value) ? value : [value];\n      }\n      function clone(value) {\n        return baseClone(value, CLONE_SYMBOLS_FLAG);\n      }\n      function cloneWith(value, customizer) {\n        customizer = typeof customizer == \"function\" ? customizer : undefined$1;\n        return baseClone(value, CLONE_SYMBOLS_FLAG, customizer);\n      }\n      function cloneDeep(value) {\n        return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n      }\n      function cloneDeepWith(value, customizer) {\n        customizer = typeof customizer == \"function\" ? customizer : undefined$1;\n        return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG, customizer);\n      }\n      function conformsTo(object, source) {\n        return source == null || baseConformsTo(object, source, keys(source));\n      }\n      function eq(value, other) {\n        return value === other || value !== value && other !== other;\n      }\n      var gt2 = createRelationalOperation(baseGt);\n      var gte = createRelationalOperation(function(value, other) {\n        return value >= other;\n      });\n      var isArguments = baseIsArguments(function() {\n        return arguments;\n      }()) ? baseIsArguments : function(value) {\n        return isObjectLike(value) && hasOwnProperty.call(value, \"callee\") && !propertyIsEnumerable.call(value, \"callee\");\n      };\n      var isArray2 = Array2.isArray;\n      var isArrayBuffer = nodeIsArrayBuffer ? baseUnary(nodeIsArrayBuffer) : baseIsArrayBuffer;\n      function isArrayLike2(value) {\n        return value != null && isLength(value.length) && !isFunction2(value);\n      }\n      function isArrayLikeObject(value) {\n        return isObjectLike(value) && isArrayLike2(value);\n      }\n      function isBoolean(value) {\n        return value === true || value === false || isObjectLike(value) && baseGetTag(value) == boolTag;\n      }\n      var isBuffer = nativeIsBuffer || stubFalse;\n      var isDate2 = nodeIsDate ? baseUnary(nodeIsDate) : baseIsDate;\n      function isElement(value) {\n        return isObjectLike(value) && value.nodeType === 1 && !isPlainObject(value);\n      }\n      function isEmpty2(value) {\n        if (value == null) {\n          return true;\n        }\n        if (isArrayLike2(value) && (isArray2(value) || typeof value == \"string\" || typeof value.splice == \"function\" || isBuffer(value) || isTypedArray(value) || isArguments(value))) {\n          return !value.length;\n        }\n        var tag = getTag(value);\n        if (tag == mapTag || tag == setTag) {\n          return !value.size;\n        }\n        if (isPrototype(value)) {\n          return !baseKeys(value).length;\n        }\n        for (var key in value) {\n          if (hasOwnProperty.call(value, key)) {\n            return false;\n          }\n        }\n        return true;\n      }\n      function isEqual2(value, other) {\n        return baseIsEqual(value, other);\n      }\n      function isEqualWith(value, other, customizer) {\n        customizer = typeof customizer == \"function\" ? customizer : undefined$1;\n        var result2 = customizer ? customizer(value, other) : undefined$1;\n        return result2 === undefined$1 ? baseIsEqual(value, other, undefined$1, customizer) : !!result2;\n      }\n      function isError(value) {\n        if (!isObjectLike(value)) {\n          return false;\n        }\n        var tag = baseGetTag(value);\n        return tag == errorTag || tag == domExcTag || typeof value.message == \"string\" && typeof value.name == \"string\" && !isPlainObject(value);\n      }\n      function isFinite2(value) {\n        return typeof value == \"number\" && nativeIsFinite(value);\n      }\n      function isFunction2(value) {\n        if (!isObject2(value)) {\n          return false;\n        }\n        var tag = baseGetTag(value);\n        return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n      }\n      function isInteger(value) {\n        return typeof value == \"number\" && value == toInteger(value);\n      }\n      function isLength(value) {\n        return typeof value == \"number\" && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n      }\n      function isObject2(value) {\n        var type2 = typeof value;\n        return value != null && (type2 == \"object\" || type2 == \"function\");\n      }\n      function isObjectLike(value) {\n        return value != null && typeof value == \"object\";\n      }\n      var isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n      function isMatch(object, source) {\n        return object === source || baseIsMatch(object, source, getMatchData(source));\n      }\n      function isMatchWith(object, source, customizer) {\n        customizer = typeof customizer == \"function\" ? customizer : undefined$1;\n        return baseIsMatch(object, source, getMatchData(source), customizer);\n      }\n      function isNaN2(value) {\n        return isNumber(value) && value != +value;\n      }\n      function isNative(value) {\n        if (isMaskable(value)) {\n          throw new Error2(CORE_ERROR_TEXT);\n        }\n        return baseIsNative(value);\n      }\n      function isNull(value) {\n        return value === null;\n      }\n      function isNil(value) {\n        return value == null;\n      }\n      function isNumber(value) {\n        return typeof value == \"number\" || isObjectLike(value) && baseGetTag(value) == numberTag;\n      }\n      function isPlainObject(value) {\n        if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n          return false;\n        }\n        var proto = getPrototype(value);\n        if (proto === null) {\n          return true;\n        }\n        var Ctor = hasOwnProperty.call(proto, \"constructor\") && proto.constructor;\n        return typeof Ctor == \"function\" && Ctor instanceof Ctor && funcToString.call(Ctor) == objectCtorString;\n      }\n      var isRegExp = nodeIsRegExp ? baseUnary(nodeIsRegExp) : baseIsRegExp;\n      function isSafeInteger(value) {\n        return isInteger(value) && value >= -MAX_SAFE_INTEGER && value <= MAX_SAFE_INTEGER;\n      }\n      var isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n      function isString(value) {\n        return typeof value == \"string\" || !isArray2(value) && isObjectLike(value) && baseGetTag(value) == stringTag;\n      }\n      function isSymbol(value) {\n        return typeof value == \"symbol\" || isObjectLike(value) && baseGetTag(value) == symbolTag;\n      }\n      var isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n      function isUndefined2(value) {\n        return value === undefined$1;\n      }\n      function isWeakMap(value) {\n        return isObjectLike(value) && getTag(value) == weakMapTag;\n      }\n      function isWeakSet(value) {\n        return isObjectLike(value) && baseGetTag(value) == weakSetTag;\n      }\n      var lt = createRelationalOperation(baseLt);\n      var lte = createRelationalOperation(function(value, other) {\n        return value <= other;\n      });\n      function toArray2(value) {\n        if (!value) {\n          return [];\n        }\n        if (isArrayLike2(value)) {\n          return isString(value) ? stringToArray(value) : copyArray(value);\n        }\n        if (symIterator && value[symIterator]) {\n          return iteratorToArray(value[symIterator]());\n        }\n        var tag = getTag(value), func = tag == mapTag ? mapToArray : tag == setTag ? setToArray : values;\n        return func(value);\n      }\n      function toFinite(value) {\n        if (!value) {\n          return value === 0 ? value : 0;\n        }\n        value = toNumber2(value);\n        if (value === INFINITY || value === -INFINITY) {\n          var sign = value < 0 ? -1 : 1;\n          return sign * MAX_INTEGER;\n        }\n        return value === value ? value : 0;\n      }\n      function toInteger(value) {\n        var result2 = toFinite(value), remainder = result2 % 1;\n        return result2 === result2 ? remainder ? result2 - remainder : result2 : 0;\n      }\n      function toLength(value) {\n        return value ? baseClamp(toInteger(value), 0, MAX_ARRAY_LENGTH) : 0;\n      }\n      function toNumber2(value) {\n        if (typeof value == \"number\") {\n          return value;\n        }\n        if (isSymbol(value)) {\n          return NAN;\n        }\n        if (isObject2(value)) {\n          var other = typeof value.valueOf == \"function\" ? value.valueOf() : value;\n          value = isObject2(other) ? other + \"\" : other;\n        }\n        if (typeof value != \"string\") {\n          return value === 0 ? value : +value;\n        }\n        value = baseTrim(value);\n        var isBinary = reIsBinary.test(value);\n        return isBinary || reIsOctal.test(value) ? freeParseInt(value.slice(2), isBinary ? 2 : 8) : reIsBadHex.test(value) ? NAN : +value;\n      }\n      function toPlainObject(value) {\n        return copyObject(value, keysIn(value));\n      }\n      function toSafeInteger(value) {\n        return value ? baseClamp(toInteger(value), -MAX_SAFE_INTEGER, MAX_SAFE_INTEGER) : value === 0 ? value : 0;\n      }\n      function toString2(value) {\n        return value == null ? \"\" : baseToString(value);\n      }\n      var assign = createAssigner(function(object, source) {\n        if (isPrototype(source) || isArrayLike2(source)) {\n          copyObject(source, keys(source), object);\n          return;\n        }\n        for (var key in source) {\n          if (hasOwnProperty.call(source, key)) {\n            assignValue(object, key, source[key]);\n          }\n        }\n      });\n      var assignIn = createAssigner(function(object, source) {\n        copyObject(source, keysIn(source), object);\n      });\n      var assignInWith = createAssigner(function(object, source, srcIndex, customizer) {\n        copyObject(source, keysIn(source), object, customizer);\n      });\n      var assignWith = createAssigner(function(object, source, srcIndex, customizer) {\n        copyObject(source, keys(source), object, customizer);\n      });\n      var at = flatRest(baseAt);\n      function create(prototype, properties2) {\n        var result2 = baseCreate(prototype);\n        return properties2 == null ? result2 : baseAssign(result2, properties2);\n      }\n      var defaults = baseRest(function(object, sources) {\n        object = Object2(object);\n        var index = -1;\n        var length = sources.length;\n        var guard = length > 2 ? sources[2] : undefined$1;\n        if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n          length = 1;\n        }\n        while (++index < length) {\n          var source = sources[index];\n          var props = keysIn(source);\n          var propsIndex = -1;\n          var propsLength = props.length;\n          while (++propsIndex < propsLength) {\n            var key = props[propsIndex];\n            var value = object[key];\n            if (value === undefined$1 || eq(value, objectProto[key]) && !hasOwnProperty.call(object, key)) {\n              object[key] = source[key];\n            }\n          }\n        }\n        return object;\n      });\n      var defaultsDeep = baseRest(function(args) {\n        args.push(undefined$1, customDefaultsMerge);\n        return apply(mergeWith, undefined$1, args);\n      });\n      function findKey(object, predicate) {\n        return baseFindKey(object, getIteratee(predicate, 3), baseForOwn);\n      }\n      function findLastKey(object, predicate) {\n        return baseFindKey(object, getIteratee(predicate, 3), baseForOwnRight);\n      }\n      function forIn(object, iteratee2) {\n        return object == null ? object : baseFor(object, getIteratee(iteratee2, 3), keysIn);\n      }\n      function forInRight(object, iteratee2) {\n        return object == null ? object : baseForRight(object, getIteratee(iteratee2, 3), keysIn);\n      }\n      function forOwn(object, iteratee2) {\n        return object && baseForOwn(object, getIteratee(iteratee2, 3));\n      }\n      function forOwnRight(object, iteratee2) {\n        return object && baseForOwnRight(object, getIteratee(iteratee2, 3));\n      }\n      function functions(object) {\n        return object == null ? [] : baseFunctions(object, keys(object));\n      }\n      function functionsIn(object) {\n        return object == null ? [] : baseFunctions(object, keysIn(object));\n      }\n      function get(object, path, defaultValue) {\n        var result2 = object == null ? undefined$1 : baseGet(object, path);\n        return result2 === undefined$1 ? defaultValue : result2;\n      }\n      function has(object, path) {\n        return object != null && hasPath(object, path, baseHas);\n      }\n      function hasIn(object, path) {\n        return object != null && hasPath(object, path, baseHasIn);\n      }\n      var invert = createInverter(function(result2, value, key) {\n        if (value != null && typeof value.toString != \"function\") {\n          value = nativeObjectToString.call(value);\n        }\n        result2[value] = key;\n      }, constant(identity2));\n      var invertBy = createInverter(function(result2, value, key) {\n        if (value != null && typeof value.toString != \"function\") {\n          value = nativeObjectToString.call(value);\n        }\n        if (hasOwnProperty.call(result2, value)) {\n          result2[value].push(key);\n        } else {\n          result2[value] = [key];\n        }\n      }, getIteratee);\n      var invoke = baseRest(baseInvoke);\n      function keys(object) {\n        return isArrayLike2(object) ? arrayLikeKeys(object) : baseKeys(object);\n      }\n      function keysIn(object) {\n        return isArrayLike2(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n      }\n      function mapKeys(object, iteratee2) {\n        var result2 = {};\n        iteratee2 = getIteratee(iteratee2, 3);\n        baseForOwn(object, function(value, key, object2) {\n          baseAssignValue(result2, iteratee2(value, key, object2), value);\n        });\n        return result2;\n      }\n      function mapValues(object, iteratee2) {\n        var result2 = {};\n        iteratee2 = getIteratee(iteratee2, 3);\n        baseForOwn(object, function(value, key, object2) {\n          baseAssignValue(result2, key, iteratee2(value, key, object2));\n        });\n        return result2;\n      }\n      var merge2 = createAssigner(function(object, source, srcIndex) {\n        baseMerge(object, source, srcIndex);\n      });\n      var mergeWith = createAssigner(function(object, source, srcIndex, customizer) {\n        baseMerge(object, source, srcIndex, customizer);\n      });\n      var omit = flatRest(function(object, paths) {\n        var result2 = {};\n        if (object == null) {\n          return result2;\n        }\n        var isDeep = false;\n        paths = arrayMap(paths, function(path) {\n          path = castPath(path, object);\n          isDeep || (isDeep = path.length > 1);\n          return path;\n        });\n        copyObject(object, getAllKeysIn(object), result2);\n        if (isDeep) {\n          result2 = baseClone(result2, CLONE_DEEP_FLAG | CLONE_FLAT_FLAG | CLONE_SYMBOLS_FLAG, customOmitClone);\n        }\n        var length = paths.length;\n        while (length--) {\n          baseUnset(result2, paths[length]);\n        }\n        return result2;\n      });\n      function omitBy(object, predicate) {\n        return pickBy(object, negate2(getIteratee(predicate)));\n      }\n      var pick = flatRest(function(object, paths) {\n        return object == null ? {} : basePick(object, paths);\n      });\n      function pickBy(object, predicate) {\n        if (object == null) {\n          return {};\n        }\n        var props = arrayMap(getAllKeysIn(object), function(prop) {\n          return [prop];\n        });\n        predicate = getIteratee(predicate);\n        return basePickBy(object, props, function(value, path) {\n          return predicate(value, path[0]);\n        });\n      }\n      function result(object, path, defaultValue) {\n        path = castPath(path, object);\n        var index = -1, length = path.length;\n        if (!length) {\n          length = 1;\n          object = undefined$1;\n        }\n        while (++index < length) {\n          var value = object == null ? undefined$1 : object[toKey(path[index])];\n          if (value === undefined$1) {\n            index = length;\n            value = defaultValue;\n          }\n          object = isFunction2(value) ? value.call(object) : value;\n        }\n        return object;\n      }\n      function set(object, path, value) {\n        return object == null ? object : baseSet(object, path, value);\n      }\n      function setWith(object, path, value, customizer) {\n        customizer = typeof customizer == \"function\" ? customizer : undefined$1;\n        return object == null ? object : baseSet(object, path, value, customizer);\n      }\n      var toPairs = createToPairs(keys);\n      var toPairsIn = createToPairs(keysIn);\n      function transform(object, iteratee2, accumulator) {\n        var isArr = isArray2(object), isArrLike = isArr || isBuffer(object) || isTypedArray(object);\n        iteratee2 = getIteratee(iteratee2, 4);\n        if (accumulator == null) {\n          var Ctor = object && object.constructor;\n          if (isArrLike) {\n            accumulator = isArr ? new Ctor() : [];\n          } else if (isObject2(object)) {\n            accumulator = isFunction2(Ctor) ? baseCreate(getPrototype(object)) : {};\n          } else {\n            accumulator = {};\n          }\n        }\n        (isArrLike ? arrayEach : baseForOwn)(object, function(value, index, object2) {\n          return iteratee2(accumulator, value, index, object2);\n        });\n        return accumulator;\n      }\n      function unset(object, path) {\n        return object == null ? true : baseUnset(object, path);\n      }\n      function update(object, path, updater) {\n        return object == null ? object : baseUpdate(object, path, castFunction(updater));\n      }\n      function updateWith(object, path, updater, customizer) {\n        customizer = typeof customizer == \"function\" ? customizer : undefined$1;\n        return object == null ? object : baseUpdate(object, path, castFunction(updater), customizer);\n      }\n      function values(object) {\n        return object == null ? [] : baseValues(object, keys(object));\n      }\n      function valuesIn(object) {\n        return object == null ? [] : baseValues(object, keysIn(object));\n      }\n      function clamp(number, lower, upper) {\n        if (upper === undefined$1) {\n          upper = lower;\n          lower = undefined$1;\n        }\n        if (upper !== undefined$1) {\n          upper = toNumber2(upper);\n          upper = upper === upper ? upper : 0;\n        }\n        if (lower !== undefined$1) {\n          lower = toNumber2(lower);\n          lower = lower === lower ? lower : 0;\n        }\n        return baseClamp(toNumber2(number), lower, upper);\n      }\n      function inRange(number, start, end) {\n        start = toFinite(start);\n        if (end === undefined$1) {\n          end = start;\n          start = 0;\n        } else {\n          end = toFinite(end);\n        }\n        number = toNumber2(number);\n        return baseInRange(number, start, end);\n      }\n      function random(lower, upper, floating) {\n        if (floating && typeof floating != \"boolean\" && isIterateeCall(lower, upper, floating)) {\n          upper = floating = undefined$1;\n        }\n        if (floating === undefined$1) {\n          if (typeof upper == \"boolean\") {\n            floating = upper;\n            upper = undefined$1;\n          } else if (typeof lower == \"boolean\") {\n            floating = lower;\n            lower = undefined$1;\n          }\n        }\n        if (lower === undefined$1 && upper === undefined$1) {\n          lower = 0;\n          upper = 1;\n        } else {\n          lower = toFinite(lower);\n          if (upper === undefined$1) {\n            upper = lower;\n            lower = 0;\n          } else {\n            upper = toFinite(upper);\n          }\n        }\n        if (lower > upper) {\n          var temp = lower;\n          lower = upper;\n          upper = temp;\n        }\n        if (floating || lower % 1 || upper % 1) {\n          var rand = nativeRandom();\n          return nativeMin(lower + rand * (upper - lower + freeParseFloat(\"1e-\" + ((rand + \"\").length - 1))), upper);\n        }\n        return baseRandom(lower, upper);\n      }\n      var camelCase = createCompounder(function(result2, word, index) {\n        word = word.toLowerCase();\n        return result2 + (index ? capitalize(word) : word);\n      });\n      function capitalize(string) {\n        return upperFirst(toString2(string).toLowerCase());\n      }\n      function deburr(string) {\n        string = toString2(string);\n        return string && string.replace(reLatin, deburrLetter).replace(reComboMark, \"\");\n      }\n      function endsWith(string, target, position) {\n        string = toString2(string);\n        target = baseToString(target);\n        var length = string.length;\n        position = position === undefined$1 ? length : baseClamp(toInteger(position), 0, length);\n        var end = position;\n        position -= target.length;\n        return position >= 0 && string.slice(position, end) == target;\n      }\n      function escape(string) {\n        string = toString2(string);\n        return string && reHasUnescapedHtml.test(string) ? string.replace(reUnescapedHtml, escapeHtmlChar) : string;\n      }\n      function escapeRegExp(string) {\n        string = toString2(string);\n        return string && reHasRegExpChar.test(string) ? string.replace(reRegExpChar, \"\\\\$&\") : string;\n      }\n      var kebabCase = createCompounder(function(result2, word, index) {\n        return result2 + (index ? \"-\" : \"\") + word.toLowerCase();\n      });\n      var lowerCase = createCompounder(function(result2, word, index) {\n        return result2 + (index ? \" \" : \"\") + word.toLowerCase();\n      });\n      var lowerFirst = createCaseFirst(\"toLowerCase\");\n      function pad(string, length, chars) {\n        string = toString2(string);\n        length = toInteger(length);\n        var strLength = length ? stringSize(string) : 0;\n        if (!length || strLength >= length) {\n          return string;\n        }\n        var mid = (length - strLength) / 2;\n        return createPadding(nativeFloor(mid), chars) + string + createPadding(nativeCeil(mid), chars);\n      }\n      function padEnd(string, length, chars) {\n        string = toString2(string);\n        length = toInteger(length);\n        var strLength = length ? stringSize(string) : 0;\n        return length && strLength < length ? string + createPadding(length - strLength, chars) : string;\n      }\n      function padStart(string, length, chars) {\n        string = toString2(string);\n        length = toInteger(length);\n        var strLength = length ? stringSize(string) : 0;\n        return length && strLength < length ? createPadding(length - strLength, chars) + string : string;\n      }\n      function parseInt2(string, radix, guard) {\n        if (guard || radix == null) {\n          radix = 0;\n        } else if (radix) {\n          radix = +radix;\n        }\n        return nativeParseInt(toString2(string).replace(reTrimStart, \"\"), radix || 0);\n      }\n      function repeat2(string, n, guard) {\n        if (guard ? isIterateeCall(string, n, guard) : n === undefined$1) {\n          n = 1;\n        } else {\n          n = toInteger(n);\n        }\n        return baseRepeat(toString2(string), n);\n      }\n      function replace() {\n        var args = arguments, string = toString2(args[0]);\n        return args.length < 3 ? string : string.replace(args[1], args[2]);\n      }\n      var snakeCase = createCompounder(function(result2, word, index) {\n        return result2 + (index ? \"_\" : \"\") + word.toLowerCase();\n      });\n      function split(string, separator, limit) {\n        if (limit && typeof limit != \"number\" && isIterateeCall(string, separator, limit)) {\n          separator = limit = undefined$1;\n        }\n        limit = limit === undefined$1 ? MAX_ARRAY_LENGTH : limit >>> 0;\n        if (!limit) {\n          return [];\n        }\n        string = toString2(string);\n        if (string && (typeof separator == \"string\" || separator != null && !isRegExp(separator))) {\n          separator = baseToString(separator);\n          if (!separator && hasUnicode(string)) {\n            return castSlice(stringToArray(string), 0, limit);\n          }\n        }\n        return string.split(separator, limit);\n      }\n      var startCase = createCompounder(function(result2, word, index) {\n        return result2 + (index ? \" \" : \"\") + upperFirst(word);\n      });\n      function startsWith(string, target, position) {\n        string = toString2(string);\n        position = position == null ? 0 : baseClamp(toInteger(position), 0, string.length);\n        target = baseToString(target);\n        return string.slice(position, position + target.length) == target;\n      }\n      function template(string, options, guard) {\n        var settings = lodash2.templateSettings;\n        if (guard && isIterateeCall(string, options, guard)) {\n          options = undefined$1;\n        }\n        string = toString2(string);\n        options = assignInWith({}, options, settings, customDefaultsAssignIn);\n        var imports = assignInWith({}, options.imports, settings.imports, customDefaultsAssignIn), importsKeys = keys(imports), importsValues = baseValues(imports, importsKeys);\n        var isEscaping, isEvaluating, index = 0, interpolate = options.interpolate || reNoMatch, source = \"__p += '\";\n        var reDelimiters = RegExp2((options.escape || reNoMatch).source + \"|\" + interpolate.source + \"|\" + (interpolate === reInterpolate ? reEsTemplate : reNoMatch).source + \"|\" + (options.evaluate || reNoMatch).source + \"|$\", \"g\");\n        var sourceURL = \"//# sourceURL=\" + (hasOwnProperty.call(options, \"sourceURL\") ? (options.sourceURL + \"\").replace(/\\s/g, \" \") : \"lodash.templateSources[\" + ++templateCounter + \"]\") + \"\\n\";\n        string.replace(reDelimiters, function(match, escapeValue, interpolateValue, esTemplateValue, evaluateValue, offset) {\n          interpolateValue || (interpolateValue = esTemplateValue);\n          source += string.slice(index, offset).replace(reUnescapedString, escapeStringChar);\n          if (escapeValue) {\n            isEscaping = true;\n            source += \"' +\\n__e(\" + escapeValue + \") +\\n'\";\n          }\n          if (evaluateValue) {\n            isEvaluating = true;\n            source += \"';\\n\" + evaluateValue + \";\\n__p += '\";\n          }\n          if (interpolateValue) {\n            source += \"' +\\n((__t = (\" + interpolateValue + \")) == null ? '' : __t) +\\n'\";\n          }\n          index = offset + match.length;\n          return match;\n        });\n        source += \"';\\n\";\n        var variable = hasOwnProperty.call(options, \"variable\") && options.variable;\n        if (!variable) {\n          source = \"with (obj) {\\n\" + source + \"\\n}\\n\";\n        } else if (reForbiddenIdentifierChars.test(variable)) {\n          throw new Error2(INVALID_TEMPL_VAR_ERROR_TEXT);\n        }\n        source = (isEvaluating ? source.replace(reEmptyStringLeading, \"\") : source).replace(reEmptyStringMiddle, \"$1\").replace(reEmptyStringTrailing, \"$1;\");\n        source = \"function(\" + (variable || \"obj\") + \") {\\n\" + (variable ? \"\" : \"obj || (obj = {});\\n\") + \"var __t, __p = ''\" + (isEscaping ? \", __e = _.escape\" : \"\") + (isEvaluating ? \", __j = Array.prototype.join;\\nfunction print() { __p += __j.call(arguments, '') }\\n\" : \";\\n\") + source + \"return __p\\n}\";\n        var result2 = attempt(function() {\n          return Function2(importsKeys, sourceURL + \"return \" + source).apply(undefined$1, importsValues);\n        });\n        result2.source = source;\n        if (isError(result2)) {\n          throw result2;\n        }\n        return result2;\n      }\n      function toLower(value) {\n        return toString2(value).toLowerCase();\n      }\n      function toUpper(value) {\n        return toString2(value).toUpperCase();\n      }\n      function trim(string, chars, guard) {\n        string = toString2(string);\n        if (string && (guard || chars === undefined$1)) {\n          return baseTrim(string);\n        }\n        if (!string || !(chars = baseToString(chars))) {\n          return string;\n        }\n        var strSymbols = stringToArray(string), chrSymbols = stringToArray(chars), start = charsStartIndex(strSymbols, chrSymbols), end = charsEndIndex(strSymbols, chrSymbols) + 1;\n        return castSlice(strSymbols, start, end).join(\"\");\n      }\n      function trimEnd(string, chars, guard) {\n        string = toString2(string);\n        if (string && (guard || chars === undefined$1)) {\n          return string.slice(0, trimmedEndIndex(string) + 1);\n        }\n        if (!string || !(chars = baseToString(chars))) {\n          return string;\n        }\n        var strSymbols = stringToArray(string), end = charsEndIndex(strSymbols, stringToArray(chars)) + 1;\n        return castSlice(strSymbols, 0, end).join(\"\");\n      }\n      function trimStart(string, chars, guard) {\n        string = toString2(string);\n        if (string && (guard || chars === undefined$1)) {\n          return string.replace(reTrimStart, \"\");\n        }\n        if (!string || !(chars = baseToString(chars))) {\n          return string;\n        }\n        var strSymbols = stringToArray(string), start = charsStartIndex(strSymbols, stringToArray(chars));\n        return castSlice(strSymbols, start).join(\"\");\n      }\n      function truncate(string, options) {\n        var length = DEFAULT_TRUNC_LENGTH, omission = DEFAULT_TRUNC_OMISSION;\n        if (isObject2(options)) {\n          var separator = \"separator\" in options ? options.separator : separator;\n          length = \"length\" in options ? toInteger(options.length) : length;\n          omission = \"omission\" in options ? baseToString(options.omission) : omission;\n        }\n        string = toString2(string);\n        var strLength = string.length;\n        if (hasUnicode(string)) {\n          var strSymbols = stringToArray(string);\n          strLength = strSymbols.length;\n        }\n        if (length >= strLength) {\n          return string;\n        }\n        var end = length - stringSize(omission);\n        if (end < 1) {\n          return omission;\n        }\n        var result2 = strSymbols ? castSlice(strSymbols, 0, end).join(\"\") : string.slice(0, end);\n        if (separator === undefined$1) {\n          return result2 + omission;\n        }\n        if (strSymbols) {\n          end += result2.length - end;\n        }\n        if (isRegExp(separator)) {\n          if (string.slice(end).search(separator)) {\n            var match, substring = result2;\n            if (!separator.global) {\n              separator = RegExp2(separator.source, toString2(reFlags.exec(separator)) + \"g\");\n            }\n            separator.lastIndex = 0;\n            while (match = separator.exec(substring)) {\n              var newEnd = match.index;\n            }\n            result2 = result2.slice(0, newEnd === undefined$1 ? end : newEnd);\n          }\n        } else if (string.indexOf(baseToString(separator), end) != end) {\n          var index = result2.lastIndexOf(separator);\n          if (index > -1) {\n            result2 = result2.slice(0, index);\n          }\n        }\n        return result2 + omission;\n      }\n      function unescape2(string) {\n        string = toString2(string);\n        return string && reHasEscapedHtml.test(string) ? string.replace(reEscapedHtml, unescapeHtmlChar) : string;\n      }\n      var upperCase = createCompounder(function(result2, word, index) {\n        return result2 + (index ? \" \" : \"\") + word.toUpperCase();\n      });\n      var upperFirst = createCaseFirst(\"toUpperCase\");\n      function words(string, pattern2, guard) {\n        string = toString2(string);\n        pattern2 = guard ? undefined$1 : pattern2;\n        if (pattern2 === undefined$1) {\n          return hasUnicodeWord(string) ? unicodeWords(string) : asciiWords(string);\n        }\n        return string.match(pattern2) || [];\n      }\n      var attempt = baseRest(function(func, args) {\n        try {\n          return apply(func, undefined$1, args);\n        } catch (e) {\n          return isError(e) ? e : new Error2(e);\n        }\n      });\n      var bindAll = flatRest(function(object, methodNames) {\n        arrayEach(methodNames, function(key) {\n          key = toKey(key);\n          baseAssignValue(object, key, bind(object[key], object));\n        });\n        return object;\n      });\n      function cond(pairs2) {\n        var length = pairs2 == null ? 0 : pairs2.length, toIteratee = getIteratee();\n        pairs2 = !length ? [] : arrayMap(pairs2, function(pair) {\n          if (typeof pair[1] != \"function\") {\n            throw new TypeError2(FUNC_ERROR_TEXT);\n          }\n          return [toIteratee(pair[0]), pair[1]];\n        });\n        return baseRest(function(args) {\n          var index = -1;\n          while (++index < length) {\n            var pair = pairs2[index];\n            if (apply(pair[0], this, args)) {\n              return apply(pair[1], this, args);\n            }\n          }\n        });\n      }\n      function conforms(source) {\n        return baseConforms(baseClone(source, CLONE_DEEP_FLAG));\n      }\n      function constant(value) {\n        return function() {\n          return value;\n        };\n      }\n      function defaultTo(value, defaultValue) {\n        return value == null || value !== value ? defaultValue : value;\n      }\n      var flow = createFlow();\n      var flowRight = createFlow(true);\n      function identity2(value) {\n        return value;\n      }\n      function iteratee(func) {\n        return baseIteratee(typeof func == \"function\" ? func : baseClone(func, CLONE_DEEP_FLAG));\n      }\n      function matches(source) {\n        return baseMatches(baseClone(source, CLONE_DEEP_FLAG));\n      }\n      function matchesProperty(path, srcValue) {\n        return baseMatchesProperty(path, baseClone(srcValue, CLONE_DEEP_FLAG));\n      }\n      var method = baseRest(function(path, args) {\n        return function(object) {\n          return baseInvoke(object, path, args);\n        };\n      });\n      var methodOf = baseRest(function(object, args) {\n        return function(path) {\n          return baseInvoke(object, path, args);\n        };\n      });\n      function mixin(object, source, options) {\n        var props = keys(source), methodNames = baseFunctions(source, props);\n        if (options == null && !(isObject2(source) && (methodNames.length || !props.length))) {\n          options = source;\n          source = object;\n          object = this;\n          methodNames = baseFunctions(source, keys(source));\n        }\n        var chain2 = !(isObject2(options) && \"chain\" in options) || !!options.chain, isFunc = isFunction2(object);\n        arrayEach(methodNames, function(methodName) {\n          var func = source[methodName];\n          object[methodName] = func;\n          if (isFunc) {\n            object.prototype[methodName] = function() {\n              var chainAll = this.__chain__;\n              if (chain2 || chainAll) {\n                var result2 = object(this.__wrapped__), actions = result2.__actions__ = copyArray(this.__actions__);\n                actions.push({ \"func\": func, \"args\": arguments, \"thisArg\": object });\n                result2.__chain__ = chainAll;\n                return result2;\n              }\n              return func.apply(object, arrayPush([this.value()], arguments));\n            };\n          }\n        });\n        return object;\n      }\n      function noConflict() {\n        if (root._ === this) {\n          root._ = oldDash;\n        }\n        return this;\n      }\n      function noop2() {\n      }\n      function nthArg(n) {\n        n = toInteger(n);\n        return baseRest(function(args) {\n          return baseNth(args, n);\n        });\n      }\n      var over = createOver(arrayMap);\n      var overEvery = createOver(arrayEvery);\n      var overSome = createOver(arraySome);\n      function property(path) {\n        return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n      }\n      function propertyOf(object) {\n        return function(path) {\n          return object == null ? undefined$1 : baseGet(object, path);\n        };\n      }\n      var range2 = createRange();\n      var rangeRight = createRange(true);\n      function stubArray() {\n        return [];\n      }\n      function stubFalse() {\n        return false;\n      }\n      function stubObject() {\n        return {};\n      }\n      function stubString() {\n        return \"\";\n      }\n      function stubTrue() {\n        return true;\n      }\n      function times(n, iteratee2) {\n        n = toInteger(n);\n        if (n < 1 || n > MAX_SAFE_INTEGER) {\n          return [];\n        }\n        var index = MAX_ARRAY_LENGTH, length = nativeMin(n, MAX_ARRAY_LENGTH);\n        iteratee2 = getIteratee(iteratee2);\n        n -= MAX_ARRAY_LENGTH;\n        var result2 = baseTimes(length, iteratee2);\n        while (++index < n) {\n          iteratee2(index);\n        }\n        return result2;\n      }\n      function toPath(value) {\n        if (isArray2(value)) {\n          return arrayMap(value, toKey);\n        }\n        return isSymbol(value) ? [value] : copyArray(stringToPath(toString2(value)));\n      }\n      function uniqueId(prefix) {\n        var id = ++idCounter;\n        return toString2(prefix) + id;\n      }\n      var add2 = createMathOperation(function(augend, addend) {\n        return augend + addend;\n      }, 0);\n      var ceil = createRound(\"ceil\");\n      var divide2 = createMathOperation(function(dividend, divisor) {\n        return dividend / divisor;\n      }, 1);\n      var floor = createRound(\"floor\");\n      function max2(array) {\n        return array && array.length ? baseExtremum(array, identity2, baseGt) : undefined$1;\n      }\n      function maxBy(array, iteratee2) {\n        return array && array.length ? baseExtremum(array, getIteratee(iteratee2, 2), baseGt) : undefined$1;\n      }\n      function mean(array) {\n        return baseMean(array, identity2);\n      }\n      function meanBy(array, iteratee2) {\n        return baseMean(array, getIteratee(iteratee2, 2));\n      }\n      function min2(array) {\n        return array && array.length ? baseExtremum(array, identity2, baseLt) : undefined$1;\n      }\n      function minBy(array, iteratee2) {\n        return array && array.length ? baseExtremum(array, getIteratee(iteratee2, 2), baseLt) : undefined$1;\n      }\n      var multiply2 = createMathOperation(function(multiplier, multiplicand) {\n        return multiplier * multiplicand;\n      }, 1);\n      var round = createRound(\"round\");\n      var subtract2 = createMathOperation(function(minuend, subtrahend) {\n        return minuend - subtrahend;\n      }, 0);\n      function sum2(array) {\n        return array && array.length ? baseSum(array, identity2) : 0;\n      }\n      function sumBy(array, iteratee2) {\n        return array && array.length ? baseSum(array, getIteratee(iteratee2, 2)) : 0;\n      }\n      lodash2.after = after;\n      lodash2.ary = ary;\n      lodash2.assign = assign;\n      lodash2.assignIn = assignIn;\n      lodash2.assignInWith = assignInWith;\n      lodash2.assignWith = assignWith;\n      lodash2.at = at;\n      lodash2.before = before;\n      lodash2.bind = bind;\n      lodash2.bindAll = bindAll;\n      lodash2.bindKey = bindKey;\n      lodash2.castArray = castArray;\n      lodash2.chain = chain;\n      lodash2.chunk = chunk;\n      lodash2.compact = compact;\n      lodash2.concat = concat2;\n      lodash2.cond = cond;\n      lodash2.conforms = conforms;\n      lodash2.constant = constant;\n      lodash2.countBy = countBy;\n      lodash2.create = create;\n      lodash2.curry = curry;\n      lodash2.curryRight = curryRight;\n      lodash2.debounce = debounce2;\n      lodash2.defaults = defaults;\n      lodash2.defaultsDeep = defaultsDeep;\n      lodash2.defer = defer2;\n      lodash2.delay = delay2;\n      lodash2.difference = difference;\n      lodash2.differenceBy = differenceBy;\n      lodash2.differenceWith = differenceWith;\n      lodash2.drop = drop;\n      lodash2.dropRight = dropRight;\n      lodash2.dropRightWhile = dropRightWhile;\n      lodash2.dropWhile = dropWhile;\n      lodash2.fill = fill;\n      lodash2.filter = filter2;\n      lodash2.flatMap = flatMap2;\n      lodash2.flatMapDeep = flatMapDeep;\n      lodash2.flatMapDepth = flatMapDepth;\n      lodash2.flatten = flatten;\n      lodash2.flattenDeep = flattenDeep;\n      lodash2.flattenDepth = flattenDepth;\n      lodash2.flip = flip;\n      lodash2.flow = flow;\n      lodash2.flowRight = flowRight;\n      lodash2.fromPairs = fromPairs;\n      lodash2.functions = functions;\n      lodash2.functionsIn = functionsIn;\n      lodash2.groupBy = groupBy2;\n      lodash2.initial = initial;\n      lodash2.intersection = intersection;\n      lodash2.intersectionBy = intersectionBy;\n      lodash2.intersectionWith = intersectionWith;\n      lodash2.invert = invert;\n      lodash2.invertBy = invertBy;\n      lodash2.invokeMap = invokeMap;\n      lodash2.iteratee = iteratee;\n      lodash2.keyBy = keyBy;\n      lodash2.keys = keys;\n      lodash2.keysIn = keysIn;\n      lodash2.map = map2;\n      lodash2.mapKeys = mapKeys;\n      lodash2.mapValues = mapValues;\n      lodash2.matches = matches;\n      lodash2.matchesProperty = matchesProperty;\n      lodash2.memoize = memoize;\n      lodash2.merge = merge2;\n      lodash2.mergeWith = mergeWith;\n      lodash2.method = method;\n      lodash2.methodOf = methodOf;\n      lodash2.mixin = mixin;\n      lodash2.negate = negate2;\n      lodash2.nthArg = nthArg;\n      lodash2.omit = omit;\n      lodash2.omitBy = omitBy;\n      lodash2.once = once2;\n      lodash2.orderBy = orderBy;\n      lodash2.over = over;\n      lodash2.overArgs = overArgs;\n      lodash2.overEvery = overEvery;\n      lodash2.overSome = overSome;\n      lodash2.partial = partial;\n      lodash2.partialRight = partialRight;\n      lodash2.partition = partition2;\n      lodash2.pick = pick;\n      lodash2.pickBy = pickBy;\n      lodash2.property = property;\n      lodash2.propertyOf = propertyOf;\n      lodash2.pull = pull;\n      lodash2.pullAll = pullAll;\n      lodash2.pullAllBy = pullAllBy;\n      lodash2.pullAllWith = pullAllWith;\n      lodash2.pullAt = pullAt;\n      lodash2.range = range2;\n      lodash2.rangeRight = rangeRight;\n      lodash2.rearg = rearg;\n      lodash2.reject = reject;\n      lodash2.remove = remove;\n      lodash2.rest = rest;\n      lodash2.reverse = reverse;\n      lodash2.sampleSize = sampleSize2;\n      lodash2.set = set;\n      lodash2.setWith = setWith;\n      lodash2.shuffle = shuffle;\n      lodash2.slice = slice;\n      lodash2.sortBy = sortBy;\n      lodash2.sortedUniq = sortedUniq;\n      lodash2.sortedUniqBy = sortedUniqBy;\n      lodash2.split = split;\n      lodash2.spread = spread;\n      lodash2.tail = tail;\n      lodash2.take = take2;\n      lodash2.takeRight = takeRight;\n      lodash2.takeRightWhile = takeRightWhile;\n      lodash2.takeWhile = takeWhile2;\n      lodash2.tap = tap2;\n      lodash2.throttle = throttle2;\n      lodash2.thru = thru;\n      lodash2.toArray = toArray2;\n      lodash2.toPairs = toPairs;\n      lodash2.toPairsIn = toPairsIn;\n      lodash2.toPath = toPath;\n      lodash2.toPlainObject = toPlainObject;\n      lodash2.transform = transform;\n      lodash2.unary = unary;\n      lodash2.union = union;\n      lodash2.unionBy = unionBy;\n      lodash2.unionWith = unionWith;\n      lodash2.uniq = uniq;\n      lodash2.uniqBy = uniqBy2;\n      lodash2.uniqWith = uniqWith;\n      lodash2.unset = unset;\n      lodash2.unzip = unzip;\n      lodash2.unzipWith = unzipWith;\n      lodash2.update = update;\n      lodash2.updateWith = updateWith;\n      lodash2.values = values;\n      lodash2.valuesIn = valuesIn;\n      lodash2.without = without;\n      lodash2.words = words;\n      lodash2.wrap = wrap;\n      lodash2.xor = xor2;\n      lodash2.xorBy = xorBy;\n      lodash2.xorWith = xorWith;\n      lodash2.zip = zip2;\n      lodash2.zipObject = zipObject;\n      lodash2.zipObjectDeep = zipObjectDeep;\n      lodash2.zipWith = zipWith;\n      lodash2.entries = toPairs;\n      lodash2.entriesIn = toPairsIn;\n      lodash2.extend = assignIn;\n      lodash2.extendWith = assignInWith;\n      mixin(lodash2, lodash2);\n      lodash2.add = add2;\n      lodash2.attempt = attempt;\n      lodash2.camelCase = camelCase;\n      lodash2.capitalize = capitalize;\n      lodash2.ceil = ceil;\n      lodash2.clamp = clamp;\n      lodash2.clone = clone;\n      lodash2.cloneDeep = cloneDeep;\n      lodash2.cloneDeepWith = cloneDeepWith;\n      lodash2.cloneWith = cloneWith;\n      lodash2.conformsTo = conformsTo;\n      lodash2.deburr = deburr;\n      lodash2.defaultTo = defaultTo;\n      lodash2.divide = divide2;\n      lodash2.endsWith = endsWith;\n      lodash2.eq = eq;\n      lodash2.escape = escape;\n      lodash2.escapeRegExp = escapeRegExp;\n      lodash2.every = every2;\n      lodash2.find = find2;\n      lodash2.findIndex = findIndex2;\n      lodash2.findKey = findKey;\n      lodash2.findLast = findLast;\n      lodash2.findLastIndex = findLastIndex;\n      lodash2.findLastKey = findLastKey;\n      lodash2.floor = floor;\n      lodash2.forEach = forEach;\n      lodash2.forEachRight = forEachRight;\n      lodash2.forIn = forIn;\n      lodash2.forInRight = forInRight;\n      lodash2.forOwn = forOwn;\n      lodash2.forOwnRight = forOwnRight;\n      lodash2.get = get;\n      lodash2.gt = gt2;\n      lodash2.gte = gte;\n      lodash2.has = has;\n      lodash2.hasIn = hasIn;\n      lodash2.head = head;\n      lodash2.identity = identity2;\n      lodash2.includes = includes;\n      lodash2.indexOf = indexOf;\n      lodash2.inRange = inRange;\n      lodash2.invoke = invoke;\n      lodash2.isArguments = isArguments;\n      lodash2.isArray = isArray2;\n      lodash2.isArrayBuffer = isArrayBuffer;\n      lodash2.isArrayLike = isArrayLike2;\n      lodash2.isArrayLikeObject = isArrayLikeObject;\n      lodash2.isBoolean = isBoolean;\n      lodash2.isBuffer = isBuffer;\n      lodash2.isDate = isDate2;\n      lodash2.isElement = isElement;\n      lodash2.isEmpty = isEmpty2;\n      lodash2.isEqual = isEqual2;\n      lodash2.isEqualWith = isEqualWith;\n      lodash2.isError = isError;\n      lodash2.isFinite = isFinite2;\n      lodash2.isFunction = isFunction2;\n      lodash2.isInteger = isInteger;\n      lodash2.isLength = isLength;\n      lodash2.isMap = isMap;\n      lodash2.isMatch = isMatch;\n      lodash2.isMatchWith = isMatchWith;\n      lodash2.isNaN = isNaN2;\n      lodash2.isNative = isNative;\n      lodash2.isNil = isNil;\n      lodash2.isNull = isNull;\n      lodash2.isNumber = isNumber;\n      lodash2.isObject = isObject2;\n      lodash2.isObjectLike = isObjectLike;\n      lodash2.isPlainObject = isPlainObject;\n      lodash2.isRegExp = isRegExp;\n      lodash2.isSafeInteger = isSafeInteger;\n      lodash2.isSet = isSet;\n      lodash2.isString = isString;\n      lodash2.isSymbol = isSymbol;\n      lodash2.isTypedArray = isTypedArray;\n      lodash2.isUndefined = isUndefined2;\n      lodash2.isWeakMap = isWeakMap;\n      lodash2.isWeakSet = isWeakSet;\n      lodash2.join = join;\n      lodash2.kebabCase = kebabCase;\n      lodash2.last = last2;\n      lodash2.lastIndexOf = lastIndexOf;\n      lodash2.lowerCase = lowerCase;\n      lodash2.lowerFirst = lowerFirst;\n      lodash2.lt = lt;\n      lodash2.lte = lte;\n      lodash2.max = max2;\n      lodash2.maxBy = maxBy;\n      lodash2.mean = mean;\n      lodash2.meanBy = meanBy;\n      lodash2.min = min2;\n      lodash2.minBy = minBy;\n      lodash2.stubArray = stubArray;\n      lodash2.stubFalse = stubFalse;\n      lodash2.stubObject = stubObject;\n      lodash2.stubString = stubString;\n      lodash2.stubTrue = stubTrue;\n      lodash2.multiply = multiply2;\n      lodash2.nth = nth;\n      lodash2.noConflict = noConflict;\n      lodash2.noop = noop2;\n      lodash2.now = now;\n      lodash2.pad = pad;\n      lodash2.padEnd = padEnd;\n      lodash2.padStart = padStart;\n      lodash2.parseInt = parseInt2;\n      lodash2.random = random;\n      lodash2.reduce = reduce2;\n      lodash2.reduceRight = reduceRight;\n      lodash2.repeat = repeat2;\n      lodash2.replace = replace;\n      lodash2.result = result;\n      lodash2.round = round;\n      lodash2.runInContext = runInContext2;\n      lodash2.sample = sample2;\n      lodash2.size = size;\n      lodash2.snakeCase = snakeCase;\n      lodash2.some = some;\n      lodash2.sortedIndex = sortedIndex;\n      lodash2.sortedIndexBy = sortedIndexBy;\n      lodash2.sortedIndexOf = sortedIndexOf;\n      lodash2.sortedLastIndex = sortedLastIndex;\n      lodash2.sortedLastIndexBy = sortedLastIndexBy;\n      lodash2.sortedLastIndexOf = sortedLastIndexOf;\n      lodash2.startCase = startCase;\n      lodash2.startsWith = startsWith;\n      lodash2.subtract = subtract2;\n      lodash2.sum = sum2;\n      lodash2.sumBy = sumBy;\n      lodash2.template = template;\n      lodash2.times = times;\n      lodash2.toFinite = toFinite;\n      lodash2.toInteger = toInteger;\n      lodash2.toLength = toLength;\n      lodash2.toLower = toLower;\n      lodash2.toNumber = toNumber2;\n      lodash2.toSafeInteger = toSafeInteger;\n      lodash2.toString = toString2;\n      lodash2.toUpper = toUpper;\n      lodash2.trim = trim;\n      lodash2.trimEnd = trimEnd;\n      lodash2.trimStart = trimStart;\n      lodash2.truncate = truncate;\n      lodash2.unescape = unescape2;\n      lodash2.uniqueId = uniqueId;\n      lodash2.upperCase = upperCase;\n      lodash2.upperFirst = upperFirst;\n      lodash2.each = forEach;\n      lodash2.eachRight = forEachRight;\n      lodash2.first = head;\n      mixin(lodash2, function() {\n        var source = {};\n        baseForOwn(lodash2, function(func, methodName) {\n          if (!hasOwnProperty.call(lodash2.prototype, methodName)) {\n            source[methodName] = func;\n          }\n        });\n        return source;\n      }(), { \"chain\": false });\n      lodash2.VERSION = VERSION;\n      arrayEach([\"bind\", \"bindKey\", \"curry\", \"curryRight\", \"partial\", \"partialRight\"], function(methodName) {\n        lodash2[methodName].placeholder = lodash2;\n      });\n      arrayEach([\"drop\", \"take\"], function(methodName, index) {\n        LazyWrapper.prototype[methodName] = function(n) {\n          n = n === undefined$1 ? 1 : nativeMax(toInteger(n), 0);\n          var result2 = this.__filtered__ && !index ? new LazyWrapper(this) : this.clone();\n          if (result2.__filtered__) {\n            result2.__takeCount__ = nativeMin(n, result2.__takeCount__);\n          } else {\n            result2.__views__.push({\n              \"size\": nativeMin(n, MAX_ARRAY_LENGTH),\n              \"type\": methodName + (result2.__dir__ < 0 ? \"Right\" : \"\")\n            });\n          }\n          return result2;\n        };\n        LazyWrapper.prototype[methodName + \"Right\"] = function(n) {\n          return this.reverse()[methodName](n).reverse();\n        };\n      });\n      arrayEach([\"filter\", \"map\", \"takeWhile\"], function(methodName, index) {\n        var type2 = index + 1, isFilter = type2 == LAZY_FILTER_FLAG || type2 == LAZY_WHILE_FLAG;\n        LazyWrapper.prototype[methodName] = function(iteratee2) {\n          var result2 = this.clone();\n          result2.__iteratees__.push({\n            \"iteratee\": getIteratee(iteratee2, 3),\n            \"type\": type2\n          });\n          result2.__filtered__ = result2.__filtered__ || isFilter;\n          return result2;\n        };\n      });\n      arrayEach([\"head\", \"last\"], function(methodName, index) {\n        var takeName = \"take\" + (index ? \"Right\" : \"\");\n        LazyWrapper.prototype[methodName] = function() {\n          return this[takeName](1).value()[0];\n        };\n      });\n      arrayEach([\"initial\", \"tail\"], function(methodName, index) {\n        var dropName = \"drop\" + (index ? \"\" : \"Right\");\n        LazyWrapper.prototype[methodName] = function() {\n          return this.__filtered__ ? new LazyWrapper(this) : this[dropName](1);\n        };\n      });\n      LazyWrapper.prototype.compact = function() {\n        return this.filter(identity2);\n      };\n      LazyWrapper.prototype.find = function(predicate) {\n        return this.filter(predicate).head();\n      };\n      LazyWrapper.prototype.findLast = function(predicate) {\n        return this.reverse().find(predicate);\n      };\n      LazyWrapper.prototype.invokeMap = baseRest(function(path, args) {\n        if (typeof path == \"function\") {\n          return new LazyWrapper(this);\n        }\n        return this.map(function(value) {\n          return baseInvoke(value, path, args);\n        });\n      });\n      LazyWrapper.prototype.reject = function(predicate) {\n        return this.filter(negate2(getIteratee(predicate)));\n      };\n      LazyWrapper.prototype.slice = function(start, end) {\n        start = toInteger(start);\n        var result2 = this;\n        if (result2.__filtered__ && (start > 0 || end < 0)) {\n          return new LazyWrapper(result2);\n        }\n        if (start < 0) {\n          result2 = result2.takeRight(-start);\n        } else if (start) {\n          result2 = result2.drop(start);\n        }\n        if (end !== undefined$1) {\n          end = toInteger(end);\n          result2 = end < 0 ? result2.dropRight(-end) : result2.take(end - start);\n        }\n        return result2;\n      };\n      LazyWrapper.prototype.takeRightWhile = function(predicate) {\n        return this.reverse().takeWhile(predicate).reverse();\n      };\n      LazyWrapper.prototype.toArray = function() {\n        return this.take(MAX_ARRAY_LENGTH);\n      };\n      baseForOwn(LazyWrapper.prototype, function(func, methodName) {\n        var checkIteratee = /^(?:filter|find|map|reject)|While$/.test(methodName), isTaker = /^(?:head|last)$/.test(methodName), lodashFunc = lodash2[isTaker ? \"take\" + (methodName == \"last\" ? \"Right\" : \"\") : methodName], retUnwrapped = isTaker || /^find/.test(methodName);\n        if (!lodashFunc) {\n          return;\n        }\n        lodash2.prototype[methodName] = function() {\n          var value = this.__wrapped__, args = isTaker ? [1] : arguments, isLazy = value instanceof LazyWrapper, iteratee2 = args[0], useLazy = isLazy || isArray2(value);\n          var interceptor = function(value2) {\n            var result3 = lodashFunc.apply(lodash2, arrayPush([value2], args));\n            return isTaker && chainAll ? result3[0] : result3;\n          };\n          if (useLazy && checkIteratee && typeof iteratee2 == \"function\" && iteratee2.length != 1) {\n            isLazy = useLazy = false;\n          }\n          var chainAll = this.__chain__, isHybrid = !!this.__actions__.length, isUnwrapped = retUnwrapped && !chainAll, onlyLazy = isLazy && !isHybrid;\n          if (!retUnwrapped && useLazy) {\n            value = onlyLazy ? value : new LazyWrapper(this);\n            var result2 = func.apply(value, args);\n            result2.__actions__.push({ \"func\": thru, \"args\": [interceptor], \"thisArg\": undefined$1 });\n            return new LodashWrapper(result2, chainAll);\n          }\n          if (isUnwrapped && onlyLazy) {\n            return func.apply(this, args);\n          }\n          result2 = this.thru(interceptor);\n          return isUnwrapped ? isTaker ? result2.value()[0] : result2.value() : result2;\n        };\n      });\n      arrayEach([\"pop\", \"push\", \"shift\", \"sort\", \"splice\", \"unshift\"], function(methodName) {\n        var func = arrayProto[methodName], chainName = /^(?:push|sort|unshift)$/.test(methodName) ? \"tap\" : \"thru\", retUnwrapped = /^(?:pop|shift)$/.test(methodName);\n        lodash2.prototype[methodName] = function() {\n          var args = arguments;\n          if (retUnwrapped && !this.__chain__) {\n            var value = this.value();\n            return func.apply(isArray2(value) ? value : [], args);\n          }\n          return this[chainName](function(value2) {\n            return func.apply(isArray2(value2) ? value2 : [], args);\n          });\n        };\n      });\n      baseForOwn(LazyWrapper.prototype, function(func, methodName) {\n        var lodashFunc = lodash2[methodName];\n        if (lodashFunc) {\n          var key = lodashFunc.name + \"\";\n          if (!hasOwnProperty.call(realNames, key)) {\n            realNames[key] = [];\n          }\n          realNames[key].push({ \"name\": methodName, \"func\": lodashFunc });\n        }\n      });\n      realNames[createHybrid(undefined$1, WRAP_BIND_KEY_FLAG).name] = [{\n        \"name\": \"wrapper\",\n        \"func\": undefined$1\n      }];\n      LazyWrapper.prototype.clone = lazyClone;\n      LazyWrapper.prototype.reverse = lazyReverse;\n      LazyWrapper.prototype.value = lazyValue;\n      lodash2.prototype.at = wrapperAt;\n      lodash2.prototype.chain = wrapperChain;\n      lodash2.prototype.commit = wrapperCommit;\n      lodash2.prototype.next = wrapperNext;\n      lodash2.prototype.plant = wrapperPlant;\n      lodash2.prototype.reverse = wrapperReverse;\n      lodash2.prototype.toJSON = lodash2.prototype.valueOf = lodash2.prototype.value = wrapperValue;\n      lodash2.prototype.first = lodash2.prototype.head;\n      if (symIterator) {\n        lodash2.prototype[symIterator] = wrapperToIterator;\n      }\n      return lodash2;\n    };\n    var _ = runInContext();\n    if (freeModule) {\n      (freeModule.exports = _)._ = _;\n      freeExports._ = _;\n    } else {\n      root._ = _;\n    }\n  }).call(commonjsGlobal);\n})(lodash, lodash.exports);\nfunction omitDeep(spec, omitKeys) {\n  return lodash.exports.cloneDeepWith(spec, (value) => {\n    if (value && typeof value === \"object\") {\n      omitKeys.forEach((key) => {\n        delete value[key];\n      });\n    }\n  });\n}\nconst DELAY_FOR_CONTAINER_RESIZE_BEFORE_RERENDER = 300;\nconst GoslingComponent = forwardRef((props, ref2) => {\n  var _a, _b, _c;\n  const [viewConfig, setViewConfig] = useState();\n  const [size, setSize] = useState({ width: 200, height: 200 });\n  const wrapperSize = useRef();\n  const wrapperParentSize = useRef();\n  const prevSpec = useRef();\n  const hgRef = useRef(null);\n  const theme = getTheme(props.theme || \"light\");\n  const wrapperDivId = (_a = props.id) != null ? _a : v4();\n  useEffect(() => {\n    if (!ref2 || !(hgRef == null ? void 0 : hgRef.current))\n      return;\n    const hgApi = hgRef.current;\n    const api = createApi(hgApi, viewConfig, theme);\n    if (typeof ref2 == \"function\") {\n      ref2({ api, hgApi });\n    } else {\n      ref2.current = { api, hgApi };\n    }\n  }, [viewConfig, theme]);\n  const compile$12 = useCallback(() => {\n    if (props.spec) {\n      const valid = validateGoslingSpec(props.spec);\n      if (valid.state === \"error\") {\n        console.warn(\"Gosling spec is not valid. Please refer to the console message.\");\n        return;\n      }\n      compile(props.spec, (newHs, newSize, newGs) => {\n        var _a2, _b2;\n        if (prevSpec.current && lodash.exports.isEqual(omitDeep(prevSpec.current, [\"linkingId\"]), omitDeep(newGs, [\"linkingId\"]))) {\n          return;\n        }\n        (_a2 = props.compiled) == null ? void 0 : _a2.call(props, props.spec, newHs);\n        setSize(newSize);\n        const isMountedOnce = typeof viewConfig !== \"undefined\";\n        if (((_b2 = props.experimental) == null ? void 0 : _b2.reactive) && isMountedOnce) {\n          setTimeout(() => {\n            var _a3;\n            (_a3 = hgRef.current) == null ? void 0 : _a3.api.setViewConfig(newHs);\n          }, DELAY_FOR_CONTAINER_RESIZE_BEFORE_RERENDER);\n        } else {\n          setViewConfig(newHs);\n        }\n        prevSpec.current = newGs;\n      }, [...GoslingTemplates], theme, {\n        containerSize: wrapperSize.current,\n        containerParentSize: wrapperParentSize.current\n      });\n    }\n  }, [props.spec, theme]);\n  useEffect(() => {\n    const containerElement = document.getElementById(wrapperDivId);\n    if (!containerElement)\n      return;\n    const resizer = new ResizeSensor(containerElement, (newSize) => {\n      if (!wrapperSize.current || wrapperSize.current.height !== newSize.height || wrapperSize.current.width !== newSize.width) {\n        wrapperSize.current = newSize;\n        compile$12();\n      }\n    });\n    const parentElement = containerElement.parentElement;\n    if (!parentElement)\n      return;\n    const parentResizer = new ResizeSensor(parentElement, (newSize) => {\n      if (!wrapperParentSize.current || wrapperParentSize.current.height !== newSize.height || wrapperParentSize.current.width !== newSize.width) {\n        wrapperParentSize.current = newSize;\n        compile$12();\n      }\n    });\n    return () => {\n      resizer.detach();\n      parentResizer.detach();\n    };\n  });\n  useEffect(() => {\n    compile$12();\n  }, [props.spec, theme]);\n  const responsiveHeight = typeof ((_b = props.spec) == null ? void 0 : _b.responsiveSize) !== \"object\" ? (_c = props.spec) == null ? void 0 : _c.responsiveSize : props.spec.responsiveSize.height;\n  const higlassComponent = useMemo(() => {\n    var _a2, _b2, _c2;\n    return /* @__PURE__ */ React.createElement(HiGlassComponentWrapper, {\n      ref: hgRef,\n      viewConfig,\n      size,\n      id: wrapperDivId,\n      className: props.className,\n      options: {\n        padding: props.padding,\n        border: props.border,\n        margin: props.margin,\n        responsiveWidth: typeof ((_a2 = props.spec) == null ? void 0 : _a2.responsiveSize) !== \"object\" ? (_b2 = props.spec) == null ? void 0 : _b2.responsiveSize : props.spec.responsiveSize.width,\n        responsiveHeight,\n        background: theme.root.background,\n        alt: (_c2 = props.spec) == null ? void 0 : _c2.description\n      }\n    });\n  }, [viewConfig, size, theme, responsiveHeight]);\n  return higlassComponent;\n});\nconst MAX_TRIES = 20;\nconst INTERVAL = 200;\nconst launchHiglass = (element, viewConfig, size, opts) => {\n  const ref2 = React.createRef();\n  const component = React.createElement(HiGlassComponentWrapper, {\n    ref: ref2,\n    viewConfig,\n    size,\n    id: opts.id,\n    className: opts.className,\n    options: opts\n  });\n  ReactDOM.render(component, element);\n  return new Promise((resolve2, reject) => {\n    let tries = 0;\n    const poll = setInterval(() => {\n      if (ref2 && ref2.current) {\n        clearInterval(poll);\n        resolve2(ref2.current);\n      }\n      if (tries >= MAX_TRIES) {\n        reject(new Error(\"Failed to initialize HiGlassApi.\"));\n      }\n      tries++;\n    }, INTERVAL);\n  });\n};\nfunction embed(element, spec, opts = {}) {\n  return new Promise((resolve2, reject) => {\n    var _a, _b;\n    const valid = validateGoslingSpec(spec);\n    if (valid.state === \"error\") {\n      reject(new Error(\"Gosling spec is not valid. Please refer to the console message.\"));\n    }\n    const theme = getTheme(opts.theme || \"light\");\n    const options = {\n      ...opts,\n      background: theme.root.background,\n      alt: (_b = (_a = opts.alt) != null ? _a : spec.description) != null ? _b : \"Gosling visualization\"\n    };\n    compile(spec, async (hsSpec, size) => {\n      const hg = await launchHiglass(element, hsSpec, size, options);\n      const api = createApi(hg, hsSpec, theme);\n      resolve2(api);\n    }, [...GoslingTemplates], theme, {});\n  });\n}\nexport { GoslingComponent, GoslingSchema, GoslingTemplates, theme_schema as ThemeSchema, compile, embed, init, name, validateGoslingSpec, version };\n//# sourceMappingURL=gosling.es.js.map\n","import { tsvParseRows } from \"d3-dsv\";\nimport { text } from \"d3-request\";\n\n// Supported `bin_length` in the cistrome APIs\nconst BIN_LENGTHS = [25,50,100,200,500,1000,2000,4000,8000,16000,32000,64000,128000];\n\nconst chrToAbs = (chrom, chromPos, chromInfo) => {\n    return chromInfo.chrPositions[chrom].pos + chromPos;\n};\n\nfunction parseChromsizesRows(data) {\n    const cumValues = [];\n    const chromLengths = {};\n    const chrPositions = {};\n\n    let totalLength = 0;\n\n    for (let i = 0; i < data.length; i++) {\n        const length = Number(data[i][1]);\n        totalLength += length;\n\n        const newValue = {\n            id: i,\n            chr: data[i][0],\n            pos: totalLength - length,\n        };\n\n        cumValues.push(newValue);\n        chrPositions[newValue.chr] = newValue;\n        chromLengths[data[i][0]] = length;\n    }\n\n    return {\n        chrToAbs: ([chrName, chrPos]) =>\n            chrToAbs(chrName, chrPos, { chrPositions }),\n        cumPositions: cumValues,\n        chrPositions,\n        totalLength,\n        chromLengths,\n    };\n}\n\nfunction ChromosomeInfo(filepath, success) {\n    const ret = {};\n\n    // ret.absToChr = (absPos) => (ret.chrPositions ? absToChr(absPos, ret) : null);\n\n    ret.chrToAbs = ([chrName, chrPos] = []) =>\n        ret.chrPositions ? chrToAbs(chrName, chrPos, ret) : null;\n\n    return text(filepath, (error, chrInfoText) => {\n        if (error) {\n            // console.warn('Chromosome info not found at:', filepath);\n            if (success) success(null);\n        } else {\n            const data = tsvParseRows(chrInfoText);\n            const chromInfo = parseChromsizesRows(data);\n\n            Object.keys(chromInfo).forEach((key) => {\n                ret[key] = chromInfo[key];\n            });\n            if (success) success(ret);\n        }\n    });\n}\n\nconst CistromeDataFetcher = function CistromeBigWigDataFetcher(HGC, ...args) {\n    if (!new.target) {\n        throw new Error(\n            \"Uncaught TypeError: Class constructor cannot be invoked without \\\"new\\\"\"\n        );\n    }\n\n    class CistromeDataFetcherClass {\n        constructor(dataConfig) {\n            this.dataConfig = dataConfig;\n            this.bwFileHeader = null;\n            this.bwFile = null;\n            this.TILE_SIZE = 1024;\n\n            this.errorTxt = \"\";\n            this.dataPromises = [];\n            this.dataPromises.push(this.loadChromsizes(dataConfig));\n            // this.dataPromises.push(this.loadBBI(dataConfig));\n        }\n\n        loadChromsizes(dataConfig) {\n            if (dataConfig.chromSizesUrl) {\n                return new Promise((resolve) => {\n                    ChromosomeInfo(dataConfig.chromSizesUrl, (chromInfo) => {\n                        this.chromSizes = chromInfo;\n                        resolve();\n                    });\n                });\n            } else {\n                console.error(\n                    \"Please enter a \\\"chromSizesUrl\\\" field to the data config\"\n                );\n            }\n            return null;\n        }\n\n        tilesetInfo(callback) {\n            this.tilesetInfoLoading = true;\n\n            return Promise.all(this.dataPromises)\n                .then(() => {\n                    this.tilesetInfoLoading = false;\n\n                    let retVal = {};\n\n                    const totalLength = this.chromSizes.totalLength;\n\n                    retVal = {\n                        tile_size: this.TILE_SIZE,\n                        max_zoom: Math.ceil(\n                            Math.log(totalLength / this.TILE_SIZE) / Math.log(2)\n                        ),\n                        max_width: 2 ** Math.ceil(Math.log(totalLength) / Math.log(2)),\n                        min_pos: [0],\n                        max_pos: [totalLength],\n                    };\n\n                    if (callback) {\n                        callback(retVal);\n                    }\n\n                    return retVal;\n                })\n                .catch((err) => {\n                    this.tilesetInfoLoading = false;\n\n                    console.error(err);\n\n                    if (callback) {\n                        callback({\n                            error: `Error parsing bigwig: ${err}`,\n                        });\n                    }\n                });\n        }\n\n        fetchTilesDebounced(receivedTiles, tileIds) {\n            const tiles = {};\n\n            const validTileIds = [];\n            const tilePromises = [];\n\n            for (const tileId of tileIds) {\n                const parts = tileId.split(\".\");\n                const z = parseInt(parts[0], 10);\n                const x = parseInt(parts[1], 10);\n\n                if (Number.isNaN(x) || Number.isNaN(z)) {\n                    console.warn(\"Invalid tile zoom or position:\", z, x);\n                    continue;\n                }\n\n                validTileIds.push(tileId);\n                tilePromises.push(this.tile(z, x));\n            }\n\n            Promise.all(tilePromises).then((values) => {\n                for (let i = 0; i < values.length; i++) {\n                    const validTileId = validTileIds[i];\n                    tiles[validTileId] = values[i];\n                    tiles[validTileId].tilePositionId = validTileId;\n                }\n\n                receivedTiles(tiles);\n            });\n            // tiles = tileResponseToData(tiles, null, tileIds);\n            return tiles;\n        }\n\n        tile(z, x) {\n            return this.tilesetInfo().then((tsInfo) => {\n                const tileWidth = +tsInfo.max_width / 2 ** +z;\n\n                const recordPromises = [];\n\n                const tile = {\n                    tilePos: [x],\n                    tileId: \"bigwig.\" + z + \".\" + x,\n                    zoomLevel: z,\n                };\n\n                // get the bounds of the tile\n                const minXOriginal = tsInfo.min_pos[0] + x * tileWidth;\n                let minX = minXOriginal;\n                const maxX = tsInfo.min_pos[0] + (x + 1) * tileWidth;\n\n                // const basesPerPixel = this.determineScale(minX, maxX);\n                const getBinLength = (bpSize) => {\n                    const expected = bpSize / this.TILE_SIZE;\n                    let actual = BIN_LENGTHS[BIN_LENGTHS.length - 1]; // 1000;\n                    BIN_LENGTHS.forEach(l => {\n                        if(Math.abs(expected - l) < Math.abs(expected - actual) && bpSize / l < 500) {\n                            actual = l;\n                        }\n                    });\n                    return actual;\n                };\n                const basesPerBin = getBinLength(maxX - minX); \n\n                const binStarts = [];\n                for (let i = 0; i < this.TILE_SIZE; i++) {\n                    binStarts.push(minX + i * basesPerBin);\n                }\n\n                const { chromLengths, cumPositions } = this.chromSizes;\n\n                const query = (c, s, e, cs) => {\n                    return fetch(`http://develop.cistrome.org/cistrome/samples/${this.dataConfig.cid}/track?chrom=${c}&start_pos=${s}&end_pos=${e}&bin_length=${basesPerBin}`)\n                        .then((response) => response.json())\n                        .then((data) => {\n                            const { values, multiplier, bin_size } = data;\n                            return values.map((v, i) => {\n                                return {\n                                    value: v / multiplier,\n                                    start: cs + s + i * bin_size,\n                                    end: cs + s + (i + 1) * bin_size,\n                                };\n                            });\n                        });\n                };\n\n                for (let i = 0; i < cumPositions.length; i++) {\n                    const chromName = cumPositions[i].chr;\n                    const chromStart = cumPositions[i].pos;\n                    const chromEnd = cumPositions[i].pos + chromLengths[chromName];\n\n                    let startPos, endPos;\n\n                    if (chromStart <= minX && minX < chromEnd) {\n                        // start of the visible region is within this chromosome\n\n                        if (maxX > chromEnd) {\n                            // the visible region extends beyond the end of this chromosome\n                            // fetch from the start until the end of the chromosome\n                            if((chromEnd - minX) / basesPerBin > 500) {\n                                // This means the number of bins are more than 500, so not allowed in Cistrome APIs.\n                                // We need to separate bins.\n                                const cnt = Math.ceil((chromEnd - minX) / basesPerBin / 500);\n                                const subBinSize = Math.ceil((chromEnd - minX) / cnt);\n                                for(let i = 0; minX + subBinSize * i < chromEnd; i++) {\n                                    startPos = Math.floor(minX + subBinSize * i - chromStart);\n                                    endPos = Math.ceil(Math.min(chromEnd, minX + subBinSize * (i + 1)) - chromStart);\n                                    recordPromises.push(query(chromName, startPos, endPos, chromStart));\n                                }\n                            } else {\n                                startPos = minX - chromStart;\n                                endPos = chromEnd - chromStart;\n                                recordPromises.push(query(chromName, startPos, endPos, chromStart));\n                            }\n                            minX = chromEnd;\n                        } else {\n                            if((maxX - minX) / basesPerBin > 500) {\n                                // This means the number of bins are more than 500, so not allowed in Cistrome APIs.\n                                // We need to separate bins.\n                                const cnt = Math.ceil((maxX - minX) / basesPerBin / 500);\n                                const subBinSize = Math.ceil((maxX - minX) / cnt);\n                                for(let i = 0; minX + subBinSize * i < maxX; i++) {\n                                    startPos = Math.floor(minX + subBinSize * i - chromStart);\n                                    endPos = Math.ceil(minX + Math.min(maxX, subBinSize * (i + 1)) - chromStart);\n                                    recordPromises.push(query(chromName, startPos, endPos, chromStart));\n                                }\n                            } else {\n                                startPos = Math.floor(minX - chromStart);\n                                endPos = Math.ceil(maxX - chromStart);\n                                recordPromises.push(query(chromName, startPos, endPos, chromStart));\n                            }\n                            break;\n                        }\n                    }\n                }\n\n                return Promise.all(recordPromises).then((v) => {\n                    const values = v.flat();\n\n                    var dense = [];\n                    for (var i = 0; i < this.TILE_SIZE; i++) {\n                        dense.push(null);\n                    }\n\n                    // Currently we use the same binning strategy in all cases (basesPerBin =>< basesPerBinInFile)\n                    binStarts.forEach((curStart, index) => {\n                        if (curStart < minXOriginal || curStart > maxX) {\n                            return;\n                        }\n                        const filtered = values\n                            .filter((v) => {\n                                return curStart >= v.startAbs && curStart < v.endAbs;\n                            })\n                            .map((v) => v.score);\n                        dense[index] = filtered.length > 0 ? filtered[0] : null;\n                    });\n\n                    tile.tabularData = values;\n                    return tile;\n                });\n            });\n        }\n\n        // We never want to request more than 1024 * 20 elements from the file.\n        determineScale(minX, maxX) {\n            const reductionLevels = [1];\n            const numRequestedElements = maxX - minX;\n\n            this.bwFileHeader.zoomLevels.forEach((z) => {\n                reductionLevels.push(z.reductionLevel);\n            });\n\n            for (var i = 0; i < reductionLevels.length; i++) {\n                const rl = reductionLevels[i];\n                const numElementsFromFile = numRequestedElements / rl;\n                if (numElementsFromFile <= this.TILE_SIZE * 20) {\n                    return rl;\n                }\n            }\n\n            // return the highest reductionLevel, if we could not find anything better\n            return reductionLevels.slice(-1)[0];\n        }\n    }\n\n    return new CistromeDataFetcherClass(...args);\n}; // end function wrapper\n\nCistromeDataFetcher.config = {\n    type: \"bigwig\",\n};\n\nexport default CistromeDataFetcher;\n","import * as React from 'react';\nimport { GoslingComponent } from 'gosling.js';\nimport CistromeDataFetcher from \"./plugin/cistrome-datafetcher\";\nimport { default as hgRegister } from \"higlass-register\";\n\n// register the custom data-fetcher\nhgRegister(\n    { dataFetcher: CistromeDataFetcher, config: CistromeDataFetcher.config },\n    { pluginType: \"dataFetcher\", force: true }\n);\n\nfunction App() {\n\treturn (\n\t\t<GoslingComponent spec={{\n\t\t\ttracks: [{\n\t\t\t\tdata: {\n\t\t\t\t\ttype: 'experimentalPlugin',\n\t\t\t\t\tname: 'bigwig',\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tcid: 1,\n\t\t\t\t\t\tchromSizesUrl: \"https://aveit.s3.amazonaws.com/higlass/data/sequence/hg38.chrom.sizes\",\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\ttitle: 'Gosling Track Based On Plugin Data-Fetcher',\n\t\t\t\tmark: \"bar\",\n\t\t\t\tx: { field: \"start\", type: \"genomic\" },\n\t\t\t\txe: { field: \"end\", type: \"genomic\" },\n\t\t\t\ty: { field: \"value\", type: \"quantitative\", axis: \"none\" },\n\t\t\t\tcolor: { value: \"#22908D\" },\n\t\t\t\ttooltip: [\n\t\t\t\t\t{ field: \"start\", type: \"genomic\" },\n\t\t\t\t\t{ field: \"end\", type: \"genomic\" },\n\t\t\t\t\t{ field: \"value\", type: \"quantitative\" },\n\t\t\t\t],\n\t\t\t\tstyle: { outlineWidth: 0 },\n\t\t\t\twidth: 600,\n\t\t\t\theight: 100\n\t\t\t}]\n\t\t}}/>\n\t);\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(\n\t<App/>,\n\tdocument.getElementById('root')\n);\n"],"sourceRoot":""}